var F=Object.defineProperty;var i=(t,e)=>F(t,"name",{value:e,configurable:!0});import{G as K}from"./Grow-c7f69e47.js";import{M as N}from"./Modal-428524ab.js";import{P as V}from"./Paper-355f0f45.js";import{K as X,L as Y,G as q,O as A,x as b,w as f,f as x,p as I,c as m,H as D}from"./ErrorPage-7e24a11e.js";import{p as J}from"./ListItemText-97540f66.js";import{d as Q}from"./debounce-60370e19.js";import{o as z}from"./ownerDocument-5bb7a871.js";import{o as M}from"./ownerWindow-09898c5b.js";function Z(t){return Y("MuiPopover",t)}i(Z,"getPopoverUtilityClass");X("MuiPopover",["root","paper"]);const d=q()({name:"MuiPopover",selfPropNames:["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","classes","container","elevation","marginThreshold","onClose","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"],utilityClass:Z,slotClasses:()=>({root:["root"],paper:["paper"]})});function W(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.height/2:e==="bottom"&&(n=t.height),n}i(W,"getOffsetTop");function H(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.width/2:e==="right"&&(n=t.width),n}i(H,"getOffsetLeft");function S(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}i(S,"getTransformOriginValue");function u(t){return typeof t=="function"?t():t}i(u,"resolveAnchorEl");const _=A(N,{name:"MuiPopover",slot:"Root",overridesResolver:(t,e)=>e.root})({}),nn=A(V,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),fn=d.defineComponent(i(function(e){const n=d.useThemeProps({props:e}),[,L]=b(n,["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","class","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"]),o=f({anchorOrigin:{vertical:"top",horizontal:"left"},anchorReference:"anchorEl",elevation:8,marginThreshold:16,PaperProps:{},transformOrigin:{vertical:"top",horizontal:"left"},TransitionComponent:K,transitionDuration:"auto"},n),[,P]=b(f(()=>n.TransitionProps||{}),["onEntering"]),g=J(()=>o.PaperProps.ref),v=f(n,{get anchorOrigin(){return o.anchorOrigin},get anchorReference(){return o.anchorReference},get elevation(){return o.elevation},get marginThreshold(){return o.marginThreshold},get PaperProps(){return o.PaperProps},get transformOrigin(){return o.transformOrigin},get TransitionComponent(){return o.TransitionComponent},get transitionDuration(){return o.transitionDuration},TransitionProps:P}),T=d.useClasses(v),$=i(()=>{if(o.anchorReference==="anchorPosition")return n.anchorPosition;const r=u(n.anchorEl),a=(r&&r.nodeType===1?r:z(g.current).body).getBoundingClientRect();return{top:a.top+W(a,o.anchorOrigin.vertical),left:a.left+H(a,o.anchorOrigin.horizontal)}},"getAnchorOffset"),G=i(r=>({vertical:W(r,o.transformOrigin.vertical),horizontal:H(r,o.transformOrigin.horizontal)}),"getTransformOrigin"),U=i(r=>{const s={width:r.offsetWidth,height:r.offsetHeight},a=G(s);if(o.anchorReference==="none")return{top:null,left:null,transformOrigin:S(a)};const O=$();let l=O.top-a.vertical,p=O.left-a.horizontal;const y=l+s.height,E=p+s.width,C=M(u(n.anchorEl)),w=C.innerHeight-o.marginThreshold,R=C.innerWidth-o.marginThreshold;if(l<o.marginThreshold){const c=l-o.marginThreshold;l-=c,a.vertical+=c}else if(y>w){const c=y-w;l-=c,a.vertical+=c}if(p<o.marginThreshold){const c=p-o.marginThreshold;p-=c,a.horizontal+=c}else if(E>R){const c=E-R;p-=c,a.horizontal+=c}return{top:`${Math.round(l)}px`,left:`${Math.round(p)}px`,transformOrigin:S(a)}},"getPositioningStyle"),h=i(()=>{const r=g.current;if(!r)return;const s=U(r);s.top!==null&&(r.style.top=s.top),s.left!==null&&(r.style.left=s.left),r.style.transformOrigin=s.transformOrigin},"setPositioningStyles"),B=i(()=>{n.TransitionProps?.onEntering&&n.TransitionProps?.onEntering(),h()},"handleEntering");x(()=>{n.open&&h()}),typeof n.action=="function"&&n.action({updatePosition:()=>{n.open&&h()}}),x(I(()=>[n.anchorEl,n.open,h],()=>{if(!n.open)return;const r=Q(()=>{h()}),s=M(u(n.anchorEl));return s.addEventListener("resize",r),()=>{r.clear(),s.removeEventListener("resize",r)}}));const j=i(()=>{let r=o.transitionDuration;return o.transitionDuration==="auto"&&!o.TransitionComponent.muiSupportAuto&&(r=void 0),r},"transitionDuration"),k=i(()=>n.container||(n.anchorEl?z(u(n.anchorEl)).body:void 0),"container");return m(_,f({BackdropProps:{invisible:!0},get class(){return D(T.root,n.class)},get container(){return k()},get open(){return n.open},ownerState:v},L,{get children(){return m(o.TransitionComponent,f({appear:!0,get in(){return n.open},onEntering:B,get timeout(){return j()}},P,{get children(){return m(nn,f({get elevation(){return o.elevation}},()=>o.PaperProps,{ref:g,get class(){return D(T.paper,o.PaperProps.class)},get children(){return n.children}}))}}))}}))},"Popover"));export{fn as P};
