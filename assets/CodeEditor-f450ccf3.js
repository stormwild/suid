var Qj=Object.defineProperty;var u=(o,e)=>Qj(o,"name",{value:e,configurable:!0});import{_ as ge,B as e$,h as t$}from"./ListItemText-8378536b.js";import{u as n$}from"./useControlled-3e967372.js";import{o as i$,Y as s$,m as v2,c as o$}from"./ErrorPage-8328033b.js";import{u as r$}from"./PageNav-912c7d1d.js";globalThis&&globalThis.__awaiter;let a$=typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function l$(o,e){let t;return e.length===0?t=o:t=o.replace(/\{(\d+)\}/g,(n,i)=>{const s=i[0],r=e[s];let a=n;return typeof r=="string"?a=r:(typeof r=="number"||typeof r=="boolean"||r===void 0||r===null)&&(a=String(r)),a}),a$&&(t="［"+t.replace(/[aouei]/g,"$&$&")+"］"),t}u(l$,"_format$1");function m(o,e,...t){return l$(e,t)}u(m,"localize");var BS;const tm="en";let U0=!1,G0=!1,zC=!1,CO=!1,ED=!1,kD=!1,Vv,KC=tm,c$,$l;const on=typeof self=="object"?self:typeof global=="object"?global:{};let Ti;typeof on.vscode<"u"&&typeof on.vscode.process<"u"?Ti=on.vscode.process:typeof process<"u"&&(Ti=process);const d$=typeof((BS=Ti?.versions)===null||BS===void 0?void 0:BS.electron)=="string",u$=d$&&Ti?.type==="renderer";if(typeof navigator=="object"&&!u$)$l=navigator.userAgent,U0=$l.indexOf("Windows")>=0,G0=$l.indexOf("Macintosh")>=0,kD=($l.indexOf("Macintosh")>=0||$l.indexOf("iPad")>=0||$l.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,zC=$l.indexOf("Linux")>=0,ED=!0,m({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"),Vv=tm,KC=Vv;else if(typeof Ti=="object"){U0=Ti.platform==="win32",G0=Ti.platform==="darwin",zC=Ti.platform==="linux",zC&&Ti.env.SNAP&&Ti.env.SNAP_REVISION,Ti.env.CI||Ti.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Vv=tm,KC=tm;const o=Ti.env.VSCODE_NLS_CONFIG;if(o)try{const e=JSON.parse(o),t=e.availableLanguages["*"];Vv=e.locale,KC=t||tm,c$=e._translationsConfigFile}catch{}CO=!0}else console.error("Unable to resolve platform.");const ei=U0,Xe=G0,hi=zC,cr=CO,Xc=ED,h$=ED&&typeof on.importScripts=="function",na=kD,ia=$l,g$=KC,f$=typeof on.postMessage=="function"&&!on.importScripts,wO=(()=>{if(f$){const o=[];on.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,i=o.length;n<i;n++){const s=o[n];if(s.id===t.data.vscodeScheduleAsyncWork){o.splice(n,1),s.callback();return}}});let e=0;return t=>{const n=++e;o.push({id:n,callback:t}),on.postMessage({vscodeScheduleAsyncWork:n},"*")}}return o=>setTimeout(o)})(),Us=G0||kD?2:U0?1:3;let C2=!0,w2=!1;function yO(){if(!w2){w2=!0;const o=new Uint8Array(2);o[0]=1,o[1]=2,C2=new Uint16Array(o.buffer)[0]===(2<<8)+1}return C2}u(yO,"isLittleEndian");const SO=!!(ia&&ia.indexOf("Chrome")>=0),p$=!!(ia&&ia.indexOf("Firefox")>=0),m$=!!(!SO&&ia&&ia.indexOf("Safari")>=0),b$=!!(ia&&ia.indexOf("Edg/")>=0);ia&&ia.indexOf("Android")>=0;var je;(function(o){function e(S){return S&&typeof S=="object"&&typeof S[Symbol.iterator]=="function"}u(e,"is"),o.is=e;const t=Object.freeze([]);function n(){return t}u(n,"empty"),o.empty=n;function*i(S){yield S}u(i,"single"),o.single=i;function s(S){return S||t}u(s,"from"),o.from=s;function r(S){return!S||S[Symbol.iterator]().next().done===!0}u(r,"isEmpty"),o.isEmpty=r;function a(S){return S[Symbol.iterator]().next().value}u(a,"first"),o.first=a;function l(S,E){for(const k of S)if(E(k))return!0;return!1}u(l,"some"),o.some=l;function c(S,E){for(const k of S)if(E(k))return k}u(c,"find"),o.find=c;function*d(S,E){for(const k of S)E(k)&&(yield k)}u(d,"filter"),o.filter=d;function*h(S,E){let k=0;for(const T of S)yield E(T,k++)}u(h,"map"),o.map=h;function*g(...S){for(const E of S)for(const k of E)yield k}u(g,"concat"),o.concat=g;function*f(S){for(const E of S)for(const k of E)yield k}u(f,"concatNested"),o.concatNested=f;function p(S,E,k){let T=k;for(const x of S)T=E(T,x);return T}u(p,"reduce"),o.reduce=p;function _(S,E){let k=0;for(const T of S)E(T,k++)}u(_,"forEach"),o.forEach=_;function*v(S,E,k=S.length){for(E<0&&(E+=S.length),k<0?k+=S.length:k>S.length&&(k=S.length);E<k;E++)yield S[E]}u(v,"slice"),o.slice=v;function C(S,E=Number.POSITIVE_INFINITY){const k=[];if(E===0)return[k,S];const T=S[Symbol.iterator]();for(let x=0;x<E;x++){const M=T.next();if(M.done)return[k,o.empty()];k.push(M.value)}return[k,{[Symbol.iterator](){return T}}]}u(C,"consume"),o.consume=C;function w(S){return C(S)[0]}u(w,"collect"),o.collect=w;function y(S,E,k=(T,x)=>T===x){const T=S[Symbol.iterator](),x=E[Symbol.iterator]();for(;;){const M=T.next(),F=x.next();if(M.done!==F.done)return!1;if(M.done)return!0;if(!k(M.value,F.value))return!1}}u(y,"equals"),o.equals=y})(je||(je={}));let tn=u(class{constructor(e){this.element=e,this.next=tn.Undefined,this.prev=tn.Undefined}},"Node");tn.Undefined=new tn(void 0);class vi{constructor(){this._first=tn.Undefined,this._last=tn.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===tn.Undefined}clear(){let e=this._first;for(;e!==tn.Undefined;){const t=e.next;e.prev=tn.Undefined,e.next=tn.Undefined,e=t}this._first=tn.Undefined,this._last=tn.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const n=new tn(e);if(this._first===tn.Undefined)this._first=n,this._last=n;else if(t){const s=this._last;this._last=n,n.prev=s,s.next=n}else{const s=this._first;this._first=n,n.next=s,s.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==tn.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==tn.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==tn.Undefined&&e.next!==tn.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===tn.Undefined&&e.next===tn.Undefined?(this._first=tn.Undefined,this._last=tn.Undefined):e.next===tn.Undefined?(this._last=this._last.prev,this._last.next=tn.Undefined):e.prev===tn.Undefined&&(this._first=this._first.next,this._first.prev=tn.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==tn.Undefined;)yield e.element,e=e.next}}u(vi,"LinkedList");const TO="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function _$(o=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of TO)o.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}u(_$,"createWordRegExp");const MD=_$();function LO(o){let e=MD;if(o&&o instanceof RegExp)if(o.global)e=o;else{let t="g";o.ignoreCase&&(t+="i"),o.multiline&&(t+="m"),o.unicode&&(t+="u"),e=new RegExp(o.source,t)}return e.lastIndex=0,e}u(LO,"ensureValidWordDefinition");const xO=new vi;xO.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function Jm(o,e,t,n,i){if(i||(i=je.first(xO)),t.length>i.maxLen){let c=o-i.maxLen/2;return c<0?c=0:n+=c,t=t.substring(c,o+i.maxLen/2),Jm(o,e,t,n,i)}const s=Date.now(),r=o-1-n;let a=-1,l=null;for(let c=1;!(Date.now()-s>=i.timeBudget);c++){const d=r-i.windowSize*c;e.lastIndex=Math.max(0,d);const h=v$(e,t,r,a);if(!h&&l||(l=h,d<=0))break;a=d}if(l){const c={word:l[0],startColumn:n+1+l.index,endColumn:n+1+l.index+l[0].length};return e.lastIndex=0,c}return null}u(Jm,"getWordAtText");function v$(o,e,t,n){let i;for(;i=o.exec(e);){const s=i.index||0;if(s<=t&&o.lastIndex>=t)return i;if(n>0&&s>n)return null}return null}u(v$,"_findRegexMatchEnclosingPosition");function Fs(o,e=0){return o[o.length-(1+e)]}u(Fs,"tail");function C$(o){if(o.length===0)throw new Error("Invalid tail call");return[o.slice(0,o.length-1),o[o.length-1]]}u(C$,"tail2");function Ds(o,e,t=(n,i)=>n===i){if(o===e)return!0;if(!o||!e||o.length!==e.length)return!1;for(let n=0,i=o.length;n<i;n++)if(!t(o[n],e[n]))return!1;return!0}u(Ds,"equals$1");function w$(o,e){const t=o.length-1;e<t&&(o[e]=o[t]),o.pop()}u(w$,"removeFastWithoutKeepingOrder");function DD(o,e,t){return y$(o.length,n=>t(o[n],e))}u(DD,"binarySearch");function y$(o,e){let t=0,n=o-1;for(;t<=n;){const i=(t+n)/2|0,s=e(i);if(s<0)t=i+1;else if(s>0)n=i-1;else return i}return-(t+1)}u(y$,"binarySearch2");function EO(o,e){let t=0,n=o.length;if(n===0)return 0;for(;t<n;){const i=Math.floor((t+n)/2);e(o[i])?n=i:t=i+1}return t}u(EO,"findFirstInSorted");function SL(o,e,t){if(o=o|0,o>=e.length)throw new TypeError("invalid index");const n=e[Math.floor(e.length*Math.random())],i=[],s=[],r=[];for(const a of e){const l=t(a,n);l<0?i.push(a):l>0?s.push(a):r.push(a)}return o<i.length?SL(o,i,t):o<i.length+r.length?r[0]:SL(o-(i.length+r.length),s,t)}u(SL,"quickSelect");function y2(o,e){const t=[];let n;for(const i of o.slice(0).sort(e))!n||e(n[0],i)!==0?(n=[i],t.push(n)):n.push(i);return t}u(y2,"groupBy");function p_(o){return o.filter(e=>!!e)}u(p_,"coalesce");function kO(o){return!Array.isArray(o)||o.length===0}u(kO,"isFalsyOrEmpty");function ci(o){return Array.isArray(o)&&o.length>0}u(ci,"isNonEmptyArray");function gl(o,e=t=>t){const t=new Set;return o.filter(n=>{const i=e(n);return t.has(i)?!1:(t.add(i),!0)})}u(gl,"distinct");function z0(o,e){const t=S$(o,e);if(t!==-1)return o[t]}u(z0,"findLast");function S$(o,e){for(let t=o.length-1;t>=0;t--){const n=o[t];if(e(n))return t}return-1}u(S$,"lastIndex");function MO(o,e){return o.length>0?o[0]:e}u(MO,"firstOrDefault");function yi(o,e){let t=typeof e=="number"?o:0;typeof e=="number"?t=o:(t=0,e=o);const n=[];if(t<=e)for(let i=t;i<e;i++)n.push(i);else for(let i=t;i>e;i--)n.push(i);return n}u(yi,"range");function Tw(o,e,t){const n=o.slice(0,e),i=o.slice(e);return n.concat(t,i)}u(Tw,"arrayInsert");function WS(o,e){const t=o.indexOf(e);t>-1&&(o.splice(t,1),o.unshift(e))}u(WS,"pushToStart");function Hv(o,e){const t=o.indexOf(e);t>-1&&(o.splice(t,1),o.push(e))}u(Hv,"pushToEnd");function S2(o,e){for(const t of e)o.push(t)}u(S2,"pushMany");function AD(o){return Array.isArray(o)?o:[o]}u(AD,"asArray");function T$(o,e,t){const n=DO(o,e),i=o.length,s=t.length;o.length=i+s;for(let r=i-1;r>=n;r--)o[r+s]=o[r];for(let r=0;r<s;r++)o[r+n]=t[r]}u(T$,"insertInto");function T2(o,e,t,n){const i=DO(o,e),s=o.splice(i,t);return T$(o,i,n),s}u(T2,"splice$1");function DO(o,e){return e<0?Math.max(e+o.length,0):Math.min(e,o.length)}u(DO,"getActualStartIndex");var L2;(function(o){function e(i){return i<0}u(e,"isLessThan"),o.isLessThan=e;function t(i){return i>0}u(t,"isGreaterThan"),o.isGreaterThan=t;function n(i){return i===0}u(n,"isNeitherLessOrGreaterThan"),o.isNeitherLessOrGreaterThan=n,o.greaterThan=1,o.lessThan=-1,o.neitherLessOrGreaterThan=0})(L2||(L2={}));function Am(o,e){return(t,n)=>e(o(t),o(n))}u(Am,"compareBy");const L$=u((o,e)=>o-e,"numberComparator");function AO(o,e){if(o.length===0)return;let t=o[0];for(let n=1;n<o.length;n++){const i=o[n];e(i,t)>0&&(t=i)}return t}u(AO,"findMaxBy");function IO(o,e){if(o.length===0)return;let t=o[0];for(let n=1;n<o.length;n++){const i=o[n];e(i,t)>=0&&(t=i)}return t}u(IO,"findLastMaxBy");function x$(o,e){return AO(o,(t,n)=>-e(t,n))}u(x$,"findMinBy");class $g{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const n=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,n}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const n=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,n}peek(){if(this.length!==0)return this.items[this.firstIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){const t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}}u($g,"ArrayQueue");function NO(o){return Array.isArray(o)}u(NO,"isArray");function qi(o){return typeof o=="string"}u(qi,"isString$1");function Ki(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)&&!(o instanceof RegExp)&&!(o instanceof Date)}u(Ki,"isObject");function E$(o){const e=Object.getPrototypeOf(Uint8Array);return typeof o=="object"&&o instanceof e}u(E$,"isTypedArray");function Sc(o){return typeof o=="number"&&!isNaN(o)}u(Sc,"isNumber$1");function x2(o){return!!o&&typeof o[Symbol.iterator]=="function"}u(x2,"isIterable");function PO(o){return o===!0||o===!1}u(PO,"isBoolean");function ss(o){return typeof o>"u"}u(ss,"isUndefined");function k$(o){return!ys(o)}u(k$,"isDefined");function ys(o){return ss(o)||o===null}u(ys,"isUndefinedOrNull");function bt(o,e){if(!o)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}u(bt,"assertType");function Bv(o){if(ys(o))throw new Error("Assertion Failed: argument is undefined or null");return o}u(Bv,"assertIsDefined");function K0(o){return typeof o=="function"}u(K0,"isFunction");function M$(o,e){const t=Math.min(o.length,e.length);for(let n=0;n<t;n++)D$(o[n],e[n])}u(M$,"validateConstraints");function D$(o,e){if(qi(e)){if(typeof o!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(K0(e)){try{if(o instanceof e)return}catch{}if(!ys(o)&&o.constructor===e||e.length===1&&e.call(void 0,o)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}u(D$,"validateConstraint");function A$(o){let e=[],t=Object.getPrototypeOf(o);for(;Object.prototype!==t;)e=e.concat(Object.getOwnPropertyNames(t)),t=Object.getPrototypeOf(t);return e}u(A$,"getAllPropertyNames");function ID(o){const e=[];for(const t of A$(o))typeof o[t]=="function"&&e.push(t);return e}u(ID,"getAllMethodNames");function I$(o,e){const t=u(i=>function(){const s=Array.prototype.slice.call(arguments,0);return e(i,s)},"createProxyMethod"),n={};for(const i of o)n[i]=t(i);return n}u(I$,"createProxyObject$1");function Gi(o){return o===null?void 0:o}u(Gi,"withNullAsUndefined");function Lw(o,e="Unreachable"){throw new Error(e)}u(Lw,"assertNever");function Pa(o){if(!o||typeof o!="object"||o instanceof RegExp)return o;const e=Array.isArray(o)?[]:{};return Object.keys(o).forEach(t=>{o[t]&&typeof o[t]=="object"?e[t]=Pa(o[t]):e[t]=o[t]}),e}u(Pa,"deepClone");function N$(o){if(!o||typeof o!="object")return o;const e=[o];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const n in t)if(RO.call(t,n)){const i=t[n];typeof i=="object"&&!Object.isFrozen(i)&&!E$(i)&&e.push(i)}}return o}u(N$,"deepFreeze");const RO=Object.prototype.hasOwnProperty;function FO(o,e){return TL(o,e,new Set)}u(FO,"cloneAndChange");function TL(o,e,t){if(ys(o))return o;const n=e(o);if(typeof n<"u")return n;if(NO(o)){const i=[];for(const s of o)i.push(TL(s,e,t));return i}if(Ki(o)){if(t.has(o))throw new Error("Cannot clone recursive data-structure");t.add(o);const i={};for(const s in o)RO.call(o,s)&&(i[s]=TL(o[s],e,t));return t.delete(o),i}return o}u(TL,"_cloneAndChange");function la(o,e,t=!0){return Ki(o)?(Ki(e)&&Object.keys(e).forEach(n=>{n in o?t&&(Ki(o[n])&&Ki(e[n])?la(o[n],e[n],t):o[n]=e[n]):o[n]=e[n]}),o):e}u(la,"mixin");function Xs(o,e){if(o===e)return!0;if(o==null||e===null||e===void 0||typeof o!=typeof e||typeof o!="object"||Array.isArray(o)!==Array.isArray(e))return!1;let t,n;if(Array.isArray(o)){if(o.length!==e.length)return!1;for(t=0;t<o.length;t++)if(!Xs(o[t],e[t]))return!1}else{const i=[];for(n in o)i.push(n);i.sort();const s=[];for(n in e)s.push(n);if(s.sort(),!Xs(i,s))return!1;for(t=0;t<i.length;t++)if(!Xs(o[i[t]],e[i[t]]))return!1}return!0}u(Xs,"equals");const ri={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}},ql=8;class ND{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}u(ND,"ConfigurationChangedEvent");class PD{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}u(PD,"ComputeOptionsMemory");class un{constructor(e,t,n,i){this.id=e,this.name=t,this.defaultValue=n,this.schema=i}applyUpdate(e,t){return xw(e,t)}compute(e,t,n){return n}}u(un,"BaseEditorOption");class wg{constructor(e,t){this.newValue=e,this.didChange=t}}u(wg,"ApplyUpdateResult");function xw(o,e){if(typeof o!="object"||typeof e!="object"||!o||!e)return new wg(e,o!==e);if(Array.isArray(o)||Array.isArray(e)){const n=Array.isArray(o)&&Array.isArray(e)&&Ds(o,e);return new wg(e,!n)}let t=!1;for(const n in e)if(e.hasOwnProperty(n)){const i=xw(o[n],e[n]);i.didChange&&(o[n]=i.newValue,t=!0)}return new wg(o,t)}u(xw,"applyUpdate");class ih{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return xw(e,t)}validate(e){return this.defaultValue}}u(ih,"ComputedEditorOption");class Zc{constructor(e,t,n,i){this.id=e,this.name=t,this.defaultValue=n,this.schema=i}applyUpdate(e,t){return xw(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,n){return n}}u(Zc,"SimpleEditorOption");function ye(o,e){return typeof o>"u"?e:o==="false"?!1:Boolean(o)}u(ye,"boolean");class Ze extends Zc{constructor(e,t,n,i=void 0){typeof i<"u"&&(i.type="boolean",i.default=n),super(e,t,n,i)}validate(e){return ye(e,this.defaultValue)}}u(Ze,"EditorBooleanOption");function LL(o,e,t,n){if(typeof o>"u")return e;let i=parseInt(o,10);return isNaN(i)?e:(i=Math.max(t,i),i=Math.min(n,i),i|0)}u(LL,"clampedInt");class Et extends Zc{constructor(e,t,n,i,s,r=void 0){typeof r<"u"&&(r.type="integer",r.default=n,r.minimum=i,r.maximum=s),super(e,t,n,r),this.minimum=i,this.maximum=s}static clampedInt(e,t,n,i){return LL(e,t,n,i)}validate(e){return Et.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}u(Et,"EditorIntOption");class er extends Zc{constructor(e,t,n,i,s){typeof s<"u"&&(s.type="number",s.default=n),super(e,t,n,s),this.validationFn=i}static clamp(e,t,n){return e<t?t:e>n?n:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const n=parseFloat(e);return isNaN(n)?t:n}validate(e){return this.validationFn(er.float(e,this.defaultValue))}}u(er,"EditorFloatOption");class Hi extends Zc{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,n,i=void 0){typeof i<"u"&&(i.type="string",i.default=n),super(e,t,n,i)}validate(e){return Hi.string(e,this.defaultValue)}}u(Hi,"EditorStringOption");function Xn(o,e,t){return typeof o!="string"||t.indexOf(o)===-1?e:o}u(Xn,"stringSet");class fn extends Zc{constructor(e,t,n,i,s=void 0){typeof s<"u"&&(s.type="string",s.enum=i,s.default=n),super(e,t,n,s),this._allowedValues=i}validate(e){return Xn(e,this.defaultValue,this._allowedValues)}}u(fn,"EditorStringEnumOption");class Yh extends un{constructor(e,t,n,i,s,r,a=void 0){typeof a<"u"&&(a.type="string",a.enum=s,a.default=i),super(e,t,n,a),this._allowedValues=s,this._convert=r}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}u(Yh,"EditorEnumOption");function P$(o){switch(o){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}u(P$,"_autoIndentFromString");class OO extends un{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[m("accessibilitySupport.auto","The editor will use platform APIs to detect when a Screen Reader is attached."),m("accessibilitySupport.on","The editor will be permanently optimized for usage with a Screen Reader. Word wrapping will be disabled."),m("accessibilitySupport.off","The editor will never be optimized for usage with a Screen Reader.")],default:"auto",description:m("accessibilitySupport","Controls whether the editor should run in a mode where it is optimized for screen readers. Setting to on will disable word wrapping.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,n){return n===0?e.accessibilitySupport:n}}u(OO,"EditorAccessibilitySupport");class VO extends un{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(19,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:m("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:m("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:ye(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:ye(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}u(VO,"EditorComments");function R$(o){switch(o){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}u(R$,"_cursorBlinkingStyleFromString");var jn;(function(o){o[o.Line=1]="Line",o[o.Block=2]="Block",o[o.Underline=3]="Underline",o[o.LineThin=4]="LineThin",o[o.BlockOutline=5]="BlockOutline",o[o.UnderlineThin=6]="UnderlineThin"})(jn||(jn={}));function F$(o){switch(o){case"line":return jn.Line;case"block":return jn.Block;case"underline":return jn.Underline;case"line-thin":return jn.LineThin;case"block-outline":return jn.BlockOutline;case"underline-thin":return jn.UnderlineThin}}u(F$,"_cursorStyleFromString");class HO extends ih{constructor(){super(130)}compute(e,t,n){const i=["monaco-editor"];return t.get(35)&&i.push(t.get(35)),e.extraEditorClassName&&i.push(e.extraEditorClassName),t.get(68)==="default"?i.push("mouse-default"):t.get(68)==="copy"&&i.push("mouse-copy"),t.get(102)&&i.push("showUnused"),t.get(128)&&i.push("showDeprecated"),i.join(" ")}}u(HO,"EditorClassName");class BO extends Ze{constructor(){super(33,"emptySelectionClipboard",!0,{description:m("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,n){return n&&e.emptySelectionClipboard}}u(BO,"EditorEmptySelectionClipboard");class WO extends un{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(37,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:m("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[m("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),m("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),m("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:m("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[m("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),m("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),m("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:m("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:m("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:Xe},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:m("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:m("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:ye(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":Xn(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":Xn(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:ye(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:ye(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:ye(t.loop,this.defaultValue.loop)}}}u(WO,"EditorFind");class is extends un{constructor(){super(47,"fontLigatures",is.OFF,{anyOf:[{type:"boolean",description:m("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:m("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:m("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?is.OFF:e==="true"?is.ON:e:Boolean(e)?is.ON:is.OFF}}u(is,"EditorFontLigatures");is.OFF='"liga" off, "calt" off';is.ON='"liga" on, "calt" on';class UO extends ih{constructor(){super(46)}compute(e,t,n){return e.fontInfo}}u(UO,"EditorFontInfo");class GO extends Zc{constructor(){super(48,"fontSize",rs.fontSize,{type:"number",minimum:6,maximum:100,default:rs.fontSize,description:m("fontSize","Controls the font size in pixels.")})}validate(e){const t=er.float(e,this.defaultValue);return t===0?rs.fontSize:er.clamp(t,6,100)}compute(e,t,n){return e.fontInfo.fontSize}}u(GO,"EditorFontSize");class qo extends un{constructor(){super(49,"fontWeight",rs.fontWeight,{anyOf:[{type:"number",minimum:qo.MINIMUM_VALUE,maximum:qo.MAXIMUM_VALUE,errorMessage:m("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:qo.SUGGESTION_VALUES}],default:rs.fontWeight,description:m("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(Et.clampedInt(e,rs.fontWeight,qo.MINIMUM_VALUE,qo.MAXIMUM_VALUE))}}u(qo,"EditorFontWeight");qo.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"];qo.MINIMUM_VALUE=1;qo.MAXIMUM_VALUE=1e3;class zO extends un{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[m("editor.gotoLocation.multiple.peek","Show peek view of the results (default)"),m("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a peek view"),m("editor.gotoLocation.multiple.goto","Go to the primary result and enable peek-less navigation to others")]},n=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(53,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:m("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":Object.assign({description:m("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleTypeDefinitions":Object.assign({description:m("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleDeclarations":Object.assign({description:m("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleImplementations":Object.assign({description:m("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleReferences":Object.assign({description:m("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist.")},t),"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:n,description:m("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:n,description:m("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:n,description:m("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:n,description:m("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:n,description:m("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){var t,n,i,s,r;if(!e||typeof e!="object")return this.defaultValue;const a=e;return{multiple:Xn(a.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:(t=a.multipleDefinitions)!==null&&t!==void 0?t:Xn(a.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:(n=a.multipleTypeDefinitions)!==null&&n!==void 0?n:Xn(a.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:(i=a.multipleDeclarations)!==null&&i!==void 0?i:Xn(a.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:(s=a.multipleImplementations)!==null&&s!==void 0?s:Xn(a.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:(r=a.multipleReferences)!==null&&r!==void 0?r:Xn(a.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:Hi.string(a.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:Hi.string(a.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:Hi.string(a.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:Hi.string(a.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:Hi.string(a.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}}u(zO,"EditorGoToLocation");class KO extends un{constructor(){const e={enabled:!0,delay:300,sticky:!0,above:!0};super(55,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:m("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:m("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:m("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.above":{type:"boolean",default:e.above,description:m("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:ye(t.enabled,this.defaultValue.enabled),delay:Et.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:ye(t.sticky,this.defaultValue.sticky),above:ye(t.above,this.defaultValue.above)}}}u(KO,"EditorHover");class qd extends ih{constructor(){super(133)}compute(e,t,n){return qd.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,n=e.scrollBeyondLastLine?t-1:0,i=(e.viewLineCount+n)/(e.pixelRatio*e.height),s=Math.floor(e.viewLineCount/i);return{typicalViewportLineCount:t,extraLinesBeyondLastLine:n,desiredRatio:i,minimapLineCount:s}}static _computeMinimapLayout(e,t){const n=e.outerWidth,i=e.outerHeight,s=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(s*i),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:i};const r=t.stableMinimapLayoutInput,a=r&&e.outerHeight===r.outerHeight&&e.lineHeight===r.lineHeight&&e.typicalHalfwidthCharacterWidth===r.typicalHalfwidthCharacterWidth&&e.pixelRatio===r.pixelRatio&&e.scrollBeyondLastLine===r.scrollBeyondLastLine&&e.minimap.enabled===r.minimap.enabled&&e.minimap.side===r.minimap.side&&e.minimap.size===r.minimap.size&&e.minimap.showSlider===r.minimap.showSlider&&e.minimap.renderCharacters===r.minimap.renderCharacters&&e.minimap.maxColumn===r.minimap.maxColumn&&e.minimap.scale===r.minimap.scale&&e.verticalScrollbarWidth===r.verticalScrollbarWidth&&e.isViewportWrapping===r.isViewportWrapping,l=e.lineHeight,c=e.typicalHalfwidthCharacterWidth,d=e.scrollBeyondLastLine,h=e.minimap.renderCharacters;let g=s>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const f=e.minimap.maxColumn,p=e.minimap.size,_=e.minimap.side,v=e.verticalScrollbarWidth,C=e.viewLineCount,w=e.remainingWidth,y=e.isViewportWrapping,S=h?2:3;let E=Math.floor(s*i);const k=E/s;let T=!1,x=!1,M=S*g,F=g/s,V=1;if(p==="fill"||p==="fit"){const{typicalViewportLineCount:ke,extraLinesBeyondLastLine:Ue,desiredRatio:Rt,minimapLineCount:Tt}=qd.computeContainedMinimapLineCount({viewLineCount:C,scrollBeyondLastLine:d,height:i,lineHeight:l,pixelRatio:s});if(C/Tt>1)T=!0,x=!0,g=1,M=1,F=g/s;else{let _e=!1,It=g+1;if(p==="fit"){const Bn=Math.ceil((C+Ue)*M);y&&a&&w<=t.stableFitRemainingWidth?(_e=!0,It=t.stableFitMaxMinimapScale):_e=Bn>E}if(p==="fill"||_e){T=!0;const Bn=g;M=Math.min(l*s,Math.max(1,Math.floor(1/Rt))),y&&a&&w<=t.stableFitRemainingWidth&&(It=t.stableFitMaxMinimapScale),g=Math.min(It,Math.max(1,Math.floor(M/S))),g>Bn&&(V=Math.min(2,g/Bn)),F=g/s/V,E=Math.ceil(Math.max(ke,C+Ue)*M),y?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=w,t.stableFitMaxMinimapScale=g):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const G=Math.floor(f*F),j=Math.min(G,Math.max(0,Math.floor((w-v-2)*F/(c+F)))+ql);let ae=Math.floor(s*j);const he=ae/s;ae=Math.floor(ae*V);const Se=h?1:2,Te=_==="left"?0:n-j-v;return{renderMinimap:Se,minimapLeft:Te,minimapWidth:j,minimapHeightIsEditorHeight:T,minimapIsSampling:x,minimapScale:g,minimapLineHeight:M,minimapCanvasInnerWidth:ae,minimapCanvasInnerHeight:E,minimapCanvasOuterWidth:he,minimapCanvasOuterHeight:k}}static computeLayout(e,t){const n=t.outerWidth|0,i=t.outerHeight|0,s=t.lineHeight|0,r=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,c=t.pixelRatio,d=t.viewLineCount,h=e.get(125),g=h==="inherit"?e.get(124):h,f=g==="inherit"?e.get(120):g,p=e.get(123),_=e.get(2),v=t.isDominatedByLongLines,C=e.get(52),w=e.get(62).renderType!==0,y=e.get(63),S=e.get(96),E=e.get(67),k=e.get(94),T=k.verticalScrollbarSize,x=k.verticalHasArrows,M=k.arrowSize,F=k.horizontalScrollbarSize,V=e.get(60),G=e.get(39),j=e.get(101)!=="never";let ae;if(typeof V=="string"&&/^\d+(\.\d+)?ch$/.test(V)){const Ro=parseFloat(V.substr(0,V.length-2));ae=Et.clampedInt(Ro*a,0,0,1e3)}else ae=Et.clampedInt(V,0,0,1e3);G&&j&&(ae+=16);let he=0;if(w){const Ro=Math.max(r,y);he=Math.round(Ro*l)}let Se=0;C&&(Se=s);let Te=0,ke=Te+Se,Ue=ke+he,Rt=Ue+ae;const Tt=n-Se-he-ae;let Ce=!1,_e=!1,It=-1;_!==2&&(g==="inherit"&&v?(Ce=!0,_e=!0):f==="on"||f==="bounded"?_e=!0:f==="wordWrapColumn"&&(It=p));const Bn=qd._computeMinimapLayout({outerWidth:n,outerHeight:i,lineHeight:s,typicalHalfwidthCharacterWidth:a,pixelRatio:c,scrollBeyondLastLine:S,minimap:E,verticalScrollbarWidth:T,viewLineCount:d,remainingWidth:Tt,isViewportWrapping:_e},t.memory||new PD);Bn.renderMinimap!==0&&Bn.minimapLeft===0&&(Te+=Bn.minimapWidth,ke+=Bn.minimapWidth,Ue+=Bn.minimapWidth,Rt+=Bn.minimapWidth);const Ni=Tt-Bn.minimapWidth,Po=Math.max(1,Math.floor((Ni-T-2)/a)),fa=x?M:0;return _e&&(It=Math.max(1,Po),f==="bounded"&&(It=Math.min(It,p))),{width:n,height:i,glyphMarginLeft:Te,glyphMarginWidth:Se,lineNumbersLeft:ke,lineNumbersWidth:he,decorationsLeft:Ue,decorationsWidth:ae,contentLeft:Rt,contentWidth:Ni,minimap:Bn,viewportColumn:Po,isWordWrapMinified:Ce,isViewportWrapping:_e,wrappingColumn:It,verticalScrollbarWidth:T,horizontalScrollbarHeight:F,overviewRuler:{top:fa,width:T,height:i-2*fa,right:0}}}}u(qd,"EditorLayoutInfoComputer");class jO extends un{constructor(){const e={enabled:!0};super(59,"lightbulb",e,{"editor.lightbulb.enabled":{type:"boolean",default:e.enabled,description:m("codeActions","Enables the code action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:ye(e.enabled,this.defaultValue.enabled)}}}u(jO,"EditorLightbulb");class $O extends un{constructor(){const e={stickyScroll:{enabled:!1}};super(34,"experimental",e,{"editor.experimental.stickyScroll.enabled":{type:"boolean",default:e.stickyScroll.enabled,description:m("editor.experimental.stickyScroll","Shows the nested current scopes during the scroll at the top of the editor.")}})}validate(e){var t;return!e||typeof e!="object"?this.defaultValue:{stickyScroll:{enabled:ye((t=e.stickyScroll)===null||t===void 0?void 0:t.enabled,this.defaultValue.stickyScroll.enabled)}}}}u($O,"EditorExperimental");class qO extends un{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(129,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:m("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[m("editor.inlayHints.on","Inlay hints are enabled"),m("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding `Ctrl+Alt`"),m("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding `Ctrl+Alt`"),m("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:m("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:m("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:m("inlayHints.padding","Enables the padding around the inlay hints in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:Xn(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:Et.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:Hi.string(t.fontFamily,this.defaultValue.fontFamily),padding:ye(t.padding,this.defaultValue.padding)}}}u(qO,"EditorInlayHints");class YO extends er{constructor(){super(61,"lineHeight",rs.lineHeight,e=>er.clamp(e,0,150),{markdownDescription:m("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,n){return e.fontInfo.lineHeight}}u(YO,"EditorLineHeight");class XO extends un{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1};super(67,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:m("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:m("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[m("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),m("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),m("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:m("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:m("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:m("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:m("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:m("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:m("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:ye(t.enabled,this.defaultValue.enabled),autohide:ye(t.autohide,this.defaultValue.autohide),size:Xn(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:Xn(t.side,this.defaultValue.side,["right","left"]),showSlider:Xn(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:ye(t.renderCharacters,this.defaultValue.renderCharacters),scale:Et.clampedInt(t.scale,1,1,3),maxColumn:Et.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4)}}}u(XO,"EditorMinimap");function O$(o){return o==="ctrlCmd"?Xe?"metaKey":"ctrlKey":"altKey"}u(O$,"_multiCursorModifierFromString");class ZO extends un{constructor(){super(77,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:m("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:m("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:Et.clampedInt(t.top,0,0,1e3),bottom:Et.clampedInt(t.bottom,0,0,1e3)}}}u(ZO,"EditorPadding");class JO extends un{constructor(){const e={enabled:!0,cycle:!1};super(78,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:m("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:m("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:ye(t.enabled,this.defaultValue.enabled),cycle:ye(t.cycle,this.defaultValue.cycle)}}}u(JO,"EditorParameterHints");class QO extends ih{constructor(){super(131)}compute(e,t,n){return e.pixelRatio}}u(QO,"EditorPixelRatio");class e4 extends un{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[m("on","Quick suggestions show inside the suggest widget"),m("inline","Quick suggestions show as ghost text"),m("off","Quick suggestions are disabled")]}];super(81,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:m("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:m("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:m("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:m("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the '{0}'-setting which controls if suggestions are triggered by special characters.","#editor.suggestOnTriggerCharacters#")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:n,strings:i}=e,s=["on","inline","off"];let r,a,l;return typeof t=="boolean"?r=t?"on":"off":r=Xn(t,this.defaultValue.other,s),typeof n=="boolean"?a=n?"on":"off":a=Xn(n,this.defaultValue.comments,s),typeof i=="boolean"?l=i?"on":"off":l=Xn(i,this.defaultValue.strings,s),{other:r,comments:a,strings:l}}}u(e4,"EditorQuickSuggestions");class t4 extends un{constructor(){super(62,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[m("lineNumbers.off","Line numbers are not rendered."),m("lineNumbers.on","Line numbers are rendered as absolute number."),m("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),m("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:m("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,n=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,n=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:n}}}u(t4,"EditorRenderLineNumbersOption");function j0(o){const e=o.get(89);return e==="editable"?o.get(83):e!=="on"}u(j0,"filterValidationDecorations");class n4 extends un{constructor(){const e=[],t={type:"number",description:m("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(93,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:m("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:m("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){const t=[];for(const n of e)if(typeof n=="number")t.push({column:Et.clampedInt(n,0,0,1e4),color:null});else if(n&&typeof n=="object"){const i=n;t.push({column:Et.clampedInt(i.column,0,0,1e4),color:i.color})}return t.sort((n,i)=>n.column-i.column),t}return this.defaultValue}}u(n4,"EditorRulers");function E2(o,e){if(typeof o!="string")return e;switch(o){case"hidden":return 2;case"visible":return 3;default:return 1}}u(E2,"_scrollbarVisibilityFromString");let V$=u(class extends un{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1};super(94,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[m("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),m("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),m("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:m("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[m("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),m("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),m("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:m("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:m("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:m("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:m("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,n=Et.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),i=Et.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Et.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:E2(t.vertical,this.defaultValue.vertical),horizontal:E2(t.horizontal,this.defaultValue.horizontal),useShadows:ye(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:ye(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:ye(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:ye(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:ye(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:n,horizontalSliderSize:Et.clampedInt(t.horizontalSliderSize,n,0,1e3),verticalScrollbarSize:i,verticalSliderSize:Et.clampedInt(t.verticalSliderSize,i,0,1e3),scrollByPage:ye(t.scrollByPage,this.defaultValue.scrollByPage)}}},"EditorScrollbar");const Cs="inUntrustedWorkspace",Bi={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"};class i4 extends un{constructor(){const e={nonBasicASCII:Cs,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:Cs,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(115,"unicodeHighlight",e,{[Bi.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Cs],default:e.nonBasicASCII,description:m("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[Bi.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:m("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[Bi.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:m("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[Bi.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Cs],default:e.includeComments,description:m("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to unicode highlighting.")},[Bi.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Cs],default:e.includeStrings,description:m("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to unicode highlighting.")},[Bi.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:m("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[Bi.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:m("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let n=!1;t.allowedCharacters&&e&&(Xs(e.allowedCharacters,t.allowedCharacters)||(e=Object.assign(Object.assign({},e),{allowedCharacters:t.allowedCharacters}),n=!0)),t.allowedLocales&&e&&(Xs(e.allowedLocales,t.allowedLocales)||(e=Object.assign(Object.assign({},e),{allowedLocales:t.allowedLocales}),n=!0));const i=super.applyUpdate(e,t);return n?new wg(i.newValue,!0):i}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:yg(t.nonBasicASCII,Cs,[!0,!1,Cs]),invisibleCharacters:ye(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:ye(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:yg(t.includeComments,Cs,[!0,!1,Cs]),includeStrings:yg(t.includeStrings,Cs,[!0,!1,Cs]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if(typeof e!="object"||!e)return t;const n={};for(const[i,s]of Object.entries(e))s===!0&&(n[i]=!0);return n}}u(i4,"UnicodeHighlight");class s4 extends un{constructor(){const e={enabled:!0,mode:"subwordSmart"};super(57,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:m("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:ye(t.enabled,this.defaultValue.enabled),mode:Xn(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"])}}}u(s4,"InlineEditorSuggest");class o4 extends un{constructor(){const e={enabled:ri.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:ri.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(12,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:m("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:m("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:ye(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:ye(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}u(o4,"BracketPairColorization");class r4 extends un{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(13,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[m("editor.guides.bracketPairs.true","Enables bracket pair guides."),m("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),m("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:m("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[m("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),m("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),m("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:m("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:m("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:m("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[m("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),m("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),m("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:m("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:yg(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:yg(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:ye(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:ye(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:yg(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}u(r4,"GuideOptions");function yg(o,e,t){const n=t.indexOf(o);return n===-1?e:t[n]}u(yg,"primitiveSet");class a4 extends un{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!0,localityBonus:!1,shareSuggestSelections:!1,showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(108,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[m("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),m("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:m("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:m("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:m("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:m("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:m("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:m("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:m("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:m("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:m("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:m("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:m("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:Xn(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:ye(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:ye(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:ye(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:ye(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),showIcons:ye(t.showIcons,this.defaultValue.showIcons),showStatusBar:ye(t.showStatusBar,this.defaultValue.showStatusBar),preview:ye(t.preview,this.defaultValue.preview),previewMode:Xn(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:ye(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:ye(t.showMethods,this.defaultValue.showMethods),showFunctions:ye(t.showFunctions,this.defaultValue.showFunctions),showConstructors:ye(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:ye(t.showDeprecated,this.defaultValue.showDeprecated),showFields:ye(t.showFields,this.defaultValue.showFields),showVariables:ye(t.showVariables,this.defaultValue.showVariables),showClasses:ye(t.showClasses,this.defaultValue.showClasses),showStructs:ye(t.showStructs,this.defaultValue.showStructs),showInterfaces:ye(t.showInterfaces,this.defaultValue.showInterfaces),showModules:ye(t.showModules,this.defaultValue.showModules),showProperties:ye(t.showProperties,this.defaultValue.showProperties),showEvents:ye(t.showEvents,this.defaultValue.showEvents),showOperators:ye(t.showOperators,this.defaultValue.showOperators),showUnits:ye(t.showUnits,this.defaultValue.showUnits),showValues:ye(t.showValues,this.defaultValue.showValues),showConstants:ye(t.showConstants,this.defaultValue.showConstants),showEnums:ye(t.showEnums,this.defaultValue.showEnums),showEnumMembers:ye(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:ye(t.showKeywords,this.defaultValue.showKeywords),showWords:ye(t.showWords,this.defaultValue.showWords),showColors:ye(t.showColors,this.defaultValue.showColors),showFiles:ye(t.showFiles,this.defaultValue.showFiles),showReferences:ye(t.showReferences,this.defaultValue.showReferences),showFolders:ye(t.showFolders,this.defaultValue.showFolders),showTypeParameters:ye(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:ye(t.showSnippets,this.defaultValue.showSnippets),showUsers:ye(t.showUsers,this.defaultValue.showUsers),showIssues:ye(t.showIssues,this.defaultValue.showIssues)}}}u(a4,"EditorSuggest");class l4 extends un{constructor(){super(104,"smartSelect",{selectLeadingAndTrailingWhitespace:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:m("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:ye(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace)}}}u(l4,"SmartSelect");class c4 extends ih{constructor(){super(132)}compute(e,t,n){return t.get(83)?!0:e.tabFocusMode}}u(c4,"EditorTabFocusMode");function H$(o){switch(o){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}}u(H$,"_wrappingIndentFromString");class d4 extends ih{constructor(){super(134)}compute(e,t,n){const i=t.get(133);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:i.isWordWrapMinified,isViewportWrapping:i.isViewportWrapping,wrappingColumn:i.wrappingColumn}}}u(d4,"EditorWrappingInfoComputer");class u4 extends un{constructor(){const e={enabled:!0};super(32,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:m("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down `shift` (instead of opening the file in an editor).")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:ye(e.enabled,this.defaultValue.enabled)}}}u(u4,"EditorDropIntoEditor");const B$="Consolas, 'Courier New', monospace",W$="Menlo, Monaco, 'Courier New', monospace",U$="'Droid Sans Mono', 'monospace', monospace",rs={fontFamily:Xe?W$:hi?U$:B$,fontWeight:"normal",fontSize:Xe?12:14,lineHeight:0,letterSpacing:0},og=[];function ne(o){return og[o.id]=o,o}u(ne,"register$1");const Sr={acceptSuggestionOnCommitCharacter:ne(new Ze(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:m("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`; `) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:ne(new fn(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",m("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:m("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:ne(new OO),accessibilityPageSize:ne(new Et(3,"accessibilityPageSize",10,1,1073741824,{description:m("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default.")})),ariaLabel:ne(new Hi(4,"ariaLabel",m("editorViewAccessibleLabel","Editor content"))),autoClosingBrackets:ne(new fn(5,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",m("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),m("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:m("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingDelete:ne(new fn(6,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",m("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:m("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:ne(new fn(7,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",m("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:m("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:ne(new fn(8,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",m("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),m("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:m("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:ne(new Yh(9,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],P$,{enumDescriptions:[m("editor.autoIndent.none","The editor will not insert indentation automatically."),m("editor.autoIndent.keep","The editor will keep the current line's indentation."),m("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),m("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),m("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:m("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:ne(new Ze(10,"automaticLayout",!1)),autoSurround:ne(new fn(11,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[m("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),m("editor.autoSurround.quotes","Surround with quotes but not brackets."),m("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:m("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:ne(new o4),bracketPairGuides:ne(new r4),stickyTabStops:ne(new Ze(106,"stickyTabStops",!1,{description:m("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:ne(new Ze(14,"codeLens",!0,{description:m("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:ne(new Hi(15,"codeLensFontFamily","",{description:m("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:ne(new Et(16,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:m("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to `0`, 90% of `#editor.fontSize#` is used.")})),colorDecorators:ne(new Ze(17,"colorDecorators",!0,{description:m("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),columnSelection:ne(new Ze(18,"columnSelection",!1,{description:m("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:ne(new VO),contextmenu:ne(new Ze(20,"contextmenu",!0)),copyWithSyntaxHighlighting:ne(new Ze(21,"copyWithSyntaxHighlighting",!0,{description:m("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:ne(new Yh(22,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],R$,{description:m("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:ne(new Ze(23,"cursorSmoothCaretAnimation",!1,{description:m("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:ne(new Yh(24,"cursorStyle",jn.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],F$,{description:m("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:ne(new Et(25,"cursorSurroundingLines",0,0,1073741824,{description:m("cursorSurroundingLines","Controls the minimal number of visible leading and trailing lines surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:ne(new fn(26,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[m("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),m("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],description:m("cursorSurroundingLinesStyle","Controls when `cursorSurroundingLines` should be enforced.")})),cursorWidth:ne(new Et(27,"cursorWidth",0,0,1073741824,{markdownDescription:m("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:ne(new Ze(28,"disableLayerHinting",!1)),disableMonospaceOptimizations:ne(new Ze(29,"disableMonospaceOptimizations",!1)),domReadOnly:ne(new Ze(30,"domReadOnly",!1)),dragAndDrop:ne(new Ze(31,"dragAndDrop",!0,{description:m("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:ne(new BO),dropIntoEditor:ne(new u4),experimental:ne(new $O),extraEditorClassName:ne(new Hi(35,"extraEditorClassName","")),fastScrollSensitivity:ne(new er(36,"fastScrollSensitivity",5,o=>o<=0?5:o,{markdownDescription:m("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:ne(new WO),fixedOverflowWidgets:ne(new Ze(38,"fixedOverflowWidgets",!1)),folding:ne(new Ze(39,"folding",!0,{description:m("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:ne(new fn(40,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[m("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),m("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:m("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:ne(new Ze(41,"foldingHighlight",!0,{description:m("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:ne(new Ze(42,"foldingImportsByDefault",!1,{description:m("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:ne(new Et(43,"foldingMaximumRegions",5e3,10,65e3,{description:m("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:ne(new Ze(44,"unfoldOnClickAfterEndOfLine",!1,{description:m("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:ne(new Hi(45,"fontFamily",rs.fontFamily,{description:m("fontFamily","Controls the font family.")})),fontInfo:ne(new UO),fontLigatures2:ne(new is),fontSize:ne(new GO),fontWeight:ne(new qo),formatOnPaste:ne(new Ze(50,"formatOnPaste",!1,{description:m("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:ne(new Ze(51,"formatOnType",!1,{description:m("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:ne(new Ze(52,"glyphMargin",!0,{description:m("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:ne(new zO),hideCursorInOverviewRuler:ne(new Ze(54,"hideCursorInOverviewRuler",!1,{description:m("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:ne(new KO),inDiffEditor:ne(new Ze(56,"inDiffEditor",!1)),letterSpacing:ne(new er(58,"letterSpacing",rs.letterSpacing,o=>er.clamp(o,-5,20),{description:m("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:ne(new jO),lineDecorationsWidth:ne(new Zc(60,"lineDecorationsWidth",10)),lineHeight:ne(new YO),lineNumbers:ne(new t4),lineNumbersMinChars:ne(new Et(63,"lineNumbersMinChars",5,1,300)),linkedEditing:ne(new Ze(64,"linkedEditing",!1,{description:m("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols, e.g. HTML tags, are updated while editing.")})),links:ne(new Ze(65,"links",!0,{description:m("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:ne(new fn(66,"matchBrackets","always",["always","near","never"],{description:m("matchBrackets","Highlight matching brackets.")})),minimap:ne(new XO),mouseStyle:ne(new fn(68,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:ne(new er(69,"mouseWheelScrollSensitivity",1,o=>o===0?1:o,{markdownDescription:m("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:ne(new Ze(70,"mouseWheelZoom",!1,{markdownDescription:m("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:ne(new Ze(71,"multiCursorMergeOverlapping",!0,{description:m("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:ne(new Yh(72,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],O$,{markdownEnumDescriptions:[m("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),m("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:m({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:ne(new fn(73,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[m("multiCursorPaste.spread","Each cursor pastes a single line of the text."),m("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:m("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),occurrencesHighlight:ne(new Ze(74,"occurrencesHighlight",!0,{description:m("occurrencesHighlight","Controls whether the editor should highlight semantic symbol occurrences.")})),overviewRulerBorder:ne(new Ze(75,"overviewRulerBorder",!0,{description:m("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:ne(new Et(76,"overviewRulerLanes",3,0,3)),padding:ne(new ZO),parameterHints:ne(new JO),peekWidgetDefaultFocus:ne(new fn(79,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[m("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),m("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:m("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),definitionLinkOpensInPeek:ne(new Ze(80,"definitionLinkOpensInPeek",!1,{description:m("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:ne(new e4),quickSuggestionsDelay:ne(new Et(82,"quickSuggestionsDelay",10,0,1073741824,{description:m("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:ne(new Ze(83,"readOnly",!1)),renameOnType:ne(new Ze(84,"renameOnType",!1,{description:m("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:m("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:ne(new Ze(85,"renderControlCharacters",!0,{description:m("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:ne(new Ze(86,"renderFinalNewline",!0,{description:m("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:ne(new fn(87,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",m("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:m("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:ne(new Ze(88,"renderLineHighlightOnlyWhenFocus",!1,{description:m("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:ne(new fn(89,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:ne(new fn(90,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",m("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),m("renderWhitespace.selection","Render whitespace characters only on selected text."),m("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:m("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:ne(new Et(91,"revealHorizontalRightPadding",30,0,1e3)),roundedSelection:ne(new Ze(92,"roundedSelection",!0,{description:m("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:ne(new n4),scrollbar:ne(new V$),scrollBeyondLastColumn:ne(new Et(95,"scrollBeyondLastColumn",4,0,1073741824,{description:m("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:ne(new Ze(96,"scrollBeyondLastLine",!0,{description:m("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:ne(new Ze(97,"scrollPredominantAxis",!0,{description:m("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:ne(new Ze(98,"selectionClipboard",!0,{description:m("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:hi})),selectionHighlight:ne(new Ze(99,"selectionHighlight",!0,{description:m("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:ne(new Ze(100,"selectOnLineNumbers",!0)),showFoldingControls:ne(new fn(101,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[m("showFoldingControls.always","Always show the folding controls."),m("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),m("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:m("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:ne(new Ze(102,"showUnused",!0,{description:m("showUnused","Controls fading out of unused code.")})),showDeprecated:ne(new Ze(128,"showDeprecated",!0,{description:m("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:ne(new qO),snippetSuggestions:ne(new fn(103,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[m("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),m("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),m("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),m("snippetSuggestions.none","Do not show snippet suggestions.")],description:m("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:ne(new l4),smoothScrolling:ne(new Ze(105,"smoothScrolling",!1,{description:m("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:ne(new Et(107,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:ne(new a4),inlineSuggest:ne(new s4),suggestFontSize:ne(new Et(109,"suggestFontSize",0,0,1e3,{markdownDescription:m("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:ne(new Et(110,"suggestLineHeight",0,0,1e3,{markdownDescription:m("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:ne(new Ze(111,"suggestOnTriggerCharacters",!0,{description:m("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:ne(new fn(112,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[m("suggestSelection.first","Always select the first suggestion."),m("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),m("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:m("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:ne(new fn(113,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[m("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),m("tabCompletion.off","Disable tab completions."),m("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:m("tabCompletion","Enables tab completions.")})),tabIndex:ne(new Et(114,"tabIndex",0,-1,1073741824)),unicodeHighlight:ne(new i4),unusualLineTerminators:ne(new fn(116,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[m("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),m("unusualLineTerminators.off","Unusual line terminators are ignored."),m("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:m("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:ne(new Ze(117,"useShadowDOM",!0)),useTabStops:ne(new Ze(118,"useTabStops",!0,{description:m("useTabStops","Inserting and deleting whitespace follows tab stops.")})),wordSeparators:ne(new Hi(119,"wordSeparators",TO,{description:m("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:ne(new fn(120,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[m("wordWrap.off","Lines will never wrap."),m("wordWrap.on","Lines will wrap at the viewport width."),m({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),m({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:m({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:ne(new Hi(121,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;¢°′″‰℃、。｡､￠，．：；？！％・･ゝゞヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻ｧｨｩｪｫｬｭｮｯｰ”〉》」』】〕）］｝｣")),wordWrapBreakBeforeCharacters:ne(new Hi(122,"wordWrapBreakBeforeCharacters","([{‘“〈《「『【〔（［｛｢£¥＄￡￥+＋")),wordWrapColumn:ne(new Et(123,"wordWrapColumn",80,1,1073741824,{markdownDescription:m({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:ne(new fn(124,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:ne(new fn(125,"wordWrapOverride2","inherit",["off","on","inherit"])),wrappingIndent:ne(new Yh(126,"wrappingIndent",1,"same",["none","same","indent","deepIndent"],H$,{enumDescriptions:[m("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),m("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),m("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),m("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:m("wrappingIndent","Controls the indentation of wrapped lines.")})),wrappingStrategy:ne(new fn(127,"wrappingStrategy","simple",["simple","advanced"],{enumDescriptions:[m("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),m("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],description:m("wrappingStrategy","Controls the algorithm that computes wrapping points.")})),editorClassName:ne(new HO),pixelRatio:ne(new QO),tabFocusMode:ne(new c4),layoutInfo:ne(new qd),wrappingInfo:ne(new d4)};class h4{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?pu.isErrorNoTelemetry(e)?new pu(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}u(h4,"ErrorHandler");const g4=new h4;function Ie(o){ca(o)||g4.onUnexpectedError(o)}u(Ie,"onUnexpectedError");function Hn(o){ca(o)||g4.onUnexpectedExternalError(o)}u(Hn,"onUnexpectedExternalError");function k2(o){if(o instanceof Error){const{name:e,message:t}=o,n=o.stacktrace||o.stack;return{$isError:!0,name:e,message:t,stack:n,noTelemetry:pu.isErrorNoTelemetry(o)}}return o}u(k2,"transformErrorForSerialization");const $0="Canceled";function ca(o){return o instanceof El?!0:o instanceof Error&&o.name===$0&&o.message===$0}u(ca,"isCancellationError");class El extends Error{constructor(){super($0),this.name=this.message}}u(El,"CancellationError");function f4(){const o=new Error($0);return o.name=o.message,o}u(f4,"canceled");function dr(o){return o?new Error(`Illegal argument: ${o}`):new Error("Illegal argument")}u(dr,"illegalArgument");function G$(o){return o?new Error(`Illegal state: ${o}`):new Error("Illegal state")}u(G$,"illegalState");class p4 extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}u(p4,"NotSupportedError");class pu extends Error{constructor(e){super(e),this.name="ErrorNoTelemetry"}static fromError(e){if(e instanceof pu)return e;const t=new pu;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="ErrorNoTelemetry"}}u(pu,"ErrorNoTelemetry");class Ew extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,Ew.prototype);debugger}}u(Ew,"BugIndicatingError");function fl(o){const e=this;let t=!1,n;return function(){return t||(t=!0,n=o.apply(e,arguments)),n}}u(fl,"once$1");class m4 extends Error{constructor(e){super(`Encountered errors while disposing of store. Errors: [${e.join(", ")}]`),this.errors=e}}u(m4,"MultiDisposeError");function RD(o){return typeof o.dispose=="function"&&o.dispose.length===0}u(RD,"isDisposable");function st(o){if(je.is(o)){const e=[];for(const t of o)if(t)try{t.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new m4(e);return Array.isArray(o)?[]:o}else if(o)return o.dispose(),o}u(st,"dispose");function ur(...o){return He(()=>st(o))}u(ur,"combinedDisposable");function He(o){return{dispose:fl(()=>{o()})}}u(He,"toDisposable");class J{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){try{st(this._toDispose.values())}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?J.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}}u(J,"DisposableStore");J.DISABLE_DISPOSED_WARNING=!1;class U{constructor(){this._store=new J,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}u(U,"Disposable");U.None=Object.freeze({dispose(){}});class gi{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)===null||t===void 0||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)===null||e===void 0||e.dispose(),this._value=void 0}clearAndLeak(){const e=this._value;return this._value=void 0,e}}u(gi,"MutableDisposable");class b4{constructor(e){this._disposable=e,this._counter=1}acquire(){return this._counter++,this}release(){return--this._counter===0&&this._disposable.dispose(),this}}u(b4,"RefCountedDisposable");class _4{constructor(){this.dispose=()=>{},this.unset=()=>{},this.isset=()=>!1}set(e){let t=e;return this.unset=()=>t=void 0,this.isset=()=>t!==void 0,this.dispose=()=>{t&&(t(),t=void 0)},this}}u(_4,"SafeDisposable");class v4{constructor(e){this.object=e}dispose(){}}u(v4,"ImmortalReference");const z$=on.performance&&typeof on.performance.now=="function";class Ai{constructor(e){this._highResolution=z$&&e,this._startTime=this._now(),this._stopTime=-1}static create(e=!0){return new Ai(e)}stop(){this._stopTime=this._now()}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?on.performance.now():Date.now()}}u(Ai,"StopWatch");var fe;(function(o){o.None=()=>U.None;function e(k){return(T,x=null,M)=>{let F=!1,V;return V=k(G=>{if(!F)return V?V.dispose():F=!0,T.call(x,G)},null,M),F&&V.dispose(),V}}u(e,"once"),o.once=e;function t(k,T,x){return l((M,F=null,V)=>k(G=>M.call(F,T(G)),null,V),x)}u(t,"map"),o.map=t;function n(k,T,x){return l((M,F=null,V)=>k(G=>{T(G),M.call(F,G)},null,V),x)}u(n,"forEach"),o.forEach=n;function i(k,T,x){return l((M,F=null,V)=>k(G=>T(G)&&M.call(F,G),null,V),x)}u(i,"filter"),o.filter=i;function s(k){return k}u(s,"signal"),o.signal=s;function r(...k){return(T,x=null,M)=>ur(...k.map(F=>F(V=>T.call(x,V),null,M)))}u(r,"any"),o.any=r;function a(k,T,x,M){let F=x;return t(k,V=>(F=T(F,V),F),M)}u(a,"reduce"),o.reduce=a;function l(k,T){let x;const M={onFirstListenerAdd(){x=k(F.fire,F)},onLastListenerRemove(){x?.dispose()}},F=new R(M);return T?.add(F),F.event}u(l,"snapshot");function c(k,T,x=100,M=!1,F,V){let G,j,ae,he=0;const Se={leakWarningThreshold:F,onFirstListenerAdd(){G=k(ke=>{he++,j=T(j,ke),M&&!ae&&(Te.fire(j),j=void 0),clearTimeout(ae),ae=setTimeout(()=>{const Ue=j;j=void 0,ae=void 0,(!M||he>1)&&Te.fire(Ue),he=0},x)})},onLastListenerRemove(){G.dispose()}},Te=new R(Se);return V?.add(Te),Te.event}u(c,"debounce"),o.debounce=c;function d(k,T=(M,F)=>M===F,x){let M=!0,F;return i(k,V=>{const G=M||!T(V,F);return M=!1,F=V,G},x)}u(d,"latch"),o.latch=d;function h(k,T,x){return[o.filter(k,T,x),o.filter(k,M=>!T(M),x)]}u(h,"split"),o.split=h;function g(k,T=!1,x=[]){let M=x.slice(),F=k(j=>{M?M.push(j):G.fire(j)});const V=u(()=>{M?.forEach(j=>G.fire(j)),M=null},"flush"),G=new R({onFirstListenerAdd(){F||(F=k(j=>G.fire(j)))},onFirstListenerDidAdd(){M&&(T?setTimeout(V):V())},onLastListenerRemove(){F&&F.dispose(),F=null}});return G.event}u(g,"buffer"),o.buffer=g;class f{constructor(T){this.event=T,this.disposables=new J}map(T){return new f(t(this.event,T,this.disposables))}forEach(T){return new f(n(this.event,T,this.disposables))}filter(T){return new f(i(this.event,T,this.disposables))}reduce(T,x){return new f(a(this.event,T,x,this.disposables))}latch(){return new f(d(this.event,void 0,this.disposables))}debounce(T,x=100,M=!1,F){return new f(c(this.event,T,x,M,F,this.disposables))}on(T,x,M){return this.event(T,x,M)}once(T,x,M){return e(this.event)(T,x,M)}dispose(){this.disposables.dispose()}}u(f,"ChainableEvent");function p(k){return new f(k)}u(p,"chain"),o.chain=p;function _(k,T,x=M=>M){const M=u((...j)=>G.fire(x(...j)),"fn"),F=u(()=>k.on(T,M),"onFirstListenerAdd"),V=u(()=>k.removeListener(T,M),"onLastListenerRemove"),G=new R({onFirstListenerAdd:F,onLastListenerRemove:V});return G.event}u(_,"fromNodeEventEmitter"),o.fromNodeEventEmitter=_;function v(k,T,x=M=>M){const M=u((...j)=>G.fire(x(...j)),"fn"),F=u(()=>k.addEventListener(T,M),"onFirstListenerAdd"),V=u(()=>k.removeEventListener(T,M),"onLastListenerRemove"),G=new R({onFirstListenerAdd:F,onLastListenerRemove:V});return G.event}u(v,"fromDOMEventEmitter"),o.fromDOMEventEmitter=v;function C(k){return new Promise(T=>e(k)(T))}u(C,"toPromise"),o.toPromise=C;function w(k,T){return T(void 0),k(x=>T(x))}u(w,"runAndSubscribe"),o.runAndSubscribe=w;function y(k,T){let x=null;function M(V){x?.dispose(),x=new J,T(V,x)}u(M,"run"),M(void 0);const F=k(V=>M(V));return He(()=>{F.dispose(),x?.dispose()})}u(y,"runAndSubscribeWithStore"),o.runAndSubscribeWithStore=y;class S{constructor(T,x){this.obs=T,this._counter=0,this._hasChanged=!1;const M={onFirstListenerAdd:()=>{T.addObserver(this)},onLastListenerRemove:()=>{T.removeObserver(this)}};this.emitter=new R(M),x&&x.add(this.emitter)}beginUpdate(T){this._counter++}handleChange(T,x){this._hasChanged=!0}endUpdate(T){--this._counter===0&&this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this.obs.get()))}}u(S,"EmitterObserver");function E(k,T){return new S(k,T).emitter.event}u(E,"fromObservable"),o.fromObservable=E})(fe||(fe={}));class m_{constructor(e){this._listenerCount=0,this._invocationCount=0,this._elapsedOverall=0,this._name=`${e}_${m_._idPool++}`}start(e){this._stopWatch=new Ai(!0),this._listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this._elapsedOverall+=e,this._invocationCount+=1,console.info(`did FIRE ${this._name}: elapsed_ms: ${e.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`),this._stopWatch=void 0}}}u(m_,"EventProfiling");m_._idPool=0;class kw{constructor(e){this.value=e}static create(){var e;return new kw((e=new Error().stack)!==null&&e!==void 0?e:"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}u(kw,"Stacktrace");class C4{constructor(e,t,n){this.callback=e,this.callbackThis=t,this.stack=n,this.subscription=new _4}invoke(e){this.callback.call(this.callbackThis,e)}}u(C4,"Listener");let R=u(class{constructor(e){var t,n;this._disposed=!1,this._options=e,this._leakageMon=void 0,this._perfMon=!((t=this._options)===null||t===void 0)&&t._profName?new m_(this._options._profName):void 0,this._deliveryQueue=(n=this._options)===null||n===void 0?void 0:n.deliveryQueue}dispose(){var e,t,n,i;this._disposed||(this._disposed=!0,this._listeners&&this._listeners.clear(),(e=this._deliveryQueue)===null||e===void 0||e.clear(this),(n=(t=this._options)===null||t===void 0?void 0:t.onLastListenerRemove)===null||n===void 0||n.call(t),(i=this._leakageMon)===null||i===void 0||i.dispose())}get event(){return this._event||(this._event=(e,t,n)=>{var i,s,r;this._listeners||(this._listeners=new vi);const a=this._listeners.isEmpty();a&&(!((i=this._options)===null||i===void 0)&&i.onFirstListenerAdd)&&this._options.onFirstListenerAdd(this);let l,c;this._leakageMon&&this._listeners.size>=30&&(c=kw.create(),l=this._leakageMon.check(c,this._listeners.size+1));const d=new C4(e,t,c),h=this._listeners.push(d);a&&(!((s=this._options)===null||s===void 0)&&s.onFirstListenerDidAdd)&&this._options.onFirstListenerDidAdd(this),!((r=this._options)===null||r===void 0)&&r.onListenerDidAdd&&this._options.onListenerDidAdd(this,e,t);const g=d.subscription.set(()=>{l?.(),this._disposed||(h(),this._options&&this._options.onLastListenerRemove&&(this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)))});return n instanceof J?n.add(g):Array.isArray(n)&&n.push(g),g}),this._event}fire(e){var t,n;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new w4);for(const i of this._listeners)this._deliveryQueue.push(this,i,e);(t=this._perfMon)===null||t===void 0||t.start(this._deliveryQueue.size),this._deliveryQueue.deliver(),(n=this._perfMon)===null||n===void 0||n.stop()}}},"Emitter");class FD{constructor(){this._queue=new vi}get size(){return this._queue.size}push(e,t,n){this._queue.push(new y4(e,t,n))}clear(e){const t=new vi;for(const n of this._queue)n.emitter!==e&&t.push(n);this._queue=t}deliver(){for(;this._queue.size>0;){const e=this._queue.shift();try{e.listener.invoke(e.event)}catch(t){Ie(t)}}}}u(FD,"EventDeliveryQueue");class w4 extends FD{clear(e){this._queue.clear()}}u(w4,"PrivateEventDeliveryQueue");class y4{constructor(e,t,n){this.emitter=e,this.listener=t,this.event=n}}u(y4,"EventDeliveryQueueElement");class Qm extends R{constructor(e){super(e),this._isPaused=0,this._eventQueue=new vi,this._mergeFn=e?.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._listeners&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}u(Qm,"PauseableEmitter");class S4 extends Qm{constructor(e){var t;super(e),this._delay=(t=e.delay)!==null&&t!==void 0?t:100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}u(S4,"DebounceEmitter");class Mw{constructor(){this.buffers=[]}wrapEvent(e){return(t,n,i)=>e(s=>{const r=this.buffers[this.buffers.length-1];r?r.push(()=>t.call(n,s)):t.call(n,s)},void 0,i)}bufferEvents(e){const t=[];this.buffers.push(t);const n=e();return this.buffers.pop(),t.forEach(i=>i()),n}}u(Mw,"EventBufferer");class xL{constructor(){this.listening=!1,this.inputEvent=fe.None,this.inputEventListener=U.None,this.emitter=new R({onFirstListenerDidAdd:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onLastListenerRemove:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}u(xL,"Relay");const T4=Object.freeze(function(o,e){const t=setTimeout(o.bind(e),0);return{dispose(){clearTimeout(t)}}});var Ge;(function(o){function e(t){return t===o.None||t===o.Cancelled||t instanceof Im?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}u(e,"isCancellationToken"),o.isCancellationToken=e,o.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:fe.None}),o.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:T4})})(Ge||(Ge={}));class Im{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?T4:(this._emitter||(this._emitter=new R),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}u(Im,"MutableToken");let ti=u(class{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new Im),this._token}cancel(){this._token?this._token instanceof Im&&this._token.cancel():this._token=Ge.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof Im&&this._token.dispose():this._token=Ge.None}},"CancellationTokenSource");class Dw{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}u(Dw,"KeyCodeStrMap");const jC=new Dw,EL=new Dw,kL=new Dw,L4=new Array(230),K$=Object.create(null),j$=Object.create(null),OD=[];for(let o=0;o<=193;o++)OD[o]=-1;(function(){const o="",e=[[0,1,0,"None",0,"unknown",0,"VK_UNKNOWN",o,o],[0,1,1,"Hyper",0,o,0,o,o,o],[0,1,2,"Super",0,o,0,o,o,o],[0,1,3,"Fn",0,o,0,o,o,o],[0,1,4,"FnLock",0,o,0,o,o,o],[0,1,5,"Suspend",0,o,0,o,o,o],[0,1,6,"Resume",0,o,0,o,o,o],[0,1,7,"Turbo",0,o,0,o,o,o],[0,1,8,"Sleep",0,o,0,"VK_SLEEP",o,o],[0,1,9,"WakeUp",0,o,0,o,o,o],[31,0,10,"KeyA",31,"A",65,"VK_A",o,o],[32,0,11,"KeyB",32,"B",66,"VK_B",o,o],[33,0,12,"KeyC",33,"C",67,"VK_C",o,o],[34,0,13,"KeyD",34,"D",68,"VK_D",o,o],[35,0,14,"KeyE",35,"E",69,"VK_E",o,o],[36,0,15,"KeyF",36,"F",70,"VK_F",o,o],[37,0,16,"KeyG",37,"G",71,"VK_G",o,o],[38,0,17,"KeyH",38,"H",72,"VK_H",o,o],[39,0,18,"KeyI",39,"I",73,"VK_I",o,o],[40,0,19,"KeyJ",40,"J",74,"VK_J",o,o],[41,0,20,"KeyK",41,"K",75,"VK_K",o,o],[42,0,21,"KeyL",42,"L",76,"VK_L",o,o],[43,0,22,"KeyM",43,"M",77,"VK_M",o,o],[44,0,23,"KeyN",44,"N",78,"VK_N",o,o],[45,0,24,"KeyO",45,"O",79,"VK_O",o,o],[46,0,25,"KeyP",46,"P",80,"VK_P",o,o],[47,0,26,"KeyQ",47,"Q",81,"VK_Q",o,o],[48,0,27,"KeyR",48,"R",82,"VK_R",o,o],[49,0,28,"KeyS",49,"S",83,"VK_S",o,o],[50,0,29,"KeyT",50,"T",84,"VK_T",o,o],[51,0,30,"KeyU",51,"U",85,"VK_U",o,o],[52,0,31,"KeyV",52,"V",86,"VK_V",o,o],[53,0,32,"KeyW",53,"W",87,"VK_W",o,o],[54,0,33,"KeyX",54,"X",88,"VK_X",o,o],[55,0,34,"KeyY",55,"Y",89,"VK_Y",o,o],[56,0,35,"KeyZ",56,"Z",90,"VK_Z",o,o],[22,0,36,"Digit1",22,"1",49,"VK_1",o,o],[23,0,37,"Digit2",23,"2",50,"VK_2",o,o],[24,0,38,"Digit3",24,"3",51,"VK_3",o,o],[25,0,39,"Digit4",25,"4",52,"VK_4",o,o],[26,0,40,"Digit5",26,"5",53,"VK_5",o,o],[27,0,41,"Digit6",27,"6",54,"VK_6",o,o],[28,0,42,"Digit7",28,"7",55,"VK_7",o,o],[29,0,43,"Digit8",29,"8",56,"VK_8",o,o],[30,0,44,"Digit9",30,"9",57,"VK_9",o,o],[21,0,45,"Digit0",21,"0",48,"VK_0",o,o],[3,1,46,"Enter",3,"Enter",13,"VK_RETURN",o,o],[9,1,47,"Escape",9,"Escape",27,"VK_ESCAPE",o,o],[1,1,48,"Backspace",1,"Backspace",8,"VK_BACK",o,o],[2,1,49,"Tab",2,"Tab",9,"VK_TAB",o,o],[10,1,50,"Space",10,"Space",32,"VK_SPACE",o,o],[83,0,51,"Minus",83,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[81,0,52,"Equal",81,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[87,0,53,"BracketLeft",87,"[",219,"VK_OEM_4","[","OEM_4"],[89,0,54,"BracketRight",89,"]",221,"VK_OEM_6","]","OEM_6"],[88,0,55,"Backslash",88,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,0,56,"IntlHash",0,o,0,o,o,o],[80,0,57,"Semicolon",80,";",186,"VK_OEM_1",";","OEM_1"],[90,0,58,"Quote",90,"'",222,"VK_OEM_7","'","OEM_7"],[86,0,59,"Backquote",86,"`",192,"VK_OEM_3","`","OEM_3"],[82,0,60,"Comma",82,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[84,0,61,"Period",84,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[85,0,62,"Slash",85,"/",191,"VK_OEM_2","/","OEM_2"],[8,1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",o,o],[59,1,64,"F1",59,"F1",112,"VK_F1",o,o],[60,1,65,"F2",60,"F2",113,"VK_F2",o,o],[61,1,66,"F3",61,"F3",114,"VK_F3",o,o],[62,1,67,"F4",62,"F4",115,"VK_F4",o,o],[63,1,68,"F5",63,"F5",116,"VK_F5",o,o],[64,1,69,"F6",64,"F6",117,"VK_F6",o,o],[65,1,70,"F7",65,"F7",118,"VK_F7",o,o],[66,1,71,"F8",66,"F8",119,"VK_F8",o,o],[67,1,72,"F9",67,"F9",120,"VK_F9",o,o],[68,1,73,"F10",68,"F10",121,"VK_F10",o,o],[69,1,74,"F11",69,"F11",122,"VK_F11",o,o],[70,1,75,"F12",70,"F12",123,"VK_F12",o,o],[0,1,76,"PrintScreen",0,o,0,o,o,o],[79,1,77,"ScrollLock",79,"ScrollLock",145,"VK_SCROLL",o,o],[7,1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",o,o],[19,1,79,"Insert",19,"Insert",45,"VK_INSERT",o,o],[14,1,80,"Home",14,"Home",36,"VK_HOME",o,o],[11,1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",o,o],[20,1,82,"Delete",20,"Delete",46,"VK_DELETE",o,o],[13,1,83,"End",13,"End",35,"VK_END",o,o],[12,1,84,"PageDown",12,"PageDown",34,"VK_NEXT",o,o],[17,1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",o],[15,1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",o],[18,1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",o],[16,1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",o],[78,1,89,"NumLock",78,"NumLock",144,"VK_NUMLOCK",o,o],[108,1,90,"NumpadDivide",108,"NumPad_Divide",111,"VK_DIVIDE",o,o],[103,1,91,"NumpadMultiply",103,"NumPad_Multiply",106,"VK_MULTIPLY",o,o],[106,1,92,"NumpadSubtract",106,"NumPad_Subtract",109,"VK_SUBTRACT",o,o],[104,1,93,"NumpadAdd",104,"NumPad_Add",107,"VK_ADD",o,o],[3,1,94,"NumpadEnter",3,o,0,o,o,o],[94,1,95,"Numpad1",94,"NumPad1",97,"VK_NUMPAD1",o,o],[95,1,96,"Numpad2",95,"NumPad2",98,"VK_NUMPAD2",o,o],[96,1,97,"Numpad3",96,"NumPad3",99,"VK_NUMPAD3",o,o],[97,1,98,"Numpad4",97,"NumPad4",100,"VK_NUMPAD4",o,o],[98,1,99,"Numpad5",98,"NumPad5",101,"VK_NUMPAD5",o,o],[99,1,100,"Numpad6",99,"NumPad6",102,"VK_NUMPAD6",o,o],[100,1,101,"Numpad7",100,"NumPad7",103,"VK_NUMPAD7",o,o],[101,1,102,"Numpad8",101,"NumPad8",104,"VK_NUMPAD8",o,o],[102,1,103,"Numpad9",102,"NumPad9",105,"VK_NUMPAD9",o,o],[93,1,104,"Numpad0",93,"NumPad0",96,"VK_NUMPAD0",o,o],[107,1,105,"NumpadDecimal",107,"NumPad_Decimal",110,"VK_DECIMAL",o,o],[92,0,106,"IntlBackslash",92,"OEM_102",226,"VK_OEM_102",o,o],[58,1,107,"ContextMenu",58,"ContextMenu",93,o,o,o],[0,1,108,"Power",0,o,0,o,o,o],[0,1,109,"NumpadEqual",0,o,0,o,o,o],[71,1,110,"F13",71,"F13",124,"VK_F13",o,o],[72,1,111,"F14",72,"F14",125,"VK_F14",o,o],[73,1,112,"F15",73,"F15",126,"VK_F15",o,o],[74,1,113,"F16",74,"F16",127,"VK_F16",o,o],[75,1,114,"F17",75,"F17",128,"VK_F17",o,o],[76,1,115,"F18",76,"F18",129,"VK_F18",o,o],[77,1,116,"F19",77,"F19",130,"VK_F19",o,o],[0,1,117,"F20",0,o,0,"VK_F20",o,o],[0,1,118,"F21",0,o,0,"VK_F21",o,o],[0,1,119,"F22",0,o,0,"VK_F22",o,o],[0,1,120,"F23",0,o,0,"VK_F23",o,o],[0,1,121,"F24",0,o,0,"VK_F24",o,o],[0,1,122,"Open",0,o,0,o,o,o],[0,1,123,"Help",0,o,0,o,o,o],[0,1,124,"Select",0,o,0,o,o,o],[0,1,125,"Again",0,o,0,o,o,o],[0,1,126,"Undo",0,o,0,o,o,o],[0,1,127,"Cut",0,o,0,o,o,o],[0,1,128,"Copy",0,o,0,o,o,o],[0,1,129,"Paste",0,o,0,o,o,o],[0,1,130,"Find",0,o,0,o,o,o],[0,1,131,"AudioVolumeMute",112,"AudioVolumeMute",173,"VK_VOLUME_MUTE",o,o],[0,1,132,"AudioVolumeUp",113,"AudioVolumeUp",175,"VK_VOLUME_UP",o,o],[0,1,133,"AudioVolumeDown",114,"AudioVolumeDown",174,"VK_VOLUME_DOWN",o,o],[105,1,134,"NumpadComma",105,"NumPad_Separator",108,"VK_SEPARATOR",o,o],[110,0,135,"IntlRo",110,"ABNT_C1",193,"VK_ABNT_C1",o,o],[0,1,136,"KanaMode",0,o,0,o,o,o],[0,0,137,"IntlYen",0,o,0,o,o,o],[0,1,138,"Convert",0,o,0,o,o,o],[0,1,139,"NonConvert",0,o,0,o,o,o],[0,1,140,"Lang1",0,o,0,o,o,o],[0,1,141,"Lang2",0,o,0,o,o,o],[0,1,142,"Lang3",0,o,0,o,o,o],[0,1,143,"Lang4",0,o,0,o,o,o],[0,1,144,"Lang5",0,o,0,o,o,o],[0,1,145,"Abort",0,o,0,o,o,o],[0,1,146,"Props",0,o,0,o,o,o],[0,1,147,"NumpadParenLeft",0,o,0,o,o,o],[0,1,148,"NumpadParenRight",0,o,0,o,o,o],[0,1,149,"NumpadBackspace",0,o,0,o,o,o],[0,1,150,"NumpadMemoryStore",0,o,0,o,o,o],[0,1,151,"NumpadMemoryRecall",0,o,0,o,o,o],[0,1,152,"NumpadMemoryClear",0,o,0,o,o,o],[0,1,153,"NumpadMemoryAdd",0,o,0,o,o,o],[0,1,154,"NumpadMemorySubtract",0,o,0,o,o,o],[0,1,155,"NumpadClear",126,"Clear",12,"VK_CLEAR",o,o],[0,1,156,"NumpadClearEntry",0,o,0,o,o,o],[5,1,0,o,5,"Ctrl",17,"VK_CONTROL",o,o],[4,1,0,o,4,"Shift",16,"VK_SHIFT",o,o],[6,1,0,o,6,"Alt",18,"VK_MENU",o,o],[57,1,0,o,57,"Meta",0,"VK_COMMAND",o,o],[5,1,157,"ControlLeft",5,o,0,"VK_LCONTROL",o,o],[4,1,158,"ShiftLeft",4,o,0,"VK_LSHIFT",o,o],[6,1,159,"AltLeft",6,o,0,"VK_LMENU",o,o],[57,1,160,"MetaLeft",57,o,0,"VK_LWIN",o,o],[5,1,161,"ControlRight",5,o,0,"VK_RCONTROL",o,o],[4,1,162,"ShiftRight",4,o,0,"VK_RSHIFT",o,o],[6,1,163,"AltRight",6,o,0,"VK_RMENU",o,o],[57,1,164,"MetaRight",57,o,0,"VK_RWIN",o,o],[0,1,165,"BrightnessUp",0,o,0,o,o,o],[0,1,166,"BrightnessDown",0,o,0,o,o,o],[0,1,167,"MediaPlay",0,o,0,o,o,o],[0,1,168,"MediaRecord",0,o,0,o,o,o],[0,1,169,"MediaFastForward",0,o,0,o,o,o],[0,1,170,"MediaRewind",0,o,0,o,o,o],[114,1,171,"MediaTrackNext",119,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",o,o],[115,1,172,"MediaTrackPrevious",120,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",o,o],[116,1,173,"MediaStop",121,"MediaStop",178,"VK_MEDIA_STOP",o,o],[0,1,174,"Eject",0,o,0,o,o,o],[117,1,175,"MediaPlayPause",122,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",o,o],[0,1,176,"MediaSelect",123,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",o,o],[0,1,177,"LaunchMail",124,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",o,o],[0,1,178,"LaunchApp2",125,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",o,o],[0,1,179,"LaunchApp1",0,o,0,"VK_MEDIA_LAUNCH_APP1",o,o],[0,1,180,"SelectTask",0,o,0,o,o,o],[0,1,181,"LaunchScreenSaver",0,o,0,o,o,o],[0,1,182,"BrowserSearch",115,"BrowserSearch",170,"VK_BROWSER_SEARCH",o,o],[0,1,183,"BrowserHome",116,"BrowserHome",172,"VK_BROWSER_HOME",o,o],[112,1,184,"BrowserBack",117,"BrowserBack",166,"VK_BROWSER_BACK",o,o],[113,1,185,"BrowserForward",118,"BrowserForward",167,"VK_BROWSER_FORWARD",o,o],[0,1,186,"BrowserStop",0,o,0,"VK_BROWSER_STOP",o,o],[0,1,187,"BrowserRefresh",0,o,0,"VK_BROWSER_REFRESH",o,o],[0,1,188,"BrowserFavorites",0,o,0,"VK_BROWSER_FAVORITES",o,o],[0,1,189,"ZoomToggle",0,o,0,o,o,o],[0,1,190,"MailReply",0,o,0,o,o,o],[0,1,191,"MailForward",0,o,0,o,o,o],[0,1,192,"MailSend",0,o,0,o,o,o],[109,1,0,o,109,"KeyInComposition",229,o,o,o],[111,1,0,o,111,"ABNT_C2",194,"VK_ABNT_C2",o,o],[91,1,0,o,91,"OEM_8",223,"VK_OEM_8",o,o],[0,1,0,o,0,o,0,"VK_KANA",o,o],[0,1,0,o,0,o,0,"VK_HANGUL",o,o],[0,1,0,o,0,o,0,"VK_JUNJA",o,o],[0,1,0,o,0,o,0,"VK_FINAL",o,o],[0,1,0,o,0,o,0,"VK_HANJA",o,o],[0,1,0,o,0,o,0,"VK_KANJI",o,o],[0,1,0,o,0,o,0,"VK_CONVERT",o,o],[0,1,0,o,0,o,0,"VK_NONCONVERT",o,o],[0,1,0,o,0,o,0,"VK_ACCEPT",o,o],[0,1,0,o,0,o,0,"VK_MODECHANGE",o,o],[0,1,0,o,0,o,0,"VK_SELECT",o,o],[0,1,0,o,0,o,0,"VK_PRINT",o,o],[0,1,0,o,0,o,0,"VK_EXECUTE",o,o],[0,1,0,o,0,o,0,"VK_SNAPSHOT",o,o],[0,1,0,o,0,o,0,"VK_HELP",o,o],[0,1,0,o,0,o,0,"VK_APPS",o,o],[0,1,0,o,0,o,0,"VK_PROCESSKEY",o,o],[0,1,0,o,0,o,0,"VK_PACKET",o,o],[0,1,0,o,0,o,0,"VK_DBE_SBCSCHAR",o,o],[0,1,0,o,0,o,0,"VK_DBE_DBCSCHAR",o,o],[0,1,0,o,0,o,0,"VK_ATTN",o,o],[0,1,0,o,0,o,0,"VK_CRSEL",o,o],[0,1,0,o,0,o,0,"VK_EXSEL",o,o],[0,1,0,o,0,o,0,"VK_EREOF",o,o],[0,1,0,o,0,o,0,"VK_PLAY",o,o],[0,1,0,o,0,o,0,"VK_ZOOM",o,o],[0,1,0,o,0,o,0,"VK_NONAME",o,o],[0,1,0,o,0,o,0,"VK_PA1",o,o],[0,1,0,o,0,o,0,"VK_OEM_CLEAR",o,o]],t=[],n=[];for(const i of e){const[s,r,a,l,c,d,h,g,f,p]=i;if(n[a]||(n[a]=!0,K$[l]=a,j$[l.toLowerCase()]=a,r&&(OD[a]=c)),!t[c]){if(t[c]=!0,!d)throw new Error(`String representation missing for key code ${c} around scan code ${l}`);jC.define(c,d),EL.define(c,f||d),kL.define(c,p||f||d)}h&&(L4[h]=c)}})();var Nd;(function(o){function e(a){return jC.keyCodeToStr(a)}u(e,"toString"),o.toString=e;function t(a){return jC.strToKeyCode(a)}u(t,"fromString"),o.fromString=t;function n(a){return EL.keyCodeToStr(a)}u(n,"toUserSettingsUS"),o.toUserSettingsUS=n;function i(a){return kL.keyCodeToStr(a)}u(i,"toUserSettingsGeneral"),o.toUserSettingsGeneral=i;function s(a){return EL.strToKeyCode(a)||kL.strToKeyCode(a)}u(s,"fromUserSettings"),o.fromUserSettings=s;function r(a){if(a>=93&&a<=108)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return jC.keyCodeToStr(a)}u(r,"toElectronAccelerator"),o.toElectronAccelerator=r})(Nd||(Nd={}));function xn(o,e){const t=(e&65535)<<16>>>0;return(o|t)>>>0}u(xn,"KeyChord");let Sg;if(typeof on.vscode<"u"&&typeof on.vscode.process<"u"){const o=on.vscode.process;Sg={get platform(){return o.platform},get arch(){return o.arch},get env(){return o.env},cwd(){return o.cwd()}}}else typeof process<"u"?Sg={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:Sg={get platform(){return ei?"win32":Xe?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const ML=Sg.cwd,$$=Sg.env,sh=Sg.platform,q$=65,Y$=97,X$=90,Z$=122,uc=46,bi=47,vs=92,Wl=58,J$=63;class VD extends Error{constructor(e,t,n){let i;typeof t=="string"&&t.indexOf("not ")===0?(i="must not be",t=t.replace(/^not /,"")):i="must be";const s=e.indexOf(".")!==-1?"property":"argument";let r=`The "${e}" ${s} ${i} of type ${t}`;r+=`. Received type ${typeof n}`,super(r),this.code="ERR_INVALID_ARG_TYPE"}}u(VD,"ErrorInvalidArgType");function Pn(o,e){if(typeof o!="string")throw new VD(e,"string",o)}u(Pn,"validateString");function ht(o){return o===bi||o===vs}u(ht,"isPathSeparator$1");function DL(o){return o===bi}u(DL,"isPosixPathSeparator");function Ul(o){return o>=q$&&o<=X$||o>=Y$&&o<=Z$}u(Ul,"isWindowsDeviceRoot");function q0(o,e,t,n){let i="",s=0,r=-1,a=0,l=0;for(let c=0;c<=o.length;++c){if(c<o.length)l=o.charCodeAt(c);else{if(n(l))break;l=bi}if(n(l)){if(!(r===c-1||a===1))if(a===2){if(i.length<2||s!==2||i.charCodeAt(i.length-1)!==uc||i.charCodeAt(i.length-2)!==uc){if(i.length>2){const d=i.lastIndexOf(t);d===-1?(i="",s=0):(i=i.slice(0,d),s=i.length-1-i.lastIndexOf(t)),r=c,a=0;continue}else if(i.length!==0){i="",s=0,r=c,a=0;continue}}e&&(i+=i.length>0?`${t}..`:"..",s=2)}else i.length>0?i+=`${t}${o.slice(r+1,c)}`:i=o.slice(r+1,c),s=c-r-1;r=c,a=0}else l===uc&&a!==-1?++a:a=-1}return i}u(q0,"normalizeString");function x4(o,e){if(e===null||typeof e!="object")throw new VD("pathObject","Object",e);const t=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return t?t===e.root?`${t}${n}`:`${t}${o}${n}`:n}u(x4,"_format");const os={resolve(...o){let e="",t="",n=!1;for(let i=o.length-1;i>=-1;i--){let s;if(i>=0){if(s=o[i],Pn(s,"path"),s.length===0)continue}else e.length===0?s=ML():(s=$$[`=${e}`]||ML(),(s===void 0||s.slice(0,2).toLowerCase()!==e.toLowerCase()&&s.charCodeAt(2)===vs)&&(s=`${e}\\`));const r=s.length;let a=0,l="",c=!1;const d=s.charCodeAt(0);if(r===1)ht(d)&&(a=1,c=!0);else if(ht(d))if(c=!0,ht(s.charCodeAt(1))){let h=2,g=h;for(;h<r&&!ht(s.charCodeAt(h));)h++;if(h<r&&h!==g){const f=s.slice(g,h);for(g=h;h<r&&ht(s.charCodeAt(h));)h++;if(h<r&&h!==g){for(g=h;h<r&&!ht(s.charCodeAt(h));)h++;(h===r||h!==g)&&(l=`\\\\${f}\\${s.slice(g,h)}`,a=h)}}}else a=1;else Ul(d)&&s.charCodeAt(1)===Wl&&(l=s.slice(0,2),a=2,r>2&&ht(s.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(t=`${s.slice(a)}\\${t}`,n=c,c&&e.length>0)break}return t=q0(t,!n,"\\",ht),n?`${e}\\${t}`:`${e}${t}`||"."},normalize(o){Pn(o,"path");const e=o.length;if(e===0)return".";let t=0,n,i=!1;const s=o.charCodeAt(0);if(e===1)return DL(s)?"\\":o;if(ht(s))if(i=!0,ht(o.charCodeAt(1))){let a=2,l=a;for(;a<e&&!ht(o.charCodeAt(a));)a++;if(a<e&&a!==l){const c=o.slice(l,a);for(l=a;a<e&&ht(o.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!ht(o.charCodeAt(a));)a++;if(a===e)return`\\\\${c}\\${o.slice(l)}\\`;a!==l&&(n=`\\\\${c}\\${o.slice(l,a)}`,t=a)}}}else t=1;else Ul(s)&&o.charCodeAt(1)===Wl&&(n=o.slice(0,2),t=2,e>2&&ht(o.charCodeAt(2))&&(i=!0,t=3));let r=t<e?q0(o.slice(t),!i,"\\",ht):"";return r.length===0&&!i&&(r="."),r.length>0&&ht(o.charCodeAt(e-1))&&(r+="\\"),n===void 0?i?`\\${r}`:r:i?`${n}\\${r}`:`${n}${r}`},isAbsolute(o){Pn(o,"path");const e=o.length;if(e===0)return!1;const t=o.charCodeAt(0);return ht(t)||e>2&&Ul(t)&&o.charCodeAt(1)===Wl&&ht(o.charCodeAt(2))},join(...o){if(o.length===0)return".";let e,t;for(let s=0;s<o.length;++s){const r=o[s];Pn(r,"path"),r.length>0&&(e===void 0?e=t=r:e+=`\\${r}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof t=="string"&&ht(t.charCodeAt(0))){++i;const s=t.length;s>1&&ht(t.charCodeAt(1))&&(++i,s>2&&(ht(t.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&ht(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return os.normalize(e)},relative(o,e){if(Pn(o,"from"),Pn(e,"to"),o===e)return"";const t=os.resolve(o),n=os.resolve(e);if(t===n||(o=t.toLowerCase(),e=n.toLowerCase(),o===e))return"";let i=0;for(;i<o.length&&o.charCodeAt(i)===vs;)i++;let s=o.length;for(;s-1>i&&o.charCodeAt(s-1)===vs;)s--;const r=s-i;let a=0;for(;a<e.length&&e.charCodeAt(a)===vs;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===vs;)l--;const c=l-a,d=r<c?r:c;let h=-1,g=0;for(;g<d;g++){const p=o.charCodeAt(i+g);if(p!==e.charCodeAt(a+g))break;p===vs&&(h=g)}if(g!==d){if(h===-1)return n}else{if(c>d){if(e.charCodeAt(a+g)===vs)return n.slice(a+g+1);if(g===2)return n.slice(a+g)}r>d&&(o.charCodeAt(i+g)===vs?h=g:g===2&&(h=3)),h===-1&&(h=0)}let f="";for(g=i+h+1;g<=s;++g)(g===s||o.charCodeAt(g)===vs)&&(f+=f.length===0?"..":"\\..");return a+=h,f.length>0?`${f}${n.slice(a,l)}`:(n.charCodeAt(a)===vs&&++a,n.slice(a,l))},toNamespacedPath(o){if(typeof o!="string")return o;if(o.length===0)return"";const e=os.resolve(o);if(e.length<=2)return o;if(e.charCodeAt(0)===vs){if(e.charCodeAt(1)===vs){const t=e.charCodeAt(2);if(t!==J$&&t!==uc)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(Ul(e.charCodeAt(0))&&e.charCodeAt(1)===Wl&&e.charCodeAt(2)===vs)return`\\\\?\\${e}`;return o},dirname(o){Pn(o,"path");const e=o.length;if(e===0)return".";let t=-1,n=0;const i=o.charCodeAt(0);if(e===1)return ht(i)?o:".";if(ht(i)){if(t=n=1,ht(o.charCodeAt(1))){let a=2,l=a;for(;a<e&&!ht(o.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&ht(o.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!ht(o.charCodeAt(a));)a++;if(a===e)return o;a!==l&&(t=n=a+1)}}}}else Ul(i)&&o.charCodeAt(1)===Wl&&(t=e>2&&ht(o.charCodeAt(2))?3:2,n=t);let s=-1,r=!0;for(let a=e-1;a>=n;--a)if(ht(o.charCodeAt(a))){if(!r){s=a;break}}else r=!1;if(s===-1){if(t===-1)return".";s=t}return o.slice(0,s)},basename(o,e){e!==void 0&&Pn(e,"ext"),Pn(o,"path");let t=0,n=-1,i=!0,s;if(o.length>=2&&Ul(o.charCodeAt(0))&&o.charCodeAt(1)===Wl&&(t=2),e!==void 0&&e.length>0&&e.length<=o.length){if(e===o)return"";let r=e.length-1,a=-1;for(s=o.length-1;s>=t;--s){const l=o.charCodeAt(s);if(ht(l)){if(!i){t=s+1;break}}else a===-1&&(i=!1,a=s+1),r>=0&&(l===e.charCodeAt(r)?--r===-1&&(n=s):(r=-1,n=a))}return t===n?n=a:n===-1&&(n=o.length),o.slice(t,n)}for(s=o.length-1;s>=t;--s)if(ht(o.charCodeAt(s))){if(!i){t=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":o.slice(t,n)},extname(o){Pn(o,"path");let e=0,t=-1,n=0,i=-1,s=!0,r=0;o.length>=2&&o.charCodeAt(1)===Wl&&Ul(o.charCodeAt(0))&&(e=n=2);for(let a=o.length-1;a>=e;--a){const l=o.charCodeAt(a);if(ht(l)){if(!s){n=a+1;break}continue}i===-1&&(s=!1,i=a+1),l===uc?t===-1?t=a:r!==1&&(r=1):t!==-1&&(r=-1)}return t===-1||i===-1||r===0||r===1&&t===i-1&&t===n+1?"":o.slice(t,i)},format:x4.bind(null,"\\"),parse(o){Pn(o,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(o.length===0)return e;const t=o.length;let n=0,i=o.charCodeAt(0);if(t===1)return ht(i)?(e.root=e.dir=o,e):(e.base=e.name=o,e);if(ht(i)){if(n=1,ht(o.charCodeAt(1))){let h=2,g=h;for(;h<t&&!ht(o.charCodeAt(h));)h++;if(h<t&&h!==g){for(g=h;h<t&&ht(o.charCodeAt(h));)h++;if(h<t&&h!==g){for(g=h;h<t&&!ht(o.charCodeAt(h));)h++;h===t?n=h:h!==g&&(n=h+1)}}}}else if(Ul(i)&&o.charCodeAt(1)===Wl){if(t<=2)return e.root=e.dir=o,e;if(n=2,ht(o.charCodeAt(2))){if(t===3)return e.root=e.dir=o,e;n=3}}n>0&&(e.root=o.slice(0,n));let s=-1,r=n,a=-1,l=!0,c=o.length-1,d=0;for(;c>=n;--c){if(i=o.charCodeAt(c),ht(i)){if(!l){r=c+1;break}continue}a===-1&&(l=!1,a=c+1),i===uc?s===-1?s=c:d!==1&&(d=1):s!==-1&&(d=-1)}return a!==-1&&(s===-1||d===0||d===1&&s===a-1&&s===r+1?e.base=e.name=o.slice(r,a):(e.name=o.slice(r,s),e.base=o.slice(r,a),e.ext=o.slice(s,a))),r>0&&r!==n?e.dir=o.slice(0,r-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},bn={resolve(...o){let e="",t=!1;for(let n=o.length-1;n>=-1&&!t;n--){const i=n>=0?o[n]:ML();Pn(i,"path"),i.length!==0&&(e=`${i}/${e}`,t=i.charCodeAt(0)===bi)}return e=q0(e,!t,"/",DL),t?`/${e}`:e.length>0?e:"."},normalize(o){if(Pn(o,"path"),o.length===0)return".";const e=o.charCodeAt(0)===bi,t=o.charCodeAt(o.length-1)===bi;return o=q0(o,!e,"/",DL),o.length===0?e?"/":t?"./":".":(t&&(o+="/"),e?`/${o}`:o)},isAbsolute(o){return Pn(o,"path"),o.length>0&&o.charCodeAt(0)===bi},join(...o){if(o.length===0)return".";let e;for(let t=0;t<o.length;++t){const n=o[t];Pn(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":bn.normalize(e)},relative(o,e){if(Pn(o,"from"),Pn(e,"to"),o===e||(o=bn.resolve(o),e=bn.resolve(e),o===e))return"";const t=1,n=o.length,i=n-t,s=1,r=e.length-s,a=i<r?i:r;let l=-1,c=0;for(;c<a;c++){const h=o.charCodeAt(t+c);if(h!==e.charCodeAt(s+c))break;h===bi&&(l=c)}if(c===a)if(r>a){if(e.charCodeAt(s+c)===bi)return e.slice(s+c+1);if(c===0)return e.slice(s+c)}else i>a&&(o.charCodeAt(t+c)===bi?l=c:c===0&&(l=0));let d="";for(c=t+l+1;c<=n;++c)(c===n||o.charCodeAt(c)===bi)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(s+l)}`},toNamespacedPath(o){return o},dirname(o){if(Pn(o,"path"),o.length===0)return".";const e=o.charCodeAt(0)===bi;let t=-1,n=!0;for(let i=o.length-1;i>=1;--i)if(o.charCodeAt(i)===bi){if(!n){t=i;break}}else n=!1;return t===-1?e?"/":".":e&&t===1?"//":o.slice(0,t)},basename(o,e){e!==void 0&&Pn(e,"ext"),Pn(o,"path");let t=0,n=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=o.length){if(e===o)return"";let r=e.length-1,a=-1;for(s=o.length-1;s>=0;--s){const l=o.charCodeAt(s);if(l===bi){if(!i){t=s+1;break}}else a===-1&&(i=!1,a=s+1),r>=0&&(l===e.charCodeAt(r)?--r===-1&&(n=s):(r=-1,n=a))}return t===n?n=a:n===-1&&(n=o.length),o.slice(t,n)}for(s=o.length-1;s>=0;--s)if(o.charCodeAt(s)===bi){if(!i){t=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":o.slice(t,n)},extname(o){Pn(o,"path");let e=-1,t=0,n=-1,i=!0,s=0;for(let r=o.length-1;r>=0;--r){const a=o.charCodeAt(r);if(a===bi){if(!i){t=r+1;break}continue}n===-1&&(i=!1,n=r+1),a===uc?e===-1?e=r:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===t+1?"":o.slice(e,n)},format:x4.bind(null,"/"),parse(o){Pn(o,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(o.length===0)return e;const t=o.charCodeAt(0)===bi;let n;t?(e.root="/",n=1):n=0;let i=-1,s=0,r=-1,a=!0,l=o.length-1,c=0;for(;l>=n;--l){const d=o.charCodeAt(l);if(d===bi){if(!a){s=l+1;break}continue}r===-1&&(a=!1,r=l+1),d===uc?i===-1?i=l:c!==1&&(c=1):i!==-1&&(c=-1)}if(r!==-1){const d=s===0&&t?1:s;i===-1||c===0||c===1&&i===r-1&&i===s+1?e.base=e.name=o.slice(d,r):(e.name=o.slice(d,i),e.base=o.slice(d,r),e.ext=o.slice(i,r))}return s>0?e.dir=o.slice(0,s-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};bn.win32=os.win32=os;bn.posix=os.posix=bn;const E4=sh==="win32"?os.normalize:bn.normalize,Q$=sh==="win32"?os.resolve:bn.resolve,eq=sh==="win32"?os.relative:bn.relative,k4=sh==="win32"?os.dirname:bn.dirname,Yd=sh==="win32"?os.basename:bn.basename,tq=sh==="win32"?os.extname:bn.extname,Xr=sh==="win32"?os.sep:bn.sep,nq=/^\w[\w\d+.-]*$/,iq=/^\//,sq=/^\/\//;function M2(o,e){if(!o.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${o.authority}", path: "${o.path}", query: "${o.query}", fragment: "${o.fragment}"}`);if(o.scheme&&!nq.test(o.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(o.path){if(o.authority){if(!iq.test(o.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(sq.test(o.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}u(M2,"_validateUri");function oq(o,e){return!o&&!e?"file":o}u(oq,"_schemeFix");function rq(o,e){switch(o){case"https":case"http":case"file":e?e[0]!==zo&&(e=zo+e):e=zo;break}return e}u(rq,"_referenceResolution");const en="",zo="/",aq=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class be{constructor(e,t,n,i,s,r=!1){typeof e=="object"?(this.scheme=e.scheme||en,this.authority=e.authority||en,this.path=e.path||en,this.query=e.query||en,this.fragment=e.fragment||en):(this.scheme=oq(e,r),this.authority=t||en,this.path=rq(this.scheme,n||en),this.query=i||en,this.fragment=s||en,M2(this,r))}static isUri(e){return e instanceof be?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}get fsPath(){return Y0(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:n,path:i,query:s,fragment:r}=e;return t===void 0?t=this.scheme:t===null&&(t=en),n===void 0?n=this.authority:n===null&&(n=en),i===void 0?i=this.path:i===null&&(i=en),s===void 0?s=this.query:s===null&&(s=en),r===void 0?r=this.fragment:r===null&&(r=en),t===this.scheme&&n===this.authority&&i===this.path&&s===this.query&&r===this.fragment?this:new Nh(t,n,i,s,r)}static parse(e,t=!1){const n=aq.exec(e);return n?new Nh(n[2]||en,Wv(n[4]||en),Wv(n[5]||en),Wv(n[7]||en),Wv(n[9]||en),t):new Nh(en,en,en,en,en)}static file(e){let t=en;if(ei&&(e=e.replace(/\\/g,zo)),e[0]===zo&&e[1]===zo){const n=e.indexOf(zo,2);n===-1?(t=e.substring(2),e=zo):(t=e.substring(2,n),e=e.substring(n)||zo)}return new Nh("file",t,e,en,en)}static from(e){const t=new Nh(e.scheme,e.authority,e.path,e.query,e.fragment);return M2(t,!0),t}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return ei&&e.scheme==="file"?n=be.file(os.join(Y0(e,!0),...t)).path:n=bn.join(e.path,...t),e.with({path:n})}toString(e=!1){return AL(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof be)return e;{const t=new Nh(e);return t._formatted=e.external,t._fsPath=e._sep===M4?e.fsPath:null,t}}else return e}}u(be,"URI");const M4=ei?1:void 0;let Nh=u(class extends be{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=Y0(this,!1)),this._fsPath}toString(e=!1){return e?AL(this,!0):(this._formatted||(this._formatted=AL(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=M4),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},"Uri");const D4={[58]:"%3A",[47]:"%2F",[63]:"%3F",[35]:"%23",[91]:"%5B",[93]:"%5D",[64]:"%40",[33]:"%21",[36]:"%24",[38]:"%26",[39]:"%27",[40]:"%28",[41]:"%29",[42]:"%2A",[43]:"%2B",[44]:"%2C",[59]:"%3B",[61]:"%3D",[32]:"%20"};function D2(o,e){let t,n=-1;for(let i=0;i<o.length;i++){const s=o.charCodeAt(i);if(s>=97&&s<=122||s>=65&&s<=90||s>=48&&s<=57||s===45||s===46||s===95||s===126||e&&s===47)n!==-1&&(t+=encodeURIComponent(o.substring(n,i)),n=-1),t!==void 0&&(t+=o.charAt(i));else{t===void 0&&(t=o.substr(0,i));const r=D4[s];r!==void 0?(n!==-1&&(t+=encodeURIComponent(o.substring(n,i)),n=-1),t+=r):n===-1&&(n=i)}}return n!==-1&&(t+=encodeURIComponent(o.substring(n))),t!==void 0?t:o}u(D2,"encodeURIComponentFast");function lq(o){let e;for(let t=0;t<o.length;t++){const n=o.charCodeAt(t);n===35||n===63?(e===void 0&&(e=o.substr(0,t)),e+=D4[n]):e!==void 0&&(e+=o[t])}return e!==void 0?e:o}u(lq,"encodeURIComponentMinimal");function Y0(o,e){let t;return o.authority&&o.path.length>1&&o.scheme==="file"?t=`//${o.authority}${o.path}`:o.path.charCodeAt(0)===47&&(o.path.charCodeAt(1)>=65&&o.path.charCodeAt(1)<=90||o.path.charCodeAt(1)>=97&&o.path.charCodeAt(1)<=122)&&o.path.charCodeAt(2)===58?e?t=o.path.substr(1):t=o.path[1].toLowerCase()+o.path.substr(2):t=o.path,ei&&(t=t.replace(/\//g,"\\")),t}u(Y0,"uriToFsPath");function AL(o,e){const t=e?lq:D2;let n="",{scheme:i,authority:s,path:r,query:a,fragment:l}=o;if(i&&(n+=i,n+=":"),(s||i==="file")&&(n+=zo,n+=zo),s){let c=s.indexOf("@");if(c!==-1){const d=s.substr(0,c);s=s.substr(c+1),c=d.indexOf(":"),c===-1?n+=t(d,!1):(n+=t(d.substr(0,c),!1),n+=":",n+=t(d.substr(c+1),!1)),n+="@"}s=s.toLowerCase(),c=s.indexOf(":"),c===-1?n+=t(s,!1):(n+=t(s.substr(0,c),!1),n+=s.substr(c))}if(r){if(r.length>=3&&r.charCodeAt(0)===47&&r.charCodeAt(2)===58){const c=r.charCodeAt(1);c>=65&&c<=90&&(r=`/${String.fromCharCode(c+32)}:${r.substr(3)}`)}else if(r.length>=2&&r.charCodeAt(1)===58){const c=r.charCodeAt(0);c>=65&&c<=90&&(r=`${String.fromCharCode(c+32)}:${r.substr(2)}`)}n+=t(r,!0)}return a&&(n+="?",n+=t(a,!1)),l&&(n+="#",n+=e?l:D2(l,!1)),n}u(AL,"_asFormatted");function A4(o){try{return decodeURIComponent(o)}catch{return o.length>3?o.substr(0,3)+A4(o.substr(3)):o}}u(A4,"decodeURIComponentGraceful");const A2=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Wv(o){return o.match(A2)?o.replace(A2,e=>A4(e)):o}u(Wv,"percentDecode");let H=u(class{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new H(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return H.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return H.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return H.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){const n=e.lineNumber|0,i=t.lineNumber|0;if(n===i){const s=e.column|0,r=t.column|0;return s-r}return n-i}clone(){return new H(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new H(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}},"Position"),L=u(class{constructor(e,t,n,i){e>n||e===n&&t>i?(this.startLineNumber=n,this.startColumn=i,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=i)}isEmpty(){return L.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return L.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return L.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return L.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return L.plusRange(this,e)}static plusRange(e,t){let n,i,s,r;return t.startLineNumber<e.startLineNumber?(n=t.startLineNumber,i=t.startColumn):t.startLineNumber===e.startLineNumber?(n=t.startLineNumber,i=Math.min(t.startColumn,e.startColumn)):(n=e.startLineNumber,i=e.startColumn),t.endLineNumber>e.endLineNumber?(s=t.endLineNumber,r=t.endColumn):t.endLineNumber===e.endLineNumber?(s=t.endLineNumber,r=Math.max(t.endColumn,e.endColumn)):(s=e.endLineNumber,r=e.endColumn),new L(n,i,s,r)}intersectRanges(e){return L.intersectRanges(this,e)}static intersectRanges(e,t){let n=e.startLineNumber,i=e.startColumn,s=e.endLineNumber,r=e.endColumn;const a=t.startLineNumber,l=t.startColumn,c=t.endLineNumber,d=t.endColumn;return n<a?(n=a,i=l):n===a&&(i=Math.max(i,l)),s>c?(s=c,r=d):s===c&&(r=Math.min(r,d)),n>s||n===s&&i>r?null:new L(n,i,s,r)}equalsRange(e){return L.equalsRange(this,e)}static equalsRange(e,t){return!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return L.getEndPosition(this)}static getEndPosition(e){return new H(e.endLineNumber,e.endColumn)}getStartPosition(){return L.getStartPosition(this)}static getStartPosition(e){return new H(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new L(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new L(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return L.collapseToStart(this)}static collapseToStart(e){return new L(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}static fromPositions(e,t=e){return new L(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new L(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const s=e.startLineNumber|0,r=t.startLineNumber|0;if(s===r){const a=e.startColumn|0,l=t.startColumn|0;if(a===l){const c=e.endLineNumber|0,d=t.endLineNumber|0;if(c===d){const h=e.endColumn|0,g=t.endColumn|0;return h-g}return c-d}return a-l}return s-r}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}},"Range"),re=u(class extends L{constructor(e,t,n,i){super(e,t,n,i),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=n,this.positionColumn=i}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return re.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new re(this.startLineNumber,this.startColumn,e,t):new re(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new H(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new H(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new re(e,t,this.endLineNumber,this.endColumn):new re(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new re(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new re(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new re(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new re(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,n,i,s){return s===0?new re(e,t,n,i):new re(n,i,e,t)}},"Selection");function cq(o){return o?o.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}u(cq,"getCodiconAriaLabel");class b{constructor(e,t,n){this.id=e,this.definition=t,this.description=n,b._allCodicons.push(this)}get classNames(){return"codicon codicon-"+this.id}get classNamesArray(){return["codicon","codicon-"+this.id]}get cssSelector(){return".codicon.codicon-"+this.id}static getAll(){return b._allCodicons}}u(b,"Codicon");b._allCodicons=[];b.add=new b("add",{fontCharacter:"\\ea60"});b.plus=new b("plus",b.add.definition);b.gistNew=new b("gist-new",b.add.definition);b.repoCreate=new b("repo-create",b.add.definition);b.lightbulb=new b("lightbulb",{fontCharacter:"\\ea61"});b.lightBulb=new b("light-bulb",{fontCharacter:"\\ea61"});b.repo=new b("repo",{fontCharacter:"\\ea62"});b.repoDelete=new b("repo-delete",{fontCharacter:"\\ea62"});b.gistFork=new b("gist-fork",{fontCharacter:"\\ea63"});b.repoForked=new b("repo-forked",{fontCharacter:"\\ea63"});b.gitPullRequest=new b("git-pull-request",{fontCharacter:"\\ea64"});b.gitPullRequestAbandoned=new b("git-pull-request-abandoned",{fontCharacter:"\\ea64"});b.recordKeys=new b("record-keys",{fontCharacter:"\\ea65"});b.keyboard=new b("keyboard",{fontCharacter:"\\ea65"});b.tag=new b("tag",{fontCharacter:"\\ea66"});b.tagAdd=new b("tag-add",{fontCharacter:"\\ea66"});b.tagRemove=new b("tag-remove",{fontCharacter:"\\ea66"});b.person=new b("person",{fontCharacter:"\\ea67"});b.personFollow=new b("person-follow",{fontCharacter:"\\ea67"});b.personOutline=new b("person-outline",{fontCharacter:"\\ea67"});b.personFilled=new b("person-filled",{fontCharacter:"\\ea67"});b.gitBranch=new b("git-branch",{fontCharacter:"\\ea68"});b.gitBranchCreate=new b("git-branch-create",{fontCharacter:"\\ea68"});b.gitBranchDelete=new b("git-branch-delete",{fontCharacter:"\\ea68"});b.sourceControl=new b("source-control",{fontCharacter:"\\ea68"});b.mirror=new b("mirror",{fontCharacter:"\\ea69"});b.mirrorPublic=new b("mirror-public",{fontCharacter:"\\ea69"});b.star=new b("star",{fontCharacter:"\\ea6a"});b.starAdd=new b("star-add",{fontCharacter:"\\ea6a"});b.starDelete=new b("star-delete",{fontCharacter:"\\ea6a"});b.starEmpty=new b("star-empty",{fontCharacter:"\\ea6a"});b.comment=new b("comment",{fontCharacter:"\\ea6b"});b.commentAdd=new b("comment-add",{fontCharacter:"\\ea6b"});b.alert=new b("alert",{fontCharacter:"\\ea6c"});b.warning=new b("warning",{fontCharacter:"\\ea6c"});b.search=new b("search",{fontCharacter:"\\ea6d"});b.searchSave=new b("search-save",{fontCharacter:"\\ea6d"});b.logOut=new b("log-out",{fontCharacter:"\\ea6e"});b.signOut=new b("sign-out",{fontCharacter:"\\ea6e"});b.logIn=new b("log-in",{fontCharacter:"\\ea6f"});b.signIn=new b("sign-in",{fontCharacter:"\\ea6f"});b.eye=new b("eye",{fontCharacter:"\\ea70"});b.eyeUnwatch=new b("eye-unwatch",{fontCharacter:"\\ea70"});b.eyeWatch=new b("eye-watch",{fontCharacter:"\\ea70"});b.circleFilled=new b("circle-filled",{fontCharacter:"\\ea71"});b.primitiveDot=new b("primitive-dot",{fontCharacter:"\\ea71"});b.closeDirty=new b("close-dirty",{fontCharacter:"\\ea71"});b.debugBreakpoint=new b("debug-breakpoint",{fontCharacter:"\\ea71"});b.debugBreakpointDisabled=new b("debug-breakpoint-disabled",{fontCharacter:"\\ea71"});b.debugHint=new b("debug-hint",{fontCharacter:"\\ea71"});b.primitiveSquare=new b("primitive-square",{fontCharacter:"\\ea72"});b.edit=new b("edit",{fontCharacter:"\\ea73"});b.pencil=new b("pencil",{fontCharacter:"\\ea73"});b.info=new b("info",{fontCharacter:"\\ea74"});b.issueOpened=new b("issue-opened",{fontCharacter:"\\ea74"});b.gistPrivate=new b("gist-private",{fontCharacter:"\\ea75"});b.gitForkPrivate=new b("git-fork-private",{fontCharacter:"\\ea75"});b.lock=new b("lock",{fontCharacter:"\\ea75"});b.mirrorPrivate=new b("mirror-private",{fontCharacter:"\\ea75"});b.close=new b("close",{fontCharacter:"\\ea76"});b.removeClose=new b("remove-close",{fontCharacter:"\\ea76"});b.x=new b("x",{fontCharacter:"\\ea76"});b.repoSync=new b("repo-sync",{fontCharacter:"\\ea77"});b.sync=new b("sync",{fontCharacter:"\\ea77"});b.clone=new b("clone",{fontCharacter:"\\ea78"});b.desktopDownload=new b("desktop-download",{fontCharacter:"\\ea78"});b.beaker=new b("beaker",{fontCharacter:"\\ea79"});b.microscope=new b("microscope",{fontCharacter:"\\ea79"});b.vm=new b("vm",{fontCharacter:"\\ea7a"});b.deviceDesktop=new b("device-desktop",{fontCharacter:"\\ea7a"});b.file=new b("file",{fontCharacter:"\\ea7b"});b.fileText=new b("file-text",{fontCharacter:"\\ea7b"});b.more=new b("more",{fontCharacter:"\\ea7c"});b.ellipsis=new b("ellipsis",{fontCharacter:"\\ea7c"});b.kebabHorizontal=new b("kebab-horizontal",{fontCharacter:"\\ea7c"});b.mailReply=new b("mail-reply",{fontCharacter:"\\ea7d"});b.reply=new b("reply",{fontCharacter:"\\ea7d"});b.organization=new b("organization",{fontCharacter:"\\ea7e"});b.organizationFilled=new b("organization-filled",{fontCharacter:"\\ea7e"});b.organizationOutline=new b("organization-outline",{fontCharacter:"\\ea7e"});b.newFile=new b("new-file",{fontCharacter:"\\ea7f"});b.fileAdd=new b("file-add",{fontCharacter:"\\ea7f"});b.newFolder=new b("new-folder",{fontCharacter:"\\ea80"});b.fileDirectoryCreate=new b("file-directory-create",{fontCharacter:"\\ea80"});b.trash=new b("trash",{fontCharacter:"\\ea81"});b.trashcan=new b("trashcan",{fontCharacter:"\\ea81"});b.history=new b("history",{fontCharacter:"\\ea82"});b.clock=new b("clock",{fontCharacter:"\\ea82"});b.folder=new b("folder",{fontCharacter:"\\ea83"});b.fileDirectory=new b("file-directory",{fontCharacter:"\\ea83"});b.symbolFolder=new b("symbol-folder",{fontCharacter:"\\ea83"});b.logoGithub=new b("logo-github",{fontCharacter:"\\ea84"});b.markGithub=new b("mark-github",{fontCharacter:"\\ea84"});b.github=new b("github",{fontCharacter:"\\ea84"});b.terminal=new b("terminal",{fontCharacter:"\\ea85"});b.console=new b("console",{fontCharacter:"\\ea85"});b.repl=new b("repl",{fontCharacter:"\\ea85"});b.zap=new b("zap",{fontCharacter:"\\ea86"});b.symbolEvent=new b("symbol-event",{fontCharacter:"\\ea86"});b.error=new b("error",{fontCharacter:"\\ea87"});b.stop=new b("stop",{fontCharacter:"\\ea87"});b.variable=new b("variable",{fontCharacter:"\\ea88"});b.symbolVariable=new b("symbol-variable",{fontCharacter:"\\ea88"});b.array=new b("array",{fontCharacter:"\\ea8a"});b.symbolArray=new b("symbol-array",{fontCharacter:"\\ea8a"});b.symbolModule=new b("symbol-module",{fontCharacter:"\\ea8b"});b.symbolPackage=new b("symbol-package",{fontCharacter:"\\ea8b"});b.symbolNamespace=new b("symbol-namespace",{fontCharacter:"\\ea8b"});b.symbolObject=new b("symbol-object",{fontCharacter:"\\ea8b"});b.symbolMethod=new b("symbol-method",{fontCharacter:"\\ea8c"});b.symbolFunction=new b("symbol-function",{fontCharacter:"\\ea8c"});b.symbolConstructor=new b("symbol-constructor",{fontCharacter:"\\ea8c"});b.symbolBoolean=new b("symbol-boolean",{fontCharacter:"\\ea8f"});b.symbolNull=new b("symbol-null",{fontCharacter:"\\ea8f"});b.symbolNumeric=new b("symbol-numeric",{fontCharacter:"\\ea90"});b.symbolNumber=new b("symbol-number",{fontCharacter:"\\ea90"});b.symbolStructure=new b("symbol-structure",{fontCharacter:"\\ea91"});b.symbolStruct=new b("symbol-struct",{fontCharacter:"\\ea91"});b.symbolParameter=new b("symbol-parameter",{fontCharacter:"\\ea92"});b.symbolTypeParameter=new b("symbol-type-parameter",{fontCharacter:"\\ea92"});b.symbolKey=new b("symbol-key",{fontCharacter:"\\ea93"});b.symbolText=new b("symbol-text",{fontCharacter:"\\ea93"});b.symbolReference=new b("symbol-reference",{fontCharacter:"\\ea94"});b.goToFile=new b("go-to-file",{fontCharacter:"\\ea94"});b.symbolEnum=new b("symbol-enum",{fontCharacter:"\\ea95"});b.symbolValue=new b("symbol-value",{fontCharacter:"\\ea95"});b.symbolRuler=new b("symbol-ruler",{fontCharacter:"\\ea96"});b.symbolUnit=new b("symbol-unit",{fontCharacter:"\\ea96"});b.activateBreakpoints=new b("activate-breakpoints",{fontCharacter:"\\ea97"});b.archive=new b("archive",{fontCharacter:"\\ea98"});b.arrowBoth=new b("arrow-both",{fontCharacter:"\\ea99"});b.arrowDown=new b("arrow-down",{fontCharacter:"\\ea9a"});b.arrowLeft=new b("arrow-left",{fontCharacter:"\\ea9b"});b.arrowRight=new b("arrow-right",{fontCharacter:"\\ea9c"});b.arrowSmallDown=new b("arrow-small-down",{fontCharacter:"\\ea9d"});b.arrowSmallLeft=new b("arrow-small-left",{fontCharacter:"\\ea9e"});b.arrowSmallRight=new b("arrow-small-right",{fontCharacter:"\\ea9f"});b.arrowSmallUp=new b("arrow-small-up",{fontCharacter:"\\eaa0"});b.arrowUp=new b("arrow-up",{fontCharacter:"\\eaa1"});b.bell=new b("bell",{fontCharacter:"\\eaa2"});b.bold=new b("bold",{fontCharacter:"\\eaa3"});b.book=new b("book",{fontCharacter:"\\eaa4"});b.bookmark=new b("bookmark",{fontCharacter:"\\eaa5"});b.debugBreakpointConditionalUnverified=new b("debug-breakpoint-conditional-unverified",{fontCharacter:"\\eaa6"});b.debugBreakpointConditional=new b("debug-breakpoint-conditional",{fontCharacter:"\\eaa7"});b.debugBreakpointConditionalDisabled=new b("debug-breakpoint-conditional-disabled",{fontCharacter:"\\eaa7"});b.debugBreakpointDataUnverified=new b("debug-breakpoint-data-unverified",{fontCharacter:"\\eaa8"});b.debugBreakpointData=new b("debug-breakpoint-data",{fontCharacter:"\\eaa9"});b.debugBreakpointDataDisabled=new b("debug-breakpoint-data-disabled",{fontCharacter:"\\eaa9"});b.debugBreakpointLogUnverified=new b("debug-breakpoint-log-unverified",{fontCharacter:"\\eaaa"});b.debugBreakpointLog=new b("debug-breakpoint-log",{fontCharacter:"\\eaab"});b.debugBreakpointLogDisabled=new b("debug-breakpoint-log-disabled",{fontCharacter:"\\eaab"});b.briefcase=new b("briefcase",{fontCharacter:"\\eaac"});b.broadcast=new b("broadcast",{fontCharacter:"\\eaad"});b.browser=new b("browser",{fontCharacter:"\\eaae"});b.bug=new b("bug",{fontCharacter:"\\eaaf"});b.calendar=new b("calendar",{fontCharacter:"\\eab0"});b.caseSensitive=new b("case-sensitive",{fontCharacter:"\\eab1"});b.check=new b("check",{fontCharacter:"\\eab2"});b.checklist=new b("checklist",{fontCharacter:"\\eab3"});b.chevronDown=new b("chevron-down",{fontCharacter:"\\eab4"});b.dropDownButton=new b("drop-down-button",b.chevronDown.definition);b.chevronLeft=new b("chevron-left",{fontCharacter:"\\eab5"});b.chevronRight=new b("chevron-right",{fontCharacter:"\\eab6"});b.chevronUp=new b("chevron-up",{fontCharacter:"\\eab7"});b.chromeClose=new b("chrome-close",{fontCharacter:"\\eab8"});b.chromeMaximize=new b("chrome-maximize",{fontCharacter:"\\eab9"});b.chromeMinimize=new b("chrome-minimize",{fontCharacter:"\\eaba"});b.chromeRestore=new b("chrome-restore",{fontCharacter:"\\eabb"});b.circleOutline=new b("circle-outline",{fontCharacter:"\\eabc"});b.debugBreakpointUnverified=new b("debug-breakpoint-unverified",{fontCharacter:"\\eabc"});b.circleSlash=new b("circle-slash",{fontCharacter:"\\eabd"});b.circuitBoard=new b("circuit-board",{fontCharacter:"\\eabe"});b.clearAll=new b("clear-all",{fontCharacter:"\\eabf"});b.clippy=new b("clippy",{fontCharacter:"\\eac0"});b.closeAll=new b("close-all",{fontCharacter:"\\eac1"});b.cloudDownload=new b("cloud-download",{fontCharacter:"\\eac2"});b.cloudUpload=new b("cloud-upload",{fontCharacter:"\\eac3"});b.code=new b("code",{fontCharacter:"\\eac4"});b.collapseAll=new b("collapse-all",{fontCharacter:"\\eac5"});b.colorMode=new b("color-mode",{fontCharacter:"\\eac6"});b.commentDiscussion=new b("comment-discussion",{fontCharacter:"\\eac7"});b.compareChanges=new b("compare-changes",{fontCharacter:"\\eafd"});b.creditCard=new b("credit-card",{fontCharacter:"\\eac9"});b.dash=new b("dash",{fontCharacter:"\\eacc"});b.dashboard=new b("dashboard",{fontCharacter:"\\eacd"});b.database=new b("database",{fontCharacter:"\\eace"});b.debugContinue=new b("debug-continue",{fontCharacter:"\\eacf"});b.debugDisconnect=new b("debug-disconnect",{fontCharacter:"\\ead0"});b.debugPause=new b("debug-pause",{fontCharacter:"\\ead1"});b.debugRestart=new b("debug-restart",{fontCharacter:"\\ead2"});b.debugStart=new b("debug-start",{fontCharacter:"\\ead3"});b.debugStepInto=new b("debug-step-into",{fontCharacter:"\\ead4"});b.debugStepOut=new b("debug-step-out",{fontCharacter:"\\ead5"});b.debugStepOver=new b("debug-step-over",{fontCharacter:"\\ead6"});b.debugStop=new b("debug-stop",{fontCharacter:"\\ead7"});b.debug=new b("debug",{fontCharacter:"\\ead8"});b.deviceCameraVideo=new b("device-camera-video",{fontCharacter:"\\ead9"});b.deviceCamera=new b("device-camera",{fontCharacter:"\\eada"});b.deviceMobile=new b("device-mobile",{fontCharacter:"\\eadb"});b.diffAdded=new b("diff-added",{fontCharacter:"\\eadc"});b.diffIgnored=new b("diff-ignored",{fontCharacter:"\\eadd"});b.diffModified=new b("diff-modified",{fontCharacter:"\\eade"});b.diffRemoved=new b("diff-removed",{fontCharacter:"\\eadf"});b.diffRenamed=new b("diff-renamed",{fontCharacter:"\\eae0"});b.diff=new b("diff",{fontCharacter:"\\eae1"});b.discard=new b("discard",{fontCharacter:"\\eae2"});b.editorLayout=new b("editor-layout",{fontCharacter:"\\eae3"});b.emptyWindow=new b("empty-window",{fontCharacter:"\\eae4"});b.exclude=new b("exclude",{fontCharacter:"\\eae5"});b.extensions=new b("extensions",{fontCharacter:"\\eae6"});b.eyeClosed=new b("eye-closed",{fontCharacter:"\\eae7"});b.fileBinary=new b("file-binary",{fontCharacter:"\\eae8"});b.fileCode=new b("file-code",{fontCharacter:"\\eae9"});b.fileMedia=new b("file-media",{fontCharacter:"\\eaea"});b.filePdf=new b("file-pdf",{fontCharacter:"\\eaeb"});b.fileSubmodule=new b("file-submodule",{fontCharacter:"\\eaec"});b.fileSymlinkDirectory=new b("file-symlink-directory",{fontCharacter:"\\eaed"});b.fileSymlinkFile=new b("file-symlink-file",{fontCharacter:"\\eaee"});b.fileZip=new b("file-zip",{fontCharacter:"\\eaef"});b.files=new b("files",{fontCharacter:"\\eaf0"});b.filter=new b("filter",{fontCharacter:"\\eaf1"});b.flame=new b("flame",{fontCharacter:"\\eaf2"});b.foldDown=new b("fold-down",{fontCharacter:"\\eaf3"});b.foldUp=new b("fold-up",{fontCharacter:"\\eaf4"});b.fold=new b("fold",{fontCharacter:"\\eaf5"});b.folderActive=new b("folder-active",{fontCharacter:"\\eaf6"});b.folderOpened=new b("folder-opened",{fontCharacter:"\\eaf7"});b.gear=new b("gear",{fontCharacter:"\\eaf8"});b.gift=new b("gift",{fontCharacter:"\\eaf9"});b.gistSecret=new b("gist-secret",{fontCharacter:"\\eafa"});b.gist=new b("gist",{fontCharacter:"\\eafb"});b.gitCommit=new b("git-commit",{fontCharacter:"\\eafc"});b.gitCompare=new b("git-compare",{fontCharacter:"\\eafd"});b.gitMerge=new b("git-merge",{fontCharacter:"\\eafe"});b.githubAction=new b("github-action",{fontCharacter:"\\eaff"});b.githubAlt=new b("github-alt",{fontCharacter:"\\eb00"});b.globe=new b("globe",{fontCharacter:"\\eb01"});b.grabber=new b("grabber",{fontCharacter:"\\eb02"});b.graph=new b("graph",{fontCharacter:"\\eb03"});b.gripper=new b("gripper",{fontCharacter:"\\eb04"});b.heart=new b("heart",{fontCharacter:"\\eb05"});b.home=new b("home",{fontCharacter:"\\eb06"});b.horizontalRule=new b("horizontal-rule",{fontCharacter:"\\eb07"});b.hubot=new b("hubot",{fontCharacter:"\\eb08"});b.inbox=new b("inbox",{fontCharacter:"\\eb09"});b.issueClosed=new b("issue-closed",{fontCharacter:"\\eba4"});b.issueReopened=new b("issue-reopened",{fontCharacter:"\\eb0b"});b.issues=new b("issues",{fontCharacter:"\\eb0c"});b.italic=new b("italic",{fontCharacter:"\\eb0d"});b.jersey=new b("jersey",{fontCharacter:"\\eb0e"});b.json=new b("json",{fontCharacter:"\\eb0f"});b.kebabVertical=new b("kebab-vertical",{fontCharacter:"\\eb10"});b.key=new b("key",{fontCharacter:"\\eb11"});b.law=new b("law",{fontCharacter:"\\eb12"});b.lightbulbAutofix=new b("lightbulb-autofix",{fontCharacter:"\\eb13"});b.linkExternal=new b("link-external",{fontCharacter:"\\eb14"});b.link=new b("link",{fontCharacter:"\\eb15"});b.listOrdered=new b("list-ordered",{fontCharacter:"\\eb16"});b.listUnordered=new b("list-unordered",{fontCharacter:"\\eb17"});b.liveShare=new b("live-share",{fontCharacter:"\\eb18"});b.loading=new b("loading",{fontCharacter:"\\eb19"});b.location=new b("location",{fontCharacter:"\\eb1a"});b.mailRead=new b("mail-read",{fontCharacter:"\\eb1b"});b.mail=new b("mail",{fontCharacter:"\\eb1c"});b.markdown=new b("markdown",{fontCharacter:"\\eb1d"});b.megaphone=new b("megaphone",{fontCharacter:"\\eb1e"});b.mention=new b("mention",{fontCharacter:"\\eb1f"});b.milestone=new b("milestone",{fontCharacter:"\\eb20"});b.mortarBoard=new b("mortar-board",{fontCharacter:"\\eb21"});b.move=new b("move",{fontCharacter:"\\eb22"});b.multipleWindows=new b("multiple-windows",{fontCharacter:"\\eb23"});b.mute=new b("mute",{fontCharacter:"\\eb24"});b.noNewline=new b("no-newline",{fontCharacter:"\\eb25"});b.note=new b("note",{fontCharacter:"\\eb26"});b.octoface=new b("octoface",{fontCharacter:"\\eb27"});b.openPreview=new b("open-preview",{fontCharacter:"\\eb28"});b.package_=new b("package",{fontCharacter:"\\eb29"});b.paintcan=new b("paintcan",{fontCharacter:"\\eb2a"});b.pin=new b("pin",{fontCharacter:"\\eb2b"});b.play=new b("play",{fontCharacter:"\\eb2c"});b.run=new b("run",{fontCharacter:"\\eb2c"});b.plug=new b("plug",{fontCharacter:"\\eb2d"});b.preserveCase=new b("preserve-case",{fontCharacter:"\\eb2e"});b.preview=new b("preview",{fontCharacter:"\\eb2f"});b.project=new b("project",{fontCharacter:"\\eb30"});b.pulse=new b("pulse",{fontCharacter:"\\eb31"});b.question=new b("question",{fontCharacter:"\\eb32"});b.quote=new b("quote",{fontCharacter:"\\eb33"});b.radioTower=new b("radio-tower",{fontCharacter:"\\eb34"});b.reactions=new b("reactions",{fontCharacter:"\\eb35"});b.references=new b("references",{fontCharacter:"\\eb36"});b.refresh=new b("refresh",{fontCharacter:"\\eb37"});b.regex=new b("regex",{fontCharacter:"\\eb38"});b.remoteExplorer=new b("remote-explorer",{fontCharacter:"\\eb39"});b.remote=new b("remote",{fontCharacter:"\\eb3a"});b.remove=new b("remove",{fontCharacter:"\\eb3b"});b.replaceAll=new b("replace-all",{fontCharacter:"\\eb3c"});b.replace=new b("replace",{fontCharacter:"\\eb3d"});b.repoClone=new b("repo-clone",{fontCharacter:"\\eb3e"});b.repoForcePush=new b("repo-force-push",{fontCharacter:"\\eb3f"});b.repoPull=new b("repo-pull",{fontCharacter:"\\eb40"});b.repoPush=new b("repo-push",{fontCharacter:"\\eb41"});b.report=new b("report",{fontCharacter:"\\eb42"});b.requestChanges=new b("request-changes",{fontCharacter:"\\eb43"});b.rocket=new b("rocket",{fontCharacter:"\\eb44"});b.rootFolderOpened=new b("root-folder-opened",{fontCharacter:"\\eb45"});b.rootFolder=new b("root-folder",{fontCharacter:"\\eb46"});b.rss=new b("rss",{fontCharacter:"\\eb47"});b.ruby=new b("ruby",{fontCharacter:"\\eb48"});b.saveAll=new b("save-all",{fontCharacter:"\\eb49"});b.saveAs=new b("save-as",{fontCharacter:"\\eb4a"});b.save=new b("save",{fontCharacter:"\\eb4b"});b.screenFull=new b("screen-full",{fontCharacter:"\\eb4c"});b.screenNormal=new b("screen-normal",{fontCharacter:"\\eb4d"});b.searchStop=new b("search-stop",{fontCharacter:"\\eb4e"});b.server=new b("server",{fontCharacter:"\\eb50"});b.settingsGear=new b("settings-gear",{fontCharacter:"\\eb51"});b.settings=new b("settings",{fontCharacter:"\\eb52"});b.shield=new b("shield",{fontCharacter:"\\eb53"});b.smiley=new b("smiley",{fontCharacter:"\\eb54"});b.sortPrecedence=new b("sort-precedence",{fontCharacter:"\\eb55"});b.splitHorizontal=new b("split-horizontal",{fontCharacter:"\\eb56"});b.splitVertical=new b("split-vertical",{fontCharacter:"\\eb57"});b.squirrel=new b("squirrel",{fontCharacter:"\\eb58"});b.starFull=new b("star-full",{fontCharacter:"\\eb59"});b.starHalf=new b("star-half",{fontCharacter:"\\eb5a"});b.symbolClass=new b("symbol-class",{fontCharacter:"\\eb5b"});b.symbolColor=new b("symbol-color",{fontCharacter:"\\eb5c"});b.symbolCustomColor=new b("symbol-customcolor",{fontCharacter:"\\eb5c"});b.symbolConstant=new b("symbol-constant",{fontCharacter:"\\eb5d"});b.symbolEnumMember=new b("symbol-enum-member",{fontCharacter:"\\eb5e"});b.symbolField=new b("symbol-field",{fontCharacter:"\\eb5f"});b.symbolFile=new b("symbol-file",{fontCharacter:"\\eb60"});b.symbolInterface=new b("symbol-interface",{fontCharacter:"\\eb61"});b.symbolKeyword=new b("symbol-keyword",{fontCharacter:"\\eb62"});b.symbolMisc=new b("symbol-misc",{fontCharacter:"\\eb63"});b.symbolOperator=new b("symbol-operator",{fontCharacter:"\\eb64"});b.symbolProperty=new b("symbol-property",{fontCharacter:"\\eb65"});b.wrench=new b("wrench",{fontCharacter:"\\eb65"});b.wrenchSubaction=new b("wrench-subaction",{fontCharacter:"\\eb65"});b.symbolSnippet=new b("symbol-snippet",{fontCharacter:"\\eb66"});b.tasklist=new b("tasklist",{fontCharacter:"\\eb67"});b.telescope=new b("telescope",{fontCharacter:"\\eb68"});b.textSize=new b("text-size",{fontCharacter:"\\eb69"});b.threeBars=new b("three-bars",{fontCharacter:"\\eb6a"});b.thumbsdown=new b("thumbsdown",{fontCharacter:"\\eb6b"});b.thumbsup=new b("thumbsup",{fontCharacter:"\\eb6c"});b.tools=new b("tools",{fontCharacter:"\\eb6d"});b.triangleDown=new b("triangle-down",{fontCharacter:"\\eb6e"});b.triangleLeft=new b("triangle-left",{fontCharacter:"\\eb6f"});b.triangleRight=new b("triangle-right",{fontCharacter:"\\eb70"});b.triangleUp=new b("triangle-up",{fontCharacter:"\\eb71"});b.twitter=new b("twitter",{fontCharacter:"\\eb72"});b.unfold=new b("unfold",{fontCharacter:"\\eb73"});b.unlock=new b("unlock",{fontCharacter:"\\eb74"});b.unmute=new b("unmute",{fontCharacter:"\\eb75"});b.unverified=new b("unverified",{fontCharacter:"\\eb76"});b.verified=new b("verified",{fontCharacter:"\\eb77"});b.versions=new b("versions",{fontCharacter:"\\eb78"});b.vmActive=new b("vm-active",{fontCharacter:"\\eb79"});b.vmOutline=new b("vm-outline",{fontCharacter:"\\eb7a"});b.vmRunning=new b("vm-running",{fontCharacter:"\\eb7b"});b.watch=new b("watch",{fontCharacter:"\\eb7c"});b.whitespace=new b("whitespace",{fontCharacter:"\\eb7d"});b.wholeWord=new b("whole-word",{fontCharacter:"\\eb7e"});b.window=new b("window",{fontCharacter:"\\eb7f"});b.wordWrap=new b("word-wrap",{fontCharacter:"\\eb80"});b.zoomIn=new b("zoom-in",{fontCharacter:"\\eb81"});b.zoomOut=new b("zoom-out",{fontCharacter:"\\eb82"});b.listFilter=new b("list-filter",{fontCharacter:"\\eb83"});b.listFlat=new b("list-flat",{fontCharacter:"\\eb84"});b.listSelection=new b("list-selection",{fontCharacter:"\\eb85"});b.selection=new b("selection",{fontCharacter:"\\eb85"});b.listTree=new b("list-tree",{fontCharacter:"\\eb86"});b.debugBreakpointFunctionUnverified=new b("debug-breakpoint-function-unverified",{fontCharacter:"\\eb87"});b.debugBreakpointFunction=new b("debug-breakpoint-function",{fontCharacter:"\\eb88"});b.debugBreakpointFunctionDisabled=new b("debug-breakpoint-function-disabled",{fontCharacter:"\\eb88"});b.debugStackframeActive=new b("debug-stackframe-active",{fontCharacter:"\\eb89"});b.circleSmallFilled=new b("circle-small-filled",{fontCharacter:"\\eb8a"});b.debugStackframeDot=new b("debug-stackframe-dot",b.circleSmallFilled.definition);b.debugStackframe=new b("debug-stackframe",{fontCharacter:"\\eb8b"});b.debugStackframeFocused=new b("debug-stackframe-focused",{fontCharacter:"\\eb8b"});b.debugBreakpointUnsupported=new b("debug-breakpoint-unsupported",{fontCharacter:"\\eb8c"});b.symbolString=new b("symbol-string",{fontCharacter:"\\eb8d"});b.debugReverseContinue=new b("debug-reverse-continue",{fontCharacter:"\\eb8e"});b.debugStepBack=new b("debug-step-back",{fontCharacter:"\\eb8f"});b.debugRestartFrame=new b("debug-restart-frame",{fontCharacter:"\\eb90"});b.callIncoming=new b("call-incoming",{fontCharacter:"\\eb92"});b.callOutgoing=new b("call-outgoing",{fontCharacter:"\\eb93"});b.menu=new b("menu",{fontCharacter:"\\eb94"});b.expandAll=new b("expand-all",{fontCharacter:"\\eb95"});b.feedback=new b("feedback",{fontCharacter:"\\eb96"});b.groupByRefType=new b("group-by-ref-type",{fontCharacter:"\\eb97"});b.ungroupByRefType=new b("ungroup-by-ref-type",{fontCharacter:"\\eb98"});b.account=new b("account",{fontCharacter:"\\eb99"});b.bellDot=new b("bell-dot",{fontCharacter:"\\eb9a"});b.debugConsole=new b("debug-console",{fontCharacter:"\\eb9b"});b.library=new b("library",{fontCharacter:"\\eb9c"});b.output=new b("output",{fontCharacter:"\\eb9d"});b.runAll=new b("run-all",{fontCharacter:"\\eb9e"});b.syncIgnored=new b("sync-ignored",{fontCharacter:"\\eb9f"});b.pinned=new b("pinned",{fontCharacter:"\\eba0"});b.githubInverted=new b("github-inverted",{fontCharacter:"\\eba1"});b.debugAlt=new b("debug-alt",{fontCharacter:"\\eb91"});b.serverProcess=new b("server-process",{fontCharacter:"\\eba2"});b.serverEnvironment=new b("server-environment",{fontCharacter:"\\eba3"});b.pass=new b("pass",{fontCharacter:"\\eba4"});b.stopCircle=new b("stop-circle",{fontCharacter:"\\eba5"});b.playCircle=new b("play-circle",{fontCharacter:"\\eba6"});b.record=new b("record",{fontCharacter:"\\eba7"});b.debugAltSmall=new b("debug-alt-small",{fontCharacter:"\\eba8"});b.vmConnect=new b("vm-connect",{fontCharacter:"\\eba9"});b.cloud=new b("cloud",{fontCharacter:"\\ebaa"});b.merge=new b("merge",{fontCharacter:"\\ebab"});b.exportIcon=new b("export",{fontCharacter:"\\ebac"});b.graphLeft=new b("graph-left",{fontCharacter:"\\ebad"});b.magnet=new b("magnet",{fontCharacter:"\\ebae"});b.notebook=new b("notebook",{fontCharacter:"\\ebaf"});b.redo=new b("redo",{fontCharacter:"\\ebb0"});b.checkAll=new b("check-all",{fontCharacter:"\\ebb1"});b.pinnedDirty=new b("pinned-dirty",{fontCharacter:"\\ebb2"});b.passFilled=new b("pass-filled",{fontCharacter:"\\ebb3"});b.circleLargeFilled=new b("circle-large-filled",{fontCharacter:"\\ebb4"});b.circleLargeOutline=new b("circle-large-outline",{fontCharacter:"\\ebb5"});b.combine=new b("combine",{fontCharacter:"\\ebb6"});b.gather=new b("gather",{fontCharacter:"\\ebb6"});b.table=new b("table",{fontCharacter:"\\ebb7"});b.variableGroup=new b("variable-group",{fontCharacter:"\\ebb8"});b.typeHierarchy=new b("type-hierarchy",{fontCharacter:"\\ebb9"});b.typeHierarchySub=new b("type-hierarchy-sub",{fontCharacter:"\\ebba"});b.typeHierarchySuper=new b("type-hierarchy-super",{fontCharacter:"\\ebbb"});b.gitPullRequestCreate=new b("git-pull-request-create",{fontCharacter:"\\ebbc"});b.runAbove=new b("run-above",{fontCharacter:"\\ebbd"});b.runBelow=new b("run-below",{fontCharacter:"\\ebbe"});b.notebookTemplate=new b("notebook-template",{fontCharacter:"\\ebbf"});b.debugRerun=new b("debug-rerun",{fontCharacter:"\\ebc0"});b.workspaceTrusted=new b("workspace-trusted",{fontCharacter:"\\ebc1"});b.workspaceUntrusted=new b("workspace-untrusted",{fontCharacter:"\\ebc2"});b.workspaceUnspecified=new b("workspace-unspecified",{fontCharacter:"\\ebc3"});b.terminalCmd=new b("terminal-cmd",{fontCharacter:"\\ebc4"});b.terminalDebian=new b("terminal-debian",{fontCharacter:"\\ebc5"});b.terminalLinux=new b("terminal-linux",{fontCharacter:"\\ebc6"});b.terminalPowershell=new b("terminal-powershell",{fontCharacter:"\\ebc7"});b.terminalTmux=new b("terminal-tmux",{fontCharacter:"\\ebc8"});b.terminalUbuntu=new b("terminal-ubuntu",{fontCharacter:"\\ebc9"});b.terminalBash=new b("terminal-bash",{fontCharacter:"\\ebca"});b.arrowSwap=new b("arrow-swap",{fontCharacter:"\\ebcb"});b.copy=new b("copy",{fontCharacter:"\\ebcc"});b.personAdd=new b("person-add",{fontCharacter:"\\ebcd"});b.filterFilled=new b("filter-filled",{fontCharacter:"\\ebce"});b.wand=new b("wand",{fontCharacter:"\\ebcf"});b.debugLineByLine=new b("debug-line-by-line",{fontCharacter:"\\ebd0"});b.inspect=new b("inspect",{fontCharacter:"\\ebd1"});b.layers=new b("layers",{fontCharacter:"\\ebd2"});b.layersDot=new b("layers-dot",{fontCharacter:"\\ebd3"});b.layersActive=new b("layers-active",{fontCharacter:"\\ebd4"});b.compass=new b("compass",{fontCharacter:"\\ebd5"});b.compassDot=new b("compass-dot",{fontCharacter:"\\ebd6"});b.compassActive=new b("compass-active",{fontCharacter:"\\ebd7"});b.azure=new b("azure",{fontCharacter:"\\ebd8"});b.issueDraft=new b("issue-draft",{fontCharacter:"\\ebd9"});b.gitPullRequestClosed=new b("git-pull-request-closed",{fontCharacter:"\\ebda"});b.gitPullRequestDraft=new b("git-pull-request-draft",{fontCharacter:"\\ebdb"});b.debugAll=new b("debug-all",{fontCharacter:"\\ebdc"});b.debugCoverage=new b("debug-coverage",{fontCharacter:"\\ebdd"});b.runErrors=new b("run-errors",{fontCharacter:"\\ebde"});b.folderLibrary=new b("folder-library",{fontCharacter:"\\ebdf"});b.debugContinueSmall=new b("debug-continue-small",{fontCharacter:"\\ebe0"});b.beakerStop=new b("beaker-stop",{fontCharacter:"\\ebe1"});b.graphLine=new b("graph-line",{fontCharacter:"\\ebe2"});b.graphScatter=new b("graph-scatter",{fontCharacter:"\\ebe3"});b.pieChart=new b("pie-chart",{fontCharacter:"\\ebe4"});b.bracket=new b("bracket",b.json.definition);b.bracketDot=new b("bracket-dot",{fontCharacter:"\\ebe5"});b.bracketError=new b("bracket-error",{fontCharacter:"\\ebe6"});b.lockSmall=new b("lock-small",{fontCharacter:"\\ebe7"});b.azureDevops=new b("azure-devops",{fontCharacter:"\\ebe8"});b.verifiedFilled=new b("verified-filled",{fontCharacter:"\\ebe9"});b.newLine=new b("newline",{fontCharacter:"\\ebea"});b.layout=new b("layout",{fontCharacter:"\\ebeb"});b.layoutActivitybarLeft=new b("layout-activitybar-left",{fontCharacter:"\\ebec"});b.layoutActivitybarRight=new b("layout-activitybar-right",{fontCharacter:"\\ebed"});b.layoutPanelLeft=new b("layout-panel-left",{fontCharacter:"\\ebee"});b.layoutPanelCenter=new b("layout-panel-center",{fontCharacter:"\\ebef"});b.layoutPanelJustify=new b("layout-panel-justify",{fontCharacter:"\\ebf0"});b.layoutPanelRight=new b("layout-panel-right",{fontCharacter:"\\ebf1"});b.layoutPanel=new b("layout-panel",{fontCharacter:"\\ebf2"});b.layoutSidebarLeft=new b("layout-sidebar-left",{fontCharacter:"\\ebf3"});b.layoutSidebarRight=new b("layout-sidebar-right",{fontCharacter:"\\ebf4"});b.layoutStatusbar=new b("layout-statusbar",{fontCharacter:"\\ebf5"});b.layoutMenubar=new b("layout-menubar",{fontCharacter:"\\ebf6"});b.layoutCentered=new b("layout-centered",{fontCharacter:"\\ebf7"});b.layoutSidebarRightOff=new b("layout-sidebar-right-off",{fontCharacter:"\\ec00"});b.layoutPanelOff=new b("layout-panel-off",{fontCharacter:"\\ec01"});b.layoutSidebarLeftOff=new b("layout-sidebar-left-off",{fontCharacter:"\\ec02"});b.target=new b("target",{fontCharacter:"\\ebf8"});b.indent=new b("indent",{fontCharacter:"\\ebf9"});b.recordSmall=new b("record-small",{fontCharacter:"\\ebfa"});b.errorSmall=new b("error-small",{fontCharacter:"\\ebfb"});b.arrowCircleDown=new b("arrow-circle-down",{fontCharacter:"\\ebfc"});b.arrowCircleLeft=new b("arrow-circle-left",{fontCharacter:"\\ebfd"});b.arrowCircleRight=new b("arrow-circle-right",{fontCharacter:"\\ebfe"});b.arrowCircleUp=new b("arrow-circle-up",{fontCharacter:"\\ebff"});b.heartFilled=new b("heart-filled",{fontCharacter:"\\ec04"});b.map=new b("map",{fontCharacter:"\\ec05"});b.mapFilled=new b("map-filled",{fontCharacter:"\\ec06"});b.circleSmall=new b("circle-small",{fontCharacter:"\\ec07"});b.bellSlash=new b("bell-slash",{fontCharacter:"\\ec08"});b.bellSlashDot=new b("bell-slash-dot",{fontCharacter:"\\ec09"});b.commentUnresolved=new b("comment-unresolved",{fontCharacter:"\\ec0a"});b.gitPullRequestGoToChanges=new b("git-pull-request-go-to-changes",{fontCharacter:"\\ec0b"});b.gitPullRequestNewChanges=new b("git-pull-request-new-changes",{fontCharacter:"\\ec0c"});b.dialogError=new b("dialog-error",b.error.definition);b.dialogWarning=new b("dialog-warning",b.warning.definition);b.dialogInfo=new b("dialog-info",b.info.definition);b.dialogClose=new b("dialog-close",b.close.definition);b.treeItemExpanded=new b("tree-item-expanded",b.chevronDown.definition);b.treeFilterOnTypeOn=new b("tree-filter-on-type-on",b.listFilter.definition);b.treeFilterOnTypeOff=new b("tree-filter-on-type-off",b.listSelection.definition);b.treeFilterClear=new b("tree-filter-clear",b.close.definition);b.treeItemLoading=new b("tree-item-loading",b.loading.definition);b.menuSelection=new b("menu-selection",b.check.definition);b.menuSubmenu=new b("menu-submenu",b.chevronRight.definition);b.menuBarMore=new b("menubar-more",b.more.definition);b.scrollbarButtonLeft=new b("scrollbar-button-left",b.triangleLeft.definition);b.scrollbarButtonRight=new b("scrollbar-button-right",b.triangleRight.definition);b.scrollbarButtonUp=new b("scrollbar-button-up",b.triangleUp.definition);b.scrollbarButtonDown=new b("scrollbar-button-down",b.triangleDown.definition);b.toolBarMore=new b("toolbar-more",b.more.definition);b.quickInputBack=new b("quick-input-back",b.arrowLeft.definition);var Mi;(function(o){o.iconNameSegment="[A-Za-z0-9]+",o.iconNameExpression="[A-Za-z0-9-]+",o.iconModifierExpression="~[A-Za-z]+",o.iconNameCharacter="[A-Za-z0-9~-]";const e=new RegExp(`^(${o.iconNameExpression})(${o.iconModifierExpression})?$`);function t(s){if(s instanceof b)return["codicon","codicon-"+s.id];const r=e.exec(s.id);if(!r)return t(b.error);const[,a,l]=r,c=["codicon","codicon-"+a];return l&&c.push("codicon-modifier-"+l.substr(1)),c}u(t,"asClassNameArray"),o.asClassNameArray=t;function n(s){return t(s).join(" ")}u(n,"asClassName"),o.asClassName=n;function i(s){return"."+t(s).join(".")}u(i,"asCSSSelector"),o.asCSSSelector=i})(Mi||(Mi={}));var IL=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let dq=u(class{constructor(){this._map=new Map,this._factories=new Map,this._onDidChange=new R,this.onDidChange=this._onDidChange.event,this._colorMap=null}fire(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._map.set(e,t),this.fire([e]),He(()=>{this._map.get(e)===t&&(this._map.delete(e),this.fire([e]))})}registerFactory(e,t){var n;(n=this._factories.get(e))===null||n===void 0||n.dispose();const i=new I4(this,e,t);return this._factories.set(e,i),He(()=>{const s=this._factories.get(e);!s||s!==i||(this._factories.delete(e),s.dispose())})}getOrCreate(e){return IL(this,void 0,void 0,function*(){const t=this.get(e);if(t)return t;const n=this._factories.get(e);return!n||n.isResolved?null:(yield n.resolve(),this.get(e))})}get(e){return this._map.get(e)||null}isResolved(e){if(this.get(e))return!0;const n=this._factories.get(e);return!!(!n||n.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._map.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}},"TokenizationRegistry");class I4 extends U{constructor(e,t,n){super(),this._registry=e,this._languageId=t,this._factory=n,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}get isResolved(){return this._isResolved}dispose(){this._isDisposed=!0,super.dispose()}resolve(){return IL(this,void 0,void 0,function*(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise})}_create(){return IL(this,void 0,void 0,function*(){const e=yield Promise.resolve(this._factory.createTokenizationSupport());this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))})}}u(I4,"TokenizationSupportFactoryData");let eb=u(class{constructor(e,t,n){this._tokenBrand=void 0,this.offset=e,this.type=t,this.language=n}toString(){return"("+this.offset+", "+this.type+")"}},"Token");class Aw{constructor(e,t){this._tokenizationResultBrand=void 0,this.tokens=e,this.endState=t}}u(Aw,"TokenizationResult");class b_{constructor(e,t){this._encodedTokenizationResultBrand=void 0,this.tokens=e,this.endState=t}}u(b_,"EncodedTokenizationResult");var tb;(function(o){const e=new Map;e.set(0,b.symbolMethod),e.set(1,b.symbolFunction),e.set(2,b.symbolConstructor),e.set(3,b.symbolField),e.set(4,b.symbolVariable),e.set(5,b.symbolClass),e.set(6,b.symbolStruct),e.set(7,b.symbolInterface),e.set(8,b.symbolModule),e.set(9,b.symbolProperty),e.set(10,b.symbolEvent),e.set(11,b.symbolOperator),e.set(12,b.symbolUnit),e.set(13,b.symbolValue),e.set(15,b.symbolEnum),e.set(14,b.symbolConstant),e.set(15,b.symbolEnum),e.set(16,b.symbolEnumMember),e.set(17,b.symbolKeyword),e.set(27,b.symbolSnippet),e.set(18,b.symbolText),e.set(19,b.symbolColor),e.set(20,b.symbolFile),e.set(21,b.symbolReference),e.set(22,b.symbolCustomColor),e.set(23,b.symbolFolder),e.set(24,b.symbolTypeParameter),e.set(25,b.account),e.set(26,b.issues);function t(s){let r=e.get(s);return r||(console.info("No codicon found for CompletionItemKind "+s),r=b.symbolProperty),r}u(t,"toIcon"),o.toIcon=t;const n=new Map;n.set("method",0),n.set("function",1),n.set("constructor",2),n.set("field",3),n.set("variable",4),n.set("class",5),n.set("struct",6),n.set("interface",7),n.set("module",8),n.set("property",9),n.set("event",10),n.set("operator",11),n.set("unit",12),n.set("value",13),n.set("constant",14),n.set("enum",15),n.set("enum-member",16),n.set("enumMember",16),n.set("keyword",17),n.set("snippet",27),n.set("text",18),n.set("color",19),n.set("file",20),n.set("reference",21),n.set("customcolor",22),n.set("folder",23),n.set("type-parameter",24),n.set("typeParameter",24),n.set("account",25),n.set("issue",26);function i(s,r){let a=n.get(s);return typeof a>"u"&&!r&&(a=9),a}u(i,"fromString"),o.fromString=i})(tb||(tb={}));var Gs;(function(o){o[o.Automatic=0]="Automatic",o[o.Explicit=1]="Explicit"})(Gs||(Gs={}));var Zr;(function(o){o[o.Invoke=1]="Invoke",o[o.TriggerCharacter=2]="TriggerCharacter",o[o.ContentChange=3]="ContentChange"})(Zr||(Zr={}));var nb;(function(o){o[o.Text=0]="Text",o[o.Read=1]="Read",o[o.Write=2]="Write"})(nb||(nb={}));function uq(o){return o&&be.isUri(o.uri)&&L.isIRange(o.range)&&(L.isIRange(o.originSelectionRange)||L.isIRange(o.targetSelectionRange))}u(uq,"isLocationLink");var NL;(function(o){const e=new Map;e.set(0,b.symbolFile),e.set(1,b.symbolModule),e.set(2,b.symbolNamespace),e.set(3,b.symbolPackage),e.set(4,b.symbolClass),e.set(5,b.symbolMethod),e.set(6,b.symbolProperty),e.set(7,b.symbolField),e.set(8,b.symbolConstructor),e.set(9,b.symbolEnum),e.set(10,b.symbolInterface),e.set(11,b.symbolFunction),e.set(12,b.symbolVariable),e.set(13,b.symbolConstant),e.set(14,b.symbolString),e.set(15,b.symbolNumber),e.set(16,b.symbolBoolean),e.set(17,b.symbolArray),e.set(18,b.symbolObject),e.set(19,b.symbolKey),e.set(20,b.symbolNull),e.set(21,b.symbolEnumMember),e.set(22,b.symbolStruct),e.set(23,b.symbolEvent),e.set(24,b.symbolOperator),e.set(25,b.symbolTypeParameter);function t(n){let i=e.get(n);return i||(console.info("No codicon found for SymbolKind "+n),i=b.symbolProperty),i}u(t,"toIcon"),o.toIcon=t})(NL||(NL={}));class Mo{constructor(e){this.value=e}}u(Mo,"FoldingRangeKind");Mo.Comment=new Mo("comment");Mo.Imports=new Mo("imports");Mo.Region=new Mo("region");var PL;(function(o){function e(t){return!t||typeof t!="object"?!1:typeof t.id=="string"&&typeof t.title=="string"}u(e,"is"),o.is=e})(PL||(PL={}));var X0;(function(o){o[o.Type=1]="Type",o[o.Parameter=2]="Parameter"})(X0||(X0={}));const Wt=new dq;var RL;(function(o){o[o.Unknown=0]="Unknown",o[o.Disabled=1]="Disabled",o[o.Enabled=2]="Enabled"})(RL||(RL={}));var FL;(function(o){o[o.Invoke=1]="Invoke",o[o.Auto=2]="Auto"})(FL||(FL={}));var Z0;(function(o){o[o.KeepWhitespace=1]="KeepWhitespace",o[o.InsertAsSnippet=4]="InsertAsSnippet"})(Z0||(Z0={}));var OL;(function(o){o[o.Method=0]="Method",o[o.Function=1]="Function",o[o.Constructor=2]="Constructor",o[o.Field=3]="Field",o[o.Variable=4]="Variable",o[o.Class=5]="Class",o[o.Struct=6]="Struct",o[o.Interface=7]="Interface",o[o.Module=8]="Module",o[o.Property=9]="Property",o[o.Event=10]="Event",o[o.Operator=11]="Operator",o[o.Unit=12]="Unit",o[o.Value=13]="Value",o[o.Constant=14]="Constant",o[o.Enum=15]="Enum",o[o.EnumMember=16]="EnumMember",o[o.Keyword=17]="Keyword",o[o.Text=18]="Text",o[o.Color=19]="Color",o[o.File=20]="File",o[o.Reference=21]="Reference",o[o.Customcolor=22]="Customcolor",o[o.Folder=23]="Folder",o[o.TypeParameter=24]="TypeParameter",o[o.User=25]="User",o[o.Issue=26]="Issue",o[o.Snippet=27]="Snippet"})(OL||(OL={}));var VL;(function(o){o[o.Deprecated=1]="Deprecated"})(VL||(VL={}));var HL;(function(o){o[o.Invoke=0]="Invoke",o[o.TriggerCharacter=1]="TriggerCharacter",o[o.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(HL||(HL={}));var BL;(function(o){o[o.EXACT=0]="EXACT",o[o.ABOVE=1]="ABOVE",o[o.BELOW=2]="BELOW"})(BL||(BL={}));var WL;(function(o){o[o.NotSet=0]="NotSet",o[o.ContentFlush=1]="ContentFlush",o[o.RecoverFromMarkers=2]="RecoverFromMarkers",o[o.Explicit=3]="Explicit",o[o.Paste=4]="Paste",o[o.Undo=5]="Undo",o[o.Redo=6]="Redo"})(WL||(WL={}));var UL;(function(o){o[o.LF=1]="LF",o[o.CRLF=2]="CRLF"})(UL||(UL={}));var GL;(function(o){o[o.Text=0]="Text",o[o.Read=1]="Read",o[o.Write=2]="Write"})(GL||(GL={}));var zL;(function(o){o[o.None=0]="None",o[o.Keep=1]="Keep",o[o.Brackets=2]="Brackets",o[o.Advanced=3]="Advanced",o[o.Full=4]="Full"})(zL||(zL={}));var KL;(function(o){o[o.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",o[o.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",o[o.accessibilitySupport=2]="accessibilitySupport",o[o.accessibilityPageSize=3]="accessibilityPageSize",o[o.ariaLabel=4]="ariaLabel",o[o.autoClosingBrackets=5]="autoClosingBrackets",o[o.autoClosingDelete=6]="autoClosingDelete",o[o.autoClosingOvertype=7]="autoClosingOvertype",o[o.autoClosingQuotes=8]="autoClosingQuotes",o[o.autoIndent=9]="autoIndent",o[o.automaticLayout=10]="automaticLayout",o[o.autoSurround=11]="autoSurround",o[o.bracketPairColorization=12]="bracketPairColorization",o[o.guides=13]="guides",o[o.codeLens=14]="codeLens",o[o.codeLensFontFamily=15]="codeLensFontFamily",o[o.codeLensFontSize=16]="codeLensFontSize",o[o.colorDecorators=17]="colorDecorators",o[o.columnSelection=18]="columnSelection",o[o.comments=19]="comments",o[o.contextmenu=20]="contextmenu",o[o.copyWithSyntaxHighlighting=21]="copyWithSyntaxHighlighting",o[o.cursorBlinking=22]="cursorBlinking",o[o.cursorSmoothCaretAnimation=23]="cursorSmoothCaretAnimation",o[o.cursorStyle=24]="cursorStyle",o[o.cursorSurroundingLines=25]="cursorSurroundingLines",o[o.cursorSurroundingLinesStyle=26]="cursorSurroundingLinesStyle",o[o.cursorWidth=27]="cursorWidth",o[o.disableLayerHinting=28]="disableLayerHinting",o[o.disableMonospaceOptimizations=29]="disableMonospaceOptimizations",o[o.domReadOnly=30]="domReadOnly",o[o.dragAndDrop=31]="dragAndDrop",o[o.dropIntoEditor=32]="dropIntoEditor",o[o.emptySelectionClipboard=33]="emptySelectionClipboard",o[o.experimental=34]="experimental",o[o.extraEditorClassName=35]="extraEditorClassName",o[o.fastScrollSensitivity=36]="fastScrollSensitivity",o[o.find=37]="find",o[o.fixedOverflowWidgets=38]="fixedOverflowWidgets",o[o.folding=39]="folding",o[o.foldingStrategy=40]="foldingStrategy",o[o.foldingHighlight=41]="foldingHighlight",o[o.foldingImportsByDefault=42]="foldingImportsByDefault",o[o.foldingMaximumRegions=43]="foldingMaximumRegions",o[o.unfoldOnClickAfterEndOfLine=44]="unfoldOnClickAfterEndOfLine",o[o.fontFamily=45]="fontFamily",o[o.fontInfo=46]="fontInfo",o[o.fontLigatures=47]="fontLigatures",o[o.fontSize=48]="fontSize",o[o.fontWeight=49]="fontWeight",o[o.formatOnPaste=50]="formatOnPaste",o[o.formatOnType=51]="formatOnType",o[o.glyphMargin=52]="glyphMargin",o[o.gotoLocation=53]="gotoLocation",o[o.hideCursorInOverviewRuler=54]="hideCursorInOverviewRuler",o[o.hover=55]="hover",o[o.inDiffEditor=56]="inDiffEditor",o[o.inlineSuggest=57]="inlineSuggest",o[o.letterSpacing=58]="letterSpacing",o[o.lightbulb=59]="lightbulb",o[o.lineDecorationsWidth=60]="lineDecorationsWidth",o[o.lineHeight=61]="lineHeight",o[o.lineNumbers=62]="lineNumbers",o[o.lineNumbersMinChars=63]="lineNumbersMinChars",o[o.linkedEditing=64]="linkedEditing",o[o.links=65]="links",o[o.matchBrackets=66]="matchBrackets",o[o.minimap=67]="minimap",o[o.mouseStyle=68]="mouseStyle",o[o.mouseWheelScrollSensitivity=69]="mouseWheelScrollSensitivity",o[o.mouseWheelZoom=70]="mouseWheelZoom",o[o.multiCursorMergeOverlapping=71]="multiCursorMergeOverlapping",o[o.multiCursorModifier=72]="multiCursorModifier",o[o.multiCursorPaste=73]="multiCursorPaste",o[o.occurrencesHighlight=74]="occurrencesHighlight",o[o.overviewRulerBorder=75]="overviewRulerBorder",o[o.overviewRulerLanes=76]="overviewRulerLanes",o[o.padding=77]="padding",o[o.parameterHints=78]="parameterHints",o[o.peekWidgetDefaultFocus=79]="peekWidgetDefaultFocus",o[o.definitionLinkOpensInPeek=80]="definitionLinkOpensInPeek",o[o.quickSuggestions=81]="quickSuggestions",o[o.quickSuggestionsDelay=82]="quickSuggestionsDelay",o[o.readOnly=83]="readOnly",o[o.renameOnType=84]="renameOnType",o[o.renderControlCharacters=85]="renderControlCharacters",o[o.renderFinalNewline=86]="renderFinalNewline",o[o.renderLineHighlight=87]="renderLineHighlight",o[o.renderLineHighlightOnlyWhenFocus=88]="renderLineHighlightOnlyWhenFocus",o[o.renderValidationDecorations=89]="renderValidationDecorations",o[o.renderWhitespace=90]="renderWhitespace",o[o.revealHorizontalRightPadding=91]="revealHorizontalRightPadding",o[o.roundedSelection=92]="roundedSelection",o[o.rulers=93]="rulers",o[o.scrollbar=94]="scrollbar",o[o.scrollBeyondLastColumn=95]="scrollBeyondLastColumn",o[o.scrollBeyondLastLine=96]="scrollBeyondLastLine",o[o.scrollPredominantAxis=97]="scrollPredominantAxis",o[o.selectionClipboard=98]="selectionClipboard",o[o.selectionHighlight=99]="selectionHighlight",o[o.selectOnLineNumbers=100]="selectOnLineNumbers",o[o.showFoldingControls=101]="showFoldingControls",o[o.showUnused=102]="showUnused",o[o.snippetSuggestions=103]="snippetSuggestions",o[o.smartSelect=104]="smartSelect",o[o.smoothScrolling=105]="smoothScrolling",o[o.stickyTabStops=106]="stickyTabStops",o[o.stopRenderingLineAfter=107]="stopRenderingLineAfter",o[o.suggest=108]="suggest",o[o.suggestFontSize=109]="suggestFontSize",o[o.suggestLineHeight=110]="suggestLineHeight",o[o.suggestOnTriggerCharacters=111]="suggestOnTriggerCharacters",o[o.suggestSelection=112]="suggestSelection",o[o.tabCompletion=113]="tabCompletion",o[o.tabIndex=114]="tabIndex",o[o.unicodeHighlighting=115]="unicodeHighlighting",o[o.unusualLineTerminators=116]="unusualLineTerminators",o[o.useShadowDOM=117]="useShadowDOM",o[o.useTabStops=118]="useTabStops",o[o.wordSeparators=119]="wordSeparators",o[o.wordWrap=120]="wordWrap",o[o.wordWrapBreakAfterCharacters=121]="wordWrapBreakAfterCharacters",o[o.wordWrapBreakBeforeCharacters=122]="wordWrapBreakBeforeCharacters",o[o.wordWrapColumn=123]="wordWrapColumn",o[o.wordWrapOverride1=124]="wordWrapOverride1",o[o.wordWrapOverride2=125]="wordWrapOverride2",o[o.wrappingIndent=126]="wrappingIndent",o[o.wrappingStrategy=127]="wrappingStrategy",o[o.showDeprecated=128]="showDeprecated",o[o.inlayHints=129]="inlayHints",o[o.editorClassName=130]="editorClassName",o[o.pixelRatio=131]="pixelRatio",o[o.tabFocusMode=132]="tabFocusMode",o[o.layoutInfo=133]="layoutInfo",o[o.wrappingInfo=134]="wrappingInfo"})(KL||(KL={}));var jL;(function(o){o[o.TextDefined=0]="TextDefined",o[o.LF=1]="LF",o[o.CRLF=2]="CRLF"})(jL||(jL={}));var $L;(function(o){o[o.LF=0]="LF",o[o.CRLF=1]="CRLF"})($L||($L={}));var qL;(function(o){o[o.None=0]="None",o[o.Indent=1]="Indent",o[o.IndentOutdent=2]="IndentOutdent",o[o.Outdent=3]="Outdent"})(qL||(qL={}));var YL;(function(o){o[o.Both=0]="Both",o[o.Right=1]="Right",o[o.Left=2]="Left",o[o.None=3]="None"})(YL||(YL={}));var XL;(function(o){o[o.Type=1]="Type",o[o.Parameter=2]="Parameter"})(XL||(XL={}));var ZL;(function(o){o[o.Automatic=0]="Automatic",o[o.Explicit=1]="Explicit"})(ZL||(ZL={}));var JL;(function(o){o[o.DependsOnKbLayout=-1]="DependsOnKbLayout",o[o.Unknown=0]="Unknown",o[o.Backspace=1]="Backspace",o[o.Tab=2]="Tab",o[o.Enter=3]="Enter",o[o.Shift=4]="Shift",o[o.Ctrl=5]="Ctrl",o[o.Alt=6]="Alt",o[o.PauseBreak=7]="PauseBreak",o[o.CapsLock=8]="CapsLock",o[o.Escape=9]="Escape",o[o.Space=10]="Space",o[o.PageUp=11]="PageUp",o[o.PageDown=12]="PageDown",o[o.End=13]="End",o[o.Home=14]="Home",o[o.LeftArrow=15]="LeftArrow",o[o.UpArrow=16]="UpArrow",o[o.RightArrow=17]="RightArrow",o[o.DownArrow=18]="DownArrow",o[o.Insert=19]="Insert",o[o.Delete=20]="Delete",o[o.Digit0=21]="Digit0",o[o.Digit1=22]="Digit1",o[o.Digit2=23]="Digit2",o[o.Digit3=24]="Digit3",o[o.Digit4=25]="Digit4",o[o.Digit5=26]="Digit5",o[o.Digit6=27]="Digit6",o[o.Digit7=28]="Digit7",o[o.Digit8=29]="Digit8",o[o.Digit9=30]="Digit9",o[o.KeyA=31]="KeyA",o[o.KeyB=32]="KeyB",o[o.KeyC=33]="KeyC",o[o.KeyD=34]="KeyD",o[o.KeyE=35]="KeyE",o[o.KeyF=36]="KeyF",o[o.KeyG=37]="KeyG",o[o.KeyH=38]="KeyH",o[o.KeyI=39]="KeyI",o[o.KeyJ=40]="KeyJ",o[o.KeyK=41]="KeyK",o[o.KeyL=42]="KeyL",o[o.KeyM=43]="KeyM",o[o.KeyN=44]="KeyN",o[o.KeyO=45]="KeyO",o[o.KeyP=46]="KeyP",o[o.KeyQ=47]="KeyQ",o[o.KeyR=48]="KeyR",o[o.KeyS=49]="KeyS",o[o.KeyT=50]="KeyT",o[o.KeyU=51]="KeyU",o[o.KeyV=52]="KeyV",o[o.KeyW=53]="KeyW",o[o.KeyX=54]="KeyX",o[o.KeyY=55]="KeyY",o[o.KeyZ=56]="KeyZ",o[o.Meta=57]="Meta",o[o.ContextMenu=58]="ContextMenu",o[o.F1=59]="F1",o[o.F2=60]="F2",o[o.F3=61]="F3",o[o.F4=62]="F4",o[o.F5=63]="F5",o[o.F6=64]="F6",o[o.F7=65]="F7",o[o.F8=66]="F8",o[o.F9=67]="F9",o[o.F10=68]="F10",o[o.F11=69]="F11",o[o.F12=70]="F12",o[o.F13=71]="F13",o[o.F14=72]="F14",o[o.F15=73]="F15",o[o.F16=74]="F16",o[o.F17=75]="F17",o[o.F18=76]="F18",o[o.F19=77]="F19",o[o.NumLock=78]="NumLock",o[o.ScrollLock=79]="ScrollLock",o[o.Semicolon=80]="Semicolon",o[o.Equal=81]="Equal",o[o.Comma=82]="Comma",o[o.Minus=83]="Minus",o[o.Period=84]="Period",o[o.Slash=85]="Slash",o[o.Backquote=86]="Backquote",o[o.BracketLeft=87]="BracketLeft",o[o.Backslash=88]="Backslash",o[o.BracketRight=89]="BracketRight",o[o.Quote=90]="Quote",o[o.OEM_8=91]="OEM_8",o[o.IntlBackslash=92]="IntlBackslash",o[o.Numpad0=93]="Numpad0",o[o.Numpad1=94]="Numpad1",o[o.Numpad2=95]="Numpad2",o[o.Numpad3=96]="Numpad3",o[o.Numpad4=97]="Numpad4",o[o.Numpad5=98]="Numpad5",o[o.Numpad6=99]="Numpad6",o[o.Numpad7=100]="Numpad7",o[o.Numpad8=101]="Numpad8",o[o.Numpad9=102]="Numpad9",o[o.NumpadMultiply=103]="NumpadMultiply",o[o.NumpadAdd=104]="NumpadAdd",o[o.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",o[o.NumpadSubtract=106]="NumpadSubtract",o[o.NumpadDecimal=107]="NumpadDecimal",o[o.NumpadDivide=108]="NumpadDivide",o[o.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",o[o.ABNT_C1=110]="ABNT_C1",o[o.ABNT_C2=111]="ABNT_C2",o[o.AudioVolumeMute=112]="AudioVolumeMute",o[o.AudioVolumeUp=113]="AudioVolumeUp",o[o.AudioVolumeDown=114]="AudioVolumeDown",o[o.BrowserSearch=115]="BrowserSearch",o[o.BrowserHome=116]="BrowserHome",o[o.BrowserBack=117]="BrowserBack",o[o.BrowserForward=118]="BrowserForward",o[o.MediaTrackNext=119]="MediaTrackNext",o[o.MediaTrackPrevious=120]="MediaTrackPrevious",o[o.MediaStop=121]="MediaStop",o[o.MediaPlayPause=122]="MediaPlayPause",o[o.LaunchMediaPlayer=123]="LaunchMediaPlayer",o[o.LaunchMail=124]="LaunchMail",o[o.LaunchApp2=125]="LaunchApp2",o[o.Clear=126]="Clear",o[o.MAX_VALUE=127]="MAX_VALUE"})(JL||(JL={}));var QL;(function(o){o[o.Hint=1]="Hint",o[o.Info=2]="Info",o[o.Warning=4]="Warning",o[o.Error=8]="Error"})(QL||(QL={}));var ex;(function(o){o[o.Unnecessary=1]="Unnecessary",o[o.Deprecated=2]="Deprecated"})(ex||(ex={}));var tx;(function(o){o[o.Inline=1]="Inline",o[o.Gutter=2]="Gutter"})(tx||(tx={}));var nx;(function(o){o[o.UNKNOWN=0]="UNKNOWN",o[o.TEXTAREA=1]="TEXTAREA",o[o.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",o[o.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",o[o.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",o[o.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",o[o.CONTENT_TEXT=6]="CONTENT_TEXT",o[o.CONTENT_EMPTY=7]="CONTENT_EMPTY",o[o.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",o[o.CONTENT_WIDGET=9]="CONTENT_WIDGET",o[o.OVERVIEW_RULER=10]="OVERVIEW_RULER",o[o.SCROLLBAR=11]="SCROLLBAR",o[o.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",o[o.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(nx||(nx={}));var ix;(function(o){o[o.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",o[o.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",o[o.TOP_CENTER=2]="TOP_CENTER"})(ix||(ix={}));var sx;(function(o){o[o.Left=1]="Left",o[o.Center=2]="Center",o[o.Right=4]="Right",o[o.Full=7]="Full"})(sx||(sx={}));var ox;(function(o){o[o.Left=0]="Left",o[o.Right=1]="Right",o[o.None=2]="None",o[o.LeftOfInjectedText=3]="LeftOfInjectedText",o[o.RightOfInjectedText=4]="RightOfInjectedText"})(ox||(ox={}));var rx;(function(o){o[o.Off=0]="Off",o[o.On=1]="On",o[o.Relative=2]="Relative",o[o.Interval=3]="Interval",o[o.Custom=4]="Custom"})(rx||(rx={}));var ax;(function(o){o[o.None=0]="None",o[o.Text=1]="Text",o[o.Blocks=2]="Blocks"})(ax||(ax={}));var lx;(function(o){o[o.Smooth=0]="Smooth",o[o.Immediate=1]="Immediate"})(lx||(lx={}));var cx;(function(o){o[o.Auto=1]="Auto",o[o.Hidden=2]="Hidden",o[o.Visible=3]="Visible"})(cx||(cx={}));var dx;(function(o){o[o.LTR=0]="LTR",o[o.RTL=1]="RTL"})(dx||(dx={}));var ux;(function(o){o[o.Invoke=1]="Invoke",o[o.TriggerCharacter=2]="TriggerCharacter",o[o.ContentChange=3]="ContentChange"})(ux||(ux={}));var hx;(function(o){o[o.File=0]="File",o[o.Module=1]="Module",o[o.Namespace=2]="Namespace",o[o.Package=3]="Package",o[o.Class=4]="Class",o[o.Method=5]="Method",o[o.Property=6]="Property",o[o.Field=7]="Field",o[o.Constructor=8]="Constructor",o[o.Enum=9]="Enum",o[o.Interface=10]="Interface",o[o.Function=11]="Function",o[o.Variable=12]="Variable",o[o.Constant=13]="Constant",o[o.String=14]="String",o[o.Number=15]="Number",o[o.Boolean=16]="Boolean",o[o.Array=17]="Array",o[o.Object=18]="Object",o[o.Key=19]="Key",o[o.Null=20]="Null",o[o.EnumMember=21]="EnumMember",o[o.Struct=22]="Struct",o[o.Event=23]="Event",o[o.Operator=24]="Operator",o[o.TypeParameter=25]="TypeParameter"})(hx||(hx={}));var gx;(function(o){o[o.Deprecated=1]="Deprecated"})(gx||(gx={}));var fx;(function(o){o[o.Hidden=0]="Hidden",o[o.Blink=1]="Blink",o[o.Smooth=2]="Smooth",o[o.Phase=3]="Phase",o[o.Expand=4]="Expand",o[o.Solid=5]="Solid"})(fx||(fx={}));var px;(function(o){o[o.Line=1]="Line",o[o.Block=2]="Block",o[o.Underline=3]="Underline",o[o.LineThin=4]="LineThin",o[o.BlockOutline=5]="BlockOutline",o[o.UnderlineThin=6]="UnderlineThin"})(px||(px={}));var mx;(function(o){o[o.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",o[o.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",o[o.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",o[o.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(mx||(mx={}));var bx;(function(o){o[o.None=0]="None",o[o.Same=1]="Same",o[o.Indent=2]="Indent",o[o.DeepIndent=3]="DeepIndent"})(bx||(bx={}));let __=u(class{static chord(e,t){return xn(e,t)}},"KeyMod");__.CtrlCmd=2048;__.Shift=1024;__.Alt=512;__.WinCtrl=256;function N4(){return{editor:void 0,languages:void 0,CancellationTokenSource:ti,Emitter:R,KeyCode:JL,KeyMod:__,Position:H,Range:L,Selection:re,SelectionDirection:dx,MarkerSeverity:QL,MarkerTag:ex,Uri:be,Token:eb}}u(N4,"createMonacoBaseAPI");class P4{constructor(e){this.fn=e,this.lastCache=void 0,this.lastArgKey=void 0}get(e){const t=JSON.stringify(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this.fn(e)),this.lastCache}}u(P4,"LRUCachedFunction");class _x{constructor(e){this.fn=e,this._map=new Map}get cachedValues(){return this._map}get(e){if(this._map.has(e))return this._map.get(e);const t=this.fn(e);return this._map.set(e,t),t}}u(_x,"CachedFunction");class mu{constructor(e){this.executor=e,this._didRun=!1}hasValue(){return this._didRun}getValue(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}u(mu,"Lazy");var R4;function F4(o){return!o||typeof o!="string"?!0:o.trim().length===0}u(F4,"isFalsyOrWhitespace");const hq=/{(\d+)}/g;function $s(o,...e){return e.length===0?o:o.replace(hq,function(t,n){const i=parseInt(n,10);return isNaN(i)||i<0||i>=e.length?t:e[i]})}u($s,"format");function HD(o){return o.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}u(HD,"escape");function As(o){return o.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}u(As,"escapeRegExpCharacters");function gq(o,e=" "){const t=Iw(o,e);return O4(t,e)}u(gq,"trim");function Iw(o,e){if(!o||!e)return o;const t=e.length;if(t===0||o.length===0)return o;let n=0;for(;o.indexOf(e,n)===n;)n=n+t;return o.substring(n)}u(Iw,"ltrim");function O4(o,e){if(!o||!e)return o;const t=e.length,n=o.length;if(t===0||n===0)return o;let i=n,s=-1;for(;s=o.lastIndexOf(e,i-1),!(s===-1||s+t!==i);){if(s===0)return"";i=s}return o.substring(0,i)}u(O4,"rtrim");function fq(o){return o.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}u(fq,"convertSimple2RegExpPattern");function pq(o){return o.replace(/\*/g,"")}u(pq,"stripWildcards");function V4(o,e,t={}){if(!o)throw new Error("Cannot create regex from empty string");e||(o=As(o)),t.wholeWord&&(/\B/.test(o.charAt(0))||(o="\\b"+o),/\B/.test(o.charAt(o.length-1))||(o=o+"\\b"));let n="";return t.global&&(n+="g"),t.matchCase||(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),new RegExp(o,n)}u(V4,"createRegExp");function mq(o){return o.source==="^"||o.source==="^$"||o.source==="$"||o.source==="^\\s*$"?!1:!!(o.exec("")&&o.lastIndex===0)}u(mq,"regExpLeadsToEndlessLoop");function US(o){return(o.global?"g":"")+(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")}u(US,"regExpFlags");function sa(o){return o.split(/\r\n|\r|\n/)}u(sa,"splitLines");function Di(o){for(let e=0,t=o.length;e<t;e++){const n=o.charCodeAt(e);if(n!==32&&n!==9)return e}return-1}u(Di,"firstNonWhitespaceIndex");function vt(o,e=0,t=o.length){for(let n=e;n<t;n++){const i=o.charCodeAt(n);if(i!==32&&i!==9)return o.substring(e,n)}return o.substring(e,t)}u(vt,"getLeadingWhitespace");function Jr(o,e=o.length-1){for(let t=e;t>=0;t--){const n=o.charCodeAt(t);if(n!==32&&n!==9)return t}return-1}u(Jr,"lastNonWhitespaceIndex");function ib(o,e){return o<e?-1:o>e?1:0}u(ib,"compare");function BD(o,e,t=0,n=o.length,i=0,s=e.length){for(;t<n&&i<s;t++,i++){const l=o.charCodeAt(t),c=e.charCodeAt(i);if(l<c)return-1;if(l>c)return 1}const r=n-t,a=s-i;return r<a?-1:r>a?1:0}u(BD,"compareSubstring");function vx(o,e){return v_(o,e,0,o.length,0,e.length)}u(vx,"compareIgnoreCase");function v_(o,e,t=0,n=o.length,i=0,s=e.length){for(;t<n&&i<s;t++,i++){let l=o.charCodeAt(t),c=e.charCodeAt(i);if(l===c)continue;if(l>=128||c>=128)return BD(o.toLowerCase(),e.toLowerCase(),t,n,i,s);ic(l)&&(l-=32),ic(c)&&(c-=32);const d=l-c;if(d!==0)return d}const r=n-t,a=s-i;return r<a?-1:r>a?1:0}u(v_,"compareSubstringIgnoreCase");function Uv(o){return o>=48&&o<=57}u(Uv,"isAsciiDigit");function ic(o){return o>=97&&o<=122}u(ic,"isLowerAsciiLetter");function Br(o){return o>=65&&o<=90}u(Br,"isUpperAsciiLetter");function rg(o,e){return o.length===e.length&&v_(o,e)===0}u(rg,"equalsIgnoreCase");function WD(o,e){const t=e.length;return e.length>o.length?!1:v_(o,e,0,t)===0}u(WD,"startsWithIgnoreCase");function bu(o,e){const t=Math.min(o.length,e.length);let n;for(n=0;n<t;n++)if(o.charCodeAt(n)!==e.charCodeAt(n))return n;return t}u(bu,"commonPrefixLength");function sb(o,e){const t=Math.min(o.length,e.length);let n;const i=o.length-1,s=e.length-1;for(n=0;n<t;n++)if(o.charCodeAt(i-n)!==e.charCodeAt(s-n))return n;return t}u(sb,"commonSuffixLength");function kn(o){return 55296<=o&&o<=56319}u(kn,"isHighSurrogate");function _u(o){return 56320<=o&&o<=57343}u(_u,"isLowSurrogate");function UD(o,e){return(o-55296<<10)+(e-56320)+65536}u(UD,"computeCodePoint");function J0(o,e,t){const n=o.charCodeAt(t);if(kn(n)&&t+1<e){const i=o.charCodeAt(t+1);if(_u(i))return UD(n,i)}return n}u(J0,"getNextCodePoint");function bq(o,e){const t=o.charCodeAt(e-1);if(_u(t)&&e>1){const n=o.charCodeAt(e-2);if(kn(n))return UD(n,t)}return t}u(bq,"getPrevCodePoint");class Nw{constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}get offset(){return this._offset}setOffset(e){this._offset=e}prevCodePoint(){const e=bq(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){const e=J0(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}}u(Nw,"CodePointIterator");class ob{constructor(e,t=0){this._iterator=new Nw(e,t)}get offset(){return this._iterator.offset}nextGraphemeLength(){const e=za.getInstance(),t=this._iterator,n=t.offset;let i=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const s=t.offset,r=e.getGraphemeBreakType(t.nextCodePoint());if(I2(i,r)){t.setOffset(s);break}i=r}return t.offset-n}prevGraphemeLength(){const e=za.getInstance(),t=this._iterator,n=t.offset;let i=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const s=t.offset,r=e.getGraphemeBreakType(t.prevCodePoint());if(I2(r,i)){t.setOffset(s);break}i=r}return n-t.offset}eol(){return this._iterator.eol()}}u(ob,"GraphemeIterator");function GD(o,e){return new ob(o,e).nextGraphemeLength()}u(GD,"nextCharLength");function H4(o,e){return new ob(o,e).prevGraphemeLength()}u(H4,"prevCharLength");function _q(o,e){e>0&&_u(o.charCodeAt(e))&&e--;const t=e+GD(o,e);return[t-H4(o,t),t]}u(_q,"getCharContainingOffset");const vq=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/;function qg(o){return vq.test(o)}u(qg,"containsRTL");const Cq=/^[\t\n\r\x20-\x7E]*$/;function Pw(o){return Cq.test(o)}u(Pw,"isBasicASCII");const B4=/[\u2028\u2029]/;function W4(o){return B4.test(o)}u(W4,"containsUnusualLineTerminators");function Tc(o){return o>=11904&&o<=55215||o>=63744&&o<=64255||o>=65281&&o<=65374}u(Tc,"isFullWidthCharacter");function zD(o){return o>=127462&&o<=127487||o===8986||o===8987||o===9200||o===9203||o>=9728&&o<=10175||o===11088||o===11093||o>=127744&&o<=128591||o>=128640&&o<=128764||o>=128992&&o<=129008||o>=129280&&o<=129535||o>=129648&&o<=129782}u(zD,"isEmojiImprecise");const wq=String.fromCharCode(65279);function KD(o){return!!(o&&o.length>0&&o.charCodeAt(0)===65279)}u(KD,"startsWithUTF8BOM");function yq(o,e=!1){return o?(e&&(o=o.replace(/\\./g,"")),o.toLowerCase()!==o):!1}u(yq,"containsUppercaseCharacter");function U4(o){return o=o%(2*26),o<26?String.fromCharCode(97+o):String.fromCharCode(65+o-26)}u(U4,"singleLetterHash");function I2(o,e){return o===0?e!==5&&e!==7:o===2&&e===3?!1:o===4||o===2||o===3||e===4||e===2||e===3?!0:!(o===8&&(e===8||e===9||e===11||e===12)||(o===11||o===9)&&(e===9||e===10)||(o===12||o===10)&&e===10||e===5||e===13||e===7||o===1||o===13&&e===14||o===6&&e===6)}u(I2,"breakBetweenGraphemeBreakType");class za{constructor(){this._data=Sq()}static getInstance(){return za._INSTANCE||(za._INSTANCE=new za),za._INSTANCE}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,n=t.length/3;let i=1;for(;i<=n;)if(e<t[3*i])i=2*i;else if(e>t[3*i+1])i=2*i+1;else return t[3*i+2];return 0}}u(za,"GraphemeBreakTree");za._INSTANCE=null;function Sq(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}u(Sq,"getGraphemeBreakRawData");function Tq(o,e){if(o===0)return 0;const t=Lq(o,e);if(t!==void 0)return t;const n=new Nw(e,o);return n.prevCodePoint(),n.offset}u(Tq,"getLeftDeleteOffset");function Lq(o,e){const t=new Nw(e,o);let n=t.prevCodePoint();for(;xq(n)||n===65039||n===8419;){if(t.offset===0)return;n=t.prevCodePoint()}if(!zD(n))return;let i=t.offset;return i>0&&t.prevCodePoint()===8205&&(i=t.offset),i}u(Lq,"getOffsetBeforeLastEmojiComponent");function xq(o){return 127995<=o&&o<=127999}u(xq,"isEmojiModifier");const Eq=" ";class no{constructor(e){this.confusableDictionary=e}static getInstance(e){return no.cache.get(Array.from(e))}static getLocales(){return no._locales.getValue()}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}}u(no,"AmbiguousCharacters");R4=no;no.ambiguousCharacterData=new mu(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'));no.cache=new P4(o=>{function e(c){const d=new Map;for(let h=0;h<c.length;h+=2)d.set(c[h],c[h+1]);return d}u(e,"arrayToMap");function t(c,d){const h=new Map(c);for(const[g,f]of d)h.set(g,f);return h}u(t,"mergeMaps");function n(c,d){if(!c)return d;const h=new Map;for(const[g,f]of c)d.has(g)&&h.set(g,f);return h}u(n,"intersectMaps");const i=R4.ambiguousCharacterData.getValue();let s=o.filter(c=>!c.startsWith("_")&&c in i);s.length===0&&(s=["_default"]);let r;for(const c of s){const d=e(i[c]);r=n(r,d)}const a=e(i._common),l=t(a,r);return new no(l)});no._locales=new mu(()=>Object.keys(no.ambiguousCharacterData.getValue()).filter(o=>!o.startsWith("_")));class hr{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(hr.getRawData())),this._data}static isInvisibleCharacter(e){return hr.getData().has(e)}static get codePoints(){return hr.getData()}}u(hr,"InvisibleCharacters");hr._data=void 0;class Q0{constructor(){this._zoomFactor=1}getZoomFactor(){return this._zoomFactor}}u(Q0,"WindowManager");Q0.INSTANCE=new Q0;class G4 extends U{constructor(){super(),this._onDidChange=this._register(new R),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(!0),this._mediaQueryList=null,this._handleChange(!1)}_handleChange(e){var t;(t=this._mediaQueryList)===null||t===void 0||t.removeEventListener("change",this._listener),this._mediaQueryList=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),e&&this._onDidChange.fire()}}u(G4,"DevicePixelRatioMonitor");class z4 extends U{constructor(){super(),this._onDidChange=this._register(new R),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio();const e=this._register(new G4);this._register(e.onDidChange(()=>{this._value=this._getPixelRatio(),this._onDidChange.fire(this._value)}))}get value(){return this._value}_getPixelRatio(){const e=document.createElement("canvas").getContext("2d"),t=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/n}}u(z4,"PixelRatioImpl");class K4{constructor(){this._pixelRatioMonitor=null}_getOrCreatePixelRatioMonitor(){return this._pixelRatioMonitor||(this._pixelRatioMonitor=new z4),this._pixelRatioMonitor}get value(){return this._getOrCreatePixelRatioMonitor().value}get onDidChange(){return this._getOrCreatePixelRatioMonitor().onDidChange}}u(K4,"PixelRatioFacade");function jD(o,e){typeof o=="string"&&(o=window.matchMedia(o)),o.addEventListener("change",e)}u(jD,"addMatchMediaChangeListener");const Yg=new K4;function j4(){return Q0.INSTANCE.getZoomFactor()}u(j4,"getZoomFactor");const ep=navigator.userAgent,Is=ep.indexOf("Firefox")>=0,hc=ep.indexOf("AppleWebKit")>=0,$D=ep.indexOf("Chrome")>=0,pl=!$D&&ep.indexOf("Safari")>=0,qD=!$D&&!pl&&hc,kq=ep.indexOf("Electron/")>=0,$4=ep.indexOf("Android")>=0;let Cx=!1;if(window.matchMedia){const o=window.matchMedia("(display-mode: standalone)");Cx=o.matches,jD(o,({matches:e})=>{Cx=e})}function YD(){return Cx}u(YD,"isStandalone");const Mq=Object.freeze(Object.defineProperty({__proto__:null,PixelRatio:Yg,addMatchMediaChangeListener:jD,getZoomFactor:j4,isAndroid:$4,isChrome:$D,isElectron:kq,isFirefox:Is,isSafari:pl,isStandalone:YD,isWebKit:hc,isWebkitWebView:qD},Symbol.toStringTag,{value:"Module"}));class XD{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){const t=Dr(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){const t=Dr(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){const t=Dr(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){const t=Dr(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){const t=Dr(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){const t=Dr(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){const t=Dr(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){const t=Dr(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){const t=Dr(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){const t=Dr(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}u(XD,"FastDomNode");function Dr(o){return typeof o=="number"?`${o}px`:o}u(Dr,"numberAsPixels");function et(o){return new XD(o)}u(et,"createFastDomNode");function di(o,e){o instanceof XD?(o.setFontFamily(e.getMassagedFontFamily()),o.setFontWeight(e.fontWeight),o.setFontSize(e.fontSize),o.setFontFeatureSettings(e.fontFeatureSettings),o.setLineHeight(e.lineHeight),o.setLetterSpacing(e.letterSpacing)):(o.style.fontFamily=e.getMassagedFontFamily(),o.style.fontWeight=e.fontWeight,o.style.fontSize=e.fontSize+"px",o.style.fontFeatureSettings=e.fontFeatureSettings,o.style.lineHeight=e.lineHeight+"px",o.style.letterSpacing=e.letterSpacing+"px")}u(di,"applyFontInfo");class q4{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}u(q4,"CharWidthRequest");class Rw{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(){this._createDomElements(),document.body.appendChild(this._container),this._readFromDomElements(),document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){const e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";const t=document.createElement("div");di(t,this._bareFontInfo),e.appendChild(t);const n=document.createElement("div");di(n,this._bareFontInfo),n.style.fontWeight="bold",e.appendChild(n);const i=document.createElement("div");di(i,this._bareFontInfo),i.style.fontStyle="italic",e.appendChild(i);const s=[];for(const r of this._requests){let a;r.type===0&&(a=t),r.type===2&&(a=n),r.type===1&&(a=i),a.appendChild(document.createElement("br"));const l=document.createElement("span");Rw._render(l,r),a.appendChild(l),s.push(l)}this._container=e,this._testElements=s}static _render(e,t){if(t.chr===" "){let n=" ";for(let i=0;i<8;i++)n+=n;e.innerText=n}else{let n=t.chr;for(let i=0;i<8;i++)n+=n;e.textContent=n}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const n=this._requests[e],i=this._testElements[e];n.fulfill(i.offsetWidth/256)}}}u(Rw,"DomCharWidthReader");function Dq(o,e){new Rw(o,e).read()}u(Dq,"readCharWidths");const ml=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new R,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(o){o=Math.min(Math.max(-5,o),20),this._zoomLevel!==o&&(this._zoomLevel=o,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},Aq=Xe?1.5:1.35,GS=8;class gc{constructor(e){this._bareFontInfoBrand=void 0,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}static createFromValidatedSettings(e,t,n){const i=e.get(45),s=e.get(49),r=e.get(48),a=e.get(47),l=e.get(61),c=e.get(58);return gc._create(i,s,r,a,l,c,t,n)}static _create(e,t,n,i,s,r,a,l){s===0?s=Aq*n:s<GS&&(s=s*n),s=Math.round(s),s<GS&&(s=GS);const c=1+(l?0:ml.getZoomLevel()*.1);return n*=c,s*=c,new gc({pixelRatio:a,fontFamily:e,fontWeight:t,fontSize:n,fontFeatureSettings:i,lineHeight:s,letterSpacing:r})}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){const e=rs.fontFamily,t=gc._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}u(gc,"BareFontInfo");const Iq=1;class e1 extends gc{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=Iq,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}u(e1,"FontInfo");class Y4 extends U{constructor(){super(),this._onDidChange=this._register(new R),this.onDidChange=this._onDidChange.event,this._cache=new wx,this._evictUntrustedReadingsTimeout=-1}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(window.clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache=new wx,this._onDidChange.fire()}_writeToCache(e,t){this._cache.put(e,t),!t.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=window.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings()},5e3))}_evictUntrustedReadings(){const e=this._cache.getValues();let t=!1;for(const n of e)n.isTrusted||(t=!0,this._cache.remove(n));t&&this._onDidChange.fire()}readFontInfo(e){if(!this._cache.has(e)){let t=this._actualReadFontInfo(e);(t.typicalHalfwidthCharacterWidth<=2||t.typicalFullwidthCharacterWidth<=2||t.spaceWidth<=2||t.maxDigitWidth<=2)&&(t=new e1({pixelRatio:Yg.value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:t.isMonospace,typicalHalfwidthCharacterWidth:Math.max(t.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(t.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:t.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(t.spaceWidth,5),middotWidth:Math.max(t.middotWidth,5),wsmiddotWidth:Math.max(t.wsmiddotWidth,5),maxDigitWidth:Math.max(t.maxDigitWidth,5)},!1)),this._writeToCache(e,t)}return this._cache.get(e)}_createRequest(e,t,n,i){const s=new q4(e,t);return n.push(s),i?.push(s),s}_actualReadFontInfo(e){const t=[],n=[],i=this._createRequest("n",0,t,n),s=this._createRequest("ｍ",0,t,null),r=this._createRequest(" ",0,t,n),a=this._createRequest("0",0,t,n),l=this._createRequest("1",0,t,n),c=this._createRequest("2",0,t,n),d=this._createRequest("3",0,t,n),h=this._createRequest("4",0,t,n),g=this._createRequest("5",0,t,n),f=this._createRequest("6",0,t,n),p=this._createRequest("7",0,t,n),_=this._createRequest("8",0,t,n),v=this._createRequest("9",0,t,n),C=this._createRequest("→",0,t,n),w=this._createRequest("￫",0,t,null),y=this._createRequest("·",0,t,n),S=this._createRequest(String.fromCharCode(11825),0,t,null),E="|/-_ilm%";for(let F=0,V=E.length;F<V;F++)this._createRequest(E.charAt(F),0,t,n),this._createRequest(E.charAt(F),1,t,n),this._createRequest(E.charAt(F),2,t,n);Dq(e,t);const k=Math.max(a.width,l.width,c.width,d.width,h.width,g.width,f.width,p.width,_.width,v.width);let T=e.fontFeatureSettings===is.OFF;const x=n[0].width;for(let F=1,V=n.length;T&&F<V;F++){const G=x-n[F].width;if(G<-.001||G>.001){T=!1;break}}let M=!0;return T&&w.width!==x&&(M=!1),w.width>C.width&&(M=!1),new e1({pixelRatio:Yg.value,fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontSize:e.fontSize,fontFeatureSettings:e.fontFeatureSettings,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,isMonospace:T,typicalHalfwidthCharacterWidth:i.width,typicalFullwidthCharacterWidth:s.width,canUseHalfwidthRightwardsArrow:M,spaceWidth:r.width,middotWidth:y.width,wsmiddotWidth:S.width,maxDigitWidth:k},!0)}}u(Y4,"FontMeasurementsImpl");class wx{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const n=e.getId();this._keys[n]=e,this._values[n]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}u(wx,"FontMeasurementsCache");const yx=new Y4;var tr;(function(o){o.serviceIds=new Map,o.DI_TARGET="$di$target",o.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[o.DI_DEPENDENCIES]||[]}u(e,"getServiceDependencies"),o.getServiceDependencies=e})(tr||(tr={}));const Ne=Je("instantiationService");function Nq(o,e,t){e[tr.DI_TARGET]===e?e[tr.DI_DEPENDENCIES].push({id:o,index:t}):(e[tr.DI_DEPENDENCIES]=[{id:o,index:t}],e[tr.DI_TARGET]=e)}u(Nq,"storeServiceDependency");function Je(o){if(tr.serviceIds.has(o))return tr.serviceIds.get(o);const e=u(function(t,n,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");Nq(e,t,i)},"id");return e.toString=()=>o,tr.serviceIds.set(o,e),e}u(Je,"createDecorator");const dt=Je("codeEditorService");function Nm(o,e){if(!o)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}u(Nm,"ok");const Pq={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0};class X4 extends U{constructor(e,t={}){super(),this._onDidUpdate=this._register(new R),this._editor=e,this._options=la(t,Pq,!1),this.disposed=!1,this.nextIdx=-1,this.ranges=[],this.ignoreSelectionChange=!1,this.revealFirst=Boolean(this._options.alwaysRevealFirst),this._register(this._editor.onDidDispose(()=>this.dispose())),this._register(this._editor.onDidUpdateDiff(()=>this._onDiffUpdated())),this._options.followsCaret&&this._register(this._editor.getModifiedEditor().onDidChangeCursorPosition(n=>{this.ignoreSelectionChange||(this.nextIdx=-1)})),this._options.alwaysRevealFirst&&this._register(this._editor.getModifiedEditor().onDidChangeModel(n=>{this.revealFirst=!0})),this._init()}_init(){this._editor.getLineChanges()}_onDiffUpdated(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&this._editor.getLineChanges()!==null&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))}_compute(e){this.ranges=[],e&&e.forEach(t=>{!this._options.ignoreCharChanges&&t.charChanges?t.charChanges.forEach(n=>{this.ranges.push({rhs:!0,range:new L(n.modifiedStartLineNumber,n.modifiedStartColumn,n.modifiedEndLineNumber,n.modifiedEndColumn)})}):t.modifiedEndLineNumber===0?this.ranges.push({rhs:!0,range:new L(t.modifiedStartLineNumber,1,t.modifiedStartLineNumber+1,1)}):this.ranges.push({rhs:!0,range:new L(t.modifiedStartLineNumber,1,t.modifiedEndLineNumber+1,1)})}),this.ranges.sort((t,n)=>L.compareRangesUsingStarts(t.range,n.range)),this._onDidUpdate.fire(this)}_initIdx(e){let t=!1;const n=this._editor.getPosition();if(!n){this.nextIdx=0;return}for(let i=0,s=this.ranges.length;i<s&&!t;i++){const r=this.ranges[i].range;n.isBeforeOrEqual(r.getStartPosition())&&(this.nextIdx=i+(e?0:-1),t=!0)}t||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}_move(e,t){if(Nm(!this.disposed,"Illegal State - diff navigator has been disposed"),!this.canNavigate())return;this.nextIdx===-1?this._initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));const n=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{const i=n.range.getStartPosition();this._editor.setPosition(i),this._editor.revealRangeInCenter(n.range,t)}finally{this.ignoreSelectionChange=!1}}canNavigate(){return this.ranges&&this.ranges.length>0}next(e=0){this._move(!0,e)}previous(e=0){this._move(!1,e)}dispose(){super.dispose(),this.ranges=[],this.disposed=!0}}u(X4,"DiffNavigator");const C_={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};var io;(function(o){o[o.Left=1]="Left",o[o.Center=2]="Center",o[o.Right=4]="Right",o[o.Full=7]="Full"})(io||(io={}));var Zs;(function(o){o[o.Inline=1]="Inline",o[o.Gutter=2]="Gutter"})(Zs||(Zs={}));var nr;(function(o){o[o.Both=0]="Both",o[o.Right=1]="Right",o[o.Left=2]="Left",o[o.None=3]="None"})(nr||(nr={}));class Pm{constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),this.indentSize=e.tabSize|0,this.insertSpaces=Boolean(e.insertSpaces),this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=Boolean(e.trimAutoWhitespace),this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&Xs(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}u(Pm,"TextModelResolvedOptions");class Xg{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}u(Xg,"FindMatch");function Rq(o){return o&&typeof o.read=="function"}u(Rq,"isITextSnapshot");class $C{constructor(e,t,n,i,s,r){this.identifier=e,this.range=t,this.text=n,this.forceMoveMarkers=i,this.isAutoWhitespaceEdit=s,this._isTracked=r}}u($C,"ValidAnnotatedEditOperation");class Z4{constructor(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n}}u(Z4,"SearchData");class J4{constructor(e,t,n){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=n}}u(J4,"ApplyEditsResult");function Fq(o){return!o.isTooLargeForSyncing()&&!o.isForSimpleWidget}u(Fq,"shouldSynchronizeModel");var cn;(function(o){o[o.None=0]="None",o[o.Indent=1]="Indent",o[o.IndentOutdent=2]="IndentOutdent",o[o.Outdent=3]="Outdent"})(cn||(cn={}));class qC{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,n=e.notIn.length;t<n;t++)switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;const n=e.findTokenIndexAtOffset(t-2),i=e.getStandardTokenType(n);return this.isOK(i)}_findNeutralCharacterInRange(e,t){for(let n=e;n<=t;n++){const i=String.fromCharCode(n);if(!this.open.includes(i)&&!this.close.includes(i))return i}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}u(qC,"StandardAutoClosingPairConditional");class Q4{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)Ip(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),Ip(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),Ip(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),Ip(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&Ip(this.autoClosingPairsCloseSingleChar,t.close,t)}}u(Q4,"AutoClosingPairs");function Ip(o,e,t){o.has(e)?o.get(e).push(t):o.set(e,[t])}u(Ip,"appendEntry");function Fw(o,e){const t=o.getCount(),n=o.findTokenIndexAtOffset(e),i=o.getLanguageId(n);let s=n;for(;s+1<t&&o.getLanguageId(s+1)===i;)s++;let r=n;for(;r>0&&o.getLanguageId(r-1)===i;)r--;return new e5(o,i,r,s+1,o.getStartOffset(r),o.getEndOffset(s))}u(Fw,"createScopedLineTokens");class e5{constructor(e,t,n,i,s,r){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=n,this._lastTokenIndex=i,this.firstCharOffset=s,this._lastCharOffset=r}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}}u(e5,"ScopedLineTokens");function Rr(o){return(o&3)!==0}u(Rr,"ignoreBracketsInToken");class w_{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new qC(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new qC({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new qC({open:t.open,close:t.close||""}))}this._autoCloseBefore=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:w_.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(){return this._autoCloseBefore}getSurroundingPairs(){return this._surroundingPairs}}u(w_,"CharacterPairSupport");w_.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED=`;:.,=}])> 
	`;const N2=typeof Buffer<"u";let zS;class y_{constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}static wrap(e){return N2&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new y_(e)}toString(){return N2?this.buffer.toString():(zS||(zS=new TextDecoder),zS.decode(this.buffer))}}u(y_,"VSBuffer");function Oq(o,e){return o[e+0]<<0>>>0|o[e+1]<<8>>>0}u(Oq,"readUInt16LE");function Vq(o,e,t){o[t+0]=e&255,e=e>>>8,o[t+1]=e&255}u(Vq,"writeUInt16LE");function Oo(o,e){return o[e]*Math.pow(2,24)+o[e+1]*Math.pow(2,16)+o[e+2]*Math.pow(2,8)+o[e+3]}u(Oo,"readUInt32BE");function Vo(o,e,t){o[t+3]=e,e=e>>>8,o[t+2]=e,e=e>>>8,o[t+1]=e,e=e>>>8,o[t]=e}u(Vo,"writeUInt32BE");function P2(o,e){return o[e]}u(P2,"readUInt8");function R2(o,e,t){o[t]=e}u(R2,"writeUInt8");let KS;function t5(){return KS||(KS=new TextDecoder("UTF-16LE")),KS}u(t5,"getUTF16LE_TextDecoder");let jS;function Hq(){return jS||(jS=new TextDecoder("UTF-16BE")),jS}u(Hq,"getUTF16BE_TextDecoder");let $S;function n5(){return $S||($S=yO()?t5():Hq()),$S}u(n5,"getPlatformTextDecoder");const i5=typeof TextDecoder<"u";let Lc,Sx;i5?(Lc=u(o=>new o5(o),"createStringBuilder"),Sx=Bq):(Lc=u(o=>new r5,"createStringBuilder"),Sx=s5);function Bq(o,e,t){const n=new Uint16Array(o.buffer,e,t);return t>0&&(n[0]===65279||n[0]===65534)?s5(o,e,t):t5().decode(n)}u(Bq,"standardDecodeUTF16LE");function s5(o,e,t){const n=[];let i=0;for(let s=0;s<t;s++){const r=Oq(o,e);e+=2,n[i++]=String.fromCharCode(r)}return n.join("")}u(s5,"compatDecodeUTF16LE");class o5{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return n5().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}write1(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||kn(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCII(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIIString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let n=0;n<t;n++)this._buffer[this._bufferLength++]=e.charCodeAt(n)}}u(o5,"StringBuilder");class r5{constructor(){this._pieces=[],this._piecesLen=0}reset(){this._pieces=[],this._piecesLen=0}build(){return this._pieces.join("")}write1(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCII(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCIIString(e){this._pieces[this._piecesLen++]=e}}u(r5,"CompatStringBuilder");class rb{constructor(e,t,n,i,s,r){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=n,this.close=i,this.forwardRegex=s,this.reversedRegex=r,this._openSet=rb._toSet(this.open),this._closeSet=rb._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const n of e)t.add(n);return t}}u(rb,"RichEditBracket");function Wq(o){const e=o.length;o=o.map(r=>[r[0].toLowerCase(),r[1].toLowerCase()]);const t=[];for(let r=0;r<e;r++)t[r]=r;const n=u((r,a)=>{const[l,c]=r,[d,h]=a;return l===d||l===h||c===d||c===h},"areOverlapping"),i=u((r,a)=>{const l=Math.min(r,a),c=Math.max(r,a);for(let d=0;d<e;d++)t[d]===c&&(t[d]=l)},"mergeGroups");for(let r=0;r<e;r++){const a=o[r];for(let l=r+1;l<e;l++){const c=o[l];n(a,c)&&i(t[r],t[l])}}const s=[];for(let r=0;r<e;r++){const a=[],l=[];for(let c=0;c<e;c++)if(t[c]===r){const[d,h]=o[c];a.push(d),l.push(h)}a.length>0&&s.push({open:a,close:l})}return s}u(Wq,"groupFuzzyBrackets");class a5{constructor(e,t){this._richEditBracketsBrand=void 0;const n=Wq(t);this.brackets=n.map((i,s)=>new rb(e,s,i.open,i.close,Uq(i.open,i.close,n,s),Gq(i.open,i.close,n,s))),this.forwardRegex=zq(this.brackets),this.reversedRegex=Kq(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const i of this.brackets){for(const s of i.open)this.textIsBracket[s]=i,this.textIsOpenBracket[s]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,s.length);for(const s of i.close)this.textIsBracket[s]=i,this.textIsOpenBracket[s]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,s.length)}}}u(a5,"RichEditBrackets");function l5(o,e,t,n){for(let i=0,s=e.length;i<s;i++){if(i===t)continue;const r=e[i];for(const a of r.open)a.indexOf(o)>=0&&n.push(a);for(const a of r.close)a.indexOf(o)>=0&&n.push(a)}}u(l5,"collectSuperstrings");function c5(o,e){return o.length-e.length}u(c5,"lengthcmp");function Ow(o){if(o.length<=1)return o;const e=[],t=new Set;for(const n of o)t.has(n)||(e.push(n),t.add(n));return e}u(Ow,"unique");function Uq(o,e,t,n){let i=[];i=i.concat(o),i=i.concat(e);for(let s=0,r=i.length;s<r;s++)l5(i[s],t,n,i);return i=Ow(i),i.sort(c5),i.reverse(),Vw(i)}u(Uq,"getRegexForBracketPair");function Gq(o,e,t,n){let i=[];i=i.concat(o),i=i.concat(e);for(let s=0,r=i.length;s<r;s++)l5(i[s],t,n,i);return i=Ow(i),i.sort(c5),i.reverse(),Vw(i.map(ZD))}u(Gq,"getReversedRegexForBracketPair");function zq(o){let e=[];for(const t of o){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=Ow(e),Vw(e)}u(zq,"getRegexForBrackets");function Kq(o){let e=[];for(const t of o){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=Ow(e),Vw(e.map(ZD))}u(Kq,"getReversedRegexForBrackets");function jq(o){const e=/^[\w ]+$/.test(o);return o=As(o),e?`\\b${o}\\b`:o}u(jq,"prepareBracketForRegExp$1");function Vw(o){const e=`(${o.map(jq).join(")|(")})`;return V4(e,!0)}u(Vw,"createBracketOrRegExp");const ZD=function(){function o(n){if(i5){const i=new Uint16Array(n.length);let s=0;for(let r=n.length-1;r>=0;r--)i[s++]=n.charCodeAt(r);return n5().decode(i)}else{const i=[];let s=0;for(let r=n.length-1;r>=0;r--)i[s++]=n.charAt(r);return i.join("")}}u(o,"reverse");let e=null,t=null;return u(function(i){return e!==i&&(e=i,t=o(e)),t},"toReversedString")}();class Vs{static _findPrevBracketInText(e,t,n,i){const s=n.match(e);if(!s)return null;const r=n.length-(s.index||0),a=s[0].length,l=i+r;return new L(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,n,i,s){const a=ZD(n).substring(n.length-s,n.length-i);return this._findPrevBracketInText(e,t,a,i)}static findNextBracketInText(e,t,n,i){const s=n.match(e);if(!s)return null;const r=s.index||0,a=s[0].length;if(a===0)return null;const l=i+r;return new L(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,n,i,s){const r=n.substring(i,s);return this.findNextBracketInText(e,t,r,i)}}u(Vs,"BracketsUtils");class d5{constructor(e){this._richEditBrackets=e}getElectricCharacters(){const e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const n of t.close){const i=n.charAt(n.length-1);e.push(i)}return gl(e)}onElectricCharacter(e,t,n){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const i=t.findTokenIndexAtOffset(n-1);if(Rr(t.getStandardTokenType(i)))return null;const s=this._richEditBrackets.reversedRegex,r=t.getLineContent().substring(0,n-1)+e,a=Vs.findPrevBracketInRange(s,1,r,0,r.length);if(!a)return null;const l=r.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;const d=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(d)?{matchOpenBracket:l}:null}}u(d5,"BracketElectricCharacterSupport");function Gv(o){return o.global&&(o.lastIndex=0),!0}u(Gv,"resetGlobalRegex");class u5{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&Gv(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&Gv(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&Gv(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&Gv(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}u(u5,"IndentRulesSupport");class Pd{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const n=Pd._createOpenBracketRegExp(t[0]),i=Pd._createCloseBracketRegExp(t[1]);n&&i&&this._brackets.push({open:t[0],openRegExp:n,close:t[1],closeRegExp:i})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,n,i){if(e>=3)for(let s=0,r=this._regExpRules.length;s<r;s++){const a=this._regExpRules[s];if([{reg:a.beforeText,text:n},{reg:a.afterText,text:i},{reg:a.previousLineText,text:t}].every(c=>c.reg?(c.reg.lastIndex=0,c.reg.test(c.text)):!0))return a.action}if(e>=2&&n.length>0&&i.length>0)for(let s=0,r=this._brackets.length;s<r;s++){const a=this._brackets[s];if(a.openRegExp.test(n)&&a.closeRegExp.test(i))return{indentAction:cn.IndentOutdent}}if(e>=2&&n.length>0){for(let s=0,r=this._brackets.length;s<r;s++)if(this._brackets[s].openRegExp.test(n))return{indentAction:cn.Indent}}return null}static _createOpenBracketRegExp(e){let t=As(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",Pd._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=As(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,Pd._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return Ie(t),null}}}u(Pd,"OnEnterSupport");const rt=Je("configurationService");function h5(o,e){const t=Object.create(null);for(const n in o)JD(t,n,o[n],e);return t}u(h5,"toValuesTree");function JD(o,e,t,n){const i=e.split("."),s=i.pop();let r=o;for(let a=0;a<i.length;a++){const l=i[a];let c=r[l];switch(typeof c){case"undefined":c=r[l]=Object.create(null);break;case"object":break;default:n(`Ignoring ${e} as ${i.slice(0,a+1).join(".")} is ${JSON.stringify(c)}`);return}r=c}if(typeof r=="object"&&r!==null)try{r[s]=t}catch{n(`Ignoring ${e} as ${i.join(".")} is ${JSON.stringify(r)}`)}else n(`Ignoring ${e} as ${i.join(".")} is ${JSON.stringify(r)}`)}u(JD,"addToValueTree");function $q(o,e){const t=e.split(".");g5(o,t)}u($q,"removeFromValueTree");function g5(o,e){const t=e.shift();if(e.length===0){delete o[t];return}if(Object.keys(o).indexOf(t)!==-1){const n=o[t];typeof n=="object"&&!Array.isArray(n)&&(g5(n,e),Object.keys(n).length===0&&delete o[t])}}u(g5,"doRemoveFromValueTree");function F2(o,e,t){function n(r,a){let l=r;for(const c of a){if(typeof l!="object"||l===null)return;l=l[c]}return l}u(n,"accessSetting");const i=e.split("."),s=n(o,i);return typeof s>"u"?t:s}u(F2,"getConfigurationValue");function qq(o){return o.replace(/[\[\]]/g,"")}u(qq,"getLanguageTagSettingPlainKey");const Gt=Je("languageService");class Ko{constructor(e,t=[],n=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}}u(Ko,"SyncDescriptor");const f5=[];function nt(o,e,t){e instanceof Ko||(e=new Ko(e,[],t)),f5.push([o,e])}u(nt,"registerSingleton");function O2(){return f5}u(O2,"getSingletonServiceDescriptors");class p5{constructor(){this.data=new Map}add(e,t){Nm(qi(e)),Nm(Ki(t)),Nm(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}u(p5,"RegistryImpl");const zt=new p5,zi=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),Hw={JSONContribution:"base.contributions.json"};function Yq(o){return o.length>0&&o.charAt(o.length-1)==="#"?o.substring(0,o.length-1):o}u(Yq,"normalizeId");class m5{constructor(){this._onDidChangeSchema=new R,this.schemasById={}}registerSchema(e,t){this.schemasById[Yq(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}u(m5,"JSONContributionRegistry");const Xq=new m5;zt.add(Hw.JSONContribution,Xq);const kl={Configuration:"base.contributions.configuration"},Np="vscode://schemas/settings/resourceLanguage",V2=zt.as(Hw.JSONContribution);class b5{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new R,this._onDidUpdateConfiguration=new R,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:m("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!1,errorMessage:"Unknown editor configuration setting",allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},V2.registerSchema(Np,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const n=this.doRegisterConfigurations(e,t);V2.registerSchema(Np,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}registerDefaultConfigurations(e){var t;const n=[],i=[];for(const{overrides:s,source:r}of e)for(const a in s)if(n.push(a),ab.test(a)){const l=this.configurationDefaultsOverrides.get(a),c=(t=l?.valuesSources)!==null&&t!==void 0?t:new Map;if(r)for(const f of Object.keys(s[a]))c.set(f,r);const d=Object.assign(Object.assign({},l?.value||{}),s[a]);this.configurationDefaultsOverrides.set(a,{source:r,value:d,valuesSources:c});const h=qq(a),g={type:"object",default:d,description:m("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",h),$ref:Np,defaultDefaultValue:d,source:qi(r)?void 0:r,defaultValueSource:r};i.push(...v5(a)),this.configurationProperties[a]=g,this.defaultLanguageConfigurationOverridesNode.properties[a]=g}else{this.configurationDefaultsOverrides.set(a,{value:s[a],source:r});const l=this.configurationProperties[a];l&&(this.updatePropertyDefaultValue(a,l),this.updateSchema(a,l))}this.registerOverrideIdentifiers(i),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n,defaultsOverrides:!0})}registerOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t){const n=[];return e.forEach(i=>{n.push(...this.validateAndRegisterProperties(i,t,i.extensionInfo,i.restrictedProperties)),this.configurationContributors.push(i),this.registerJSONConfiguration(i)}),n}validateAndRegisterProperties(e,t=!0,n,i,s=3){var r;s=ys(e.scope)?s:e.scope;const a=[],l=e.properties;if(l)for(const d in l){const h=l[d];if(t&&Qq(d,h)){delete l[d];continue}if(h.source=n,h.defaultDefaultValue=l[d].default,this.updatePropertyDefaultValue(d,h),ab.test(d)?h.scope=void 0:(h.scope=ys(h.scope)?s:h.scope,h.restricted=ys(h.restricted)?!!i?.includes(d):h.restricted),l[d].hasOwnProperty("included")&&!l[d].included){this.excludedConfigurationProperties[d]=l[d],delete l[d];continue}else this.configurationProperties[d]=l[d],!((r=l[d].policy)===null||r===void 0)&&r.name&&this.policyConfigurations.set(l[d].policy.name,d);!l[d].deprecationMessage&&l[d].markdownDeprecationMessage&&(l[d].deprecationMessage=l[d].markdownDeprecationMessage),a.push(d)}const c=e.allOf;if(c)for(const d of c)a.push(...this.validateAndRegisterProperties(d,t,n,i,s));return a}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}registerJSONConfiguration(e){const t=u(n=>{const i=n.properties;if(i)for(const r in i)this.updateSchema(r,i[r]);const s=n.allOf;s?.forEach(t)},"register");t(e)}updateSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,n={type:"object",description:m("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:m("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:Np};this.updatePropertyDefaultValue(t,n)}this._onDidSchemaChange.fire()}registerOverridePropertyPatternKey(){m("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),m("overrideSettings.errorMessage","This setting does not support per-language configuration."),this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){const n=this.configurationDefaultsOverrides.get(e);let i=n?.value,s=n?.source;ss(i)&&(i=t.defaultDefaultValue,s=void 0),ss(i)&&(i=Jq(t.type)),t.default=i,t.defaultValueSource=s}}u(b5,"ConfigurationRegistry");const _5="\\[([^\\]]+)\\]",H2=new RegExp(_5,"g"),Zq=`^(${_5})+$`,ab=new RegExp(Zq);function v5(o){const e=[];if(ab.test(o)){let t=H2.exec(o);for(;t?.length;){const n=t[1].trim();n&&e.push(n),t=H2.exec(o)}}return gl(e)}u(v5,"overrideIdentifiersFromKey");function Jq(o){switch(Array.isArray(o)?o[0]:o){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}u(Jq,"getDefaultValue");const YC=new b5;zt.add(kl.Configuration,YC);function Qq(o,e){var t,n,i,s;return o.trim()?ab.test(o)?m("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",o):YC.getConfigurationProperties()[o]!==void 0?m("config.property.duplicate","Cannot register '{0}'. This property is already registered.",o):!((t=e.policy)===null||t===void 0)&&t.name&&YC.getPolicyConfigurations().get((n=e.policy)===null||n===void 0?void 0:n.name)!==void 0?m("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",o,(i=e.policy)===null||i===void 0?void 0:i.name,YC.getPolicyConfigurations().get((s=e.policy)===null||s===void 0?void 0:s.name)):null:m("config.property.empty","Cannot register an empty property")}u(Qq,"validateProperty");const eY={ModesRegistry:"editor.modesRegistry"};class C5{constructor(){this._onDidChangeLanguages=new R,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,n=this._languages.length;t<n;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return this._languages}}u(C5,"EditorModesRegistry");const Zg=new C5;zt.add(eY.ModesRegistry,Zg);const Js="plaintext",tY=".txt";Zg.registerLanguage({id:Js,extensions:[tY],aliases:[m("plainText.alias","Plain Text"),"text"],mimetypes:[zi.text]});zt.as(kl.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);class w5{constructor(e,t){this.languageId=e;let n;t.colorizedBracketPairs?n=B2(t.colorizedBracketPairs.map(r=>[r[0],r[1]])):t.brackets?n=B2(t.brackets.map(r=>[r[0],r[1]]).filter(r=>!(r[0]==="<"&&r[1]===">"))):n=[];const i=new _x(r=>{const a=new Set;return{info:new y5(this,r,a),closing:a}}),s=new _x(r=>{const a=new Set;return{info:new S5(this,r,a),opening:a}});for(const[r,a]of n){const l=i.get(r),c=s.get(a);l.closing.add(c.info),c.opening.add(l.info)}this._openingBrackets=new Map([...i.cachedValues].map(([r,a])=>[r,a.info])),this._closingBrackets=new Map([...s.cachedValues].map(([r,a])=>[r,a.info]))}get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}}u(w5,"LanguageBracketsConfiguration");function B2(o){return o.filter(([e,t])=>e!==""&&t!=="")}u(B2,"filterValidBrackets");class QD{constructor(e,t){this.config=e,this.bracketText=t}get languageId(){return this.config.languageId}}u(QD,"BracketKindBase");class y5 extends QD{constructor(e,t,n){super(e,t),this.openedBrackets=n,this.isOpeningBracket=!0}}u(y5,"OpeningBracketKind");class S5 extends QD{constructor(e,t,n){super(e,t),this.closedBrackets=n,this.isOpeningBracket=!1}closes(e){if(e.languageId===this.languageId&&e.config!==this.config)throw new Ew("Brackets from different language configuration cannot be used.");return this.closedBrackets.has(e)}getClosedBrackets(){return[...this.closedBrackets]}}u(S5,"ClosingBracketKind");var nY=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},W2=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};class XC{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}}u(XC,"LanguageConfigurationServiceChangeEvent");const rn=Je("languageConfigurationService");let Tx=u(class extends U{constructor(e,t){super(),this.configurationService=e,this.languageService=t,this._registry=this._register(new E5),this.onDidChangeEmitter=this._register(new R),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const n=new Set(Object.values(Lx));this._register(this.configurationService.onDidChangeConfiguration(i=>{const s=i.change.keys.some(a=>n.has(a)),r=i.change.overrides.filter(([a,l])=>l.some(c=>n.has(c))).map(([a])=>a);if(s)this.configurations.clear(),this.onDidChangeEmitter.fire(new XC(void 0));else for(const a of r)this.languageService.isRegisteredLanguageId(a)&&(this.configurations.delete(a),this.onDidChangeEmitter.fire(new XC(a)))})),this._register(this._registry.onDidChange(i=>{this.configurations.delete(i.languageId),this.onDidChangeEmitter.fire(new XC(i.languageId))}))}register(e,t,n){return this._registry.register(e,t,n)}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=iY(e,this._registry,this.configurationService,this.languageService),this.configurations.set(e,t)),t}},"LanguageConfigurationService");Tx=nY([W2(0,rt),W2(1,Gt)],Tx);function iY(o,e,t,n){let i=e.getLanguageConfiguration(o);if(!i){if(!n.isRegisteredLanguageId(o))throw new Error(`Language id "${o}" is not configured nor known`);i=new Jg(o,{})}const s=sY(i.languageId,t),r=x5([i.underlyingConfig,s]);return new Jg(i.languageId,r)}u(iY,"computeConfig");const Lx={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function sY(o,e){const t=e.getValue(Lx.brackets,{overrideIdentifier:o}),n=e.getValue(Lx.colorizedBracketPairs,{overrideIdentifier:o});return{brackets:U2(t),colorizedBracketPairs:U2(n)}}u(sY,"getCustomizedLanguageConfig");function U2(o){if(Array.isArray(o))return o.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}u(U2,"validateBracketPairs");function T5(o,e,t){const n=o.getLineContent(e);let i=vt(n);return i.length>t-1&&(i=i.substring(0,t-1)),i}u(T5,"getIndentationAtPosition");function Tg(o,e,t){o.tokenization.forceTokenization(e);const n=o.tokenization.getLineTokens(e),i=typeof t>"u"?o.getLineMaxColumn(e)-1:t-1;return Fw(n,i)}u(Tg,"getScopedLineTokens");class L5{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const n=new xx(e,t,++this._order);return this._entries.push(n),this._resolved=null,He(()=>{for(let i=0;i<this._entries.length;i++)if(this._entries[i]===n){this._entries.splice(i,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new Jg(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(xx.cmp),x5(this._entries.map(e=>e.configuration)))}}u(L5,"ComposedLanguageConfiguration");function x5(o){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const t of o)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}u(x5,"combineLanguageConfigurations");class xx{constructor(e,t,n){this.configuration=e,this.priority=t,this.order=n}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}u(xx,"LanguageConfigurationContribution");class Ex{constructor(e){this.languageId=e}}u(Ex,"LanguageConfigurationChangeEvent");class E5 extends U{constructor(){super(),this._entries=new Map,this._onDidChange=this._register(new R),this.onDidChange=this._onDidChange.event,this._register(this.register(Js,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t,n=0){let i=this._entries.get(e);i||(i=new L5(e),this._entries.set(e,i));const s=i.register(t,n);return this._onDidChange.fire(new Ex(e)),He(()=>{s.dispose(),this._onDidChange.fire(new Ex(e))})}getLanguageConfiguration(e){const t=this._entries.get(e);return t?.getResolvedConfiguration()||null}}u(E5,"LanguageConfigurationRegistry");class Jg{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new Pd(this.underlyingConfig):null,this.comments=Jg._handleComments(this.underlyingConfig),this.characterPair=new w_(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||MD,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new u5(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new w5(e,this.underlyingConfig)}getWordDefinition(){return LO(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new a5(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new d5(this.brackets)),this._electricCharacter}onEnter(e,t,n,i){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,n,i):null}getAutoClosingPairs(){return new Q4(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(){return this.characterPair.getAutoCloseBeforeSet()}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){const t=e.comments;if(!t)return null;const n={};if(t.lineComment&&(n.lineCommentToken=t.lineComment),t.blockComment){const[i,s]=t.blockComment;n.blockCommentStartToken=i,n.blockCommentEndToken=s}return n}}u(Jg,"ResolvedLanguageConfiguration");nt(rn,Tx);const Qg=new class{clone(){return this}equals(o){return this===o}};function eA(o,e){return new Aw([new eb(0,"",o)],e)}u(eA,"nullTokenize");function Bw(o,e){const t=new Uint32Array(2);return t[0]=0,t[1]=(o<<0|0<<8|0<<11|1<<15|2<<24)>>>0,new b_(t,e===null?Qg:e)}u(Bw,"nullTokenizeEncoded");const Kt=Je("modelService");var Hs=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})},nm=globalThis&&globalThis.__asyncValues||function(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=o[Symbol.asyncIterator],t;return e?e.call(o):(o=typeof __values=="function"?__values(o):o[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=o[s]&&function(r){return new Promise(function(a,l){r=o[s](r),i(a,l,r.done,r.value)})}}function i(s,r,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},r)}};function kx(o){return!!o&&typeof o.then=="function"}u(kx,"isThenable$1");function On(o){const e=new ti,t=o(e.token),n=new Promise((i,s)=>{const r=e.token.onCancellationRequested(()=>{r.dispose(),e.dispose(),s(new El)});Promise.resolve(t).then(a=>{r.dispose(),e.dispose(),i(a)},a=>{r.dispose(),e.dispose(),s(a)})});return new class{cancel(){e.cancel()}then(i,s){return n.then(i,s)}catch(i){return this.then(void 0,i)}finally(i){return n.finally(i)}}}u(On,"createCancelablePromise");function tA(o,e,t){return new Promise((n,i)=>{const s=e.onCancellationRequested(()=>{s.dispose(),n(t)});o.then(n,i).finally(()=>s.dispose())})}u(tA,"raceCancellation");class k5{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=u(()=>{this.queuedPromise=null;const n=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,n},"onComplete");this.queuedPromise=new Promise(n=>{this.activePromise.then(t,t).then(n)})}return new Promise((t,n)=>{this.queuedPromise.then(t,n)})}return this.activePromise=e(),new Promise((t,n)=>{this.activePromise.then(i=>{this.activePromise=null,t(i)},i=>{this.activePromise=null,n(i)})})}}u(k5,"Throttler");const oY=u((o,e)=>{let t=!0;const n=setTimeout(()=>{t=!1,e()},o);return{isTriggered:()=>t,dispose:()=>{clearTimeout(n),t=!1}}},"timeoutDeferred"),rY=u(o=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,o())}),{isTriggered:()=>e,dispose:()=>{e=!1}}},"microtaskDeferred"),M5=Symbol("MicrotaskDelay");class pr{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((i,s)=>{this.doResolve=i,this.doReject=s}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const i=this.task;return this.task=null,i()}}));const n=u(()=>{var i;this.deferred=null,(i=this.doResolve)===null||i===void 0||i.call(this,null)},"fn");return this.deferred=t===M5?rY(n):oY(t,n),this.completionPromise}isTriggered(){var e;return!!(!((e=this.deferred)===null||e===void 0)&&e.isTriggered())}cancel(){var e;this.cancelTimeout(),this.completionPromise&&((e=this.doReject)===null||e===void 0||e.call(this,new El),this.completionPromise=null)}cancelTimeout(){var e;(e=this.deferred)===null||e===void 0||e.dispose(),this.deferred=null}dispose(){this.cancel()}}u(pr,"Delayer");class D5{constructor(e){this.delayer=new pr(e),this.throttler=new k5}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}dispose(){this.delayer.dispose()}}u(D5,"ThrottledDelayer");function xc(o,e){return e?new Promise((t,n)=>{const i=setTimeout(()=>{s.dispose(),t()},o),s=e.onCancellationRequested(()=>{clearTimeout(i),s.dispose(),n(new El)})}):On(t=>xc(o,t))}u(xc,"timeout");function vu(o,e=0){const t=setTimeout(o,e);return He(()=>clearTimeout(t))}u(vu,"disposableTimeout");function A5(o,e=n=>!!n,t=null){let n=0;const i=o.length,s=u(()=>{if(n>=i)return Promise.resolve(t);const r=o[n++];return Promise.resolve(r()).then(l=>e(l)?Promise.resolve(l):s())},"loop");return s()}u(A5,"first");class hs{constructor(e,t){this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}u(hs,"TimeoutTimer");class tp{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval(()=>{e()},t)}}u(tp,"IntervalTimer");class pt{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){var e;(e=this.runner)===null||e===void 0||e.call(this)}}u(pt,"RunOnceScheduler");let lb;(function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?lb=u(o=>{wO(()=>{if(e)return;const t=Date.now()+15;o(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,t-Date.now())}}))});let e=!1;return{dispose(){e||(e=!0)}}},"runWhenIdle"):lb=u((o,e)=>{const t=requestIdleCallback(o,typeof e=="number"?{timeout:e}:void 0);let n=!1;return{dispose(){n||(n=!0,cancelIdleCallback(t))}}},"runWhenIdle")})();class ol{constructor(e){this._didRun=!1,this._executor=()=>{try{this._value=e()}catch(t){this._error=t}finally{this._didRun=!0}},this._handle=lb(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}u(ol,"IdleValue");class Ww{constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}get isRejected(){return this.rejected}get isSettled(){return this.rejected||this.resolved}complete(e){return new Promise(t=>{this.completeCallback(e),this.resolved=!0,t()})}cancel(){new Promise(e=>{this.errorCallback(new El),this.rejected=!0,e()})}}u(Ww,"DeferredPromise");var Mx;(function(o){function e(n){return Hs(this,void 0,void 0,function*(){let i;const s=yield Promise.all(n.map(r=>r.then(a=>a,a=>{i||(i=a)})));if(typeof i<"u")throw i;return s})}u(e,"settled"),o.settled=e;function t(n){return new Promise((i,s)=>Hs(this,void 0,void 0,function*(){try{yield n(i,s)}catch(r){s(r)}}))}u(t,"withAsyncBody"),o.withAsyncBody=t})(Mx||(Mx={}));class nn{constructor(e){this._state=0,this._results=[],this._error=null,this._onStateChanged=new R,queueMicrotask(()=>Hs(this,void 0,void 0,function*(){const t={emitOne:n=>this.emitOne(n),emitMany:n=>this.emitMany(n),reject:n=>this.reject(n)};try{yield Promise.resolve(e(t)),this.resolve()}catch(n){this.reject(n)}finally{t.emitOne=void 0,t.emitMany=void 0,t.reject=void 0}}))}static fromArray(e){return new nn(t=>{t.emitMany(e)})}static fromPromise(e){return new nn(t=>Hs(this,void 0,void 0,function*(){t.emitMany(yield e)}))}static fromPromises(e){return new nn(t=>Hs(this,void 0,void 0,function*(){yield Promise.all(e.map(n=>Hs(this,void 0,void 0,function*(){return t.emitOne(yield n)})))}))}static merge(e){return new nn(t=>Hs(this,void 0,void 0,function*(){yield Promise.all(e.map(n=>{var i,s;return Hs(this,void 0,void 0,function*(){var r,a;try{for(i=nm(n);s=yield i.next(),!s.done;){const l=s.value;t.emitOne(l)}}catch(l){r={error:l}}finally{try{s&&!s.done&&(a=i.return)&&(yield a.call(i))}finally{if(r)throw r.error}}})}))}))}[Symbol.asyncIterator](){let e=0;return{next:()=>Hs(this,void 0,void 0,function*(){do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};yield fe.toPromise(this._onStateChanged.event)}while(!0)})}}static map(e,t){return new nn(n=>Hs(this,void 0,void 0,function*(){var i,s;try{for(var r=nm(e),a;a=yield r.next(),!a.done;){const l=a.value;n.emitOne(t(l))}}catch(l){i={error:l}}finally{try{a&&!a.done&&(s=r.return)&&(yield s.call(r))}finally{if(i)throw i.error}}}))}map(e){return nn.map(this,e)}static filter(e,t){return new nn(n=>Hs(this,void 0,void 0,function*(){var i,s;try{for(var r=nm(e),a;a=yield r.next(),!a.done;){const l=a.value;t(l)&&n.emitOne(l)}}catch(l){i={error:l}}finally{try{a&&!a.done&&(s=r.return)&&(yield s.call(r))}finally{if(i)throw i.error}}}))}filter(e){return nn.filter(this,e)}static coalesce(e){return nn.filter(e,t=>!!t)}coalesce(){return nn.coalesce(this)}static toPromise(e){var t,n,i,s;return Hs(this,void 0,void 0,function*(){const r=[];try{for(t=nm(e);n=yield t.next(),!n.done;){const a=n.value;r.push(a)}}catch(a){i={error:a}}finally{try{n&&!n.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}return r})}toPromise(){return nn.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}}u(nn,"AsyncIterableObject");nn.EMPTY=nn.fromArray([]);class I5 extends nn{constructor(e,t){super(t),this._source=e}cancel(){this._source.cancel()}}u(I5,"CancelableAsyncIterableObject");function aY(o){const e=new ti,t=o(e.token);return new I5(e,n=>Hs(this,void 0,void 0,function*(){var i,s;const r=e.token.onCancellationRequested(()=>{r.dispose(),e.dispose(),n.reject(new El)});try{try{for(var a=nm(t),l;l=yield a.next(),!l.done;){const c=l.value;if(e.token.isCancellationRequested)return;n.emitOne(c)}}catch(c){i={error:c}}finally{try{l&&!l.done&&(s=a.return)&&(yield s.call(a))}finally{if(i)throw i.error}}r.dispose(),e.dispose()}catch(c){r.dispose(),e.dispose(),n.reject(c)}}))}u(aY,"createCancelableAsyncIterable");const lY="$initialize";let G2=!1;function Dx(o){Xc&&(G2||(G2=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(o.message))}u(Dx,"logOnceWebWorkerWarning");class N5{constructor(e,t,n,i){this.vsWorker=e,this.req=t,this.method=n,this.args=i,this.type=0}}u(N5,"RequestMessage");class Ax{constructor(e,t,n,i){this.vsWorker=e,this.seq=t,this.res=n,this.err=i,this.type=1}}u(Ax,"ReplyMessage");class P5{constructor(e,t,n,i){this.vsWorker=e,this.req=t,this.eventName=n,this.arg=i,this.type=2}}u(P5,"SubscribeEventMessage");class R5{constructor(e,t,n){this.vsWorker=e,this.req=t,this.event=n,this.type=3}}u(R5,"EventMessage");class F5{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}u(F5,"UnsubscribeEventMessage");class O5{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t){const n=String(++this._lastSentReq);return new Promise((i,s)=>{this._pendingReplies[n]={resolve:i,reject:s},this._send(new N5(this._workerId,n,e,t))})}listen(e,t){let n=null;const i=new R({onFirstListenerAdd:()=>{n=String(++this._lastSentReq),this._pendingEmitters.set(n,i),this._send(new P5(this._workerId,n,e,t))},onLastListenerRemove:()=>{this._pendingEmitters.delete(n),this._send(new F5(this._workerId,n)),n=null}});return i.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}const t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let n=e.err;e.err.$isError&&(n=new Error,n.name=e.err.name,n.message=e.err.message,n.stack=e.err.stack),t.reject(n);return}t.resolve(e.res)}_handleRequestMessage(e){const t=e.req;this._handler.handleMessage(e.method,e.args).then(i=>{this._send(new Ax(this._workerId,t,i,void 0))},i=>{i.detail instanceof Error&&(i.detail=k2(i.detail)),this._send(new Ax(this._workerId,t,void 0,k2(i)))})}_handleSubscribeEventMessage(e){const t=e.req,n=this._handler.handleEvent(e.eventName,e.arg)(i=>{this._send(new R5(this._workerId,t,i))});this._pendingEvents.set(t,n)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){const t=[];if(e.type===0)for(let n=0;n<e.args.length;n++)e.args[n]instanceof ArrayBuffer&&t.push(e.args[n]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}u(O5,"SimpleWorkerProtocol");class V5 extends U{constructor(e,t,n){super();let i=null;this._worker=this._register(e.create("vs/base/common/worker/simpleWorker",c=>{this._protocol.handleMessage(c)},c=>{i?.(c)})),this._protocol=new O5({sendMessage:(c,d)=>{this._worker.postMessage(c,d)},handleMessage:(c,d)=>{if(typeof n[c]!="function")return Promise.reject(new Error("Missing method "+c+" on main thread host."));try{return Promise.resolve(n[c].apply(n,d))}catch(h){return Promise.reject(h)}},handleEvent:(c,d)=>{if(B5(c)){const h=n[c].call(n,d);if(typeof h!="function")throw new Error(`Missing dynamic event ${c} on main thread host.`);return h}if(H5(c)){const h=n[c];if(typeof h!="function")throw new Error(`Missing event ${c} on main thread host.`);return h}throw new Error(`Malformed event name ${c}`)}}),this._protocol.setWorkerId(this._worker.getId());let s=null;typeof on.require<"u"&&typeof on.require.getConfig=="function"?s=on.require.getConfig():typeof on.requirejs<"u"&&(s=on.requirejs.s.contexts._.config);const r=ID(n);this._onModuleLoaded=this._protocol.sendMessage(lY,[this._worker.getId(),JSON.parse(JSON.stringify(s)),t,r]);const a=u((c,d)=>this._request(c,d),"proxyMethodRequest"),l=u((c,d)=>this._protocol.listen(c,d),"proxyListen");this._lazyProxy=new Promise((c,d)=>{i=d,this._onModuleLoaded.then(h=>{c(cY(h,a,l))},h=>{d(h),this._onError("Worker failed to load "+t,h)})})}getProxyObject(){return this._lazyProxy}_request(e,t){return new Promise((n,i)=>{this._onModuleLoaded.then(()=>{this._protocol.sendMessage(e,t).then(n,i)},i)})}_onError(e,t){console.error(e),console.info(t)}}u(V5,"SimpleWorkerClient");function H5(o){return o[0]==="o"&&o[1]==="n"&&Br(o.charCodeAt(2))}u(H5,"propertyIsEvent");function B5(o){return/^onDynamic/.test(o)&&Br(o.charCodeAt(9))}u(B5,"propertyIsDynamicEvent");function cY(o,e,t){const n=u(r=>function(){const a=Array.prototype.slice.call(arguments,0);return e(r,a)},"createProxyMethod"),i=u(r=>function(a){return t(r,a)},"createProxyDynamicEvent"),s={};for(const r of o){if(B5(r)){s[r]=i(r);continue}if(H5(r)){s[r]=t(r,void 0);continue}s[r]=n(r)}return s}u(cY,"createProxyObject");var qS;const z2=(qS=window.trustedTypes)===null||qS===void 0?void 0:qS.createPolicy("defaultWorkerFactory",{createScriptURL:o=>o});function dY(o){if(on.MonacoEnvironment){if(typeof on.MonacoEnvironment.getWorker=="function")return on.MonacoEnvironment.getWorker("workerMain.js",o);if(typeof on.MonacoEnvironment.getWorkerUrl=="function"){const e=on.MonacoEnvironment.getWorkerUrl("workerMain.js",o);return new Worker(z2?z2.createScriptURL(e):e,{name:o})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}u(dY,"getWorker");function uY(o){return typeof o.then=="function"}u(uY,"isPromiseLike");class W5{constructor(e,t,n,i,s){this.id=t;const r=dY(n);uY(r)?this.worker=r:this.worker=Promise.resolve(r),this.postMessage(e,[]),this.worker.then(a=>{a.onmessage=function(l){i(l.data)},a.onmessageerror=s,typeof a.addEventListener=="function"&&a.addEventListener("error",s)})}getId(){return this.id}postMessage(e,t){var n;(n=this.worker)===null||n===void 0||n.then(i=>i.postMessage(e,t))}dispose(){var e;(e=this.worker)===null||e===void 0||e.then(t=>t.terminate()),this.worker=null}}u(W5,"WebWorker");class S_{constructor(e){this._label=e,this._webWorkerFailedBeforeError=!1}create(e,t,n){const i=++S_.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new W5(e,i,this._label||"anonymous"+i,t,s=>{Dx(s),this._webWorkerFailedBeforeError=s,n(s)})}}u(S_,"DefaultWorkerFactory");S_.LAST_WORKER_ID=0;class ka{constructor(e,t,n,i){this.originalStart=e,this.originalLength=t,this.modifiedStart=n,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}u(ka,"DiffChange");function nA(o){return Uw(o,0)}u(nA,"hash");function Uw(o,e){switch(typeof o){case"object":return o===null?Ka(349,e):Array.isArray(o)?gY(o,e):fY(o,e);case"string":return iA(o,e);case"boolean":return hY(o,e);case"number":return Ka(o,e);case"undefined":return Ka(937,e);default:return Ka(617,e)}}u(Uw,"doHash");function Ka(o,e){return(e<<5)-e+o|0}u(Ka,"numberHash");function hY(o,e){return Ka(o?433:863,e)}u(hY,"booleanHash");function iA(o,e){e=Ka(149417,e);for(let t=0,n=o.length;t<n;t++)e=Ka(o.charCodeAt(t),e);return e}u(iA,"stringHash");function gY(o,e){return e=Ka(104579,e),o.reduce((t,n)=>Uw(n,t),e)}u(gY,"arrayHash");function fY(o,e){return e=Ka(181387,e),Object.keys(o).sort().reduce((t,n)=>(t=iA(n,t),Uw(o[n],t)),e)}u(fY,"objectHash");function YS(o,e,t=32){const n=t-e,i=~((1<<n)-1);return(o<<e|(i&o)>>>n)>>>0}u(YS,"leftRotate$2");function K2(o,e=0,t=o.byteLength,n=0){for(let i=0;i<t;i++)o[e+i]=n}u(K2,"fill");function pY(o,e,t="0"){for(;o.length<e;)o=t+o;return o}u(pY,"leftPad");function Pp(o,e=32){return o instanceof ArrayBuffer?Array.from(new Uint8Array(o)).map(t=>t.toString(16).padStart(2,"0")).join(""):pY((o>>>0).toString(16),e/4)}u(Pp,"toHexString");class T_{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const n=this._buff;let i=this._buffLen,s=this._leftoverHighSurrogate,r,a;for(s!==0?(r=s,a=-1,s=0):(r=e.charCodeAt(0),a=0);;){let l=r;if(kn(r))if(a+1<t){const c=e.charCodeAt(a+1);_u(c)?(a++,l=UD(r,c)):l=65533}else{s=r;break}else _u(r)&&(l=65533);if(i=this._push(n,i,l),a++,a<t)r=e.charCodeAt(a);else break}this._buffLen=i,this._leftoverHighSurrogate=s}_push(e,t,n){return n<128?e[t++]=n:n<2048?(e[t++]=192|(n&1984)>>>6,e[t++]=128|(n&63)>>>0):n<65536?(e[t++]=224|(n&61440)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0):(e[t++]=240|(n&1835008)>>>18,e[t++]=128|(n&258048)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64+0],e[1]=e[64+1],e[2]=e[64+2]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),Pp(this._h0)+Pp(this._h1)+Pp(this._h2)+Pp(this._h3)+Pp(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,K2(this._buff,this._buffLen),this._buffLen>56&&(this._step(),K2(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=T_._bigBlock32,t=this._buffDV;for(let h=0;h<64;h+=4)e.setUint32(h,t.getUint32(h,!1),!1);for(let h=64;h<320;h+=4)e.setUint32(h,YS(e.getUint32(h-12,!1)^e.getUint32(h-32,!1)^e.getUint32(h-56,!1)^e.getUint32(h-64,!1),1),!1);let n=this._h0,i=this._h1,s=this._h2,r=this._h3,a=this._h4,l,c,d;for(let h=0;h<80;h++)h<20?(l=i&s|~i&r,c=1518500249):h<40?(l=i^s^r,c=1859775393):h<60?(l=i&s|i&r|s&r,c=2400959708):(l=i^s^r,c=3395469782),d=YS(n,5)+l+a+c+e.getUint32(h*4,!1)&4294967295,a=r,r=s,s=YS(i,30),i=n,n=d;this._h0=this._h0+n&4294967295,this._h1=this._h1+i&4294967295,this._h2=this._h2+s&4294967295,this._h3=this._h3+r&4294967295,this._h4=this._h4+a&4294967295}}u(T_,"StringSHA1");T_._bigBlock32=new DataView(new ArrayBuffer(320));class Ix{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let n=0,i=e.length;n<i;n++)t[n]=e.charCodeAt(n);return t}}u(Ix,"StringDiffSequence");function mY(o,e,t){return new Yo(new Ix(o),new Ix(e)).ComputeDiff(t).changes}u(mY,"stringDiff");class fd{static Assert(e,t){if(!e)throw new Error(t)}}u(fd,"Debug");class pd{static Copy(e,t,n,i,s){for(let r=0;r<s;r++)n[i+r]=e[t+r]}static Copy2(e,t,n,i,s){for(let r=0;r<s;r++)n[i+r]=e[t+r]}}u(pd,"MyArray");class Nx{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new ka(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}u(Nx,"DiffChangeHelper");class Yo{constructor(e,t,n=null){this.ContinueProcessingPredicate=n,this._originalSequence=e,this._modifiedSequence=t;const[i,s,r]=Yo._getElements(e),[a,l,c]=Yo._getElements(t);this._hasStrings=r&&c,this._originalStringElements=i,this._originalElementsOrHash=s,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(Yo._isStringArray(t)){const n=new Int32Array(t.length);for(let i=0,s=t.length;i<s;i++)n[i]=iA(t[i],0);return[t,n,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const n=Yo._getStrictElement(this._originalSequence,e),i=Yo._getStrictElement(this._modifiedSequence,t);return n===i}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,n,i,s){const r=[!1];let a=this.ComputeDiffRecursive(e,t,n,i,r);return s&&(a=this.PrettifyChanges(a)),{quitEarly:r[0],changes:a}}ComputeDiffRecursive(e,t,n,i,s){for(s[0]=!1;e<=t&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;t>=e&&i>=n&&this.ElementsAreEqual(t,i);)t--,i--;if(e>t||n>i){let h;return n<=i?(fd.Assert(e===t+1,"originalStart should only be one more than originalEnd"),h=[new ka(e,0,n,i-n+1)]):e<=t?(fd.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),h=[new ka(e,t-e+1,n,0)]):(fd.Assert(e===t+1,"originalStart should only be one more than originalEnd"),fd.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),h=[]),h}const r=[0],a=[0],l=this.ComputeRecursionPoint(e,t,n,i,r,a,s),c=r[0],d=a[0];if(l!==null)return l;if(!s[0]){const h=this.ComputeDiffRecursive(e,c,n,d,s);let g=[];return s[0]?g=[new ka(c+1,t-(c+1)+1,d+1,i-(d+1)+1)]:g=this.ComputeDiffRecursive(c+1,t,d+1,i,s),this.ConcatenateChanges(h,g)}return[new ka(e,t-e+1,n,i-n+1)]}WALKTRACE(e,t,n,i,s,r,a,l,c,d,h,g,f,p,_,v,C,w){let y=null,S=null,E=new Nx,k=t,T=n,x=f[0]-v[0]-i,M=-1073741824,F=this.m_forwardHistory.length-1;do{const V=x+e;V===k||V<T&&c[V-1]<c[V+1]?(h=c[V+1],p=h-x-i,h<M&&E.MarkNextChange(),M=h,E.AddModifiedElement(h+1,p),x=V+1-e):(h=c[V-1]+1,p=h-x-i,h<M&&E.MarkNextChange(),M=h-1,E.AddOriginalElement(h,p+1),x=V-1-e),F>=0&&(c=this.m_forwardHistory[F],e=c[0],k=1,T=c.length-1)}while(--F>=-1);if(y=E.getReverseChanges(),w[0]){let V=f[0]+1,G=v[0]+1;if(y!==null&&y.length>0){const j=y[y.length-1];V=Math.max(V,j.getOriginalEnd()),G=Math.max(G,j.getModifiedEnd())}S=[new ka(V,g-V+1,G,_-G+1)]}else{E=new Nx,k=r,T=a,x=f[0]-v[0]-l,M=1073741824,F=C?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const V=x+s;V===k||V<T&&d[V-1]>=d[V+1]?(h=d[V+1]-1,p=h-x-l,h>M&&E.MarkNextChange(),M=h+1,E.AddOriginalElement(h+1,p+1),x=V+1-s):(h=d[V-1],p=h-x-l,h>M&&E.MarkNextChange(),M=h,E.AddModifiedElement(h+1,p+1),x=V-1-s),F>=0&&(d=this.m_reverseHistory[F],s=d[0],k=1,T=d.length-1)}while(--F>=-1);S=E.getChanges()}return this.ConcatenateChanges(y,S)}ComputeRecursionPoint(e,t,n,i,s,r,a){let l=0,c=0,d=0,h=0,g=0,f=0;e--,n--,s[0]=0,r[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const p=t-e+(i-n),_=p+1,v=new Int32Array(_),C=new Int32Array(_),w=i-n,y=t-e,S=e-n,E=t-i,T=(y-w)%2===0;v[w]=e,C[y]=t,a[0]=!1;for(let x=1;x<=p/2+1;x++){let M=0,F=0;d=this.ClipDiagonalBound(w-x,x,w,_),h=this.ClipDiagonalBound(w+x,x,w,_);for(let G=d;G<=h;G+=2){G===d||G<h&&v[G-1]<v[G+1]?l=v[G+1]:l=v[G-1]+1,c=l-(G-w)-S;const j=l;for(;l<t&&c<i&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(v[G]=l,l+c>M+F&&(M=l,F=c),!T&&Math.abs(G-y)<=x-1&&l>=C[G])return s[0]=l,r[0]=c,j<=C[G]&&1447>0&&x<=1447+1?this.WALKTRACE(w,d,h,S,y,g,f,E,v,C,l,t,s,c,i,r,T,a):null}const V=(M-e+(F-n)-x)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(M,V))return a[0]=!0,s[0]=M,r[0]=F,V>0&&1447>0&&x<=1447+1?this.WALKTRACE(w,d,h,S,y,g,f,E,v,C,l,t,s,c,i,r,T,a):(e++,n++,[new ka(e,t-e+1,n,i-n+1)]);g=this.ClipDiagonalBound(y-x,x,y,_),f=this.ClipDiagonalBound(y+x,x,y,_);for(let G=g;G<=f;G+=2){G===g||G<f&&C[G-1]>=C[G+1]?l=C[G+1]-1:l=C[G-1],c=l-(G-y)-E;const j=l;for(;l>e&&c>n&&this.ElementsAreEqual(l,c);)l--,c--;if(C[G]=l,T&&Math.abs(G-w)<=x&&l<=v[G])return s[0]=l,r[0]=c,j>=v[G]&&1447>0&&x<=1447+1?this.WALKTRACE(w,d,h,S,y,g,f,E,v,C,l,t,s,c,i,r,T,a):null}if(x<=1447){let G=new Int32Array(h-d+2);G[0]=w-d+1,pd.Copy2(v,d,G,1,h-d+1),this.m_forwardHistory.push(G),G=new Int32Array(f-g+2),G[0]=y-g+1,pd.Copy2(C,g,G,1,f-g+1),this.m_reverseHistory.push(G)}}return this.WALKTRACE(w,d,h,S,y,g,f,E,v,C,l,t,s,c,i,r,T,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const n=e[t],i=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,s=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,r=n.originalLength>0,a=n.modifiedLength>0;for(;n.originalStart+n.originalLength<i&&n.modifiedStart+n.modifiedLength<s&&(!r||this.OriginalElementsAreEqual(n.originalStart,n.originalStart+n.originalLength))&&(!a||this.ModifiedElementsAreEqual(n.modifiedStart,n.modifiedStart+n.modifiedLength));){const c=this.ElementsAreStrictEqual(n.originalStart,n.modifiedStart);if(this.ElementsAreStrictEqual(n.originalStart+n.originalLength,n.modifiedStart+n.modifiedLength)&&!c)break;n.originalStart++,n.modifiedStart++}const l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const n=e[t];let i=0,s=0;if(t>0){const h=e[t-1];i=h.originalStart+h.originalLength,s=h.modifiedStart+h.modifiedLength}const r=n.originalLength>0,a=n.modifiedLength>0;let l=0,c=this._boundaryScore(n.originalStart,n.originalLength,n.modifiedStart,n.modifiedLength);for(let h=1;;h++){const g=n.originalStart-h,f=n.modifiedStart-h;if(g<i||f<s||r&&!this.OriginalElementsAreEqual(g,g+n.originalLength)||a&&!this.ModifiedElementsAreEqual(f,f+n.modifiedLength))break;const _=(g===i&&f===s?5:0)+this._boundaryScore(g,n.originalLength,f,n.modifiedLength);_>c&&(c=_,l=h)}n.originalStart-=l,n.modifiedStart-=l;const d=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],d)){e[t-1]=d[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,n=e.length;t<n;t++){const i=e[t-1],s=e[t],r=s.originalStart-i.originalStart-i.originalLength,a=i.originalStart,l=s.originalStart+s.originalLength,c=l-a,d=i.modifiedStart,h=s.modifiedStart+s.modifiedLength,g=h-d;if(r<5&&c<20&&g<20){const f=this._findBetterContiguousSequence(a,c,d,g,r);if(f){const[p,_]=f;(p!==i.originalStart+i.originalLength||_!==i.modifiedStart+i.modifiedLength)&&(i.originalLength=p-i.originalStart,i.modifiedLength=_-i.modifiedStart,s.originalStart=p+r,s.modifiedStart=_+r,s.originalLength=l-s.originalStart,s.modifiedLength=h-s.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,n,i,s){if(t<s||i<s)return null;const r=e+t-s+1,a=n+i-s+1;let l=0,c=0,d=0;for(let h=e;h<r;h++)for(let g=n;g<a;g++){const f=this._contiguousSequenceScore(h,g,s);f>0&&f>l&&(l=f,c=h,d=g)}return l>0?[c,d]:null}_contiguousSequenceScore(e,t,n){let i=0;for(let s=0;s<n;s++){if(!this.ElementsAreEqual(e+s,t+s))return 0;i+=this._originalStringElements[e+s].length}return i}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._OriginalIsBoundary(n-1)||this._OriginalIsBoundary(n))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._ModifiedIsBoundary(n-1)||this._ModifiedIsBoundary(n))return!0}return!1}_boundaryScore(e,t,n,i){const s=this._OriginalRegionIsBoundary(e,t)?1:0,r=this._ModifiedRegionIsBoundary(n,i)?1:0;return s+r}ConcatenateChanges(e,t){const n=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],n)){const i=new Array(e.length+t.length-1);return pd.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],pd.Copy(t,1,i,e.length,t.length-1),i}else{const i=new Array(e.length+t.length);return pd.Copy(e,0,i,0,e.length),pd.Copy(t,0,i,e.length,t.length),i}}ChangesOverlap(e,t,n){if(fd.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),fd.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const i=e.originalStart;let s=e.originalLength;const r=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(s=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),n[0]=new ka(i,s,r,a),!0}else return n[0]=null,!1}ClipDiagonalBound(e,t,n,i){if(e>=0&&e<i)return e;const s=n,r=i-n-1,a=t%2===0;if(e<0){const l=s%2===0;return a===l?0:1}else{const l=r%2===0;return a===l?i-1:i-2}}}u(Yo,"LcsDiff");const bY=3;function U5(o,e,t,n){return new Yo(o,e,t).ComputeDiff(n)}u(U5,"computeDiff");class Px{constructor(e){const t=[],n=[];for(let i=0,s=e.length;i<s;i++)t[i]=Rx(e[i],1),n[i]=Fx(e[i],1);this.lines=e,this._startColumns=t,this._endColumns=n}getElements(){const e=[];for(let t=0,n=this.lines.length;t<n;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,n){const i=[],s=[],r=[];let a=0;for(let l=t;l<=n;l++){const c=this.lines[l],d=e?this._startColumns[l]:1,h=e?this._endColumns[l]:c.length+1;for(let g=d;g<h;g++)i[a]=c.charCodeAt(g-1),s[a]=l+1,r[a]=g,a++;!e&&l<n&&(i[a]=10,s[a]=l+1,r[a]=c.length+1,a++)}return new G5(i,s,r)}}u(Px,"LineSequence");class G5{constructor(e,t,n){this._charCodes=e,this._lineNumbers=t,this._columns=n}toString(){return"["+this._charCodes.map((e,t)=>(e===10?"\\n":String.fromCharCode(e))+`-(${this._lineNumbers[t]},${this._columns[t]})`).join(", ")+"]"}_assertIndex(e,t){if(e<0||e>=t.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(e){return e>0&&e===this._lineNumbers.length?this.getEndLineNumber(e-1):(this._assertIndex(e,this._lineNumbers),this._lineNumbers[e])}getEndLineNumber(e){return e===-1?this.getStartLineNumber(e+1):(this._assertIndex(e,this._lineNumbers),this._charCodes[e]===10?this._lineNumbers[e]+1:this._lineNumbers[e])}getStartColumn(e){return e>0&&e===this._columns.length?this.getEndColumn(e-1):(this._assertIndex(e,this._columns),this._columns[e])}getEndColumn(e){return e===-1?this.getStartColumn(e+1):(this._assertIndex(e,this._columns),this._charCodes[e]===10?1:this._columns[e]+1)}}u(G5,"CharSequence");class ef{constructor(e,t,n,i,s,r,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=n,this.originalEndColumn=i,this.modifiedStartLineNumber=s,this.modifiedStartColumn=r,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,n){const i=t.getStartLineNumber(e.originalStart),s=t.getStartColumn(e.originalStart),r=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1),l=n.getStartLineNumber(e.modifiedStart),c=n.getStartColumn(e.modifiedStart),d=n.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),h=n.getEndColumn(e.modifiedStart+e.modifiedLength-1);return new ef(i,s,r,a,l,c,d,h)}}u(ef,"CharChange");function _Y(o){if(o.length<=1)return o;const e=[o[0]];let t=e[0];for(let n=1,i=o.length;n<i;n++){const s=o[n],r=s.originalStart-(t.originalStart+t.originalLength),a=s.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(r,a)<bY?(t.originalLength=s.originalStart+s.originalLength-t.originalStart,t.modifiedLength=s.modifiedStart+s.modifiedLength-t.modifiedStart):(e.push(s),t=s)}return e}u(_Y,"postProcessCharChanges");class Lg{constructor(e,t,n,i,s){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=n,this.modifiedEndLineNumber=i,this.charChanges=s}static createFromDiffResult(e,t,n,i,s,r,a){let l,c,d,h,g;if(t.originalLength===0?(l=n.getStartLineNumber(t.originalStart)-1,c=0):(l=n.getStartLineNumber(t.originalStart),c=n.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(d=i.getStartLineNumber(t.modifiedStart)-1,h=0):(d=i.getStartLineNumber(t.modifiedStart),h=i.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),r&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&s()){const f=n.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),p=i.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);if(f.getElements().length>0&&p.getElements().length>0){let _=U5(f,p,s,!0).changes;a&&(_=_Y(_)),g=[];for(let v=0,C=_.length;v<C;v++)g.push(ef.createFromDiffChange(_[v],f,p))}}return new Lg(l,c,d,h,g)}}u(Lg,"LineChange");class z5{constructor(e,t,n){this.shouldComputeCharChanges=n.shouldComputeCharChanges,this.shouldPostProcessCharChanges=n.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=n.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=n.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new Px(e),this.modified=new Px(t),this.continueLineDiff=j2(n.maxComputationTime),this.continueCharDiff=j2(n.maxComputationTime===0?0:Math.min(n.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};const e=U5(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,n=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let l=0,c=t.length;l<c;l++)a.push(Lg.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:n,changes:a}}const i=[];let s=0,r=0;for(let a=-1,l=t.length;a<l;a++){const c=a+1<l?t[a+1]:null,d=c?c.originalStart:this.originalLines.length,h=c?c.modifiedStart:this.modifiedLines.length;for(;s<d&&r<h;){const g=this.originalLines[s],f=this.modifiedLines[r];if(g!==f){{let p=Rx(g,1),_=Rx(f,1);for(;p>1&&_>1;){const v=g.charCodeAt(p-2),C=f.charCodeAt(_-2);if(v!==C)break;p--,_--}(p>1||_>1)&&this._pushTrimWhitespaceCharChange(i,s+1,1,p,r+1,1,_)}{let p=Fx(g,1),_=Fx(f,1);const v=g.length+1,C=f.length+1;for(;p<v&&_<C;){const w=g.charCodeAt(p-1),y=g.charCodeAt(_-1);if(w!==y)break;p++,_++}(p<v||_<C)&&this._pushTrimWhitespaceCharChange(i,s+1,p,v,r+1,_,C)}}s++,r++}c&&(i.push(Lg.createFromDiffResult(this.shouldIgnoreTrimWhitespace,c,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),s+=c.originalLength,r+=c.modifiedLength)}return{quitEarly:n,changes:i}}_pushTrimWhitespaceCharChange(e,t,n,i,s,r,a){if(this._mergeTrimWhitespaceCharChange(e,t,n,i,s,r,a))return;let l;this.shouldComputeCharChanges&&(l=[new ef(t,n,t,i,s,r,s,a)]),e.push(new Lg(t,t,s,s,l))}_mergeTrimWhitespaceCharChange(e,t,n,i,s,r,a){const l=e.length;if(l===0)return!1;const c=e[l-1];return c.originalEndLineNumber===0||c.modifiedEndLineNumber===0?!1:c.originalEndLineNumber+1===t&&c.modifiedEndLineNumber+1===s?(c.originalEndLineNumber=t,c.modifiedEndLineNumber=s,this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new ef(t,n,t,i,s,r,s,a)),!0):!1}}u(z5,"DiffComputer");function Rx(o,e){const t=Di(o);return t===-1?e:t+1}u(Rx,"getFirstNonBlankColumn");function Fx(o,e){const t=Jr(o);return t===-1?e:t+2}u(Fx,"getLastNonBlankColumn");function j2(o){if(o===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<o}u(j2,"createContinueProcessingPredicate");function t1(o){return o<0?0:o>255?255:o|0}u(t1,"toUint8");function Ph(o){return o<0?0:o>4294967295?4294967295:o|0}u(Ph,"toUint32");class K5{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=Ph(e);const n=this.values,i=this.prefixSum,s=t.length;return s===0?!1:(this.values=new Uint32Array(n.length+s),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+s),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=Ph(e),t=Ph(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=Ph(e),t=Ph(t);const n=this.values,i=this.prefixSum;if(e>=n.length)return!1;const s=n.length-e;return t>=s&&(t=s),t===0?!1:(this.values=new Uint32Array(n.length-t),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=Ph(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let n=t;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,n=this.values.length-1,i=0,s=0,r=0;for(;t<=n;)if(i=t+(n-t)/2|0,s=this.prefixSum[i],r=s-this.values[i],e<r)n=i-1;else if(e>=s)t=i+1;else break;return new sA(i,e-r)}}u(K5,"PrefixSumComputer");class j5{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const t=this._indexBySum[e],n=t>0?this._prefixSum[t-1]:0;return new sA(t,e-n)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=Tw(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){const n=this._values[e],i=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=i+n;for(let s=0;s<n;s++)this._indexBySum[i+s]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}}u(j5,"ConstantTimePrefixSumComputer");class sA{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}u(sA,"PrefixSumIndexOfResult");class $5{constructor(e,t,n,i){this._uri=e,this._lines=t,this._eol=n,this._versionId=i,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const n of t)this._acceptDeleteRange(n.range),this._acceptInsertText(new H(n.range.startLineNumber,n.range.startColumn),n.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,n=new Uint32Array(t);for(let i=0;i<t;i++)n[i]=this._lines[i].length+e;this._lineStarts=new K5(n)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;const n=sa(t);if(n.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}n[n.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]);const i=new Uint32Array(n.length-1);for(let s=1;s<n.length;s++)this._lines.splice(e.lineNumber+s-1,0,n[s]),i[s-1]=n[s].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,i)}}u($5,"MirrorTextModel");class oh{constructor(e){const t=t1(e);this._defaultValue=t,this._asciiMap=oh._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){const t=new Uint8Array(256);for(let n=0;n<256;n++)t[n]=e;return t}set(e,t){const n=t1(t);e>=0&&e<256?this._asciiMap[e]=n:this._map.set(e,n)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}}u(oh,"CharacterClassifier");class Rd{constructor(){this._actual=new oh(0)}add(e){this._actual.set(e,1)}has(e){return this._actual.get(e)===1}}u(Rd,"CharacterSet");class q5{constructor(e,t,n){const i=new Uint8Array(e*t);for(let s=0,r=e*t;s<r;s++)i[s]=n;this._data=i,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,n){this._data[e*this.cols+t]=n}}u(q5,"Uint8Matrix");class Y5{constructor(e){let t=0,n=0;for(let s=0,r=e.length;s<r;s++){const[a,l,c]=e[s];l>t&&(t=l),a>n&&(n=a),c>n&&(n=c)}t++,n++;const i=new q5(n,t,0);for(let s=0,r=e.length;s<r;s++){const[a,l,c]=e[s];i.set(a,l,c)}this._states=i,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}u(Y5,"StateMachine");let XS=null;function vY(){return XS===null&&(XS=new Y5([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),XS}u(vY,"getStateMachine");let Rp=null;function CY(){if(Rp===null){Rp=new oh(0);const o=` 	<>'"、。｡､，．：；‘〈「『〔（［｛｢｣｝］）〕』」〉’｀～…`;for(let t=0;t<o.length;t++)Rp.set(o.charCodeAt(t),1);const e=".,;:";for(let t=0;t<e.length;t++)Rp.set(e.charCodeAt(t),2)}return Rp}u(CY,"getClassifier");class cb{static _createLink(e,t,n,i,s){let r=s-1;do{const a=t.charCodeAt(r);if(e.get(a)!==2)break;r--}while(r>i);if(i>0){const a=t.charCodeAt(i-1),l=t.charCodeAt(r);(a===40&&l===41||a===91&&l===93||a===123&&l===125)&&r--}return{range:{startLineNumber:n,startColumn:i+1,endLineNumber:n,endColumn:r+2},url:t.substring(i,r+1)}}static computeLinks(e,t=vY()){const n=CY(),i=[];for(let s=1,r=e.getLineCount();s<=r;s++){const a=e.getLineContent(s),l=a.length;let c=0,d=0,h=0,g=1,f=!1,p=!1,_=!1,v=!1;for(;c<l;){let C=!1;const w=a.charCodeAt(c);if(g===13){let y;switch(w){case 40:f=!0,y=0;break;case 41:y=f?0:1;break;case 91:_=!0,p=!0,y=0;break;case 93:_=!1,y=p?0:1;break;case 123:v=!0,y=0;break;case 125:y=v?0:1;break;case 39:y=h===39?1:0;break;case 34:y=h===34?1:0;break;case 96:y=h===96?1:0;break;case 42:y=h===42?1:0;break;case 124:y=h===124?1:0;break;case 32:y=_?0:1;break;default:y=n.get(w)}y===1&&(i.push(cb._createLink(n,a,s,d,c)),C=!0)}else if(g===12){let y;w===91?(p=!0,y=0):y=n.get(w),y===1?C=!0:g=13}else g=t.nextState(g,w),g===0&&(C=!0);C&&(g=1,f=!1,p=!1,v=!1,d=c+1,h=w),c++}g===13&&i.push(cb._createLink(n,a,s,d,l))}return i}}u(cb,"LinkComputer");function wY(o){return!o||typeof o.getLineCount!="function"||typeof o.getLineContent!="function"?[]:cb.computeLinks(o)}u(wY,"computeLinks");class n1{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,n,i,s){if(e&&t){const r=this.doNavigateValueSet(t,s);if(r)return{range:e,value:r}}if(n&&i){const r=this.doNavigateValueSet(i,s);if(r)return{range:n,value:r}}return null}doNavigateValueSet(e,t){const n=this.numberReplace(e,t);return n!==null?n:this.textReplace(e,t)}numberReplace(e,t){const n=Math.pow(10,e.length-(e.lastIndexOf(".")+1));let i=Number(e);const s=parseFloat(e);return!isNaN(i)&&!isNaN(s)&&i===s?i===0&&!t?null:(i=Math.floor(i*n),i+=t?n:-n,String(i/n)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,n){let i=null;for(let s=0,r=e.length;i===null&&s<r;s++)i=this.valueSetReplace(e[s],t,n);return i}valueSetReplace(e,t,n){let i=e.indexOf(t);return i>=0?(i+=n?1:-1,i<0?i=e.length-1:i%=e.length,e[i]):null}}u(n1,"BasicInplaceReplace");n1.INSTANCE=new n1;class X5 extends oh{constructor(e){super(0);for(let t=0,n=e.length;t<n;t++)this.set(e.charCodeAt(t),2);this.set(32,1),this.set(9,1)}}u(X5,"WordCharacterClassifier");function yY(o){const e={};return t=>(e.hasOwnProperty(t)||(e[t]=o(t)),e[t])}u(yY,"once");const so=yY(o=>new X5(o)),SY=999;class Zl{constructor(e,t,n,i){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=i}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=TY(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=V4(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new Z4(t,this.wordSeparators?so(this.wordSeparators):null,n?this.searchString:null)}}u(Zl,"SearchParams");function TY(o){if(!o||o.length===0)return!1;for(let e=0,t=o.length;e<t;e++){const n=o.charCodeAt(e);if(n===10)return!0;if(n===92){if(e++,e>=t)break;const i=o.charCodeAt(e);if(i===110||i===114||i===87)return!0}}return!1}u(TY,"isMultilineRegexSource");function Td(o,e,t){if(!t)return new Xg(o,null);const n=[];for(let i=0,s=e.length;i<s;i++)n[i]=e[i];return new Xg(o,n)}u(Td,"createFindMatch");class Ox{constructor(e){const t=[];let n=0;for(let i=0,s=e.length;i<s;i++)e.charCodeAt(i)===10&&(t[n++]=i);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let n=0,i=t.length-1;if(i===-1||e<=t[0])return 0;for(;n<i;){const s=n+((i-n)/2>>0);t[s]>=e?i=s-1:t[s+1]>=e?(n=s,i=s):n=s+1}return n+1}}u(Ox,"LineFeedCounter");class im{static findMatches(e,t,n,i,s){const r=t.parseSearchRequest();return r?r.regex.multiline?this._doFindMatchesMultiline(e,n,new Fd(r.wordSeparators,r.regex),i,s):this._doFindMatchesLineByLine(e,n,r,i,s):[]}static _getMultilineMatchRange(e,t,n,i,s,r){let a,l=0;i?(l=i.findLineFeedCountBeforeOffset(s),a=t+s+l):a=t+s;let c;if(i){const f=i.findLineFeedCountBeforeOffset(s+r.length)-l;c=a+r.length+f}else c=a+r.length;const d=e.getPositionAt(a),h=e.getPositionAt(c);return new L(d.lineNumber,d.column,h.lineNumber,h.column)}static _doFindMatchesMultiline(e,t,n,i,s){const r=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new Ox(a):null,c=[];let d=0,h;for(n.reset(0);h=n.next(a);)if(c[d++]=Td(this._getMultilineMatchRange(e,r,a,l,h.index,h[0]),h,i),d>=s)return c;return c}static _doFindMatchesLineByLine(e,t,n,i,s){const r=[];let a=0;if(t.startLineNumber===t.endLineNumber){const c=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(n,c,t.startLineNumber,t.startColumn-1,a,r,i,s),r}const l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(n,l,t.startLineNumber,t.startColumn-1,a,r,i,s);for(let c=t.startLineNumber+1;c<t.endLineNumber&&a<s;c++)a=this._findMatchesInLine(n,e.getLineContent(c),c,0,a,r,i,s);if(a<s){const c=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(n,c,t.endLineNumber,0,a,r,i,s)}return r}static _findMatchesInLine(e,t,n,i,s,r,a,l){const c=e.wordSeparators;if(!a&&e.simpleSearch){const g=e.simpleSearch,f=g.length,p=t.length;let _=-f;for(;(_=t.indexOf(g,_+f))!==-1;)if((!c||oA(c,t,p,_,f))&&(r[s++]=new Xg(new L(n,_+1+i,n,_+1+f+i),null),s>=l))return s;return s}const d=new Fd(e.wordSeparators,e.regex);let h;d.reset(0);do if(h=d.next(t),h&&(r[s++]=Td(new L(n,h.index+1+i,n,h.index+1+h[0].length+i),h,a),s>=l))return s;while(h);return s}static findNextMatch(e,t,n,i){const s=t.parseSearchRequest();if(!s)return null;const r=new Fd(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindNextMatchMultiline(e,n,r,i):this._doFindNextMatchLineByLine(e,n,r,i)}static _doFindNextMatchMultiline(e,t,n,i){const s=new H(t.lineNumber,1),r=e.getOffsetAt(s),a=e.getLineCount(),l=e.getValueInRange(new L(s.lineNumber,s.column,a,e.getLineMaxColumn(a)),1),c=e.getEOL()===`\r
`?new Ox(l):null;n.reset(t.column-1);const d=n.next(l);return d?Td(this._getMultilineMatchRange(e,r,l,c,d.index,d[0]),d,i):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new H(1,1),n,i):null}static _doFindNextMatchLineByLine(e,t,n,i){const s=e.getLineCount(),r=t.lineNumber,a=e.getLineContent(r),l=this._findFirstMatchInLine(n,a,r,t.column,i);if(l)return l;for(let c=1;c<=s;c++){const d=(r+c-1)%s,h=e.getLineContent(d+1),g=this._findFirstMatchInLine(n,h,d+1,1,i);if(g)return g}return null}static _findFirstMatchInLine(e,t,n,i,s){e.reset(i-1);const r=e.next(t);return r?Td(new L(n,r.index+1,n,r.index+1+r[0].length),r,s):null}static findPreviousMatch(e,t,n,i){const s=t.parseSearchRequest();if(!s)return null;const r=new Fd(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindPreviousMatchMultiline(e,n,r,i):this._doFindPreviousMatchLineByLine(e,n,r,i)}static _doFindPreviousMatchMultiline(e,t,n,i){const s=this._doFindMatchesMultiline(e,new L(1,1,t.lineNumber,t.column),n,i,10*SY);if(s.length>0)return s[s.length-1];const r=e.getLineCount();return t.lineNumber!==r||t.column!==e.getLineMaxColumn(r)?this._doFindPreviousMatchMultiline(e,new H(r,e.getLineMaxColumn(r)),n,i):null}static _doFindPreviousMatchLineByLine(e,t,n,i){const s=e.getLineCount(),r=t.lineNumber,a=e.getLineContent(r).substring(0,t.column-1),l=this._findLastMatchInLine(n,a,r,i);if(l)return l;for(let c=1;c<=s;c++){const d=(s+r-c-1)%s,h=e.getLineContent(d+1),g=this._findLastMatchInLine(n,h,d+1,i);if(g)return g}return null}static _findLastMatchInLine(e,t,n,i){let s=null,r;for(e.reset(0);r=e.next(t);)s=Td(new L(n,r.index+1,n,r.index+1+r[0].length),r,i);return s}}u(im,"TextModelSearch");function LY(o,e,t,n,i){if(n===0)return!0;const s=e.charCodeAt(n-1);if(o.get(s)!==0||s===13||s===10)return!0;if(i>0){const r=e.charCodeAt(n);if(o.get(r)!==0)return!0}return!1}u(LY,"leftIsWordBounday");function xY(o,e,t,n,i){if(n+i===t)return!0;const s=e.charCodeAt(n+i);if(o.get(s)!==0||s===13||s===10)return!0;if(i>0){const r=e.charCodeAt(n+i-1);if(o.get(r)!==0)return!0}return!1}u(xY,"rightIsWordBounday");function oA(o,e,t,n,i){return LY(o,e,t,n,i)&&xY(o,e,t,n,i)}u(oA,"isValidMatch");class Fd{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let n;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(n=this._searchRegex.exec(e),!n))return null;const i=n.index,s=n[0].length;if(i===this._prevMatchStartIndex&&s===this._prevMatchLength){if(s===0){J0(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=i,this._prevMatchLength=s,!this._wordSeparators||oA(this._wordSeparators,e,t,i,s))return n}while(n);return null}}u(Fd,"Searcher");class Gw{static computeUnicodeHighlights(e,t,n){const i=n?n.startLineNumber:1,s=n?n.endLineNumber:e.getLineCount(),r=new Vx(t),a=r.getCandidateCodePoints();let l;a==="allNonBasicAscii"?l=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):l=new RegExp(`${EY(Array.from(a))}`,"g");const c=new Fd(null,l),d=[];let h=!1,g,f=0,p=0,_=0;e:for(let v=i,C=s;v<=C;v++){const w=e.getLineContent(v),y=w.length;c.reset(0);do if(g=c.next(w),g){let S=g.index,E=g.index+g[0].length;if(S>0){const M=w.charCodeAt(S-1);kn(M)&&S--}if(E+1<y){const M=w.charCodeAt(E-1);kn(M)&&E++}const k=w.substring(S,E),T=Jm(S+1,MD,w,0),x=r.shouldHighlightNonBasicASCII(k,T?T.word:null);if(x!==0){x===3?f++:x===2?p++:x===1?_++:Lw();const M=1e3;if(d.length>=M){h=!0;break e}d.push(new L(v,S+1,v,E+1))}}while(g)}return{ranges:d,hasMore:h,ambiguousCharacterCount:f,invisibleCharacterCount:p,nonBasicAsciiCharacterCount:_}}static computeUnicodeHighlightReason(e,t){const n=new Vx(t);switch(n.shouldHighlightNonBasicASCII(e,null)){case 0:return null;case 2:return{kind:1};case 3:{const s=e.codePointAt(0),r=n.ambiguousCharacters.getPrimaryConfusable(s),a=no.getLocales().filter(l=>!no.getInstance(new Set([...t.allowedLocales,l])).isAmbiguous(s));return{kind:0,confusableWith:String.fromCodePoint(r),notAmbiguousInLocales:a}}case 1:return{kind:2}}}}u(Gw,"UnicodeTextModelHighlighter");function EY(o,e){return`[${As(o.map(n=>String.fromCodePoint(n)).join(""))}]`}u(EY,"buildRegExpCharClassExpr");class Vx{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=no.getInstance(new Set(e.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const t of hr.codePoints)$2(String.fromCodePoint(t))||e.add(t);if(this.options.ambiguousCharacters)for(const t of this.ambiguousCharacters.getConfusableCodePoints())e.add(t);for(const t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e,t){const n=e.codePointAt(0);if(this.allowedCodePoints.has(n))return 0;if(this.options.nonBasicASCII)return 1;let i=!1,s=!1;if(t)for(const r of t){const a=r.codePointAt(0),l=Pw(r);i=i||l,!l&&!this.ambiguousCharacters.isAmbiguous(a)&&!hr.isInvisibleCharacter(a)&&(s=!0)}return!i&&s?0:this.options.invisibleCharacters&&!$2(e)&&hr.isInvisibleCharacter(n)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(n)?3:0}}u(Vx,"CodePointHighlighter");function $2(o){return o===" "||o===`
`||o==="	"}u($2,"isAllowedInvisibleCharacter");var ad=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class Z5 extends $5{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){const n=Jm(e.column,LO(t),this._lines[e.lineNumber-1],0);return n?new L(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn):null}words(e){const t=this._lines,n=this._wordenize.bind(this);let i=0,s="",r=0,a=[];return{*[Symbol.iterator](){for(;;)if(r<a.length){const l=s.substring(a[r].start,a[r].end);r+=1,yield l}else if(i<t.length)s=t[i],a=n(s,e),r=0,i+=1;else break}}}getLineWords(e,t){const n=this._lines[e-1],i=this._wordenize(n,t),s=[];for(const r of i)s.push({word:n.substring(r.start,r.end),startColumn:r.start+1,endColumn:r.end+1});return s}_wordenize(e,t){const n=[];let i;for(t.lastIndex=0;(i=t.exec(e))&&i[0].length!==0;)n.push({start:i.index,end:i.index+i[0].length});return n}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);const t=this._eol,n=e.startLineNumber-1,i=e.endLineNumber-1,s=[];s.push(this._lines[n].substring(e.startColumn-1));for(let r=n+1;r<i;r++)s.push(this._lines[r]);return s.push(this._lines[i].substring(0,e.endColumn-1)),s.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();const t=this._lineStarts.getIndexOf(e),n=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,n)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),n=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||n.lineNumber!==e.endLineNumber||n.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column}:e}_validatePosition(e){if(!H.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:n}=e,i=!1;if(t<1)t=1,n=1,i=!0;else if(t>this._lines.length)t=this._lines.length,n=this._lines[t-1].length+1,i=!0;else{const s=this._lines[t-1].length+1;n<1?(n=1,i=!0):n>s&&(n=s,i=!0)}return i?{lineNumber:t,column:n}:e}}u(Z5,"MirrorModel");class rl{constructor(e,t){this._host=e,this._models=Object.create(null),this._foreignModuleFactory=t,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(e){return this._models[e]}_getModels(){const e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}acceptNewModel(e){this._models[e.url]=new Z5(be.parse(e.url),e.lines,e.EOL,e.versionId)}acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}acceptRemovedModel(e){this._models[e]&&delete this._models[e]}computeUnicodeHighlights(e,t,n){return ad(this,void 0,void 0,function*(){const i=this._getModel(e);return i?Gw.computeUnicodeHighlights(i,t,n):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}})}computeDiff(e,t,n,i){return ad(this,void 0,void 0,function*(){const s=this._getModel(e),r=this._getModel(t);return!s||!r?null:rl.computeDiff(s,r,n,i)})}static computeDiff(e,t,n,i){const s=e.getLinesContent(),r=t.getLinesContent(),l=new z5(s,r,{shouldComputeCharChanges:!0,shouldPostProcessCharChanges:!0,shouldIgnoreTrimWhitespace:n,shouldMakePrettyDiff:!0,maxComputationTime:i}).computeDiff(),c=l.changes.length>0?!1:this._modelsAreIdentical(e,t);return{quitEarly:l.quitEarly,identical:c,changes:l.changes}}static _modelsAreIdentical(e,t){const n=e.getLineCount(),i=t.getLineCount();if(n!==i)return!1;for(let s=1;s<=n;s++){const r=e.getLineContent(s),a=t.getLineContent(s);if(r!==a)return!1}return!0}computeMoreMinimalEdits(e,t){return ad(this,void 0,void 0,function*(){const n=this._getModel(e);if(!n)return t;const i=[];let s;t=t.slice(0).sort((r,a)=>{if(r.range&&a.range)return L.compareRangesUsingStarts(r.range,a.range);const l=r.range?0:1,c=a.range?0:1;return l-c});for(let{range:r,text:a,eol:l}of t){if(typeof l=="number"&&(s=l),L.isEmpty(r)&&!a)continue;const c=n.getValueInRange(r);if(a=a.replace(/\r\n|\n|\r/g,n.eol),c===a)continue;if(Math.max(a.length,c.length)>rl._diffLimit){i.push({range:r,text:a});continue}const d=mY(c,a,!1),h=n.offsetAt(L.lift(r).getStartPosition());for(const g of d){const f=n.positionAt(h+g.originalStart),p=n.positionAt(h+g.originalStart+g.originalLength),_={text:a.substr(g.modifiedStart,g.modifiedLength),range:{startLineNumber:f.lineNumber,startColumn:f.column,endLineNumber:p.lineNumber,endColumn:p.column}};n.getValueInRange(_.range)!==_.text&&i.push(_)}}return typeof s=="number"&&i.push({eol:s,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),i})}computeLinks(e){return ad(this,void 0,void 0,function*(){const t=this._getModel(e);return t?wY(t):null})}textualSuggest(e,t,n,i){return ad(this,void 0,void 0,function*(){const s=new Ai(!0),r=new RegExp(n,i),a=new Set;e:for(const l of e){const c=this._getModel(l);if(c){for(const d of c.words(r))if(!(d===t||!isNaN(Number(d)))&&(a.add(d),a.size>rl._suggestionsLimit))break e}}return{words:Array.from(a),duration:s.elapsed()}})}computeWordRanges(e,t,n,i){return ad(this,void 0,void 0,function*(){const s=this._getModel(e);if(!s)return Object.create(null);const r=new RegExp(n,i),a=Object.create(null);for(let l=t.startLineNumber;l<t.endLineNumber;l++){const c=s.getLineWords(l,r);for(const d of c){if(!isNaN(Number(d.word)))continue;let h=a[d.word];h||(h=[],a[d.word]=h),h.push({startLineNumber:l,startColumn:d.startColumn,endLineNumber:l,endColumn:d.endColumn})}}return a})}navigateValueSet(e,t,n,i,s){return ad(this,void 0,void 0,function*(){const r=this._getModel(e);if(!r)return null;const a=new RegExp(i,s);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});const l=r.getValueInRange(t),c=r.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!c)return null;const d=r.getValueInRange(c);return n1.INSTANCE.navigateValueSet(t,l,c,d,n)})}loadForeignModule(e,t,n){const r={host:I$(n,u((a,l)=>this._host.fhr(a,l),"proxyMethodRequest")),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(r,t),Promise.resolve(ID(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))}fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(n){return Promise.reject(n)}}}u(rl,"EditorSimpleWorker");rl._diffLimit=1e5;rl._suggestionsLimit=1e4;typeof importScripts=="function"&&(on.monaco=N4());const rA=Je("textResourceConfigurationService"),J5=Je("textResourcePropertiesService"),Ao=Je("logService");var ir;(function(o){o[o.Trace=0]="Trace",o[o.Debug=1]="Debug",o[o.Info=2]="Info",o[o.Warning=3]="Warning",o[o.Error=4]="Error",o[o.Critical=5]="Critical",o[o.Off=6]="Off"})(ir||(ir={}));const Q5=ir.Info;class eV extends U{constructor(){super(...arguments),this.level=Q5,this._onDidChangeLogLevel=this._register(new R)}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}}u(eV,"AbstractLogger");class tV extends eV{constructor(e=Q5){super(),this.setLevel(e)}trace(e,...t){this.getLevel()<=ir.Trace&&console.log("%cTRACE","color: #888",e,...t)}debug(e,...t){this.getLevel()<=ir.Debug&&console.log("%cDEBUG","background: #eee; color: #888",e,...t)}info(e,...t){this.getLevel()<=ir.Info&&console.log("%c INFO","color: #33f",e,...t)}error(e,...t){this.getLevel()<=ir.Error&&console.log("%c  ERR","color: #f33",e,...t)}dispose(){}}u(tV,"ConsoleLogger");class nV extends U{constructor(e){super(),this.logger=e,this._register(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}error(e,...t){this.logger.error(e,...t)}}u(nV,"LogService");const ue=Je("ILanguageFeaturesService");var kY=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Fp=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Hx=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const q2=60*1e3,Y2=5*60*1e3;function Ld(o,e){const t=o.getModel(e);return!(!t||t.isTooLargeForSyncing())}u(Ld,"canSyncModel");let Bx=u(class extends U{constructor(e,t,n,i,s){super(),this._modelService=e,this._workerManager=this._register(new sV(this._modelService,i)),this._logService=n,this._register(s.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:(r,a)=>Ld(this._modelService,r.uri)?this._workerManager.withWorker().then(l=>l.computeLinks(r.uri)).then(l=>l&&{links:l}):Promise.resolve({links:[]})})),this._register(s.completionProvider.register("*",new iV(this._workerManager,t,this._modelService,i)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return Ld(this._modelService,e)}computedUnicodeHighlights(e,t,n){return this._workerManager.withWorker().then(i=>i.computedUnicodeHighlights(e,t,n))}computeDiff(e,t,n,i){return this._workerManager.withWorker().then(s=>s.computeDiff(e,t,n,i))}computeMoreMinimalEdits(e,t){if(ci(t)){if(!Ld(this._modelService,e))return Promise.resolve(t);const n=Ai.create(!0),i=this._workerManager.withWorker().then(s=>s.computeMoreMinimalEdits(e,t));return i.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),n.elapsed())),Promise.race([i,xc(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return Ld(this._modelService,e)}navigateValueSet(e,t,n){return this._workerManager.withWorker().then(i=>i.navigateValueSet(e,t,n))}canComputeWordRanges(e){return Ld(this._modelService,e)}computeWordRanges(e,t){return this._workerManager.withWorker().then(n=>n.computeWordRanges(e,t))}},"EditorWorkerService");Bx=kY([Fp(0,Kt),Fp(1,rA),Fp(2,Ao),Fp(3,rn),Fp(4,ue)],Bx);class iV{constructor(e,t,n,i){this.languageConfigurationService=i,this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=n}provideCompletionItems(e,t){return Hx(this,void 0,void 0,function*(){const n=this._configurationService.getValue(e.uri,t,"editor");if(!n.wordBasedSuggestions)return;const i=[];if(n.wordBasedSuggestionsMode==="currentDocument")Ld(this._modelService,e.uri)&&i.push(e.uri);else for(const h of this._modelService.getModels())Ld(this._modelService,h.uri)&&(h===e?i.unshift(h.uri):(n.wordBasedSuggestionsMode==="allDocuments"||h.getLanguageId()===e.getLanguageId())&&i.push(h.uri));if(i.length===0)return;const s=this.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),r=e.getWordAtPosition(t),a=r?new L(t.lineNumber,r.startColumn,t.lineNumber,r.endColumn):L.fromPositions(t),l=a.setEndPosition(t.lineNumber,t.column),d=yield(yield this._workerManager.withWorker()).textualSuggest(i,r?.word,s);if(d)return{duration:d.duration,suggestions:d.words.map(h=>({kind:18,label:h,insertText:h,range:{insert:l,replace:a}}))}})}}u(iV,"WordBasedCompletionItemProvider");class sV extends U{constructor(e,t){super(),this.languageConfigurationService=t,this._modelService=e,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new tp).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(Y2/2)),this._register(this._modelService.onModelRemoved(i=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>Y2&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new aA(this._modelService,!1,"editorWorkerService",this.languageConfigurationService)),Promise.resolve(this._editorWorkerClient)}}u(sV,"WorkerManager");class oV extends U{constructor(e,t,n){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!n){const i=new tp;i.cancelAndSet(()=>this._checkStopModelSync(),Math.round(q2/2)),this._register(i)}}dispose(){for(const e in this._syncedModels)st(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t){for(const n of e){const i=n.toString();this._syncedModels[i]||this._beginModelSync(n,t),this._syncedModels[i]&&(this._syncedModelsLastUsedTime[i]=new Date().getTime())}}_checkStopModelSync(){const e=new Date().getTime(),t=[];for(const n in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[n]>q2&&t.push(n);for(const n of t)this._stopModelSync(n)}_beginModelSync(e,t){const n=this._modelService.getModel(e);if(!n||!t&&n.isTooLargeForSyncing())return;const i=e.toString();this._proxy.acceptNewModel({url:n.uri.toString(),lines:n.getLinesContent(),EOL:n.getEOL(),versionId:n.getVersionId()});const s=new J;s.add(n.onDidChangeContent(r=>{this._proxy.acceptModelChanged(i.toString(),r)})),s.add(n.onWillDispose(()=>{this._stopModelSync(i)})),s.add(He(()=>{this._proxy.acceptRemovedModel(i)})),this._syncedModels[i]=s}_stopModelSync(e){const t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],st(t)}}u(oV,"EditorModelManager");class Wx{constructor(e){this._instance=e,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}}u(Wx,"SynchronousWorkerClient");class ZC{constructor(e){this._workerClient=e}fhr(e,t){return this._workerClient.fhr(e,t)}}u(ZC,"EditorWorkerHost");class aA extends U{constructor(e,t,n,i){super(),this.languageConfigurationService=i,this._disposed=!1,this._modelService=e,this._keepIdleModels=t,this._workerFactory=new S_(n),this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new V5(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new ZC(this)))}catch(e){Dx(e),this._worker=new Wx(new rl(new ZC(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,e=>(Dx(e),this._worker=new Wx(new rl(new ZC(this),null)),this._getOrCreateWorker().getProxyObject()))}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new oV(e,this._modelService,this._keepIdleModels))),this._modelManager}_withSyncedResources(e,t=!1){return Hx(this,void 0,void 0,function*(){return this._disposed?Promise.reject(f4()):this._getProxy().then(n=>(this._getOrCreateModelManager(n).ensureSyncedResources(e,t),n))})}computedUnicodeHighlights(e,t,n){return this._withSyncedResources([e]).then(i=>i.computeUnicodeHighlights(e.toString(),t,n))}computeDiff(e,t,n,i){return this._withSyncedResources([e,t],!0).then(s=>s.computeDiff(e.toString(),t.toString(),n,i))}computeMoreMinimalEdits(e,t){return this._withSyncedResources([e]).then(n=>n.computeMoreMinimalEdits(e.toString(),t))}computeLinks(e){return this._withSyncedResources([e]).then(t=>t.computeLinks(e.toString()))}textualSuggest(e,t,n){return Hx(this,void 0,void 0,function*(){const i=yield this._withSyncedResources(e),s=n.source,r=US(n);return i.textualSuggest(e.map(a=>a.toString()),t,s,r)})}computeWordRanges(e,t){return this._withSyncedResources([e]).then(n=>{const i=this._modelService.getModel(e);if(!i)return Promise.resolve(null);const s=this.languageConfigurationService.getLanguageConfiguration(i.getLanguageId()).getWordDefinition(),r=s.source,a=US(s);return n.computeWordRanges(e.toString(),t,r,a)})}navigateValueSet(e,t,n){return this._withSyncedResources([e]).then(i=>{const s=this._modelService.getModel(e);if(!s)return null;const r=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId()).getWordDefinition(),a=r.source,l=US(r);return i.navigateValueSet(e.toString(),t,n,a,l)})}dispose(){super.dispose(),this._disposed=!0}}u(aA,"EditorWorkerClient");function MY(o,e,t){return new rV(o,e,t)}u(MY,"createWebWorker$1");class rV extends aA{constructor(e,t,n){super(e,n.keepIdleModels||!1,n.label,t),this._foreignModuleId=n.moduleId,this._foreignModuleCreateData=n.createData||null,this._foreignModuleHost=n.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(n){return Promise.reject(n)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{const t=this._foreignModuleHost?ID(this._foreignModuleHost):[];return e.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(n=>{this._foreignModuleCreateData=null;const i=u((a,l)=>e.fmr(a,l),"proxyMethodRequest"),s=u((a,l)=>function(){const c=Array.prototype.slice.call(arguments,0);return l(a,c)},"createProxyMethod"),r={};for(const a of n)r[a]=s(a,i);return r})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this._withSyncedResources(e).then(t=>this.getProxy())}}u(rV,"MonacoWebWorkerImpl");class $n{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static getClassNameFromMetadata(e){let n="mtk"+this.getForeground(e);const i=this.getFontStyle(e);return i&1&&(n+=" mtki"),i&2&&(n+=" mtkb"),i&4&&(n+=" mtku"),i&8&&(n+=" mtks"),n}static getInlineStyleFromMetadata(e,t){const n=this.getForeground(e),i=this.getFontStyle(e);let s=`color: ${t[n]};`;i&1&&(s+="font-style: italic;"),i&2&&(s+="font-weight: bold;");let r="";return i&4&&(r+=" underline"),i&8&&(r+=" line-through"),r&&(s+=`text-decoration:${r};`),s}static getPresentationFromMetadata(e){const t=this.getForeground(e),n=this.getFontStyle(e);return{foreground:t,italic:Boolean(n&1),bold:Boolean(n&2),underline:Boolean(n&4),strikethrough:Boolean(n&8)}}}u($n,"TokenMetadata");class yn{constructor(e,t,n){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this._languageIdCodec=n}static createEmpty(e,t){const n=yn.defaultTokenMetadata,i=new Uint32Array(2);return i[0]=e.length,i[1]=n,new yn(i,e,t)}equals(e){return e instanceof yn?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,n){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const i=t<<1,s=i+(n<<1);for(let r=i;r<s;r++)if(this._tokens[r]!==e._tokens[r])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],n=$n.getLanguageId(t);return this._languageIdCodec.decodeLanguageId(n)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return $n.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return $n.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return $n.getClassNameFromMetadata(t)}getInlineStyle(e,t){const n=this._tokens[(e<<1)+1];return $n.getInlineStyleFromMetadata(n,t)}getPresentation(e){const t=this._tokens[(e<<1)+1];return $n.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return yn.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,n){return new zw(this,e,t,n)}static convertToEndOffset(e,t){const i=(e.length>>>1)-1;for(let s=0;s<i;s++)e[s<<1]=e[s+1<<1];e[i<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let n=0,i=(e.length>>>1)-1;for(;n<i;){const s=n+Math.floor((i-n)/2),r=e[s<<1];if(r===t)return s+1;r<t?n=s+1:r>t&&(i=s)}return n}withInserted(e){if(e.length===0)return this;let t=0,n=0,i="";const s=new Array;let r=0;for(;;){const a=t<this._tokensCount?this._tokens[t<<1]:-1,l=n<e.length?e[n]:null;if(a!==-1&&(l===null||a<=l.offset)){i+=this._text.substring(r,a);const c=this._tokens[(t<<1)+1];s.push(i.length,c),t++,r=a}else if(l){if(l.offset>r){i+=this._text.substring(r,l.offset);const c=this._tokens[(t<<1)+1];s.push(i.length,c),r=l.offset}i+=l.text,s.push(i.length,l.tokenMetadata),n++}else break}return new yn(new Uint32Array(s),i,this._languageIdCodec)}}u(yn,"LineTokens");yn.defaultTokenMetadata=(0<<11|1<<15|2<<24)>>>0;class zw{constructor(e,t,n,i){this._source=e,this._startOffset=t,this._endOffset=n,this._deltaOffset=i,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this._tokensCount=0;for(let s=this._firstTokenIndex,r=e.getCount();s<r&&!(e.getStartOffset(s)>=n);s++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof zw?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}}u(zw,"SliceLineTokens");class ji{constructor(e,t,n,i){this.startColumn=e,this.endColumn=t,this.className=n,this.type=i,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const n=e.length,i=t.length;if(n!==i)return!1;for(let s=0;s<n;s++)if(!ji._equals(e[s],t[s]))return!1;return!0}static extractWrapped(e,t,n){if(e.length===0)return e;const i=t+1,s=n+1,r=n-t,a=[];let l=0;for(const c of e)c.endColumn<=i||c.startColumn>=s||(a[l++]=new ji(Math.max(1,c.startColumn-i+1),Math.min(r+1,c.endColumn-i+1),c.className,c.type));return a}static filter(e,t,n,i){if(e.length===0)return[];const s=[];let r=0;for(let a=0,l=e.length;a<l;a++){const c=e[a],d=c.range;if(d.endLineNumber<t||d.startLineNumber>t||d.isEmpty()&&(c.type===0||c.type===3))continue;const h=d.startLineNumber===t?d.startColumn:n,g=d.endLineNumber===t?d.endColumn:i;s[r++]=new ji(h,g,c.inlineClassName,c.type)}return s}static _typeCompare(e,t){const n=[2,0,1,3];return n[e]-n[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const n=ji._typeCompare(e.type,t.type);return n!==0?n:e.className!==t.className?e.className<t.className?-1:1:0}}u(ji,"LineDecoration");class Ux{constructor(e,t,n,i){this.startOffset=e,this.endOffset=t,this.className=n,this.metadata=i}}u(Ux,"DecorationSegment");class db{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let n=0,i=e.length;n<i;n++)t|=e[n];return t}consumeLowerThan(e,t,n){for(;this.count>0&&this.stopOffsets[0]<e;){let i=0;for(;i+1<this.count&&this.stopOffsets[i]===this.stopOffsets[i+1];)i++;n.push(new Ux(t,this.stopOffsets[i],this.classNames.join(" "),db._metadata(this.metadata))),t=this.stopOffsets[i]+1,this.stopOffsets.splice(0,i+1),this.classNames.splice(0,i+1),this.metadata.splice(0,i+1),this.count-=i+1}return this.count>0&&t<e&&(n.push(new Ux(t,e-1,this.classNames.join(" "),db._metadata(this.metadata))),t=e),t}insert(e,t,n){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(n);else for(let i=0;i<this.count;i++)if(this.stopOffsets[i]>=e){this.stopOffsets.splice(i,0,e),this.classNames.splice(i,0,t),this.metadata.splice(i,0,n);break}this.count++}}u(db,"Stack");class aV{static normalize(e,t){if(t.length===0)return[];const n=[],i=new db;let s=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];let c=l.startColumn,d=l.endColumn;const h=l.className,g=l.type===1?2:l.type===2?4:0;if(c>1){const _=e.charCodeAt(c-2);kn(_)&&c--}if(d>1){const _=e.charCodeAt(d-2);kn(_)&&d--}const f=c-1,p=d-2;s=i.consumeLowerThan(f,s,n),i.count===0&&(s=f),i.insert(p,h,g)}return i.consumeLowerThan(1073741824,s,n),n}}u(aV,"LineDecorationsNormalizer");class Mn{constructor(e,t,n,i){this.endIndex=e,this.type=t,this.metadata=n,this.containsRTL=i,this._linePartBrand=void 0}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}u(Mn,"LinePart");class lV{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}u(lV,"LineRange");class Ml{constructor(e,t,n,i,s,r,a,l,c,d,h,g,f,p,_,v,C,w,y){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.continuesWithWrappedLine=i,this.isBasicASCII=s,this.containsRTL=r,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=c.sort(ji.compare),this.tabSize=d,this.startVisibleColumn=h,this.spaceWidth=g,this.stopRenderingLineAfter=_,this.renderWhitespace=v==="all"?4:v==="boundary"?1:v==="selection"?2:v==="trailing"?3:0,this.renderControlCharacters=C,this.fontLigatures=w,this.selectionsOnLine=y&&y.sort((k,T)=>k.startOffset<T.startOffset?-1:1);const S=Math.abs(p-g),E=Math.abs(f-g);S<E?(this.renderSpaceWidth=p,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=f,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&ji.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}u(Ml,"RenderLineInput");class Kw{constructor(e,t){this.partIndex=e,this.charIndex=t}}u(Kw,"DomPosition");class jo{constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}setColumnInfo(e,t,n,i){const s=(t<<16|n<<0)>>>0;this._data[e-1]=s,this._horizontalOffset[e-1]=i}getHorizontalOffset(e){return this._horizontalOffset.length===0?0:this._horizontalOffset[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),n=jo.getPartIndex(t),i=jo.getCharIndex(t);return new Kw(n,i)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,n){if(this.length===0)return 0;const i=(e<<16|n<<0)>>>0;let s=0,r=this.length-1;for(;s+1<r;){const _=s+r>>>1,v=this._data[_];if(v===i)return _;v>i?r=_:s=_}if(s===r)return s;const a=this._data[s],l=this._data[r];if(a===i)return s;if(l===i)return r;const c=jo.getPartIndex(a),d=jo.getCharIndex(a),h=jo.getPartIndex(l);let g;c!==h?g=t:g=jo.getCharIndex(l);const f=n-d,p=g-n;return f<=p?s:r}}u(jo,"CharacterMapping");class i1{constructor(e,t,n){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=n}}u(i1,"RenderLineOutput");function L_(o,e){if(o.lineContent.length===0){if(o.lineDecorations.length>0){e.appendASCIIString("<span>");let t=0,n=0,i=0;for(const r of o.lineDecorations)(r.type===1||r.type===2)&&(e.appendASCIIString('<span class="'),e.appendASCIIString(r.className),e.appendASCIIString('"></span>'),r.type===1&&(i|=1,t++),r.type===2&&(i|=2,n++));e.appendASCIIString("</span>");const s=new jo(1,t+n);return s.setColumnInfo(1,t,0,0),new i1(s,!1,i)}return e.appendASCIIString("<span><span></span></span>"),new i1(new jo(0,0),!1,0)}return FY(DY(o),e)}u(L_,"renderViewLine");class cV{constructor(e,t,n,i){this.characterMapping=e,this.html=t,this.containsRTL=n,this.containsForeignElements=i}}u(cV,"RenderLineOutput2");function jw(o){const e=Lc(1e4),t=L_(o,e);return new cV(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}u(jw,"renderViewLine2");class dV{constructor(e,t,n,i,s,r,a,l,c,d,h,g,f,p,_){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.len=i,this.isOverflowing=s,this.parts=r,this.containsForeignElements=a,this.fauxIndentLength=l,this.tabSize=c,this.startVisibleColumn=d,this.containsRTL=h,this.spaceWidth=g,this.renderSpaceCharCode=f,this.renderWhitespace=p,this.renderControlCharacters=_}}u(dV,"ResolvedRenderLineInput");function DY(o){const e=o.lineContent;let t,n;o.stopRenderingLineAfter!==-1&&o.stopRenderingLineAfter<e.length?(t=!0,n=o.stopRenderingLineAfter):(t=!1,n=e.length);let i=AY(e,o.containsRTL,o.lineTokens,o.fauxIndentLength,n);o.renderControlCharacters&&!o.isBasicASCII&&(i=NY(e,i)),(o.renderWhitespace===4||o.renderWhitespace===1||o.renderWhitespace===2&&o.selectionsOnLine||o.renderWhitespace===3)&&(i=PY(o,e,n,i));let s=0;if(o.lineDecorations.length>0){for(let r=0,a=o.lineDecorations.length;r<a;r++){const l=o.lineDecorations[r];l.type===3||l.type===1?s|=1:l.type===2&&(s|=2)}i=RY(e,n,i,o.lineDecorations)}return o.containsRTL||(i=IY(e,i,!o.isBasicASCII||o.fontLigatures)),new dV(o.useMonospaceOptimizations,o.canUseHalfwidthRightwardsArrow,e,n,t,i,s,o.fauxIndentLength,o.tabSize,o.startVisibleColumn,o.containsRTL,o.spaceWidth,o.renderSpaceCharCode,o.renderWhitespace,o.renderControlCharacters)}u(DY,"resolveRenderLineInput");function AY(o,e,t,n,i){const s=[];let r=0;n>0&&(s[r++]=new Mn(n,"",0,!1));let a=n;for(let l=0,c=t.getCount();l<c;l++){const d=t.getEndOffset(l);if(d<=n)continue;const h=t.getClassName(l);if(d>=i){const f=e?qg(o.substring(a,i)):!1;s[r++]=new Mn(i,h,0,f);break}const g=e?qg(o.substring(a,d)):!1;s[r++]=new Mn(d,h,0,g),a=d}return s}u(AY,"transformAndRemoveOverflowing");function IY(o,e,t){let n=0;const i=[];let s=0;if(t)for(let r=0,a=e.length;r<a;r++){const l=e[r],c=l.endIndex;if(n+50<c){const d=l.type,h=l.metadata,g=l.containsRTL;let f=-1,p=n;for(let _=n;_<c;_++)o.charCodeAt(_)===32&&(f=_),f!==-1&&_-p>=50&&(i[s++]=new Mn(f+1,d,h,g),p=f+1,f=-1);p!==c&&(i[s++]=new Mn(c,d,h,g))}else i[s++]=l;n=c}else for(let r=0,a=e.length;r<a;r++){const l=e[r],c=l.endIndex,d=c-n;if(d>50){const h=l.type,g=l.metadata,f=l.containsRTL,p=Math.ceil(d/50);for(let _=1;_<p;_++){const v=n+_*50;i[s++]=new Mn(v,h,g,f)}i[s++]=new Mn(c,h,g,f)}else i[s++]=l;n=c}return i}u(IY,"splitLargeTokens");function uV(o){return o<32?o!==9:o===127||o>=8234&&o<=8238||o>=8294&&o<=8297||o>=8206&&o<=8207||o===1564}u(uV,"isControlCharacter");function NY(o,e){const t=[];let n=new Mn(0,"",0,!1),i=0;for(const s of e){const r=s.endIndex;for(;i<r;i++){const a=o.charCodeAt(i);uV(a)&&(i>n.endIndex&&(n=new Mn(i,s.type,s.metadata,s.containsRTL),t.push(n)),n=new Mn(i+1,"mtkcontrol",s.metadata,!1),t.push(n))}i>n.endIndex&&(n=new Mn(r,s.type,s.metadata,s.containsRTL),t.push(n))}return t}u(NY,"extractControlCharacters");function PY(o,e,t,n){const i=o.continuesWithWrappedLine,s=o.fauxIndentLength,r=o.tabSize,a=o.startVisibleColumn,l=o.useMonospaceOptimizations,c=o.selectionsOnLine,d=o.renderWhitespace===1,h=o.renderWhitespace===3,g=o.renderSpaceWidth!==o.spaceWidth,f=[];let p=0,_=0,v=n[_].type,C=n[_].containsRTL,w=n[_].endIndex;const y=n.length;let S=!1,E=Di(e),k;E===-1?(S=!0,E=t,k=t):k=Jr(e);let T=!1,x=0,M=c&&c[x],F=a%r;for(let G=s;G<t;G++){const j=e.charCodeAt(G);M&&G>=M.endOffset&&(x++,M=c&&c[x]);let ae;if(G<E||G>k)ae=!0;else if(j===9)ae=!0;else if(j===32)if(d)if(T)ae=!0;else{const he=G+1<t?e.charCodeAt(G+1):0;ae=he===32||he===9}else ae=!0;else ae=!1;if(ae&&c&&(ae=!!M&&M.startOffset<=G&&M.endOffset>G),ae&&h&&(ae=S||G>k),ae&&C&&G>=E&&G<=k&&(ae=!1),T){if(!ae||!l&&F>=r){if(g){const he=p>0?f[p-1].endIndex:s;for(let Se=he+1;Se<=G;Se++)f[p++]=new Mn(Se,"mtkw",1,!1)}else f[p++]=new Mn(G,"mtkw",1,!1);F=F%r}}else(G===w||ae&&G>s)&&(f[p++]=new Mn(G,v,0,C),F=F%r);for(j===9?F=r:Tc(j)?F+=2:F++,T=ae;G===w&&(_++,_<y);)v=n[_].type,C=n[_].containsRTL,w=n[_].endIndex}let V=!1;if(T)if(i&&d){const G=t>0?e.charCodeAt(t-1):0,j=t>1?e.charCodeAt(t-2):0;G===32&&j!==32&&j!==9||(V=!0)}else V=!0;if(V)if(g){const G=p>0?f[p-1].endIndex:s;for(let j=G+1;j<=t;j++)f[p++]=new Mn(j,"mtkw",1,!1)}else f[p++]=new Mn(t,"mtkw",1,!1);else f[p++]=new Mn(t,v,0,C);return f}u(PY,"_applyRenderWhitespace");function RY(o,e,t,n){n.sort(ji.compare);const i=aV.normalize(o,n),s=i.length;let r=0;const a=[];let l=0,c=0;for(let h=0,g=t.length;h<g;h++){const f=t[h],p=f.endIndex,_=f.type,v=f.metadata,C=f.containsRTL;for(;r<s&&i[r].startOffset<p;){const w=i[r];if(w.startOffset>c&&(c=w.startOffset,a[l++]=new Mn(c,_,v,C)),w.endOffset+1<=p)c=w.endOffset+1,a[l++]=new Mn(c,_+" "+w.className,v|w.metadata,C),r++;else{c=p,a[l++]=new Mn(c,_+" "+w.className,v|w.metadata,C);break}}p>c&&(c=p,a[l++]=new Mn(c,_,v,C))}const d=t[t.length-1].endIndex;if(r<s&&i[r].startOffset===d)for(;r<s&&i[r].startOffset===d;){const h=i[r];a[l++]=new Mn(c,h.className,h.metadata,!1),r++}return a}u(RY,"_applyInlineDecorations");function FY(o,e){const t=o.fontIsMonospace,n=o.canUseHalfwidthRightwardsArrow,i=o.containsForeignElements,s=o.lineContent,r=o.len,a=o.isOverflowing,l=o.parts,c=o.fauxIndentLength,d=o.tabSize,h=o.startVisibleColumn,g=o.containsRTL,f=o.spaceWidth,p=o.renderSpaceCharCode,_=o.renderWhitespace,v=o.renderControlCharacters,C=new jo(r+1,l.length);let w=!1,y=0,S=h,E=0,k=0,T=0;g?e.appendASCIIString('<span dir="ltr">'):e.appendASCIIString("<span>");for(let x=0,M=l.length;x<M;x++){const F=l[x],V=F.endIndex,G=F.type,j=F.containsRTL,ae=_!==0&&F.isWhitespace(),he=ae&&!t&&(G==="mtkw"||!i),Se=y===V&&F.isPseudoAfter();if(E=0,e.appendASCIIString("<span "),j&&e.appendASCIIString('style="unicode-bidi:isolate" '),e.appendASCIIString('class="'),e.appendASCIIString(he?"mtkz":G),e.appendASCII(34),ae){let Te=0;{let ke=y,Ue=S;for(;ke<V;ke++){const Tt=(s.charCodeAt(ke)===9?d-Ue%d:1)|0;Te+=Tt,ke>=c&&(Ue+=Tt)}}for(he&&(e.appendASCIIString(' style="width:'),e.appendASCIIString(String(f*Te)),e.appendASCIIString('px"')),e.appendASCII(62);y<V;y++){C.setColumnInfo(y+1,x-T,E,k),T=0;const ke=s.charCodeAt(y);let Ue,Rt;if(ke===9){Ue=d-S%d|0,Rt=Ue,!n||Rt>1?e.write1(8594):e.write1(65515);for(let Tt=2;Tt<=Rt;Tt++)e.write1(160)}else Ue=2,Rt=1,e.write1(p),e.write1(8204);E+=Ue,k+=Rt,y>=c&&(S+=Rt)}}else for(e.appendASCII(62);y<V;y++){C.setColumnInfo(y+1,x-T,E,k),T=0;const Te=s.charCodeAt(y);let ke=1,Ue=1;switch(Te){case 9:ke=d-S%d,Ue=ke;for(let Rt=1;Rt<=ke;Rt++)e.write1(160);break;case 32:e.write1(160);break;case 60:e.appendASCIIString("&lt;");break;case 62:e.appendASCIIString("&gt;");break;case 38:e.appendASCIIString("&amp;");break;case 0:v?e.write1(9216):e.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.write1(65533);break;default:Tc(Te)&&Ue++,v&&Te<32?e.write1(9216+Te):v&&Te===127?e.write1(9249):v&&uV(Te)?(e.appendASCIIString("[U+"),e.appendASCIIString(OY(Te)),e.appendASCIIString("]"),ke=8,Ue=ke):e.write1(Te)}E+=ke,k+=Ue,y>=c&&(S+=Ue)}Se?T++:T=0,y>=r&&!w&&F.isPseudoAfter()&&(w=!0,C.setColumnInfo(y+1,x,E,k)),e.appendASCIIString("</span>")}return w||C.setColumnInfo(r+1,l.length-1,E,k),a&&e.appendASCIIString("<span>&hellip;</span>"),e.appendASCIIString("</span>"),new i1(C,g,i)}u(FY,"_renderLine");function OY(o){return o.toString(16).toUpperCase().padStart(4,"0")}u(OY,"to4CharHex");class Gx{constructor(e,t,n,i){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=n|0,this.height=i|0}}u(Gx,"Viewport");class hV{constructor(e,t){this.tabSize=e,this.data=t}}u(hV,"MinimapLinesRenderingData");class $w{constructor(e,t,n,i,s,r,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=n,this.maxColumn=i,this.startVisibleColumn=s,this.tokens=r,this.inlineDecorations=a}}u($w,"ViewLineData");class as{constructor(e,t,n,i,s,r,a,l,c,d){this.minColumn=e,this.maxColumn=t,this.content=n,this.continuesWithWrappedLine=i,this.isBasicASCII=as.isBasicASCII(n,r),this.containsRTL=as.containsRTL(n,this.isBasicASCII,s),this.tokens=a,this.inlineDecorations=l,this.tabSize=c,this.startVisibleColumn=d}static isBasicASCII(e,t){return t?Pw(e):!0}static containsRTL(e,t,n){return!t&&n?qg(e):!1}}u(as,"ViewLineRenderingData");class xg{constructor(e,t,n){this.range=e,this.inlineClassName=t,this.type=n}}u(xg,"InlineDecoration");class gV{constructor(e,t,n,i){this.startOffset=e,this.endOffset=t,this.inlineClassName=n,this.inlineClassNameAffectsLetterSpacing=i}toInlineDecoration(e){return new xg(new L(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}u(gV,"SingleLineInlineDecoration");class lA{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}u(lA,"ViewModelDecoration");class cA{constructor(e,t,n){this.color=e,this.zIndex=t,this.data=n}static cmp(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}}u(cA,"OverviewRulerDecorationsGroup");function VY(o){return Array.isArray(o)}u(VY,"isFuzzyActionArr");function HY(o){return!VY(o)}u(HY,"isFuzzyAction");function fV(o){return typeof o=="string"}u(fV,"isString");function X2(o){return!fV(o)}u(X2,"isIAction");function Xh(o){return!o}u(Xh,"empty");function fc(o,e){return o.ignoreCase&&e?e.toLowerCase():e}u(fc,"fixCase");function Z2(o){return o.replace(/[&<>'"_]/g,"-")}u(Z2,"sanitize$1");function BY(o,e){console.log(`${o.languageId}: ${e}`)}u(BY,"log");function xt(o,e){return new Error(`${o.languageId}: ${e}`)}u(xt,"createError");function Ql(o,e,t,n,i){const s=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let r=null;return e.replace(s,function(a,l,c,d,h,g,f,p,_){return Xh(c)?Xh(d)?!Xh(h)&&h<n.length?fc(o,n[h]):!Xh(f)&&o&&typeof o[f]=="string"?o[f]:(r===null&&(r=i.split("."),r.unshift(i)),!Xh(g)&&g<r.length?fc(o,r[g]):""):fc(o,t):"$"})}u(Ql,"substituteMatches");function zv(o,e){let t=e;for(;t&&t.length>0;){const n=o.tokenizer[t];if(n)return n;const i=t.lastIndexOf(".");i<0?t=null:t=t.substr(0,i)}return null}u(zv,"findRules");function WY(o,e){let t=e;for(;t&&t.length>0;){if(o.stateNames[t])return!0;const i=t.lastIndexOf(".");i<0?t=null:t=t.substr(0,i)}return!1}u(WY,"stateExists");var UY=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},GY=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const pV=5;class tf{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new Xd(e,t);let n=Xd.getStackElementId(e);n.length>0&&(n+="|"),n+=t;let i=this._entries[n];return i||(i=new Xd(e,t),this._entries[n]=i,i)}}u(tf,"MonarchStackElementFactory");tf._INSTANCE=new tf(pV);class Xd{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return Xd._equals(this,e)}push(e){return tf.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return tf.create(this.parent,e)}}u(Xd,"MonarchStackElement");class Od{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new Od(this.languageId,this.state)}}u(Od,"EmbeddedLanguageData");class Ha{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(t!==null)return new Eg(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new Eg(e,t);const n=Xd.getStackElementId(e);let i=this._entries[n];return i||(i=new Eg(e,null),this._entries[n]=i,i)}}u(Ha,"MonarchLineStateFactory");Ha._INSTANCE=new Ha(pV);class Eg{constructor(e,t){this.stack=e,this.embeddedLanguageData=t}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:Ha.create(this.stack,this.embeddedLanguageData)}equals(e){return!(e instanceof Eg)||!this.stack.equals(e.stack)?!1:this.embeddedLanguageData===null&&e.embeddedLanguageData===null?!0:this.embeddedLanguageData===null||e.embeddedLanguageData===null?!1:this.embeddedLanguageData.equals(e.embeddedLanguageData)}}u(Eg,"MonarchLineState");class mV{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(e){this._languageId=e}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new eb(e,t,this._languageId)))}nestedLanguageTokenize(e,t,n,i){const s=n.languageId,r=n.state,a=Wt.get(s);if(!a)return this.enterLanguage(s),this.emit(i,""),r;const l=a.tokenize(e,t,r);if(i!==0)for(const c of l.tokens)this._tokens.push(new eb(c.offset+i,c.type,c.language));else this._tokens=this._tokens.concat(l.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,l.endState}finalize(e){return new Aw(this._tokens,e)}}u(mV,"MonarchClassicTokensCollector");class ub{constructor(e,t){this._languageService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(e){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(e)}emit(e,t){const n=this._theme.match(this._currentLanguageId,t);this._lastTokenMetadata!==n&&(this._lastTokenMetadata=n,this._tokens.push(e),this._tokens.push(n))}static _merge(e,t,n){const i=e!==null?e.length:0,s=t.length,r=n!==null?n.length:0;if(i===0&&s===0&&r===0)return new Uint32Array(0);if(i===0&&s===0)return n;if(s===0&&r===0)return e;const a=new Uint32Array(i+s+r);e!==null&&a.set(e);for(let l=0;l<s;l++)a[i+l]=t[l];return n!==null&&a.set(n,i+s),a}nestedLanguageTokenize(e,t,n,i){const s=n.languageId,r=n.state,a=Wt.get(s);if(!a)return this.enterLanguage(s),this.emit(i,""),r;const l=a.tokenizeEncoded(e,t,r);if(i!==0)for(let c=0,d=l.tokens.length;c<d;c+=2)l.tokens[c]+=i;return this._prependTokens=ub._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}finalize(e){return new b_(ub._merge(this._prependTokens,this._tokens,null),e)}}u(ub,"MonarchModernTokensCollector");let hb=u(class bV{constructor(e,t,n,i,s){this._configurationService=s,this._languageService=e,this._standaloneThemeService=t,this._languageId=n,this._lexer=i,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let r=!1;this._tokenizationRegistryListener=Wt.onDidChange(a=>{if(r)return;let l=!1;for(let c=0,d=a.changedLanguages.length;c<d;c++){const h=a.changedLanguages[c];if(this._embeddedLanguages[h]){l=!0;break}}l&&(r=!0,Wt.fire([this._languageId]),r=!1)}),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._configurationService.onDidChangeConfiguration(a=>{a.affectsConfiguration("editor.maxTokenizationLineLength")&&(this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}))})}dispose(){this._tokenizationRegistryListener.dispose()}getLoadStatus(){const e=[];for(const t in this._embeddedLanguages){const n=Wt.get(t);if(n){if(n instanceof bV){const i=n.getLoadStatus();i.loaded===!1&&e.push(i.promise)}continue}Wt.isResolved(t)||e.push(Wt.getOrCreate(t))}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){const e=tf.create(null,this._lexer.start);return Ha.create(e,null)}tokenize(e,t,n){if(e.length>=this._maxTokenizationLineLength)return eA(this._languageId,n);const i=new mV,s=this._tokenize(e,t,n,i);return i.finalize(s)}tokenizeEncoded(e,t,n){if(e.length>=this._maxTokenizationLineLength)return Bw(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),n);const i=new ub(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),s=this._tokenize(e,t,n,i);return i.finalize(s)}_tokenize(e,t,n,i){return n.embeddedLanguageData?this._nestedTokenize(e,t,n,0,i):this._myTokenize(e,t,n,0,i)}_findLeavingNestedLanguageOffset(e,t){let n=this._lexer.tokenizer[t.stack.state];if(!n&&(n=zv(this._lexer,t.stack.state),!n))throw xt(this._lexer,"tokenizer state is not defined: "+t.stack.state);let i=-1,s=!1;for(const r of n){if(!X2(r.action)||r.action.nextEmbedded!=="@pop")continue;s=!0;let a=r.regex;const l=r.regex.source;if(l.substr(0,4)==="^(?:"&&l.substr(l.length-1,1)===")"){const d=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(l.substr(4,l.length-5),d)}const c=e.search(a);c===-1||c!==0&&r.matchOnlyAtLineStart||(i===-1||c<i)&&(i=c)}if(!s)throw xt(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return i}_nestedTokenize(e,t,n,i,s){const r=this._findLeavingNestedLanguageOffset(e,n);if(r===-1){const c=s.nestedLanguageTokenize(e,t,n.embeddedLanguageData,i);return Ha.create(n.stack,new Od(n.embeddedLanguageData.languageId,c))}const a=e.substring(0,r);a.length>0&&s.nestedLanguageTokenize(a,!1,n.embeddedLanguageData,i);const l=e.substring(r);return this._myTokenize(l,t,n,i+r,s)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,n,i,s){s.enterLanguage(this._languageId);const r=e.length,a=t&&this._lexer.includeLF?e+`
`:e,l=a.length;let c=n.embeddedLanguageData,d=n.stack,h=0,g=null,f=!0;for(;f||h<l;){const p=h,_=d.depth,v=g?g.groups.length:0,C=d.state;let w=null,y=null,S=null,E=null,k=null;if(g){w=g.matches;const M=g.groups.shift();y=M.matched,S=M.action,E=g.rule,g.groups.length===0&&(g=null)}else{if(!f&&h>=l)break;f=!1;let M=this._lexer.tokenizer[C];if(!M&&(M=zv(this._lexer,C),!M))throw xt(this._lexer,"tokenizer state is not defined: "+C);const F=a.substr(h);for(const V of M)if((h===0||!V.matchOnlyAtLineStart)&&(w=F.match(V.regex),w)){y=w[0],S=V.action;break}}if(w||(w=[""],y=""),S||(h<l&&(w=[a.charAt(h)],y=w[0]),S=this._lexer.defaultToken),y===null)break;for(h+=y.length;HY(S)&&X2(S)&&S.test;)S=S.test(y,w,C,h===l);let T=null;if(typeof S=="string"||Array.isArray(S))T=S;else if(S.group)T=S.group;else if(S.token!==null&&S.token!==void 0){if(S.tokenSubst?T=Ql(this._lexer,S.token,y,w,C):T=S.token,S.nextEmbedded)if(S.nextEmbedded==="@pop"){if(!c)throw xt(this._lexer,"cannot pop embedded language if not inside one");c=null}else{if(c)throw xt(this._lexer,"cannot enter embedded language from within an embedded language");k=Ql(this._lexer,S.nextEmbedded,y,w,C)}if(S.goBack&&(h=Math.max(0,h-S.goBack)),S.switchTo&&typeof S.switchTo=="string"){let M=Ql(this._lexer,S.switchTo,y,w,C);if(M[0]==="@"&&(M=M.substr(1)),zv(this._lexer,M))d=d.switchTo(M);else throw xt(this._lexer,"trying to switch to a state '"+M+"' that is undefined in rule: "+this._safeRuleName(E))}else{if(S.transform&&typeof S.transform=="function")throw xt(this._lexer,"action.transform not supported");if(S.next)if(S.next==="@push"){if(d.depth>=this._lexer.maxStack)throw xt(this._lexer,"maximum tokenizer stack size reached: ["+d.state+","+d.parent.state+",...]");d=d.push(C)}else if(S.next==="@pop"){if(d.depth<=1)throw xt(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(E));d=d.pop()}else if(S.next==="@popall")d=d.popall();else{let M=Ql(this._lexer,S.next,y,w,C);if(M[0]==="@"&&(M=M.substr(1)),zv(this._lexer,M))d=d.push(M);else throw xt(this._lexer,"trying to set a next state '"+M+"' that is undefined in rule: "+this._safeRuleName(E))}}S.log&&typeof S.log=="string"&&BY(this._lexer,this._lexer.languageId+": "+Ql(this._lexer,S.log,y,w,C))}if(T===null)throw xt(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(E));const x=u(M=>{const F=this._languageService.getLanguageIdByLanguageName(M)||this._languageService.getLanguageIdByMimeType(M)||M,V=this._getNestedEmbeddedLanguageData(F);if(h<l){const G=e.substr(h);return this._nestedTokenize(G,t,Ha.create(d,V),i+h,s)}else return Ha.create(d,V)},"computeNewStateForEmbeddedLanguage");if(Array.isArray(T)){if(g&&g.groups.length>0)throw xt(this._lexer,"groups cannot be nested: "+this._safeRuleName(E));if(w.length!==T.length+1)throw xt(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(E));let M=0;for(let F=1;F<w.length;F++)M+=w[F].length;if(M!==y.length)throw xt(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(E));g={rule:E,matches:w,groups:[]};for(let F=0;F<T.length;F++)g.groups[F]={action:T[F],matched:w[F+1]};h-=y.length;continue}else{if(T==="@rematch"&&(h-=y.length,y="",w=null,T="",k!==null))return x(k);if(y.length===0){if(l===0||_!==d.depth||C!==d.state||(g?g.groups.length:0)!==v)continue;throw xt(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(E))}let M=null;if(fV(T)&&T.indexOf("@brackets")===0){const F=T.substr(9),V=zY(this._lexer,y);if(!V)throw xt(this._lexer,"@brackets token returned but no bracket defined as: "+y);M=Z2(V.token+F)}else{const F=T===""?"":T+this._lexer.tokenPostfix;M=Z2(F)}p<r&&s.emit(p+i,M)}if(k!==null)return x(k)}return Ha.create(d,c)}_getNestedEmbeddedLanguageData(e){if(!this._languageService.isRegisteredLanguageId(e))return new Od(e,Qg);e!==this._languageId&&(Wt.getOrCreate(e),this._embeddedLanguages[e]=!0);const t=Wt.get(e);return t?new Od(e,t.getInitialState()):new Od(e,Qg)}},"MonarchTokenizer");hb=UY([GY(4,rt)],hb);function zY(o,e){if(!e)return null;e=fc(o,e);const t=o.brackets;for(const n of t){if(n.open===e)return{token:n.token,bracketType:1};if(n.close===e)return{token:n.token,bracketType:-1}}return null}u(zY,"findBracket");var KY=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})},ZS;const JS=(ZS=window.trustedTypes)===null||ZS===void 0?void 0:ZS.createPolicy("standaloneColorizer",{createHTML:o=>o});class qw{static colorizeElement(e,t,n,i){i=i||{};const s=i.theme||"vs",r=i.mimeType||n.getAttribute("lang")||n.getAttribute("data-lang");if(!r)return console.error("Mode not detected"),Promise.resolve();const a=t.getLanguageIdByMimeType(r)||r;e.setTheme(s);const l=n.firstChild?n.firstChild.nodeValue:"";n.className+=" "+s;const c=u(d=>{var h;const g=(h=JS?.createHTML(d))!==null&&h!==void 0?h:d;n.innerHTML=g},"render");return this.colorize(t,l||"",a,i).then(c,d=>console.error(d))}static colorize(e,t,n,i){return KY(this,void 0,void 0,function*(){const s=e.languageIdCodec;let r=4;i&&typeof i.tabSize=="number"&&(r=i.tabSize),KD(t)&&(t=t.substr(1));const a=sa(t);if(!e.isRegisteredLanguageId(n))return J2(a,r,s);const l=yield Wt.getOrCreate(n);return l?jY(a,r,l,s):J2(a,r,s)})}static colorizeLine(e,t,n,i,s=4){const r=as.isBasicASCII(e,t),a=as.containsRTL(e,r,n);return jw(new Ml(!1,!0,e,!1,r,a,0,i,[],s,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,n=4){const i=e.getLineContent(t);e.tokenization.forceTokenization(t);const r=e.tokenization.getLineTokens(t).inflate();return this.colorizeLine(i,e.mightContainNonBasicASCII(),e.mightContainRTL(),r,n)}}u(qw,"Colorizer");function jY(o,e,t,n){return new Promise((i,s)=>{const r=u(()=>{const a=$Y(o,e,t,n);if(t instanceof hb){const l=t.getLoadStatus();if(l.loaded===!1){l.promise.then(r,s);return}}i(a)},"execute");r()})}u(jY,"_colorize");function J2(o,e,t){let n=[];const s=new Uint32Array(2);s[0]=0,s[1]=33587200;for(let r=0,a=o.length;r<a;r++){const l=o[r];s[0]=l.length;const c=new yn(s,l,t),d=as.isBasicASCII(l,!0),h=as.containsRTL(l,d,!0),g=jw(new Ml(!1,!0,l,!1,d,h,0,c,[],e,0,0,0,0,-1,"none",!1,!1,null));n=n.concat(g.html),n.push("<br/>")}return n.join("")}u(J2,"_fakeColorize");function $Y(o,e,t,n){let i=[],s=t.getInitialState();for(let r=0,a=o.length;r<a;r++){const l=o[r],c=t.tokenizeEncoded(l,!0,s);yn.convertToEndOffset(c.tokens,l.length);const d=new yn(c.tokens,l,n),h=as.isBasicASCII(l,!0),g=as.containsRTL(l,h,!0),f=jw(new Ml(!1,!0,l,!1,h,g,0,d.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));i=i.concat(f.html),i.push("<br/>"),s=c.endState}return i.join("")}u($Y,"_actualColorize");const dA={clipboard:{writeText:cr||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:cr||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:(()=>cr||YD()?0:navigator.keyboard||pl?1:2)(),touch:"ontouchstart"in window||navigator.maxTouchPoints>0,pointerEvents:window.PointerEvent&&("ontouchstart"in window||window.navigator.maxTouchPoints>0||navigator.maxTouchPoints>0)};function zx(o,e){if(o===0)return null;const t=(o&65535)>>>0,n=(o&4294901760)>>>16;return n!==0?new gb([QS(t,e),QS(n,e)]):new gb([QS(t,e)])}u(zx,"createKeybinding");function QS(o,e){const t=!!(o&2048),n=!!(o&256),i=e===2?n:t,s=!!(o&1024),r=!!(o&512),a=e===2?t:n,l=o&255;return new Ec(i,s,r,a,l)}u(QS,"createSimpleKeybinding");class Ec{constructor(e,t,n,i,s){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=i,this.keyCode=s}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toChord(){return new gb([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}u(Ec,"SimpleKeybinding");class gb{constructor(e){if(e.length===0)throw dr("parts");this.parts=e}}u(gb,"ChordKeybinding");class _V{constructor(e,t,n,i,s,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=i,this.keyLabel=s,this.keyAriaLabel=r}}u(_V,"ResolvedKeybindingPart");class vV{}u(vV,"ResolvedKeybinding");function qY(o){if(o.charCode){const t=String.fromCharCode(o.charCode).toUpperCase();return Nd.fromString(t)}const e=o.keyCode;if(e===3)return 7;if(Is){if(e===59)return 80;if(e===107)return 81;if(e===109)return 83;if(Xe&&e===224)return 57}else if(hc){if(e===91)return 57;if(Xe&&e===93)return 57;if(!Xe&&e===92)return 57}return L4[e]||0}u(qY,"extractKeyCode");const YY=Xe?256:2048,XY=512,ZY=1024,JY=Xe?2048:256;class Pt{constructor(e){this._standardKeyboardEventBrand=!0;const t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.keyCode=qY(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asRuntimeKeybinding=this._computeRuntimeKeybinding()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeybinding(){return this._asRuntimeKeybinding}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=YY),this.altKey&&(t|=XY),this.shiftKey&&(t|=ZY),this.metaKey&&(t|=JY),t|=e,t}_computeRuntimeKeybinding(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new Ec(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}u(Pt,"StandardKeyboardEvent");let Q2=!1,Op=null;function QY(o){if(!o.parent||o.parent===o)return null;try{const e=o.location,t=o.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return Q2=!0,null}catch{return Q2=!0,null}return o.parent}u(QY,"getParentWindowIfSameOrigin");class CV{static getSameOriginWindowChain(){if(!Op){Op=[];let e=window,t;do t=QY(e),t?Op.push({window:e,iframeElement:e.frameElement||null}):Op.push({window:e,iframeElement:null}),e=t;while(e)}return Op.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let n=0,i=0;const s=this.getSameOriginWindowChain();for(const r of s){if(n+=r.window.scrollY,i+=r.window.scrollX,r.window===t||!r.iframeElement)break;const a=r.iframeElement.getBoundingClientRect();n+=a.top,i+=a.left}return{top:n,left:i}}}u(CV,"IframeUtils");class sr{constructor(e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,e.type==="dblclick"&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX=="number"?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);const t=CV.getPositionOfChildWindowRelativeToAncestorWindow(self,e.view);this.posx-=t.left,this.posy-=t.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}u(sr,"StandardMouseEvent");class Cu{constructor(e,t=0,n=0){if(this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=t,e){const i=e,s=e;if(typeof i.wheelDeltaY<"u")this.deltaY=i.wheelDeltaY/120;else if(typeof s.VERTICAL_AXIS<"u"&&s.axis===s.VERTICAL_AXIS)this.deltaY=-s.detail/3;else if(e.type==="wheel"){const r=e;r.deltaMode===r.DOM_DELTA_LINE?Is&&!Xe?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof i.wheelDeltaX<"u")pl&&ei?this.deltaX=-(i.wheelDeltaX/120):this.deltaX=i.wheelDeltaX/120;else if(typeof s.HORIZONTAL_AXIS<"u"&&s.axis===s.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const r=e;r.deltaMode===r.DOM_DELTA_LINE?Is&&!Xe?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation()}}u(Cu,"StandardWheelEvent");/*! @license DOMPurify 2.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.1/LICENSE */function eX(o){if(Array.isArray(o)){for(var e=0,t=Array(o.length);e<o.length;e++)t[e]=o[e];return t}else return Array.from(o)}u(eX,"_toConsumableArray");var tX=Object.hasOwnProperty,eP=Object.setPrototypeOf,nX=Object.isFrozen,iX=Object.getPrototypeOf,sX=Object.getOwnPropertyDescriptor,ls=Object.freeze,bl=Object.seal,oX=Object.create,wV=typeof Reflect<"u"&&Reflect,s1=wV.apply,Kx=wV.construct;s1||(s1=u(function(e,t,n){return e.apply(t,n)},"apply"));ls||(ls=u(function(e){return e},"freeze"));bl||(bl=u(function(e){return e},"seal"));Kx||(Kx=u(function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(eX(t))))},"construct"));var rX=mr(Array.prototype.forEach),tP=mr(Array.prototype.pop),Vp=mr(Array.prototype.push),md=mr(String.prototype.toLowerCase),nP=mr(String.prototype.match),Gl=mr(String.prototype.replace),aX=mr(String.prototype.indexOf),lX=mr(String.prototype.trim),ba=mr(RegExp.prototype.test),iP=cX(TypeError);function mr(o){return function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return s1(o,e,n)}}u(mr,"unapply");function cX(o){return function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Kx(o,t)}}u(cX,"unconstruct");function mt(o,e){eP&&eP(o,null);for(var t=e.length;t--;){var n=e[t];if(typeof n=="string"){var i=md(n);i!==n&&(nX(e)||(e[t]=i),n=i)}o[n]=!0}return o}u(mt,"addToSet");function ld(o){var e=oX(null),t=void 0;for(t in o)s1(tX,o,[t])&&(e[t]=o[t]);return e}u(ld,"clone");function Kv(o,e){for(;o!==null;){var t=sX(o,e);if(t){if(t.get)return mr(t.get);if(typeof t.value=="function")return mr(t.value)}o=iX(o)}function n(i){return console.warn("fallback value for",i),null}return u(n,"fallbackValue"),n}u(Kv,"lookupGetter");var sP=ls(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),eT=ls(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),tT=ls(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),dX=ls(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),nT=ls(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),uX=ls(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),oP=ls(["#text"]),rP=ls(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),iT=ls(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),aP=ls(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),jv=ls(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),hX=bl(/\{\{[\s\S]*|[\s\S]*\}\}/gm),gX=bl(/<%[\s\S]*|[\s\S]*%>/gm),fX=bl(/^data-[\-\w.\u00B7-\uFFFF]/),pX=bl(/^aria-[\-\w]+$/),mX=bl(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),bX=bl(/^(?:\w+script|data):/i),_X=bl(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o};function Ar(o){if(Array.isArray(o)){for(var e=0,t=Array(o.length);e<o.length;e++)t[e]=o[e];return t}else return Array.from(o)}u(Ar,"_toConsumableArray$1");var vX=u(function(){return typeof window>"u"?null:window},"getGlobal"),CX=u(function(e,t){if((typeof e>"u"?"undefined":sm(e))!=="object"||typeof e.createPolicy!="function")return null;var n=null,i="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(i)&&(n=t.currentScript.getAttribute(i));var s="dompurify"+(n?"#"+n:"");try{return e.createPolicy(s,{createHTML:u(function(a){return a},"createHTML")})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},"_createTrustedTypesPolicy");function yV(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:vX(),e=u(function($){return yV($)},"DOMPurify");if(e.version="2.3.1",e.removed=[],!o||!o.document||o.document.nodeType!==9)return e.isSupported=!1,e;var t=o.document,n=o.document,i=o.DocumentFragment,s=o.HTMLTemplateElement,r=o.Node,a=o.Element,l=o.NodeFilter,c=o.NamedNodeMap,d=c===void 0?o.NamedNodeMap||o.MozNamedAttrMap:c,h=o.Text,g=o.Comment,f=o.DOMParser,p=o.trustedTypes,_=a.prototype,v=Kv(_,"cloneNode"),C=Kv(_,"nextSibling"),w=Kv(_,"childNodes"),y=Kv(_,"parentNode");if(typeof s=="function"){var S=n.createElement("template");S.content&&S.content.ownerDocument&&(n=S.content.ownerDocument)}var E=CX(p,t),k=E&&Ih?E.createHTML(""):"",T=n,x=T.implementation,M=T.createNodeIterator,F=T.createDocumentFragment,V=T.getElementsByTagName,G=t.importNode,j={};try{j=ld(n).documentMode?n.documentMode:{}}catch{}var ae={};e.isSupported=typeof y=="function"&&x&&typeof x.createHTMLDocument<"u"&&j!==9;var he=hX,Se=gX,Te=fX,ke=pX,Ue=bX,Rt=_X,Tt=mX,Ce=null,_e=mt({},[].concat(Ar(sP),Ar(eT),Ar(tT),Ar(nT),Ar(oP))),It=null,Bn=mt({},[].concat(Ar(rP),Ar(iT),Ar(aP),Ar(jv))),Ni=null,Po=null,fa=!0,Ro=!0,kr=!1,Oe=!1,Vl=!1,kp=!1,Mp=!1,Hl=!1,Ah=!1,Pv=!0,Ih=!1,Rv=!0,X=!0,z=!1,K={},D=null,N=mt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),W=null,O=mt({},["audio","video","img","source","image","track"]),Z=null,se=mt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),xe="http://www.w3.org/1998/Math/MathML",we="http://www.w3.org/2000/svg",We="http://www.w3.org/1999/xhtml",Ve=We,yt=!1,ut=null,Ee=n.createElement("form"),wn=u(function($){ut&&ut===$||((!$||(typeof $>"u"?"undefined":sm($))!=="object")&&($={}),$=ld($),Ce="ALLOWED_TAGS"in $?mt({},$.ALLOWED_TAGS):_e,It="ALLOWED_ATTR"in $?mt({},$.ALLOWED_ATTR):Bn,Z="ADD_URI_SAFE_ATTR"in $?mt(ld(se),$.ADD_URI_SAFE_ATTR):se,W="ADD_DATA_URI_TAGS"in $?mt(ld(O),$.ADD_DATA_URI_TAGS):O,D="FORBID_CONTENTS"in $?mt({},$.FORBID_CONTENTS):N,Ni="FORBID_TAGS"in $?mt({},$.FORBID_TAGS):{},Po="FORBID_ATTR"in $?mt({},$.FORBID_ATTR):{},K="USE_PROFILES"in $?$.USE_PROFILES:!1,fa=$.ALLOW_ARIA_ATTR!==!1,Ro=$.ALLOW_DATA_ATTR!==!1,kr=$.ALLOW_UNKNOWN_PROTOCOLS||!1,Oe=$.SAFE_FOR_TEMPLATES||!1,Vl=$.WHOLE_DOCUMENT||!1,Hl=$.RETURN_DOM||!1,Ah=$.RETURN_DOM_FRAGMENT||!1,Pv=$.RETURN_DOM_IMPORT!==!1,Ih=$.RETURN_TRUSTED_TYPE||!1,Mp=$.FORCE_BODY||!1,Rv=$.SANITIZE_DOM!==!1,X=$.KEEP_CONTENT!==!1,z=$.IN_PLACE||!1,Tt=$.ALLOWED_URI_REGEXP||Tt,Ve=$.NAMESPACE||We,Oe&&(Ro=!1),Ah&&(Hl=!0),K&&(Ce=mt({},[].concat(Ar(oP))),It=[],K.html===!0&&(mt(Ce,sP),mt(It,rP)),K.svg===!0&&(mt(Ce,eT),mt(It,iT),mt(It,jv)),K.svgFilters===!0&&(mt(Ce,tT),mt(It,iT),mt(It,jv)),K.mathMl===!0&&(mt(Ce,nT),mt(It,aP),mt(It,jv))),$.ADD_TAGS&&(Ce===_e&&(Ce=ld(Ce)),mt(Ce,$.ADD_TAGS)),$.ADD_ATTR&&(It===Bn&&(It=ld(It)),mt(It,$.ADD_ATTR)),$.ADD_URI_SAFE_ATTR&&mt(Z,$.ADD_URI_SAFE_ATTR),$.FORBID_CONTENTS&&(D===N&&(D=ld(D)),mt(D,$.FORBID_CONTENTS)),X&&(Ce["#text"]=!0),Vl&&mt(Ce,["html","head","body"]),Ce.table&&(mt(Ce,["tbody"]),delete Ni.tbody),ls&&ls($),ut=$)},"_parseConfig"),Qt=mt({},["mi","mo","mn","ms","mtext"]),Rs=mt({},["foreignobject","desc","title","annotation-xml"]),qt=mt({},eT);mt(qt,tT),mt(qt,dX);var Wn=mt({},nT);mt(Wn,uX);var sd=u(function($){var ve=y($);(!ve||!ve.tagName)&&(ve={namespaceURI:We,tagName:"template"});var Re=md($.tagName),Yt=md(ve.tagName);if($.namespaceURI===we)return ve.namespaceURI===We?Re==="svg":ve.namespaceURI===xe?Re==="svg"&&(Yt==="annotation-xml"||Qt[Yt]):Boolean(qt[Re]);if($.namespaceURI===xe)return ve.namespaceURI===We?Re==="math":ve.namespaceURI===we?Re==="math"&&Rs[Yt]:Boolean(Wn[Re]);if($.namespaceURI===We){if(ve.namespaceURI===we&&!Rs[Yt]||ve.namespaceURI===xe&&!Qt[Yt])return!1;var Pi=mt({},["title","style","font","a","script"]);return!Wn[Re]&&(Pi[Re]||!qt[Re])}return!1},"_checkValidNamespace"),ms=u(function($){Vp(e.removed,{element:$});try{$.parentNode.removeChild($)}catch{try{$.outerHTML=k}catch{$.remove()}}},"_forceRemove"),Mr=u(function($,ve){try{Vp(e.removed,{attribute:ve.getAttributeNode($),from:ve})}catch{Vp(e.removed,{attribute:null,from:ve})}if(ve.removeAttribute($),$==="is"&&!It[$])if(Hl||Ah)try{ms(ve)}catch{}else try{ve.setAttribute($,"")}catch{}},"_removeAttribute"),pa=u(function($){var ve=void 0,Re=void 0;if(Mp)$="<remove></remove>"+$;else{var Yt=nP($,/^[\r\n\t ]+/);Re=Yt&&Yt[0]}var Pi=E?E.createHTML($):$;if(Ve===We)try{ve=new f().parseFromString(Pi,"text/html")}catch{}if(!ve||!ve.documentElement){ve=x.createDocument(Ve,"template",null);try{ve.documentElement.innerHTML=yt?"":Pi}catch{}}var Ri=ve.body||ve.documentElement;return $&&Re&&Ri.insertBefore(n.createTextNode(Re),Ri.childNodes[0]||null),Ve===We?V.call(ve,Vl?"html":"body")[0]:Vl?ve.documentElement:Ri},"_initDocument"),od=u(function($){return M.call($.ownerDocument||$,$,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,null,!1)},"_createIterator"),Bl=u(function($){return $ instanceof h||$ instanceof g?!1:typeof $.nodeName!="string"||typeof $.textContent!="string"||typeof $.removeChild!="function"||!($.attributes instanceof d)||typeof $.removeAttribute!="function"||typeof $.setAttribute!="function"||typeof $.namespaceURI!="string"||typeof $.insertBefore!="function"},"_isClobbered"),rd=u(function($){return(typeof r>"u"?"undefined":sm(r))==="object"?$ instanceof r:$&&(typeof $>"u"?"undefined":sm($))==="object"&&typeof $.nodeType=="number"&&typeof $.nodeName=="string"},"_isNode"),po=u(function($,ve,Re){ae[$]&&rX(ae[$],function(Yt){Yt.call(e,ve,Re,ut)})},"_executeHook"),Fv=u(function($){var ve=void 0;if(po("beforeSanitizeElements",$,null),Bl($)||nP($.nodeName,/[\u0080-\uFFFF]/))return ms($),!0;var Re=md($.nodeName);if(po("uponSanitizeElement",$,{tagName:Re,allowedTags:Ce}),!rd($.firstElementChild)&&(!rd($.content)||!rd($.content.firstElementChild))&&ba(/<[/\w]/g,$.innerHTML)&&ba(/<[/\w]/g,$.textContent)||Re==="select"&&ba(/<template/i,$.innerHTML))return ms($),!0;if(!Ce[Re]||Ni[Re]){if(X&&!D[Re]){var Yt=y($)||$.parentNode,Pi=w($)||$.childNodes;if(Pi&&Yt)for(var Ri=Pi.length,Fi=Ri-1;Fi>=0;--Fi)Yt.insertBefore(v(Pi[Fi],!0),C($))}return ms($),!0}return $ instanceof a&&!sd($)||(Re==="noscript"||Re==="noembed")&&ba(/<\/no(script|embed)/i,$.innerHTML)?(ms($),!0):(Oe&&$.nodeType===3&&(ve=$.textContent,ve=Gl(ve,he," "),ve=Gl(ve,Se," "),$.textContent!==ve&&(Vp(e.removed,{element:$.cloneNode()}),$.textContent=ve)),po("afterSanitizeElements",$,null),!1)},"_sanitizeElements"),Dp=u(function($,ve,Re){if(Rv&&(ve==="id"||ve==="name")&&(Re in n||Re in Ee))return!1;if(!(Ro&&!Po[ve]&&ba(Te,ve))){if(!(fa&&ba(ke,ve))){if(!It[ve]||Po[ve])return!1;if(!Z[ve]){if(!ba(Tt,Gl(Re,Rt,""))){if(!((ve==="src"||ve==="xlink:href"||ve==="href")&&$!=="script"&&aX(Re,"data:")===0&&W[$])){if(!(kr&&!ba(Ue,Gl(Re,Rt,"")))){if(Re)return!1}}}}}}return!0},"_isValidAttribute"),Ov=u(function($){var ve=void 0,Re=void 0,Yt=void 0,Pi=void 0;po("beforeSanitizeAttributes",$,null);var Ri=$.attributes;if(Ri){var Fi={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:It};for(Pi=Ri.length;Pi--;){ve=Ri[Pi];var ma=ve,Ap=ma.name,_2=ma.namespaceURI;if(Re=lX(ve.value),Yt=md(Ap),Fi.attrName=Yt,Fi.attrValue=Re,Fi.keepAttr=!0,Fi.forceKeepAttr=void 0,po("uponSanitizeAttribute",$,Fi),Re=Fi.attrValue,!Fi.forceKeepAttr&&(Mr(Ap,$),!!Fi.keepAttr)){if(ba(/\/>/i,Re)){Mr(Ap,$);continue}Oe&&(Re=Gl(Re,he," "),Re=Gl(Re,Se," "));var Jj=$.nodeName.toLowerCase();if(Dp(Jj,Yt,Re))try{_2?$.setAttributeNS(_2,Ap,Re):$.setAttribute(Ap,Re),tP(e.removed)}catch{}}}po("afterSanitizeAttributes",$,null)}},"_sanitizeAttributes"),Zj=u(function ze($){var ve=void 0,Re=od($);for(po("beforeSanitizeShadowDOM",$,null);ve=Re.nextNode();)po("uponSanitizeShadowNode",ve,null),!Fv(ve)&&(ve.content instanceof i&&ze(ve.content),Ov(ve));po("afterSanitizeShadowDOM",$,null)},"_sanitizeShadowDOM");return e.sanitize=function(ze,$){var ve=void 0,Re=void 0,Yt=void 0,Pi=void 0,Ri=void 0;if(yt=!ze,yt&&(ze="<!-->"),typeof ze!="string"&&!rd(ze)){if(typeof ze.toString!="function")throw iP("toString is not a function");if(ze=ze.toString(),typeof ze!="string")throw iP("dirty is not a string, aborting")}if(!e.isSupported){if(sm(o.toStaticHTML)==="object"||typeof o.toStaticHTML=="function"){if(typeof ze=="string")return o.toStaticHTML(ze);if(rd(ze))return o.toStaticHTML(ze.outerHTML)}return ze}if(kp||wn($),e.removed=[],typeof ze=="string"&&(z=!1),!z)if(ze instanceof r)ve=pa("<!---->"),Re=ve.ownerDocument.importNode(ze,!0),Re.nodeType===1&&Re.nodeName==="BODY"||Re.nodeName==="HTML"?ve=Re:ve.appendChild(Re);else{if(!Hl&&!Oe&&!Vl&&ze.indexOf("<")===-1)return E&&Ih?E.createHTML(ze):ze;if(ve=pa(ze),!ve)return Hl?null:k}ve&&Mp&&ms(ve.firstChild);for(var Fi=od(z?ze:ve);Yt=Fi.nextNode();)Yt.nodeType===3&&Yt===Pi||Fv(Yt)||(Yt.content instanceof i&&Zj(Yt.content),Ov(Yt),Pi=Yt);if(Pi=null,z)return ze;if(Hl){if(Ah)for(Ri=F.call(ve.ownerDocument);ve.firstChild;)Ri.appendChild(ve.firstChild);else Ri=ve;return Pv&&(Ri=G.call(t,Ri,!0)),Ri}var ma=Vl?ve.outerHTML:ve.innerHTML;return Oe&&(ma=Gl(ma,he," "),ma=Gl(ma,Se," ")),E&&Ih?E.createHTML(ma):ma},e.setConfig=function(ze){wn(ze),kp=!0},e.clearConfig=function(){ut=null,kp=!1},e.isValidAttribute=function(ze,$,ve){ut||wn({});var Re=md(ze),Yt=md($);return Dp(Re,Yt,ve)},e.addHook=function(ze,$){typeof $=="function"&&(ae[ze]=ae[ze]||[],Vp(ae[ze],$))},e.removeHook=function(ze){ae[ze]&&tP(ae[ze])},e.removeHooks=function(ze){ae[ze]&&(ae[ze]=[])},e.removeAllHooks=function(){ae={}},e}u(yV,"createDOMPurify");var da=yV();da.version;da.isSupported;const wX=da.sanitize;da.setConfig;da.clearConfig;da.isValidAttribute;const SV=da.addHook,TV=da.removeHook;da.removeHooks;da.removeAllHooks;var Pe;(function(o){o.inMemory="inmemory",o.vscode="vscode",o.internal="private",o.walkThrough="walkThrough",o.walkThroughSnippet="walkThroughSnippet",o.http="http",o.https="https",o.file="file",o.mailto="mailto",o.untitled="untitled",o.data="data",o.command="command",o.vscodeRemote="vscode-remote",o.vscodeRemoteResource="vscode-remote-resource",o.vscodeUserData="vscode-userdata",o.vscodeCustomEditor="vscode-custom-editor",o.vscodeNotebook="vscode-notebook",o.vscodeNotebookCell="vscode-notebook-cell",o.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",o.vscodeNotebookCellOutput="vscode-notebook-cell-output",o.vscodeInteractive="vscode-interactive",o.vscodeInteractiveInput="vscode-interactive-input",o.vscodeSettings="vscode-settings",o.vscodeWorkspaceTrust="vscode-workspace-trust",o.vscodeTerminal="vscode-terminal",o.webviewPanel="webview-panel",o.vscodeWebview="vscode-webview",o.extension="extension",o.vscodeFileResource="vscode-file",o.tmp="tmp",o.vsls="vsls",o.vscodeSourceControl="vscode-scm"})(Pe||(Pe={}));const yX="tkn";class LV{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._remoteResourcesPath=`/${Pe.vscodeRemoteResource}`}setPreferredWebSchema(e){this._preferredWebSchema=e}rewrite(e){if(this._delegate)return this._delegate(e);const t=e.authority;let n=this._hosts[t];n&&n.indexOf(":")!==-1&&(n=`[${n}]`);const i=this._ports[t],s=this._connectionTokens[t];let r=`path=${encodeURIComponent(e.path)}`;return typeof s=="string"&&(r+=`&${yX}=${encodeURIComponent(s)}`),be.from({scheme:Xc?this._preferredWebSchema:Pe.vscodeRemoteResource,authority:`${n}:${i}`,path:this._remoteResourcesPath,query:r})}}u(LV,"RemoteAuthoritiesImpl");const xV=new LV;class nf{asBrowserUri(e,t){const n=this.toUri(e,t);return n.scheme===Pe.vscodeRemote?xV.rewrite(n):n.scheme===Pe.file&&(cr||h$&&on.origin===`${Pe.vscodeFileResource}://${nf.FALLBACK_AUTHORITY}`)?n.with({scheme:Pe.vscodeFileResource,authority:n.authority||nf.FALLBACK_AUTHORITY,query:null,fragment:null}):n}toUri(e,t){return be.isUri(e)?e:be.parse(t.toUrl(e))}}u(nf,"FileAccessImpl");nf.FALLBACK_AUTHORITY="vscode-app";const EV=new nf;function Tn(o){for(;o.firstChild;)o.firstChild.remove()}u(Tn,"clearNode");function uA(o){var e;return(e=o?.isConnected)!==null&&e!==void 0?e:!1}u(uA,"isInDOM");class hA{constructor(e,t,n,i){this._node=e,this._type=t,this._handler=n,this._options=i||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}u(hA,"DomListener");function Y(o,e,t,n){return new hA(o,e,t,n)}u(Y,"addDisposableListener");function kV(o){return function(e){return o(new sr(e))}}u(kV,"_wrapAsStandardMouseEvent");function SX(o){return function(e){return o(new Pt(e))}}u(SX,"_wrapAsStandardKeyboardEvent");const Dn=u(function(e,t,n,i){let s=n;return t==="click"||t==="mousedown"?s=kV(n):(t==="keydown"||t==="keypress"||t==="keyup")&&(s=SX(n)),Y(e,t,s,i)},"addStandardDisposableListener"),TX=u(function(e,t,n){const i=kV(t);return LX(e,i,n)},"addStandardDisposableListener");function LX(o,e,t){return Y(o,na&&dA.pointerEvents?le.POINTER_DOWN:le.MOUSE_DOWN,e,t)}u(LX,"addDisposableGenericMouseDownListener");function Fo(o,e,t){let n=null;const i=u(l=>a.fire(l),"handler"),s=u(()=>{n||(n=new hA(o,e,i,t))},"onFirstListenerAdd"),r=u(()=>{n&&(n.dispose(),n=null)},"onLastListenerRemove"),a=new R({onFirstListenerAdd:s,onLastListenerRemove:r});return a}u(Fo,"createEventEmitter");let sT=null;function xX(o){if(!sT){const e=u(t=>setTimeout(()=>t(new Date().getTime()),0),"emulatedRequestAnimationFrame");sT=self.requestAnimationFrame||self.msRequestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame||self.oRequestAnimationFrame||e}return sT.call(self,o)}u(xX,"doRequestAnimationFrame");let MV,br;class JC{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){Ie(e)}}static sort(e,t){return t.priority-e.priority}}u(JC,"AnimationFrameQueueItem");(function(){let o=[],e=null,t=!1,n=!1;const i=u(()=>{for(t=!1,e=o,o=[],n=!0;e.length>0;)e.sort(JC.sort),e.shift().execute();n=!1},"animationFrameRunner");br=u((s,r=0)=>{const a=new JC(s,r);return o.push(a),t||(t=!0,xX(i)),a},"scheduleAtNextAnimationFrame"),MV=u((s,r)=>{if(n){const a=new JC(s,r);return e.push(a),a}else return br(s,r)},"runAtThisOrScheduleAtNextAnimationFrame")})();function Yw(o){return document.defaultView.getComputedStyle(o,null)}u(Yw,"getComputedStyle$1");function Xw(o){if(o!==document.body)return new Ct(o.clientWidth,o.clientHeight);if(na&&window.visualViewport)return new Ct(window.visualViewport.width,window.visualViewport.height);if(window.innerWidth&&window.innerHeight)return new Ct(window.innerWidth,window.innerHeight);if(document.body&&document.body.clientWidth&&document.body.clientHeight)return new Ct(document.body.clientWidth,document.body.clientHeight);if(document.documentElement&&document.documentElement.clientWidth&&document.documentElement.clientHeight)return new Ct(document.documentElement.clientWidth,document.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}u(Xw,"getClientArea");class $t{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,n){const i=Yw(e);let s="0";return i&&(i.getPropertyValue?s=i.getPropertyValue(t):s=i.getAttribute(n)),$t.convertToPixels(e,s)}static getBorderLeftWidth(e){return $t.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return $t.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return $t.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return $t.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return $t.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return $t.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return $t.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return $t.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return $t.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return $t.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return $t.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return $t.getDimension(e,"margin-bottom","marginBottom")}}u($t,"SizeUtils");class Ct{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new Ct(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof Ct?e:new Ct(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}}u(Ct,"Dimension");Ct.None=new Ct(0,0);function DV(o){let e=o.offsetParent,t=o.offsetTop,n=o.offsetLeft;for(;(o=o.parentNode)!==null&&o!==document.body&&o!==document.documentElement;){t-=o.scrollTop;const i=IV(o)?null:Yw(o);i&&(n-=i.direction!=="rtl"?o.scrollLeft:-o.scrollLeft),o===e&&(n+=$t.getBorderLeftWidth(o),t+=$t.getBorderTopWidth(o),t+=o.offsetTop,n+=o.offsetLeft,e=o.offsetParent)}return{left:n,top:t}}u(DV,"getTopLeftOffset");function EX(o,e,t){typeof e=="number"&&(o.style.width=`${e}px`),typeof t=="number"&&(o.style.height=`${t}px`)}u(EX,"size");function li(o){const e=o.getBoundingClientRect();return{left:e.left+al.scrollX,top:e.top+al.scrollY,width:e.width,height:e.height}}u(li,"getDomNodePagePosition");function kX(o){let e=o,t=1;do{const n=Yw(e).zoom;n!=null&&n!=="1"&&(t*=n),e=e.parentElement}while(e!==null&&e!==document.documentElement);return t}u(kX,"getDomNodeZoomLevel");const al=new class{get scrollX(){return typeof window.scrollX=="number"?window.scrollX:document.body.scrollLeft+document.documentElement.scrollLeft}get scrollY(){return typeof window.scrollY=="number"?window.scrollY:document.body.scrollTop+document.documentElement.scrollTop}};function bo(o){const e=$t.getMarginLeft(o)+$t.getMarginRight(o);return o.offsetWidth+e}u(bo,"getTotalWidth");function oT(o){const e=$t.getBorderLeftWidth(o)+$t.getBorderRightWidth(o),t=$t.getPaddingLeft(o)+$t.getPaddingRight(o);return o.offsetWidth-e-t}u(oT,"getContentWidth");function MX(o){const e=$t.getBorderTopWidth(o)+$t.getBorderBottomWidth(o),t=$t.getPaddingTop(o)+$t.getPaddingBottom(o);return o.offsetHeight-e-t}u(MX,"getContentHeight");function jx(o){const e=$t.getMarginTop(o)+$t.getMarginBottom(o);return o.offsetHeight+e}u(jx,"getTotalHeight");function ll(o,e){for(;o;){if(o===e)return!0;o=o.parentNode}return!1}u(ll,"isAncestor$1");function AV(o,e,t){for(;o&&o.nodeType===o.ELEMENT_NODE;){if(o.classList.contains(e))return o;if(t){if(typeof t=="string"){if(o.classList.contains(t))return null}else if(o===t)return null}o=o.parentNode}return null}u(AV,"findParentWithClass");function rT(o,e,t){return!!AV(o,e,t)}u(rT,"hasParentWithClass");function IV(o){return o&&!!o.host&&!!o.mode}u(IV,"isShadowRoot");function fb(o){return!!wu(o)}u(fb,"isInShadowDOM");function wu(o){for(;o.parentNode;){if(o===document.body)return null;o=o.parentNode}return IV(o)?o:null}u(wu,"getShadowRoot");function kg(){let o=document.activeElement;for(;o?.shadowRoot;)o=o.shadowRoot.activeElement;return o}u(kg,"getActiveElement");function oo(o=document.getElementsByTagName("head")[0]){const e=document.createElement("style");return e.type="text/css",e.media="screen",o.appendChild(e),e}u(oo,"createStyleSheet");let aT=null;function NV(){return aT||(aT=oo()),aT}u(NV,"getSharedStyleSheet");function DX(o){var e,t;return!((e=o?.sheet)===null||e===void 0)&&e.rules?o.sheet.rules:!((t=o?.sheet)===null||t===void 0)&&t.cssRules?o.sheet.cssRules:[]}u(DX,"getDynamicStyleSheetRules");function $x(o,e,t=NV()){!t||!e||t.sheet.insertRule(o+"{"+e+"}",0)}u($x,"createCSSRule");function lP(o,e=NV()){if(!e)return;const t=DX(e),n=[];for(let i=0;i<t.length;i++)t[i].selectorText.indexOf(o)!==-1&&n.push(i);for(let i=n.length-1;i>=0;i--)e.sheet.deleteRule(n[i])}u(lP,"removeCSSRulesContainingSelector");function PV(o){return typeof HTMLElement=="object"?o instanceof HTMLElement:o&&typeof o=="object"&&o.nodeType===1&&typeof o.nodeName=="string"}u(PV,"isHTMLElement");const le={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:hc?"webkitAnimationStart":"animationstart",ANIMATION_END:hc?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:hc?"webkitAnimationIteration":"animationiteration"},ft={stop:function(o,e){o.preventDefault?o.preventDefault():o.returnValue=!1,e&&(o.stopPropagation?o.stopPropagation():o.cancelBubble=!0)}};function AX(o){const e=[];for(let t=0;o&&o.nodeType===o.ELEMENT_NODE;t++)e[t]=o.scrollTop,o=o.parentNode;return e}u(AX,"saveParentsScrollTop");function IX(o,e){for(let t=0;o&&o.nodeType===o.ELEMENT_NODE;t++)o.scrollTop!==e[t]&&(o.scrollTop=e[t]),o=o.parentNode}u(IX,"restoreParentsScrollTop");class pb extends U{constructor(e){super(),this._onDidFocus=this._register(new R),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new R),this.onDidBlur=this._onDidBlur.event;let t=pb.hasFocusWithin(e),n=!1;const i=u(()=>{n=!1,t||(t=!0,this._onDidFocus.fire())},"onFocus"),s=u(()=>{t&&(n=!0,window.setTimeout(()=>{n&&(n=!1,t=!1,this._onDidBlur.fire())},0))},"onBlur");this._refreshStateHandler=()=>{pb.hasFocusWithin(e)!==t&&(t?s():i())},this._register(Y(e,le.FOCUS,i,!0)),this._register(Y(e,le.BLUR,s,!0)),this._register(Y(e,le.FOCUS_IN,()=>this._refreshStateHandler())),this._register(Y(e,le.FOCUS_OUT,()=>this._refreshStateHandler()))}static hasFocusWithin(e){const t=wu(e),n=t?t.activeElement:document.activeElement;return ll(n,e)}}u(pb,"FocusTracker");function yu(o){return new pb(o)}u(yu,"trackFocus");function q(o,...e){if(o.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}u(q,"append$1");function NX(o,e){return o.insertBefore(e,o.firstChild),e}u(NX,"prepend$1");function kc(o,...e){o.innerText="",q(o,...e)}u(kc,"reset");const PX=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var mb;(function(o){o.HTML="http://www.w3.org/1999/xhtml",o.SVG="http://www.w3.org/2000/svg"})(mb||(mb={}));function RV(o,e,t,...n){const i=PX.exec(e);if(!i)throw new Error("Bad use of emmet");t=Object.assign({},t||{});const s=i[1]||"div";let r;return o!==mb.HTML?r=document.createElementNS(o,s):r=document.createElement(s),i[3]&&(r.id=i[3]),i[4]&&(r.className=i[4].replace(/\./g," ").trim()),Object.keys(t).forEach(a=>{const l=t[a];typeof l>"u"||(/^on\w+$/.test(a)?r[a]=l:a==="selected"?l&&r.setAttribute(a,"true"):r.setAttribute(a,l))}),r.append(...n),r}u(RV,"_$");function ee(o,e,...t){return RV(mb.HTML,o,e,...t)}u(ee,"$$c");ee.SVG=function(o,e,...t){return RV(mb.SVG,o,e,...t)};function Ss(...o){for(const e of o)e.style.display="",e.removeAttribute("aria-hidden")}u(Ss,"show");function Ui(...o){for(const e of o)e.style.display="none",e.setAttribute("aria-hidden","true")}u(Ui,"hide");function RX(o){return Array.prototype.slice.call(document.getElementsByTagName(o),0)}u(RX,"getElementsByTagName");function cP(o){const e=window.devicePixelRatio*o;return Math.max(1,Math.floor(e))/window.devicePixelRatio}u(cP,"computeScreenAwareSize");function FV(o){window.open(o,"_blank","noopener")}u(FV,"windowOpenNoOpener");function FX(o){const e=u(()=>{o(),t=br(e)},"step");let t=br(e);return He(()=>t.dispose())}u(FX,"animate");xV.setPreferredWebSchema(/^https:/.test(window.location.href)?"https":"http");function Su(o){return o?`url('${EV.asBrowserUri(o).toString(!0).replace(/'/g,"%27")}')`:"url('')"}u(Su,"asCSSUrl");function dP(o){return`'${o.replace(/'/g,"%27")}'`}u(dP,"asCSSPropertyValue");function OX(o,e=!1){const t=document.createElement("a");return SV("afterSanitizeAttributes",n=>{for(const i of["href","src"])if(n.hasAttribute(i)){const s=n.getAttribute(i);if(i==="href"&&s.startsWith("#"))continue;if(t.href=s,!o.includes(t.protocol.replace(/:$/,""))){if(e&&i==="src"&&t.href.startsWith("data:"))continue;n.removeAttribute(i)}}}),He(()=>{TV("afterSanitizeAttributes")})}u(OX,"hookDomPurifyHrefAndSrcSanitizer");class ja extends R{constructor(){super(),this._subscriptions=new J,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(Y(window,"keydown",e=>{if(e.defaultPrevented)return;const t=new Pt(e);if(!(t.keyCode===6&&e.repeat)){if(e.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(e.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(e.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(e.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(t.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=e,this.fire(this._keyStatus))}},!0)),this._subscriptions.add(Y(window,"keyup",e=>{e.defaultPrevented||(!e.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!e.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!e.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!e.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=e,this.fire(this._keyStatus)))},!0)),this._subscriptions.add(Y(document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(Y(document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(Y(document.body,"mousemove",e=>{e.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),this._subscriptions.add(Y(window,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return ja.instance||(ja.instance=new ja),ja.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}u(ja,"ModifierKeyEmitter");class OV extends U{constructor(e,t){super(),this.element=e,this.callbacks=t,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){this._register(Y(this.element,le.DRAG_ENTER,e=>{this.counter++,this.dragStartTime=e.timeStamp,this.callbacks.onDragEnter(e)})),this._register(Y(this.element,le.DRAG_OVER,e=>{var t,n;e.preventDefault(),(n=(t=this.callbacks).onDragOver)===null||n===void 0||n.call(t,e,e.timeStamp-this.dragStartTime)})),this._register(Y(this.element,le.DRAG_LEAVE,e=>{this.counter--,this.counter===0&&(this.dragStartTime=0,this.callbacks.onDragLeave(e))})),this._register(Y(this.element,le.DRAG_END,e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDragEnd(e)})),this._register(Y(this.element,le.DROP,e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDrop(e)}))}}u(OV,"DragAndDropObserver");const uP=2e4;let xd,QC,qx,e0,Yx;function VX(o){xd=document.createElement("div"),xd.className="monaco-aria-container";const e=u(()=>{const n=document.createElement("div");return n.className="monaco-alert",n.setAttribute("role","alert"),n.setAttribute("aria-atomic","true"),xd.appendChild(n),n},"createAlertContainer");QC=e(),qx=e();const t=u(()=>{const n=document.createElement("div");return n.className="monaco-status",n.setAttribute("role","complementary"),n.setAttribute("aria-live","polite"),n.setAttribute("aria-atomic","true"),xd.appendChild(n),n},"createStatusContainer");e0=t(),Yx=t(),o.appendChild(xd)}u(VX,"setARIAContainer");function Zn(o){xd&&(QC.textContent!==o?(Tn(qx),r1(QC,o)):(Tn(QC),r1(qx,o)))}u(Zn,"alert");function o1(o){xd&&(Xe?Zn(o):e0.textContent!==o?(Tn(Yx),r1(e0,o)):(Tn(e0),r1(Yx,o)))}u(o1,"status");function r1(o,e){Tn(o),e.length>uP&&(e=e.substr(0,uP)),o.textContent=e,o.style.visibility="hidden",o.style.visibility="visible"}u(r1,"insertMessage");const gA=Je("markerDecorationsService"),Ji=Je("textModelService");var bb=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class Yi extends U{constructor(e,t="",n="",i=!0,s){super(),this._onDidChange=this._register(new R),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=n,this._enabled=i,this._actionCallback=s}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}run(e,t){return bb(this,void 0,void 0,function*(){this._actionCallback&&(yield this._actionCallback(e))})}}u(Yi,"Action");class Tu extends U{constructor(){super(...arguments),this._onBeforeRun=this._register(new R),this.onBeforeRun=this._onBeforeRun.event,this._onDidRun=this._register(new R),this.onDidRun=this._onDidRun.event}run(e,t){return bb(this,void 0,void 0,function*(){if(!e.enabled)return;this._onBeforeRun.fire({action:e});let n;try{yield this.runAction(e,t)}catch(i){n=i}this._onDidRun.fire({action:e,error:n})})}runAction(e,t){return bb(this,void 0,void 0,function*(){yield e.run(t)})}}u(Tu,"ActionRunner");class Jn extends Yi{constructor(e){super(Jn.ID,e,e?"separator text":"separator"),this.checked=!1,this.enabled=!1}}u(Jn,"Separator");Jn.ID="vs.actions.separator";class sf{constructor(e,t,n,i){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=i,this._actions=n}get actions(){return this._actions}dispose(){}run(){return bb(this,void 0,void 0,function*(){})}}u(sf,"SubmenuAction");class x_ extends Yi{constructor(){super(x_.ID,m("submenu.empty","(empty)"),void 0,!1)}}u(x_,"EmptySubmenuAction");x_.ID="vs.actions.empty";function hP(o){var e,t;return{id:o.id,label:o.label,class:void 0,enabled:(e=o.enabled)!==null&&e!==void 0?e:!0,checked:(t=o.checked)!==null&&t!==void 0?t:!1,run:()=>bb(this,void 0,void 0,function*(){return o.run()}),tooltip:o.label,dispose:()=>{}}}u(hP,"toAction");const hn=Je("commandService"),Qe=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new R,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(o,e){if(!o)throw new Error("invalid command");if(typeof o=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:o,handler:e})}if(o.description){const r=[];for(const l of o.description.args)r.push(l.constraint);const a=o.handler;o.handler=function(l,...c){return M$(c,r),a(l,...c)}}const{id:t}=o;let n=this._commands.get(t);n||(n=new vi,this._commands.set(t,n));const i=n.unshift(o),s=He(()=>{i();const r=this._commands.get(t);r?.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),s}registerCommandAlias(o,e){return Qe.registerCommand(o,(t,...n)=>t.get(hn).executeCommand(e,...n))}getCommand(o){const e=this._commands.get(o);if(!(!e||e.isEmpty()))return je.first(e)}getCommands(){const o=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&o.set(e,t)}return o}};Qe.registerCommand("noop",()=>{});const fi=new Map;fi.set("false",!1);fi.set("true",!0);fi.set("isMac",Xe);fi.set("isLinux",hi);fi.set("isWindows",ei);fi.set("isWeb",Xc);fi.set("isMacNative",Xe&&!Xc);fi.set("isEdge",b$);fi.set("isFirefox",p$);fi.set("isChrome",SO);fi.set("isSafari",m$);const HX=Object.prototype.hasOwnProperty;class oe{static has(e){return _l.create(e)}static equals(e,t){return Lu.create(e,t)}static regex(e,t){return _b.create(e,t)}static not(e){return Mc.create(e)}static and(...e){return $a.create(e,null)}static or(...e){return jr.create(e,null,!0)}static deserialize(e,t=!1){if(e)return this._deserializeOrExpression(e,t)}static _deserializeOrExpression(e,t){const n=e.split("||");return jr.create(n.map(i=>this._deserializeAndExpression(i,t)),null,!0)}static _deserializeAndExpression(e,t){const n=e.split("&&");return $a.create(n.map(i=>this._deserializeOne(i,t)),null)}static _deserializeOne(e,t){if(e=e.trim(),e.indexOf("!=")>=0){const n=e.split("!=");return M_.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf("==")>=0){const n=e.split("==");return Lu.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf("=~")>=0){const n=e.split("=~");return _b.create(n[0].trim(),this._deserializeRegexValue(n[1],t))}if(e.indexOf(" not in ")>=0){const n=e.split(" not in ");return k_.create(n[0].trim(),n[1].trim())}if(e.indexOf(" in ")>=0){const n=e.split(" in ");return E_.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+>=[^<=>]+$/.test(e)){const n=e.split(">=");return A_.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(e)){const n=e.split(">");return D_.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(e)){const n=e.split("<=");return N_.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(e)){const n=e.split("<");return I_.create(n[0].trim(),n[1].trim())}return/^\!\s*/.test(e)?Mc.create(e.substr(1).trim()):_l.create(e)}static _deserializeValue(e,t){if(e=e.trim(),e==="true")return!0;if(e==="false")return!1;const n=/^'([^']*)'$/.exec(e);return n?n[1].trim():e}static _deserializeRegexValue(e,t){if(F4(e)){if(t)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}const n=e.indexOf("/"),i=e.lastIndexOf("/");if(n===i||n<0){if(t)throw new Error(`bad regexp-value '${e}', missing /-enclosure`);return console.warn(`bad regexp-value '${e}', missing /-enclosure`),null}const s=e.slice(n+1,i),r=e[i+1]==="i"?"i":"";try{return new RegExp(s,r)}catch(a){if(t)throw new Error(`bad regexp-value '${e}', parse error: ${a}`);return console.warn(`bad regexp-value '${e}', parse error: ${a}`),null}}}u(oe,"ContextKeyExpr");function BX(o,e){const t=o?o.substituteConstants():void 0,n=e?e.substituteConstants():void 0;return!t&&!n?!0:!t||!n?!1:t.equals(n)}u(BX,"expressionsAreEqualWithConstantSubstitution");function Mg(o,e){return o.cmp(e)}u(Mg,"cmp");class cs{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return Ns.INSTANCE}}u(cs,"ContextKeyFalseExpr");cs.INSTANCE=new cs;class Ns{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return cs.INSTANCE}}u(Ns,"ContextKeyTrueExpr");Ns.INSTANCE=new Ns;class _l{constructor(e,t){this.key=e,this.negated=t,this.type=2}static create(e,t=null){const n=fi.get(e);return typeof n=="boolean"?n?Ns.INSTANCE:cs.INSTANCE:new _l(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:HV(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=fi.get(this.key);return typeof e=="boolean"?e?Ns.INSTANCE:cs.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=Mc.create(this.key,this)),this.negated}}u(_l,"ContextKeyDefinedExpr");class Lu{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=4}static create(e,t,n=null){if(typeof t=="boolean")return t?_l.create(e,n):Mc.create(e,n);const i=fi.get(e);return typeof i=="boolean"?t===(i?"true":"false")?Ns.INSTANCE:cs.INSTANCE:new Lu(e,t,n)}cmp(e){return e.type!==this.type?this.type-e.type:rh(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=fi.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Ns.INSTANCE:cs.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=M_.create(this.key,this.value,this)),this.negated}}u(Lu,"ContextKeyEqualsExpr");class E_{constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}static create(e,t){return new E_(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:rh(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.includes(n):typeof n=="string"&&typeof t=="object"&&t!==null?HX.call(t,n):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=k_.create(this.key,this.valueKey)),this.negated}}u(E_,"ContextKeyInExpr");class k_{constructor(e,t){this.key=e,this.valueKey=t,this.type=11,this._negated=E_.create(e,t)}static create(e,t){return new k_(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}negate(){return this._negated}}u(k_,"ContextKeyNotInExpr");class M_{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=5}static create(e,t,n=null){if(typeof t=="boolean")return t?Mc.create(e,n):_l.create(e,n);const i=fi.get(e);return typeof i=="boolean"?t===(i?"true":"false")?cs.INSTANCE:Ns.INSTANCE:new M_(e,t,n)}cmp(e){return e.type!==this.type?this.type-e.type:rh(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=fi.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?cs.INSTANCE:Ns.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Lu.create(this.key,this.value,this)),this.negated}}u(M_,"ContextKeyNotEqualsExpr");class Mc{constructor(e,t){this.key=e,this.negated=t,this.type=3}static create(e,t=null){const n=fi.get(e);return typeof n=="boolean"?n?cs.INSTANCE:Ns.INSTANCE:new Mc(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:HV(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=fi.get(this.key);return typeof e=="boolean"?e?cs.INSTANCE:Ns.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=_l.create(this.key,this)),this.negated}}u(Mc,"ContextKeyNotExpr");function Zw(o,e){if(typeof o=="string"){const t=parseFloat(o);isNaN(t)||(o=t)}return typeof o=="string"||typeof o=="number"?e(o):cs.INSTANCE}u(Zw,"withFloatOrStr");class D_{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=12}static create(e,t,n=null){return Zw(t,i=>new D_(e,i,n))}cmp(e){return e.type!==this.type?this.type-e.type:rh(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=N_.create(this.key,this.value,this)),this.negated}}u(D_,"ContextKeyGreaterExpr");class A_{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=13}static create(e,t,n=null){return Zw(t,i=>new A_(e,i,n))}cmp(e){return e.type!==this.type?this.type-e.type:rh(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=I_.create(this.key,this.value,this)),this.negated}}u(A_,"ContextKeyGreaterEqualsExpr");class I_{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=14}static create(e,t,n=null){return Zw(t,i=>new I_(e,i,n))}cmp(e){return e.type!==this.type?this.type-e.type:rh(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=A_.create(this.key,this.value,this)),this.negated}}u(I_,"ContextKeySmallerExpr");class N_{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=15}static create(e,t,n=null){return Zw(t,i=>new N_(e,i,n))}cmp(e){return e.type!==this.type?this.type-e.type:rh(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=D_.create(this.key,this.value,this)),this.negated}}u(N_,"ContextKeySmallerEqualsExpr");class _b{constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}static create(e,t){return new _b(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return this.key===e.key&&t===n}return!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?"i":""}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Jw.create(this)),this.negated}}u(_b,"ContextKeyRegexExpr");class Jw{constructor(e){this._actual=e,this.type=8}static create(e){return new Jw(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}u(Jw,"ContextKeyNotRegexExpr");function VV(o){let e=null;for(let t=0,n=o.length;t<n;t++){const i=o[t].substituteConstants();if(o[t]!==i&&e===null){e=[];for(let s=0;s<t;s++)e[s]=o[s]}e!==null&&(e[t]=i)}return e===null?o:e}u(VV,"eliminateConstantsInArray");class $a{constructor(e,t){this.expr=e,this.negated=t,this.type=6}static create(e,t){return $a._normalizeArr(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const i=Mg(this.expr[t],e.expr[t]);if(i!==0)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=VV(this.expr);return e===this.expr?this:$a.create(e,this.negated)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t){const n=[];let i=!1;for(const s of e)if(s){if(s.type===1){i=!0;continue}if(s.type===0)return cs.INSTANCE;if(s.type===6){n.push(...s.expr);continue}n.push(s)}if(n.length===0&&i)return Ns.INSTANCE;if(n.length!==0){if(n.length===1)return n[0];n.sort(Mg);for(let s=1;s<n.length;s++)n[s-1].equals(n[s])&&(n.splice(s,1),s--);if(n.length===1)return n[0];for(;n.length>1;){const s=n[n.length-1];if(s.type!==9)break;n.pop();const r=n.pop(),a=n.length===0,l=jr.create(s.expr.map(c=>$a.create([c,r],null)),null,a);l&&(n.push(l),n.sort(Mg))}return n.length===1?n[0]:new $a(n,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());this.negated=jr.create(e,this,!0)}return this.negated}}u($a,"ContextKeyAndExpr");class jr{constructor(e,t){this.expr=e,this.negated=t,this.type=9}static create(e,t,n){return jr._normalizeArr(e,t,n)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const i=Mg(this.expr[t],e.expr[t]);if(i!==0)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=VV(this.expr);return e===this.expr?this:jr.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,n){let i=[],s=!1;if(e){for(let r=0,a=e.length;r<a;r++){const l=e[r];if(l){if(l.type===0){s=!0;continue}if(l.type===1)return Ns.INSTANCE;if(l.type===9){i=i.concat(l.expr);continue}i.push(l)}}if(i.length===0&&s)return cs.INSTANCE;i.sort(Mg)}if(i.length!==0){if(i.length===1)return i[0];for(let r=1;r<i.length;r++)i[r-1].equals(i[r])&&(i.splice(r,1),r--);if(i.length===1)return i[0];if(n){for(let r=0;r<i.length;r++)for(let a=r+1;a<i.length;a++)BV(i[r],i[a])&&(i.splice(a,1),a--);if(i.length===1)return i[0]}return new jr(i,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),n=e.shift(),i=[];for(const r of a1(t))for(const a of a1(n))i.push($a.create([r,a],null));const s=e.length===0;e.unshift(jr.create(i,null,s))}this.negated=e[0]}return this.negated}}u(jr,"ContextKeyOrExpr");class ce extends _l{constructor(e,t,n){super(e,null),this._defaultValue=t,typeof n=="object"?ce._info.push(Object.assign(Object.assign({},n),{key:e})):n!==!0&&ce._info.push({key:e,description:n,type:t!=null?typeof t:void 0})}static all(){return ce._info.values()}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return Lu.create(this.key,e)}}u(ce,"RawContextKey");ce._info=[];const De=Je("contextKeyService"),WX="setContext";function HV(o,e){return o<e?-1:o>e?1:0}u(HV,"cmp1");function rh(o,e,t,n){return o<t?-1:o>t?1:e<n?-1:e>n?1:0}u(rh,"cmp2");function BV(o,e){if(e.type===6&&o.type!==9&&o.type!==6){for(const i of e.expr)if(o.equals(i))return!0}const t=o.negate(),n=a1(t).concat(a1(e));n.sort(Mg);for(let i=0;i<n.length;i++){const r=n[i].negate();for(let a=i+1;a<n.length;a++){const l=n[a];if(r.equals(l))return!0}}return!1}u(BV,"implies");function a1(o){return o.type===9?o.expr:[o]}u(a1,"getTerminals");var qs;(function(o){o.DARK="dark",o.LIGHT="light",o.HIGH_CONTRAST_DARK="hcDark",o.HIGH_CONTRAST_LIGHT="hcLight"})(qs||(qs={}));function ui(o){return o===qs.HIGH_CONTRAST_DARK||o===qs.HIGH_CONTRAST_LIGHT}u(ui,"isHighContrast");function vb(o){return o===qs.DARK||o===qs.HIGH_CONTRAST_DARK}u(vb,"isDark");const wt=Je("themeService");var Xx;(function(o){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}u(e,"isThemeColor"),o.isThemeColor=e})(Xx||(Xx={}));function Zt(o){return{id:o}}u(Zt,"themeColorFromId");var ct;(function(o){function e(c){return c&&typeof c=="object"&&typeof c.id=="string"&&(typeof c.color>"u"||Xx.isThemeColor(c.color))}u(e,"isThemeIcon"),o.isThemeIcon=e;const t=new RegExp(`^\\$\\((${Mi.iconNameExpression}(?:${Mi.iconModifierExpression})?)\\)$`);function n(c){const d=t.exec(c);if(!d)return;const[,h]=d;return{id:h}}u(n,"fromString"),o.fromString=n;function i(c){return{id:c}}u(i,"fromId"),o.fromId=i;function s(c,d){let h=c.id;const g=h.lastIndexOf("~");return g!==-1&&(h=h.substring(0,g)),d&&(h=`${h}~${d}`),{id:h}}u(s,"modify"),o.modify=s;function r(c){const d=c.id.lastIndexOf("~");if(d!==-1)return c.id.substring(d+1)}u(r,"getModifier"),o.getModifier=r;function a(c,d){var h,g;return c.id===d.id&&((h=c.color)===null||h===void 0?void 0:h.id)===((g=d.color)===null||g===void 0?void 0:g.id)}u(a,"isEqual"),o.isEqual=a;function l(c,d){return{id:c.id,color:d?Zt(d):void 0}}u(l,"asThemeIcon"),o.asThemeIcon=l,o.asClassNameArray=Mi.asClassNameArray,o.asClassName=Mi.asClassName,o.asCSSSelector=Mi.asCSSSelector})(ct||(ct={}));function l1(o){switch(o){case qs.DARK:return"vs-dark";case qs.HIGH_CONTRAST_DARK:return"hc-black";case qs.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}u(l1,"getThemeTypeSelector");const WV={ThemingContribution:"base.contributions.theming"};class UV{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new R}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),He(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}}u(UV,"ThemingRegistry");const GV=new UV;zt.add(WV.ThemingContribution,GV);function At(o){return GV.onColorThemeChange(o)}u(At,"registerThemingParticipant");class zV extends U{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}u(zV,"Themable");var UX=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},gP=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};function ag(o){return o.command!==void 0}u(ag,"isIMenuItem");class P{constructor(e){if(P._instances.has(e))throw new TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);P._instances.set(e,this),this.id=e}}u(P,"MenuId");P._instances=new Map;P.CommandPalette=new P("CommandPalette");P.DebugBreakpointsContext=new P("DebugBreakpointsContext");P.DebugCallStackContext=new P("DebugCallStackContext");P.DebugConsoleContext=new P("DebugConsoleContext");P.DebugVariablesContext=new P("DebugVariablesContext");P.DebugWatchContext=new P("DebugWatchContext");P.DebugToolBar=new P("DebugToolBar");P.DebugToolBarStop=new P("DebugToolBarStop");P.EditorContext=new P("EditorContext");P.SimpleEditorContext=new P("SimpleEditorContext");P.EditorContextCopy=new P("EditorContextCopy");P.EditorContextPeek=new P("EditorContextPeek");P.EditorContextShare=new P("EditorContextShare");P.EditorTitle=new P("EditorTitle");P.EditorTitleRun=new P("EditorTitleRun");P.EditorTitleContext=new P("EditorTitleContext");P.EmptyEditorGroup=new P("EmptyEditorGroup");P.EmptyEditorGroupContext=new P("EmptyEditorGroupContext");P.ExplorerContext=new P("ExplorerContext");P.ExtensionContext=new P("ExtensionContext");P.GlobalActivity=new P("GlobalActivity");P.CommandCenter=new P("CommandCenter");P.LayoutControlMenuSubmenu=new P("LayoutControlMenuSubmenu");P.LayoutControlMenu=new P("LayoutControlMenu");P.MenubarMainMenu=new P("MenubarMainMenu");P.MenubarAppearanceMenu=new P("MenubarAppearanceMenu");P.MenubarDebugMenu=new P("MenubarDebugMenu");P.MenubarEditMenu=new P("MenubarEditMenu");P.MenubarCopy=new P("MenubarCopy");P.MenubarFileMenu=new P("MenubarFileMenu");P.MenubarGoMenu=new P("MenubarGoMenu");P.MenubarHelpMenu=new P("MenubarHelpMenu");P.MenubarLayoutMenu=new P("MenubarLayoutMenu");P.MenubarNewBreakpointMenu=new P("MenubarNewBreakpointMenu");P.MenubarPanelAlignmentMenu=new P("MenubarPanelAlignmentMenu");P.MenubarPanelPositionMenu=new P("MenubarPanelPositionMenu");P.MenubarPreferencesMenu=new P("MenubarPreferencesMenu");P.MenubarRecentMenu=new P("MenubarRecentMenu");P.MenubarSelectionMenu=new P("MenubarSelectionMenu");P.MenubarShare=new P("MenubarShare");P.MenubarSwitchEditorMenu=new P("MenubarSwitchEditorMenu");P.MenubarSwitchGroupMenu=new P("MenubarSwitchGroupMenu");P.MenubarTerminalMenu=new P("MenubarTerminalMenu");P.MenubarViewMenu=new P("MenubarViewMenu");P.MenubarHomeMenu=new P("MenubarHomeMenu");P.OpenEditorsContext=new P("OpenEditorsContext");P.ProblemsPanelContext=new P("ProblemsPanelContext");P.SCMChangeContext=new P("SCMChangeContext");P.SCMResourceContext=new P("SCMResourceContext");P.SCMResourceFolderContext=new P("SCMResourceFolderContext");P.SCMResourceGroupContext=new P("SCMResourceGroupContext");P.SCMSourceControl=new P("SCMSourceControl");P.SCMTitle=new P("SCMTitle");P.SearchContext=new P("SearchContext");P.StatusBarWindowIndicatorMenu=new P("StatusBarWindowIndicatorMenu");P.StatusBarRemoteIndicatorMenu=new P("StatusBarRemoteIndicatorMenu");P.TestItem=new P("TestItem");P.TestItemGutter=new P("TestItemGutter");P.TestPeekElement=new P("TestPeekElement");P.TestPeekTitle=new P("TestPeekTitle");P.TouchBarContext=new P("TouchBarContext");P.TitleBarContext=new P("TitleBarContext");P.TitleBarTitleContext=new P("TitleBarTitleContext");P.TunnelContext=new P("TunnelContext");P.TunnelPrivacy=new P("TunnelPrivacy");P.TunnelProtocol=new P("TunnelProtocol");P.TunnelPortInline=new P("TunnelInline");P.TunnelTitle=new P("TunnelTitle");P.TunnelLocalAddressInline=new P("TunnelLocalAddressInline");P.TunnelOriginInline=new P("TunnelOriginInline");P.ViewItemContext=new P("ViewItemContext");P.ViewContainerTitle=new P("ViewContainerTitle");P.ViewContainerTitleContext=new P("ViewContainerTitleContext");P.ViewTitle=new P("ViewTitle");P.ViewTitleContext=new P("ViewTitleContext");P.CommentThreadTitle=new P("CommentThreadTitle");P.CommentThreadActions=new P("CommentThreadActions");P.CommentTitle=new P("CommentTitle");P.CommentActions=new P("CommentActions");P.InteractiveToolbar=new P("InteractiveToolbar");P.InteractiveCellTitle=new P("InteractiveCellTitle");P.InteractiveCellDelete=new P("InteractiveCellDelete");P.InteractiveCellExecute=new P("InteractiveCellExecute");P.InteractiveInputExecute=new P("InteractiveInputExecute");P.NotebookToolbar=new P("NotebookToolbar");P.NotebookCellTitle=new P("NotebookCellTitle");P.NotebookCellDelete=new P("NotebookCellDelete");P.NotebookCellInsert=new P("NotebookCellInsert");P.NotebookCellBetween=new P("NotebookCellBetween");P.NotebookCellListTop=new P("NotebookCellTop");P.NotebookCellExecute=new P("NotebookCellExecute");P.NotebookCellExecutePrimary=new P("NotebookCellExecutePrimary");P.NotebookDiffCellInputTitle=new P("NotebookDiffCellInputTitle");P.NotebookDiffCellMetadataTitle=new P("NotebookDiffCellMetadataTitle");P.NotebookDiffCellOutputsTitle=new P("NotebookDiffCellOutputsTitle");P.NotebookOutputToolbar=new P("NotebookOutputToolbar");P.NotebookEditorLayoutConfigure=new P("NotebookEditorLayoutConfigure");P.NotebookKernelSource=new P("NotebookKernelSource");P.BulkEditTitle=new P("BulkEditTitle");P.BulkEditContext=new P("BulkEditContext");P.TimelineItemContext=new P("TimelineItemContext");P.TimelineTitle=new P("TimelineTitle");P.TimelineTitleContext=new P("TimelineTitleContext");P.TimelineFilterSubMenu=new P("TimelineFilterSubMenu");P.AccountsContext=new P("AccountsContext");P.PanelTitle=new P("PanelTitle");P.AuxiliaryBarTitle=new P("AuxiliaryBarTitle");P.TerminalInstanceContext=new P("TerminalInstanceContext");P.TerminalEditorInstanceContext=new P("TerminalEditorInstanceContext");P.TerminalNewDropdownContext=new P("TerminalNewDropdownContext");P.TerminalTabContext=new P("TerminalTabContext");P.TerminalTabEmptyAreaContext=new P("TerminalTabEmptyAreaContext");P.TerminalInlineTabContext=new P("TerminalInlineTabContext");P.WebviewContext=new P("WebviewContext");P.InlineCompletionsActions=new P("InlineCompletionsActions");P.NewFile=new P("NewFile");P.MergeToolbar=new P("MergeToolbar");P.MergeInput1Toolbar=new P("MergeToolbar1Toolbar");P.MergeInput2Toolbar=new P("MergeToolbar2Toolbar");const ah=Je("menuService"),Qs=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new R,this.onDidChangeMenu=this._onDidChangeMenu.event,this._commandPaletteChangeEvent={has:o=>o===P.CommandPalette}}addCommand(o){return this.addCommands(je.single(o))}addCommands(o){for(const e of o)this._commands.set(e.id,e);return this._onDidChangeMenu.fire(this._commandPaletteChangeEvent),He(()=>{let e=!1;for(const t of o)e=this._commands.delete(t.id)||e;e&&this._onDidChangeMenu.fire(this._commandPaletteChangeEvent)})}getCommand(o){return this._commands.get(o)}getCommands(){const o=new Map;return this._commands.forEach((e,t)=>o.set(t,e)),o}appendMenuItem(o,e){return this.appendMenuItems(je.single({id:o,item:e}))}appendMenuItems(o){const e=new Set,t=new vi;for(const{id:n,item:i}of o){let s=this._menuItems.get(n);s||(s=new vi,this._menuItems.set(n,s)),t.push(s.push(i)),e.add(n)}return this._onDidChangeMenu.fire(e),He(()=>{if(t.size>0){for(const n of t)n();this._onDidChangeMenu.fire(e),t.clear()}})}getMenuItems(o){let e;return this._menuItems.has(o)?e=[...this._menuItems.get(o)]:e=[],o===P.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(o){const e=new Set;for(const t of o)ag(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,n)=>{e.has(n)||o.push({command:t})})}};class Qw extends sf{constructor(e,t,n,i){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,[],"submenu"),this.item=e,this._menuService=t,this._contextKeyService=n,this._options=i}get actions(){const e=[],t=this._menuService.createMenu(this.item.submenu,this._contextKeyService),n=t.getActions(this._options);t.dispose();for(const[,i]of n)i.length>0&&(e.push(...i),e.push(new Jn));return e.length&&e.pop(),e}}u(Qw,"SubmenuItemAction");let Dc=u(class KV{constructor(e,t,n,i,s,r){var a,l;if(this.hideActions=i,this._commandService=r,this.id=e.id,this.label=n?.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value,this.tooltip=(l=typeof e.tooltip=="string"?e.tooltip:(a=e.tooltip)===null||a===void 0?void 0:a.value)!==null&&l!==void 0?l:"",this.enabled=!e.precondition||s.contextMatchesRules(e.precondition),this.checked=void 0,e.toggled){const c=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=s.contextMatchesRules(c.condition),this.checked&&c.tooltip&&(this.tooltip=typeof c.tooltip=="string"?c.tooltip:c.tooltip.value),c.title&&(this.label=typeof c.title=="string"?c.title:c.title.value)}this.item=e,this.alt=t?new KV(t,void 0,n,i,s,r):void 0,this._options=n,ct.isThemeIcon(e.icon)&&(this.class=Mi.asClassName(e.icon))}dispose(){}run(...e){var t,n;let i=[];return!((t=this._options)===null||t===void 0)&&t.arg&&(i=[...i,this._options.arg]),!((n=this._options)===null||n===void 0)&&n.shouldForwardArgs&&(i=[...i,...e]),this._commandService.executeCommand(this.id,...i)}},"MenuItemAction");Dc=UX([gP(4,De),gP(5,hn)],Dc);class Cb{constructor(){this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(Us===1){if(e&&e.win)return e.win}else if(Us===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=Cb.bindToCurrentPlatform(e);if(t&&t.primary){const n=zx(t.primary,Us);n&&this._registerDefaultKeybinding(n,e.id,e.args,e.weight,0,e.when)}if(t&&Array.isArray(t.secondary))for(let n=0,i=t.secondary.length;n<i;n++){const s=t.secondary[n],r=zx(s,Us);r&&this._registerDefaultKeybinding(r,e.id,e.args,e.weight,-n-1,e.when)}}registerCommandAndKeybindingRule(e){this.registerKeybindingRule(e),Qe.registerCommand(e)}static _mightProduceChar(e){return e>=21&&e<=30||e>=31&&e<=56?!0:e===80||e===81||e===82||e===83||e===84||e===85||e===86||e===110||e===111||e===87||e===88||e===89||e===90||e===91||e===92}_assertNoCtrlAlt(e,t){e.ctrlKey&&e.altKey&&!e.metaKey&&Cb._mightProduceChar(e.keyCode)&&console.warn("Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: ",e," for ",t)}_registerDefaultKeybinding(e,t,n,i,s,r){Us===1&&this._assertNoCtrlAlt(e.parts[0],t),this._coreKeybindings.push({keybinding:e.parts,command:t,commandArgs:n,when:r,weight1:i,weight2:s,extensionId:null,isBuiltinExtension:!1}),this._cachedMergedKeybindings=null}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=[].concat(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(zX)),this._cachedMergedKeybindings.slice(0)}}u(Cb,"KeybindingsRegistryImpl");const gs=new Cb,GX={EditorModes:"platform.keybindingsRegistry"};zt.add(GX.EditorModes,gs);function zX(o,e){if(o.weight1!==e.weight1)return o.weight1-e.weight1;if(o.command&&e.command){if(o.command<e.command)return-1;if(o.command>e.command)return 1}return o.weight2-e.weight2}u(zX,"sorter");const Tr=Je("telemetryService");class P_{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this._description=e.description}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let n=t.kbExpr;this.precondition&&(n?n=oe.and(n,this.precondition):n=this.precondition);const i={id:this.id,weight:t.weight,args:t.args,when:n,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};gs.registerKeybindingRule(i)}}Qe.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),description:this._description})}_registerMenuItem(e){Qs.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}u(P_,"Command");class lh extends P_{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,n){return this._implementations.push({priority:e,name:t,implementation:n}),this._implementations.sort((i,s)=>s.priority-i.priority),{dispose:()=>{for(let i=0;i<this._implementations.length;i++)if(this._implementations[i].implementation===n){this._implementations.splice(i,1);return}}}}runCommand(e,t){const n=e.get(Ao);n.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const i of this._implementations){const s=i.implementation(e,t);if(s)return n.trace(`Command '${this.id}' was handled by '${i.name}'.`),typeof s=="boolean"?void 0:s}n.trace(`The Command '${this.id}' was not handled by any implementation.`)}}u(lh,"MultiCommand");class fA extends P_{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}u(fA,"ProxyCommand");class Ln extends P_{static bindToContribution(e){return u(class extends Ln{constructor(n){super(n),this._callback=n.handler}runEditorCommand(n,i,s){const r=e(i);r&&this._callback(r,s)}},"EditorControllerCommandImpl")}static runEditorCommand(e,t,n,i){const s=e.get(dt),r=s.getFocusedCodeEditor()||s.getActiveCodeEditor();if(r)return r.invokeWithinContext(a=>{if(a.get(De).contextMatchesRules(Gi(n)))return i(a,r,t)})}runCommand(e,t){return Ln.runEditorCommand(e,t,this.precondition,(n,i,s)=>this.runEditorCommand(n,i,s))}}u(Ln,"EditorCommand");class de extends Ln{constructor(e){super(de.convertOptions(e)),this.label=e.label,this.alias=e.alias}static convertOptions(e){let t;Array.isArray(e.menuOpts)?t=e.menuOpts:e.menuOpts?t=[e.menuOpts]:t=[];function n(i){return i.menuId||(i.menuId=P.EditorContext),i.title||(i.title=e.label),i.when=oe.and(e.precondition,i.when),i}return u(n,"withDefaults"),Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(n)):e.contextMenuOpts&&t.push(n(e.contextMenuOpts)),e.menuOpts=t,e}runEditorCommand(e,t,n){return this.reportTelemetry(e,t),this.run(e,t,n||{})}reportTelemetry(e,t){e.get(Tr).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}}u(de,"EditorAction");class pA extends de{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((n,i)=>i[0]-n[0]),{dispose:()=>{for(let n=0;n<this._implementations.length;n++)if(this._implementations[n][1]===t){this._implementations.splice(n,1);return}}}}run(e,t,n){for(const i of this._implementations){const s=i[1](e,t,n);if(s)return typeof s=="boolean"?void 0:s}}}u(pA,"MultiEditorAction");function ua(o,e){Qe.registerCommand(o,function(t,...n){const i=t.get(Ne),[s,r]=n;bt(be.isUri(s)),bt(H.isIPosition(r));const a=t.get(Kt).getModel(s);if(a){const l=H.lift(r);return i.invokeFunction(e,a,l,...n.slice(2))}return t.get(Ji).createModelReference(s).then(l=>new Promise((c,d)=>{try{const h=i.invokeFunction(e,l.object.textEditorModel,H.lift(r),n.slice(2));c(h)}catch(h){d(h)}}).finally(()=>{l.dispose()}))})}u(ua,"registerModelAndPositionCommand");function te(o){return Ts.INSTANCE.registerEditorCommand(o),o}u(te,"registerEditorCommand");function ie(o){const e=new o;return Ts.INSTANCE.registerEditorAction(e),e}u(ie,"registerEditorAction");function jV(o){return Ts.INSTANCE.registerEditorAction(o),o}u(jV,"registerMultiEditorAction");function $V(o){Ts.INSTANCE.registerEditorAction(o)}u($V,"registerInstantiatedEditorAction");function it(o,e){Ts.INSTANCE.registerEditorContribution(o,e)}u(it,"registerEditorContribution");var Zd;(function(o){function e(r){return Ts.INSTANCE.getEditorCommand(r)}u(e,"getEditorCommand"),o.getEditorCommand=e;function t(){return Ts.INSTANCE.getEditorActions()}u(t,"getEditorActions"),o.getEditorActions=t;function n(){return Ts.INSTANCE.getEditorContributions()}u(n,"getEditorContributions"),o.getEditorContributions=n;function i(r){return Ts.INSTANCE.getEditorContributions().filter(a=>r.indexOf(a.id)>=0)}u(i,"getSomeEditorContributions"),o.getSomeEditorContributions=i;function s(){return Ts.INSTANCE.getDiffEditorContributions()}u(s,"getDiffEditorContributions"),o.getDiffEditorContributions=s})(Zd||(Zd={}));const KX={EditorCommonContributions:"editor.contributions"};class Ts{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t){this.editorContributions.push({id:e,ctor:t})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions.slice(0)}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}}u(Ts,"EditorContributionRegistry");Ts.INSTANCE=new Ts;zt.add(KX.EditorCommonContributions,Ts.INSTANCE);function R_(o){return o.register(),o}u(R_,"registerCommand$3");const qV=R_(new lh({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:P.MenubarEditMenu,group:"1_do",title:m({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:P.CommandPalette,group:"",title:m("undo","Undo"),order:1}]}));R_(new fA(qV,{id:"default:undo",precondition:void 0}));const YV=R_(new lh({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:P.MenubarEditMenu,group:"1_do",title:m({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:P.CommandPalette,group:"",title:m("redo","Redo"),order:1}]}));R_(new fA(YV,{id:"default:redo",precondition:void 0}));const jX=R_(new lh({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:P.MenubarSelectionMenu,group:"1_basic",title:m({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:P.CommandPalette,group:"",title:m("selectAll","Select All"),order:1}]}));var $X=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},qX=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let wb=u(class{constructor(e,t){}dispose(){}},"MarkerDecorationsContribution");wb.ID="editor.contrib.markerDecorations";wb=$X([qX(1,gA)],wb);it(wb.ID,wb);class mA extends U{constructor(e,t){super(),this._onDidChange=this._register(new R),this.onDidChange=this._onDidChange.event,this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){!this._resizeObserver&&this._referenceDomElement&&(this._resizeObserver=new ResizeObserver(e=>{e&&e[0]&&e[0].contentRect?this.observe({width:e[0].contentRect.width,height:e[0].contentRect.height}):this.observe()}),this._resizeObserver.observe(this._referenceDomElement))}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let n=0,i=0;t?(n=t.width,i=t.height):this._referenceDomElement&&(n=this._referenceDomElement.clientWidth,i=this._referenceDomElement.clientHeight),n=Math.max(5,n),i=Math.max(5,i),(this._width!==n||this._height!==i)&&(this._width=n,this._height=i,e&&this._onDidChange.fire())}}u(mA,"ElementSizeObserver");class cl{constructor(e,t){this.key=e,this.migrate=t}apply(e){const t=cl._read(e,this.key),n=u(s=>cl._read(e,s),"read"),i=u((s,r)=>cl._write(e,s,r),"write");this.migrate(t,n,i)}static _read(e,t){if(typeof e>"u")return;const n=t.indexOf(".");if(n>=0){const i=t.substring(0,n);return this._read(e[i],t.substring(n+1))}return e[t]}static _write(e,t,n){const i=t.indexOf(".");if(i>=0){const s=t.substring(0,i);e[s]=e[s]||{},this._write(e[s],t.substring(i+1),n);return}e[t]=n}}u(cl,"EditorSettingMigration");cl.items=[];function np(o,e){cl.items.push(new cl(o,e))}u(np,"registerEditorSettingMigration");function Lr(o,e){np(o,(t,n,i)=>{if(typeof t<"u"){for(const[s,r]of e)if(t===s){i(o,r);return}}})}u(Lr,"registerSimpleEditorSettingMigration");function YX(o){cl.items.forEach(e=>e.apply(o))}u(YX,"migrateOptions");Lr("wordWrap",[[!0,"on"],[!1,"off"]]);Lr("lineNumbers",[[!0,"on"],[!1,"off"]]);Lr("cursorBlinking",[["visible","solid"]]);Lr("renderWhitespace",[[!0,"boundary"],[!1,"none"]]);Lr("renderLineHighlight",[[!0,"line"],[!1,"none"]]);Lr("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]);Lr("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]);Lr("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);Lr("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);Lr("autoIndent",[[!1,"advanced"],[!0,"full"]]);Lr("matchBrackets",[[!0,"always"],[!1,"never"]]);np("autoClosingBrackets",(o,e,t)=>{o===!1&&(t("autoClosingBrackets","never"),typeof e("autoClosingQuotes")>"u"&&t("autoClosingQuotes","never"),typeof e("autoSurround")>"u"&&t("autoSurround","never"))});np("renderIndentGuides",(o,e,t)=>{typeof o<"u"&&(t("renderIndentGuides",void 0),typeof e("guides.indentation")>"u"&&t("guides.indentation",!!o))});np("highlightActiveIndentGuide",(o,e,t)=>{typeof o<"u"&&(t("highlightActiveIndentGuide",void 0),typeof e("guides.highlightActiveIndentation")>"u"&&t("guides.highlightActiveIndentation",!!o))});const XX={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};np("suggest.filteredTypes",(o,e,t)=>{if(o&&typeof o=="object"){for(const n of Object.entries(XX))o[n[0]]===!1&&typeof e(`suggest.${n[1]}`)>"u"&&t(`suggest.${n[1]}`,!1);t("suggest.filteredTypes",void 0)}});np("quickSuggestions",(o,e,t)=>{if(typeof o=="boolean"){const n=o?"on":"off";t("quickSuggestions",{comments:n,strings:n,other:n})}});class XV{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new R,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus!==e&&(this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus))}}u(XV,"TabFocusImpl");const c1=new XV,Dl=Je("accessibilityService"),F_=new ce("accessibilityModeEnabled",!1);var ZX=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},JX=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let Zx=u(class extends U{constructor(e,t,n,i){super(),this._accessibilityService=i,this._onDidChange=this._register(new R),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new R),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._computeOptionsMemory=new PD,this.isSimpleWidget=e,this._containerObserver=this._register(new mA(n,t.dimension)),this._rawOptions=fP(t),this._validatedOptions=Ba.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(10)&&this._containerObserver.startObserving(),this._register(ml.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(c1.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(yx.onDidChange(()=>this._recomputeOptions())),this._register(Yg.onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_recomputeOptions(){const e=this._computeOptions(),t=Ba.checkEquals(this.options,e);t!==null&&(this.options=e,this._onDidChangeFast.fire(t),this._onDidChange.fire(t))}_computeOptions(){const e=this._readEnvConfiguration(),t=gc.createFromValidatedSettings(this._validatedOptions,e.pixelRatio,this.isSimpleWidget),n=this._readFontInfo(t),i={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:n,extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:c1.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport};return Ba.computeOptions(this._validatedOptions,i)}_readEnvConfiguration(){return{extraEditorClassName:eZ(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:hc||Is,pixelRatio:Yg.value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(e){return yx.readFontInfo(e)}getRawOptions(){return this._rawOptions}updateOptions(e){const t=fP(e);Ba.applyUpdate(this._rawOptions,t)&&(this._validatedOptions=Ba.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(e){this._containerObserver.observe(e)}setIsDominatedByLongLines(e){this._isDominatedByLongLines!==e&&(this._isDominatedByLongLines=e,this._recomputeOptions())}setModelLineCount(e){const t=QX(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}setReservedHeight(e){this._reservedHeight!==e&&(this._reservedHeight=e,this._recomputeOptions())}},"EditorConfiguration");Zx=ZX([JX(3,Dl)],Zx);function QX(o){let e=0;for(;o;)o=Math.floor(o/10),e++;return e||1}u(QX,"digitCount");function eZ(){let o="";return!pl&&!qD&&(o+="no-user-select "),pl&&(o+="no-minimap-shadow ",o+="enable-user-select "),Xe&&(o+="mac "),o}u(eZ,"getExtraEditorClassName");class ZV{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}u(ZV,"ValidatedEditorOptions");class JV{constructor(){this._values=[]}_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,t){this._values[e]=t}}u(JV,"ComputedEditorOptions");class Ba{static validateOptions(e){const t=new ZV;for(const n of og){const i=n.name==="_never_"?void 0:e[n.name];t._write(n.id,n.validate(i))}return t}static computeOptions(e,t){const n=new JV;for(const i of og)n._write(i.id,i.compute(t,n,e._read(i.id)));return n}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?Ds(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Ba._deepEquals(e[n],t[n]))return!1;return!0}static checkEquals(e,t){const n=[];let i=!1;for(const s of og){const r=!Ba._deepEquals(e._read(s.id),t._read(s.id));n[s.id]=r,r&&(i=!0)}return i?new ND(n):null}static applyUpdate(e,t){let n=!1;for(const i of og)if(t.hasOwnProperty(i.name)){const s=i.applyUpdate(e[i.name],t[i.name]);e[i.name]=s.newValue,n=n||s.didChange}return n}}u(Ba,"EditorOptionsUtil");function fP(o){const e=Pa(o);return YX(e),e}u(fP,"deepCloneAndMigrateOptions");function _n(o,e,t){let n=null,i=null;if(typeof t.value=="function"?(n="value",i=t.value,i.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(n="get",i=t.get),!i)throw new Error("not supported");const s=`$memoize$${e}`;t[n]=function(...r){return this.hasOwnProperty(s)||Object.defineProperty(this,s,{configurable:!1,enumerable:!1,writable:!1,value:i.apply(this,r)}),this[s]}}u(_n,"memoize");var tZ=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Mt;(function(o){o.Tap="-monaco-gesturetap",o.Change="-monaco-gesturechange",o.Start="-monaco-gesturestart",o.End="-monaco-gesturesend",o.Contextmenu="-monaco-gesturecontextmenu"})(Mt||(Mt={}));class gt extends U{constructor(){super(),this.dispatched=!1,this.activeTouches={},this.handle=null,this.targets=[],this.ignoreTargets=[],this._lastSetTapCountTime=0,this._register(Y(document,"touchstart",e=>this.onTouchStart(e),{passive:!1})),this._register(Y(document,"touchend",e=>this.onTouchEnd(e))),this._register(Y(document,"touchmove",e=>this.onTouchMove(e),{passive:!1}))}static addTarget(e){return gt.isTouchDevice()?(gt.INSTANCE||(gt.INSTANCE=new gt),gt.INSTANCE.targets.push(e),{dispose:()=>{gt.INSTANCE.targets=gt.INSTANCE.targets.filter(t=>t!==e)}}):U.None}static ignoreTarget(e){return gt.isTouchDevice()?(gt.INSTANCE||(gt.INSTANCE=new gt),gt.INSTANCE.ignoreTargets.push(e),{dispose:()=>{gt.INSTANCE.ignoreTargets=gt.INSTANCE.ignoreTargets.filter(t=>t!==e)}}):U.None}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){const t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,i=e.targetTouches.length;n<i;n++){const s=e.targetTouches.item(n);this.activeTouches[s.identifier]={id:s.identifier,initialTarget:s.target,initialTimeStamp:t,initialPageX:s.pageX,initialPageY:s.pageY,rollingTimestamps:[t],rollingPageX:[s.pageX],rollingPageY:[s.pageY]};const r=this.newGestureEvent(Mt.Start,s.target);r.pageX=s.pageX,r.pageY=s.pageY,this.dispatchEvent(r)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e){const t=Date.now(),n=Object.keys(this.activeTouches).length;for(let i=0,s=e.changedTouches.length;i<s;i++){const r=e.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(r.identifier))){console.warn("move of an UNKNOWN touch",r);continue}const a=this.activeTouches[r.identifier],l=Date.now()-a.initialTimeStamp;if(l<gt.HOLD_DELAY&&Math.abs(a.initialPageX-Fs(a.rollingPageX))<30&&Math.abs(a.initialPageY-Fs(a.rollingPageY))<30){const c=this.newGestureEvent(Mt.Tap,a.initialTarget);c.pageX=Fs(a.rollingPageX),c.pageY=Fs(a.rollingPageY),this.dispatchEvent(c)}else if(l>=gt.HOLD_DELAY&&Math.abs(a.initialPageX-Fs(a.rollingPageX))<30&&Math.abs(a.initialPageY-Fs(a.rollingPageY))<30){const c=this.newGestureEvent(Mt.Contextmenu,a.initialTarget);c.pageX=Fs(a.rollingPageX),c.pageY=Fs(a.rollingPageY),this.dispatchEvent(c)}else if(n===1){const c=Fs(a.rollingPageX),d=Fs(a.rollingPageY),h=Fs(a.rollingTimestamps)-a.rollingTimestamps[0],g=c-a.rollingPageX[0],f=d-a.rollingPageY[0],p=this.targets.filter(_=>a.initialTarget instanceof Node&&_.contains(a.initialTarget));this.inertia(p,t,Math.abs(g)/h,g>0?1:-1,c,Math.abs(f)/h,f>0?1:-1,d)}this.dispatchEvent(this.newGestureEvent(Mt.End,a.initialTarget)),delete this.activeTouches[r.identifier]}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){const n=document.createEvent("CustomEvent");return n.initEvent(e,!1,!0),n.initialTarget=t,n.tapCount=0,n}dispatchEvent(e){if(e.type===Mt.Tap){const t=new Date().getTime();let n=0;t-this._lastSetTapCountTime>gt.CLEAR_TAP_COUNT_TIME?n=1:n=2,this._lastSetTapCountTime=t,e.tapCount=n}else(e.type===Mt.Change||e.type===Mt.Contextmenu)&&(this._lastSetTapCountTime=0);for(let t=0;t<this.ignoreTargets.length;t++)if(e.initialTarget instanceof Node&&this.ignoreTargets[t].contains(e.initialTarget))return;this.targets.forEach(t=>{e.initialTarget instanceof Node&&t.contains(e.initialTarget)&&(t.dispatchEvent(e),this.dispatched=!0)})}inertia(e,t,n,i,s,r,a,l){this.handle=br(()=>{const c=Date.now(),d=c-t;let h=0,g=0,f=!0;n+=gt.SCROLL_FRICTION*d,r+=gt.SCROLL_FRICTION*d,n>0&&(f=!1,h=i*n*d),r>0&&(f=!1,g=a*r*d);const p=this.newGestureEvent(Mt.Change);p.translationX=h,p.translationY=g,e.forEach(_=>_.dispatchEvent(p)),f||this.inertia(e,c,n,i,s+h,r,a,l+g)})}onTouchMove(e){const t=Date.now();for(let n=0,i=e.changedTouches.length;n<i;n++){const s=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(s.identifier))){console.warn("end of an UNKNOWN touch",s);continue}const r=this.activeTouches[s.identifier],a=this.newGestureEvent(Mt.Change,r.initialTarget);a.translationX=s.pageX-Fs(r.rollingPageX),a.translationY=s.pageY-Fs(r.rollingPageY),a.pageX=s.pageX,a.pageY=s.pageY,this.dispatchEvent(a),r.rollingPageX.length>3&&(r.rollingPageX.shift(),r.rollingPageY.shift(),r.rollingTimestamps.shift()),r.rollingPageX.push(s.pageX),r.rollingPageY.push(s.pageY),r.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}}u(gt,"Gesture");gt.SCROLL_FRICTION=-.005;gt.HOLD_DELAY=700;gt.CLEAR_TAP_COUNT_TIME=400;tZ([_n],gt,"isTouchDevice",null);class ch{constructor(){this._hooks=new J,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;const n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,n,i,s){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=i,this._onStopCallback=s;let r=e;try{e.setPointerCapture(t),this._hooks.add(He(()=>{e.releasePointerCapture(t)}))}catch{r=window}this._hooks.add(Y(r,le.POINTER_MOVE,a=>{if(a.buttons!==n){this.stopMonitoring(!0);return}a.preventDefault(),this._pointerMoveCallback(a)})),this._hooks.add(Y(r,le.POINTER_UP,a=>this.stopMonitoring(!0)))}}u(ch,"GlobalPointerMoveMonitor");function pc(o,e){const t=Math.pow(10,e);return Math.round(o*t)/t}u(pc,"roundFloat");class $e{constructor(e,t,n,i=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,n))|0,this.a=pc(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}u($e,"RGBA");class vo{constructor(e,t,n,i){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=pc(Math.max(Math.min(1,t),0),3),this.l=pc(Math.max(Math.min(1,n),0),3),this.a=pc(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,i=e.b/255,s=e.a,r=Math.max(t,n,i),a=Math.min(t,n,i);let l=0,c=0;const d=(a+r)/2,h=r-a;if(h>0){switch(c=Math.min(d<=.5?h/(2*d):h/(2-2*d),1),r){case t:l=(n-i)/h+(n<i?6:0);break;case n:l=(i-t)/h+2;break;case i:l=(t-n)/h+4;break}l*=60,l=Math.round(l)}return new vo(l,c,d,s)}static _hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}static toRGBA(e){const t=e.h/360,{s:n,l:i,a:s}=e;let r,a,l;if(n===0)r=a=l=i;else{const c=i<.5?i*(1+n):i+n-i*n,d=2*i-c;r=vo._hue2rgb(d,c,t+1/3),a=vo._hue2rgb(d,c,t),l=vo._hue2rgb(d,c,t-1/3)}return new $e(Math.round(r*255),Math.round(a*255),Math.round(l*255),s)}}u(vo,"HSLA");class or{constructor(e,t,n,i){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=pc(Math.max(Math.min(1,t),0),3),this.v=pc(Math.max(Math.min(1,n),0),3),this.a=pc(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,i=e.b/255,s=Math.max(t,n,i),r=Math.min(t,n,i),a=s-r,l=s===0?0:a/s;let c;return a===0?c=0:s===t?c=((n-i)/a%6+6)%6:s===n?c=(i-t)/a+2:c=(t-n)/a+4,new or(Math.round(c*60),l,s,e.a)}static toRGBA(e){const{h:t,s:n,v:i,a:s}=e,r=i*n,a=r*(1-Math.abs(t/60%2-1)),l=i-r;let[c,d,h]=[0,0,0];return t<60?(c=r,d=a):t<120?(c=a,d=r):t<180?(d=r,h=a):t<240?(d=a,h=r):t<300?(c=a,h=r):t<=360&&(c=r,h=a),c=Math.round((c+l)*255),d=Math.round((d+l)*255),h=Math.round((h+l)*255),new $e(c,d,h,s)}}u(or,"HSVA");class B{constructor(e){if(e)if(e instanceof $e)this.rgba=e;else if(e instanceof vo)this._hsla=e,this.rgba=vo.toRGBA(e);else if(e instanceof or)this._hsva=e,this.rgba=or.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}static fromHex(e){return B.Format.CSS.parseHex(e)||B.red}get hsla(){return this._hsla?this._hsla:vo.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:or.fromRGBA(this.rgba)}equals(e){return!!e&&$e.equals(this.rgba,e.rgba)&&vo.equals(this.hsla,e.hsla)&&or.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=B._relativeLuminanceForComponent(this.rgba.r),t=B._relativeLuminanceForComponent(this.rgba.g),n=B._relativeLuminanceForComponent(this.rgba.b),i=.2126*e+.7152*t+.0722*n;return pc(i,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n}isDarkerThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t<n}lighten(e){return new B(new vo(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new B(new vo(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:n,b:i,a:s}=this.rgba;return new B(new $e(t,n,i,s*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new B(new $e(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}toString(){return this._toString||(this._toString=B.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,n){if(e.isLighterThan(t))return e;n=n||.5;const i=e.getRelativeLuminance(),s=t.getRelativeLuminance();return n=n*(s-i)/s,e.lighten(n)}static getDarkerColor(e,t,n){if(e.isDarkerThan(t))return e;n=n||.5;const i=e.getRelativeLuminance(),s=t.getRelativeLuminance();return n=n*(i-s)/i,e.darken(n)}}u(B,"Color");B.white=new B(new $e(255,255,255,1));B.black=new B(new $e(0,0,0,1));B.red=new B(new $e(255,0,0,1));B.blue=new B(new $e(0,0,255,1));B.green=new B(new $e(0,255,0,1));B.cyan=new B(new $e(0,255,255,1));B.lightgrey=new B(new $e(211,211,211,1));B.transparent=new B(new $e(0,0,0,0));(function(o){(function(e){(function(t){function n(f){return f.rgba.a===1?`rgb(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b})`:o.Format.CSS.formatRGBA(f)}u(n,"formatRGB"),t.formatRGB=n;function i(f){return`rgba(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b}, ${+f.rgba.a.toFixed(2)})`}u(i,"formatRGBA"),t.formatRGBA=i;function s(f){return f.hsla.a===1?`hsl(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%)`:o.Format.CSS.formatHSLA(f)}u(s,"formatHSL"),t.formatHSL=s;function r(f){return`hsla(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%, ${f.hsla.a.toFixed(2)})`}u(r,"formatHSLA"),t.formatHSLA=r;function a(f){const p=f.toString(16);return p.length!==2?"0"+p:p}u(a,"_toTwoDigitHex");function l(f){return`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}`}u(l,"formatHex"),t.formatHex=l;function c(f,p=!1){return p&&f.rgba.a===1?o.Format.CSS.formatHex(f):`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}${a(Math.round(f.rgba.a*255))}`}u(c,"formatHexA"),t.formatHexA=c;function d(f){return f.isOpaque()?o.Format.CSS.formatHex(f):o.Format.CSS.formatRGBA(f)}u(d,"format"),t.format=d;function h(f){const p=f.length;if(p===0||f.charCodeAt(0)!==35)return null;if(p===7){const _=16*g(f.charCodeAt(1))+g(f.charCodeAt(2)),v=16*g(f.charCodeAt(3))+g(f.charCodeAt(4)),C=16*g(f.charCodeAt(5))+g(f.charCodeAt(6));return new o(new $e(_,v,C,1))}if(p===9){const _=16*g(f.charCodeAt(1))+g(f.charCodeAt(2)),v=16*g(f.charCodeAt(3))+g(f.charCodeAt(4)),C=16*g(f.charCodeAt(5))+g(f.charCodeAt(6)),w=16*g(f.charCodeAt(7))+g(f.charCodeAt(8));return new o(new $e(_,v,C,w/255))}if(p===4){const _=g(f.charCodeAt(1)),v=g(f.charCodeAt(2)),C=g(f.charCodeAt(3));return new o(new $e(16*_+_,16*v+v,16*C+C))}if(p===5){const _=g(f.charCodeAt(1)),v=g(f.charCodeAt(2)),C=g(f.charCodeAt(3)),w=g(f.charCodeAt(4));return new o(new $e(16*_+_,16*v+v,16*C+C,(16*w+w)/255))}return null}u(h,"parseHex"),t.parseHex=h;function g(f){switch(f){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}u(g,"_parseHexDigit")})(e.CSS||(e.CSS={}))})(o.Format||(o.Format={}))})(B||(B={}));function QV(o){return`--vscode-${o.replace(/\./g,"-")}`}u(QV,"asCssVariableName");const eH={ColorContribution:"base.contributions.colors"};class tH{constructor(){this._onDidChangeSchema=new R,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,n,i=!1,s){const r={id:e,description:n,defaults:t,needsTransparency:i,deprecationMessage:s};this.colorsById[e]=r;const a={type:"string",description:n,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return s&&(a.deprecationMessage=s),this.colorSchema.properties[e]=a,this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(n),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){const n=this.colorsById[e];if(n&&n.defaults){const i=n.defaults[t.type];return Ma(i,t)}}getColorSchema(){return this.colorSchema}toString(){const e=u((t,n)=>{const i=t.indexOf(".")===-1?0:1,s=n.indexOf(".")===-1?0:1;return i!==s?i-s:t.localeCompare(n)},"sorter");return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}u(tH,"ColorRegistry");const ey=new tH;zt.add(eH.ColorContribution,ey);function nZ(o){return o===null||typeof o.hcLight>"u"&&(o.hcDark===null||typeof o.hcDark=="string"?o.hcLight=o.hcDark:o.hcLight=o.light),o}u(nZ,"migrateColorDefaults");function I(o,e,t,n,i){return ey.registerColor(o,nZ(e),t,n,i)}u(I,"registerColor");const Q=I("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},m("foreground","Overall foreground color. This color is only used if not overridden by a component."));I("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},m("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component."));const iZ=I("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},m("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component."));I("descriptionForeground",{light:"#717171",dark:pe(Q,.7),hcDark:pe(Q,.7),hcLight:pe(Q,.7)},m("descriptionForeground","Foreground color for description text providing additional information, for example for a label."));const $v=I("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},m("iconForeground","The default color for icons in the workbench.")),Ys=I("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#0F4A85"},m("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),Be=I("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},m("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),Vt=I("contrastActiveBorder",{light:null,dark:null,hcDark:Ys,hcLight:Ys},m("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast."));I("selection.background",{light:null,dark:null,hcDark:null,hcLight:null},m("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor."));I("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:B.black,hcLight:"#292929"},m("textSeparatorForeground","Color for text separators."));const ty=I("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#3794FF",hcLight:"#0F4A85"},m("textLinkForeground","Foreground color for links in text.")),ny=I("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#3794FF",hcLight:"#0F4A85"},m("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover."));I("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#D7BA7D",hcLight:"#292929"},m("textPreformatForeground","Foreground color for preformatted text segments."));I("textBlockQuote.background",{light:"#7f7f7f1a",dark:"#7f7f7f1a",hcDark:null,hcLight:"#F2F2F2"},m("textBlockQuoteBackground","Background color for block quotes in text."));I("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:B.white,hcLight:"#292929"},m("textBlockQuoteBorder","Border color for block quotes in text."));const nH=I("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:B.black,hcLight:"#F2F2F2"},m("textCodeBlockBackground","Background color for code blocks in text.")),rr=I("widget.shadow",{dark:pe(B.black,.36),light:pe(B.black,.16),hcDark:null,hcLight:null},m("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),iy=I("input.background",{dark:"#3C3C3C",light:B.white,hcDark:B.black,hcLight:B.white},m("inputBoxBackground","Input box background.")),sy=I("input.foreground",{dark:Q,light:Q,hcDark:Q,hcLight:Q},m("inputBoxForeground","Input box foreground.")),oy=I("input.border",{dark:null,light:null,hcDark:Be,hcLight:Be},m("inputBoxBorder","Input box border.")),d1=I("inputOption.activeBorder",{dark:"#007ACC00",light:"#007ACC00",hcDark:Be,hcLight:Be},m("inputBoxActiveOptionBorder","Border color of activated options in input fields."));I("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},m("inputOption.hoverBackground","Background color of activated options in input fields."));const u1=I("inputOption.activeBackground",{dark:pe(Ys,.4),light:pe(Ys,.2),hcDark:B.transparent,hcLight:B.transparent},m("inputOption.activeBackground","Background hover color of options in input fields.")),h1=I("inputOption.activeForeground",{dark:B.white,light:B.black,hcDark:null,hcLight:Q},m("inputOption.activeForeground","Foreground color of activated options in input fields."));I("input.placeholderForeground",{light:pe(Q,.5),dark:pe(Q,.5),hcDark:pe(Q,.7),hcLight:pe(Q,.7)},m("inputPlaceholderForeground","Input box foreground color for placeholder text."));const bA=I("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:B.black,hcLight:B.white},m("inputValidationInfoBackground","Input validation background color for information severity.")),_A=I("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:Q},m("inputValidationInfoForeground","Input validation foreground color for information severity.")),vA=I("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:Be,hcLight:Be},m("inputValidationInfoBorder","Input validation border color for information severity.")),CA=I("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:B.black,hcLight:B.white},m("inputValidationWarningBackground","Input validation background color for warning severity.")),wA=I("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:Q},m("inputValidationWarningForeground","Input validation foreground color for warning severity.")),yA=I("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:Be,hcLight:Be},m("inputValidationWarningBorder","Input validation border color for warning severity.")),SA=I("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:B.black,hcLight:B.white},m("inputValidationErrorBackground","Input validation background color for error severity.")),TA=I("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:Q},m("inputValidationErrorForeground","Input validation foreground color for error severity.")),LA=I("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:Be,hcLight:Be},m("inputValidationErrorBorder","Input validation border color for error severity.")),qa=I("dropdown.background",{dark:"#3C3C3C",light:B.white,hcDark:B.black,hcLight:B.white},m("dropdownBackground","Dropdown background."));I("dropdown.listBackground",{dark:null,light:null,hcDark:B.black,hcLight:B.white},m("dropdownListBackground","Dropdown list background."));const Vd=I("dropdown.foreground",{dark:"#F0F0F0",light:null,hcDark:B.white,hcLight:Q},m("dropdownForeground","Dropdown foreground.")),qv=I("dropdown.border",{dark:qa,light:"#CECECE",hcDark:Be,hcLight:Be},m("dropdownBorder","Dropdown border."));I("checkbox.background",{dark:qa,light:qa,hcDark:qa,hcLight:qa},m("checkbox.background","Background color of checkbox widget."));I("checkbox.foreground",{dark:Vd,light:Vd,hcDark:Vd,hcLight:Vd},m("checkbox.foreground","Foreground color of checkbox widget."));I("checkbox.border",{dark:qv,light:qv,hcDark:qv,hcLight:qv},m("checkbox.border","Border color of checkbox widget."));const om=I("button.foreground",{dark:B.white,light:B.white,hcDark:B.white,hcLight:B.white},m("buttonForeground","Button foreground color."));I("button.separator",{dark:pe(om,.4),light:pe(om,.4),hcDark:pe(om,.4),hcLight:pe(om,.4)},m("buttonSeparator","Button separator color."));const Jx=I("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},m("buttonBackground","Button background color.")),sZ=I("button.hoverBackground",{dark:gr(Jx,.2),light:dh(Jx,.2),hcDark:null,hcLight:null},m("buttonHoverBackground","Button background color when hovering."));I("button.border",{dark:Be,light:Be,hcDark:Be,hcLight:Be},m("buttonBorder","Button border color."));I("button.secondaryForeground",{dark:B.white,light:B.white,hcDark:B.white,hcLight:Q},m("buttonSecondaryForeground","Secondary button foreground color."));const pP=I("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:B.white},m("buttonSecondaryBackground","Secondary button background color."));I("button.secondaryHoverBackground",{dark:gr(pP,.2),light:dh(pP,.2),hcDark:null,hcLight:null},m("buttonSecondaryHoverBackground","Secondary button background color when hovering."));const lg=I("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:B.black,hcLight:"#0F4A85"},m("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),cg=I("badge.foreground",{dark:B.white,light:"#333",hcDark:B.white,hcLight:B.white},m("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),ip=I("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},m("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),Hd=I("scrollbarSlider.background",{dark:B.fromHex("#797979").transparent(.4),light:B.fromHex("#646464").transparent(.4),hcDark:pe(Be,.6),hcLight:pe(Be,.4)},m("scrollbarSliderBackground","Scrollbar slider background color.")),Bd=I("scrollbarSlider.hoverBackground",{dark:B.fromHex("#646464").transparent(.7),light:B.fromHex("#646464").transparent(.7),hcDark:pe(Be,.8),hcLight:pe(Be,.8)},m("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),Wd=I("scrollbarSlider.activeBackground",{dark:B.fromHex("#BFBFBF").transparent(.4),light:B.fromHex("#000000").transparent(.6),hcDark:Be,hcLight:Be},m("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),oZ=I("progressBar.background",{dark:B.fromHex("#0E70C0"),light:B.fromHex("#0E70C0"),hcDark:Be,hcLight:Be},m("progressBarBackground","Background color of the progress bar that can show for long running operations.")),rZ=I("editorError.background",{dark:null,light:null,hcDark:null,hcLight:null},m("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),$r=I("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},m("editorError.foreground","Foreground color of error squigglies in the editor.")),iH=I("editorError.border",{dark:null,light:null,hcDark:B.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},m("errorBorder","Border color of error boxes in the editor.")),aZ=I("editorWarning.background",{dark:null,light:null,hcDark:null,hcLight:null},m("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),xs=I("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD37",hcLight:"#895503"},m("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),of=I("editorWarning.border",{dark:null,light:null,hcDark:B.fromHex("#FFCC00").transparent(.8),hcLight:"#"},m("warningBorder","Border color of warning boxes in the editor.")),lZ=I("editorInfo.background",{dark:null,light:null,hcDark:null,hcLight:null},m("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),$i=I("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},m("editorInfo.foreground","Foreground color of info squigglies in the editor.")),g1=I("editorInfo.border",{dark:null,light:null,hcDark:B.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},m("infoBorder","Border color of info boxes in the editor.")),cZ=I("editorHint.foreground",{dark:B.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},m("editorHint.foreground","Foreground color of hint squigglies in the editor.")),dZ=I("editorHint.border",{dark:null,light:null,hcDark:B.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},m("hintBorder","Border color of hint boxes in the editor."));I("sash.hoverBorder",{dark:Ys,light:Ys,hcDark:Ys,hcLight:Ys},m("sashActiveBorder","Border color of active sashes."));const Sn=I("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:B.black,hcLight:B.white},m("editorBackground","Editor background color.")),Es=I("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:B.white,hcLight:Q},m("editorForeground","Editor default foreground color."));I("editorStickyScroll.background",{light:Sn,dark:Sn,hcDark:Sn,hcLight:Sn},m("editorStickyScrollBackground","Sticky scroll background color for the editor"));I("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:B.fromHex("#0F4A85").transparent(.1)},m("editorStickyScrollHoverBackground","Sticky scroll on hover background color for the editor"));const dn=I("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:B.white},m("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),ar=I("editorWidget.foreground",{dark:Q,light:Q,hcDark:Q,hcLight:Q},m("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),Ya=I("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:Be,hcLight:Be},m("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),uZ=I("editorWidget.resizeBorder",{light:null,dark:null,hcDark:null,hcLight:null},m("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),mP=I("quickInput.background",{dark:dn,light:dn,hcDark:dn,hcLight:dn},m("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),hZ=I("quickInput.foreground",{dark:ar,light:ar,hcDark:ar,hcLight:ar},m("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),gZ=I("quickInputTitle.background",{dark:new B(new $e(255,255,255,.105)),light:new B(new $e(0,0,0,.06)),hcDark:"#000000",hcLight:B.white},m("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),fZ=I("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:B.white,hcLight:"#0F4A85"},m("pickerGroupForeground","Quick picker color for grouping labels.")),pZ=I("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:B.white,hcLight:"#0F4A85"},m("pickerGroupBorder","Quick picker color for grouping borders.")),mZ=I("keybindingLabel.background",{dark:new B(new $e(128,128,128,.17)),light:new B(new $e(221,221,221,.4)),hcDark:B.transparent,hcLight:B.transparent},m("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),bZ=I("keybindingLabel.foreground",{dark:B.fromHex("#CCCCCC"),light:B.fromHex("#555555"),hcDark:B.white,hcLight:Q},m("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),_Z=I("keybindingLabel.border",{dark:new B(new $e(51,51,51,.6)),light:new B(new $e(204,204,204,.4)),hcDark:new B(new $e(111,195,223)),hcLight:Be},m("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),vZ=I("keybindingLabel.bottomBorder",{dark:new B(new $e(68,68,68,.6)),light:new B(new $e(187,187,187,.4)),hcDark:new B(new $e(111,195,223)),hcLight:Q},m("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),Xa=I("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},m("editorSelectionBackground","Color of the editor selection.")),CZ=I("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:B.white},m("editorSelectionForeground","Color of the selected text for high contrast.")),xA=I("editor.inactiveSelectionBackground",{light:pe(Xa,.5),dark:pe(Xa,.5),hcDark:pe(Xa,.7),hcLight:pe(Xa,.5)},m("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),EA=I("editor.selectionHighlightBackground",{light:yP(Xa,Sn,.3,.6),dark:yP(Xa,Sn,.3,.6),hcDark:null,hcLight:null},m("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0),wZ=I("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:Vt,hcLight:Vt},m("editorSelectionHighlightBorder","Border color for regions with the same content as the selection.")),yZ=I("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},m("editorFindMatch","Color of the current search match.")),Za=I("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},m("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),SZ=I("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},m("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),TZ=I("editor.findMatchBorder",{light:null,dark:null,hcDark:Vt,hcLight:Vt},m("editorFindMatchBorder","Border color of the current search match.")),Ud=I("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:Vt,hcLight:Vt},m("findMatchHighlightBorder","Border color of the other search matches.")),LZ=I("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:pe(Vt,.4),hcLight:pe(Vt,.4)},m("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);I("searchEditor.findMatchBackground",{light:pe(Za,.66),dark:pe(Za,.66),hcDark:Za,hcLight:Za},m("searchEditor.queryMatch","Color of the Search Editor query matches."));I("searchEditor.findMatchBorder",{light:pe(Ud,.66),dark:pe(Ud,.66),hcDark:Ud,hcLight:Ud},m("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."));const xZ=I("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},m("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),xu=I("editorHoverWidget.background",{light:dn,dark:dn,hcDark:dn,hcLight:dn},m("hoverBackground","Background color of the editor hover.")),kA=I("editorHoverWidget.foreground",{light:ar,dark:ar,hcDark:ar,hcLight:ar},m("hoverForeground","Foreground color of the editor hover.")),MA=I("editorHoverWidget.border",{light:Ya,dark:Ya,hcDark:Ya,hcLight:Ya},m("hoverBorder","Border color of the editor hover.")),EZ=I("editorHoverWidget.statusBarBackground",{dark:gr(xu,.2),light:dh(xu,.05),hcDark:dn,hcLight:dn},m("statusBarBackground","Background color of the editor hover status bar.")),DA=I("editorLink.activeForeground",{dark:"#4E94CE",light:B.blue,hcDark:B.cyan,hcLight:"#292929"},m("activeLinkForeground","Color of active links.")),Ja=I("editorInlayHint.foreground",{dark:pe(cg,.8),light:pe(cg,.8),hcDark:cg,hcLight:cg},m("editorInlayHintForeground","Foreground color of inline hints")),Qa=I("editorInlayHint.background",{dark:pe(lg,.6),light:pe(lg,.3),hcDark:lg,hcLight:lg},m("editorInlayHintBackground","Background color of inline hints")),kZ=I("editorInlayHint.typeForeground",{dark:Ja,light:Ja,hcDark:Ja,hcLight:Ja},m("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),MZ=I("editorInlayHint.typeBackground",{dark:Qa,light:Qa,hcDark:Qa,hcLight:Qa},m("editorInlayHintBackgroundTypes","Background color of inline hints for types")),DZ=I("editorInlayHint.parameterForeground",{dark:Ja,light:Ja,hcDark:Ja,hcLight:Ja},m("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),AZ=I("editorInlayHint.parameterBackground",{dark:Qa,light:Qa,hcDark:Qa,hcLight:Qa},m("editorInlayHintBackgroundParameter","Background color of inline hints for parameters")),IZ=I("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},m("editorLightBulbForeground","The color used for the lightbulb actions icon.")),NZ=I("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},m("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon.")),Qx=new B(new $e(155,185,85,.2)),eE=new B(new $e(255,0,0,.2)),sH=I("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c66",hcDark:null,hcLight:null},m("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),oH=I("diffEditor.removedTextBackground",{dark:"#ff000066",light:"#ff00004d",hcDark:null,hcLight:null},m("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),PZ=I("diffEditor.insertedLineBackground",{dark:Qx,light:Qx,hcDark:null,hcLight:null},m("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),RZ=I("diffEditor.removedLineBackground",{dark:eE,light:eE,hcDark:null,hcLight:null},m("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),FZ=I("diffEditorGutter.insertedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},m("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted.")),OZ=I("diffEditorGutter.removedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},m("diffEditorRemovedLineGutter","Background color for the margin where lines got removed.")),VZ=I("diffEditorOverview.insertedForeground",{dark:null,light:null,hcDark:null,hcLight:null},m("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),HZ=I("diffEditorOverview.removedForeground",{dark:null,light:null,hcDark:null,hcLight:null},m("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content.")),BZ=I("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},m("diffEditorInsertedOutline","Outline color for the text that got inserted.")),WZ=I("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},m("diffEditorRemovedOutline","Outline color for text that got removed.")),UZ=I("diffEditor.border",{dark:null,light:null,hcDark:Be,hcLight:Be},m("diffEditorBorder","Border color between the two text editors.")),GZ=I("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},m("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),zZ=I("list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},m("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),KZ=I("list.focusForeground",{dark:null,light:null,hcDark:null,hcLight:null},m("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),jZ=I("list.focusOutline",{dark:Ys,light:Ys,hcDark:Vt,hcLight:Vt},m("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),$Z=I("list.focusAndSelectionOutline",{dark:null,light:null,hcDark:null,hcLight:null},m("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),el=I("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:B.fromHex("#0F4A85").transparent(.1)},m("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),qr=I("list.activeSelectionForeground",{dark:B.white,light:B.white,hcDark:null,hcLight:null},m("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),rm=I("list.activeSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},m("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),qZ=I("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:B.fromHex("#0F4A85").transparent(.1)},m("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),YZ=I("list.inactiveSelectionForeground",{dark:null,light:null,hcDark:null,hcLight:null},m("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),XZ=I("list.inactiveSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},m("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),ZZ=I("list.inactiveFocusBackground",{dark:null,light:null,hcDark:null,hcLight:null},m("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),JZ=I("list.inactiveFocusOutline",{dark:null,light:null,hcDark:null,hcLight:null},m("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),QZ=I("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:B.fromHex("#0F4A85").transparent(.1)},m("listHoverBackground","List/Tree background when hovering over items using the mouse.")),eJ=I("list.hoverForeground",{dark:null,light:null,hcDark:null,hcLight:null},m("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),tJ=I("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},m("listDropBackground","List/Tree drag and drop background when moving items around using the mouse.")),wo=I("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:Ys,hcLight:Ys},m("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),Yv=I("list.focusHighlightForeground",{dark:wo,light:EJ(el,wo,"#BBE7FF"),hcDark:wo,hcLight:wo},m("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));I("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},m("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer."));I("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},m("listErrorForeground","Foreground color of list items containing errors."));I("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},m("listWarningForeground","Foreground color of list items containing warnings."));const nJ=I("listFilterWidget.background",{light:dh(dn,0),dark:gr(dn,0),hcDark:dn,hcLight:dn},m("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),iJ=I("listFilterWidget.outline",{dark:B.transparent,light:B.transparent,hcDark:"#f38518",hcLight:"#007ACC"},m("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),sJ=I("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:Be,hcLight:Be},m("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),oJ=I("listFilterWidget.shadow",{dark:rr,light:rr,hcDark:rr,hcLight:rr},m("listFilterWidgetShadow","Shadown color of the type filter widget in lists and trees."));I("list.filterMatchBackground",{dark:Za,light:Za,hcDark:null,hcLight:null},m("listFilterMatchHighlight","Background color of the filtered match."));I("list.filterMatchBorder",{dark:Ud,light:Ud,hcDark:Be,hcLight:Vt},m("listFilterMatchHighlightBorder","Border color of the filtered match."));const rJ=I("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},m("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),aJ=I("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},m("tableColumnsBorder","Table border color between columns.")),lJ=I("tree.tableOddRowsBackground",{dark:pe(Q,.04),light:pe(Q,.04),hcDark:null,hcLight:null},m("tableOddRowsBackgroundColor","Background color for odd table rows."));I("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},m("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized. "));const bP=I("quickInput.list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},"",void 0,m("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),am=I("quickInputList.focusForeground",{dark:qr,light:qr,hcDark:qr,hcLight:qr},m("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),lm=I("quickInputList.focusIconForeground",{dark:rm,light:rm,hcDark:rm,hcLight:rm},m("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),cm=I("quickInputList.focusBackground",{dark:yb(bP,el),light:yb(bP,el),hcDark:null,hcLight:null},m("quickInput.listFocusBackground","Quick picker background color for the focused item.")),cJ=I("menu.border",{dark:null,light:null,hcDark:Be,hcLight:Be},m("menuBorder","Border color of menus.")),dJ=I("menu.foreground",{dark:Vd,light:Q,hcDark:Vd,hcLight:Vd},m("menuForeground","Foreground color of menu items.")),uJ=I("menu.background",{dark:qa,light:qa,hcDark:qa,hcLight:qa},m("menuBackground","Background color of menu items.")),hJ=I("menu.selectionForeground",{dark:qr,light:qr,hcDark:qr,hcLight:qr},m("menuSelectionForeground","Foreground color of the selected menu item in menus.")),gJ=I("menu.selectionBackground",{dark:el,light:el,hcDark:el,hcLight:el},m("menuSelectionBackground","Background color of the selected menu item in menus.")),fJ=I("menu.selectionBorder",{dark:null,light:null,hcDark:Vt,hcLight:Vt},m("menuSelectionBorder","Border color of the selected menu item in menus.")),pJ=I("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:Be,hcLight:Be},m("menuSeparatorBackground","Color of a separator menu item in menus.")),tE=I("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},m("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse"));I("toolbar.hoverOutline",{dark:null,light:null,hcDark:Vt,hcLight:Vt},m("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse"));I("toolbar.activeBackground",{dark:gr(tE,.1),light:dh(tE,.1),hcDark:null,hcLight:null},m("toolbarActiveBackground","Toolbar background when holding the mouse over actions"));I("editor.snippetTabstopHighlightBackground",{dark:new B(new $e(124,124,124,.3)),light:new B(new $e(10,50,100,.2)),hcDark:new B(new $e(124,124,124,.3)),hcLight:new B(new $e(10,50,100,.2))},m("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop."));I("editor.snippetTabstopHighlightBorder",{dark:null,light:null,hcDark:null,hcLight:null},m("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop."));I("editor.snippetFinalTabstopHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},m("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet."));I("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new B(new $e(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},m("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet."));I("breadcrumb.foreground",{light:pe(Q,.8),dark:pe(Q,.8),hcDark:pe(Q,.8),hcLight:pe(Q,.8)},m("breadcrumbsFocusForeground","Color of focused breadcrumb items."));I("breadcrumb.background",{light:Sn,dark:Sn,hcDark:Sn,hcLight:Sn},m("breadcrumbsBackground","Background color of breadcrumb items."));I("breadcrumb.focusForeground",{light:dh(Q,.2),dark:gr(Q,.1),hcDark:gr(Q,.1),hcLight:gr(Q,.1)},m("breadcrumbsFocusForeground","Color of focused breadcrumb items."));I("breadcrumb.activeSelectionForeground",{light:dh(Q,.2),dark:gr(Q,.1),hcDark:gr(Q,.1),hcLight:gr(Q,.1)},m("breadcrumbsSelectedForeground","Color of selected breadcrumb items."));I("breadcrumbPicker.background",{light:dn,dark:dn,hcDark:dn,hcLight:dn},m("breadcrumbsSelectedBackground","Background color of breadcrumb item picker."));const rH=.5,_P=B.fromHex("#40C8AE").transparent(rH),vP=B.fromHex("#40A6FF").transparent(rH),CP=B.fromHex("#606060").transparent(.4),yo=.4,rf=1,dg=I("merge.currentHeaderBackground",{dark:_P,light:_P,hcDark:null,hcLight:null},m("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);I("merge.currentContentBackground",{dark:pe(dg,yo),light:pe(dg,yo),hcDark:pe(dg,yo),hcLight:pe(dg,yo)},m("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const ug=I("merge.incomingHeaderBackground",{dark:vP,light:vP,hcDark:null,hcLight:null},m("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);I("merge.incomingContentBackground",{dark:pe(ug,yo),light:pe(ug,yo),hcDark:pe(ug,yo),hcLight:pe(ug,yo)},m("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const hg=I("merge.commonHeaderBackground",{dark:CP,light:CP,hcDark:null,hcLight:null},m("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);I("merge.commonContentBackground",{dark:pe(hg,yo),light:pe(hg,yo),hcDark:pe(hg,yo),hcLight:pe(hg,yo)},m("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const af=I("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},m("mergeBorder","Border color on headers and the splitter in inline merge-conflicts."));I("editorOverviewRuler.currentContentForeground",{dark:pe(dg,rf),light:pe(dg,rf),hcDark:af,hcLight:af},m("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts."));I("editorOverviewRuler.incomingContentForeground",{dark:pe(ug,rf),light:pe(ug,rf),hcDark:af,hcLight:af},m("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts."));I("editorOverviewRuler.commonContentForeground",{dark:pe(hg,rf),light:pe(hg,rf),hcDark:af,hcLight:af},m("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts."));const AA=I("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:""},m("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),aH=I("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},m("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),gg=I("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},m("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),ry=I("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},m("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),wP=I("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},m("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),mJ=I("minimap.errorHighlight",{dark:new B(new $e(255,18,18,.7)),light:new B(new $e(255,18,18,.7)),hcDark:new B(new $e(255,50,50,1)),hcLight:"#B5200D"},m("minimapError","Minimap marker color for errors.")),bJ=I("minimap.warningHighlight",{dark:xs,light:xs,hcDark:of,hcLight:of},m("overviewRuleWarning","Minimap marker color for warnings.")),_J=I("minimap.background",{dark:null,light:null,hcDark:null,hcLight:null},m("minimapBackground","Minimap background color.")),vJ=I("minimap.foregroundOpacity",{dark:B.fromHex("#000f"),light:B.fromHex("#000f"),hcDark:B.fromHex("#000f"),hcLight:B.fromHex("#000f")},m("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.')),CJ=I("minimapSlider.background",{light:pe(Hd,.5),dark:pe(Hd,.5),hcDark:pe(Hd,.5),hcLight:pe(Hd,.5)},m("minimapSliderBackground","Minimap slider background color.")),wJ=I("minimapSlider.hoverBackground",{light:pe(Bd,.5),dark:pe(Bd,.5),hcDark:pe(Bd,.5),hcLight:pe(Bd,.5)},m("minimapSliderHoverBackground","Minimap slider background color when hovering.")),yJ=I("minimapSlider.activeBackground",{light:pe(Wd,.5),dark:pe(Wd,.5),hcDark:pe(Wd,.5),hcLight:pe(Wd,.5)},m("minimapSliderActiveBackground","Minimap slider background color when clicked on.")),SJ=I("problemsErrorIcon.foreground",{dark:$r,light:$r,hcDark:$r,hcLight:$r},m("problemsErrorIconForeground","The color used for the problems error icon.")),TJ=I("problemsWarningIcon.foreground",{dark:xs,light:xs,hcDark:xs,hcLight:xs},m("problemsWarningIconForeground","The color used for the problems warning icon.")),LJ=I("problemsInfoIcon.foreground",{dark:$i,light:$i,hcDark:$i,hcLight:$i},m("problemsInfoIconForeground","The color used for the problems info icon."));I("charts.foreground",{dark:Q,light:Q,hcDark:Q,hcLight:Q},m("chartsForeground","The foreground color used in charts."));I("charts.lines",{dark:pe(Q,.5),light:pe(Q,.5),hcDark:pe(Q,.5),hcLight:pe(Q,.5)},m("chartsLines","The color used for horizontal lines in charts."));I("charts.red",{dark:$r,light:$r,hcDark:$r,hcLight:$r},m("chartsRed","The red color used in chart visualizations."));I("charts.blue",{dark:$i,light:$i,hcDark:$i,hcLight:$i},m("chartsBlue","The blue color used in chart visualizations."));I("charts.yellow",{dark:xs,light:xs,hcDark:xs,hcLight:xs},m("chartsYellow","The yellow color used in chart visualizations."));I("charts.orange",{dark:gg,light:gg,hcDark:gg,hcLight:gg},m("chartsOrange","The orange color used in chart visualizations."));I("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},m("chartsGreen","The green color used in chart visualizations."));I("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},m("chartsPurple","The purple color used in chart visualizations."));function xJ(o,e){var t,n,i;switch(o.op){case 0:return(t=Ma(o.value,e))===null||t===void 0?void 0:t.darken(o.factor);case 1:return(n=Ma(o.value,e))===null||n===void 0?void 0:n.lighten(o.factor);case 2:return(i=Ma(o.value,e))===null||i===void 0?void 0:i.transparent(o.factor);case 3:for(const s of o.values){const r=Ma(s,e);if(r)return r}return;case 5:return Ma(e.defines(o.if)?o.then:o.else,e);case 4:{const s=Ma(o.value,e);if(!s)return;const r=Ma(o.background,e);return r?s.isDarkerThan(r)?B.getLighterColor(s,r,o.factor).transparent(o.transparency):B.getDarkerColor(s,r,o.factor).transparent(o.transparency):s.transparent(o.factor*o.transparency)}default:throw Lw()}}u(xJ,"executeTransform");function dh(o,e){return{op:0,value:o,factor:e}}u(dh,"darken");function gr(o,e){return{op:1,value:o,factor:e}}u(gr,"lighten");function pe(o,e){return{op:2,value:o,factor:e}}u(pe,"transparent");function yb(...o){return{op:3,values:o}}u(yb,"oneOf");function EJ(o,e,t){return{op:5,if:o,then:e,else:t}}u(EJ,"ifDefinedThenElse");function yP(o,e,t,n){return{op:4,value:o,background:e,factor:t,transparency:n}}u(yP,"lessProminent");function Ma(o,e){if(o!==null){if(typeof o=="string")return o[0]==="#"?B.fromHex(o):e.getColor(o);if(o instanceof B)return o;if(typeof o=="object")return xJ(o,e)}}u(Ma,"resolveColorValue");const lH="vscode://schemas/workbench-colors",cH=zt.as(Hw.JSONContribution);cH.registerSchema(lH,ey.getColorSchema());const SP=new pt(()=>cH.notifySchemaChanged(lH),200);ey.onDidChangeSchema(()=>{SP.isScheduled()||SP.schedule()});class ay{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(){return new IA(this.x-al.scrollX,this.y-al.scrollY)}}u(ay,"PageCoordinates");class IA{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(){return new ay(this.clientX+al.scrollX,this.clientY+al.scrollY)}}u(IA,"ClientCoordinates");class dH{constructor(e,t,n,i){this.x=e,this.y=t,this.width=n,this.height=i,this._editorPagePositionBrand=void 0}}u(dH,"EditorPagePosition");class uH{constructor(e,t){this.x=e,this.y=t,this._positionRelativeToEditorBrand=void 0}}u(uH,"CoordinatesRelativeToEditor");function hH(o){const e=li(o);return new dH(e.left,e.top,e.width,e.height)}u(hH,"createEditorPagePosition");function gH(o,e,t){const n=e.width/o.offsetWidth,i=e.height/o.offsetHeight,s=(t.x-e.x)/n,r=(t.y-e.y)/i;return new uH(s,r)}u(gH,"createCoordinatesRelativeToEditor");class vl extends sr{constructor(e,t,n){super(e),this._editorMouseEventBrand=void 0,this.isFromPointerCapture=t,this.pos=new ay(this.posx,this.posy),this.editorPos=hH(n),this.relativePos=gH(n,this.editorPos,this.pos)}}u(vl,"EditorMouseEvent");class fH{constructor(e){this._editorViewDomNode=e}_create(e){return new vl(e,!1,this._editorViewDomNode)}onContextMenu(e,t){return Y(e,"contextmenu",n=>{t(this._create(n))})}onMouseUp(e,t){return Y(e,"mouseup",n=>{t(this._create(n))})}onMouseDown(e,t){return Y(e,le.MOUSE_DOWN,n=>{t(this._create(n))})}onPointerDown(e,t){return Y(e,le.POINTER_DOWN,n=>{t(this._create(n),n.pointerId)})}onMouseLeave(e,t){return Y(e,le.MOUSE_LEAVE,n=>{t(this._create(n))})}onMouseMove(e,t){return Y(e,"mousemove",n=>t(this._create(n)))}}u(fH,"EditorMouseEventFactory");class pH{constructor(e){this._editorViewDomNode=e}_create(e){return new vl(e,!1,this._editorViewDomNode)}onPointerUp(e,t){return Y(e,"pointerup",n=>{t(this._create(n))})}onPointerDown(e,t){return Y(e,le.POINTER_DOWN,n=>{t(this._create(n),n.pointerId)})}onPointerLeave(e,t){return Y(e,le.POINTER_LEAVE,n=>{t(this._create(n))})}onPointerMove(e,t){return Y(e,"pointermove",n=>t(this._create(n)))}}u(pH,"EditorPointerEventFactory");class mH extends U{constructor(e){super(),this._editorViewDomNode=e,this._globalPointerMoveMonitor=this._register(new ch),this._keydownListener=null}startMonitoring(e,t,n,i,s){this._keydownListener=Dn(document,"keydown",r=>{r.toKeybinding().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,r.browserEvent)},!0),this._globalPointerMoveMonitor.startMonitoring(e,t,n,r=>{i(new vl(r,!0,this._editorViewDomNode))},r=>{this._keydownListener.dispose(),s(r)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}u(mH,"GlobalEditorPointerMoveMonitor");class sp{constructor(e){this._editor=e,this._instanceId=++sp._idPool,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new pt(()=>this.garbageCollect(),1e3)}createClassNameRef(e){const t=this.getOrCreateRule(e);return t.increaseRefCount(),{className:t.className,dispose:()=>{t.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(e){const t=this.computeUniqueKey(e);let n=this._rules.get(t);if(!n){const i=this._counter++;n=new bH(t,`dyn-rule-${this._instanceId}-${i}`,fb(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,e),this._rules.set(t,n)}return n}computeUniqueKey(e){return JSON.stringify(e)}garbageCollect(){for(const e of this._rules.values())e.hasReferences()||(this._rules.delete(e.key),e.dispose())}}u(sp,"DynamicCssRules");sp._idPool=0;class bH{constructor(e,t,n,i){this.key=e,this.className=t,this.properties=i,this._referenceCount=0,this._styleElement=oo(n),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(e,t){let n=`.${e} {`;for(const i in t){const s=t[i];let r;typeof s=="object"?r=`var(${QV(s.id)})`:r=s;const a=kJ(i);n+=`
	${a}: ${r};`}return n+=`
}`,n}dispose(){this._styleElement.remove()}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}}u(bH,"RefCountedCssRule");function kJ(o){return o.replace(/(^[A-Z])/,([e])=>e.toLowerCase()).replace(/([A-Z])/g,([e])=>`-${e.toLowerCase()}`)}u(kJ,"camelToDashes");class op extends U{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let n=0,i=e.length;n<i;n++){const s=e[n];switch(s.type){case 0:this.onCompositionStart(s)&&(t=!0);break;case 1:this.onCompositionEnd(s)&&(t=!0);break;case 2:this.onConfigurationChanged(s)&&(t=!0);break;case 3:this.onCursorStateChanged(s)&&(t=!0);break;case 4:this.onDecorationsChanged(s)&&(t=!0);break;case 5:this.onFlushed(s)&&(t=!0);break;case 6:this.onFocusChanged(s)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(s)&&(t=!0);break;case 8:this.onLineMappingChanged(s)&&(t=!0);break;case 9:this.onLinesChanged(s)&&(t=!0);break;case 10:this.onLinesDeleted(s)&&(t=!0);break;case 11:this.onLinesInserted(s)&&(t=!0);break;case 12:this.onRevealRangeRequest(s)&&(t=!0);break;case 13:this.onScrollChanged(s)&&(t=!0);break;case 15:this.onTokensChanged(s)&&(t=!0);break;case 14:this.onThemeChanged(s)&&(t=!0);break;case 16:this.onTokensColorsChanged(s)&&(t=!0);break;case 17:this.onZonesChanged(s)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(s)}}t&&(this._shouldRender=!0)}}u(op,"ViewEventHandler");class fs extends op{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}u(fs,"ViewPart");class _r{static write(e,t){e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){const n=[];let i=0;for(;e&&e!==document.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(n[i++]=this.read(e)),e=e.parentElement;const s=new Uint8Array(i);for(let r=0;r<i;r++)s[r]=n[i-r-1];return s}}u(_r,"PartFingerprints");class _H{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const n=this._viewLayout.getCurrentViewport();this.scrollTop=n.top,this.scrollLeft=n.left,this.viewportWidth=n.width,this.viewportHeight=n.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e){return this._viewLayout.getVerticalOffsetForLineNumber(e)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}u(_H,"RestrictedRenderingContext");class vH extends _H{constructor(e,t,n){super(e,t),this._renderingContextBrand=void 0,this._viewLines=n}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}u(vH,"RenderingContext");class CH{constructor(e,t,n){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=n}}u(CH,"LineVisibleRanges");class O_{constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}static from(e){const t=new Array(e.length);for(let n=0,i=e.length;n<i;n++){const s=e[n];t[n]=new O_(s.left,s.width)}return t}toString(){return`[${this.left},${this.width}]`}}u(O_,"HorizontalRange");class Jd{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}u(Jd,"FloatHorizontalRange");class wH{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}u(wH,"HorizontalPosition");class yH{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}u(yH,"VisibleRanges");class t0{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,n,i,s){const r=this._createRange();try{return r.setStart(e,t),r.setEnd(n,i),r.getClientRects()}catch{return null}finally{this._detachRange(r,s)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(Jd.compare);const t=[];let n=0,i=e[0];for(let s=1,r=e.length;s<r;s++){const a=e[s];i.left+i.width+.9>=a.left?i.width=Math.max(i.width,a.left+a.width-i.left):(t[n++]=i,i=a)}return t[n++]=i,t}static _createHorizontalRangesFromClientRects(e,t,n){if(!e||e.length===0)return null;const i=[];for(let s=0,r=e.length;s<r;s++){const a=e[s];i[s]=new Jd(Math.max(0,(a.left-t)/n),a.width/n)}return this._mergeAdjacentRanges(i)}static readHorizontalRanges(e,t,n,i,s,r,a,l){const d=e.children.length-1;if(0>d)return null;if(t=Math.min(d,Math.max(0,t)),i=Math.min(d,Math.max(0,i)),t===i&&n===s&&n===0&&!e.children[t].firstChild){const p=e.children[t].getClientRects();return this._createHorizontalRangesFromClientRects(p,r,a)}t!==i&&i>0&&s===0&&(i--,s=1073741824);let h=e.children[t].firstChild,g=e.children[i].firstChild;if((!h||!g)&&(!h&&n===0&&t>0&&(h=e.children[t-1].firstChild,n=1073741824),!g&&s===0&&i>0&&(g=e.children[i-1].firstChild,s=1073741824)),!h||!g)return null;n=Math.min(h.textContent.length,Math.max(0,n)),s=Math.min(g.textContent.length,Math.max(0,s));const f=this._readClientRects(h,n,g,s,l);return this._createHorizontalRangesFromClientRects(f,r,a)}}u(t0,"RangeUtil");const MJ=function(){return cr?!0:!(hi||Is||pl)}();let Dg=!0;class nE{constructor(e,t){this._domNode=e,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1,this.endNode=t}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;const e=this._domNode.getBoundingClientRect();this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}}u(nE,"DomReadingContext");class iE{constructor(e,t){this.themeType=t;const n=e.options,i=n.get(46);this.renderWhitespace=n.get(90),this.renderControlCharacters=n.get(85),this.spaceWidth=i.spaceWidth,this.middotWidth=i.middotWidth,this.wsmiddotWidth=i.wsmiddotWidth,this.useMonospaceOptimizations=i.isMonospace&&!n.get(29),this.canUseHalfwidthRightwardsArrow=i.canUseHalfwidthRightwardsArrow,this.lineHeight=n.get(61),this.stopRenderingLineAfter=n.get(107),this.fontLigatures=n.get(47)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}u(iE,"ViewLineOptions");class Xo{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=et(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return ui(this._options.themeType)||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,n,i){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const s=n.getViewLineRenderingData(e),r=this._options,a=ji.filter(s.inlineDecorations,e,s.minColumn,s.maxColumn);let l=null;if(ui(r.themeType)||this._options.renderWhitespace==="selection"){const g=n.selections;for(const f of g){if(f.endLineNumber<e||f.startLineNumber>e)continue;const p=f.startLineNumber===e?f.startColumn:s.minColumn,_=f.endLineNumber===e?f.endColumn:s.maxColumn;p<_&&(ui(r.themeType)||this._options.renderWhitespace!=="selection"?a.push(new ji(p,_,"inline-selected-text",0)):(l||(l=[]),l.push(new lV(p-1,_-1))))}}const c=new Ml(r.useMonospaceOptimizations,r.canUseHalfwidthRightwardsArrow,s.content,s.continuesWithWrappedLine,s.isBasicASCII,s.containsRTL,s.minColumn-1,s.tokens,a,s.tabSize,s.startVisibleColumn,r.spaceWidth,r.middotWidth,r.wsmiddotWidth,r.stopRenderingLineAfter,r.renderWhitespace,r.renderControlCharacters,r.fontLigatures!==is.OFF,l);if(this._renderedViewLine&&this._renderedViewLine.input.equals(c))return!1;i.appendASCIIString('<div style="top:'),i.appendASCIIString(String(t)),i.appendASCIIString("px;height:"),i.appendASCIIString(String(this._options.lineHeight)),i.appendASCIIString('px;" class="'),i.appendASCIIString(Xo.CLASS_NAME),i.appendASCIIString('">');const d=L_(c,i);i.appendASCIIString("</div>");let h=null;return Dg&&MJ&&s.isBasicASCII&&r.useMonospaceOptimizations&&d.containsForeignElements===0&&s.content.length<300&&c.lineTokens.getCount()<100&&(h=new dm(this._renderedViewLine?this._renderedViewLine.domNode:null,c,d.characterMapping)),h||(h=TH(this._renderedViewLine?this._renderedViewLine.domNode:null,c,d.characterMapping,d.containsRTL,d.containsForeignElements)),this._renderedViewLine=h,!0}layoutLine(e,t){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))}getWidth(){return this._renderedViewLine?this._renderedViewLine.getWidth():0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof dm:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof dm?this._renderedViewLine.monospaceAssumptionsAreValid():Dg}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof dm&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,n,i){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),n=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,n));const s=this._renderedViewLine.input.stopRenderingLineAfter;let r=!1;s!==-1&&t>s+1&&n>s+1&&(r=!0),s!==-1&&t>s+1&&(t=s+1),s!==-1&&n>s+1&&(n=s+1);const a=this._renderedViewLine.getVisibleRangesForRange(e,t,n,i);return a&&a.length>0?new yH(r,a):null}getColumnOfNodeOffset(e,t,n){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t,n):1}}u(Xo,"ViewLine");Xo.CLASS_NAME="view-line";class dm{constructor(e,t,n){this.domNode=e,this.input=t,this._characterMapping=n,this._charWidth=t.spaceWidth}getWidth(){return Math.round(this._getCharPosition(this._characterMapping.length))}getWidthIsFast(){return!0}monospaceAssumptionsAreValid(){if(!this.domNode)return Dg;const e=this.getWidth(),t=this.domNode.domNode.firstChild.offsetWidth;return Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),Dg=!1),Dg}toSlowRenderedLine(){return TH(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,n,i){const s=this._getCharPosition(t),r=this._getCharPosition(n);return[new Jd(s,r-s)]}_getCharPosition(e){const t=this._characterMapping.getHorizontalOffset(e);return this._charWidth*t}getColumnOfNodeOffset(e,t,n){const i=t.textContent.length;let s=-1;for(;t;)t=t.previousSibling,s++;return this._characterMapping.getColumn(new Kw(s,n),i)}}u(dm,"FastRenderedViewLine");class NA{constructor(e,t,n,i,s){if(this.domNode=e,this.input=t,this._characterMapping=n,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=s,this._cachedWidth=-1,this._pixelOffsetCache=null,!i||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let r=0,a=this._characterMapping.length;r<=a;r++)this._pixelOffsetCache[r]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,n,i){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const s=this._readPixelOffset(this.domNode,e,t,i);if(s===-1)return null;const r=this._readPixelOffset(this.domNode,e,n,i);return r===-1?null:[new Jd(s,r-s)]}return this._readVisibleRangesForRange(this.domNode,e,t,n,i)}_readVisibleRangesForRange(e,t,n,i,s){if(n===i){const r=this._readPixelOffset(e,t,n,s);return r===-1?null:[new Jd(r,0)]}else return this._readRawVisibleRangesForRange(e,n,i,s)}_readPixelOffset(e,t,n,i){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth();const s=this._getReadingTarget(e);return s.firstChild?s.firstChild.offsetWidth:0}if(this._pixelOffsetCache!==null){const s=this._pixelOffsetCache[n];if(s!==-1)return s;const r=this._actualReadPixelOffset(e,t,n,i);return this._pixelOffsetCache[n]=r,r}return this._actualReadPixelOffset(e,t,n,i)}_actualReadPixelOffset(e,t,n,i){if(this._characterMapping.length===0){const l=t0.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,i.clientRectDeltaLeft,i.clientRectScale,i.endNode);return!l||l.length===0?-1:l[0].left}if(n===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth();const s=this._characterMapping.getDomPosition(n),r=t0.readHorizontalRanges(this._getReadingTarget(e),s.partIndex,s.charIndex,s.partIndex,s.charIndex,i.clientRectDeltaLeft,i.clientRectScale,i.endNode);if(!r||r.length===0)return-1;const a=r[0].left;if(this.input.isBasicASCII){const l=this._characterMapping.getHorizontalOffset(n),c=Math.round(this.input.spaceWidth*l);if(Math.abs(c-a)<=1)return c}return a}_readRawVisibleRangesForRange(e,t,n,i){if(t===1&&n===this._characterMapping.length)return[new Jd(0,this.getWidth())];const s=this._characterMapping.getDomPosition(t),r=this._characterMapping.getDomPosition(n);return t0.readHorizontalRanges(this._getReadingTarget(e),s.partIndex,s.charIndex,r.partIndex,r.charIndex,i.clientRectDeltaLeft,i.clientRectScale,i.endNode)}getColumnOfNodeOffset(e,t,n){const i=t.textContent.length;let s=-1;for(;t;)t=t.previousSibling,s++;return this._characterMapping.getColumn(new Kw(s,n),i)}}u(NA,"RenderedViewLine");class SH extends NA{_readVisibleRangesForRange(e,t,n,i,s){const r=super._readVisibleRangesForRange(e,t,n,i,s);if(!r||r.length===0||n===i||n===1&&i===this._characterMapping.length)return r;if(!this.input.containsRTL){const a=this._readPixelOffset(e,t,i,s);if(a!==-1){const l=r[r.length-1];l.left<a&&(l.width=a-l.left)}}return r}}u(SH,"WebKitRenderedViewLine");const TH=function(){return hc?DJ:AJ}();function DJ(o,e,t,n,i){return new SH(o,e,t,n,i)}u(DJ,"createWebKitRenderedLine");function AJ(o,e,t,n,i){return new NA(o,e,t,n,i)}u(AJ,"createNormalRenderedLine");class mn{static _nextVisibleColumn(e,t,n){return e===9?mn.nextRenderTabStop(t,n):Tc(e)||zD(e)?t+2:t+1}static visibleColumnFromColumn(e,t,n){const i=Math.min(t-1,e.length),s=e.substring(0,i),r=new ob(s);let a=0;for(;!r.eol();){const l=J0(s,i,r.offset);r.nextGraphemeLength(),a=this._nextVisibleColumn(l,a,n)}return a}static columnFromVisibleColumn(e,t,n){if(t<=0)return 1;const i=e.length,s=new ob(e);let r=0,a=1;for(;!s.eol();){const l=J0(e,i,s.offset);s.nextGraphemeLength();const c=this._nextVisibleColumn(l,r,n),d=s.offset+1;if(c>=t){const h=t-r;return c-t<h?d:a}r=c,a=d}return i+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}u(mn,"CursorColumns");class lf{static whitespaceVisibleColumn(e,t,n){const i=e.length;let s=0,r=-1,a=-1;for(let l=0;l<i;l++){if(l===t)return[r,a,s];switch(s%n===0&&(r=l,a=s),e.charCodeAt(l)){case 32:s+=1;break;case 9:s=mn.nextRenderTabStop(s,n);break;default:return[-1,-1,-1]}}return t===i?[r,a,s]:[-1,-1,-1]}static atomicPosition(e,t,n,i){const s=e.length,[r,a,l]=lf.whitespaceVisibleColumn(e,t,n);if(l===-1)return-1;let c;switch(i){case 0:c=!0;break;case 1:c=!1;break;case 2:if(l%n===0)return t;c=l%n<=n/2;break}if(c){if(r===-1)return-1;let g=a;for(let f=r;f<s;++f){if(g===a+n)return r;switch(e.charCodeAt(f)){case 32:g+=1;break;case 9:g=mn.nextRenderTabStop(g,n);break;default:return-1}}return g===a+n?r:-1}const d=mn.nextRenderTabStop(l,n);let h=l;for(let g=t;g<s;g++){if(h===d)return g;switch(e.charCodeAt(g)){case 32:h+=1;break;case 9:h=mn.nextRenderTabStop(h,n);break;default:return-1}}return h===d?s:-1}}u(lf,"AtomicTabMoveOperations");class Da{constructor(e=null){this.hitTarget=e,this.type=0}}u(Da,"UnknownHitTestResult");class f1{constructor(e,t,n){this.position=e,this.spanNode=t,this.injectedText=n,this.type=1}}u(f1,"ContentHitTestResult");var Ed;(function(o){function e(t,n,i){const s=t.getPositionFromDOMInfo(n,i);return s?new f1(s,n,null):new Da(n)}u(e,"createFromDOMInfo"),o.createFromDOMInfo=e})(Ed||(Ed={}));class LH{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}u(LH,"PointerHandlerLastRenderData");class Li{static _deduceRage(e,t=null){return!t&&e?new L(e.lineNumber,e.column,e.lineNumber,e.column):t??null}static createUnknown(e,t,n){return{type:0,element:e,mouseColumn:t,position:n,range:this._deduceRage(n)}}static createTextarea(e,t){return{type:1,element:e,mouseColumn:t,position:null,range:null}}static createMargin(e,t,n,i,s,r){return{type:e,element:t,mouseColumn:n,position:i,range:s,detail:r}}static createViewZone(e,t,n,i,s){return{type:e,element:t,mouseColumn:n,position:i,range:this._deduceRage(i),detail:s}}static createContentText(e,t,n,i,s){return{type:6,element:e,mouseColumn:t,position:n,range:this._deduceRage(n,i),detail:s}}static createContentEmpty(e,t,n,i){return{type:7,element:e,mouseColumn:t,position:n,range:this._deduceRage(n),detail:i}}static createContentWidget(e,t,n){return{type:9,element:e,mouseColumn:t,position:null,range:null,detail:n}}static createScrollbar(e,t,n){return{type:11,element:e,mouseColumn:t,position:n,range:this._deduceRage(n)}}static createOverlayWidget(e,t,n){return{type:12,element:e,mouseColumn:t,position:null,range:null,detail:n}}static createOutsideEditor(e,t){return{type:13,element:null,mouseColumn:e,position:t,range:this._deduceRage(t)}}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}}u(Li,"MouseTarget");class Os{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===6}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===7}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===7}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===5}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===8}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}}u(Os,"ElementPath");class Eu{constructor(e,t,n){this.viewModel=e.viewModel;const i=e.configuration.options;this.layoutInfo=i.get(133),this.viewDomNode=t.viewDomNode,this.lineHeight=i.get(61),this.stickyTabStops=i.get(106),this.typicalHalfwidthCharacterWidth=i.get(46).typicalHalfwidthCharacterWidth,this.lastRenderData=n,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return Eu.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const n=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(n){const i=n.verticalOffset+n.height/2,s=e.viewModel.getLineCount();let r=null,a,l=null;return n.afterLineNumber!==s&&(l=new H(n.afterLineNumber+1,1)),n.afterLineNumber>0&&(r=new H(n.afterLineNumber,e.viewModel.getLineMaxColumn(n.afterLineNumber))),l===null?a=r:r===null?a=l:t<i?a=r:a=l,{viewZoneId:n.id,afterLineNumber:n.afterLineNumber,positionBefore:r,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const i=this._context.viewModel.getLineCount(),s=this._context.viewModel.getLineMaxColumn(i);return{range:new L(i,s,i,s),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),n=this._context.viewModel.getLineMaxColumn(t);return{range:new L(t,1,t,n),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return Eu._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,n){for(;e&&e!==document.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===n)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}u(Eu,"HitTestContext");class xH{constructor(e,t,n,i){this.editorPos=t,this.pos=n,this.relativePos=i,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+this.relativePos.x-e.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<e.layoutInfo.contentLeft&&this.relativePos.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,qn._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}u(xH,"BareHitTestRequest");class ly extends xH{constructor(e,t,n,i,s){super(e,t,n,i),this._ctx=e,s?(this.target=s,this.targetPath=_r.collect(s,e.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array(0))}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}_getMouseColumn(e=null){return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?mn.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(e=null){return Li.createUnknown(this.target,this._getMouseColumn(e),e)}fulfillTextarea(){return Li.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(e,t,n,i){return Li.createMargin(e,this.target,this._getMouseColumn(t),t,n,i)}fulfillViewZone(e,t,n){return Li.createViewZone(e,this.target,this._getMouseColumn(t),t,n)}fulfillContentText(e,t,n){return Li.createContentText(this.target,this._getMouseColumn(e),e,t,n)}fulfillContentEmpty(e,t){return Li.createContentEmpty(this.target,this._getMouseColumn(e),e,t)}fulfillContentWidget(e){return Li.createContentWidget(this.target,this._getMouseColumn(),e)}fulfillScrollbar(e){return Li.createScrollbar(this.target,this._getMouseColumn(e),e)}fulfillOverlayWidget(e){return Li.createOverlayWidget(this.target,this._getMouseColumn(),e)}withTarget(e){return new ly(this._ctx,this.editorPos,this.pos,this.relativePos,e)}}u(ly,"HitTestRequest");const TP={isAfterLines:!0};function lT(o){return{isAfterLines:!1,horizontalDistanceToText:o}}u(lT,"createEmptyContentDataInLines");class qn{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,n=_r.collect(t,this._viewHelper.viewDomNode);return!!(Os.isChildOfContentWidgets(n)||Os.isChildOfOverflowingContentWidgets(n)||Os.isChildOfOverlayWidgets(n))}createMouseTarget(e,t,n,i,s){const r=new Eu(this._context,this._viewHelper,e),a=new ly(r,t,n,i,s);try{return qn._createMouseTarget(r,a,!1)}catch{return a.fulfillUnknown()}}static _createMouseTarget(e,t,n){if(t.target===null){if(n)return t.fulfillUnknown();const r=qn._doHitTest(e,t);return r.type===1?qn.createMouseTargetFromHitTestPosition(e,t,r.spanNode,r.position,r.injectedText):this._createMouseTarget(e,t.withTarget(r.hitTarget),!0)}const i=t;let s=null;return s=s||qn._hitTestContentWidget(e,i),s=s||qn._hitTestOverlayWidget(e,i),s=s||qn._hitTestMinimap(e,i),s=s||qn._hitTestScrollbarSlider(e,i),s=s||qn._hitTestViewZone(e,i),s=s||qn._hitTestMargin(e,i),s=s||qn._hitTestViewCursor(e,i),s=s||qn._hitTestTextArea(e,i),s=s||qn._hitTestViewLines(e,i,n),s=s||qn._hitTestScrollbar(e,i),s||t.fulfillUnknown()}static _hitTestContentWidget(e,t){if(Os.isChildOfContentWidgets(t.targetPath)||Os.isChildOfOverflowingContentWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfillContentWidget(n):t.fulfillUnknown()}return null}static _hitTestOverlayWidget(e,t){if(Os.isChildOfOverlayWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfillOverlayWidget(n):t.fulfillUnknown()}return null}static _hitTestViewCursor(e,t){if(t.target){const n=e.lastRenderData.lastViewCursorsRenderData;for(const i of n)if(t.target===i.domNode)return t.fulfillContentText(i.position,null,{mightBeForeignElement:!1,injectedText:null})}if(t.isInContentArea){const n=e.lastRenderData.lastViewCursorsRenderData,i=t.mouseContentHorizontalOffset,s=t.mouseVerticalOffset;for(const r of n){if(i<r.contentLeft||i>r.contentLeft+r.width)continue;const a=e.getVerticalOffsetForLineNumber(r.position.lineNumber);if(a<=s&&s<=a+r.height)return t.fulfillContentText(r.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(e,t){const n=e.getZoneAtCoord(t.mouseVerticalOffset);if(n){const i=t.isInContentArea?8:5;return t.fulfillViewZone(i,n.position,n)}return null}static _hitTestTextArea(e,t){return Os.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):t.fulfillTextarea():null}static _hitTestMargin(e,t){if(t.isInMarginArea){const n=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),i=n.range.getStartPosition();let s=Math.abs(t.relativePos.x);const r={isAfterLines:n.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:s};return s-=e.layoutInfo.glyphMarginLeft,s<=e.layoutInfo.glyphMarginWidth?t.fulfillMargin(2,i,n.range,r):(s-=e.layoutInfo.glyphMarginWidth,s<=e.layoutInfo.lineNumbersWidth?t.fulfillMargin(3,i,n.range,r):(s-=e.layoutInfo.lineNumbersWidth,t.fulfillMargin(4,i,n.range,r)))}return null}static _hitTestViewLines(e,t,n){if(!Os.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfillContentEmpty(new H(1,1),TP);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const s=e.viewModel.getLineCount(),r=e.viewModel.getLineMaxColumn(s);return t.fulfillContentEmpty(new H(s,r),TP)}if(n){if(Os.isStrictChildOfViewLines(t.targetPath)){const s=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.viewModel.getLineLength(s)===0){const a=e.getLineWidth(s),l=lT(t.mouseContentHorizontalOffset-a);return t.fulfillContentEmpty(new H(s,1),l)}const r=e.getLineWidth(s);if(t.mouseContentHorizontalOffset>=r){const a=lT(t.mouseContentHorizontalOffset-r),l=new H(s,e.viewModel.getLineMaxColumn(s));return t.fulfillContentEmpty(l,a)}}return t.fulfillUnknown()}const i=qn._doHitTest(e,t);return i.type===1?qn.createMouseTargetFromHitTestPosition(e,t,i.spanNode,i.position,i.injectedText):this._createMouseTarget(e,t.withTarget(i.hitTarget),!0)}static _hitTestMinimap(e,t){if(Os.isChildOfMinimap(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new H(n,i))}return null}static _hitTestScrollbarSlider(e,t){if(Os.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const n=t.target.className;if(n&&/\b(slider|scrollbar)\b/.test(n)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new H(i,s))}}return null}static _hitTestScrollbar(e,t){if(Os.isChildOfScrollableElement(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new H(n,i))}return null}getMouseColumn(e){const t=this._context.configuration.options,n=t.get(133),i=this._context.viewLayout.getCurrentScrollLeft()+e.x-n.contentLeft;return qn._getMouseColumn(i,t.get(46).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,n,i,s){const r=i.lineNumber,a=i.column,l=e.getLineWidth(r);if(t.mouseContentHorizontalOffset>l){const v=lT(t.mouseContentHorizontalOffset-l);return t.fulfillContentEmpty(i,v)}const c=e.visibleRangeForPosition(r,a);if(!c)return t.fulfillUnknown(i);const d=c.left;if(t.mouseContentHorizontalOffset===d)return t.fulfillContentText(i,null,{mightBeForeignElement:!!s,injectedText:s});const h=[];if(h.push({offset:c.left,column:a}),a>1){const v=e.visibleRangeForPosition(r,a-1);v&&h.push({offset:v.left,column:a-1})}const g=e.viewModel.getLineMaxColumn(r);if(a<g){const v=e.visibleRangeForPosition(r,a+1);v&&h.push({offset:v.left,column:a+1})}h.sort((v,C)=>v.offset-C.offset);const f=t.pos.toClientCoordinates(),p=n.getBoundingClientRect(),_=p.left<=f.clientX&&f.clientX<=p.right;for(let v=1;v<h.length;v++){const C=h[v-1],w=h[v];if(C.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=w.offset){const y=new L(r,C.column,r,w.column),S=Math.abs(C.offset-t.mouseContentHorizontalOffset),E=Math.abs(w.offset-t.mouseContentHorizontalOffset),k=S<E?new H(r,C.column):new H(r,w.column);return t.fulfillContentText(k,y,{mightBeForeignElement:!_||!!s,injectedText:s})}}return t.fulfillContentText(i,null,{mightBeForeignElement:!_||!!s,injectedText:s})}static _doHitTestWithCaretRangeFromPoint(e,t){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.getVerticalOffsetForLineNumber(n)+Math.floor(e.lineHeight/2);let r=t.pos.y+(s-t.mouseVerticalOffset);r<=t.editorPos.y&&(r=t.editorPos.y+1),r>=t.editorPos.y+t.editorPos.height&&(r=t.editorPos.y+t.editorPos.height-1);const a=new ay(t.pos.x,r),l=this._actualDoHitTestWithCaretRangeFromPoint(e,a.toClientCoordinates());return l.type===1?l:this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates())}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const n=wu(e.viewDomNode);let i;if(n?typeof n.caretRangeFromPoint>"u"?i=IJ(n,t.clientX,t.clientY):i=n.caretRangeFromPoint(t.clientX,t.clientY):i=document.caretRangeFromPoint(t.clientX,t.clientY),!i||!i.startContainer)return new Da;const s=i.startContainer;if(s.nodeType===s.TEXT_NODE){const r=s.parentNode,a=r?r.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===Xo.CLASS_NAME?Ed.createFromDOMInfo(e,r,i.startOffset):new Da(s.parentNode)}else if(s.nodeType===s.ELEMENT_NODE){const r=s.parentNode,a=r?r.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===Xo.CLASS_NAME?Ed.createFromDOMInfo(e,s,s.textContent.length):new Da(s)}return new Da}static _doHitTestWithCaretPositionFromPoint(e,t){const n=document.caretPositionFromPoint(t.clientX,t.clientY);if(n.offsetNode.nodeType===n.offsetNode.TEXT_NODE){const i=n.offsetNode.parentNode,s=i?i.parentNode:null,r=s?s.parentNode:null;return(r&&r.nodeType===r.ELEMENT_NODE?r.className:null)===Xo.CLASS_NAME?Ed.createFromDOMInfo(e,n.offsetNode.parentNode,n.offset):new Da(n.offsetNode.parentNode)}if(n.offsetNode.nodeType===n.offsetNode.ELEMENT_NODE){const i=n.offsetNode.parentNode,s=i&&i.nodeType===i.ELEMENT_NODE?i.className:null,r=i?i.parentNode:null,a=r&&r.nodeType===r.ELEMENT_NODE?r.className:null;if(s===Xo.CLASS_NAME){const l=n.offsetNode.childNodes[Math.min(n.offset,n.offsetNode.childNodes.length-1)];if(l)return Ed.createFromDOMInfo(e,l,0)}else if(a===Xo.CLASS_NAME)return Ed.createFromDOMInfo(e,n.offsetNode,0)}return new Da(n.offsetNode)}static _snapToSoftTabBoundary(e,t){const n=t.getLineContent(e.lineNumber),{tabSize:i}=t.model.getOptions(),s=lf.atomicPosition(n,e.column-1,i,2);return s!==-1?new H(e.lineNumber,s+1):e}static _doHitTest(e,t){let n=new Da;if(typeof document.caretRangeFromPoint=="function"?n=this._doHitTestWithCaretRangeFromPoint(e,t):document.caretPositionFromPoint&&(n=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates())),n.type===1){const i=e.viewModel.getInjectedTextAt(n.position),s=e.viewModel.normalizePosition(n.position,2);(i||!s.equals(n.position))&&(n=new f1(s,n.spanNode,i))}return n.type===1&&e.stickyTabStops&&(n=new f1(this._snapToSoftTabBoundary(n.position,e.viewModel),n.spanNode,n.injectedText)),n}}u(qn,"MouseTargetFactory");function IJ(o,e,t){const n=document.createRange();let i=o.elementFromPoint(e,t);if(i!==null){for(;i&&i.firstChild&&i.firstChild.nodeType!==i.firstChild.TEXT_NODE&&i.lastChild&&i.lastChild.firstChild;)i=i.lastChild;const s=i.getBoundingClientRect(),r=window.getComputedStyle(i,null).getPropertyValue("font"),a=i.innerText;let l=s.left,c=0,d;if(e>s.left+s.width)c=a.length;else{const h=sc.getInstance();for(let g=0;g<a.length+1;g++){if(d=h.getCharWidth(a.charAt(g),r)/2,l+=d,e<l){c=g;break}l+=d}}n.setStart(i.firstChild,c),n.setEnd(i.firstChild,c)}return n}u(IJ,"shadowCaretRangeFromPoint");class sc{constructor(){this._cache={},this._canvas=document.createElement("canvas")}static getInstance(){return sc._INSTANCE||(sc._INSTANCE=new sc),sc._INSTANCE}getCharWidth(e,t){const n=e+t;if(this._cache[n])return this._cache[n];const i=this._canvas.getContext("2d");i.font=t;const r=i.measureText(e).width;return this._cache[n]=r,r}}u(sc,"CharWidthReader");sc._INSTANCE=null;class cy extends op{constructor(e,t,n){super(),this._mouseLeaveMonitor=null,this._context=e,this.viewController=t,this.viewHelper=n,this.mouseTargetFactory=new qn(this._context,n),this._mouseDownOperation=this._register(new EH(this._context,this.viewController,this.viewHelper,(a,l)=>this._createMouseTarget(a,l),a=>this._getMouseColumn(a))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(133).height;const i=new fH(this.viewHelper.viewDomNode);this._register(i.onContextMenu(this.viewHelper.viewDomNode,a=>this._onContextMenu(a,!0))),this._register(i.onMouseMove(this.viewHelper.viewDomNode,a=>{this._onMouseMove(a),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=Y(document,"mousemove",l=>{this.viewHelper.viewDomNode.contains(l.target)||this._onMouseLeave(new vl(l,!1,this.viewHelper.viewDomNode))}))})),this._register(i.onMouseUp(this.viewHelper.viewDomNode,a=>this._onMouseUp(a))),this._register(i.onMouseLeave(this.viewHelper.viewDomNode,a=>this._onMouseLeave(a)));let s=0;this._register(i.onPointerDown(this.viewHelper.viewDomNode,(a,l)=>{s=l})),this._register(Y(this.viewHelper.viewDomNode,le.POINTER_UP,a=>{this._mouseDownOperation.onPointerUp()})),this._register(i.onMouseDown(this.viewHelper.viewDomNode,a=>this._onMouseDown(a,s)));const r=u(a=>{if(this.viewController.emitMouseWheel(a),!this._context.configuration.options.get(70))return;const l=new Cu(a);if(Xe?(a.metaKey||a.ctrlKey)&&!a.shiftKey&&!a.altKey:a.ctrlKey&&!a.metaKey&&!a.shiftKey&&!a.altKey){const d=ml.getZoomLevel(),h=l.deltaY>0?1:-1;ml.setZoomLevel(d+h),l.preventDefault(),l.stopPropagation()}},"onMouseWheel");this._register(Y(this.viewHelper.viewDomNode,le.MOUSE_WHEEL,r,{capture:!0,passive:!1})),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(133)){const t=this._context.configuration.options.get(133).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}onScrollChanged(e){return this._mouseDownOperation.onScrollChanged(),!1}getTargetAtClientPoint(e,t){const i=new IA(e,t).toPageCoordinates(),s=hH(this.viewHelper.viewDomNode);if(i.y<s.y||i.y>s.y+s.height||i.x<s.x||i.x>s.x+s.width)return null;const r=gH(this.viewHelper.viewDomNode,s,i);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),s,i,r,null)}_createMouseTarget(e,t){let n=e.target;if(!this.viewHelper.viewDomNode.contains(n)){const i=wu(this.viewHelper.viewDomNode);i&&(n=i.elementsFromPoint(e.posx,e.posy).find(s=>this.viewHelper.viewDomNode.contains(s)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,t?n:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this.mouseTargetFactory.mouseTargetIsWidget(e)||e.preventDefault(),!(this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime)&&this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e,t){const n=this._createMouseTarget(e,!0),i=n.type===6||n.type===7,s=n.type===2||n.type===3||n.type===4,r=n.type===3,a=this._context.configuration.options.get(100),l=n.type===8||n.type===5,c=n.type===9;let d=e.leftButton||e.middleButton;Xe&&e.leftButton&&e.ctrlKey&&(d=!1);const h=u(()=>{e.preventDefault(),this.viewHelper.focusTextArea()},"focus");if(d&&(i||r&&a))h(),this._mouseDownOperation.start(n.type,e,t);else if(s)e.preventDefault();else if(l){const g=n.detail;d&&this.viewHelper.shouldSuppressMouseDownOnViewZone(g.viewZoneId)&&(h(),this._mouseDownOperation.start(n.type,e,t),e.preventDefault())}else c&&this.viewHelper.shouldSuppressMouseDownOnWidget(n.detail)&&(h(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:n})}}u(cy,"MouseHandler");class EH extends U{constructor(e,t,n,i,s){super(),this._context=e,this._viewController=t,this._viewHelper=n,this._createMouseTarget=i,this._getMouseColumn=s,this._mouseMoveMonitor=this._register(new mH(this._viewHelper.viewDomNode)),this._onScrollTimeout=this._register(new hs),this._mouseState=new V_,this._currentSelection=new re(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!1);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):this._dispatchMouse(t,!0))}start(e,t,n){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const i=this._findMousePosition(t,!0);if(!i||!i.position)return;this._mouseState.trySetCount(t.detail,i.position),t.detail=this._mouseState.count;const s=this._context.configuration.options;if(!s.get(83)&&s.get(31)&&!s.get(18)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&i.type===6&&i.position&&this._currentSelection.containsPosition(i.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,n,t.buttons,r=>this._onMouseDownThenMove(r),r=>{const a=this._findMousePosition(this._lastMouseEvent,!1);r&&r instanceof KeyboardEvent?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:a?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(i,t.shiftKey),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,n,t.buttons,r=>this._onMouseDownThenMove(r),()=>this._stop()))}_stop(){this._isActive=!1,this._onScrollTimeout.cancel()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onScrollChanged(){this._isActive&&this._onScrollTimeout.setIfNotSet(()=>{if(!this._lastMouseEvent)return;const e=this._findMousePosition(this._lastMouseEvent,!1);e&&(this._mouseState.isDragAndDrop||this._dispatchMouse(e,!0))},10)}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,n=this._context.viewModel,i=this._context.viewLayout,s=this._getMouseColumn(e);if(e.posy<t.y){const a=Math.max(i.getCurrentScrollTop()-(t.y-e.posy),0),l=Eu.getZoneAtCoord(this._context,a);if(l){const d=this._helpPositionJumpOverViewZone(l);if(d)return Li.createOutsideEditor(s,d)}const c=i.getLineNumberAtVerticalOffset(a);return Li.createOutsideEditor(s,new H(c,1))}if(e.posy>t.y+t.height){const a=i.getCurrentScrollTop()+e.relativePos.y,l=Eu.getZoneAtCoord(this._context,a);if(l){const d=this._helpPositionJumpOverViewZone(l);if(d)return Li.createOutsideEditor(s,d)}const c=i.getLineNumberAtVerticalOffset(a);return Li.createOutsideEditor(s,new H(c,n.getLineMaxColumn(c)))}const r=i.getLineNumberAtVerticalOffset(i.getCurrentScrollTop()+e.relativePos.y);return e.posx<t.x?Li.createOutsideEditor(s,new H(r,1)):e.posx>t.x+t.width?Li.createOutsideEditor(s,new H(r,n.getLineMaxColumn(r))):null}_findMousePosition(e,t){const n=this._getPositionOutsideEditor(e);if(n)return n;const i=this._createMouseTarget(e,t);if(!i.position)return null;if(i.type===8||i.type===5){const r=this._helpPositionJumpOverViewZone(i.detail);if(r)return Li.createViewZone(i.type,i.element,i.mouseColumn,r,i.detail)}return i}_helpPositionJumpOverViewZone(e){const t=new H(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),n=e.positionBefore,i=e.positionAfter;return n&&i?n.isBefore(t)?n:i:null}_dispatchMouse(e,t){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:e.type===6&&e.detail.injectedText!==null})}}u(EH,"MouseDownOperation");class V_{constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const n=new Date().getTime();n-this._lastSetMouseDownCountTime>V_.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=n,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}}u(V_,"MouseDownState");V_.CLEAR_MOUSE_DOWN_COUNT_TIME=400;class Gn{constructor(e,t,n,i,s){this.value=e,this.selectionStart=t,this.selectionEnd=n,this.selectionStartPosition=i,this.selectionEndPosition=s}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(e){return new Gn(e.getValue(),e.getSelectionStart(),e.getSelectionEnd(),null,null)}collapseSelection(){return new Gn(this.value,this.value.length,this.value.length,null,null)}writeToTextArea(e,t,n){t.setValue(e,this.value),n&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){if(e<=this.selectionStart){const i=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(this.selectionStartPosition,i,-1)}if(e>=this.selectionEnd){const i=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(this.selectionEndPosition,i,1)}const t=this.value.substring(this.selectionStart,e);if(t.indexOf(String.fromCharCode(8230))===-1)return this._finishDeduceEditorPosition(this.selectionStartPosition,t,1);const n=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(this.selectionEndPosition,n,-1)}_finishDeduceEditorPosition(e,t,n){let i=0,s=-1;for(;(s=t.indexOf(`
`,s+1))!==-1;)i++;return[e,n*t.length,i]}static deduceInput(e,t,n){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const i=Math.min(bu(e.value,t.value),e.selectionStart,t.selectionStart),s=Math.min(sb(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd);e.value.substring(i,e.value.length-s);const r=t.value.substring(i,t.value.length-s),a=e.selectionStart-i,l=e.selectionEnd-i,c=t.selectionStart-i,d=t.selectionEnd-i;if(c===d){const g=e.selectionStart-i;return{text:r,replacePrevCharCnt:g,replaceNextCharCnt:0,positionDelta:0}}const h=l-a;return{text:r,replacePrevCharCnt:h,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const n=Math.min(bu(e.value,t.value),e.selectionEnd),i=Math.min(sb(e.value,t.value),e.value.length-e.selectionEnd),s=e.value.substring(n,e.value.length-i),r=t.value.substring(n,t.value.length-i);e.selectionStart-n;const a=e.selectionEnd-n;t.selectionStart-n;const l=t.selectionEnd-n;return{text:r,replacePrevCharCnt:a,replaceNextCharCnt:s.length-a,positionDelta:l-r.length}}}u(Gn,"TextAreaState");Gn.EMPTY=new Gn("",0,0,null,null);class Gd{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const n=e*t,i=n+1,s=n+t;return new L(i,1,s+1,1)}static fromEditorSelection(e,t,n,i,s){const r=Gd._getPageOfLine(n.startLineNumber,i),a=Gd._getRangeForPage(r,i),l=Gd._getPageOfLine(n.endLineNumber,i),c=Gd._getRangeForPage(l,i),d=a.intersectRanges(new L(1,1,n.startLineNumber,n.startColumn));let h=t.getValueInRange(d,1);const g=t.getLineCount(),f=t.getLineMaxColumn(g),p=c.intersectRanges(new L(n.endLineNumber,n.endColumn,g,f));let _=t.getValueInRange(p,1),v;if(r===l||r+1===l)v=t.getValueInRange(n,1);else{const C=a.intersectRanges(n),w=c.intersectRanges(n);v=t.getValueInRange(C,1)+String.fromCharCode(8230)+t.getValueInRange(w,1)}return s&&(h.length>500&&(h=h.substring(h.length-500,h.length)),_.length>500&&(_=_.substring(0,500)),v.length>2*500&&(v=v.substring(0,500)+String.fromCharCode(8230)+v.substring(v.length-500,v.length))),new Gn(h+v+_,h.length,h.length+v.length,new H(n.startLineNumber,n.startColumn),new H(n.endLineNumber,n.endColumn))}}u(Gd,"PagedScreenReaderStrategy");var p1;(function(o){o.Tap="-monaco-textarea-synthetic-tap"})(p1||(p1={}));const sE={forceCopyWithSyntaxHighlighting:!1};class cf{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}}u(cf,"InMemoryClipboardMetadataManager");cf.INSTANCE=new cf;class kH{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";const t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}u(kH,"CompositionContext");class MH extends U{constructor(e,t,n,i){super(),this._host=e,this._textArea=t,this._OS=n,this._browser=i,this._onFocus=this._register(new R),this.onFocus=this._onFocus.event,this._onBlur=this._register(new R),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new R),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new R),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new R),this.onCut=this._onCut.event,this._onPaste=this._register(new R),this.onPaste=this._onPaste.event,this._onType=this._register(new R),this.onType=this._onType.event,this._onCompositionStart=this._register(new R),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new R),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new R),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new R),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncTriggerCut=this._register(new pt(()=>this._onCut.fire(),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new pt(()=>this.writeScreenReaderContent("asyncFocusGain"),0)),this._textAreaState=Gn.EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent("ctor"),this._hasFocus=!1,this._currentComposition=null;let s=null;this._register(this._textArea.onKeyDown(r=>{const a=new Pt(r);(a.keyCode===109||this._currentComposition&&a.keyCode===1)&&a.stopPropagation(),a.equals(9)&&a.preventDefault(),s=a,this._onKeyDown.fire(a)})),this._register(this._textArea.onKeyUp(r=>{const a=new Pt(r);this._onKeyUp.fire(a)})),this._register(this._textArea.onCompositionStart(r=>{const a=new kH;if(this._currentComposition){this._currentComposition=a;return}if(this._currentComposition=a,this._OS===2&&s&&s.equals(109)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===r.data&&(s.code==="ArrowRight"||s.code==="ArrowLeft")){a.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:r.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:r.data});return}this._onCompositionStart.fire({data:r.data})})),this._register(this._textArea.onCompositionUpdate(r=>{const a=this._currentComposition;if(!a)return;if(this._browser.isAndroid){const c=Gn.readFromTextArea(this._textArea),d=Gn.deduceAndroidCompositionInput(this._textAreaState,c);this._textAreaState=c,this._onType.fire(d),this._onCompositionUpdate.fire(r);return}const l=a.handleCompositionUpdate(r.data);this._textAreaState=Gn.readFromTextArea(this._textArea),this._onType.fire(l),this._onCompositionUpdate.fire(r)})),this._register(this._textArea.onCompositionEnd(r=>{const a=this._currentComposition;if(!a)return;if(this._currentComposition=null,this._browser.isAndroid){const c=Gn.readFromTextArea(this._textArea),d=Gn.deduceAndroidCompositionInput(this._textAreaState,c);this._textAreaState=c,this._onType.fire(d),this._onCompositionEnd.fire();return}const l=a.handleCompositionUpdate(r.data);this._textAreaState=Gn.readFromTextArea(this._textArea),this._onType.fire(l),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(r=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const a=Gn.readFromTextArea(this._textArea),l=Gn.deduceInput(this._textAreaState,a,this._OS===2);l.replacePrevCharCnt===0&&l.text.length===1&&kn(l.text.charCodeAt(0))||(this._textAreaState=a,(l.text!==""||l.replacePrevCharCnt!==0||l.replaceNextCharCnt!==0||l.positionDelta!==0)&&this._onType.fire(l))})),this._register(this._textArea.onCut(r=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(r),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(r=>{this._ensureClipboardGetsEditorSelection(r)})),this._register(this._textArea.onPaste(r=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),r.preventDefault(),!r.clipboardData)return;let[a,l]=oE.getTextData(r.clipboardData);a&&(l=l||cf.INSTANCE.get(a),this._onPaste.fire({text:a,metadata:l}))})),this._register(this._textArea.onFocus(()=>{const r=this._hasFocus;this._setHasFocus(!0),this._browser.isSafari&&!r&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return Y(document,"selectionchange",t=>{if(!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const n=Date.now(),i=n-e;if(e=n,i<5)return;const s=n-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),s<100||!this._textAreaState.selectionStartPosition||!this._textAreaState.selectionEndPosition)return;const r=this._textArea.getValue();if(this._textAreaState.value!==r)return;const a=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===l)return;const c=this._textAreaState.deduceEditorPosition(a),d=this._host.deduceModelPosition(c[0],c[1],c[2]),h=this._textAreaState.deduceEditorPosition(l),g=this._host.deduceModelPosition(h[0],h[1],h[2]),f=new re(d.lineNumber,d.column,g.lineNumber,g.column);this._onSelectionChangeRequest.fire(f)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeScreenReaderContent(e){this._currentComposition||this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent(this._textAreaState))}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(),n={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};cf.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,`
`):t.text,n),e.preventDefault(),e.clipboardData&&oE.setTextData(e.clipboardData,t.text,t.html,n)}}u(MH,"TextAreaInput");class oE{static getTextData(e){const t=e.getData(zi.text);let n=null;const i=e.getData("vscode-editor-data");if(typeof i=="string")try{n=JSON.parse(i),n.version!==1&&(n=null)}catch{}return t.length===0&&n===null&&e.files.length>0?[Array.prototype.slice.call(e.files,0).map(r=>r.name).join(`
`),null]:[t,n]}static setTextData(e,t,n,i){e.setData(zi.text,t),typeof n=="string"&&e.setData("text/html",n),e.setData("vscode-editor-data",JSON.stringify(i))}}u(oE,"ClipboardEventUtils");class DH extends U{constructor(e){super(),this._actual=e,this.onKeyDown=this._register(Fo(this._actual,"keydown")).event,this.onKeyUp=this._register(Fo(this._actual,"keyup")).event,this.onCompositionStart=this._register(Fo(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(Fo(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(Fo(this._actual,"compositionend")).event,this.onInput=this._register(Fo(this._actual,"input")).event,this.onCut=this._register(Fo(this._actual,"cut")).event,this.onCopy=this._register(Fo(this._actual,"copy")).event,this.onPaste=this._register(Fo(this._actual,"paste")).event,this.onFocus=this._register(Fo(this._actual,"focus")).event,this.onBlur=this._register(Fo(this._actual,"blur")).event,this._onSyntheticTap=this._register(new R),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(Y(this._actual,p1.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){const e=wu(this._actual);return e?e.activeElement===this._actual:uA(this._actual)?document.activeElement===this._actual:!1}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){const n=this._actual;n.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),n.value=t)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,n){const i=this._actual;let s=null;const r=wu(i);r?s=r.activeElement:s=document.activeElement;const a=s===i,l=i.selectionStart,c=i.selectionEnd;if(a&&l===t&&c===n){Is&&window.parent!==window&&i.focus();return}if(a){this.setIgnoreSelectionChangeTime("setSelectionRange"),i.setSelectionRange(t,n),Is&&window.parent!==window&&i.focus();return}try{const d=AX(i);this.setIgnoreSelectionChangeTime("setSelectionRange"),i.focus(),i.setSelectionRange(t,n),IX(i,d)}catch{}}}u(DH,"TextAreaWrapper");class AH extends cy{constructor(e,t,n){super(e,t,n),this._register(gt.addTarget(this.viewHelper.linesContentDomNode)),this._register(Y(this.viewHelper.linesContentDomNode,Mt.Tap,s=>this.onTap(s))),this._register(Y(this.viewHelper.linesContentDomNode,Mt.Change,s=>this.onChange(s))),this._register(Y(this.viewHelper.linesContentDomNode,Mt.Contextmenu,s=>this._onContextMenu(new vl(s,!1,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(Y(this.viewHelper.linesContentDomNode,"pointerdown",s=>{const r=s.pointerType;if(r==="mouse"){this._lastPointerType="mouse";return}else r==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const i=new pH(this.viewHelper.viewDomNode);this._register(i.onPointerMove(this.viewHelper.viewDomNode,s=>this._onMouseMove(s))),this._register(i.onPointerUp(this.viewHelper.viewDomNode,s=>this._onMouseUp(s))),this._register(i.onPointerLeave(this.viewHelper.viewDomNode,s=>this._onMouseLeave(s))),this._register(i.onPointerDown(this.viewHelper.viewDomNode,(s,r)=>this._onMouseDown(s,r)))}onTap(e){if(!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget))return;e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new vl(e,!1,this.viewHelper.viewDomNode),!1);t.position&&this.viewController.dispatchMouse({position:t.position,mouseColumn:t.position.column,startedOnLineNumbers:!1,mouseDownCount:e.tapCount,inSelectionMode:!1,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:t.type===6&&t.detail.injectedText!==null})}onChange(e){this._lastPointerType==="touch"&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}_onMouseDown(e,t){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e,t)}}u(AH,"PointerEventHandler");class IH extends cy{constructor(e,t,n){super(e,t,n),this._register(gt.addTarget(this.viewHelper.linesContentDomNode)),this._register(Y(this.viewHelper.linesContentDomNode,Mt.Tap,i=>this.onTap(i))),this._register(Y(this.viewHelper.linesContentDomNode,Mt.Change,i=>this.onChange(i))),this._register(Y(this.viewHelper.linesContentDomNode,Mt.Contextmenu,i=>this._onContextMenu(new vl(i,!1,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new vl(e,!1,this.viewHelper.viewDomNode),!1);if(t.position){const n=document.createEvent("CustomEvent");n.initEvent(p1.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(n),this.viewController.moveTo(t.position)}}onChange(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}}u(IH,"TouchHandler");class NH extends U{constructor(e,t,n){super(),na&&dA.pointerEvents?this.handler=this._register(new AH(e,t,n)):window.TouchEvent?this.handler=this._register(new IH(e,t,n)):this.handler=this._register(new cy(e,t,n))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}u(NH,"PointerHandler");class uh extends op{}u(uh,"DynamicViewOverlay");const PH=I("editor.lineHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},m("lineHighlight","Background color for the highlight of line at the cursor position.")),LP=I("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:Be},m("lineHighlightBorderBox","Background color for the border around the line at the cursor position.")),NJ=I("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},m("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),PJ=I("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:Vt,hcLight:Vt},m("rangeHighlightBorder","Background color of the border around highlighted ranges."),!0),RJ=I("editor.symbolHighlightBackground",{dark:Za,light:Za,hcDark:null,hcLight:null},m("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),FJ=I("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:Vt,hcLight:Vt},m("symbolHighlightBorder","Background color of the border around highlighted symbols."),!0),RH=I("editorCursor.foreground",{dark:"#AEAFAD",light:B.black,hcDark:B.white,hcLight:"#0F4A85"},m("caret","Color of the editor cursor.")),OJ=I("editorCursor.background",null,m("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),tl=I("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},m("editorWhitespaces","Color of whitespace characters in the editor.")),H_=I("editorIndentGuide.background",{dark:tl,light:tl,hcDark:tl,hcLight:tl},m("editorIndentGuides","Color of the editor indentation guides.")),B_=I("editorIndentGuide.activeBackground",{dark:tl,light:tl,hcDark:tl,hcLight:tl},m("editorActiveIndentGuide","Color of the active editor indentation guides.")),FH=I("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:B.white,hcLight:"#292929"},m("editorLineNumbers","Color of editor line numbers.")),Xv=I("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:Vt,hcLight:Vt},m("editorActiveLineNumber","Color of editor active line number"),!1,m("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),VJ=I("editorLineNumber.activeForeground",{dark:Xv,light:Xv,hcDark:Xv,hcLight:Xv},m("editorActiveLineNumber","Color of editor active line number")),HJ=I("editorRuler.foreground",{dark:"#5A5A5A",light:B.lightgrey,hcDark:B.white,hcLight:"#292929"},m("editorRuler","Color of the editor rulers."));I("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},m("editorCodeLensForeground","Foreground color of editor CodeLens"));const BJ=I("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},m("editorBracketMatchBackground","Background color behind matching brackets")),OH=I("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:Be,hcLight:Be},m("editorBracketMatchBorder","Color for matching brackets boxes")),WJ=I("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},m("editorOverviewRulerBorder","Color of the overview ruler border.")),UJ=I("editorOverviewRuler.background",null,m("editorOverviewRulerBackground","Background color of the editor overview ruler. Only used when the minimap is enabled and placed on the right side of the editor.")),GJ=I("editorGutter.background",{dark:Sn,light:Sn,hcDark:Sn,hcLight:Sn},m("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),zJ=I("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:B.fromHex("#fff").transparent(.8),hcLight:Be},m("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor.")),KJ=I("editorUnnecessaryCode.opacity",{dark:B.fromHex("#000a"),light:B.fromHex("#0007"),hcDark:null,hcLight:null},m("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`)),jJ=I("editorGhostText.border",{dark:null,light:null,hcDark:B.fromHex("#fff").transparent(.8),hcLight:B.fromHex("#292929").transparent(.8)},m("editorGhostTextBorder","Border color of ghost text in the editor.")),$J=I("editorGhostText.foreground",{dark:B.fromHex("#ffffff56"),light:B.fromHex("#0007"),hcDark:null,hcLight:null},m("editorGhostTextForeground","Foreground color of the ghost text in the editor.")),qJ=I("editorGhostText.background",{dark:null,light:null,hcDark:null,hcLight:null},m("editorGhostTextBackground","Background color of the ghost text in the editor.")),Zv=new B(new $e(0,122,204,.6)),YJ=I("editorOverviewRuler.rangeHighlightForeground",{dark:Zv,light:Zv,hcDark:Zv,hcLight:Zv},m("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),XJ=I("editorOverviewRuler.errorForeground",{dark:new B(new $e(255,18,18,.7)),light:new B(new $e(255,18,18,.7)),hcDark:new B(new $e(255,50,50,1)),hcLight:"#B5200D"},m("overviewRuleError","Overview ruler marker color for errors.")),ZJ=I("editorOverviewRuler.warningForeground",{dark:xs,light:xs,hcDark:of,hcLight:of},m("overviewRuleWarning","Overview ruler marker color for warnings.")),JJ=I("editorOverviewRuler.infoForeground",{dark:$i,light:$i,hcDark:g1,hcLight:g1},m("overviewRuleInfo","Overview ruler marker color for infos.")),VH=I("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},m("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),HH=I("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},m("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),BH=I("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},m("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),WH=I("editorBracketHighlight.foreground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),UH=I("editorBracketHighlight.foreground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),GH=I("editorBracketHighlight.foreground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),QJ=I("editorBracketHighlight.unexpectedBracket.foreground",{dark:new B(new $e(255,18,18,.8)),light:new B(new $e(255,18,18,.8)),hcDark:new B(new $e(255,50,50,1)),hcLight:""},m("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),eQ=I("editorBracketPairGuide.background1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),tQ=I("editorBracketPairGuide.background2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),nQ=I("editorBracketPairGuide.background3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),iQ=I("editorBracketPairGuide.background4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),sQ=I("editorBracketPairGuide.background5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),oQ=I("editorBracketPairGuide.background6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),rQ=I("editorBracketPairGuide.activeBackground1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),aQ=I("editorBracketPairGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),lQ=I("editorBracketPairGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),cQ=I("editorBracketPairGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),dQ=I("editorBracketPairGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),uQ=I("editorBracketPairGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));I("editorUnicodeHighlight.border",{dark:"#BD9B03",light:"#CEA33D",hcDark:"#ff0000",hcLight:""},m("editorUnicodeHighlight.border","Border color used to highlight unicode characters."));I("editorUnicodeHighlight.background",{dark:"#bd9b0326",light:"#cea33d14",hcDark:"#00000000",hcLight:""},m("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));At((o,e)=>{const t=o.getColor(Sn);t&&e.addRule(`.monaco-editor, .monaco-editor-background { background-color: ${t}; }`);const n=o.getColor(PH),i=n&&!n.isTransparent()?n:t;i&&e.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${i}; }`);const s=o.getColor(Es);s&&e.addRule(`.monaco-editor, .monaco-editor .inputarea.ime-input { color: ${s}; }`);const r=o.getColor(GJ);r&&e.addRule(`.monaco-editor .margin { background-color: ${r}; }`);const a=o.getColor(NJ);a&&e.addRule(`.monaco-editor .rangeHighlight { background-color: ${a}; }`);const l=o.getColor(PJ);l&&e.addRule(`.monaco-editor .rangeHighlight { border: 1px ${ui(o.type)?"dotted":"solid"} ${l}; }`);const c=o.getColor(RJ);c&&e.addRule(`.monaco-editor .symbolHighlight { background-color: ${c}; }`);const d=o.getColor(FJ);d&&e.addRule(`.monaco-editor .symbolHighlight { border: 1px ${ui(o.type)?"dotted":"solid"} ${d}; }`);const h=o.getColor(tl);h&&(e.addRule(`.monaco-editor .mtkw { color: ${h} !important; }`),e.addRule(`.monaco-editor .mtkz { color: ${h} !important; }`))});class ku extends uh{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new H(1,1),this._lastCursorViewPosition=new H(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(61);const t=e.get(62);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(86);const n=e.get(133);this._lineNumbersLeft=n.lineNumbersLeft,this._lineNumbersWidth=n.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorViewPosition=t,this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t);let n=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,n=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(n=!0),n}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getLineRenderLineNumber(e){const t=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new H(e,1));if(t.column!==1)return"";const n=t.lineNumber;return this._renderCustomLineNumbers?this._renderCustomLineNumbers(n):this._renderLineNumbers===3?this._lastCursorModelPosition.lineNumber===n||n%10===0?String(n):"":String(n)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const t=hi?this._lineHeight%2===0?" lh-even":" lh-odd":"",n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s='<div class="'+ku.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">';let r=null;if(this._renderLineNumbers===2){r=new Array(i-n+1),this._lastCursorViewPosition.lineNumber>=n&&this._lastCursorViewPosition.lineNumber<=i&&(r[this._lastCursorViewPosition.lineNumber-n]=this._lastCursorModelPosition.lineNumber);{let c=0;for(let d=this._lastCursorViewPosition.lineNumber+1;d<=i;d++){const g=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new H(d,1)).column!==1;g||c++,d>=n&&(r[d-n]=g?0:c)}}{let c=0;for(let d=this._lastCursorViewPosition.lineNumber-1;d>=n;d--){const g=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new H(d,1)).column!==1;g||c++,d<=i&&(r[d-n]=g?0:c)}}}const a=this._context.viewModel.getLineCount(),l=[];for(let c=n;c<=i;c++){const d=c-n;if(!this._renderFinalNewline&&c===a&&this._context.viewModel.getLineLength(c)===0){l[d]="";continue}let h;if(r){const g=r[d];this._lastCursorViewPosition.lineNumber===c?h=`<span class="relative-current-line-number">${g}</span>`:g?h=String(g):h=""}else h=this._getLineRenderLineNumber(c);h?c===this._activeLineNumber?l[d]='<div class="active-line-number '+ku.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">'+h+"</div>":l[d]=s+h+"</div>":l[d]=""}this._renderResult=l}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}u(ku,"LineNumbersOverlay");ku.CLASS_NAME="line-numbers";At((o,e)=>{const t=o.getColor(FH);t&&e.addRule(`.monaco-editor .line-numbers { color: ${t}; }`);const n=o.getColor(VJ);n&&e.addRule(`.monaco-editor .line-numbers.active-line-number { color: ${n}; }`)});class Ac extends fs{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(133);this._canUseLayerHinting=!t.get(28),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._domNode=et(document.createElement("div")),this._domNode.setClassName(Ac.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=et(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(Ac.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(133);return this._canUseLayerHinting=!t.get(28),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const n=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(n),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(n)}}u(Ac,"Margin");Ac.CLASS_NAME="glyph-margin";Ac.OUTER_CLASS_NAME="margin";const Qd="monaco-mouse-cursor-text";class zH{constructor(e,t,n,i,s){this._context=e,this.modelLineNumber=t,this.distanceToModelLineStart=n,this.widthOfHiddenLineTextBefore=i,this.distanceToModelLineEnd=s,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(e){const t=new H(this.modelLineNumber,this.distanceToModelLineStart+1),n=new H(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(e?this._previousPresentation=e:this._previousPresentation={foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}u(zH,"VisibleTextAreaData");const Hp=Is;class KH extends fs{constructor(e,t,n){super(e),this._primaryCursorPosition=new H(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._visibleRangeProvider=n,this._scrollLeft=0,this._scrollTop=0;const i=this._context.configuration.options,s=i.get(133);this._setAccessibilityOptions(i),this._contentLeft=s.contentLeft,this._contentWidth=s.contentWidth,this._contentHeight=s.height,this._fontInfo=i.get(46),this._lineHeight=i.get(61),this._emptySelectionClipboard=i.get(33),this._copyWithSyntaxHighlighting=i.get(21),this._visibleTextArea=null,this._selections=[new re(1,1,1,1)],this._modelSelections=[new re(1,1,1,1)],this._lastRenderPosition=null,this.textArea=et(document.createElement("textarea")),_r.write(this.textArea,6),this.textArea.setClassName(`inputarea ${Qd}`),this.textArea.setAttribute("wrap","off"),this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(i)),this.textArea.setAttribute("tabindex",String(i.get(114))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",m("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),i.get(30)&&i.get(83)&&this.textArea.setAttribute("readonly","true"),this.textAreaCover=et(document.createElement("div")),this.textAreaCover.setPosition("absolute");const r={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:c=>this._context.viewModel.getLineMaxColumn(c),getValueInRange:(c,d)=>this._context.viewModel.getValueInRange(c,d)},a={getDataToCopy:()=>{const c=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,ei),d=this._context.viewModel.model.getEOL(),h=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),g=Array.isArray(c)?c:null,f=Array.isArray(c)?c.join(d):c;let p,_=null;if(sE.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&f.length<65536){const v=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);v&&(p=v.html,_=v.mode)}return{isFromEmptySelection:h,multicursorText:g,text:f,html:p,mode:_}},getScreenReaderContent:c=>{if(this._accessibilitySupport===1){const d=this._selections[0];if(Xe&&d.isEmpty()){const h=d.getStartPosition();let g=this._getWordBeforePosition(h);if(g.length===0&&(g=this._getCharacterBeforePosition(h)),g.length>0)return new Gn(g,g.length,g.length,h,h)}if(pl&&!d.isEmpty()){const h="vscode-placeholder";return new Gn(h,0,h.length,null,null)}return Gn.EMPTY}if($4){const d=this._selections[0];if(d.isEmpty()){const h=d.getStartPosition(),[g,f]=this._getAndroidWordAtPosition(h);if(g.length>0)return new Gn(g,f,f,h,h)}return Gn.EMPTY}return Gd.fromEditorSelection(c,r,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(c,d,h)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(c,d,h)},l=this._register(new DH(this.textArea.domNode));this._textAreaInput=this._register(new MH(a,l,Us,Mq)),this._register(this._textAreaInput.onKeyDown(c=>{this._viewController.emitKeyDown(c)})),this._register(this._textAreaInput.onKeyUp(c=>{this._viewController.emitKeyUp(c)})),this._register(this._textAreaInput.onPaste(c=>{let d=!1,h=null,g=null;c.metadata&&(d=this._emptySelectionClipboard&&!!c.metadata.isFromEmptySelection,h=typeof c.metadata.multicursorText<"u"?c.metadata.multicursorText:null,g=c.metadata.mode),this._viewController.paste(c.text,d,h,g)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(c=>{c.replacePrevCharCnt||c.replaceNextCharCnt||c.positionDelta?this._viewController.compositionType(c.text,c.replacePrevCharCnt,c.replaceNextCharCnt,c.positionDelta):this._viewController.type(c.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(c=>{this._viewController.setSelection(c)})),this._register(this._textAreaInput.onCompositionStart(c=>{const d=this.textArea.domNode,h=this._modelSelections[0],{distanceToModelLineStart:g,widthOfHiddenTextBefore:f}=(()=>{const _=d.value.substring(0,Math.min(d.selectionStart,d.selectionEnd)),v=_.lastIndexOf(`
`),C=_.substring(v+1),w=C.lastIndexOf("	"),y=C.length-w-1,S=h.getStartPosition(),E=Math.min(S.column-1,y),k=S.column-1-E,T=C.substring(0,C.length-E),x=hQ(T,this._fontInfo);return{distanceToModelLineStart:k,widthOfHiddenTextBefore:x}})(),{distanceToModelLineEnd:p}=(()=>{const _=d.value.substring(Math.max(d.selectionStart,d.selectionEnd)),v=_.indexOf(`
`),C=v===-1?_:_.substring(0,v),w=C.indexOf("	"),y=w===-1?C.length:C.length-w-1,S=h.getEndPosition(),E=Math.min(this._context.viewModel.model.getLineMaxColumn(S.lineNumber)-S.column,y);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(S.lineNumber)-S.column-E}})();this._context.viewModel.revealRange("keyboard",!0,L.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new zH(this._context,h.startLineNumber,g,f,p),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${Qd} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(c=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this._render(),this.textArea.setClassName(`inputarea ${Qd}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.viewModel.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.viewModel.setHasFocus(!1)}))}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',n=this._context.viewModel.getLineContent(e.lineNumber),i=so(t);let s=!0,r=e.column,a=!0,l=e.column,c=0;for(;c<50&&(s||a);){if(s&&r<=1&&(s=!1),s){const d=n.charCodeAt(r-2);i.get(d)!==0?s=!1:r--}if(a&&l>n.length&&(a=!1),a){const d=n.charCodeAt(l-1);i.get(d)!==0?a=!1:l++}c++}return[n.substring(r-1,l-1),e.column-r]}_getWordBeforePosition(e){const t=this._context.viewModel.getLineContent(e.lineNumber),n=so(this._context.configuration.options.get(119));let i=e.column,s=0;for(;i>1;){const r=t.charCodeAt(i-2);if(n.get(r)!==0||s>50)return t.substring(i-1,e.column-1);s++,i--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const n=this._context.viewModel.getLineContent(e.lineNumber).charAt(e.column-2);if(!kn(n.charCodeAt(0)))return n}return""}_getAriaLabel(e){return e.get(2)===1?m("accessibilityOffAriaLabel","The editor is not accessible at this time. Press {0} for options.",hi?"Shift+Alt+F1":"Alt+F1"):e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);this._accessibilitySupport===2&&t===Sr.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(133);return this._setAccessibilityOptions(t),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._contentHeight=n.height,this._fontInfo=t.get(46),this._lineHeight=t.get(61),this._emptySelectionClipboard=t.get(33),this._copyWithSyntaxHighlighting=t.get(21),this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("tabindex",String(t.get(114))),(e.hasChanged(30)||e.hasChanged(83))&&(t.get(30)&&t.get(83)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")),e.hasChanged(2)&&this._textAreaInput.writeScreenReaderContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeScreenReaderContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}prepareRender(e){var t;this._primaryCursorPosition=new H(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),(t=this._visibleTextArea)===null||t===void 0||t.prepareRender(e)}render(e){this._textAreaInput.writeScreenReaderContent("render"),this._render()}_render(){if(this._visibleTextArea){const n=this._visibleTextArea.visibleTextareaStart,i=this._visibleTextArea.visibleTextareaEnd,s=this._visibleTextArea.startPosition,r=this._visibleTextArea.endPosition;if(s&&r&&n&&i&&i.left>=this._scrollLeft&&n.left<=this._scrollLeft+this._contentWidth){const a=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,l=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let c=this._visibleTextArea.widthOfHiddenLineTextBefore,d=this._contentLeft+n.left-this._scrollLeft,h=i.left-n.left+1;if(d<this._contentLeft){const C=this._contentLeft-d;d+=C,c+=C,h-=C}h>this._contentWidth&&(h=this._contentWidth);const g=this._context.viewModel.getViewLineData(s.lineNumber),f=g.tokens.findTokenIndexAtOffset(s.column-1),p=g.tokens.findTokenIndexAtOffset(r.column-1),_=f===p,v=this._visibleTextArea.definePresentation(_?g.tokens.getPresentation(f):null);this.textArea.domNode.scrollTop=l*this._lineHeight,this.textArea.domNode.scrollLeft=c,this._doRender({lastRenderPosition:null,top:a,left:d,width:h,height:this._lineHeight,useCover:!1,color:(Wt.getColorMap()||[])[v.foreground],italic:v.italic,bold:v.bold,underline:v.underline,strikethrough:v.strikethrough})}return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(t<0||t>this._contentHeight){this._renderAtTopLeft();return}if(Xe){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:e,width:Hp?0:1,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const n=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=n*this._lineHeight;return}this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:e,width:Hp?0:1,height:Hp?0:1,useCover:!1})}_newlinecount(e){let t=0,n=-1;do{if(n=e.indexOf(`
`,n+1),n===-1)break;t++}while(!0);return t}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:Hp?0:1,height:Hp?0:1,useCover:!0})}_doRender(e){this._lastRenderPosition=e.lastRenderPosition;const t=this.textArea,n=this.textAreaCover;di(t,this._fontInfo),t.setTop(e.top),t.setLeft(e.left),t.setWidth(e.width),t.setHeight(e.height),t.setColor(e.color?B.Format.CSS.formatHex(e.color):""),t.setFontStyle(e.italic?"italic":""),e.bold&&t.setFontWeight("bold"),t.setTextDecoration(`${e.underline?" underline":""}${e.strikethrough?" line-through":""}`),n.setTop(e.useCover?e.top:0),n.setLeft(e.useCover?e.left:0),n.setWidth(e.useCover?e.width:0),n.setHeight(e.useCover?e.height:0);const i=this._context.configuration.options;i.get(52)?n.setClassName("monaco-editor-background textAreaCover "+Ac.OUTER_CLASS_NAME):i.get(62).renderType!==0?n.setClassName("monaco-editor-background textAreaCover "+ku.CLASS_NAME):n.setClassName("monaco-editor-background textAreaCover")}}u(KH,"TextAreaHandler");function hQ(o,e){if(o.length===0)return 0;const t=document.createElement("div");t.style.position="absolute",t.style.top="-50000px",t.style.width="50000px";const n=document.createElement("span");di(n,e),n.style.whiteSpace="pre",n.append(o),t.appendChild(n),document.body.appendChild(t);const i=n.offsetWidth;return document.body.removeChild(t),i}u(hQ,"measureText");function gQ(o,e,t){let n=0;for(let s=0;s<o.length;s++)o.charAt(s)==="	"?n=mn.nextIndentTabStop(n,e):n++;let i="";if(!t){const s=Math.floor(n/e);n=n%e;for(let r=0;r<s;r++)i+="	"}for(let s=0;s<n;s++)i+=" ";return i}u(gQ,"_normalizeIndentationFromWhitespace");function m1(o,e,t){let n=Di(o);return n===-1&&(n=o.length),gQ(o.substring(0,n),e,t)+o.substring(n)}u(m1,"normalizeIndentation");const fQ=u(()=>!0,"autoCloseAlways"),pQ=u(()=>!1,"autoCloseNever"),mQ=u(o=>o===" "||o==="	","autoCloseBeforeWhitespace");class bd{constructor(e,t,n,i){this.languageConfigurationService=i,this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const s=n.options,r=s.get(133);this.readOnly=s.get(83),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=s.get(106),this.lineHeight=s.get(61),this.pageSize=Math.max(1,Math.floor(r.height/this.lineHeight)-2),this.useTabStops=s.get(118),this.wordSeparators=s.get(119),this.emptySelectionClipboard=s.get(33),this.copyWithSyntaxHighlighting=s.get(21),this.multiCursorMergeOverlapping=s.get(71),this.multiCursorPaste=s.get(73),this.autoClosingBrackets=s.get(5),this.autoClosingQuotes=s.get(8),this.autoClosingDelete=s.get(6),this.autoClosingOvertype=s.get(7),this.autoSurround=s.get(11),this.autoIndent=s.get(9),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();const a=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(a)for(const l of a)this.surroundingPairs[l.open]=l.close}static shouldRecreate(e){return e.hasChanged(133)||e.hasChanged(119)||e.hasChanged(33)||e.hasChanged(71)||e.hasChanged(73)||e.hasChanged(5)||e.hasChanged(8)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(118)||e.hasChanged(61)||e.hasChanged(83)}get electricChars(){var e;if(!this._electricChars){this._electricChars={};const t=(e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)===null||e===void 0?void 0:e.getElectricCharacters();if(t)for(const n of t)this._electricChars[n]=!0}return this._electricChars}onElectricCharacter(e,t,n){const i=Fw(t,n-1),s=this.languageConfigurationService.getLanguageConfiguration(i.languageId).electricCharacter;return s?s.onElectricCharacter(e,i,n-i.firstCharOffset):null}normalizeIndentation(e){return m1(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,t){switch(t){case"beforeWhitespace":return mQ;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e);case"always":return fQ;case"never":return pQ}}_getLanguageDefinedShouldAutoClose(e){const t=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet();return n=>t.indexOf(n)!==-1}visibleColumnFromColumn(e,t){return mn.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}columnFromVisibleColumn(e,t,n){const i=mn.columnFromVisibleColumn(e.getLineContent(t),n,this.tabSize),s=e.getLineMinColumn(t);if(i<s)return s;const r=e.getLineMaxColumn(t);return i>r?r:i}}u(bd,"CursorConfiguration");let Ke=u(class{constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}static fromModelState(e){return new jH(e)}static fromViewState(e){return new $H(e)}static fromModelSelection(e){const t=re.liftSelection(e),n=new Rn(L.fromPositions(t.getSelectionStart()),0,t.getPosition(),0);return Ke.fromModelState(n)}static fromModelSelections(e){const t=[];for(let n=0,i=e.length;n<i;n++)t[n]=this.fromModelSelection(e[n]);return t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}},"CursorState");class jH{constructor(e){this.modelState=e,this.viewState=null}}u(jH,"PartialModelCursorState");class $H{constructor(e){this.modelState=null,this.viewState=e}}u($H,"PartialViewCursorState");class Rn{constructor(e,t,n,i){this._singleCursorStateBrand=void 0,this.selectionStart=e,this.selectionStartLeftoverVisibleColumns=t,this.position=n,this.leftoverVisibleColumns=i,this.selection=Rn._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,n,i){return e?new Rn(this.selectionStart,this.selectionStartLeftoverVisibleColumns,new H(t,n),i):new Rn(new L(t,n,t,n),i,new H(t,n),i)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?re.fromPositions(e.getStartPosition(),t):re.fromPositions(e.getEndPosition(),t)}}u(Rn,"SingleCursorState");class wi{constructor(e,t,n){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=n.shouldPushStackElementBefore,this.shouldPushStackElementAfter=n.shouldPushStackElementAfter}}u(wi,"EditOperationResult");function Yl(o){return o==="'"||o==='"'||o==="`"}u(Yl,"isQuote");class ec{static columnSelect(e,t,n,i,s,r){const a=Math.abs(s-n)+1,l=n>s,c=i>r,d=i<r,h=[];for(let g=0;g<a;g++){const f=n+(l?-g:g),p=e.columnFromVisibleColumn(t,f,i),_=e.columnFromVisibleColumn(t,f,r),v=e.visibleColumnFromColumn(t,new H(f,p)),C=e.visibleColumnFromColumn(t,new H(f,_));d&&(v>r||C<i)||c&&(C>i||v<r)||h.push(new Rn(new L(f,p,f,p),0,new H(f,_),0))}if(h.length===0)for(let g=0;g<a;g++){const f=n+(l?-g:g),p=t.getLineMaxColumn(f);h.push(new Rn(new L(f,p,f,p),0,new H(f,p),0))}return{viewStates:h,reversed:l,fromLineNumber:n,fromVisualColumn:i,toLineNumber:s,toVisualColumn:r}}static columnSelectLeft(e,t,n){let i=n.toViewVisualColumn;return i>0&&i--,ec.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,i)}static columnSelectRight(e,t,n){let i=0;const s=Math.min(n.fromViewLineNumber,n.toViewLineNumber),r=Math.max(n.fromViewLineNumber,n.toViewLineNumber);for(let l=s;l<=r;l++){const c=t.getLineMaxColumn(l),d=e.visibleColumnFromColumn(t,new H(l,c));i=Math.max(i,d)}let a=n.toViewVisualColumn;return a<i&&a++,this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,a)}static columnSelectUp(e,t,n,i){const s=i?e.pageSize:1,r=Math.max(1,n.toViewLineNumber-s);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,r,n.toViewVisualColumn)}static columnSelectDown(e,t,n,i){const s=i?e.pageSize:1,r=Math.min(t.getLineCount(),n.toViewLineNumber+s);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,r,n.toViewVisualColumn)}}u(ec,"ColumnSelection");class Un{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return re.fromPositions(i.getEndPosition())}}u(Un,"ReplaceCommand");class qH{constructor(e,t){this._range=e,this._text=t}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return re.fromRange(i,0)}}u(qH,"ReplaceCommandThatSelectsText");class um{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return re.fromPositions(i.getStartPosition())}}u(um,"ReplaceCommandWithoutChangingPosition");class Rm{constructor(e,t,n,i,s=!1){this._range=e,this._text=t,this._columnDeltaOffset=i,this._lineNumberDeltaOffset=n,this.insertsAutoWhitespace=s}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return re.fromPositions(i.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}u(Rm,"ReplaceCommandWithOffsetCursorState");class dy{constructor(e,t,n,i=!1){this._range=e,this._text=t,this._initialSelection=n,this._forceMoveMarkers=i,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}u(dy,"ReplaceCommandThatPreservesSelection");class n0{constructor(e,t,n){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=n}}u(n0,"CursorPosition");class lt{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-H4(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const n=t.lineNumber-1;return new H(n,e.getLineMaxColumn(n))}else return t}static leftPositionAtomicSoftTabs(e,t,n){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const i=e.getLineMinColumn(t.lineNumber),s=e.getLineContent(t.lineNumber),r=lf.atomicPosition(s,t.column-1,n,0);if(r!==-1&&r+1>=i)return new H(t.lineNumber,r+1)}return this.leftPosition(e,t)}static left(e,t,n){const i=e.stickyTabStops?lt.leftPositionAtomicSoftTabs(t,n,e.tabSize):lt.leftPosition(t,n);return new n0(i.lineNumber,i.column,0)}static moveLeft(e,t,n,i,s){let r,a;if(n.hasSelection()&&!i)r=n.selection.startLineNumber,a=n.selection.startColumn;else{const l=n.position.delta(void 0,-(s-1)),c=t.normalizePosition(lt.clipPositionColumn(l,t),0),d=lt.left(e,t,c);r=d.lineNumber,a=d.column}return n.move(i,r,a,0)}static clipPositionColumn(e,t){return new H(e.lineNumber,lt.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,n){return e<t?t:e>n?n:e}static rightPosition(e,t,n){return n<e.getLineMaxColumn(t)?n=n+GD(e.getLineContent(t),n-1):t<e.getLineCount()&&(t=t+1,n=e.getLineMinColumn(t)),new H(t,n)}static rightPositionAtomicSoftTabs(e,t,n,i,s){if(n<e.getLineIndentColumn(t)){const r=e.getLineContent(t),a=lf.atomicPosition(r,n-1,i,1);if(a!==-1)return new H(t,a+1)}return this.rightPosition(e,t,n)}static right(e,t,n){const i=e.stickyTabStops?lt.rightPositionAtomicSoftTabs(t,n.lineNumber,n.column,e.tabSize,e.indentSize):lt.rightPosition(t,n.lineNumber,n.column);return new n0(i.lineNumber,i.column,0)}static moveRight(e,t,n,i,s){let r,a;if(n.hasSelection()&&!i)r=n.selection.endLineNumber,a=n.selection.endColumn;else{const l=n.position.delta(void 0,s-1),c=t.normalizePosition(lt.clipPositionColumn(l,t),1),d=lt.right(e,t,c);r=d.lineNumber,a=d.column}return n.move(i,r,a,0)}static vertical(e,t,n,i,s,r,a,l){const c=mn.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize)+s,d=t.getLineCount(),h=n===1&&i===1,g=n===d&&i===t.getLineMaxColumn(n),f=r<n?h:g;if(n=r,n<1?(n=1,a?i=t.getLineMinColumn(n):i=Math.min(t.getLineMaxColumn(n),i)):n>d?(n=d,a?i=t.getLineMaxColumn(n):i=Math.min(t.getLineMaxColumn(n),i)):i=e.columnFromVisibleColumn(t,n,c),f?s=0:s=c-mn.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize),l!==void 0){const p=new H(n,i),_=t.normalizePosition(p,l);s=s+(i-_.column),n=_.lineNumber,i=_.column}return new n0(n,i,s)}static down(e,t,n,i,s,r,a){return this.vertical(e,t,n,i,s,n+r,a,4)}static moveDown(e,t,n,i,s){let r,a;n.hasSelection()&&!i?(r=n.selection.endLineNumber,a=n.selection.endColumn):(r=n.position.lineNumber,a=n.position.column);const l=lt.down(e,t,r,a,n.leftoverVisibleColumns,s,!0);return n.move(i,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateDown(e,t,n){const i=n.selection,s=lt.down(e,t,i.selectionStartLineNumber,i.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),r=lt.down(e,t,i.positionLineNumber,i.positionColumn,n.leftoverVisibleColumns,1,!1);return new Rn(new L(s.lineNumber,s.column,s.lineNumber,s.column),s.leftoverVisibleColumns,new H(r.lineNumber,r.column),r.leftoverVisibleColumns)}static up(e,t,n,i,s,r,a){return this.vertical(e,t,n,i,s,n-r,a,3)}static moveUp(e,t,n,i,s){let r,a;n.hasSelection()&&!i?(r=n.selection.startLineNumber,a=n.selection.startColumn):(r=n.position.lineNumber,a=n.position.column);const l=lt.up(e,t,r,a,n.leftoverVisibleColumns,s,!0);return n.move(i,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,n){const i=n.selection,s=lt.up(e,t,i.selectionStartLineNumber,i.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),r=lt.up(e,t,i.positionLineNumber,i.positionColumn,n.leftoverVisibleColumns,1,!1);return new Rn(new L(s.lineNumber,s.column,s.lineNumber,s.column),s.leftoverVisibleColumns,new H(r.lineNumber,r.column),r.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,n,i){let s=n.position.lineNumber;for(;s>1&&this._isBlankLine(t,s);)s--;for(;s>1&&!this._isBlankLine(t,s);)s--;return n.move(i,s,t.getLineMinColumn(s),0)}static moveToNextBlankLine(e,t,n,i){const s=t.getLineCount();let r=n.position.lineNumber;for(;r<s&&this._isBlankLine(t,r);)r++;for(;r<s&&!this._isBlankLine(t,r);)r++;return n.move(i,r,t.getLineMinColumn(r),0)}static moveToBeginningOfLine(e,t,n,i){const s=n.position.lineNumber,r=t.getLineMinColumn(s),a=t.getLineFirstNonWhitespaceColumn(s)||r;let l;return n.position.column===a?l=r:l=a,n.move(i,s,l,0)}static moveToEndOfLine(e,t,n,i,s){const r=n.position.lineNumber,a=t.getLineMaxColumn(r);return n.move(i,r,a,s?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,n,i){return n.move(i,1,1,0)}static moveToEndOfBuffer(e,t,n,i){const s=t.getLineCount(),r=t.getLineMaxColumn(s);return n.move(i,s,r,0)}}u(lt,"MoveOperations");class Ic{static deleteRight(e,t,n,i){const s=[];let r=e!==3;for(let a=0,l=i.length;a<l;a++){const c=i[a];let d=c;if(d.isEmpty()){const h=c.getPosition(),g=lt.right(t,n,h);d=new L(g.lineNumber,g.column,h.lineNumber,h.column)}if(d.isEmpty()){s[a]=null;continue}d.startLineNumber!==d.endLineNumber&&(r=!0),s[a]=new Un(d,"")}return[r,s]}static isAutoClosingPairDelete(e,t,n,i,s,r,a){if(t==="never"&&n==="never"||e==="never")return!1;for(let l=0,c=r.length;l<c;l++){const d=r[l],h=d.getPosition();if(!d.isEmpty())return!1;const g=s.getLineContent(h.lineNumber);if(h.column<2||h.column>=g.length+1)return!1;const f=g.charAt(h.column-2),p=i.get(f);if(!p)return!1;if(Yl(f)){if(n==="never")return!1}else if(t==="never")return!1;const _=g.charAt(h.column-1);let v=!1;for(const C of p)C.open===f&&C.close===_&&(v=!0);if(!v)return!1;if(e==="auto"){let C=!1;for(let w=0,y=a.length;w<y;w++){const S=a[w];if(h.lineNumber===S.startLineNumber&&h.column===S.startColumn){C=!0;break}}if(!C)return!1}}return!0}static _runAutoClosingPairDelete(e,t,n){const i=[];for(let s=0,r=n.length;s<r;s++){const a=n[s].getPosition(),l=new L(a.lineNumber,a.column-1,a.lineNumber,a.column+1);i[s]=new Un(l,"")}return[!0,i]}static deleteLeft(e,t,n,i,s){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,n,i,s))return this._runAutoClosingPairDelete(t,n,i);const r=[];let a=e!==2;for(let l=0,c=i.length;l<c;l++){const d=Ic.getDeleteRange(i[l],n,t);if(d.isEmpty()){r[l]=null;continue}d.startLineNumber!==d.endLineNumber&&(a=!0),r[l]=new Un(d,"")}return[a,r]}static getDeleteRange(e,t,n){if(!e.isEmpty())return e;const i=e.getPosition();if(n.useTabStops&&i.column>1){const s=t.getLineContent(i.lineNumber),r=Di(s),a=r===-1?s.length+1:r+1;if(i.column<=a){const l=n.visibleColumnFromColumn(t,i),c=mn.prevIndentTabStop(l,n.indentSize),d=n.columnFromVisibleColumn(t,i.lineNumber,c);return new L(i.lineNumber,d,i.lineNumber,i.column)}}return L.fromPositions(Ic.getPositionAfterDeleteLeft(i,t),i)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const n=Tq(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,n+1)}else if(e.lineNumber>1){const n=e.lineNumber-1;return new H(n,t.getLineMaxColumn(n))}else return e}static cut(e,t,n){const i=[];let s=null;n.sort((r,a)=>H.compare(r.getStartPosition(),a.getEndPosition()));for(let r=0,a=n.length;r<a;r++){const l=n[r];if(l.isEmpty())if(e.emptySelectionClipboard){const c=l.getPosition();let d,h,g,f;c.lineNumber<t.getLineCount()?(d=c.lineNumber,h=1,g=c.lineNumber+1,f=1):c.lineNumber>1&&s?.endLineNumber!==c.lineNumber?(d=c.lineNumber-1,h=t.getLineMaxColumn(c.lineNumber-1),g=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber)):(d=c.lineNumber,h=1,g=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber));const p=new L(d,h,g,f);s=p,p.isEmpty()?i[r]=null:i[r]=new Un(p,"")}else i[r]=null;else i[r]=new Un(l,"")}return new wi(0,i,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}u(Ic,"DeleteOperations");class tt{static _createWord(e,t,n,i,s){return{start:i,end:s,wordType:t,nextCharClass:n}}static _findPreviousWordOnLine(e,t,n){const i=t.getLineContent(n.lineNumber);return this._doFindPreviousWordOnLine(i,e,n)}static _doFindPreviousWordOnLine(e,t,n){let i=0;for(let s=n.column-2;s>=0;s--){const r=e.charCodeAt(s),a=t.get(r);if(a===0){if(i===2)return this._createWord(e,i,a,s+1,this._findEndOfWord(e,t,i,s+1));i=1}else if(a===2){if(i===1)return this._createWord(e,i,a,s+1,this._findEndOfWord(e,t,i,s+1));i=2}else if(a===1&&i!==0)return this._createWord(e,i,a,s+1,this._findEndOfWord(e,t,i,s+1))}return i!==0?this._createWord(e,i,1,0,this._findEndOfWord(e,t,i,0)):null}static _findEndOfWord(e,t,n,i){const s=e.length;for(let r=i;r<s;r++){const a=e.charCodeAt(r),l=t.get(a);if(l===1||n===1&&l===2||n===2&&l===0)return r}return s}static _findNextWordOnLine(e,t,n){const i=t.getLineContent(n.lineNumber);return this._doFindNextWordOnLine(i,e,n)}static _doFindNextWordOnLine(e,t,n){let i=0;const s=e.length;for(let r=n.column-1;r<s;r++){const a=e.charCodeAt(r),l=t.get(a);if(l===0){if(i===2)return this._createWord(e,i,l,this._findStartOfWord(e,t,i,r-1),r);i=1}else if(l===2){if(i===1)return this._createWord(e,i,l,this._findStartOfWord(e,t,i,r-1),r);i=2}else if(l===1&&i!==0)return this._createWord(e,i,l,this._findStartOfWord(e,t,i,r-1),r)}return i!==0?this._createWord(e,i,1,this._findStartOfWord(e,t,i,s-1),s):null}static _findStartOfWord(e,t,n,i){for(let s=i;s>=0;s--){const r=e.charCodeAt(s),a=t.get(r);if(a===1||n===1&&a===2||n===2&&a===0)return s+1}return 0}static moveWordLeft(e,t,n,i){let s=n.lineNumber,r=n.column;r===1&&s>1&&(s=s-1,r=t.getLineMaxColumn(s));let a=tt._findPreviousWordOnLine(e,t,new H(s,r));if(i===0)return new H(s,a?a.start+1:1);if(i===1)return a&&a.wordType===2&&a.end-a.start===1&&a.nextCharClass===0&&(a=tt._findPreviousWordOnLine(e,t,new H(s,a.start+1))),new H(s,a?a.start+1:1);if(i===3){for(;a&&a.wordType===2;)a=tt._findPreviousWordOnLine(e,t,new H(s,a.start+1));return new H(s,a?a.start+1:1)}return a&&r<=a.end+1&&(a=tt._findPreviousWordOnLine(e,t,new H(s,a.start+1))),new H(s,a?a.end+1:1)}static _moveWordPartLeft(e,t){const n=t.lineNumber,i=e.getLineMaxColumn(n);if(t.column===1)return n>1?new H(n-1,e.getLineMaxColumn(n-1)):t;const s=e.getLineContent(n);for(let r=t.column-1;r>1;r--){const a=s.charCodeAt(r-2),l=s.charCodeAt(r-1);if(a===95&&l!==95)return new H(n,r);if((ic(a)||Uv(a))&&Br(l))return new H(n,r);if(Br(a)&&Br(l)&&r+1<i){const c=s.charCodeAt(r);if(ic(c)||Uv(c))return new H(n,r)}}return new H(n,1)}static moveWordRight(e,t,n,i){let s=n.lineNumber,r=n.column,a=!1;r===t.getLineMaxColumn(s)&&s<t.getLineCount()&&(a=!0,s=s+1,r=1);let l=tt._findNextWordOnLine(e,t,new H(s,r));if(i===2)l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=tt._findNextWordOnLine(e,t,new H(s,l.end+1))),l?r=l.end+1:r=t.getLineMaxColumn(s);else if(i===3){for(a&&(r=0);l&&(l.wordType===2||l.start+1<=r);)l=tt._findNextWordOnLine(e,t,new H(s,l.end+1));l?r=l.start+1:r=t.getLineMaxColumn(s)}else l&&!a&&r>=l.start+1&&(l=tt._findNextWordOnLine(e,t,new H(s,l.end+1))),l?r=l.start+1:r=t.getLineMaxColumn(s);return new H(s,r)}static _moveWordPartRight(e,t){const n=t.lineNumber,i=e.getLineMaxColumn(n);if(t.column===i)return n<e.getLineCount()?new H(n+1,1):t;const s=e.getLineContent(n);for(let r=t.column+1;r<i;r++){const a=s.charCodeAt(r-2),l=s.charCodeAt(r-1);if(a!==95&&l===95)return new H(n,r);if((ic(a)||Uv(a))&&Br(l))return new H(n,r);if(Br(a)&&Br(l)&&r+1<i){const c=s.charCodeAt(r);if(ic(c)||Uv(c))return new H(n,r)}}return new H(n,i)}static _deleteWordLeftWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=t.column-2,s=Jr(n,i);return s+1<i?new L(t.lineNumber,s+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const n=e.wordSeparators,i=e.model,s=e.selection,r=e.whitespaceHeuristics;if(!s.isEmpty())return s;if(Ic.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const h=e.selection.getPosition();return new L(h.lineNumber,h.column-1,h.lineNumber,h.column+1)}const a=new H(s.positionLineNumber,s.positionColumn);let l=a.lineNumber,c=a.column;if(l===1&&c===1)return null;if(r){const h=this._deleteWordLeftWhitespace(i,a);if(h)return h}let d=tt._findPreviousWordOnLine(n,i,a);return t===0?d?c=d.start+1:c>1?c=1:(l--,c=i.getLineMaxColumn(l)):(d&&c<=d.end+1&&(d=tt._findPreviousWordOnLine(n,i,new H(l,d.start+1))),d?c=d.end+1:c>1?c=1:(l--,c=i.getLineMaxColumn(l))),new L(l,c,a.lineNumber,a.column)}static deleteInsideWord(e,t,n){if(!n.isEmpty())return n;const i=new H(n.positionLineNumber,n.positionColumn),s=this._deleteInsideWordWhitespace(t,i);return s||this._deleteInsideWordDetermineDeleteRange(e,t,i)}static _charAtIsWhitespace(e,t){const n=e.charCodeAt(t);return n===32||n===9}static _deleteInsideWordWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=n.length;if(i===0)return null;let s=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(n,s))return null;let r=Math.min(t.column-1,i-1);if(!this._charAtIsWhitespace(n,r))return null;for(;s>0&&this._charAtIsWhitespace(n,s-1);)s--;for(;r+1<i&&this._charAtIsWhitespace(n,r+1);)r++;return new L(t.lineNumber,s+1,t.lineNumber,r+2)}static _deleteInsideWordDetermineDeleteRange(e,t,n){const i=t.getLineContent(n.lineNumber),s=i.length;if(s===0)return n.lineNumber>1?new L(n.lineNumber-1,t.getLineMaxColumn(n.lineNumber-1),n.lineNumber,1):n.lineNumber<t.getLineCount()?new L(n.lineNumber,1,n.lineNumber+1,1):new L(n.lineNumber,1,n.lineNumber,1);const r=u(h=>h.start+1<=n.column&&n.column<=h.end+1,"touchesWord"),a=u((h,g)=>(h=Math.min(h,n.column),g=Math.max(g,n.column),new L(n.lineNumber,h,n.lineNumber,g)),"createRangeWithPosition"),l=u(h=>{let g=h.start+1,f=h.end+1,p=!1;for(;f-1<s&&this._charAtIsWhitespace(i,f-1);)p=!0,f++;if(!p)for(;g>1&&this._charAtIsWhitespace(i,g-2);)g--;return a(g,f)},"deleteWordAndAdjacentWhitespace"),c=tt._findPreviousWordOnLine(e,t,n);if(c&&r(c))return l(c);const d=tt._findNextWordOnLine(e,t,n);return d&&r(d)?l(d):c&&d?a(c.end+1,d.start+1):c?a(c.start+1,c.end+1):d?a(d.start+1,d.end+1):a(1,s+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),i=tt._moveWordPartLeft(e,n);return new L(n.lineNumber,n.column,i.lineNumber,i.column)}static _findFirstNonWhitespaceChar(e,t){const n=e.length;for(let i=t;i<n;i++){const s=e.charAt(i);if(s!==" "&&s!=="	")return i}return n}static _deleteWordRightWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=t.column-1,s=this._findFirstNonWhitespaceChar(n,i);return i+1<s?new L(t.lineNumber,t.column,t.lineNumber,s+1):null}static deleteWordRight(e,t){const n=e.wordSeparators,i=e.model,s=e.selection,r=e.whitespaceHeuristics;if(!s.isEmpty())return s;const a=new H(s.positionLineNumber,s.positionColumn);let l=a.lineNumber,c=a.column;const d=i.getLineCount(),h=i.getLineMaxColumn(l);if(l===d&&c===h)return null;if(r){const f=this._deleteWordRightWhitespace(i,a);if(f)return f}let g=tt._findNextWordOnLine(n,i,a);return t===2?g?c=g.end+1:c<h||l===d?c=h:(l++,g=tt._findNextWordOnLine(n,i,new H(l,1)),g?c=g.start+1:c=i.getLineMaxColumn(l)):(g&&c>=g.start+1&&(g=tt._findNextWordOnLine(n,i,new H(l,g.end+1))),g?c=g.start+1:c<h||l===d?c=h:(l++,g=tt._findNextWordOnLine(n,i,new H(l,1)),g?c=g.start+1:c=i.getLineMaxColumn(l))),new L(l,c,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),i=tt._moveWordPartRight(e,n);return new L(n.lineNumber,n.column,i.lineNumber,i.column)}static _createWordAtPosition(e,t,n){const i=new L(t,n.start+1,t,n.end+1);return{word:e.getValueInRange(i),startColumn:i.startColumn,endColumn:i.endColumn}}static getWordAtPosition(e,t,n){const i=so(t),s=tt._findPreviousWordOnLine(i,e,n);if(s&&s.wordType===1&&s.start<=n.column-1&&n.column-1<=s.end)return tt._createWordAtPosition(e,n.lineNumber,s);const r=tt._findNextWordOnLine(i,e,n);return r&&r.wordType===1&&r.start<=n.column-1&&n.column-1<=r.end?tt._createWordAtPosition(e,n.lineNumber,r):null}static word(e,t,n,i,s){const r=so(e.wordSeparators),a=tt._findPreviousWordOnLine(r,t,s),l=tt._findNextWordOnLine(r,t,s);if(!i){let f,p;return a&&a.wordType===1&&a.start<=s.column-1&&s.column-1<=a.end?(f=a.start+1,p=a.end+1):l&&l.wordType===1&&l.start<=s.column-1&&s.column-1<=l.end?(f=l.start+1,p=l.end+1):(a?f=a.end+1:f=1,l?p=l.start+1:p=t.getLineMaxColumn(s.lineNumber)),new Rn(new L(s.lineNumber,f,s.lineNumber,p),0,new H(s.lineNumber,p),0)}let c,d;a&&a.wordType===1&&a.start<s.column-1&&s.column-1<a.end?(c=a.start+1,d=a.end+1):l&&l.wordType===1&&l.start<s.column-1&&s.column-1<l.end?(c=l.start+1,d=l.end+1):(c=s.column,d=s.column);const h=s.lineNumber;let g;if(n.selectionStart.containsPosition(s))g=n.selectionStart.endColumn;else if(s.isBeforeOrEqual(n.selectionStart.getStartPosition())){g=c;const f=new H(h,g);n.selectionStart.containsPosition(f)&&(g=n.selectionStart.endColumn)}else{g=d;const f=new H(h,g);n.selectionStart.containsPosition(f)&&(g=n.selectionStart.startColumn)}return n.move(!0,h,g,0)}}u(tt,"WordOperations");class W_ extends tt{static deleteWordPartLeft(e){const t=Jv([tt.deleteWordLeft(e,0),tt.deleteWordLeft(e,2),tt._deleteWordPartLeft(e.model,e.selection)]);return t.sort(L.compareRangesUsingEnds),t[2]}static deleteWordPartRight(e){const t=Jv([tt.deleteWordRight(e,0),tt.deleteWordRight(e,2),tt._deleteWordPartRight(e.model,e.selection)]);return t.sort(L.compareRangesUsingStarts),t[0]}static moveWordPartLeft(e,t,n){const i=Jv([tt.moveWordLeft(e,t,n,0),tt.moveWordLeft(e,t,n,2),tt._moveWordPartLeft(t,n)]);return i.sort(H.compare),i[2]}static moveWordPartRight(e,t,n){const i=Jv([tt.moveWordRight(e,t,n,0),tt.moveWordRight(e,t,n,2),tt._moveWordPartRight(t,n)]);return i.sort(H.compare),i[0]}}u(W_,"WordPartOperations");function Jv(o){return o.filter(e=>Boolean(e))}u(Jv,"enforceDefined");class In{static addCursorDown(e,t,n){const i=[];let s=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];i[s++]=new Ke(l.modelState,l.viewState),n?i[s++]=Ke.fromModelState(lt.translateDown(e.cursorConfig,e.model,l.modelState)):i[s++]=Ke.fromViewState(lt.translateDown(e.cursorConfig,e,l.viewState))}return i}static addCursorUp(e,t,n){const i=[];let s=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];i[s++]=new Ke(l.modelState,l.viewState),n?i[s++]=Ke.fromModelState(lt.translateUp(e.cursorConfig,e.model,l.modelState)):i[s++]=Ke.fromViewState(lt.translateUp(e.cursorConfig,e,l.viewState))}return i}static moveToBeginningOfLine(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s];i[s]=this._moveToLineStart(e,a,n)}return i}static _moveToLineStart(e,t,n){const i=t.viewState.position.column,s=t.modelState.position.column,r=i===s,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!r&&!(i===l)?this._moveToLineStartByView(e,t,n):this._moveToLineStartByModel(e,t,n)}static _moveToLineStartByView(e,t,n){return Ke.fromViewState(lt.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,n))}static _moveToLineStartByModel(e,t,n){return Ke.fromModelState(lt.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,n))}static moveToEndOfLine(e,t,n,i){const s=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];s[r]=this._moveToLineEnd(e,l,n,i)}return s}static _moveToLineEnd(e,t,n,i){const s=t.viewState.position,r=e.getLineMaxColumn(s.lineNumber),a=s.column===r,l=t.modelState.position,c=e.model.getLineMaxColumn(l.lineNumber),d=r-s.column===c-l.column;return a||d?this._moveToLineEndByModel(e,t,n,i):this._moveToLineEndByView(e,t,n,i)}static _moveToLineEndByView(e,t,n,i){return Ke.fromViewState(lt.moveToEndOfLine(e.cursorConfig,e,t.viewState,n,i))}static _moveToLineEndByModel(e,t,n,i){return Ke.fromModelState(lt.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,n,i))}static expandLineSelection(e,t){const n=[];for(let i=0,s=t.length;i<s;i++){const r=t[i],a=r.modelState.selection.startLineNumber,l=e.model.getLineCount();let c=r.modelState.selection.endLineNumber,d;c===l?d=e.model.getLineMaxColumn(l):(c++,d=1),n[i]=Ke.fromModelState(new Rn(new L(a,1,a,1),0,new H(c,d),0))}return n}static moveToBeginningOfBuffer(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s];i[s]=Ke.fromModelState(lt.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return i}static moveToEndOfBuffer(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s];i[s]=Ke.fromModelState(lt.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return i}static selectAll(e,t){const n=e.model.getLineCount(),i=e.model.getLineMaxColumn(n);return Ke.fromModelState(new Rn(new L(1,1,1,1),0,new H(n,i),0))}static line(e,t,n,i,s){const r=e.model.validatePosition(i),a=s?e.coordinatesConverter.validateViewPosition(new H(s.lineNumber,s.column),r):e.coordinatesConverter.convertModelPositionToViewPosition(r);if(!n||!t.modelState.hasSelection()){const c=e.model.getLineCount();let d=r.lineNumber+1,h=1;return d>c&&(d=c,h=e.model.getLineMaxColumn(d)),Ke.fromModelState(new Rn(new L(r.lineNumber,1,d,h),0,new H(d,h),0))}const l=t.modelState.selectionStart.getStartPosition().lineNumber;if(r.lineNumber<l)return Ke.fromViewState(t.viewState.move(t.modelState.hasSelection(),a.lineNumber,1,0));if(r.lineNumber>l){const c=e.getLineCount();let d=a.lineNumber+1,h=1;return d>c&&(d=c,h=e.getLineMaxColumn(d)),Ke.fromViewState(t.viewState.move(t.modelState.hasSelection(),d,h,0))}else{const c=t.modelState.selectionStart.getEndPosition();return Ke.fromModelState(t.modelState.move(t.modelState.hasSelection(),c.lineNumber,c.column,0))}}static word(e,t,n,i){const s=e.model.validatePosition(i);return Ke.fromModelState(tt.word(e.cursorConfig,e.model,t.modelState,n,s))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new Ke(t.modelState,t.viewState);const n=t.viewState.position.lineNumber,i=t.viewState.position.column;return Ke.fromViewState(new Rn(new L(n,i,n,i),0,new H(n,i),0))}static moveTo(e,t,n,i,s){const r=e.model.validatePosition(i),a=s?e.coordinatesConverter.validateViewPosition(new H(s.lineNumber,s.column),r):e.coordinatesConverter.convertModelPositionToViewPosition(r);return Ke.fromViewState(t.viewState.move(n,a.lineNumber,a.column,0))}static simpleMove(e,t,n,i,s,r){switch(n){case 0:return r===4?this._moveHalfLineLeft(e,t,i):this._moveLeft(e,t,i,s);case 1:return r===4?this._moveHalfLineRight(e,t,i):this._moveRight(e,t,i,s);case 2:return r===2?this._moveUpByViewLines(e,t,i,s):this._moveUpByModelLines(e,t,i,s);case 3:return r===2?this._moveDownByViewLines(e,t,i,s):this._moveDownByModelLines(e,t,i,s);case 4:return r===2?t.map(a=>Ke.fromViewState(lt.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,i))):t.map(a=>Ke.fromModelState(lt.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,i)));case 5:return r===2?t.map(a=>Ke.fromViewState(lt.moveToNextBlankLine(e.cursorConfig,e,a.viewState,i))):t.map(a=>Ke.fromModelState(lt.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,i)));case 6:return this._moveToViewMinColumn(e,t,i);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,i);case 8:return this._moveToViewCenterColumn(e,t,i);case 9:return this._moveToViewMaxColumn(e,t,i);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,i);default:return null}}static viewportMove(e,t,n,i,s){const r=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(r);switch(n){case 11:{const l=this._firstLineNumberInRange(e.model,a,s),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,c)]}case 13:{const l=this._lastLineNumberInRange(e.model,a,s),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,c)]}case 12:{const l=Math.round((a.startLineNumber+a.endLineNumber)/2),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,c)]}case 14:{const l=[];for(let c=0,d=t.length;c<d;c++){const h=t[c];l[c]=this.findPositionInViewportIfOutside(e,h,r,i)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,n,i){const s=t.viewState.position.lineNumber;if(n.startLineNumber<=s&&s<=n.endLineNumber-1)return new Ke(t.modelState,t.viewState);{let r;s>n.endLineNumber-1?r=n.endLineNumber-1:s<n.startLineNumber?r=n.startLineNumber:r=s;const a=lt.vertical(e.cursorConfig,e,s,t.viewState.position.column,t.viewState.leftoverVisibleColumns,r,!1);return Ke.fromViewState(t.viewState.move(i,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,n){let i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.min(t.endLineNumber,i+n-1)}static _lastLineNumberInRange(e,t,n){let i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.max(i,t.endLineNumber-n+1)}static _moveLeft(e,t,n,i){return t.map(s=>Ke.fromViewState(lt.moveLeft(e.cursorConfig,e,s.viewState,n,i)))}static _moveHalfLineLeft(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,c=Math.round(e.getLineContent(l).length/2);i[s]=Ke.fromViewState(lt.moveLeft(e.cursorConfig,e,a.viewState,n,c))}return i}static _moveRight(e,t,n,i){return t.map(s=>Ke.fromViewState(lt.moveRight(e.cursorConfig,e,s.viewState,n,i)))}static _moveHalfLineRight(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,c=Math.round(e.getLineContent(l).length/2);i[s]=Ke.fromViewState(lt.moveRight(e.cursorConfig,e,a.viewState,n,c))}return i}static _moveDownByViewLines(e,t,n,i){const s=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];s[r]=Ke.fromViewState(lt.moveDown(e.cursorConfig,e,l.viewState,n,i))}return s}static _moveDownByModelLines(e,t,n,i){const s=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];s[r]=Ke.fromModelState(lt.moveDown(e.cursorConfig,e.model,l.modelState,n,i))}return s}static _moveUpByViewLines(e,t,n,i){const s=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];s[r]=Ke.fromViewState(lt.moveUp(e.cursorConfig,e,l.viewState,n,i))}return s}static _moveUpByModelLines(e,t,n,i){const s=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];s[r]=Ke.fromModelState(lt.moveUp(e.cursorConfig,e.model,l.modelState,n,i))}return s}static _moveToViewPosition(e,t,n,i,s){return Ke.fromViewState(t.viewState.move(n,i,s,0))}static _moveToModelPosition(e,t,n,i,s){return Ke.fromModelState(t.modelState.move(n,i,s,0))}static _moveToViewMinColumn(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineMinColumn(l);i[s]=this._moveToViewPosition(e,a,n,l,c)}return i}static _moveToViewFirstNonWhitespaceColumn(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineFirstNonWhitespaceColumn(l);i[s]=this._moveToViewPosition(e,a,n,l,c)}return i}static _moveToViewCenterColumn(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,c=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);i[s]=this._moveToViewPosition(e,a,n,l,c)}return i}static _moveToViewMaxColumn(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineMaxColumn(l);i[s]=this._moveToViewPosition(e,a,n,l,c)}return i}static _moveToViewLastNonWhitespaceColumn(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineLastNonWhitespaceColumn(l);i[s]=this._moveToViewPosition(e,a,n,l,c)}return i}}u(In,"CursorMoveCommands");var b1;(function(o){const e=u(function(n){if(!Ki(n))return!1;const i=n;return!(!qi(i.to)||!ss(i.select)&&!PO(i.select)||!ss(i.by)&&!qi(i.by)||!ss(i.value)&&!Sc(i.value))},"isCursorMoveArgs");o.description={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},o.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},o.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(n){if(!n.to)return null;let i;switch(n.to){case o.RawDirection.Left:i=0;break;case o.RawDirection.Right:i=1;break;case o.RawDirection.Up:i=2;break;case o.RawDirection.Down:i=3;break;case o.RawDirection.PrevBlankLine:i=4;break;case o.RawDirection.NextBlankLine:i=5;break;case o.RawDirection.WrappedLineStart:i=6;break;case o.RawDirection.WrappedLineFirstNonWhitespaceCharacter:i=7;break;case o.RawDirection.WrappedLineColumnCenter:i=8;break;case o.RawDirection.WrappedLineEnd:i=9;break;case o.RawDirection.WrappedLineLastNonWhitespaceCharacter:i=10;break;case o.RawDirection.ViewPortTop:i=11;break;case o.RawDirection.ViewPortBottom:i=13;break;case o.RawDirection.ViewPortCenter:i=12;break;case o.RawDirection.ViewPortIfOutside:i=14;break;default:return null}let s=0;switch(n.by){case o.RawUnit.Line:s=1;break;case o.RawUnit.WrappedLine:s=2;break;case o.RawUnit.Character:s=3;break;case o.RawUnit.HalfLine:s=4;break}return{direction:i,unit:s,select:!!n.select,value:n.value||1}}u(t,"parse"),o.parse=t})(b1||(b1={}));function Ag(o,e,t,n){const i=Tg(e,t.startLineNumber,t.startColumn),s=n.getLanguageConfiguration(i.languageId);if(!s)return null;const r=i.getLineContent(),a=r.substr(0,t.startColumn-1-i.firstCharOffset);let l;t.isEmpty()?l=r.substr(t.startColumn-1-i.firstCharOffset):l=Tg(e,t.endLineNumber,t.endColumn).getLineContent().substr(t.endColumn-1-i.firstCharOffset);let c="";if(t.startLineNumber>1&&i.firstCharOffset===0){const _=Tg(e,t.startLineNumber-1);_.languageId===i.languageId&&(c=_.getLineContent())}const d=s.onEnter(o,c,a,l);if(!d)return null;const h=d.indentAction;let g=d.appendText;const f=d.removeText||0;g?h===cn.Indent&&(g="	"+g):h===cn.Indent||h===cn.IndentOutdent?g="	":g="";let p=T5(e,t.startLineNumber,t.startColumn);return f&&(p=p.substring(0,p.length-f)),{indentAction:h,appendText:g,removeText:f,indentation:p}}u(Ag,"getEnterAction");var bQ=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},_Q=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const cT=Object.create(null);function cd(o,e){if(e<=0)return"";cT[o]||(cT[o]=["",o]);const t=cT[o];for(let n=t.length;n<=e;n++)t[n]=t[n-1]+o;return t[e]}u(cd,"cachedStringRepeat");let zs=u(class rE{constructor(e,t,n){this._languageConfigurationService=n,this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}static unshiftIndent(e,t,n,i,s){const r=mn.visibleColumnFromColumn(e,t,n);if(s){const a=cd(" ",i),c=mn.prevIndentTabStop(r,i)/i;return cd(a,c)}else{const a="	",c=mn.prevRenderTabStop(r,n)/n;return cd(a,c)}}static shiftIndent(e,t,n,i,s){const r=mn.visibleColumnFromColumn(e,t,n);if(s){const a=cd(" ",i),c=mn.nextIndentTabStop(r,i)/i;return cd(a,c)}else{const a="	",c=mn.nextRenderTabStop(r,n)/n;return cd(a,c)}}_addEditOperation(e,t,n){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,n):e.addEditOperation(t,n)}getEditOperations(e,t){const n=this._selection.startLineNumber;let i=this._selection.endLineNumber;this._selection.endColumn===1&&n!==i&&(i=i-1);const{tabSize:s,indentSize:r,insertSpaces:a}=this._opts,l=n===i;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(n))&&(this._useLastEditRangeForCursorEndPosition=!0);let c=0,d=0;for(let h=n;h<=i;h++,c=d){d=0;const g=e.getLineContent(h);let f=Di(g);if(this._opts.isUnshift&&(g.length===0||f===0)||!l&&!this._opts.isUnshift&&g.length===0)continue;if(f===-1&&(f=g.length),h>1&&mn.visibleColumnFromColumn(g,f+1,s)%r!==0&&e.tokenization.isCheapToTokenize(h-1)){const v=Ag(this._opts.autoIndent,e,new L(h-1,e.getLineMaxColumn(h-1),h-1,e.getLineMaxColumn(h-1)),this._languageConfigurationService);if(v){if(d=c,v.appendText)for(let C=0,w=v.appendText.length;C<w&&d<r&&v.appendText.charCodeAt(C)===32;C++)d++;v.removeText&&(d=Math.max(0,d-v.removeText));for(let C=0;C<d&&!(f===0||g.charCodeAt(f-1)!==32);C++)f--}}if(this._opts.isUnshift&&f===0)continue;let p;this._opts.isUnshift?p=rE.unshiftIndent(g,f+1,s,r,a):p=rE.shiftIndent(g,f+1,s,r,a),this._addEditOperation(t,new L(h,1,h,f+1),p),h===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=f+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(n)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const c=a?cd(" ",r):"	";for(let d=n;d<=i;d++){const h=e.getLineContent(d);let g=Di(h);if(!(this._opts.isUnshift&&(h.length===0||g===0))&&!(!l&&!this._opts.isUnshift&&h.length===0)&&(g===-1&&(g=h.length),!(this._opts.isUnshift&&g===0)))if(this._opts.isUnshift){g=Math.min(g,r);for(let f=0;f<g;f++)if(h.charCodeAt(f)===9){g=f+1;break}this._addEditOperation(t,new L(d,1,d,g+1),"")}else this._addEditOperation(t,new L(d,1,d,1),c),d===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){const i=t.getInverseEditOperations()[0];return new re(i.range.endLineNumber,i.range.endColumn,i.range.endLineNumber,i.range.endColumn)}const n=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){const i=this._selection.startColumn;return n.startColumn<=i?n:n.getDirection()===0?new re(n.startLineNumber,i,n.endLineNumber,n.endColumn):new re(n.endLineNumber,n.endColumn,n.startLineNumber,i)}return n}},"ShiftCommand");zs=bQ([_Q(2,rn)],zs);class YH{constructor(e,t,n){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=n}getEditOperations(e,t){t.addTrackedEditOperation(new L(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new L(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){const n=t.getInverseEditOperations(),i=n[0].range,s=n[1].range;return new re(i.endLineNumber,i.endColumn,s.endLineNumber,s.endColumn-this._charAfterSelection.length)}}u(YH,"SurroundSelectionCommand");class XH{constructor(e,t,n){this._position=e,this._text=t,this._charAfter=n}getEditOperations(e,t){t.addTrackedEditOperation(new L(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return new re(i.endLineNumber,i.startColumn,i.endLineNumber,i.endColumn-this._charAfter.length)}}u(XH,"CompositionSurroundSelectionCommand");function vQ(o,e,t){const n=o.tokenization.getLanguageIdAtPosition(e,0);if(e>1){let i,s=-1;for(i=e-1;i>=1;i--){if(o.tokenization.getLanguageIdAtPosition(i,0)!==n)return s;const r=o.getLineContent(i);if(t.shouldIgnore(r)||/^\s+$/.test(r)||r===""){s=i;continue}return i}}return-1}u(vQ,"getPrecedingValidLine");function uy(o,e,t,n=!0,i){if(o<4)return null;const s=i.getLanguageConfiguration(e.tokenization.getLanguageId()).indentRulesSupport;if(!s)return null;if(t<=1)return{indentation:"",action:null};const r=vQ(e,t,s);if(r<0)return null;if(r<1)return{indentation:"",action:null};const a=e.getLineContent(r);if(s.shouldIncrease(a)||s.shouldIndentNextLine(a))return{indentation:vt(a),action:cn.Indent,line:r};if(s.shouldDecrease(a))return{indentation:vt(a),action:null,line:r};{if(r===1)return{indentation:vt(e.getLineContent(r)),action:null,line:r};const l=r-1,c=s.getIndentMetadata(e.getLineContent(l));if(!(c&3)&&c&4){let d=0;for(let h=l-1;h>0;h--)if(!s.shouldIndentNextLine(e.getLineContent(h))){d=h;break}return{indentation:vt(e.getLineContent(d+1)),action:null,line:d+1}}if(n)return{indentation:vt(e.getLineContent(r)),action:null,line:r};for(let d=r;d>0;d--){const h=e.getLineContent(d);if(s.shouldIncrease(h))return{indentation:vt(h),action:cn.Indent,line:d};if(s.shouldIndentNextLine(h)){let g=0;for(let f=d-1;f>0;f--)if(!s.shouldIndentNextLine(e.getLineContent(d))){g=f;break}return{indentation:vt(e.getLineContent(g+1)),action:null,line:g+1}}else if(s.shouldDecrease(h))return{indentation:vt(h),action:null,line:d}}return{indentation:vt(e.getLineContent(1)),action:null,line:1}}}u(uy,"getInheritIndentForLine");function Fm(o,e,t,n,i,s){if(o<4)return null;const r=s.getLanguageConfiguration(t);if(!r)return null;const a=s.getLanguageConfiguration(t).indentRulesSupport;if(!a)return null;const l=uy(o,e,n,void 0,s),c=e.getLineContent(n);if(l){const d=l.line;if(d!==void 0){const h=r.onEnter(o,"",e.getLineContent(d),"");if(h){let g=vt(e.getLineContent(d));return h.removeText&&(g=g.substring(0,g.length-h.removeText)),h.indentAction===cn.Indent||h.indentAction===cn.IndentOutdent?g=i.shiftIndent(g):h.indentAction===cn.Outdent&&(g=i.unshiftIndent(g)),a.shouldDecrease(c)&&(g=i.unshiftIndent(g)),h.appendText&&(g+=h.appendText),vt(g)}}return a.shouldDecrease(c)?l.action===cn.Indent?l.indentation:i.unshiftIndent(l.indentation):l.action===cn.Indent?i.shiftIndent(l.indentation):l.indentation}return null}u(Fm,"getGoodIndentForLine");function CQ(o,e,t,n,i){if(o<4)return null;e.tokenization.forceTokenization(t.startLineNumber);const s=e.tokenization.getLineTokens(t.startLineNumber),r=Fw(s,t.startColumn-1),a=r.getLineContent();let l=!1,c;r.firstCharOffset>0&&s.getLanguageId(0)!==r.languageId?(l=!0,c=a.substr(0,t.startColumn-1-r.firstCharOffset)):c=s.getLineContent().substring(0,t.startColumn-1);let d;t.isEmpty()?d=a.substr(t.startColumn-1-r.firstCharOffset):d=Tg(e,t.endLineNumber,t.endColumn).getLineContent().substr(t.endColumn-1-r.firstCharOffset);const h=i.getLanguageConfiguration(r.languageId).indentRulesSupport;if(!h)return null;const g=c,f=vt(c),p={tokenization:{getLineTokens:w=>e.tokenization.getLineTokens(w),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(w,y)=>e.getLanguageIdAtPosition(w,y)},getLineContent:w=>w===t.startLineNumber?g:e.getLineContent(w)},_=vt(s.getLineContent()),v=uy(o,p,t.startLineNumber+1,void 0,i);if(!v){const w=l?_:f;return{beforeEnter:w,afterEnter:w}}let C=l?_:v.indentation;return v.action===cn.Indent&&(C=n.shiftIndent(C)),h.shouldDecrease(d)&&(C=n.unshiftIndent(C)),{beforeEnter:l?_:f,afterEnter:C}}u(CQ,"getIndentForEnter");function wQ(o,e,t,n,i,s){if(o<4)return null;const r=Tg(e,t.startLineNumber,t.startColumn);if(r.firstCharOffset)return null;const a=s.getLanguageConfiguration(r.languageId).indentRulesSupport;if(!a)return null;const l=r.getLineContent(),c=l.substr(0,t.startColumn-1-r.firstCharOffset);let d;if(t.isEmpty()?d=l.substr(t.startColumn-1-r.firstCharOffset):d=Tg(e,t.endLineNumber,t.endColumn).getLineContent().substr(t.endColumn-1-r.firstCharOffset),!a.shouldDecrease(c+d)&&a.shouldDecrease(c+n+d)){const h=uy(o,e,t.startLineNumber,!1,s);if(!h)return null;let g=h.indentation;return h.action!==cn.Indent&&(g=i.unshiftIndent(g)),g}return null}u(wQ,"getIndentActionForType");function ZH(o,e,t){const n=t.getLanguageConfiguration(o.getLanguageId()).indentRulesSupport;return!n||e<1||e>o.getLineCount()?null:n.getIndentMetadata(o.getLineContent(e))}u(ZH,"getIndentMetadata");class Ft{static indent(e,t,n){if(t===null||n===null)return[];const i=[];for(let s=0,r=n.length;s<r;s++)i[s]=new zs(n[s],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return i}static outdent(e,t,n){const i=[];for(let s=0,r=n.length;s<r;s++)i[s]=new zs(n[s],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return i}static shiftIndent(e,t,n){return n=n||1,zs.shiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static unshiftIndent(e,t,n){return n=n||1,zs.unshiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static _distributedPaste(e,t,n,i){const s=[];for(let r=0,a=n.length;r<a;r++)s[r]=new Un(n[r],i[r]);return new wi(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,n,i,s){const r=[];for(let a=0,l=n.length;a<l;a++){const c=n[a],d=c.getPosition();if(s&&!c.isEmpty()&&(s=!1),s&&i.indexOf(`
`)!==i.length-1&&(s=!1),s){const h=new L(d.lineNumber,1,d.lineNumber,1);r[a]=new dy(h,i,c,!0)}else r[a]=new Un(c,i)}return new wi(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(e,t,n,i,s){if(i||t.length===1)return null;if(s&&s.length===t.length)return s;if(e.multiCursorPaste==="spread"){n.charCodeAt(n.length-1)===10&&(n=n.substr(0,n.length-1)),n.charCodeAt(n.length-1)===13&&(n=n.substr(0,n.length-1));const r=sa(n);if(r.length===t.length)return r}return null}static paste(e,t,n,i,s,r){const a=this._distributePasteToCursors(e,n,i,s,r);return a?(n=n.sort(L.compareRangesUsingStarts),this._distributedPaste(e,t,n,a)):this._simplePaste(e,t,n,i,s)}static _goodIndentForLine(e,t,n){let i=null,s="";const r=uy(e.autoIndent,t,n,!1,e.languageConfigurationService);if(r)i=r.action,s=r.indentation;else if(n>1){let a;for(a=n-1;a>=1;a--){const d=t.getLineContent(a);if(Jr(d)>=0)break}if(a<1)return null;const l=t.getLineMaxColumn(a),c=Ag(e.autoIndent,t,new L(a,l,a,l),e.languageConfigurationService);c&&(s=c.indentation+c.appendText)}return i&&(i===cn.Indent&&(s=Ft.shiftIndent(e,s)),i===cn.Outdent&&(s=Ft.unshiftIndent(e,s)),s=e.normalizeIndentation(s)),s||null}static _replaceJumpToNextIndent(e,t,n,i){let s="";const r=n.getStartPosition();if(e.insertSpaces){const a=e.visibleColumnFromColumn(t,r),l=e.indentSize,c=l-a%l;for(let d=0;d<c;d++)s+=" "}else s="	";return new Un(n,s,i)}static tab(e,t,n){const i=[];for(let s=0,r=n.length;s<r;s++){const a=n[s];if(a.isEmpty()){const l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.tokenization.isCheapToTokenize(a.startLineNumber)){let c=this._goodIndentForLine(e,t,a.startLineNumber);c=c||"	";const d=e.normalizeIndentation(c);if(!l.startsWith(d)){i[s]=new Un(new L(a.startLineNumber,1,a.startLineNumber,l.length+1),d,!0);continue}}i[s]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){const l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){i[s]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}i[s]=new zs(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return i}static compositionType(e,t,n,i,s,r,a,l){const c=i.map(d=>this._compositionType(n,d,s,r,a,l));return new wi(4,c,{shouldPushStackElementBefore:Qv(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,n,i,s,r){if(!t.isEmpty())return null;const a=t.getPosition(),l=Math.max(1,a.column-i),c=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+s),d=new L(a.lineNumber,l,a.lineNumber,c);return e.getValueInRange(d)===n&&r===0?null:new Rm(d,n,0,r)}static _typeCommand(e,t,n){return n?new um(e,t,!0):new Un(e,t,!0)}static _enter(e,t,n,i){if(e.autoIndent===0)return Ft._typeCommand(i,`
`,n);if(!t.tokenization.isCheapToTokenize(i.getStartPosition().lineNumber)||e.autoIndent===1){const l=t.getLineContent(i.startLineNumber),c=vt(l).substring(0,i.startColumn-1);return Ft._typeCommand(i,`
`+e.normalizeIndentation(c),n)}const s=Ag(e.autoIndent,t,i,e.languageConfigurationService);if(s){if(s.indentAction===cn.None)return Ft._typeCommand(i,`
`+e.normalizeIndentation(s.indentation+s.appendText),n);if(s.indentAction===cn.Indent)return Ft._typeCommand(i,`
`+e.normalizeIndentation(s.indentation+s.appendText),n);if(s.indentAction===cn.IndentOutdent){const l=e.normalizeIndentation(s.indentation),c=e.normalizeIndentation(s.indentation+s.appendText),d=`
`+c+`
`+l;return n?new um(i,d,!0):new Rm(i,d,-1,c.length-l.length,!0)}else if(s.indentAction===cn.Outdent){const l=Ft.unshiftIndent(e,s.indentation);return Ft._typeCommand(i,`
`+e.normalizeIndentation(l+s.appendText),n)}}const r=t.getLineContent(i.startLineNumber),a=vt(r).substring(0,i.startColumn-1);if(e.autoIndent>=4){const l=CQ(e.autoIndent,t,i,{unshiftIndent:c=>Ft.unshiftIndent(e,c),shiftIndent:c=>Ft.shiftIndent(e,c),normalizeIndentation:c=>e.normalizeIndentation(c)},e.languageConfigurationService);if(l){let c=e.visibleColumnFromColumn(t,i.getEndPosition());const d=i.endColumn,h=t.getLineContent(i.endLineNumber),g=Di(h);if(g>=0?i=i.setEndPosition(i.endLineNumber,Math.max(i.endColumn,g+1)):i=i.setEndPosition(i.endLineNumber,t.getLineMaxColumn(i.endLineNumber)),n)return new um(i,`
`+e.normalizeIndentation(l.afterEnter),!0);{let f=0;return d<=g+1&&(e.insertSpaces||(c=Math.ceil(c/e.indentSize)),f=Math.min(c+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new Rm(i,`
`+e.normalizeIndentation(l.afterEnter),0,f,!0)}}}return Ft._typeCommand(i,`
`+e.normalizeIndentation(a),n)}static _isAutoIndentType(e,t,n){if(e.autoIndent<4)return!1;for(let i=0,s=n.length;i<s;i++)if(!t.tokenization.isCheapToTokenize(n[i].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(e,t,n,i){const s=T5(t,n.startLineNumber,n.startColumn),r=wQ(e.autoIndent,t,n,i,{shiftIndent:a=>Ft.shiftIndent(e,a),unshiftIndent:a=>Ft.unshiftIndent(e,a)},e.languageConfigurationService);if(r===null)return null;if(r!==e.normalizeIndentation(s)){const a=t.getLineFirstNonWhitespaceColumn(n.startLineNumber);return a===0?Ft._typeCommand(new L(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(r)+i,!1):Ft._typeCommand(new L(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(r)+t.getLineContent(n.startLineNumber).substring(a-1,n.startColumn-1)+i,!1)}return null}static _isAutoClosingOvertype(e,t,n,i,s){if(e.autoClosingOvertype==="never"||!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(s))return!1;for(let r=0,a=n.length;r<a;r++){const l=n[r];if(!l.isEmpty())return!1;const c=l.getPosition(),d=t.getLineContent(c.lineNumber);if(d.charAt(c.column-1)!==s)return!1;const g=Yl(s);if((c.column>2?d.charCodeAt(c.column-2):0)===92&&g)return!1;if(e.autoClosingOvertype==="auto"){let p=!1;for(let _=0,v=i.length;_<v;_++){const C=i[_];if(c.lineNumber===C.startLineNumber&&c.column===C.startColumn){p=!0;break}}if(!p)return!1}}return!0}static _runAutoClosingOvertype(e,t,n,i,s){const r=[];for(let a=0,l=i.length;a<l;a++){const d=i[a].getPosition(),h=new L(d.lineNumber,d.column,d.lineNumber,d.column+1);r[a]=new Un(h,s)}return new wi(4,r,{shouldPushStackElementBefore:Qv(e,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(e,t){const n=t.charAt(0),i=e.autoClosingPairs.autoClosingPairsOpenByStart.get(n)||[],s=e.autoClosingPairs.autoClosingPairsCloseByStart.get(n)||[],r=i.some(l=>t.startsWith(l.open)),a=s.some(l=>t.startsWith(l.close));return!r&&a}static _findAutoClosingPairOpen(e,t,n,i){const s=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(i);if(!s)return null;let r=null;for(const a of s)if(r===null||a.open.length>r.open.length){let l=!0;for(const c of n)if(t.getValueInRange(new L(c.lineNumber,c.column-a.open.length+1,c.lineNumber,c.column))+i!==a.open){l=!1;break}l&&(r=a)}return r}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const n=t.close.charAt(t.close.length-1),i=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(n)||[];let s=null;for(const r of i)r.open!==t.open&&t.open.includes(r.open)&&t.close.endsWith(r.close)&&(!s||r.open.length>s.open.length)&&(s=r);return s}static _getAutoClosingPairClose(e,t,n,i,s){const r=Yl(i),a=r?e.autoClosingQuotes:e.autoClosingBrackets,l=r?e.shouldAutoCloseBefore.quote:e.shouldAutoCloseBefore.bracket;if(a==="never")return null;for(const p of n)if(!p.isEmpty())return null;const c=n.map(p=>{const _=p.getPosition();return s?{lineNumber:_.lineNumber,beforeColumn:_.column-i.length,afterColumn:_.column}:{lineNumber:_.lineNumber,beforeColumn:_.column,afterColumn:_.column}}),d=this._findAutoClosingPairOpen(e,t,c.map(p=>new H(p.lineNumber,p.beforeColumn)),i);if(!d)return null;const h=this._findContainedAutoClosingPair(e,d),g=h?h.close:"";let f=!0;for(const p of c){const{lineNumber:_,beforeColumn:v,afterColumn:C}=p,w=t.getLineContent(_),y=w.substring(0,v-1),S=w.substring(C-1);if(S.startsWith(g)||(f=!1),S.length>0){const x=S.charAt(0);if(!Ft._isBeforeClosingBrace(e,S)&&!l(x))return null}if(d.open.length===1&&(i==="'"||i==='"')&&a!=="always"){const x=so(e.wordSeparators);if(y.length>0){const M=y.charCodeAt(y.length-1);if(x.get(M)===0)return null}}if(!t.tokenization.isCheapToTokenize(_))return null;t.tokenization.forceTokenization(_);const E=t.tokenization.getLineTokens(_),k=Fw(E,v-1);if(!d.shouldAutoClose(k,v-k.firstCharOffset))return null;const T=d.findNeutralCharacter();if(T){const x=t.tokenization.getTokenTypeIfInsertingCharacter(_,v,T);if(!d.isOK(x))return null}}return f?d.close.substring(0,d.close.length-g.length):d.close}static _runAutoClosingOpenCharType(e,t,n,i,s,r,a){const l=[];for(let c=0,d=i.length;c<d;c++){const h=i[c];l[c]=new PA(h,s,!r,a)}return new wi(4,l,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(e,t){return Yl(t)?e.autoSurround==="quotes"||e.autoSurround==="languageDefined":e.autoSurround==="brackets"||e.autoSurround==="languageDefined"}static _isSurroundSelectionType(e,t,n,i){if(!Ft._shouldSurroundChar(e,i)||!e.surroundingPairs.hasOwnProperty(i))return!1;const s=Yl(i);for(const r of n){if(r.isEmpty())return!1;let a=!0;for(let l=r.startLineNumber;l<=r.endLineNumber;l++){const c=t.getLineContent(l),d=l===r.startLineNumber?r.startColumn-1:0,h=l===r.endLineNumber?r.endColumn-1:c.length,g=c.substring(d,h);if(/[^ \t]/.test(g)){a=!1;break}}if(a)return!1;if(s&&r.startLineNumber===r.endLineNumber&&r.startColumn+1===r.endColumn){const l=t.getValueInRange(r);if(Yl(l))return!1}}return!0}static _runSurroundSelectionType(e,t,n,i,s){const r=[];for(let a=0,l=i.length;a<l;a++){const c=i[a],d=t.surroundingPairs[s];r[a]=new YH(c,s,d)}return new wi(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(e,t,n){return!!(n.length===1&&t.tokenization.isCheapToTokenize(n[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,n,i,s){if(!t.electricChars.hasOwnProperty(s)||!i.isEmpty())return null;const r=i.getPosition();n.tokenization.forceTokenization(r.lineNumber);const a=n.tokenization.getLineTokens(r.lineNumber);let l;try{l=t.onElectricCharacter(s,a,r.column)}catch(c){return Ie(c),null}if(!l)return null;if(l.matchOpenBracket){const c=(a.getLineContent()+s).lastIndexOf(l.matchOpenBracket)+1,d=n.bracketPairs.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:r.lineNumber,column:c},500);if(d){if(d.startLineNumber===r.lineNumber)return null;const h=n.getLineContent(d.startLineNumber),g=vt(h),f=t.normalizeIndentation(g),p=n.getLineContent(r.lineNumber),_=n.getLineFirstNonWhitespaceColumn(r.lineNumber)||r.column,v=p.substring(_-1,r.column-1),C=f+v+s,w=new L(r.lineNumber,1,r.lineNumber,r.column),y=new Un(w,C);return new wi(dT(C,e),[y],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(e,t,n,i,s,r){if(!i)return null;let a=null;for(const h of i)if(a===null)a=h.insertedText;else if(a!==h.insertedText)return null;if(!a||a.length!==1)return null;const l=a;let c=!1;for(const h of i)if(h.deletedText.length!==0){c=!0;break}if(c){if(!Ft._shouldSurroundChar(t,l)||!t.surroundingPairs.hasOwnProperty(l))return null;const h=Yl(l);for(const p of i)if(p.deletedSelectionStart!==0||p.deletedSelectionEnd!==p.deletedText.length||/^[ \t]+$/.test(p.deletedText)||h&&Yl(p.deletedText))return null;const g=[];for(const p of s){if(!p.isEmpty())return null;g.push(p.getPosition())}if(g.length!==i.length)return null;const f=[];for(let p=0,_=g.length;p<_;p++)f.push(new XH(g[p],i[p].deletedText,l));return new wi(4,f,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(t,n,s,r,l)){const h=s.map(g=>new Un(new L(g.positionLineNumber,g.positionColumn,g.positionLineNumber,g.positionColumn+1),"",!1));return new wi(4,h,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const d=this._getAutoClosingPairClose(t,n,s,l,!0);return d!==null?this._runAutoClosingOpenCharType(e,t,n,s,l,!0,d):null}static typeWithInterceptors(e,t,n,i,s,r,a){if(!e&&a===`
`){const d=[];for(let h=0,g=s.length;h<g;h++)d[h]=Ft._enter(n,i,!1,s[h]);return new wi(4,d,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoIndentType(n,i,s)){const d=[];let h=!1;for(let g=0,f=s.length;g<f;g++)if(d[g]=this._runAutoIndentType(n,i,s[g],a),!d[g]){h=!0;break}if(!h)return new wi(4,d,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(n,i,s,r,a))return this._runAutoClosingOvertype(t,n,i,s,a);if(!e){const d=this._getAutoClosingPairClose(n,i,s,a,!1);if(d)return this._runAutoClosingOpenCharType(t,n,i,s,a,!1,d)}if(!e&&this._isSurroundSelectionType(n,i,s,a))return this._runSurroundSelectionType(t,n,i,s,a);if(!e&&this._isTypeInterceptorElectricChar(n,i,s)){const d=this._typeInterceptorElectricChar(t,n,i,s[0],a);if(d)return d}const l=[];for(let d=0,h=s.length;d<h;d++)l[d]=new Un(s[d],a);const c=dT(a,t);return new wi(c,l,{shouldPushStackElementBefore:Qv(t,c),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(e,t,n,i,s){const r=[];for(let l=0,c=i.length;l<c;l++)r[l]=new Un(i[l],s);const a=dT(s,e);return new wi(a,r,{shouldPushStackElementBefore:Qv(e,a),shouldPushStackElementAfter:!1})}static lineInsertBefore(e,t,n){if(t===null||n===null)return[];const i=[];for(let s=0,r=n.length;s<r;s++){let a=n[s].positionLineNumber;if(a===1)i[s]=new um(new L(1,1,1,1),`
`);else{a--;const l=t.getLineMaxColumn(a);i[s]=this._enter(e,t,!1,new L(a,l,a,l))}}return i}static lineInsertAfter(e,t,n){if(t===null||n===null)return[];const i=[];for(let s=0,r=n.length;s<r;s++){const a=n[s].positionLineNumber,l=t.getLineMaxColumn(a);i[s]=this._enter(e,t,!1,new L(a,l,a,l))}return i}static lineBreakInsert(e,t,n){const i=[];for(let s=0,r=n.length;s<r;s++)i[s]=this._enter(e,t,!0,n[s]);return i}}u(Ft,"TypeOperations");class PA extends Rm{constructor(e,t,n,i){super(e,(n?t:"")+i,0,-i.length),this._openCharacter=t,this._closeCharacter=i,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return this.closeCharacterRange=new L(i.startLineNumber,i.endColumn-this._closeCharacter.length,i.endLineNumber,i.endColumn),this.enclosingRange=new L(i.startLineNumber,i.endColumn-this._openCharacter.length-this._closeCharacter.length,i.endLineNumber,i.endColumn),super.computeCursorState(e,t)}}u(PA,"TypeWithAutoClosingCommand");class JH{constructor(e,t,n,i,s,r){this.deletedText=e,this.deletedSelectionStart=t,this.deletedSelectionEnd=n,this.insertedText=i,this.insertedSelectionStart=s,this.insertedSelectionEnd=r}}u(JH,"CompositionOutcome");function dT(o,e){return o===" "?e===5||e===6?6:5:4}u(dT,"getTypingOperation");function Qv(o,e){return EP(o)&&!EP(e)?!0:o===5?!1:xP(o)!==xP(e)}u(Qv,"shouldPushStackElementBetween");function xP(o){return o===6||o===5?"space":o}u(xP,"normalizeOperationType");function EP(o){return o===4||o===5||o===6}u(EP,"isTypingOperation");var A;(function(o){o.editorSimpleInput=new ce("editorSimpleInput",!1,!0),o.editorTextFocus=new ce("editorTextFocus",!1,m("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),o.focus=new ce("editorFocus",!1,m("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),o.textInputFocus=new ce("textInputFocus",!1,m("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),o.readOnly=new ce("editorReadonly",!1,m("editorReadonly","Whether the editor is read only")),o.inDiffEditor=new ce("inDiffEditor",!1,m("inDiffEditor","Whether the context is a diff editor")),o.columnSelection=new ce("editorColumnSelection",!1,m("editorColumnSelection","Whether `editor.columnSelection` is enabled")),o.writable=o.readOnly.toNegated(),o.hasNonEmptySelection=new ce("editorHasSelection",!1,m("editorHasSelection","Whether the editor has text selected")),o.hasOnlyEmptySelection=o.hasNonEmptySelection.toNegated(),o.hasMultipleSelections=new ce("editorHasMultipleSelections",!1,m("editorHasMultipleSelections","Whether the editor has multiple selections")),o.hasSingleSelection=o.hasMultipleSelections.toNegated(),o.tabMovesFocus=new ce("editorTabMovesFocus",!1,m("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),o.tabDoesNotMoveFocus=o.tabMovesFocus.toNegated(),o.isInWalkThroughSnippet=new ce("isInEmbeddedEditor",!1,!0),o.canUndo=new ce("canUndo",!1,!0),o.canRedo=new ce("canRedo",!1,!0),o.hoverVisible=new ce("editorHoverVisible",!1,m("editorHoverVisible","Whether the editor hover is visible")),o.inCompositeEditor=new ce("inCompositeEditor",void 0,m("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),o.notInCompositeEditor=o.inCompositeEditor.toNegated(),o.languageId=new ce("editorLangId","",m("editorLangId","The language identifier of the editor")),o.hasCompletionItemProvider=new ce("editorHasCompletionItemProvider",!1,m("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),o.hasCodeActionsProvider=new ce("editorHasCodeActionsProvider",!1,m("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),o.hasCodeLensProvider=new ce("editorHasCodeLensProvider",!1,m("editorHasCodeLensProvider","Whether the editor has a code lens provider")),o.hasDefinitionProvider=new ce("editorHasDefinitionProvider",!1,m("editorHasDefinitionProvider","Whether the editor has a definition provider")),o.hasDeclarationProvider=new ce("editorHasDeclarationProvider",!1,m("editorHasDeclarationProvider","Whether the editor has a declaration provider")),o.hasImplementationProvider=new ce("editorHasImplementationProvider",!1,m("editorHasImplementationProvider","Whether the editor has an implementation provider")),o.hasTypeDefinitionProvider=new ce("editorHasTypeDefinitionProvider",!1,m("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),o.hasHoverProvider=new ce("editorHasHoverProvider",!1,m("editorHasHoverProvider","Whether the editor has a hover provider")),o.hasDocumentHighlightProvider=new ce("editorHasDocumentHighlightProvider",!1,m("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),o.hasDocumentSymbolProvider=new ce("editorHasDocumentSymbolProvider",!1,m("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),o.hasReferenceProvider=new ce("editorHasReferenceProvider",!1,m("editorHasReferenceProvider","Whether the editor has a reference provider")),o.hasRenameProvider=new ce("editorHasRenameProvider",!1,m("editorHasRenameProvider","Whether the editor has a rename provider")),o.hasSignatureHelpProvider=new ce("editorHasSignatureHelpProvider",!1,m("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),o.hasInlayHintsProvider=new ce("editorHasInlayHintsProvider",!1,m("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),o.hasDocumentFormattingProvider=new ce("editorHasDocumentFormattingProvider",!1,m("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),o.hasDocumentSelectionFormattingProvider=new ce("editorHasDocumentSelectionFormattingProvider",!1,m("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),o.hasMultipleDocumentFormattingProvider=new ce("editorHasMultipleDocumentFormattingProvider",!1,m("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),o.hasMultipleDocumentSelectionFormattingProvider=new ce("editorHasMultipleDocumentSelectionFormattingProvider",!1,m("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(A||(A={}));const at=0;class Xt extends Ln{runEditorCommand(e,t,n){const i=t._getViewModel();i&&this.runCoreEditorCommand(i,n||{})}}u(Xt,"CoreEditorCommand");var _1;(function(o){const e=u(function(n){if(!Ki(n))return!1;const i=n;return!(!qi(i.to)||!ss(i.by)&&!qi(i.by)||!ss(i.value)&&!Sc(i.value)||!ss(i.revealCursor)&&!PO(i.revealCursor))},"isEditorScrollArgs");o.description={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},o.RawDirection={Up:"up",Down:"down"},o.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor"};function t(n){let i;switch(n.to){case o.RawDirection.Up:i=1;break;case o.RawDirection.Down:i=2;break;default:return null}let s;switch(n.by){case o.RawUnit.Line:s=1;break;case o.RawUnit.WrappedLine:s=2;break;case o.RawUnit.Page:s=3;break;case o.RawUnit.HalfPage:s=4;break;case o.RawUnit.Editor:s=5;break;default:s=2}const r=Math.floor(n.value||1),a=!!n.revealCursor;return{direction:i,unit:s,value:r,revealCursor:a,select:!!n.select}}u(t,"parse"),o.parse=t})(_1||(_1={}));var fg;(function(o){const e=u(function(t){if(!Ki(t))return!1;const n=t;return!(!Sc(n.lineNumber)&&!qi(n.lineNumber)||!ss(n.at)&&!qi(n.at))},"isRevealLineArgs");o.description={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},o.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(fg||(fg={}));class v1{constructor(e){e.addImplementation(1e4,"code-editor",(t,n)=>{const i=t.get(dt).getFocusedCodeEditor();return i&&i.hasTextFocus()?this._runEditorCommand(t,i,n):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,n)=>{const i=document.activeElement;return i&&["input","textarea"].indexOf(i.tagName.toLowerCase())>=0?(this.runDOMCommand(),!0):!1}),e.addImplementation(0,"generic-dom",(t,n)=>{const i=t.get(dt).getActiveCodeEditor();return i?(i.focus(),this._runEditorCommand(t,i,n)):!1})}_runEditorCommand(e,t,n){const i=this.runEditorCommand(e,t,n);return i||!0}}u(v1,"EditorOrNativeTextInputCommand");var Nn;(function(o){class e extends Xt{constructor(w){super(w),this._minimalReveal=w.minimalReveal,this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,y){w.model.pushStackElement(),w.setCursorStates(y.source,3,[In.moveTo(w,w.getPrimaryCursorState(),this._inSelectionMode,y.position,y.viewPosition)])&&w.revealPrimaryCursor(y.source,!0,this._minimalReveal)}}u(e,"BaseMoveToCommand"),o.MoveTo=te(new e({id:"_moveTo",minimalReveal:!0,inSelectionMode:!1,precondition:void 0})),o.MoveToSelect=te(new e({id:"_moveToSelect",minimalReveal:!1,inSelectionMode:!0,precondition:void 0}));class t extends Xt{runCoreEditorCommand(w,y){w.model.pushStackElement();const S=this._getColumnSelectResult(w,w.getPrimaryCursorState(),w.getCursorColumnSelectData(),y);w.setCursorStates(y.source,3,S.viewStates.map(E=>Ke.fromViewState(E))),w.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:S.fromLineNumber,fromViewVisualColumn:S.fromVisualColumn,toViewLineNumber:S.toLineNumber,toViewVisualColumn:S.toVisualColumn}),S.reversed?w.revealTopMostCursor(y.source):w.revealBottomMostCursor(y.source)}}u(t,"ColumnSelectCommand"),o.ColumnSelect=te(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(C,w,y,S){const E=C.model.validatePosition(S.position),k=C.coordinatesConverter.validateViewPosition(new H(S.viewPosition.lineNumber,S.viewPosition.column),E),T=S.doColumnSelect?y.fromViewLineNumber:k.lineNumber,x=S.doColumnSelect?y.fromViewVisualColumn:S.mouseColumn-1;return ec.columnSelect(C.cursorConfig,C,T,x,k.lineNumber,S.mouseColumn-1)}}),o.CursorColumnSelectLeft=te(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(C,w,y,S){return ec.columnSelectLeft(C.cursorConfig,C,y)}}),o.CursorColumnSelectRight=te(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(C,w,y,S){return ec.columnSelectRight(C.cursorConfig,C,y)}});class n extends t{constructor(w){super(w),this._isPaged=w.isPaged}_getColumnSelectResult(w,y,S,E){return ec.columnSelectUp(w.cursorConfig,w,S,this._isPaged)}}u(n,"ColumnSelectUpCommand"),o.CursorColumnSelectUp=te(new n({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:3600,linux:{primary:0}}})),o.CursorColumnSelectPageUp=te(new n({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:3595,linux:{primary:0}}}));class i extends t{constructor(w){super(w),this._isPaged=w.isPaged}_getColumnSelectResult(w,y,S,E){return ec.columnSelectDown(w.cursorConfig,w,S,this._isPaged)}}u(i,"ColumnSelectDownCommand"),o.CursorColumnSelectDown=te(new i({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:3602,linux:{primary:0}}})),o.CursorColumnSelectPageDown=te(new i({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:3596,linux:{primary:0}}}));class s extends Xt{constructor(){super({id:"cursorMove",precondition:void 0,description:b1.description})}runCoreEditorCommand(w,y){const S=b1.parse(y);S&&this._runCursorMove(w,y.source,S)}_runCursorMove(w,y,S){w.model.pushStackElement(),w.setCursorStates(y,3,s._move(w,w.getCursorStates(),S)),w.revealPrimaryCursor(y,!0)}static _move(w,y,S){const E=S.select,k=S.value;switch(S.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return In.simpleMove(w,y,S.direction,E,k,S.unit);case 11:case 13:case 12:case 14:return In.viewportMove(w,y,S.direction,E,k);default:return null}}}u(s,"CursorMoveImpl"),o.CursorMoveImpl=s,o.CursorMove=te(new s);class r extends Xt{constructor(w){super(w),this._staticArgs=w.args}runCoreEditorCommand(w,y){let S=this._staticArgs;this._staticArgs.value===-1&&(S={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:y.pageSize||w.cursorConfig.pageSize}),w.model.pushStackElement(),w.setCursorStates(y.source,3,In.simpleMove(w,w.getCursorStates(),S.direction,S.select,S.value,S.unit)),w.revealPrimaryCursor(y.source,!0)}}u(r,"CursorMoveBasedCommand"),o.CursorLeft=te(new r({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),o.CursorLeftSelect=te(new r({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:1039}})),o.CursorRight=te(new r({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),o.CursorRightSelect=te(new r({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:1041}})),o.CursorUp=te(new r({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),o.CursorUpSelect=te(new r({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),o.CursorPageUp=te(new r({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:11}})),o.CursorPageUpSelect=te(new r({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:1035}})),o.CursorDown=te(new r({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),o.CursorDownSelect=te(new r({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),o.CursorPageDown=te(new r({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:12}})),o.CursorPageDownSelect=te(new r({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:1036}})),o.CreateCursor=te(new class extends Xt{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(C,w){let y;w.wholeLine?y=In.line(C,C.getPrimaryCursorState(),!1,w.position,w.viewPosition):y=In.moveTo(C,C.getPrimaryCursorState(),!1,w.position,w.viewPosition);const S=C.getCursorStates();if(S.length>1){const E=y.modelState?y.modelState.position:null,k=y.viewState?y.viewState.position:null;for(let T=0,x=S.length;T<x;T++){const M=S[T];if(!(E&&!M.modelState.selection.containsPosition(E))&&!(k&&!M.viewState.selection.containsPosition(k))){S.splice(T,1),C.model.pushStackElement(),C.setCursorStates(w.source,3,S);return}}}S.push(y),C.model.pushStackElement(),C.setCursorStates(w.source,3,S)}}),o.LastCursorMoveToSelect=te(new class extends Xt{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(C,w){const y=C.getLastAddedCursorIndex(),S=C.getCursorStates(),E=S.slice(0);E[y]=In.moveTo(C,S[y],!0,w.position,w.viewPosition),C.model.pushStackElement(),C.setCursorStates(w.source,3,E)}});class a extends Xt{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,y){w.model.pushStackElement(),w.setCursorStates(y.source,3,In.moveToBeginningOfLine(w,w.getCursorStates(),this._inSelectionMode)),w.revealPrimaryCursor(y.source,!0)}}u(a,"HomeCommand"),o.CursorHome=te(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),o.CursorHomeSelect=te(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class l extends Xt{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,y){w.model.pushStackElement(),w.setCursorStates(y.source,3,this._exec(w.getCursorStates())),w.revealPrimaryCursor(y.source,!0)}_exec(w){const y=[];for(let S=0,E=w.length;S<E;S++){const k=w[S],T=k.modelState.position.lineNumber;y[S]=Ke.fromModelState(k.modelState.move(this._inSelectionMode,T,1,0))}return y}}u(l,"LineStartCommand"),o.CursorLineStart=te(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:0,mac:{primary:287}}})),o.CursorLineStartSelect=te(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:0,mac:{primary:1311}}}));class c extends Xt{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,y){w.model.pushStackElement(),w.setCursorStates(y.source,3,In.moveToEndOfLine(w,w.getCursorStates(),this._inSelectionMode,y.sticky||!1)),w.revealPrimaryCursor(y.source,!0)}}u(c,"EndCommand"),o.CursorEnd=te(new c({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:at,kbExpr:A.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},description:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:m("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),o.CursorEndSelect=te(new c({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:at,kbExpr:A.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},description:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:m("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class d extends Xt{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,y){w.model.pushStackElement(),w.setCursorStates(y.source,3,this._exec(w,w.getCursorStates())),w.revealPrimaryCursor(y.source,!0)}_exec(w,y){const S=[];for(let E=0,k=y.length;E<k;E++){const T=y[E],x=T.modelState.position.lineNumber,M=w.model.getLineMaxColumn(x);S[E]=Ke.fromModelState(T.modelState.move(this._inSelectionMode,x,M,0))}return S}}u(d,"LineEndCommand"),o.CursorLineEnd=te(new d({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:0,mac:{primary:291}}})),o.CursorLineEndSelect=te(new d({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:0,mac:{primary:1315}}}));class h extends Xt{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,y){w.model.pushStackElement(),w.setCursorStates(y.source,3,In.moveToBeginningOfBuffer(w,w.getCursorStates(),this._inSelectionMode)),w.revealPrimaryCursor(y.source,!0)}}u(h,"TopCommand"),o.CursorTop=te(new h({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:2062,mac:{primary:2064}}})),o.CursorTopSelect=te(new h({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:3086,mac:{primary:3088}}}));class g extends Xt{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,y){w.model.pushStackElement(),w.setCursorStates(y.source,3,In.moveToEndOfBuffer(w,w.getCursorStates(),this._inSelectionMode)),w.revealPrimaryCursor(y.source,!0)}}u(g,"BottomCommand"),o.CursorBottom=te(new g({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:2061,mac:{primary:2066}}})),o.CursorBottomSelect=te(new g({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:3085,mac:{primary:3090}}}));class f extends Xt{constructor(){super({id:"editorScroll",precondition:void 0,description:_1.description})}runCoreEditorCommand(w,y){const S=_1.parse(y);S&&this._runEditorScroll(w,y.source,S)}_runEditorScroll(w,y,S){const E=this._computeDesiredScrollTop(w,S);if(S.revealCursor){const k=w.getCompletelyVisibleViewRangeAtScrollTop(E);w.setCursorStates(y,3,[In.findPositionInViewportIfOutside(w,w.getPrimaryCursorState(),k,S.select)])}w.viewLayout.setScrollPosition({scrollTop:E},0)}_computeDesiredScrollTop(w,y){if(y.unit===1){const k=w.getCompletelyVisibleViewRange(),T=w.coordinatesConverter.convertViewRangeToModelRange(k);let x;y.direction===1?x=Math.max(1,T.startLineNumber-y.value):x=Math.min(w.model.getLineCount(),T.startLineNumber+y.value);const M=w.coordinatesConverter.convertModelPositionToViewPosition(new H(x,1));return w.viewLayout.getVerticalOffsetForLineNumber(M.lineNumber)}if(y.unit===5){let k=0;return y.direction===2&&(k=w.model.getLineCount()-w.cursorConfig.pageSize),w.viewLayout.getVerticalOffsetForLineNumber(k)}let S;y.unit===3?S=w.cursorConfig.pageSize*y.value:y.unit===4?S=Math.round(w.cursorConfig.pageSize/2)*y.value:S=y.value;const E=(y.direction===1?-1:1)*S;return w.viewLayout.getCurrentScrollTop()+E*w.cursorConfig.lineHeight}}u(f,"EditorScrollImpl"),o.EditorScrollImpl=f,o.EditorScroll=te(new f),o.ScrollLineUp=te(new class extends Xt{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(C,w){o.EditorScroll._runEditorScroll(C,w.source,{direction:1,unit:2,value:1,revealCursor:!1,select:!1})}}),o.ScrollPageUp=te(new class extends Xt{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(C,w){o.EditorScroll._runEditorScroll(C,w.source,{direction:1,unit:3,value:1,revealCursor:!1,select:!1})}}),o.ScrollEditorTop=te(new class extends Xt{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus}})}runCoreEditorCommand(C,w){o.EditorScroll._runEditorScroll(C,w.source,{direction:1,unit:5,value:1,revealCursor:!1,select:!1})}}),o.ScrollLineDown=te(new class extends Xt{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(C,w){o.EditorScroll._runEditorScroll(C,w.source,{direction:2,unit:2,value:1,revealCursor:!1,select:!1})}}),o.ScrollPageDown=te(new class extends Xt{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(C,w){o.EditorScroll._runEditorScroll(C,w.source,{direction:2,unit:3,value:1,revealCursor:!1,select:!1})}}),o.ScrollEditorBottom=te(new class extends Xt{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus}})}runCoreEditorCommand(C,w){o.EditorScroll._runEditorScroll(C,w.source,{direction:2,unit:5,value:1,revealCursor:!1,select:!1})}});class p extends Xt{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,y){w.model.pushStackElement(),w.setCursorStates(y.source,3,[In.word(w,w.getPrimaryCursorState(),this._inSelectionMode,y.position)]),w.revealPrimaryCursor(y.source,!0)}}u(p,"WordCommand"),o.WordSelect=te(new p({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),o.WordSelectDrag=te(new p({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),o.LastCursorWordSelect=te(new class extends Xt{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(C,w){const y=C.getLastAddedCursorIndex(),S=C.getCursorStates(),E=S.slice(0),k=S[y];E[y]=In.word(C,k,k.modelState.hasSelection(),w.position),C.model.pushStackElement(),C.setCursorStates(w.source,3,E)}});class _ extends Xt{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,y){w.model.pushStackElement(),w.setCursorStates(y.source,3,[In.line(w,w.getPrimaryCursorState(),this._inSelectionMode,y.position,y.viewPosition)]),w.revealPrimaryCursor(y.source,!1)}}u(_,"LineCommand"),o.LineSelect=te(new _({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),o.LineSelectDrag=te(new _({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class v extends Xt{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,y){const S=w.getLastAddedCursorIndex(),E=w.getCursorStates(),k=E.slice(0);k[S]=In.line(w,E[S],this._inSelectionMode,y.position,y.viewPosition),w.model.pushStackElement(),w.setCursorStates(y.source,3,k)}}u(v,"LastCursorLineCommand"),o.LastCursorLineSelect=te(new v({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),o.LastCursorLineSelectDrag=te(new v({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),o.CancelSelection=te(new class extends Xt{constructor(){super({id:"cancelSelection",precondition:A.hasNonEmptySelection,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(C,w){C.model.pushStackElement(),C.setCursorStates(w.source,3,[In.cancelSelection(C,C.getPrimaryCursorState())]),C.revealPrimaryCursor(w.source,!0)}}),o.RemoveSecondaryCursors=te(new class extends Xt{constructor(){super({id:"removeSecondaryCursors",precondition:A.hasMultipleSelections,kbOpts:{weight:at+1,kbExpr:A.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(C,w){C.model.pushStackElement(),C.setCursorStates(w.source,3,[C.getPrimaryCursorState()]),C.revealPrimaryCursor(w.source,!0),o1(m("removedCursor","Removed secondary cursors"))}}),o.RevealLine=te(new class extends Xt{constructor(){super({id:"revealLine",precondition:void 0,description:fg.description})}runCoreEditorCommand(C,w){const y=w,S=y.lineNumber||0;let E=typeof S=="number"?S+1:parseInt(S)+1;E<1&&(E=1);const k=C.model.getLineCount();E>k&&(E=k);const T=new L(E,1,E,C.model.getLineMaxColumn(E));let x=0;if(y.at)switch(y.at){case fg.RawAtArgument.Top:x=3;break;case fg.RawAtArgument.Center:x=1;break;case fg.RawAtArgument.Bottom:x=4;break}const M=C.coordinatesConverter.convertModelRangeToViewRange(T);C.revealRange(w.source,!1,M,x,0)}}),o.SelectAll=new class extends v1{constructor(){super(jX)}runDOMCommand(){Is&&(document.activeElement.focus(),document.activeElement.select()),document.execCommand("selectAll")}runEditorCommand(C,w,y){const S=w._getViewModel();S&&this.runCoreEditorCommand(S,y)}runCoreEditorCommand(C,w){C.model.pushStackElement(),C.setCursorStates("keyboard",3,[In.selectAll(C,C.getPrimaryCursorState())])}},o.SetSelection=te(new class extends Xt{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(C,w){C.model.pushStackElement(),C.setCursorStates(w.source,3,[Ke.fromModelSelection(w.selection)])}})})(Nn||(Nn={}));const yQ=oe.and(A.textInputFocus,A.columnSelection);function rp(o,e){gs.registerKeybindingRule({id:o,primary:e,when:yQ,weight:at+1})}u(rp,"registerColumnSelection");rp(Nn.CursorColumnSelectLeft.id,1039);rp(Nn.CursorColumnSelectRight.id,1041);rp(Nn.CursorColumnSelectUp.id,1040);rp(Nn.CursorColumnSelectPageUp.id,1035);rp(Nn.CursorColumnSelectDown.id,1042);rp(Nn.CursorColumnSelectPageDown.id,1036);function kP(o){return o.register(),o}u(kP,"registerCommand$2");var Ig;(function(o){class e extends Ln{runEditorCommand(n,i,s){const r=i._getViewModel();r&&this.runCoreEditingCommand(i,r,s||{})}}u(e,"CoreEditingCommand"),o.CoreEditingCommand=e,o.LineBreakInsert=te(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:A.writable,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,n,i){t.pushUndoStop(),t.executeCommands(this.id,Ft.lineBreakInsert(n.cursorConfig,n.model,n.getCursorStates().map(s=>s.modelState.selection)))}}),o.Outdent=te(new class extends e{constructor(){super({id:"outdent",precondition:A.writable,kbOpts:{weight:at,kbExpr:oe.and(A.editorTextFocus,A.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,n,i){t.pushUndoStop(),t.executeCommands(this.id,Ft.outdent(n.cursorConfig,n.model,n.getCursorStates().map(s=>s.modelState.selection))),t.pushUndoStop()}}),o.Tab=te(new class extends e{constructor(){super({id:"tab",precondition:A.writable,kbOpts:{weight:at,kbExpr:oe.and(A.editorTextFocus,A.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,n,i){t.pushUndoStop(),t.executeCommands(this.id,Ft.tab(n.cursorConfig,n.model,n.getCursorStates().map(s=>s.modelState.selection))),t.pushUndoStop()}}),o.DeleteLeft=te(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,n,i){const[s,r]=Ic.deleteLeft(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection),n.getCursorAutoClosedCharacters());s&&t.pushUndoStop(),t.executeCommands(this.id,r),n.setPrevEditOperationType(2)}}),o.DeleteRight=te(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:at,kbExpr:A.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,n,i){const[s,r]=Ic.deleteRight(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection));s&&t.pushUndoStop(),t.executeCommands(this.id,r),n.setPrevEditOperationType(3)}}),o.Undo=new class extends v1{constructor(){super(qV)}runDOMCommand(){document.execCommand("undo")}runEditorCommand(t,n,i){if(!(!n.hasModel()||n.getOption(83)===!0))return n.getModel().undo()}},o.Redo=new class extends v1{constructor(){super(YV)}runDOMCommand(){document.execCommand("redo")}runEditorCommand(t,n,i){if(!(!n.hasModel()||n.getOption(83)===!0))return n.getModel().redo()}}})(Ig||(Ig={}));class aE extends P_{constructor(e,t,n){super({id:e,precondition:void 0,description:n}),this._handlerId=t}runCommand(e,t){const n=e.get(dt).getFocusedCodeEditor();n&&n.trigger("keyboard",this._handlerId,t)}}u(aE,"EditorHandlerCommand");function hh(o,e){kP(new aE("default:"+o,o)),kP(new aE(o,o,e))}u(hh,"registerOverwritableCommand");hh("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});hh("replacePreviousChar");hh("compositionType");hh("compositionStart");hh("compositionEnd");hh("paste");hh("cut");class QH{constructor(e,t,n,i){this.configuration=e,this.viewModel=t,this.userInputEvents=n,this.commandDelegate=i}paste(e,t,n,i){this.commandDelegate.paste(e,t,n,i)}type(e){this.commandDelegate.type(e)}compositionType(e,t,n,i){this.commandDelegate.compositionType(e,t,n,i)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){Nn.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new H(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(72)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(72)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,n=hi&&t.get(98),i=t.get(18);e.middleButton&&!n?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position):this._lastCursorLineSelect(e.position):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount===2?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position):e.inSelectionMode?this._wordSelectDrag(e.position):this._wordSelect(e.position)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):i?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position):this.moveTo(e.position)}_usualArgs(e){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e}}moveTo(e){Nn.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_moveToSelect(e){Nn.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_columnSelect(e,t,n){e=this._validateViewColumn(e),Nn.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:n})}_createCursor(e,t){e=this._validateViewColumn(e),Nn.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e){Nn.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelect(e){Nn.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelectDrag(e){Nn.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorWordSelect(e){Nn.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelect(e){Nn.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelectDrag(e){Nn.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelect(e){Nn.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelectDrag(e){Nn.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_selectAll(){Nn.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}u(QH,"ViewController");class U_{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){var t;(t=this.onKeyDown)===null||t===void 0||t.call(this,e)}emitKeyUp(e){var t;(t=this.onKeyUp)===null||t===void 0||t.call(this,e)}emitContextMenu(e){var t;(t=this.onContextMenu)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseMove(e){var t;(t=this.onMouseMove)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){var t;(t=this.onMouseLeave)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDown(e){var t;(t=this.onMouseDown)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseUp(e){var t;(t=this.onMouseUp)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){var t;(t=this.onMouseDrag)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){var t;(t=this.onMouseDrop)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){var e;(e=this.onMouseDropCanceled)===null||e===void 0||e.call(this)}emitMouseWheel(e){var t;(t=this.onMouseWheel)===null||t===void 0||t.call(this,e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return U_.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){const n=Object.assign({},e);return n.position&&(n.position=t.convertViewPositionToModelPosition(n.position)),n.range&&(n.range=t.convertViewRangeToModelRange(n.range)),n}}u(U_,"ViewUserInputEvents");var uT;class RA{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Error("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const n=this.getStartLineNumber(),i=this.getEndLineNumber();if(t<n){const l=t-e+1;return this._rendLineNumberStart-=l,null}if(e>i)return null;let s=0,r=0;for(let l=n;l<=i;l++){const c=l-this._rendLineNumberStart;e<=l&&l<=t&&(r===0?(s=c,r=1):r++)}if(e<n){let l=0;t<n?l=t-e+1:l=n-e,this._rendLineNumberStart-=l}return this._lines.splice(s,r)}onLinesChanged(e,t){const n=e+t-1;if(this.getCount()===0)return!1;const i=this.getStartLineNumber(),s=this.getEndLineNumber();let r=!1;for(let a=e;a<=n;a++)a>=i&&a<=s&&(this._lines[a-this._rendLineNumberStart].onContentChanged(),r=!0);return r}onLinesInserted(e,t){if(this.getCount()===0)return null;const n=t-e+1,i=this.getStartLineNumber(),s=this.getEndLineNumber();if(e<=i)return this._rendLineNumberStart+=n,null;if(e>s)return null;if(n+e>s)return this._lines.splice(e-this._rendLineNumberStart,s-e+1);const r=[];for(let h=0;h<n;h++)r[h]=this._createLine();const a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),c=this._lines.slice(a,this._lines.length-n),d=this._lines.slice(this._lines.length-n,this._lines.length);return this._lines=l.concat(r).concat(c),d}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),n=this.getEndLineNumber();let i=!1;for(let s=0,r=e.length;s<r;s++){const a=e[s];if(a.toLineNumber<t||a.fromLineNumber>n)continue;const l=Math.max(t,a.fromLineNumber),c=Math.min(n,a.toLineNumber);for(let d=l;d<=c;d++){const h=d-this._rendLineNumberStart;this._lines[h].onTokensChanged(),i=!0}}return i}}u(RA,"RenderedLinesCollection");class FA{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new RA(()=>this._host.createVisibleLine())}_createDomNode(){const e=et(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(133)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,i=t.length;n<i;n++){const s=t[n].getDomNode();s&&this.domNode.domNode.removeChild(s)}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,i=t.length;n<i;n++){const s=t[n].getDomNode();s&&this.domNode.domNode.removeChild(s)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),n=new zr(this.domNode.domNode,this._host,e),i={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},s=n.render(i,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(s.rendLineNumberStart,s.lines)}}u(FA,"VisibleLinesCollection");class zr{constructor(e,t,n){this.domNode=e,this.host=t,this.viewportData=n}render(e,t,n,i){const s={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(s.rendLineNumberStart+s.linesLength-1<t||n<s.rendLineNumberStart){s.rendLineNumberStart=t,s.linesLength=n-t+1,s.lines=[];for(let r=t;r<=n;r++)s.lines[r-t]=this.host.createVisibleLine();return this._finishRendering(s,!0,i),s}if(this._renderUntouchedLines(s,Math.max(t-s.rendLineNumberStart,0),Math.min(n-s.rendLineNumberStart,s.linesLength-1),i,t),s.rendLineNumberStart>t){const r=t,a=Math.min(n,s.rendLineNumberStart-1);r<=a&&(this._insertLinesBefore(s,r,a,i,t),s.linesLength+=a-r+1)}else if(s.rendLineNumberStart<t){const r=Math.min(s.linesLength,t-s.rendLineNumberStart);r>0&&(this._removeLinesBefore(s,r),s.linesLength-=r)}if(s.rendLineNumberStart=t,s.rendLineNumberStart+s.linesLength-1<n){const r=s.rendLineNumberStart+s.linesLength,a=n;r<=a&&(this._insertLinesAfter(s,r,a,i,t),s.linesLength+=a-r+1)}else if(s.rendLineNumberStart+s.linesLength-1>n){const r=Math.max(0,n-s.rendLineNumberStart+1),l=s.linesLength-1-r+1;l>0&&(this._removeLinesAfter(s,l),s.linesLength-=l)}return this._finishRendering(s,!1,i),s}_renderUntouchedLines(e,t,n,i,s){const r=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=n;l++){const c=r+l;a[l].layoutLine(c,i[c-s])}}_insertLinesBefore(e,t,n,i,s){const r=[];let a=0;for(let l=t;l<=n;l++)r[a++]=this.host.createVisibleLine();e.lines=r.concat(e.lines)}_removeLinesBefore(e,t){for(let n=0;n<t;n++){const i=e.lines[n].getDomNode();i&&this.domNode.removeChild(i)}e.lines.splice(0,t)}_insertLinesAfter(e,t,n,i,s){const r=[];let a=0;for(let l=t;l<=n;l++)r[a++]=this.host.createVisibleLine();e.lines=e.lines.concat(r)}_removeLinesAfter(e,t){const n=e.linesLength-t;for(let i=0;i<t;i++){const s=e.lines[n+i].getDomNode();s&&this.domNode.removeChild(s)}e.lines.splice(n,t)}_finishRenderingNewLines(e,t,n,i){zr._ttPolicy&&(n=zr._ttPolicy.createHTML(n));const s=this.domNode.lastChild;t||!s?this.domNode.innerHTML=n:s.insertAdjacentHTML("afterend",n);let r=this.domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const l=e.lines[a];i[a]&&(l.setDomNode(r),r=r.previousSibling)}}_finishRenderingInvalidLines(e,t,n){const i=document.createElement("div");zr._ttPolicy&&(t=zr._ttPolicy.createHTML(t)),i.innerHTML=t;for(let s=0;s<e.linesLength;s++){const r=e.lines[s];if(n[s]){const a=i.firstChild,l=r.getDomNode();l.parentNode.replaceChild(a,l),r.setDomNode(a)}}}_finishRendering(e,t,n){const i=zr._sb,s=e.linesLength,r=e.lines,a=e.rendLineNumberStart,l=[];{i.reset();let c=!1;for(let d=0;d<s;d++){const h=r[d];l[d]=!1,!(h.getDomNode()||!h.renderLine(d+a,n[d],this.viewportData,i))&&(l[d]=!0,c=!0)}c&&this._finishRenderingNewLines(e,t,i.build(),l)}{i.reset();let c=!1;const d=[];for(let h=0;h<s;h++){const g=r[h];d[h]=!1,!(l[h]||!g.renderLine(h+a,n[h],this.viewportData,i))&&(d[h]=!0,c=!0)}c&&this._finishRenderingInvalidLines(e,i.build(),d)}}}u(zr,"ViewLayerRenderer");zr._ttPolicy=(uT=window.trustedTypes)===null||uT===void 0?void 0:uT.createPolicy("editorViewLayer",{createHTML:o=>o});zr._sb=Lc(1e5);class OA extends fs{constructor(e){super(e),this._visibleLines=new FA(this),this.domNode=this._visibleLines.domNode,this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new e3(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let i=t;i<=n;i++)this._visibleLines.getVisibleLine(i).onConfigurationChanged(e);return!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(n=>n.shouldRender());for(let n=0,i=t.length;n<i;n++){const s=t[n];s.prepareRender(e),s.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}u(OA,"ViewOverlays");class e3{constructor(e,t){this._configuration=e,this._lineHeight=this._configuration.options.get(61),this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=et(e)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(e){this._lineHeight=this._configuration.options.get(61)}renderLine(e,t,n,i){let s="";for(let r=0,a=this._dynamicOverlays.length;r<a;r++){const l=this._dynamicOverlays[r];s+=l.render(n.startLineNumber,e)}return this._renderedContent===s?!1:(this._renderedContent=s,i.appendASCIIString('<div style="position:absolute;top:'),i.appendASCIIString(String(t)),i.appendASCIIString("px;width:100%;height:"),i.appendASCIIString(String(this._lineHeight)),i.appendASCIIString('px;">'),i.appendASCIIString(s),i.appendASCIIString("</div>"),!0)}layoutLine(e,t){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(this._lineHeight))}}u(e3,"ViewOverlayLine");class t3 extends OA{constructor(e){super(e);const n=this._context.configuration.options.get(133);this._contentWidth=n.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const n=this._context.configuration.options.get(133);return this._contentWidth=n.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}u(t3,"ContentViewOverlays");class n3 extends OA{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(133);this._contentLeft=n.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),di(this.domNode,t.get(46))}onConfigurationChanged(e){const t=this._context.configuration.options;di(this.domNode,t.get(46));const n=t.get(133);return this._contentLeft=n.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}u(n3,"MarginViewOverlays");class Zh{constructor(e,t){this._coordinateBrand=void 0,this.top=e,this.left=t}}u(Zh,"Coordinate");class i3 extends fs{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=et(document.createElement("div")),_r.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=et(document.createElement("div")),_r.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onLineMappingChanged(e);return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}addWidget(e){const t=new SQ(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,n,i){this._widgets[e.getId()].setPosition(t,n,i),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const n=this._widgets[t];delete this._widgets[t];const i=n.domNode.domNode;i.parentNode.removeChild(i),i.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].render(e)}}u(i3,"ViewContentWidgets");let SQ=u(class{constructor(e,t,n){this._context=e,this._viewDomNode=t,this._actual=n,this.domNode=et(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const i=this._context.configuration.options,s=i.get(133);this._fixedOverflowWidgets=i.get(38),this._contentWidth=s.contentWidth,this._contentLeft=s.contentLeft,this._lineHeight=i.get(61),this._range=null,this._viewRange=null,this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(61),e.hasChanged(133)){const n=t.get(133);this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._maxWidth=this._getMaxWidth()}}onLineMappingChanged(e){this._setPosition(this._range,this._affinity)}_setPosition(e,t){var n;if(this._range=e,this._viewRange=null,this._affinity=t,this._range){const i=this._context.viewModel.model.validateRange(this._range);(this._context.viewModel.coordinatesConverter.modelPositionIsVisible(i.getStartPosition())||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(i.getEndPosition()))&&(this._viewRange=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(i,(n=this._affinity)!==null&&n!==void 0?n:void 0))}}_getMaxWidth(){return this.allowEditorOverflow?window.innerWidth||document.documentElement.offsetWidth||document.body.offsetWidth:this._contentWidth}setPosition(e,t,n){this._setPosition(e,n),this._preference=t,this._viewRange&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(e,t,n,i,s){const r=e.top,a=r,l=t.top+this._lineHeight,c=s.viewportHeight-l,d=r-i,h=a>=i,g=l,f=c>=i;let p=e.left,_=t.left;return p+n>s.scrollLeft+s.viewportWidth&&(p=s.scrollLeft+s.viewportWidth-n),_+n>s.scrollLeft+s.viewportWidth&&(_=s.scrollLeft+s.viewportWidth-n),p<s.scrollLeft&&(p=s.scrollLeft),_<s.scrollLeft&&(_=s.scrollLeft),{fitsAbove:h,aboveTop:d,aboveLeft:p,fitsBelow:f,belowTop:g,belowLeft:_}}_layoutHorizontalSegmentInPage(e,t,n,i){const s=Math.max(0,t.left-i),r=Math.min(t.left+t.width+i,e.width);let a=t.left+n-al.scrollX;if(a+i>r){const l=a-(r-i);a-=l,n-=l}if(a<s){const l=a-s;a-=l,n-=l}return[n,a]}_layoutBoxInPage(e,t,n,i,s){const r=e.top-i,a=t.top+this._lineHeight,l=li(this._viewDomNode.domNode),c=l.top+r-al.scrollY,d=l.top+a-al.scrollY,h=Xw(document.body),[g,f]=this._layoutHorizontalSegmentInPage(h,l,e.left-s.scrollLeft+this._contentLeft,n),[p,_]=this._layoutHorizontalSegmentInPage(h,l,t.left-s.scrollLeft+this._contentLeft,n),v=22,C=22,w=c>=v,y=d+i<=h.height-C;return this._fixedOverflowWidgets?{fitsAbove:w,aboveTop:Math.max(c,v),aboveLeft:f,fitsBelow:y,belowTop:d,belowLeft:_}:{fitsAbove:w,aboveTop:r,aboveLeft:g,fitsBelow:y,belowTop:a,belowLeft:p}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new Zh(e.top,e.left+this._contentLeft)}_getTopAndBottomLeft(e){if(!this._viewRange)return[null,null];const t=e.linesVisibleRangesForRange(this._viewRange,!1);if(!t||t.length===0)return[null,null];let n=t[0],i=t[0];for(const h of t)h.lineNumber<n.lineNumber&&(n=h),h.lineNumber>i.lineNumber&&(i=h);let s=1073741824;for(const h of n.ranges)h.left<s&&(s=h.left);let r=1073741824;for(const h of i.ranges)h.left<r&&(r=h.left);const a=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.scrollTop,l=new Zh(a,s),c=e.getVerticalOffsetForLineNumber(i.lineNumber)-e.scrollTop,d=new Zh(c,r);return[l,d]}_prepareRenderWidget(e){if(!this._preference||this._preference.length===0)return null;const[t,n]=this._getTopAndBottomLeft(e);if(!t||!n)return null;if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){let s=null;if(typeof this._actual.beforeRender=="function"&&(s=hT(this._actual.beforeRender,this._actual)),s)this._cachedDomNodeOffsetWidth=s.width,this._cachedDomNodeOffsetHeight=s.height;else{const a=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(a.width),this._cachedDomNodeOffsetHeight=Math.round(a.height)}}let i;this.allowEditorOverflow?i=this._layoutBoxInPage(t,n,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):i=this._layoutBoxInViewport(t,n,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(let s=1;s<=2;s++)for(const r of this._preference)if(r===1){if(!i)return null;if(s===2||i.fitsAbove)return{coordinate:new Zh(i.aboveTop,i.aboveLeft),position:1}}else if(r===2){if(!i)return null;if(s===2||i.fitsBelow)return{coordinate:new Zh(i.belowTop,i.belowLeft),position:2}}else return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(t),position:0}:{coordinate:t,position:0};return null}onBeforeRender(e){!this._viewRange||!this._preference||this._viewRange.endLineNumber<e.startLineNumber||this._viewRange.startLineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&hT(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&hT(this._actual.afterRender,this._actual,this._renderData.position)}},"Widget");function hT(o,e,...t){try{return o.call(e,...t)}catch{return null}}u(hT,"safeInvoke");class VA extends uh{constructor(e){super(),this._context=e;const t=this._context.configuration.options,n=t.get(133);this._lineHeight=t.get(61),this._renderLineHighlight=t.get(87),this._renderLineHighlightOnlyWhenFocus=t.get(88),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new re(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=this._selections.map(i=>i.positionLineNumber);t.sort((i,s)=>i-s),Ds(this._cursorLineNumbers,t)||(this._cursorLineNumbers=t,e=!0);const n=this._selections.every(i=>i.isEmpty());return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(133);return this._lineHeight=t.get(61),this._renderLineHighlight=t.get(87),this._renderLineHighlightOnlyWhenFocus=t.get(88),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=this._renderOne(e),n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s=this._cursorLineNumbers.length;let r=0;const a=[];for(let l=n;l<=i;l++){const c=l-n;for(;r<s&&this._cursorLineNumbers[r]<l;)r++;r<s&&this._cursorLineNumbers[r]===l?a[c]=t:a[c]=""}this._renderData=a}render(e,t){if(!this._renderData)return"";const n=t-e;return n>=this._renderData.length?"":this._renderData[n]}_shouldRenderInMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}u(VA,"AbstractLineHighlightOverlay");class s3 extends VA{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderOther()?" current-line-both":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}}u(s3,"CurrentLineHighlightOverlay");class o3 extends VA{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")}" style="width:${this._contentLeft}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}}u(o3,"CurrentLineMarginHighlightOverlay");At((o,e)=>{const t=o.getColor(PH);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||o.defines(LP)){const n=o.getColor(LP);n&&(e.addRule(`.monaco-editor .view-overlays .current-line { border: 2px solid ${n}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid ${n}; }`),ui(o.type)&&(e.addRule(".monaco-editor .view-overlays .current-line { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }")))}});class r3 extends uh{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(61),this._typicalHalfwidthCharacterWidth=t.get(46).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(61),this._typicalHalfwidthCharacterWidth=t.get(46).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let n=[],i=0;for(let l=0,c=t.length;l<c;l++){const d=t[l];d.options.className&&(n[i++]=d)}n=n.sort((l,c)=>{if(l.options.zIndex<c.options.zIndex)return-1;if(l.options.zIndex>c.options.zIndex)return 1;const d=l.options.className,h=c.options.className;return d<h?-1:d>h?1:L.compareRangesUsingStarts(l.range,c.range)});const s=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,a=[];for(let l=s;l<=r;l++){const c=l-s;a[c]=""}this._renderWholeLineDecorations(e,n,a),this._renderNormalDecorations(e,n,a),this._renderResult=a}_renderWholeLineDecorations(e,t,n){const i=String(this._lineHeight),s=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber;for(let a=0,l=t.length;a<l;a++){const c=t[a];if(!c.options.isWholeLine)continue;const d='<div class="cdr '+c.options.className+'" style="left:0;width:100%;height:'+i+'px;"></div>',h=Math.max(c.range.startLineNumber,s),g=Math.min(c.range.endLineNumber,r);for(let f=h;f<=g;f++){const p=f-s;n[p]+=d}}}_renderNormalDecorations(e,t,n){const i=String(this._lineHeight),s=e.visibleRange.startLineNumber;let r=null,a=!1,l=null;for(let c=0,d=t.length;c<d;c++){const h=t[c];if(h.options.isWholeLine)continue;const g=h.options.className,f=Boolean(h.options.showIfCollapsed);let p=h.range;if(f&&p.endColumn===1&&p.endLineNumber!==p.startLineNumber&&(p=new L(p.startLineNumber,p.startColumn,p.endLineNumber-1,this._context.viewModel.getLineMaxColumn(p.endLineNumber-1))),r===g&&a===f&&L.areIntersectingOrTouching(l,p)){l=L.plusRange(l,p);continue}r!==null&&this._renderNormalDecoration(e,l,r,a,i,s,n),r=g,a=f,l=p}r!==null&&this._renderNormalDecoration(e,l,r,a,i,s,n)}_renderNormalDecoration(e,t,n,i,s,r,a){const l=e.linesVisibleRangesForRange(t,n==="findMatch");if(l)for(let c=0,d=l.length;c<d;c++){const h=l[c];if(h.outsideRenderedLine)continue;const g=h.lineNumber-r;if(i&&h.ranges.length===1){const f=h.ranges[0];if(f.width<this._typicalHalfwidthCharacterWidth){const p=Math.round(f.left+f.width/2),_=Math.max(0,Math.round(p-this._typicalHalfwidthCharacterWidth/2));h.ranges[0]=new O_(_,this._typicalHalfwidthCharacterWidth)}}for(let f=0,p=h.ranges.length;f<p;f++){const _=h.ranges[f],v='<div class="cdr '+n+'" style="left:'+String(_.left)+"px;width:"+String(_.width)+"px;height:"+s+'px;"></div>';a[g]+=v}}}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}u(r3,"DecorationsOverlay");class lo extends U{onclick(e,t){this._register(Y(e,le.CLICK,n=>t(new sr(n))))}onmousedown(e,t){this._register(Y(e,le.MOUSE_DOWN,n=>t(new sr(n))))}onmouseover(e,t){this._register(Y(e,le.MOUSE_OVER,n=>t(new sr(n))))}onmouseleave(e,t){this._register(Y(e,le.MOUSE_LEAVE,n=>t(new sr(n))))}onkeydown(e,t){this._register(Y(e,le.KEY_DOWN,n=>t(new Pt(n))))}onkeyup(e,t){this._register(Y(e,le.KEY_UP,n=>t(new Pt(n))))}oninput(e,t){this._register(Y(e,le.INPUT,t))}onblur(e,t){this._register(Y(e,le.BLUR,t))}onfocus(e,t){this._register(Y(e,le.FOCUS,t))}ignoreGesture(e){gt.ignoreTarget(e)}}u(lo,"Widget");const df=11;class a3 extends lo{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...e.icon.classNamesArray),this.domNode.style.position="absolute",this.domNode.style.width=df+"px",this.domNode.style.height=df+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new ch),this._register(Dn(this.bgDomNode,le.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(Dn(this.domNode,le.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new tp),this._pointerdownScheduleRepeatTimer=this._register(new hs)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=u(()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24)},"scheduleRepeater");this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,n=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}}u(a3,"ScrollbarArrow");class l3 extends U{constructor(e,t,n){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new hs)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{var e;(e=this._domNode)===null||e===void 0||e.setClassName(this._visibleClassName)},0))}_hide(e){var t;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,(t=this._domNode)===null||t===void 0||t.setClassName(this._invisibleClassName+(e?" fade":"")))}}u(l3,"ScrollbarVisibilityController");const TQ=140;class HA extends lo{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new l3(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new ch),this._shouldRender=!0,this.domNode=et(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(Y(this.domNode.domNode,le.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){const t=this._register(new a3(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,n,i){this.slider=et(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof n=="number"&&this.slider.setWidth(n),typeof i=="number"&&this.slider.setHeight(i),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(Y(this.slider.domNode,le.POINTER_DOWN,s=>{s.button===0&&(s.preventDefault(),this._sliderPointerDown(s))})),this.onclick(this.slider.domNode,s=>{s.leftButton&&s.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){const t=this.domNode.domNode.getClientRects()[0].top,n=t+this._scrollbarState.getSliderPosition(),i=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),s=this._sliderPointerPosition(e);n<=s&&s<=i?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,n;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,n=e.offsetY;else{const s=li(this.domNode.domNode);t=e.pageX-s.left,n=e.pageY-s.top}const i=this._pointerDownRelativePosition(t,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(i):this._scrollbarState.getDesiredScrollPositionFromOffset(i)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._sliderPointerPosition(e),n=this._sliderOrthogonalPointerPosition(e),i=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,s=>{const r=this._sliderOrthogonalPointerPosition(s),a=Math.abs(r-n);if(ei&&a>TQ){this._setDesiredScrollPositionNow(i.getScrollPosition());return}const c=this._sliderPointerPosition(s)-t;this._setDesiredScrollPositionNow(i.getDesiredScrollPositionFromDelta(c))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}u(HA,"AbstractScrollbar");const LQ=20;class uf{constructor(e,t,n,i,s,r){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(e),this._visibleSize=i,this._scrollSize=s,this._scrollPosition=r,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new uf(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,n,i,s){const r=Math.max(0,n-e),a=Math.max(0,r-2*t),l=i>0&&i>n;if(!l)return{computedAvailableSize:Math.round(r),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const c=Math.round(Math.max(LQ,Math.floor(n*a/i))),d=(a-c)/(i-n),h=s*d;return{computedAvailableSize:Math.round(r),computedIsNeeded:l,computedSliderSize:Math.round(c),computedSliderRatio:d,computedSliderPosition:Math.round(h)}}_refreshComputedValues(){const e=uf._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let n=this._scrollPosition;return t<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}u(uf,"ScrollbarState");class c3 extends HA{constructor(e,t,n){const i=e.getScrollDimensions(),s=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new uf(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,i.width,i.scrollWidth,s.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const r=(t.arrowSize-df)/2,a=(t.horizontalScrollbarSize-df)/2;this._createArrow({className:"scra",icon:b.scrollbarButtonLeft,top:a,left:r,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Cu(null,1,0))}),this._createArrow({className:"scra",icon:b.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:r,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Cu(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}u(c3,"HorizontalScrollbar");class d3 extends HA{constructor(e,t,n){const i=e.getScrollDimensions(),s=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new uf(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,i.height,i.scrollHeight,s.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const r=(t.arrowSize-df)/2,a=(t.verticalScrollbarSize-df)/2;this._createArrow({className:"scra",icon:b.scrollbarButtonUp,top:r,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Cu(null,0,1))}),this._createArrow({className:"scra",icon:b.scrollbarButtonDown,top:void 0,left:a,bottom:r,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Cu(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}u(d3,"VerticalScrollbar");class Sb{constructor(e,t,n,i,s,r,a){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(t=t|0,n=n|0,i=i|0,s=s|0,r=r|0,a=a|0),this.rawScrollLeft=i,this.rawScrollTop=a,t<0&&(t=0),i+t>n&&(i=n-t),i<0&&(i=0),s<0&&(s=0),a+s>r&&(a=r-s),a<0&&(a=0),this.width=t,this.scrollWidth=n,this.scrollLeft=i,this.height=s,this.scrollHeight=r,this.scrollTop=a}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new Sb(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new Sb(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const n=this.width!==e.width,i=this.scrollWidth!==e.scrollWidth,s=this.scrollLeft!==e.scrollLeft,r=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:i,scrollLeftChanged:s,heightChanged:r,scrollHeightChanged:a,scrollTopChanged:l}}}u(Sb,"ScrollState");class ap extends U{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new R),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new Sb(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){var n;const i=this._state.withScrollDimensions(e,t);this._setState(i,Boolean(this._smoothScrolling)),(n=this._smoothScrolling)===null||n===void 0||n.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let i;t?i=new hf(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):i=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=i}else{const n=this._state.withScrollPosition(e);this._smoothScrolling=hf.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,t)))}}u(ap,"Scrollable");class lE{constructor(e,t,n){this.scrollLeft=e,this.scrollTop=t,this.isDone=n}}u(lE,"SmoothScrollingUpdate");function gT(o,e){const t=e-o;return function(n){return o+t*kQ(n)}}u(gT,"createEaseOutCubic");function xQ(o,e,t){return function(n){return n<t?o(n/t):e((n-t)/(1-t))}}u(xQ,"createComposed");class hf{constructor(e,t,n,i){this.from=e,this.to=t,this.duration=i,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,n){if(Math.abs(e-t)>2.5*n){let s,r;return e<t?(s=e+.75*n,r=t-.75*n):(s=e-.75*n,r=t+.75*n),xQ(gT(e,s),gT(r,t),.33)}return gT(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const n=this.scrollLeft(t),i=this.scrollTop(t);return new lE(n,i,!1)}return new lE(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,n){return hf.start(e,t,n)}static start(e,t,n){n=n+10;const i=Date.now()-10;return new hf(e,t,i,n)}}u(hf,"SmoothScrollingOperation");function EQ(o){return Math.pow(o,3)}u(EQ,"easeInCubic");function kQ(o){return 1-EQ(1-o)}u(kQ,"easeOutCubic");const MQ=500,MP=50;class u3{constructor(e,t,n){this.timestamp=e,this.deltaX=t,this.deltaY=n,this.score=0}}u(u3,"MouseWheelClassifierItem");class C1{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,n=1,i=this._rear;do{const s=i===this._front?e:Math.pow(2,-n);if(e-=s,t+=this._memory[i].score*s,i===this._front)break;i=(this._capacity+i-1)%this._capacity,n++}while(!0);return t<=.5}accept(e,t,n){const i=new u3(e,t,n);i.score=this._computeScore(i),this._front===-1&&this._rear===-1?(this._memory[0]=i,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=i)}_computeScore(e){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let t=.5;return this._front===-1&&this._rear===-1||this._memory[this._rear],(!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(t+=.25),Math.min(Math.max(t,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}}u(C1,"MouseWheelClassifier");C1.INSTANCE=new C1;class hy extends lo{constructor(e,t,n){super(),this._onScroll=this._register(new R),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new R),e.style.overflow="hidden",this._options=DQ(t),this._scrollable=n,this._register(this._scrollable.onScroll(s=>{this._onWillScroll.fire(s),this._onDidScroll(s),this._onScroll.fire(s)}));const i={onMouseWheel:s=>this._onMouseWheel(s),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new d3(this._scrollable,this._options,i)),this._horizontalScrollbar=this._register(new c3(this._scrollable,this._options,i)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=et(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=et(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=et(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,s=>this._onMouseOver(s)),this.onmouseleave(this._listenOnDomNode,s=>this._onMouseLeave(s)),this._hideTimeout=this._register(new hs),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}get options(){return this._options}dispose(){this._mouseWheelToDispose=st(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,Xe&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=st(this._mouseWheelToDispose),e)){const n=u(i=>{this._onMouseWheel(new Cu(i))},"onMouseWheel");this._mouseWheelToDispose.push(Y(this._listenOnDomNode,le.MOUSE_WHEEL,n,{passive:!1}))}}_onMouseWheel(e){const t=C1.INSTANCE;{const s=window.devicePixelRatio/j4();ei||hi?t.accept(Date.now(),e.deltaX/s,e.deltaY/s):t.accept(Date.now(),e.deltaX,e.deltaY)}let n=!1;if(e.deltaY||e.deltaX){let s=e.deltaY*this._options.mouseWheelScrollSensitivity,r=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(Math.abs(s)>=Math.abs(r)?r=0:s=0),this._options.flipAxes&&([s,r]=[r,s]);const a=!Xe&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!r&&(r=s,s=0),e.browserEvent&&e.browserEvent.altKey&&(r=r*this._options.fastScrollSensitivity,s=s*this._options.fastScrollSensitivity);const l=this._scrollable.getFutureScrollPosition();let c={};if(s){const d=MP*s,h=l.scrollTop-(d<0?Math.floor(d):Math.ceil(d));this._verticalScrollbar.writeScrollPosition(c,h)}if(r){const d=MP*r,h=l.scrollLeft-(d<0?Math.floor(d):Math.ceil(d));this._horizontalScrollbar.writeScrollPosition(c,h)}c=this._scrollable.validateScrollPosition(c),(l.scrollLeft!==c.scrollLeft||l.scrollTop!==c.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(c):this._scrollable.setScrollPositionNow(c),n=!0)}let i=n;!i&&this._options.alwaysConsumeMouseWheel&&(i=!0),!i&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(i=!0),i&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,n=e.scrollLeft>0,i=n?" left":"",s=t?" top":"",r=n||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${i}`),this._topShadowDomNode.setClassName(`shadow${s}`),this._topLeftShadowDomNode.setClassName(`shadow${r}${s}${i}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),MQ)}}u(hy,"AbstractScrollableElement");class BA extends hy{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const n=new ap({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:i=>br(i)});super(e,t,n),this._register(n)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}}u(BA,"ScrollableElement");class gy extends hy{constructor(e,t,n){super(e,t,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}u(gy,"SmoothScrollableElement");class lp extends hy{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const n=new ap({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:i=>br(i)});super(e,t,n),this._register(n),this._element=e,this.onScroll(i=>{i.scrollTopChanged&&(this._element.scrollTop=i.scrollTop),i.scrollLeftChanged&&(this._element.scrollLeft=i.scrollLeft)}),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}u(lp,"DomScrollableElement");function DQ(o){const e={lazyRender:typeof o.lazyRender<"u"?o.lazyRender:!1,className:typeof o.className<"u"?o.className:"",useShadows:typeof o.useShadows<"u"?o.useShadows:!0,handleMouseWheel:typeof o.handleMouseWheel<"u"?o.handleMouseWheel:!0,flipAxes:typeof o.flipAxes<"u"?o.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof o.consumeMouseWheelIfScrollbarIsNeeded<"u"?o.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof o.alwaysConsumeMouseWheel<"u"?o.alwaysConsumeMouseWheel:!1,scrollYToX:typeof o.scrollYToX<"u"?o.scrollYToX:!1,mouseWheelScrollSensitivity:typeof o.mouseWheelScrollSensitivity<"u"?o.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof o.fastScrollSensitivity<"u"?o.fastScrollSensitivity:5,scrollPredominantAxis:typeof o.scrollPredominantAxis<"u"?o.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof o.mouseWheelSmoothScroll<"u"?o.mouseWheelSmoothScroll:!0,arrowSize:typeof o.arrowSize<"u"?o.arrowSize:11,listenOnDomNode:typeof o.listenOnDomNode<"u"?o.listenOnDomNode:null,horizontal:typeof o.horizontal<"u"?o.horizontal:1,horizontalScrollbarSize:typeof o.horizontalScrollbarSize<"u"?o.horizontalScrollbarSize:10,horizontalSliderSize:typeof o.horizontalSliderSize<"u"?o.horizontalSliderSize:0,horizontalHasArrows:typeof o.horizontalHasArrows<"u"?o.horizontalHasArrows:!1,vertical:typeof o.vertical<"u"?o.vertical:1,verticalScrollbarSize:typeof o.verticalScrollbarSize<"u"?o.verticalScrollbarSize:10,verticalHasArrows:typeof o.verticalHasArrows<"u"?o.verticalHasArrows:!1,verticalSliderSize:typeof o.verticalSliderSize<"u"?o.verticalSliderSize:0,scrollByPage:typeof o.scrollByPage<"u"?o.scrollByPage:!1};return e.horizontalSliderSize=typeof o.horizontalSliderSize<"u"?o.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof o.verticalSliderSize<"u"?o.verticalSliderSize:e.verticalScrollbarSize,Xe&&(e.className+=" mac"),e}u(DQ,"resolveOptions$1");class h3 extends fs{constructor(e,t,n,i){super(e);const s=this._context.configuration.options,r=s.get(94),a=s.get(69),l=s.get(36),c=s.get(97),d={listenOnDomNode:n.domNode,className:"editor-scrollable "+l1(e.theme.type),useShadows:!1,lazyRender:!0,vertical:r.vertical,horizontal:r.horizontal,verticalHasArrows:r.verticalHasArrows,horizontalHasArrows:r.horizontalHasArrows,verticalScrollbarSize:r.verticalScrollbarSize,verticalSliderSize:r.verticalSliderSize,horizontalScrollbarSize:r.horizontalScrollbarSize,horizontalSliderSize:r.horizontalSliderSize,handleMouseWheel:r.handleMouseWheel,alwaysConsumeMouseWheel:r.alwaysConsumeMouseWheel,arrowSize:r.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:c,scrollByPage:r.scrollByPage};this.scrollbar=this._register(new gy(t.domNode,d,this._context.viewLayout.getScrollable())),_r.write(this.scrollbar.getDomNode(),5),this.scrollbarDomNode=et(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const h=u((g,f,p)=>{const _={};if(f){const v=g.scrollTop;v&&(_.scrollTop=this._context.viewLayout.getCurrentScrollTop()+v,g.scrollTop=0)}if(p){const v=g.scrollLeft;v&&(_.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+v,g.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(_,1)},"onBrowserDesperateReveal");this._register(Y(n.domNode,"scroll",g=>h(n.domNode,!0,!0))),this._register(Y(t.domNode,"scroll",g=>h(t.domNode,!0,!1))),this._register(Y(i.domNode,"scroll",g=>h(i.domNode,!0,!1))),this._register(Y(this.scrollbarDomNode.domNode,"scroll",g=>h(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(133);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(67).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}onConfigurationChanged(e){if(e.hasChanged(94)||e.hasChanged(69)||e.hasChanged(36)){const t=this._context.configuration.options,n=t.get(94),i=t.get(69),s=t.get(36),r=t.get(97),a={vertical:n.vertical,horizontal:n.horizontal,verticalScrollbarSize:n.verticalScrollbarSize,horizontalScrollbarSize:n.horizontalScrollbarSize,scrollByPage:n.scrollByPage,handleMouseWheel:n.handleMouseWheel,mouseWheelScrollSensitivity:i,fastScrollSensitivity:s,scrollPredominantAxis:r};this.scrollbar.updateOptions(a)}return e.hasChanged(133)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+l1(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}u(h3,"EditorScrollbar");At((o,e)=>{const t=o.getColor(ip);t&&e.addRule(`
			.monaco-scrollable-element > .shadow.top {
				box-shadow: ${t} 0 6px 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.left {
				box-shadow: ${t} 6px 0 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.top.left {
				box-shadow: ${t} 6px 6px 6px -6px inset;
			}
		`);const n=o.getColor(Hd);n&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider {
				background: ${n};
			}
		`);const i=o.getColor(Bd);i&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider:hover {
				background: ${i};
			}
		`);const s=o.getColor(Wd);s&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider.active {
				background: ${s};
			}
		`)});class Tb{constructor(e,t,n){this._decorationToRenderBrand=void 0,this.startLineNumber=+e,this.endLineNumber=+t,this.className=String(n)}}u(Tb,"DecorationToRender");class fy extends uh{_render(e,t,n){const i=[];for(let a=e;a<=t;a++){const l=a-e;i[l]=[]}if(n.length===0)return i;n.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let s=null,r=0;for(let a=0,l=n.length;a<l;a++){const c=n[a],d=c.className;let h=Math.max(c.startLineNumber,e)-e;const g=Math.min(c.endLineNumber,t)-e;s===d?(h=Math.max(r+1,h),r=Math.max(r,g)):(s=d,r=g);for(let f=h;f<=r;f++)i[f].push(s)}return i}}u(fy,"DedupOverlay");class g3 extends fy{constructor(e){super(),this._context=e;const t=this._context.configuration.options,n=t.get(133);this._lineHeight=t.get(61),this._glyphMargin=t.get(52),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(133);return this._lineHeight=t.get(61),this._glyphMargin=t.get(52),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),n=[];let i=0;for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.options.glyphMarginClassName;l&&(n[i++]=new Tb(a.range.startLineNumber,a.range.endLineNumber,l))}return n}prepareRender(e){if(!this._glyphMargin){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),s=this._lineHeight.toString(),r=this._glyphMarginLeft.toString(),a=this._glyphMarginWidth.toString(),l='" style="left:'+r+"px;width:"+a+"px;height:"+s+'px;"></div>',c=[];for(let d=t;d<=n;d++){const h=d-t,g=i[h];g.length===0?c[h]="":c[h]='<div class="cgmr codicon '+g.join(" ")+l}this._renderResult=c}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}u(g3,"GlyphMarginOverlay");class WA extends U{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}u(WA,"TextModelPart");function py(o,e){let t=0,n=0;const i=o.length;for(;n<i;){const s=o.charCodeAt(n);if(s===32)t++;else if(s===9)t=t-t%e+e;else break;n++}return n===i?-1:t}u(py,"computeIndentLevel");var eu;(function(o){o[o.Disabled=0]="Disabled",o[o.EnabledForActive=1]="EnabledForActive",o[o.Enabled=2]="Enabled"})(eu||(eu={}));class oc{constructor(e,t,n,i,s,r){if(this.visibleColumn=e,this.column=t,this.className=n,this.horizontalLine=i,this.forWrappedLinesAfterColumn=s,this.forWrappedLinesBeforeOrAtColumn=r,e!==-1==(t!==-1))throw new Error}}u(oc,"IndentGuide");class Ng{constructor(e,t){this.top=e,this.endColumn=t}}u(Ng,"IndentGuideHorizontalLine");class f3 extends WA{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return py(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,n){this.assertNotDisposed();const i=this.textModel.getLineCount();if(e<1||e>i)throw new Error("Illegal value for lineNumber");const s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=Boolean(s&&s.offSide);let a=-2,l=-1,c=-2,d=-1;const h=u(T=>{if(a!==-1&&(a===-2||a>T-1)){a=-1,l=-1;for(let x=T-2;x>=0;x--){const M=this._computeIndentLevel(x);if(M>=0){a=x,l=M;break}}}if(c===-2){c=-1,d=-1;for(let x=T;x<i;x++){const M=this._computeIndentLevel(x);if(M>=0){c=x,d=M;break}}}},"up_resolveIndents");let g=-2,f=-1,p=-2,_=-1;const v=u(T=>{if(g===-2){g=-1,f=-1;for(let x=T-2;x>=0;x--){const M=this._computeIndentLevel(x);if(M>=0){g=x,f=M;break}}}if(p!==-1&&(p===-2||p<T-1)){p=-1,_=-1;for(let x=T;x<i;x++){const M=this._computeIndentLevel(x);if(M>=0){p=x,_=M;break}}}},"down_resolveIndents");let C=0,w=!0,y=0,S=!0,E=0,k=0;for(let T=0;w||S;T++){const x=e-T,M=e+T;T>1&&(x<1||x<t)&&(w=!1),T>1&&(M>i||M>n)&&(S=!1),T>5e4&&(w=!1,S=!1);let F=-1;if(w&&x>=1){const G=this._computeIndentLevel(x-1);G>=0?(c=x-1,d=G,F=Math.ceil(G/this.textModel.getOptions().indentSize)):(h(x),F=this._getIndentLevelForWhitespaceLine(r,l,d))}let V=-1;if(S&&M<=i){const G=this._computeIndentLevel(M-1);G>=0?(g=M-1,f=G,V=Math.ceil(G/this.textModel.getOptions().indentSize)):(v(M),V=this._getIndentLevelForWhitespaceLine(r,f,_))}if(T===0){k=F;continue}if(T===1){if(M<=i&&V>=0&&k+1===V){w=!1,C=M,y=M,E=V;continue}if(x>=1&&F>=0&&F-1===k){S=!1,C=x,y=x,E=F;continue}if(C=e,y=e,E=k,E===0)return{startLineNumber:C,endLineNumber:y,indent:E}}w&&(F>=E?C=x:w=!1),S&&(V>=E?y=M:S=!1)}return{startLineNumber:C,endLineNumber:y,indent:E}}getLinesBracketGuides(e,t,n,i){var s;const r=[];for(let g=e;g<=t;g++)r.push([]);const a=!0,l=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new L(e,1,t,this.textModel.getLineMaxColumn(t)));let c;if(n&&l.length>0){const g=(e<=n.lineNumber&&n.lineNumber<=t?l:this.textModel.bracketPairs.getBracketPairsInRange(L.fromPositions(n))).filter(f=>L.strictContainsPosition(f.range,n));c=(s=z0(g,f=>a))===null||s===void 0?void 0:s.range}const d=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,h=new UA;for(const g of l){if(!g.closingBracketRange)continue;const f=c&&g.range.equalsRange(c);if(!f&&!i.includeInactive)continue;const p=h.getInlineClassName(g.nestingLevel,g.nestingLevelOfEqualBracketType,d)+(i.highlightActive&&f?" "+h.activeClassName:""),_=g.openingBracketRange.getStartPosition(),v=g.closingBracketRange.getStartPosition(),C=i.horizontalGuides===eu.Enabled||i.horizontalGuides===eu.EnabledForActive&&f;if(g.range.startLineNumber===g.range.endLineNumber){C&&r[g.range.startLineNumber-e].push(new oc(-1,g.openingBracketRange.getEndPosition().column,p,new Ng(!1,v.column),-1,-1));continue}const w=this.getVisibleColumnFromPosition(v),y=this.getVisibleColumnFromPosition(g.openingBracketRange.getStartPosition()),S=Math.min(y,w,g.minVisibleColumnIndentation+1);let E=!1;Di(this.textModel.getLineContent(g.closingBracketRange.startLineNumber))<g.closingBracketRange.startColumn-1&&(E=!0);const x=Math.max(_.lineNumber,e),M=Math.min(v.lineNumber,t),F=E?1:0;for(let V=x;V<M+F;V++)r[V-e].push(new oc(S,-1,p,null,V===_.lineNumber?_.column:-1,V===v.lineNumber?v.column:-1));C&&(_.lineNumber>=e&&y>S&&r[_.lineNumber-e].push(new oc(S,-1,p,new Ng(!1,_.column),-1,-1)),v.lineNumber<=t&&w>S&&r[v.lineNumber-e].push(new oc(S,-1,p,new Ng(!E,v.column),-1,-1)))}for(const g of r)g.sort((f,p)=>f.visibleColumn-p.visibleColumn);return r}getVisibleColumnFromPosition(e){return mn.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();const n=this.textModel.getLineCount();if(e<1||e>n)throw new Error("Illegal value for startLineNumber");if(t<1||t>n)throw new Error("Illegal value for endLineNumber");const i=this.textModel.getOptions(),s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=Boolean(s&&s.offSide),a=new Array(t-e+1);let l=-2,c=-1,d=-2,h=-1;for(let g=e;g<=t;g++){const f=g-e,p=this._computeIndentLevel(g-1);if(p>=0){l=g-1,c=p,a[f]=Math.ceil(p/i.indentSize);continue}if(l===-2){l=-1,c=-1;for(let _=g-2;_>=0;_--){const v=this._computeIndentLevel(_);if(v>=0){l=_,c=v;break}}}if(d!==-1&&(d===-2||d<g-1)){d=-1,h=-1;for(let _=g;_<n;_++){const v=this._computeIndentLevel(_);if(v>=0){d=_,h=v;break}}}a[f]=this._getIndentLevelForWhitespaceLine(r,c,h)}return a}_getIndentLevelForWhitespaceLine(e,t,n){const i=this.textModel.getOptions();return t===-1||n===-1?0:t<n?1+Math.floor(t/i.indentSize):t===n||e?Math.ceil(n/i.indentSize):1+Math.floor(n/i.indentSize)}}u(f3,"GuidesTextModelPart");class UA{constructor(){this.activeClassName="indent-active"}getInlineClassName(e,t,n){return this.getInlineClassNameOfLevel(n?t:e)}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}u(UA,"BracketPairGuidesClassNames");class p3 extends uh{constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,n=t.get(134),i=t.get(46);this._lineHeight=t.get(61),this._spaceWidth=i.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*i.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(134),i=t.get(46);return this._lineHeight=t.get(61),this._spaceWidth=i.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*i.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),!0}onCursorStateChanged(e){var t;const i=e.selections[0].getPosition();return!((t=this._primaryPosition)===null||t===void 0)&&t.equals(i)?!1:(this._primaryPosition=i,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var t,n,i,s;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const r=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,l=e.scrollWidth,c=this._lineHeight,d=this._primaryPosition,h=this.getGuidesByLine(r,a,d),g=[];for(let f=r;f<=a;f++){const p=f-r,_=h[p];let v="";const C=(n=(t=e.visibleRangeForPosition(new H(f,1)))===null||t===void 0?void 0:t.left)!==null&&n!==void 0?n:0;for(const w of _){const y=w.column===-1?C+(w.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new H(f,w.column)).left;if(y>l||this._maxIndentLeft>0&&y>this._maxIndentLeft)break;const S=w.horizontalLine?w.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",E=w.horizontalLine?((s=(i=e.visibleRangeForPosition(new H(f,w.horizontalLine.endColumn)))===null||i===void 0?void 0:i.left)!==null&&s!==void 0?s:y+this._spaceWidth)-y:this._spaceWidth;v+=`<div class="core-guide ${w.className} ${S}" style="left:${y}px;height:${c}px;width:${E}px"></div>`}g[p]=v}this._renderResult=g}getGuidesByLine(e,t,n){const i=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(e,t,n,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?eu.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?eu.EnabledForActive:eu.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,s=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,t):null;let r=0,a=0,l=0;if(this._bracketPairGuideOptions.highlightActiveIndentation!==!1&&n){const h=this._context.viewModel.getActiveIndentGuide(n.lineNumber,e,t);r=h.startLineNumber,a=h.endLineNumber,l=h.indent}const{indentSize:c}=this._context.viewModel.model.getOptions(),d=[];for(let h=e;h<=t;h++){const g=new Array;d.push(g);const f=i?i[h-e]:[],p=new $g(f),_=s?s[h-e]:[];for(let v=1;v<=_;v++){const C=(v-1)*c+1,w=(this._bracketPairGuideOptions.highlightActiveIndentation==="always"||f.length===0)&&r<=h&&h<=a&&v===l;g.push(...p.takeWhile(S=>S.visibleColumn<C)||[]);const y=p.peek();(!y||y.visibleColumn!==C||y.horizontalLine)&&g.push(new oc(C,-1,w?"core-guide-indent-active":"core-guide-indent",null,-1,-1))}g.push(...p.takeWhile(v=>!0)||[])}return d}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}u(p3,"IndentGuidesOverlay");function eC(o){if(!(o&&o.isTransparent()))return o}u(eC,"transparentToUndefined");At((o,e)=>{const t=o.getColor(H_);t&&e.addRule(`.monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 ${t} inset; }`);const n=o.getColor(B_)||t;n&&e.addRule(`.monaco-editor .lines-content .core-guide-indent-active { box-shadow: 1px 0 0 0 ${n} inset; }`);const i=[{bracketColor:VH,guideColor:eQ,guideColorActive:rQ},{bracketColor:HH,guideColor:tQ,guideColorActive:aQ},{bracketColor:BH,guideColor:nQ,guideColorActive:lQ},{bracketColor:WH,guideColor:iQ,guideColorActive:cQ},{bracketColor:UH,guideColor:sQ,guideColorActive:dQ},{bracketColor:GH,guideColor:oQ,guideColorActive:uQ}],s=new UA,r=i.map(a=>{var l,c;const d=o.getColor(a.bracketColor),h=o.getColor(a.guideColor),g=o.getColor(a.guideColorActive),f=eC((l=eC(h))!==null&&l!==void 0?l:d?.transparent(.3)),p=eC((c=eC(g))!==null&&c!==void 0?c:d);if(!(!f||!p))return{guideColor:f,guideColorActive:p}}).filter(k$);if(r.length>0){for(let a=0;a<30;a++){const l=r[a%r.length];e.addRule(`.monaco-editor .${s.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${l.guideColor}; --guide-color-active: ${l.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${s.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${s.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${s.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}});class m3{constructor(){this._currentVisibleRange=new L(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}u(m3,"LastRenderedData");class b3{constructor(e,t,n,i,s,r,a){this.minimalReveal=e,this.lineNumber=t,this.startColumn=n,this.endColumn=i,this.startScrollTop=s,this.stopScrollTop=r,this.scrollType=a,this.type="range",this.minLineNumber=t,this.maxLineNumber=t}}u(b3,"HorizontalRevealRangeRequest");class _3{constructor(e,t,n,i,s){this.minimalReveal=e,this.selections=t,this.startScrollTop=n,this.stopScrollTop=i,this.scrollType=s,this.type="selections";let r=t[0].startLineNumber,a=t[0].endLineNumber;for(let l=1,c=t.length;l<c;l++){const d=t[l];r=Math.min(r,d.startLineNumber),a=Math.max(a,d.endLineNumber)}this.minLineNumber=r,this.maxLineNumber=a}}u(_3,"HorizontalRevealSelectionsRequest");class G_ extends fs{constructor(e,t){super(e),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new FA(this),this.domNode=this._visibleLines.domNode;const n=this._context.configuration,i=this._context.configuration.options,s=i.get(46),r=i.get(134),a=i.get(133);this._lineHeight=i.get(61),this._typicalHalfwidthCharacterWidth=s.typicalHalfwidthCharacterWidth,this._isViewportWrapping=r.isViewportWrapping,this._revealHorizontalRightPadding=i.get(91),this._horizontalScrollbarHeight=a.horizontalScrollbarHeight,this._cursorSurroundingLines=i.get(25),this._cursorSurroundingLinesStyle=i.get(26),this._canUseLayerHinting=!i.get(28),this._viewLineOptions=new iE(n,this._context.theme.type),_r.write(this.domNode,7),this.domNode.setClassName(`view-lines ${Qd}`),di(this.domNode,s),this._maxLineWidth=0,this._asyncUpdateLineWidths=new pt(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new pt(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new m3,this._horizontalRevealRequest=null}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new Xo(this._viewLineOptions)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(134)&&(this._maxLineWidth=0);const t=this._context.configuration.options,n=t.get(46),i=t.get(134),s=t.get(133);return this._lineHeight=t.get(61),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._isViewportWrapping=i.isViewportWrapping,this._revealHorizontalRightPadding=t.get(91),this._horizontalScrollbarHeight=s.horizontalScrollbarHeight,this._cursorSurroundingLines=t.get(25),this._cursorSurroundingLinesStyle=t.get(26),this._canUseLayerHinting=!t.get(28),di(this.domNode,n),this._onOptionsMaybeChanged(),e.hasChanged(133)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new iE(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=n;s<=i;s++)this._visibleLines.getVisibleLine(s).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let i=!1;for(let s=t;s<=n;s++)i=this._visibleLines.getVisibleLine(s).onSelectionChanged()||i;return i}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let i=t;i<=n;i++)this._visibleLines.getVisibleLine(i).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(t===-1)return!1;let n=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?n={scrollTop:n.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new b3(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new _3(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const s=Math.abs(this._context.viewLayout.getCurrentScrollTop()-n.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(n,s),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),n=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>n)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const n=this._getViewLineDomNode(e);if(n===null)return null;const i=this._getLineNumberFor(n);if(i===-1||i<1||i>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(i)===1)return new H(i,1);const s=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();if(i<s||i>r)return null;let a=this._visibleLines.getVisibleLine(i).getColumnOfNodeOffset(i,e,t);const l=this._context.viewModel.getLineMinColumn(i);return a<l&&(a=l),new H(i,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===Xo.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let i=t;i<=n;i++){const s=this._visibleLines.getVisibleLine(i);if(e===s.getDomNode())return i}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();return e<t||e>n?-1:this._visibleLines.getVisibleLine(e).getWidth()}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const n=e.endLineNumber,i=L.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!i)return null;const s=[];let r=0;const a=new nE(this.domNode.domNode,this._textRangeRestingSpot);let l=0;t&&(l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new H(i.startLineNumber,1)).lineNumber);const c=this._visibleLines.getStartLineNumber(),d=this._visibleLines.getEndLineNumber();for(let h=i.startLineNumber;h<=i.endLineNumber;h++){if(h<c||h>d)continue;const g=h===i.startLineNumber?i.startColumn:1,f=h===i.endLineNumber?i.endColumn:this._context.viewModel.getLineMaxColumn(h),p=this._visibleLines.getVisibleLine(h).getVisibleRangesForRange(h,g,f,a);if(p){if(t&&h<n){const _=l;l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new H(h+1,1)).lineNumber,_!==l&&(p.ranges[p.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}s[r++]=new CH(p.outsideRenderedLine,h,O_.from(p.ranges))}}return r===0?null:s}_visibleRangesForLineRange(e,t,n){return this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber()?null:this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,n,new nE(this.domNode.domNode,this._textRangeRestingSpot))}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new wH(t.outsideRenderedLine,t.ranges[0].left):null}updateLineWidths(){this._updateLineWidths(!1)}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let i=1,s=!0;for(let r=t;r<=n;r++){const a=this._visibleLines.getVisibleLine(r);if(e&&!a.getWidthIsFast()){s=!1;continue}i=Math.max(i,a.getWidth())}return s&&t===1&&n===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(i),s}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=n;s<=i;s++){const r=this._visibleLines.getVisibleLine(s);if(r.needsMonospaceFontCheck()){const a=r.getWidth();a>t&&(t=a,e=s)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let s=n;s<=i;s++)this._visibleLines.getVisibleLine(s).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const n=this._horizontalRevealRequest;if(e.startLineNumber<=n.minLineNumber&&n.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const i=this._computeScrollLeftToReveal(n);i&&(this._isViewportWrapping||this._ensureMaxLineWidth(i.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:i.scrollLeft},n.scrollType))}}if(this._updateLineWidthsFast()||this._asyncUpdateLineWidths.schedule(),hi&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=n;s<=i;s++)if(this._visibleLines.getVisibleLine(s).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,n,i,s,r){const a=e.top,l=e.height,c=a+l;let d,h,g;if(s&&s.length>0){let _=s[0].startLineNumber,v=s[0].endLineNumber;for(let C=1,w=s.length;C<w;C++){const y=s[C];_=Math.min(_,y.startLineNumber),v=Math.max(v,y.endLineNumber)}d=!1,h=this._context.viewLayout.getVerticalOffsetForLineNumber(_),g=this._context.viewLayout.getVerticalOffsetForLineNumber(v)+this._lineHeight}else if(i)d=!0,h=this._context.viewLayout.getVerticalOffsetForLineNumber(i.startLineNumber),g=this._context.viewLayout.getVerticalOffsetForLineNumber(i.endLineNumber)+this._lineHeight;else return-1;if((t==="mouse"||n)&&this._cursorSurroundingLinesStyle==="default")n||(h-=this._lineHeight);else{const _=Math.min(l/this._lineHeight/2,this._cursorSurroundingLines);h-=_*this._lineHeight,g+=Math.max(0,_-1)*this._lineHeight}(r===0||r===4)&&(g+=n?this._horizontalScrollbarHeight:this._lineHeight);let p;if(g-h>l){if(!d)return-1;p=h}else if(r===5||r===6)if(r===6&&a<=h&&g<=c)p=a;else{const _=Math.max(5*this._lineHeight,l*.2),v=h-_,C=g-l;p=Math.max(C,v)}else if(r===1||r===2)if(r===2&&a<=h&&g<=c)p=a;else{const _=(h+g)/2;p=Math.max(0,_-l/2)}else p=this._computeMinimumScrolling(a,c,h,g,r===3,r===4);return p}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),n=t.left,i=n+t.width;let s=1073741824,r=0;if(e.type==="range"){const l=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!l)return null;for(const c of l.ranges)s=Math.min(s,Math.round(c.left)),r=Math.max(r,Math.round(c.left+c.width))}else for(const l of e.selections){if(l.startLineNumber!==l.endLineNumber)return null;const c=this._visibleRangesForLineRange(l.startLineNumber,l.startColumn,l.endColumn);if(!c)return null;for(const d of c.ranges)s=Math.min(s,Math.round(d.left)),r=Math.max(r,Math.round(d.left+d.width))}return e.minimalReveal||(s=Math.max(0,s-G_.HORIZONTAL_EXTRA_PX),r+=this._revealHorizontalRightPadding),e.type==="selections"&&r-s>t.width?null:{scrollLeft:this._computeMinimumScrolling(n,i,s,r),maxHorizontalOffset:r}}_computeMinimumScrolling(e,t,n,i,s,r){e=e|0,t=t|0,n=n|0,i=i|0,s=!!s,r=!!r;const a=t-e;if(i-n<a){if(s)return n;if(r)return Math.max(0,i-a);if(n<e)return n;if(i>t)return Math.max(0,i-a)}else return n;return e}}u(G_,"ViewLines");G_.HORIZONTAL_EXTRA_PX=30;class v3 extends fy{constructor(e){super(),this._context=e;const n=this._context.configuration.options.get(133);this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const n=this._context.configuration.options.get(133);return this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),n=[];let i=0;for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.options.linesDecorationsClassName;l&&(n[i++]=new Tb(a.range.startLineNumber,a.range.endLineNumber,l));const c=a.options.firstLineDecorationClassName;c&&(n[i++]=new Tb(a.range.startLineNumber,a.range.startLineNumber,c))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),s=this._decorationsLeft.toString(),r=this._decorationsWidth.toString(),a='" style="left:'+s+"px;width:"+r+'px;"></div>',l=[];for(let c=t;c<=n;c++){const d=c-t,h=i[d];let g="";for(let f=0,p=h.length;f<p;f++)g+='<div class="cldr '+h[f]+a;l[d]=g}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}u(v3,"LinesDecorationsOverlay");class C3 extends fy{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),n=[];let i=0;for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.options.marginClassName;l&&(n[i++]=new Tb(a.range.startLineNumber,a.range.endLineNumber,l))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),s=[];for(let r=t;r<=n;r++){const a=r-t,l=i[a];let c="";for(let d=0,h=l.length;d<h;d++)c+='<div class="cmdr '+l[d]+'" style=""></div>';s[a]=c}this._renderResult=s}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}u(C3,"MarginViewLineDecorationsOverlay");class ks{constructor(e,t,n,i){this._rgba8Brand=void 0,this.r=ks._clamp(e),this.g=ks._clamp(t),this.b=ks._clamp(n),this.a=ks._clamp(i)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}}u(ks,"RGBA8");ks.Empty=new ks(0,0,0,0);class cp extends U{constructor(){super(),this._onDidChange=new R,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(Wt.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}static getInstance(){return this._INSTANCE||(this._INSTANCE=new cp),this._INSTANCE}_updateColorMap(){const e=Wt.getColorMap();if(!e){this._colors=[ks.Empty],this._backgroundIsLight=!0;return}this._colors=[ks.Empty];for(let n=1;n<e.length;n++){const i=e[n].rgba;this._colors[n]=new ks(i.r,i.g,i.b,Math.round(i.a*255))}const t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}}u(cp,"MinimapTokensColorTracker");cp._INSTANCE=null;const AQ=(()=>{const o=[];for(let e=32;e<=126;e++)o.push(e);return o.push(65533),o})(),IQ=u((o,e)=>(o-=32,o<0||o>96?e<=2?(o+96)%96:96-1:o),"getCharIndex");class gf{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=gf.soften(e,12/15),this.charDataLight=gf.soften(e,50/60)}static soften(e,t){const n=new Uint8ClampedArray(e.length);for(let i=0,s=e.length;i<s;i++)n[i]=t1(e[i]*t);return n}renderChar(e,t,n,i,s,r,a,l,c,d,h){const g=1*this.scale,f=2*this.scale,p=h?1:f;if(t+g>e.width||n+p>e.height){console.warn("bad render request outside image data");return}const _=d?this.charDataLight:this.charDataNormal,v=IQ(i,c),C=e.width*4,w=a.r,y=a.g,S=a.b,E=s.r-w,k=s.g-y,T=s.b-S,x=Math.max(r,l),M=e.data;let F=v*g*f,V=n*C+t*4;for(let G=0;G<p;G++){let j=V;for(let ae=0;ae<g;ae++){const he=_[F++]/255*(r/255);M[j++]=w+E*he,M[j++]=y+k*he,M[j++]=S+T*he,M[j++]=x}V+=C}}blockRenderChar(e,t,n,i,s,r,a,l){const c=1*this.scale,d=2*this.scale,h=l?1:d;if(t+c>e.width||n+h>e.height){console.warn("bad render request outside image data");return}const g=e.width*4,f=.5*(s/255),p=r.r,_=r.g,v=r.b,C=i.r-p,w=i.g-_,y=i.b-v,S=p+C*f,E=_+w*f,k=v+y*f,T=Math.max(s,a),x=e.data;let M=n*g+t*4;for(let F=0;F<h;F++){let V=M;for(let G=0;G<c;G++)x[V++]=S,x[V++]=E,x[V++]=k,x[V++]=T;M+=g}}}u(gf,"MinimapCharRenderer");const DP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},AP=u(o=>{const e=new Uint8ClampedArray(o.length/2);for(let t=0;t<o.length;t+=2)e[t>>1]=DP[o[t]]<<4|DP[o[t+1]]&15;return e},"decodeData"),IP={1:fl(()=>AP("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:fl(()=>AP("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class Pg{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let n;return IP[e]?n=new gf(IP[e](),e):n=Pg.createFromSampleData(Pg.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=n,n}static createSampleData(e){const t=document.createElement("canvas"),n=t.getContext("2d");t.style.height=`${16}px`,t.height=16,t.width=96*10,t.style.width=96*10+"px",n.fillStyle="#ffffff",n.font=`bold ${16}px ${e}`,n.textBaseline="middle";let i=0;for(const s of AQ)n.fillText(String.fromCharCode(s),i,16/2),i+=10;return n.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");const i=Pg._downsample(e,t);return new gf(i,t)}static _downsampleChar(e,t,n,i,s){const r=1*s,a=2*s;let l=i,c=0;for(let d=0;d<a;d++){const h=d/a*16,g=(d+1)/a*16;for(let f=0;f<r;f++){const p=f/r*10,_=(f+1)/r*10;let v=0,C=0;for(let y=h;y<g;y++){const S=t+Math.floor(y)*3840,E=1-(y-Math.floor(y));for(let k=p;k<_;k++){const T=1-(k-Math.floor(k)),x=S+Math.floor(k)*4,M=T*E;C+=M,v+=e[x]*e[x+3]/255*M}}const w=v/C;c=Math.max(c,w),n[l++]=t1(w)}}return c}static _downsample(e,t){const n=2*t*1*t,i=n*96,s=new Uint8ClampedArray(i);let r=0,a=0,l=0;for(let c=0;c<96;c++)l=Math.max(l,this._downsampleChar(e,a,s,r,t)),r+=n,a+=10*4;if(l>0){const c=255/l;for(let d=0;d<i;d++)s[d]*=c}return s}}u(Pg,"MinimapCharRendererFactory");const NQ=140,PQ=2;class ff{constructor(e,t,n){const i=e.options,s=i.get(131),r=i.get(133),a=r.minimap,l=i.get(46),c=i.get(67);this.renderMinimap=a.renderMinimap,this.size=c.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=i.get(96),this.showSlider=c.showSlider,this.autohide=c.autohide,this.pixelRatio=s,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=i.get(61),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=r.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=r.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=fl(()=>Pg.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=n.getColor(2),this.backgroundColor=ff._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=ff._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const n=e.getColor(_J);return n?new ks(n.rgba.r,n.rgba.g,n.rgba.b,Math.round(255*n.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(vJ);return t?ks._clamp(Math.round(255*t.rgba.a)):255}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}u(ff,"MinimapOptions");class Rg{constructor(e,t,n,i,s,r,a,l){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=n,this._computedSliderRatio=i,this.sliderTop=s,this.sliderHeight=r,this.startLineNumber=a,this.endLineNumber=l}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}static create(e,t,n,i,s,r,a,l,c,d,h){const g=e.pixelRatio,f=e.minimapLineHeight,p=Math.floor(e.canvasInnerHeight/f),_=e.lineHeight;if(e.minimapHeightIsEditorHeight){const E=l*e.lineHeight+(e.scrollBeyondLastLine?s-e.lineHeight:0),k=Math.max(1,Math.floor(s*s/E)),T=Math.max(0,e.minimapHeight-k),x=T/(d-s),M=c*x,F=T>0,V=Math.floor(e.canvasInnerHeight/e.minimapLineHeight);return new Rg(c,d,F,x,M,k,1,Math.min(a,V))}let v;if(r&&n!==a){const E=n-t+1;v=Math.floor(E*f/g)}else{const E=s/_;v=Math.floor(E*f/g)}let C;e.scrollBeyondLastLine?C=(a-1)*f/g:C=Math.max(0,a*f/g-v),C=Math.min(e.minimapHeight-v,C);const w=C/(d-s),y=c*w;let S=0;if(e.scrollBeyondLastLine&&(S=s/_-1),p>=a+S){const k=a,T=C>0;return new Rg(c,d,T,w,y,v,1,k)}else{let E=Math.max(1,Math.floor(t-y*g/f));h&&h.scrollHeight===d&&(h.scrollTop>c&&(E=Math.min(E,h.startLineNumber)),h.scrollTop<c&&(E=Math.max(E,h.startLineNumber)));const k=Math.min(a,E+p-1),T=(c-i)/_,x=(t-E+T)*f/g;return new Rg(c,d,!0,w,x,v,E,k)}}}u(Rg,"MinimapLayout");class Lb{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}u(Lb,"MinimapLine");Lb.INVALID=new Lb(-1);class cE{constructor(e,t,n){this.renderedLayout=e,this._imageData=t,this._renderedLines=new RA(()=>Lb.INVALID),this._renderedLines._set(e.startLineNumber,n)}linesEquals(e){if(!this.scrollEquals(e))return!1;const n=this._renderedLines._get().lines;for(let i=0,s=n.length;i<s;i++)if(n[i].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}u(cE,"RenderData");class my{constructor(e,t,n,i){this._backgroundFillData=my._createBackgroundFillData(t,n,i),this._buffers=[e.createImageData(t,n),e.createImageData(t,n)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,n){const i=n.r,s=n.g,r=n.b,a=n.a,l=new Uint8ClampedArray(e*t*4);let c=0;for(let d=0;d<t;d++)for(let h=0;h<e;h++)l[c]=i,l[c+1]=s,l[c+2]=r,l[c+3]=a,c+=4;return l}}u(my,"MinimapBuffers");class pf{constructor(e,t){this.samplingRatio=e,this.minimapLines=t}static compute(e,t,n){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const i=e.pixelRatio,s=e.lineHeight,r=e.scrollBeyondLastLine,{minimapLineCount:a}=qd.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:r,height:e.editorHeight,lineHeight:s,pixelRatio:i}),l=t/a,c=l/2;if(!n||n.minimapLines.length===0){const y=[];if(y[0]=1,a>1){for(let S=0,E=a-1;S<E;S++)y[S]=Math.round(S*l+c);y[a-1]=t}return[new pf(l,y),[]]}const d=n.minimapLines,h=d.length,g=[];let f=0,p=0,_=1;const v=10;let C=[],w=null;for(let y=0;y<a;y++){const S=Math.max(_,Math.round(y*l)),E=Math.max(S,Math.round((y+1)*l));for(;f<h&&d[f]<S;){if(C.length<v){const T=f+1+p;w&&w.type==="deleted"&&w._oldIndex===f-1?w.deleteToLineNumber++:(w={type:"deleted",_oldIndex:f,deleteFromLineNumber:T,deleteToLineNumber:T},C.push(w)),p--}f++}let k;if(f<h&&d[f]<=E)k=d[f],f++;else if(y===0?k=1:y+1===a?k=t:k=Math.round(y*l+c),C.length<v){const T=f+1+p;w&&w.type==="inserted"&&w._i===y-1?w.insertToLineNumber++:(w={type:"inserted",_i:y,insertFromLineNumber:T,insertToLineNumber:T},C.push(w)),p++}g[y]=k,_=k}if(C.length<v)for(;f<h;){const y=f+1+p;w&&w.type==="deleted"&&w._oldIndex===f-1?w.deleteToLineNumber++:(w={type:"deleted",_oldIndex:f,deleteFromLineNumber:y,deleteToLineNumber:y},C.push(w)),p--,f++}else C=[{type:"flush"}];return[new pf(l,g),C]}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e)-1;for(;n>0&&this.minimapLines[n-1]>=e;)n--;let i=this.modelLineToMinimapLine(t)-1;for(;i+1<this.minimapLines.length&&this.minimapLines[i+1]<=t;)i++;if(n===i){const s=this.minimapLines[n];if(s<e||s>t)return null}return[n+1,i+1]}decorationLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e),i=this.modelLineToMinimapLine(t);return e!==t&&i===n&&(i===this.minimapLines.length?n>1&&n--:i++),[n,i]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let n=this.minimapLines.length,i=0;for(let s=this.minimapLines.length-1;s>=0&&!(this.minimapLines[s]<e.fromLineNumber);s--)this.minimapLines[s]<=e.toLineNumber?(this.minimapLines[s]=Math.max(1,e.fromLineNumber-1),n=Math.min(n,s),i=Math.max(i,s)):this.minimapLines[s]-=t;return[n,i]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let n=this.minimapLines.length-1;n>=0&&!(this.minimapLines[n]<e.fromLineNumber);n--)this.minimapLines[n]+=t}}u(pf,"MinimapSamplingState");class w3 extends fs{constructor(e){super(e),this.tokensColorTracker=cp.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new ff(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=pf.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new xb(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new ff(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return t?this._actual.onLinesChanged(t[0],t[1]-t[0]+1):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){if(this._samplingState){const[t,n]=this._samplingState.onLinesDeleted(e);return t<=n&&this._actual.onLinesChanged(t+1,n-t+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){const t=[];for(const n of e.ranges){const i=this._samplingState.modelLineRangeToMinimapLineRange(n.fromLineNumber,n.toLineNumber);i&&t.push({fromLineNumber:i[0],toLineNumber:i[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),n=this._samplingState.modelLineToMinimapLine(n));const i={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:n,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(i)}_recreateLineSampling(){this._minimapSelections=null;const e=Boolean(this._samplingState),[t,n]=pf.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const i of n)switch(i.type){case"deleted":this._actual.onLinesDeleted(i.deleteFromLineNumber,i.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(i.insertFromLineNumber,i.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,n){if(this._samplingState){const i=[];for(let s=0,r=t-e+1;s<r;s++)n[s]?i[s]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+s-1]):i[s]=null;return i}return this._context.viewModel.getMinimapLinesRenderingData(e,t,n).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,n]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new re(t,e.startColumn,n,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){let n;if(this._samplingState){const s=this._samplingState.minimapLines[e-1],r=this._samplingState.minimapLines[t-1];n=new L(s,1,r,this._context.viewModel.getLineMaxColumn(r))}else n=new L(e,1,t,this._context.viewModel.getLineMaxColumn(t));const i=this._context.viewModel.getDecorationsInViewport(n);if(this._samplingState){const s=[];for(const r of i){if(!r.options.minimap)continue;const a=r.range,l=this._samplingState.modelLineToMinimapLine(a.startLineNumber),c=this._samplingState.modelLineToMinimapLine(a.endLineNumber);s.push(new lA(new L(l,a.startColumn,c,a.endColumn),r.options))}return s}return i}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new L(e,1,e,1),1,0)}setScrollTop(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}}u(w3,"Minimap");class xb extends U{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(wP),this._domNode=et(document.createElement("div")),_r.write(this._domNode,8),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=et(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=et(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=et(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=et(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=et(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=Dn(this._domNode.domNode,le.POINTER_DOWN,n=>{if(n.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(n.button===0&&this._lastRenderData){const c=li(this._slider.domNode),d=c.top+c.height/2;this._startSliderDragging(n,d,this._lastRenderData.renderedLayout)}return}const s=this._model.options.minimapLineHeight,r=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*n.offsetY;let l=Math.floor(r/s)+this._lastRenderData.renderedLayout.startLineNumber;l=Math.min(l,this._model.getLineCount()),this._model.revealLineNumber(l)}),this._sliderPointerMoveMonitor=new ch,this._sliderPointerDownListener=Dn(this._slider.domNode,le.POINTER_DOWN,n=>{n.preventDefault(),n.stopPropagation(),n.button===0&&this._lastRenderData&&this._startSliderDragging(n,n.pageY,this._lastRenderData.renderedLayout)}),this._gestureDisposable=gt.addTarget(this._domNode.domNode),this._sliderTouchStartListener=Y(this._domNode.domNode,Mt.Start,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(n))},{passive:!1}),this._sliderTouchMoveListener=Y(this._domNode.domNode,Mt.Change,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(n)},{passive:!1}),this._sliderTouchEndListener=Dn(this._domNode.domNode,Mt.End,n=>{n.preventDefault(),n.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,n){if(!e.target||!(e.target instanceof Element))return;const i=e.pageX;this._slider.toggleClassName("active",!0);const s=u((r,a)=>{const l=Math.abs(a-i);if(ei&&l>NQ){this._model.setScrollTop(n.scrollTop);return}const c=r-t;this._model.setScrollTop(n.getDesiredScrollTopFromDelta(c))},"handlePointerMove");e.pageY!==t&&s(e.pageY,i),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,r=>s(r.pageY,r.pageX),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,n=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(n)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){const e=["minimap"];return this._model.options.showSlider==="always"?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide&&e.push("autohide"),e.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new my(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){var n;return(n=this._lastRenderData)===null||n===void 0||n.onLinesDeleted(e,t),!0}onLinesInserted(e,t){var n;return(n=this._lastRenderData)===null||n===void 0||n.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(wP),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const n=Rg.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(n.sliderNeeded?"block":"none"),this._slider.setTop(n.sliderTop),this._slider.setHeight(n.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(n.sliderHeight),this.renderDecorations(n),this._lastRenderData=this.renderLines(n)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(L.compareRangesUsingStarts);const n=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);n.sort((g,f)=>(g.options.zIndex||0)-(f.options.zIndex||0));const{canvasInnerWidth:i,canvasInnerHeight:s}=this._model.options,r=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,c=this._decorationsCanvas.domNode.getContext("2d");c.clearRect(0,0,i,s);const d=new dE(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(c,t,d,e,r),this._renderDecorationsLineHighlights(c,n,d,e,r);const h=new dE(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(c,t,h,e,r,l,a,i),this._renderDecorationsHighlights(c,n,h,e,r,l,a,i)}}_renderSelectionLineHighlights(e,t,n,i,s){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let r=0,a=0;for(const l of t){const c=Math.max(i.startLineNumber,l.startLineNumber),d=Math.min(i.endLineNumber,l.endLineNumber);if(c>d)continue;for(let f=c;f<=d;f++)n.set(f,!0);const h=(c-i.startLineNumber)*s,g=(d-i.startLineNumber)*s+s;a>=h||(a>r&&e.fillRect(ql,r,e.canvas.width,a-r),r=h),a=g}a>r&&e.fillRect(ql,r,e.canvas.width,a-r)}_renderDecorationsLineHighlights(e,t,n,i,s){const r=new Map;for(let a=t.length-1;a>=0;a--){const l=t[a],c=l.options.minimap;if(!c||c.position!==Zs.Inline)continue;const d=Math.max(i.startLineNumber,l.range.startLineNumber),h=Math.min(i.endLineNumber,l.range.endLineNumber);if(d>h)continue;const g=c.getColor(this._theme.value);if(!g||g.isTransparent())continue;let f=r.get(g.toString());f||(f=g.transparent(.5).toString(),r.set(g.toString(),f)),e.fillStyle=f;for(let p=d;p<=h;p++){if(n.has(p))continue;n.set(p,!0);const _=(d-i.startLineNumber)*s;e.fillRect(ql,_,e.canvas.width,s)}}}_renderSelectionsHighlights(e,t,n,i,s,r,a,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const c of t){const d=Math.max(i.startLineNumber,c.startLineNumber),h=Math.min(i.endLineNumber,c.endLineNumber);if(!(d>h))for(let g=d;g<=h;g++)this.renderDecorationOnLine(e,n,c,this._selectionColor,i,g,s,s,r,a,l)}}_renderDecorationsHighlights(e,t,n,i,s,r,a,l){for(const c of t){const d=c.options.minimap;if(!d)continue;const h=Math.max(i.startLineNumber,c.range.startLineNumber),g=Math.min(i.endLineNumber,c.range.endLineNumber);if(h>g)continue;const f=d.getColor(this._theme.value);if(!(!f||f.isTransparent()))for(let p=h;p<=g;p++)switch(d.position){case Zs.Inline:this.renderDecorationOnLine(e,n,c.range,f,i,p,s,s,r,a,l);continue;case Zs.Gutter:{const _=(p-i.startLineNumber)*s,v=2;this.renderDecoration(e,f,v,_,PQ,s);continue}}}}renderDecorationOnLine(e,t,n,i,s,r,a,l,c,d,h){const g=(r-s.startLineNumber)*l;if(g+a<0||g>this._model.options.canvasInnerHeight)return;const{startLineNumber:f,endLineNumber:p}=n,_=f===r?n.startColumn:1,v=p===r?n.endColumn:this._model.getLineMaxColumn(r),C=this.getXOffsetForPosition(t,r,_,c,d,h),w=this.getXOffsetForPosition(t,r,v,c,d,h);this.renderDecoration(e,i,C,g,w-C,a)}getXOffsetForPosition(e,t,n,i,s,r){if(n===1)return ql;if((n-1)*s>=r)return r;let l=e.get(t);if(!l){const c=this._model.getLineContent(t);l=[ql];let d=ql;for(let h=1;h<c.length+1;h++){const g=c.charCodeAt(h-1),f=g===9?i*s:Tc(g)?2*s:s,p=d+f;if(p>=r){l[h]=r;break}l[h]=p,d=p}e.set(t,l)}return n-1<l.length?l[n-1]:r}renderDecoration(e,t,n,i,s,r){e.fillStyle=t&&t.toString()||"",e.fillRect(n,i,s,r)}renderLines(e){const t=e.startLineNumber,n=e.endLineNumber,i=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const he=this._lastRenderData._get();return new cE(e,he.imageData,he.lines)}const s=this._getBuffer();if(!s)return null;const[r,a,l]=xb._renderUntouchedLines(s,t,n,i,this._lastRenderData),c=this._model.getMinimapLinesRenderingData(t,n,l),d=this._model.getOptions().tabSize,h=this._model.options.defaultBackgroundColor,g=this._model.options.backgroundColor,f=this._model.options.foregroundAlpha,p=this._model.tokensColorTracker,_=p.backgroundIsLight(),v=this._model.options.renderMinimap,C=this._model.options.charRenderer(),w=this._model.options.fontScale,y=this._model.options.minimapCharWidth,E=(v===1?2:2+1)*w,k=i>E?Math.floor((i-E)/2):0,T=g.a/255,x=new ks(Math.round((g.r-h.r)*T+h.r),Math.round((g.g-h.g)*T+h.g),Math.round((g.b-h.b)*T+h.b),255);let M=0;const F=[];for(let he=0,Se=n-t+1;he<Se;he++)l[he]&&xb._renderLine(s,x,g.a,_,v,y,p,f,C,M,k,d,c[he],w,i),F[he]=new Lb(M),M+=i;const V=r===-1?0:r,j=(a===-1?s.height:a)-V;return this._canvas.domNode.getContext("2d").putImageData(s,0,0,0,V,s.width,j),new cE(e,s,F)}static _renderUntouchedLines(e,t,n,i,s){const r=[];if(!s){for(let x=0,M=n-t+1;x<M;x++)r[x]=!0;return[-1,-1,r]}const a=s._get(),l=a.imageData.data,c=a.rendLineNumberStart,d=a.lines,h=d.length,g=e.width,f=e.data,p=(n-t+1)*i*g*4;let _=-1,v=-1,C=-1,w=-1,y=-1,S=-1,E=0;for(let x=t;x<=n;x++){const M=x-t,F=x-c,V=F>=0&&F<h?d[F].dy:-1;if(V===-1){r[M]=!0,E+=i;continue}const G=V*g*4,j=(V+i)*g*4,ae=E*g*4,he=(E+i)*g*4;w===G&&S===ae?(w=j,S=he):(C!==-1&&(f.set(l.subarray(C,w),y),_===-1&&C===0&&C===y&&(_=w),v===-1&&w===p&&C===y&&(v=C)),C=G,w=j,y=ae,S=he),r[M]=!1,E+=i}C!==-1&&(f.set(l.subarray(C,w),y),_===-1&&C===0&&C===y&&(_=w),v===-1&&w===p&&C===y&&(v=C));const k=_===-1?-1:_/(g*4),T=v===-1?-1:v/(g*4);return[k,T,r]}static _renderLine(e,t,n,i,s,r,a,l,c,d,h,g,f,p,_){const v=f.content,C=f.tokens,w=e.width-r,y=_===1;let S=ql,E=0,k=0;for(let T=0,x=C.getCount();T<x;T++){const M=C.getEndOffset(T),F=C.getForeground(T),V=a.getColor(F);for(;E<M;E++){if(S>w)return;const G=v.charCodeAt(E);if(G===9){const j=g-(E+k)%g;k+=j-1,S+=j*r}else if(G===32)S+=r;else{const j=Tc(G)?2:1;for(let ae=0;ae<j;ae++)if(s===2?c.blockRenderChar(e,S,d+h,V,l,t,n,y):c.renderChar(e,S,d+h,G,V,l,t,n,p,i,y),S+=r,S>w)return}}}}}u(xb,"InnerMinimap");class dE{constructor(e,t,n){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=n,this._values=[];for(let i=0,s=this._endLineNumber-this._startLineNumber+1;i<s;i++)this._values[i]=n}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}u(dE,"ContiguousLineMap");At((o,e)=>{const t=o.getColor(CJ);t&&e.addRule(`.monaco-editor .minimap-slider .minimap-slider-horizontal { background: ${t}; }`);const n=o.getColor(wJ);n&&e.addRule(`.monaco-editor .minimap-slider:hover .minimap-slider-horizontal { background: ${n}; }`);const i=o.getColor(yJ);i&&e.addRule(`.monaco-editor .minimap-slider.active .minimap-slider-horizontal { background: ${i}; }`);const s=o.getColor(ip);s&&e.addRule(`.monaco-editor .minimap-shadow-visible { box-shadow: ${s} -6px 0 6px -6px inset; }`)});class y3 extends fs{constructor(e){super(e);const n=this._context.configuration.options.get(133);this._widgets={},this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,this._domNode=et(document.createElement("div")),_r.write(this._domNode,4),this._domNode.setClassName("overlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const n=this._context.configuration.options.get(133);return this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,!0}addWidget(e){const t=et(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),this._domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const n=this._widgets[e.getId()];return n.preference===t?!1:(n.preference=t,this.setShouldRender(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const i=this._widgets[t].domNode.domNode;delete this._widgets[t],i.parentNode.removeChild(i),this.setShouldRender()}}_renderWidget(e){const t=e.domNode;if(e.preference===null){t.setTop("");return}if(e.preference===0)t.setTop(0),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(e.preference===1){const n=t.domNode.clientHeight;t.setTop(this._editorHeight-n-2*this._horizontalScrollbarHeight),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else e.preference===2&&(t.setTop(0),t.domNode.style.right="50%")}prepareRender(e){}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets);for(let n=0,i=t.length;n<i;n++){const s=t[n];this._renderWidget(this._widgets[s])}}}u(y3,"ViewOverlayWidgets");class S3{constructor(e,t){const n=e.options;this.lineHeight=n.get(61),this.pixelRatio=n.get(131),this.overviewRulerLanes=n.get(76),this.renderBorder=n.get(75);const i=t.getColor(WJ);this.borderColor=i?i.toString():null,this.hideCursor=n.get(54);const s=t.getColor(RH);this.cursorColor=s?s.transparent(.7).toString():null,this.themeType=t.type;const r=n.get(67),a=r.enabled,l=r.side,c=t.getColor(UJ),d=Wt.getDefaultBackground();let h=null;c!==void 0?h=c:a&&(h=d),h===null||l==="left"?this.backgroundColor=null:this.backgroundColor=B.Format.CSS.formatHex(h);const f=n.get(133).overviewRuler;this.top=f.top,this.right=f.right,this.domWidth=f.width,this.domHeight=f.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[p,_]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=p,this.w=_}_initLanes(e,t,n){const i=t-e;if(n>=3){const s=Math.floor(i/3),r=Math.floor(i/3),a=i-s-r,l=e,c=l+s,d=l+s+a;return[[0,l,c,l,d,l,c,l],[0,s,a,s+a,r,s+a+r,a+r,s+a+r]]}else if(n===2){const s=Math.floor(i/2),r=i-s,a=e,l=a+s;return[[0,a,a,a,l,a,a,a],[0,s,s,s,r,s+r,s+r,s+r]]}else{const s=e,r=i;return[[0,s,s,s,s,s,s,s],[0,r,r,r,r,r,r,r]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&this.backgroundColor===e.backgroundColor&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}u(S3,"Settings");class T3 extends fs{constructor(e){super(e),this._domNode=et(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=Wt.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new S3(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}onConfigurationChanged(e){return this._updateSettings(!1)}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,n=e.selections.length;t<n;t++)this._cursorPositions[t]=e.selections[t].getPosition();return this._cursorPositions.sort(H.compare),!0}onDecorationsChanged(e){return!!e.affectsOverviewRuler}onFlushed(e){return!0}onScrollChanged(e){return e.scrollHeightChanged}onZonesChanged(e){return!0}onThemeChanged(e){return this._updateSettings(!1)}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render()}_render(){if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(this._settings.backgroundColor?this._settings.backgroundColor:""),this._domNode.setDisplay("none");return}this._domNode.setDisplay("block");const e=this._settings.canvasWidth,t=this._settings.canvasHeight,n=this._settings.lineHeight,i=this._context.viewLayout,s=this._context.viewLayout.getScrollHeight(),r=t/s,a=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme),l=6*this._settings.pixelRatio|0,c=l/2|0,d=this._domNode.domNode.getContext("2d");this._settings.backgroundColor===null?d.clearRect(0,0,e,t):(d.fillStyle=this._settings.backgroundColor,d.fillRect(0,0,e,t));const h=this._settings.x,g=this._settings.w;a.sort(cA.cmp);for(const f of a){const p=f.color,_=f.data;d.fillStyle=p;let v=0,C=0,w=0;for(let y=0,S=_.length/3;y<S;y++){const E=_[3*y],k=_[3*y+1],T=_[3*y+2];let x=i.getVerticalOffsetForLineNumber(k)*r|0,M=(i.getVerticalOffsetForLineNumber(T)+n)*r|0;if(M-x<l){let V=(x+M)/2|0;V<c?V=c:V+c>t&&(V=t-c),x=V-c,M=V+c}x>w+1||E!==v?(y!==0&&d.fillRect(h[v],C,g[v],w-C),v=E,C=x,w=M):M>w&&(w=M)}d.fillRect(h[v],C,g[v],w-C)}if(!this._settings.hideCursor&&this._settings.cursorColor){const f=2*this._settings.pixelRatio|0,p=f/2|0,_=this._settings.x[7],v=this._settings.w[7];d.fillStyle=this._settings.cursorColor;let C=-100,w=-100;for(let y=0,S=this._cursorPositions.length;y<S;y++){const E=this._cursorPositions[y];let k=i.getVerticalOffsetForLineNumber(E.lineNumber)*r|0;k<p?k=p:k+p>t&&(k=t-p);const T=k-p,x=T+f;T>w+1?(y!==0&&d.fillRect(_,C,v,w-C),C=T,w=x):x>w&&(w=x)}d.fillRect(_,C,v,w-C)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(d.beginPath(),d.lineWidth=1,d.strokeStyle=this._settings.borderColor,d.moveTo(0,0),d.lineTo(0,t),d.stroke(),d.moveTo(0,0),d.lineTo(e,0),d.stroke())}}u(T3,"DecorationsOverviewRuler");class uE{constructor(e,t,n){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=n|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}u(uE,"ColorZone");class mf{constructor(e,t,n,i){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.heightInLines=n,this.color=i,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.heightInLines===t.heightInLines?e.endLineNumber-t.endLineNumber:e.heightInLines-t.heightInLines:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}u(mf,"OverviewRulerZone");class L3{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(mf.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),n=Math.floor(this.getCanvasHeight()),i=Math.floor(this._outerHeight),s=n/i,r=Math.floor(4*this._pixelRatio/2),a=[];for(let l=0,c=this._zones.length;l<c;l++){const d=this._zones[l];if(!e){const S=d.getColorZones();if(S){a.push(S);continue}}const h=this._getVerticalOffsetForLine(d.startLineNumber),g=d.heightInLines===0?this._getVerticalOffsetForLine(d.endLineNumber)+t:h+d.heightInLines*t,f=Math.floor(s*h),p=Math.floor(s*g);let _=Math.floor((f+p)/2),v=p-_;v<r&&(v=r),_-v<0&&(_=v),_+v>n&&(_=n-v);const C=d.color;let w=this._color2Id[C];w||(w=++this._lastAssignedId,this._color2Id[C]=w,this._id2Color[w]=C);const y=new uE(_-v,_+v,w);d.setColorZone(y),a.push(y)}return this._colorZonesInvalid=!1,a.sort(uE.compare),a}}u(L3,"OverviewZoneManager");class x3 extends op{constructor(e,t){super(),this._context=e;const n=this._context.configuration.options;this._domNode=et(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new L3(i=>this._context.viewLayout.getVerticalOffsetForLineNumber(i)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(n.get(61)),this._zoneManager.setPixelRatio(n.get(131)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(61)&&(this._zoneManager.setLineHeight(t.get(61)),this._render()),e.hasChanged(131)&&(this._zoneManager.setPixelRatio(t.get(131)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),n=this._zoneManager.resolveColorZones(),i=this._zoneManager.getId2Color(),s=this._domNode.domNode.getContext("2d");return s.clearRect(0,0,e,t),n.length>0&&this._renderOneLane(s,n,i,e),!0}_renderOneLane(e,t,n,i){let s=0,r=0,a=0;for(const l of t){const c=l.colorId,d=l.from,h=l.to;c!==s?(e.fillRect(0,r,i,a-r),s=c,e.fillStyle=n[s],r=d,a=h):a>=d?a=Math.max(a,h):(e.fillRect(0,r,i,a-r),r=d,a=h)}e.fillRect(0,r,i,a-r)}}u(x3,"OverviewRuler");class E3 extends fs{constructor(e){super(e),this.domNode=et(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(93),this._typicalHalfwidthCharacterWidth=t.get(46).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(93),this._typicalHalfwidthCharacterWidth=t.get(46).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:i}=this._context.viewModel.model.getOptions(),s=i;let r=t-e;for(;r>0;){const a=et(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(s),this.domNode.appendChild(a),this._renderedRulers.push(a),r--}return}let n=e-t;for(;n>0;){const i=this._renderedRulers.pop();this.domNode.removeChild(i),n--}}render(e){this._ensureRulersCount();for(let t=0,n=this._rulers.length;t<n;t++){const i=this._renderedRulers[t],s=this._rulers[t];i.setBoxShadow(s.color?`1px 0 0 0 ${s.color} inset`:""),i.setHeight(Math.min(e.scrollHeight,1e6)),i.setLeft(s.column*this._typicalHalfwidthCharacterWidth)}}}u(E3,"Rulers");At((o,e)=>{const t=o.getColor(HJ);t&&e.addRule(`.monaco-editor .view-ruler { box-shadow: 1px 0 0 0 ${t} inset; }`)});class k3 extends fs{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const n=this._context.configuration.options.get(94);this._useShadows=n.useShadows,this._domNode=et(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(133);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.verticalScrollbarWidth}onConfigurationChanged(e){const n=this._context.configuration.options.get(94);return this._useShadows=n.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}u(k3,"ScrollDecorationViewPart");At((o,e)=>{const t=o.getColor(ip);t&&e.addRule(`.monaco-editor .scroll-decoration { box-shadow: ${t} 0 6px 6px -6px inset; }`)});class M3{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}u(M3,"HorizontalRangeWithStyle");class D3{constructor(e,t){this.lineNumber=e,this.ranges=t}}u(D3,"LineVisibleRangesWithStyle");function RQ(o){return new M3(o)}u(RQ,"toStyledRange");function FQ(o){return new D3(o.lineNumber,o.ranges.map(RQ))}u(FQ,"toStyled");class jt extends uh{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(61),this._roundedSelection=t.get(92),this._typicalHalfwidthCharacterWidth=t.get(46).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(61),this._roundedSelection=t.get(92),this._typicalHalfwidthCharacterWidth=t.get(46).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,n=e.length;t<n;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,n){const i=this._typicalHalfwidthCharacterWidth/4;let s=null,r=null;if(n&&n.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let c=0;!s&&c<n.length;c++)n[c].lineNumber===a&&(s=n[c].ranges[0]);const l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let c=n.length-1;!r&&c>=0;c--)n[c].lineNumber===l&&(r=n[c].ranges[0]);s&&!s.startStyle&&(s=null),r&&!r.startStyle&&(r=null)}for(let a=0,l=t.length;a<l;a++){const c=t[a].ranges[0],d=c.left,h=c.left+c.width,g={top:0,bottom:0},f={top:0,bottom:0};if(a>0){const p=t[a-1].ranges[0].left,_=t[a-1].ranges[0].left+t[a-1].ranges[0].width;tC(d-p)<i?g.top=2:d>p&&(g.top=1),tC(h-_)<i?f.top=2:p<h&&h<_&&(f.top=1)}else s&&(g.top=s.startStyle.top,f.top=s.endStyle.top);if(a+1<l){const p=t[a+1].ranges[0].left,_=t[a+1].ranges[0].left+t[a+1].ranges[0].width;tC(d-p)<i?g.bottom=2:p<d&&d<_&&(g.bottom=1),tC(h-_)<i?f.bottom=2:h<_&&(f.bottom=1)}else r&&(g.bottom=r.startStyle.bottom,f.bottom=r.endStyle.bottom);c.startStyle=g,c.endStyle=f}}_getVisibleRangesWithStyle(e,t,n){const s=(t.linesVisibleRangesForRange(e,!0)||[]).map(FQ);return!this._visibleRangesHaveGaps(s)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,s,n),s}_createSelectionPiece(e,t,n,i,s){return'<div class="cslr '+n+'" style="top:'+e.toString()+"px;left:"+i.toString()+"px;width:"+s.toString()+"px;height:"+t+'px;"></div>'}_actualRenderOneSelection(e,t,n,i){if(i.length===0)return;const s=!!i[0].ranges[0].startStyle,r=this._lineHeight.toString(),a=(this._lineHeight-1).toString(),l=i[0].lineNumber,c=i[i.length-1].lineNumber;for(let d=0,h=i.length;d<h;d++){const g=i[d],f=g.lineNumber,p=f-t,_=n&&(f===c||f===l)?a:r,v=n&&f===l?1:0;let C="",w="";for(let y=0,S=g.ranges.length;y<S;y++){const E=g.ranges[y];if(s){const T=E.startStyle,x=E.endStyle;if(T.top===1||T.bottom===1){C+=this._createSelectionPiece(v,_,jt.SELECTION_CLASS_NAME,E.left-jt.ROUNDED_PIECE_WIDTH,jt.ROUNDED_PIECE_WIDTH);let M=jt.EDITOR_BACKGROUND_CLASS_NAME;T.top===1&&(M+=" "+jt.SELECTION_TOP_RIGHT),T.bottom===1&&(M+=" "+jt.SELECTION_BOTTOM_RIGHT),C+=this._createSelectionPiece(v,_,M,E.left-jt.ROUNDED_PIECE_WIDTH,jt.ROUNDED_PIECE_WIDTH)}if(x.top===1||x.bottom===1){C+=this._createSelectionPiece(v,_,jt.SELECTION_CLASS_NAME,E.left+E.width,jt.ROUNDED_PIECE_WIDTH);let M=jt.EDITOR_BACKGROUND_CLASS_NAME;x.top===1&&(M+=" "+jt.SELECTION_TOP_LEFT),x.bottom===1&&(M+=" "+jt.SELECTION_BOTTOM_LEFT),C+=this._createSelectionPiece(v,_,M,E.left+E.width,jt.ROUNDED_PIECE_WIDTH)}}let k=jt.SELECTION_CLASS_NAME;if(s){const T=E.startStyle,x=E.endStyle;T.top===0&&(k+=" "+jt.SELECTION_TOP_LEFT),T.bottom===0&&(k+=" "+jt.SELECTION_BOTTOM_LEFT),x.top===0&&(k+=" "+jt.SELECTION_TOP_RIGHT),x.bottom===0&&(k+=" "+jt.SELECTION_BOTTOM_RIGHT)}w+=this._createSelectionPiece(v,_,k,E.left,E.width)}e[p][0]+=C,e[p][1]+=w}}prepareRender(e){const t=[],n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;for(let r=n;r<=i;r++){const a=r-n;t[a]=["",""]}const s=[];for(let r=0,a=this._selections.length;r<a;r++){const l=this._selections[r];if(l.isEmpty()){s[r]=null;continue}const c=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[r]);s[r]=c,this._actualRenderOneSelection(t,n,this._selections.length>1,c)}this._previousFrameVisibleRangesWithStyle=s,this._renderResult=t.map(([r,a])=>r+a)}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}u(jt,"SelectionsOverlay");jt.SELECTION_CLASS_NAME="selected-text";jt.SELECTION_TOP_LEFT="top-left-radius";jt.SELECTION_BOTTOM_LEFT="bottom-left-radius";jt.SELECTION_TOP_RIGHT="top-right-radius";jt.SELECTION_BOTTOM_RIGHT="bottom-right-radius";jt.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background";jt.ROUNDED_PIECE_WIDTH=10;At((o,e)=>{const t=o.getColor(Xa);t&&e.addRule(`.monaco-editor .focused .selected-text { background-color: ${t}; }`);const n=o.getColor(xA);n&&e.addRule(`.monaco-editor .selected-text { background-color: ${n}; }`);const i=o.getColor(CZ);i&&!i.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${i}; }`)});function tC(o){return o<0?-o:o}u(tC,"abs");class hE{constructor(e,t,n,i,s,r){this.top=e,this.left=t,this.width=n,this.height=i,this.textContent=s,this.textContentClassName=r}}u(hE,"ViewCursorRenderData");class gE{constructor(e){this._context=e;const t=this._context.configuration.options,n=t.get(46);this._cursorStyle=t.get(24),this._lineHeight=t.get(61),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=et(document.createElement("div")),this._domNode.setClassName(`cursor ${Qd}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),di(this._domNode,n),this._domNode.setDisplay("none"),this._position=new H(1,1),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(46);return this._cursorStyle=t.get(24),this._lineHeight=t.get(61),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),di(this._domNode,n),!0}onCursorPositionChanged(e){return this._position=e,!0}_getGraphemeAwarePosition(){const{lineNumber:e,column:t}=this._position,n=this._context.viewModel.getLineContent(e),[i,s]=_q(n,t-1);return[new H(e,i+1),n.substring(i,s)]}_prepareRender(e){let t="";const[n,i]=this._getGraphemeAwarePosition();if(this._cursorStyle===jn.Line||this._cursorStyle===jn.LineThin){const g=e.visibleRangeForPosition(n);if(!g||g.outsideRenderedLine)return null;let f;this._cursorStyle===jn.Line?(f=cP(this._lineCursorWidth>0?this._lineCursorWidth:2),f>2&&(t=i)):f=cP(1);let p=g.left;f>=2&&p>=1&&(p-=1);const _=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.bigNumbersDelta;return new hE(_,p,f,this._lineHeight,t,"")}const s=e.linesVisibleRangesForRange(new L(n.lineNumber,n.column,n.lineNumber,n.column+i.length),!1);if(!s||s.length===0)return null;const r=s[0];if(r.outsideRenderedLine||r.ranges.length===0)return null;const a=r.ranges[0],l=i==="	"?this._typicalHalfwidthCharacterWidth:a.width<1?this._typicalHalfwidthCharacterWidth:a.width;let c="";if(this._cursorStyle===jn.Block){const g=this._context.viewModel.getViewLineData(n.lineNumber);t=i;const f=g.tokens.findTokenIndexAtOffset(n.column-1);c=g.tokens.getClassName(f)}let d=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.bigNumbersDelta,h=this._lineHeight;return(this._cursorStyle===jn.Underline||this._cursorStyle===jn.UnderlineThin)&&(d+=this._lineHeight-2,h=2),new hE(d,a.left,l,h,t,c)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${Qd} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}u(gE,"ViewCursor");class bf extends fs{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(83),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new gE(this._context),this._secondaryCursors=[],this._renderData=[],this._domNode=et(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new hs,this._cursorFlatBlinkInterval=new tp,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(83),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let n=0,i=this._secondaryCursors.length;n<i;n++)this._secondaryCursors[n].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t){if(this._primaryCursor.onCursorPositionChanged(e),this._updateBlinking(),this._secondaryCursors.length<t.length){const n=t.length-this._secondaryCursors.length;for(let i=0;i<n;i++){const s=new gE(this._context);this._domNode.domNode.insertBefore(s.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(s)}}else if(this._secondaryCursors.length>t.length){const n=this._secondaryCursors.length-t.length;for(let i=0;i<n;i++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let n=0;n<t.length;n++)this._secondaryCursors[n].onCursorPositionChanged(t[n])}onCursorStateChanged(e){const t=[];for(let i=0,s=e.selections.length;i<s;i++)t[i]=e.selections[i].getPosition();this._onCursorPositionChanged(t[0],t.slice(1));const n=e.selections[0].isEmpty();return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=u(n=>{for(let i=0,s=e.ranges.length;i<s;i++)if(e.ranges[i].fromLineNumber<=n.lineNumber&&n.lineNumber<=e.ranges[i].toLineNumber)return!0;return!1},"shouldRender");if(t(this._primaryCursor.getPosition()))return!0;for(const n of this._secondaryCursors)if(t(n.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===0,n=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!n&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},bf.BLINK_INTERVAL):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},bf.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case jn.Line:e+=" cursor-line-style";break;case jn.Block:e+=" cursor-block-style";break;case jn.Underline:e+=" cursor-underline-style";break;case jn.LineThin:e+=" cursor-line-thin-style";break;case jn.BlockOutline:e+=" cursor-block-outline-style";break;case jn.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return this._cursorSmoothCaretAnimation&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,n=this._secondaryCursors.length;t<n;t++)this._secondaryCursors[t].prepareRender(e)}render(e){const t=[];let n=0;const i=this._primaryCursor.render(e);i&&(t[n++]=i);for(let s=0,r=this._secondaryCursors.length;s<r;s++){const a=this._secondaryCursors[s].render(e);a&&(t[n++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}}u(bf,"ViewCursors");bf.BLINK_INTERVAL=500;At((o,e)=>{const t=o.getColor(RH);if(t){let n=o.getColor(OJ);n||(n=t.opposite()),e.addRule(`.monaco-editor .inputarea.ime-input { caret-color: ${t}; }`),e.addRule(`.monaco-editor .cursors-layer .cursor { background-color: ${t}; border-color: ${t}; color: ${n}; }`),ui(o.type)&&e.addRule(`.monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ${n}; border-right: 1px solid ${n}; }`)}});const fT=u(()=>{throw new Error("Invalid change accessor")},"invalidFunc$1");class A3 extends fs{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(133);this._lineHeight=t.get(61),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,this.domNode=et(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=et(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const i of e)t.set(i.id,i);let n=!1;return this._context.viewModel.changeWhitespace(i=>{const s=Object.keys(this._zones);for(let r=0,a=s.length;r<a;r++){const l=s[r],c=this._zones[l],d=this._computeWhitespaceProps(c.delegate);c.isInHiddenArea=d.isInHiddenArea;const h=t.get(l);h&&(h.afterLineNumber!==d.afterViewLineNumber||h.height!==d.heightInPx)&&(i.changeOneWhitespace(l,d.afterViewLineNumber,d.heightInPx),this._safeCallOnComputedHeight(c.delegate,d.heightInPx),n=!0)}}),n}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(133);return this._lineHeight=t.get(61),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,e.hasChanged(61)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return typeof e.afterColumn<"u"?e.afterColumn:1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const r=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new H(r,this._context.viewModel.model.getLineMaxColumn(r))}let n;t.column===this._context.viewModel.model.getLineMaxColumn(t.lineNumber)?n=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber+1,column:1}):n=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber,column:t.column+1});const i=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity),s=this._context.viewModel.coordinatesConverter.modelPositionIsVisible(n);return{isInHiddenArea:!s,afterViewLineNumber:i.lineNumber,heightInPx:s?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.viewModel.changeWhitespace(n=>{const i={addZone:s=>(t=!0,this._addZone(n,s)),removeZone:s=>{s&&(t=this._removeZone(n,s)||t)},layoutZone:s=>{s&&(t=this._layoutZone(n,s)||t)}};OQ(e,i),i.addZone=fT,i.removeZone=fT,i.layoutZone=fT}),t}_addZone(e,t){const n=this._computeWhitespaceProps(t),s={whitespaceId:e.insertWhitespace(n.afterViewLineNumber,this._getZoneOrdinal(t),n.heightInPx,n.minWidthInPx),delegate:t,isInHiddenArea:n.isInHiddenArea,isVisible:!1,domNode:et(t.domNode),marginDomNode:t.marginDomNode?et(t.marginDomNode):null};return this._safeCallOnComputedHeight(s.delegate,n.heightInPx),s.domNode.setPosition("absolute"),s.domNode.domNode.style.width="100%",s.domNode.setDisplay("none"),s.domNode.setAttribute("monaco-view-zone",s.whitespaceId),this.domNode.appendChild(s.domNode),s.marginDomNode&&(s.marginDomNode.setPosition("absolute"),s.marginDomNode.domNode.style.width="100%",s.marginDomNode.setDisplay("none"),s.marginDomNode.setAttribute("monaco-view-zone",s.whitespaceId),this.marginDomNode.appendChild(s.marginDomNode)),this._zones[s.whitespaceId]=s,this.setShouldRender(),s.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t];return delete this._zones[t],e.removeWhitespace(n.whitespaceId),n.domNode.removeAttribute("monaco-visible-view-zone"),n.domNode.removeAttribute("monaco-view-zone"),n.domNode.domNode.parentNode.removeChild(n.domNode.domNode),n.marginDomNode&&(n.marginDomNode.removeAttribute("monaco-visible-view-zone"),n.marginDomNode.removeAttribute("monaco-view-zone"),n.marginDomNode.domNode.parentNode.removeChild(n.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t],i=this._computeWhitespaceProps(n.delegate);return n.isInHiddenArea=i.isInHiddenArea,e.changeOneWhitespace(n.whitespaceId,i.afterViewLineNumber,i.heightInPx),this._safeCallOnComputedHeight(n.delegate,i.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){if(this._zones.hasOwnProperty(e)){const t=this._zones[e];return Boolean(t.delegate.suppressMouseDown)}return!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(n){Ie(n)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(n){Ie(n)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,n={};let i=!1;for(const r of t)this._zones[r.id].isInHiddenArea||(n[r.id]=r,i=!0);const s=Object.keys(this._zones);for(let r=0,a=s.length;r<a;r++){const l=s[r],c=this._zones[l];let d=0,h=0,g="none";n.hasOwnProperty(l)?(d=n[l].verticalOffset-e.bigNumbersDelta,h=n[l].height,g="block",c.isVisible||(c.domNode.setAttribute("monaco-visible-view-zone","true"),c.isVisible=!0),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(n[l].verticalOffset))):(c.isVisible&&(c.domNode.removeAttribute("monaco-visible-view-zone"),c.isVisible=!1),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),c.domNode.setTop(d),c.domNode.setHeight(h),c.domNode.setDisplay(g),c.marginDomNode&&(c.marginDomNode.setTop(d),c.marginDomNode.setHeight(h),c.marginDomNode.setDisplay(g))}i&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}u(A3,"ViewZones");function OQ(o,e){try{return o(e)}catch(t){Ie(t)}}u(OQ,"safeInvoke1Arg");class I3{constructor(e){this._theme=e}get type(){return this._theme.type}get value(){return this._theme}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}u(I3,"EditorTheme");class N3{constructor(e,t,n){this.configuration=e,this.theme=new I3(t),this.viewModel=n,this.viewLayout=n.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}}u(N3,"ViewContext");class P3{constructor(e,t,n,i){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.whitespaceViewportData=n,this._model=i,this.visibleRange=new L(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewportViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}u(P3,"ViewportData");class R3 extends fs{constructor(e){super(e),this.blocks=[],this.contentWidth=-1,this.domNode=et(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let e=!1;const n=this._context.configuration.options.get(133),i=n.contentWidth-n.verticalScrollbarWidth;return this.contentWidth!==i&&(this.contentWidth=i,e=!0),e}dispose(){super.dispose()}onConfigurationChanged(e){return this.update()}onScrollChanged(e){return e.scrollTopChanged||e.scrollLeftChanged}onDecorationsChanged(e){return!0}onZonesChanged(e){return!0}prepareRender(e){}render(e){let t=0;const n=e.getDecorationsInViewport();for(const i of n){if(!i.options.blockClassName)continue;let s=this.blocks[t];s||(s=this.blocks[t]=et(document.createElement("div")),this.domNode.appendChild(s));const r=e.getVerticalOffsetForLineNumber(i.range.startLineNumber),a=e.getVerticalOffsetForLineNumber(i.range.endLineNumber+1);s.setClassName("blockDecorations-block "+i.options.blockClassName),s.setLeft(e.scrollLeft),s.setWidth(this.contentWidth),s.setTop(r),s.setHeight(a-r),t++}for(let i=t;i<this.blocks.length;i++)this.blocks[i].domNode.remove();this.blocks.length=t}}u(R3,"BlockDecorations");class F3 extends op{constructor(e,t,n,i,s,r){super(),this._selections=[new re(1,1,1,1)],this._renderAnimationFrame=null;const a=new QH(t,i,s,e);this._context=new N3(t,n,i),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=new KH(this._context,a,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=et(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=et(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=et(document.createElement("div")),_r.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new h3(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new G_(this._context,this._linesContent),this._viewZones=new A3(this._context),this._viewParts.push(this._viewZones);const l=new T3(this._context);this._viewParts.push(l);const c=new k3(this._context);this._viewParts.push(c);const d=new t3(this._context);this._viewParts.push(d),d.addDynamicOverlay(new s3(this._context)),d.addDynamicOverlay(new jt(this._context)),d.addDynamicOverlay(new p3(this._context)),d.addDynamicOverlay(new r3(this._context));const h=new n3(this._context);this._viewParts.push(h),h.addDynamicOverlay(new o3(this._context)),h.addDynamicOverlay(new g3(this._context)),h.addDynamicOverlay(new C3(this._context)),h.addDynamicOverlay(new v3(this._context)),h.addDynamicOverlay(new ku(this._context));const g=new Ac(this._context);g.getDomNode().appendChild(this._viewZones.marginDomNode),g.getDomNode().appendChild(h.getDomNode()),this._viewParts.push(g),this._contentWidgets=new i3(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new bf(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new y3(this._context),this._viewParts.push(this._overlayWidgets);const f=new E3(this._context);this._viewParts.push(f);const p=new R3(this._context);this._viewParts.push(p);const _=new w3(this._context);if(this._viewParts.push(_),l){const v=this._scrollbar.getOverviewRulerLayoutInfo();v.parent.insertBefore(l.getDomNode(),v.insertBefore)}this._linesContent.appendChild(d.getDomNode()),this._linesContent.appendChild(f.domNode),this._linesContent.appendChild(p.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(g.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(c.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(_.getDomNode()),this.domNode.appendChild(this._overflowGuardContainer),r?r.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode):this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this._applyLayout(),this._pointerHandler=this._register(new NH(this._context,a,this._createPointerHandlerHelper()))}_flushAccumulatedAndRenderNow(){this._renderNow()}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new LH(e,t)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new H(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(e))}}_applyLayout(){const t=this._context.configuration.options.get(133);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(130)+" "+l1(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){this._renderAnimationFrame===null&&(this._renderAnimationFrame=MV(this._onRenderScheduled.bind(this),100))}_onRenderScheduled(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()}_renderNow(){VQ(()=>this._actualRender())}_getViewPartsToRender(){const e=[];let t=0;for(const n of this._viewParts)n.shouldRender()&&(e[t++]=n);return e}_actualRender(){if(!uA(this.domNode.domNode))return;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return;const t=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const n=new P3(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(n),this._viewLines.shouldRender()&&(this._viewLines.renderText(n),this._viewLines.onDidRender(),e=this._getViewPartsToRender());const i=new vH(this._context.viewLayout,n,this._viewLines);for(const s of e)s.prepareRender(i);for(const s of e)s.render(i),s.onDidRender()}delegateVerticalScrollbarPointerDown(e){this._scrollbar.delegateVerticalScrollbarPointerDown(e)}restoreState(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop},1),this._context.viewModel.tokenizeViewport(),this._renderNow(),this._viewLines.updateLineWidths(),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:e.scrollLeft},1)}getOffsetForColumn(e,t){const n=this._context.viewModel.model.validatePosition({lineNumber:e,column:t}),i=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n);this._flushAccumulatedAndRenderNow();const s=this._viewLines.visibleRangeForPosition(new H(i.lineNumber,i.column));return s?s.left:-1}getTargetAtClientPoint(e,t){const n=this._pointerHandler.getTargetAtClientPoint(e,t);return n?U_.convertViewToModelMouseTarget(n,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(e){return new x3(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const n of this._viewParts)n.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){var t,n;let i=e.position&&e.position.range||null;if(i===null){const r=e.position?e.position.position:null;r!==null&&(i=new L(r.lineNumber,r.column,r.lineNumber,r.column))}const s=e.position?e.position.preference:null;this._contentWidgets.setWidgetPosition(e.widget,i,s,(n=(t=e.position)===null||t===void 0?void 0:t.positionAffinity)!==null&&n!==void 0?n:null),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){const t=e.position?e.position.preference:null;this._overlayWidgets.setWidgetPosition(e.widget,t)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}}u(F3,"View");function VQ(o){try{return o()}catch(e){Ie(e)}}u(VQ,"safeInvokeNoArg");class Eb{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new Rn(new L(1,1,1,1),0,new H(1,1),0),new Rn(new L(1,1,1,1),0,new H(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new Ke(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return re.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,n){this._setState(e,t,n)}static _validatePositionWithCache(e,t,n,i){return t.equals(n)?i:e.normalizePosition(t,2)}static _validateViewState(e,t){const n=t.position,i=t.selectionStart.getStartPosition(),s=t.selectionStart.getEndPosition(),r=e.normalizePosition(n,2),a=this._validatePositionWithCache(e,i,n,r),l=this._validatePositionWithCache(e,s,i,a);return n.equals(r)&&i.equals(a)&&s.equals(l)?t:new Rn(L.fromPositions(a,l),t.selectionStartLeftoverVisibleColumns+i.column-a.column,r,t.leftoverVisibleColumns+n.column-r.column)}_setState(e,t,n){if(n&&(n=Eb._validateViewState(e.viewModel,n)),t){const i=e.model.validateRange(t.selectionStart),s=t.selectionStart.equalsRange(i)?t.selectionStartLeftoverVisibleColumns:0,r=e.model.validatePosition(t.position),a=t.position.equals(r)?t.leftoverVisibleColumns:0;t=new Rn(i,s,r,a)}else{if(!n)return;const i=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(n.selectionStart)),s=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(n.position));t=new Rn(i,n.selectionStartLeftoverVisibleColumns,s,n.leftoverVisibleColumns)}if(n){const i=e.coordinatesConverter.validateViewRange(n.selectionStart,t.selectionStart),s=e.coordinatesConverter.validateViewPosition(n.position,t.position);n=new Rn(i,t.selectionStartLeftoverVisibleColumns,s,t.leftoverVisibleColumns)}else{const i=e.coordinatesConverter.convertModelPositionToViewPosition(new H(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),s=e.coordinatesConverter.convertModelPositionToViewPosition(new H(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),r=new L(i.lineNumber,i.column,s.lineNumber,s.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);n=new Rn(r,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=n,this._updateTrackedRange(e)}}u(Eb,"Cursor");class fE{constructor(e){this.context=e,this.cursors=[new Eb(e)],this.lastAddedCursorIndex=0}dispose(){for(const e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(const e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(const e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(const e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(e=>e.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(e=>e.asCursorState())}getViewPositions(){return this.cursors.map(e=>e.viewState.position)}getTopMostViewPosition(){return x$(this.cursors,Am(e=>e.viewState.position,H.compare)).viewState.position}getBottomMostViewPosition(){return IO(this.cursors,Am(e=>e.viewState.position,H.compare)).viewState.position}getSelections(){return this.cursors.map(e=>e.modelState.selection)}getViewSelections(){return this.cursors.map(e=>e.viewState.selection)}setSelections(e){this.setStates(Ke.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){e!==null&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.cursors.length-1,n=e.length;if(t<n){const i=n-t;for(let s=0;s<i;s++)this._addSecondaryCursor()}else if(t>n){const i=t-n;for(let s=0;s<i;s++)this._removeSecondaryCursor(this.cursors.length-2)}for(let i=0;i<n;i++)this.cursors[i+1].setState(this.context,e[i].modelState,e[i].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new Eb(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return this.cursors.length===1||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(this.cursors.length===1)return;const e=this.cursors.slice(0),t=[];for(let n=0,i=e.length;n<i;n++)t.push({index:n,selection:e[n].modelState.selection});t.sort(Am(n=>n.selection,L.compareRangesUsingStarts));for(let n=0;n<t.length-1;n++){const i=t[n],s=t[n+1],r=i.selection,a=s.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||r.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(r.getEndPosition()):l=a.getStartPosition().isBefore(r.getEndPosition()),l){const c=i.index<s.index?n:n+1,d=i.index<s.index?n+1:n,h=t[d].index,g=t[c].index,f=t[d].selection,p=t[c].selection;if(!f.equalsSelection(p)){const _=f.plusRange(p),v=f.selectionStartLineNumber===f.startLineNumber&&f.selectionStartColumn===f.startColumn,C=p.selectionStartLineNumber===p.startLineNumber&&p.selectionStartColumn===p.startColumn;let w;h===this.lastAddedCursorIndex?(w=v,this.lastAddedCursorIndex=g):w=C;let y;w?y=new re(_.startLineNumber,_.startColumn,_.endLineNumber,_.endColumn):y=new re(_.endLineNumber,_.endColumn,_.startLineNumber,_.startColumn),t[c].selection=y;const S=Ke.fromModelSelection(y);e[g].setState(this.context,S.modelState,S.viewState)}for(const _ of t)_.index>h&&_.index--;e.splice(h,1),t.splice(d,1),this._removeSecondaryCursor(h-1),n--}}}}u(fE,"CursorCollection");class pE{constructor(e,t,n,i){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=n,this.cursorConfig=i}}u(pE,"CursorContext");class O3{constructor(){this.changeType=1}}u(O3,"ModelRawFlush");class Do{constructor(e,t,n,i,s){this.ownerId=e,this.lineNumber=t,this.column=n,this.options=i,this.order=s}static applyInjectedText(e,t){if(!t||t.length===0)return e;let n="",i=0;for(const s of t)n+=e.substring(i,s.column-1),i=s.column-1,n+=s.options.content;return n+=e.substring(i),n}static fromDecorations(e){const t=[];for(const n of e)n.options.before&&n.options.before.content.length>0&&t.push(new Do(n.ownerId,n.range.startLineNumber,n.range.startColumn,n.options.before,0)),n.options.after&&n.options.after.content.length>0&&t.push(new Do(n.ownerId,n.range.endLineNumber,n.range.endColumn,n.options.after,1));return t.sort((n,i)=>n.lineNumber===i.lineNumber?n.column===i.column?n.order-i.order:n.column-i.column:n.lineNumber-i.lineNumber),t}}u(Do,"LineInjectedText");class mE{constructor(e,t,n){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=n}}u(mE,"ModelRawLineChanged");class V3{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}u(V3,"ModelRawLinesDeleted");class H3{constructor(e,t,n,i){this.changeType=4,this.injectedTexts=i,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}}u(H3,"ModelRawLinesInserted");class B3{constructor(){this.changeType=5}}u(B3,"ModelRawEOLChanged");class tu{constructor(e,t,n,i){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=i,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const n=[].concat(e.changes).concat(t.changes),i=t.versionId,s=e.isUndoing||t.isUndoing,r=e.isRedoing||t.isRedoing;return new tu(n,i,s,r)}}u(tu,"ModelRawContentChangedEvent");class GA{constructor(e){this.changes=e}}u(GA,"ModelInjectedTextChangedEvent");class mc{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=tu.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),n=mc._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new mc(t,n)}static _mergeChangeEvents(e,t){const n=[].concat(e.changes).concat(t.changes),i=t.eol,s=t.versionId,r=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush;return{changes:n,eol:i,versionId:s,isUndoing:r,isRedoing:a,isFlush:l}}}u(mc,"InternalModelContentChangeEvent");class W3{constructor(){this.type=0}}u(W3,"ViewCompositionStartEvent");class U3{constructor(){this.type=1}}u(U3,"ViewCompositionEndEvent");class G3{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}u(G3,"ViewConfigurationChangedEvent");class z3{constructor(e,t){this.type=3,this.selections=e,this.modelSelections=t}}u(z3,"ViewCursorStateChangedEvent");class _d{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0)}}u(_d,"ViewDecorationsChangedEvent");class hm{constructor(){this.type=5}}u(hm,"ViewFlushedEvent");class K3{constructor(e){this.type=6,this.isFocused=e}}u(K3,"ViewFocusChangedEvent");class j3{constructor(){this.type=7}}u(j3,"ViewLanguageConfigurationEvent");class gm{constructor(){this.type=8}}u(gm,"ViewLineMappingChangedEvent");class zA{constructor(e,t){this.fromLineNumber=e,this.count=t,this.type=9}}u(zA,"ViewLinesChangedEvent");class w1{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}u(w1,"ViewLinesDeletedEvent");class y1{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}u(y1,"ViewLinesInsertedEvent");class Om{constructor(e,t,n,i,s,r,a){this.source=e,this.minimalReveal=t,this.range=n,this.selections=i,this.verticalType=s,this.revealHorizontal=r,this.scrollType=a,this.type=12}}u(Om,"ViewRevealRangeRequestEvent");class $3{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}u($3,"ViewScrollChangedEvent");class q3{constructor(e){this.theme=e,this.type=14}}u(q3,"ViewThemeChangedEvent");class Y3{constructor(e){this.type=15,this.ranges=e}}u(Y3,"ViewTokensChangedEvent");class X3{constructor(){this.type=16}}u(X3,"ViewTokensColorsChangedEvent");let HQ=u(class{constructor(){this.type=17}},"ViewZonesChangedEvent");class Z3 extends U{constructor(){super(),this._onEvent=this._register(new R),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,n=this._outgoingEvents.length;t<n;t++){const i=this._outgoingEvents[t].kind===e.kind?this._outgoingEvents[t].attemptToMerge(e):null;if(i){this._outgoingEvents[t]=i;return}}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,n=this._eventHandlers.length;t<n;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new J3),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const n of e)this._addOutgoingEvent(n);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const n of t)n.handleEvents(e)}}}u(Z3,"ViewModelEventDispatcher");class J3{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}u(J3,"ViewModelEventsCollector");class by{constructor(e,t,n,i){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=n,this.contentHeight=i,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(e){return e.kind!==this.kind?null:new by(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}u(by,"ContentSizeChangedEvent");class _y{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(e){return e.kind!==this.kind?null:new _y(this.oldHasFocus,e.hasFocus)}}u(_y,"FocusChangedEvent");class vy{constructor(e,t,n,i,s,r,a,l){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=n,this._oldScrollTop=i,this.scrollWidth=s,this.scrollLeft=r,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}attemptToMerge(e){return e.kind!==this.kind?null:new vy(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}u(vy,"ScrollChangedEvent");class Q3{constructor(){this.kind=3}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}u(Q3,"ViewZonesChangedEvent");class e7{constructor(){this.kind=4}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}u(e7,"HiddenAreasChangedEvent");class kb{constructor(e,t,n,i,s,r,a){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=n,this.modelVersionId=i,this.source=s,this.reason=r,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const n=e.length,i=t.length;if(n!==i)return!1;for(let s=0;s<n;s++)if(!e[s].equalsSelection(t[s]))return!1;return!0}isNoOp(){return kb._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(e){return e.kind!==this.kind?null:new kb(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}u(kb,"CursorStateChangedEvent");class t7{constructor(){this.kind=5}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}u(t7,"ReadOnlyEditAttemptEvent");class n7{constructor(e){this.event=e,this.kind=7}isNoOp(){return!1}attemptToMerge(e){return null}}u(n7,"ModelDecorationsChangedEvent");class i7{constructor(e){this.event=e,this.kind=8}isNoOp(){return!1}attemptToMerge(e){return null}}u(i7,"ModelLanguageChangedEvent");class s7{constructor(e){this.event=e,this.kind=9}isNoOp(){return!1}attemptToMerge(e){return null}}u(s7,"ModelLanguageConfigurationChangedEvent");class o7{constructor(e){this.event=e,this.kind=10}isNoOp(){return!1}attemptToMerge(e){return null}}u(o7,"ModelContentChangedEvent");class r7{constructor(e){this.event=e,this.kind=11}isNoOp(){return!1}attemptToMerge(e){return null}}u(r7,"ModelOptionsChangedEvent");class a7{constructor(e){this.event=e,this.kind=12}isNoOp(){return!1}attemptToMerge(e){return null}}u(a7,"ModelTokensChangedEvent");class Mu extends U{constructor(e,t,n,i){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=n,this.context=new pE(this._model,this._viewModel,this._coordinatesConverter,i),this._cursors=new fE(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=st(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new pE(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const n=this._autoClosedActions[t];n.isValid(e)||(n.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,n,i){let s=!1;i!==null&&i.length>Mu.MAX_CURSOR_COUNT&&(i=i.slice(0,Mu.MAX_CURSOR_COUNT),s=!0);const r=Fg.from(this._model,this);return this._cursors.setStates(i),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,n,r,s)}setCursorColumnSelectData(e){this._columnSelectData=e}revealPrimary(e,t,n,i,s,r){const a=this._cursors.getViewPositions();let l=null,c=null;a.length>1?c=this._cursors.getViewSelections():l=L.fromPositions(a[0],a[0]),e.emitViewEvent(new Om(t,n,l,c,i,s,r))}saveState(){const e=[],t=this._cursors.getSelections();for(let n=0,i=t.length;n<i;n++){const s=t[n];e.push({inSelectionMode:!s.isEmpty(),selectionStart:{lineNumber:s.selectionStartLineNumber,column:s.selectionStartColumn},position:{lineNumber:s.positionLineNumber,column:s.positionColumn}})}return e}restoreState(e,t){const n=[];for(let i=0,s=t.length;i<s;i++){const r=t[i];let a=1,l=1;r.position&&r.position.lineNumber&&(a=r.position.lineNumber),r.position&&r.position.column&&(l=r.position.column);let c=a,d=l;r.selectionStart&&r.selectionStart.lineNumber&&(c=r.selectionStart.lineNumber),r.selectionStart&&r.selectionStart.column&&(d=r.selectionStart.column),n.push({selectionStartLineNumber:c,selectionStartColumn:d,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",0,Ke.fromModelSelections(n)),this.revealPrimary(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,t){if(t instanceof GA){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{const n=t.rawContentChangedEvent;if(this._knownModelVersionId=n.versionId,this._isHandling)return;const i=n.containsEvent(1);if(this._prevEditOperationType=0,i)this._cursors.dispose(),this._cursors=new fE(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&n.resultingSelection&&n.resultingSelection.length>0){const s=Ke.fromModelSelections(n.resultingSelection);this.setStates(e,"modelChange",n.isUndoing?5:n.isRedoing?6:2,s)&&this.revealPrimary(e,"modelChange",!1,0,!0,0)}else{const s=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,Ke.fromModelSelections(s))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),n=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,t),toViewLineNumber:n.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,n)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,n,i){this.setStates(e,t,i,Ke.fromModelSelections(n))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){const n=[],i=[];for(let a=0,l=e.length;a<l;a++)n.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),i.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});const s=this._model.deltaDecorations([],n),r=this._model.deltaDecorations([],i);this._autoClosedActions.push(new bE(this._model,s,r))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=l7.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);const n=[],i=[];for(let s=0;s<e.commands.length;s++){const r=e.commands[s];r instanceof PA&&r.enclosingRange&&r.closeCharacterRange&&(n.push(r.closeCharacterRange),i.push(r.enclosingRange))}n.length>0&&this._pushAutoClosedAction(n,i),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,n,i,s){const r=Fg.from(this._model,this);if(r.equals(i))return!1;const a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new z3(l,a)),!i||i.cursorState.length!==r.cursorState.length||r.cursorState.some((c,d)=>!c.modelState.equals(i.cursorState[d].modelState))){const c=i?i.cursorState.map(h=>h.modelState.selection):null,d=i?i.modelVersionId:0;e.emitOutgoingEvent(new kb(c,a,d,r.modelVersionId,t||"keyboard",n,s))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;const t=[];for(let n=0,i=e.length;n<i;n++){const s=e[n];if(!s.text||s.text.indexOf(`
`)>=0)return null;const r=s.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!r)return null;const a=r[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;const c=l[0].open,d=s.text.length-r[2].length-1,h=s.text.lastIndexOf(c,d-1);if(h===-1)return null;t.push([h,d])}return t}executeEdits(e,t,n,i){let s=null;t==="snippet"&&(s=this._findAutoClosingPairs(n)),s&&(n[0]._isTracked=!0);const r=[],a=[],l=this._model.pushEditOperations(this.getSelections(),n,c=>{if(s)for(let h=0,g=s.length;h<g;h++){const[f,p]=s[h],_=c[h],v=_.range.startLineNumber,C=_.range.startColumn-1+f,w=_.range.startColumn-1+p;r.push(new L(v,w+1,v,w+2)),a.push(new L(v,C+1,v,w+2))}const d=i(c);return d&&(this._isHandling=!0),d});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),r.length>0&&this._pushAutoClosedAction(r,a)}_executeEdit(e,t,n,i=0){if(this.context.cursorConfig.readOnly)return;const s=Fg.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(r){Ie(r)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,n,i,s,!1)&&this.revealPrimary(t,n,!1,0,!0,0)}getAutoClosedCharacters(){return bE.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._compositionState=new Og(this._model,this.getSelections())}endComposition(e,t){const n=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit(()=>{t==="keyboard"&&this._executeEditOperation(Ft.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,n,this.getSelections(),this.getAutoClosedCharacters()))},e,t)}type(e,t,n){this._executeEdit(()=>{if(n==="keyboard"){const i=t.length;let s=0;for(;s<i;){const r=GD(t,s),a=t.substr(s,r);this._executeEditOperation(Ft.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),s+=r}}else this._executeEditOperation(Ft.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,n)}compositionType(e,t,n,i,s,r){if(t.length===0&&n===0&&i===0){if(s!==0){const a=this.getSelections().map(l=>{const c=l.getPosition();return new re(c.lineNumber,c.column+s,c.lineNumber,c.column+s)});this.setSelections(e,r,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(Ft.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,n,i,s))},e,r)}paste(e,t,n,i,s){this._executeEdit(()=>{this._executeEditOperation(Ft.paste(this.context.cursorConfig,this._model,this.getSelections(),t,n,i||[]))},e,s,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(Ic.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,n){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new wi(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}executeCommands(e,t,n){this._executeEdit(()=>{this._executeEditOperation(new wi(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}}u(Mu,"CursorsController");Mu.MAX_CURSOR_COUNT=1e4;class Fg{constructor(e,t){this.modelVersionId=e,this.cursorState=t}static from(e,t){return new Fg(e.getVersionId(),t.getCursorStates())}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,n=this.cursorState.length;t<n;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}u(Fg,"CursorModelState");class bE{constructor(e,t,n){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=n}static getAllAutoClosedCharacters(e){let t=[];for(const n of e)t=t.concat(n.getAutoClosedCharactersRanges());return t}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const n=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);n&&e.push(n)}return e}isValid(e){const t=[];for(let n=0;n<this._autoClosedEnclosingDecorations.length;n++){const i=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[n]);if(i&&(t.push(i),i.startLineNumber!==i.endLineNumber))return!1}t.sort(L.compareRangesUsingStarts),e.sort(L.compareRangesUsingStarts);for(let n=0;n<e.length;n++)if(n>=t.length||!t[n].strictContainsRange(e[n]))return!1;return!0}}u(bE,"AutoClosedAction");class l7{static executeCommands(e,t,n){const i={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},s=this._innerExecuteCommands(i,n);for(let r=0,a=i.trackedRanges.length;r<a;r++)i.model._setTrackedRange(i.trackedRanges[r],null,0);return s}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const n=this._getEditOperations(e,t);if(n.operations.length===0)return null;const i=n.operations,s=this._getLoserCursorMap(i);if(s.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;const r=[];for(let c=0,d=i.length;c<d;c++)s.hasOwnProperty(i[c].identifier.major.toString())||r.push(i[c]);n.hadTrackedEditOperation&&r.length>0&&(r[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,r,c=>{const d=[];for(let f=0;f<e.selectionsBefore.length;f++)d[f]=[];for(const f of c)f.identifier&&d[f.identifier.major].push(f);const h=u((f,p)=>f.identifier.minor-p.identifier.minor,"minorBasedSorter"),g=[];for(let f=0;f<e.selectionsBefore.length;f++)d[f].length>0?(d[f].sort(h),g[f]=t[f].computeCursorState(e.model,{getInverseEditOperations:()=>d[f],getTrackedSelection:p=>{const _=parseInt(p,10),v=e.model._getTrackedRange(e.trackedRanges[_]);return e.trackedRangesDirection[_]===0?new re(v.startLineNumber,v.startColumn,v.endLineNumber,v.endColumn):new re(v.endLineNumber,v.endColumn,v.startLineNumber,v.startColumn)}})):g[f]=e.selectionsBefore[f];return g});a||(a=e.selectionsBefore);const l=[];for(const c in s)s.hasOwnProperty(c)&&l.push(parseInt(c,10));l.sort((c,d)=>d-c);for(const c of l)a.splice(c,1);return a}static _arrayIsEmpty(e){for(let t=0,n=e.length;t<n;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let n=[],i=!1;for(let s=0,r=t.length;s<r;s++){const a=t[s];if(a){const l=this._getEditOperationsFromCommand(e,s,a);n=n.concat(l.operations),i=i||l.hadTrackedEditOperation}}return{operations:n,hadTrackedEditOperation:i}}static _getEditOperationsFromCommand(e,t,n){const i=[];let s=0;const r=u((h,g,f=!1)=>{L.isEmpty(h)&&g===""||i.push({identifier:{major:t,minor:s++},range:h,text:g,forceMoveMarkers:f,isAutoWhitespaceEdit:n.insertsAutoWhitespace})},"addEditOperation");let a=!1;const d={addEditOperation:r,addTrackedEditOperation:u((h,g,f)=>{a=!0,r(h,g,f)},"addTrackedEditOperation"),trackSelection:u((h,g)=>{const f=re.liftSelection(h);let p;if(f.isEmpty())if(typeof g=="boolean")g?p=2:p=3;else{const C=e.model.getLineMaxColumn(f.startLineNumber);f.startColumn===C?p=2:p=3}else p=1;const _=e.trackedRanges.length,v=e.model._setTrackedRange(null,f,p);return e.trackedRanges[_]=v,e.trackedRangesDirection[_]=f.getDirection(),_.toString()},"trackSelection")};try{n.getEditOperations(e.model,d)}catch(h){return Ie(h),{operations:[],hadTrackedEditOperation:!1}}return{operations:i,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((n,i)=>-L.compareRangesUsingEnds(n.range,i.range));const t={};for(let n=1;n<e.length;n++){const i=e[n-1],s=e[n];if(L.getStartPosition(i.range).isBefore(L.getEndPosition(s.range))){let r;i.identifier.major>s.identifier.major?r=i.identifier.major:r=s.identifier.major,t[r.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===r&&(e.splice(a,1),a<n&&n--,a--);n>0&&n--}}return t}}u(l7,"CommandExecutor");class c7{constructor(e,t,n){this.text=e,this.startSelection=t,this.endSelection=n}}u(c7,"CompositionLineState");class Og{constructor(e,t){this._original=Og._capture(e,t)}static _capture(e,t){const n=[];for(const i of t){if(i.startLineNumber!==i.endLineNumber)return null;n.push(new c7(e.getLineContent(i.startLineNumber),i.startColumn-1,i.endColumn-1))}return n}deduceOutcome(e,t){if(!this._original)return null;const n=Og._capture(e,t);if(!n||this._original.length!==n.length)return null;const i=[];for(let s=0,r=this._original.length;s<r;s++)i.push(Og._deduceOutcome(this._original[s],n[s]));return i}static _deduceOutcome(e,t){const n=Math.min(e.startSelection,t.startSelection,bu(e.text,t.text)),i=Math.min(e.text.length-e.endSelection,t.text.length-t.endSelection,sb(e.text,t.text)),s=e.text.substring(n,e.text.length-i),r=t.text.substring(n,t.text.length-i);return new JH(s,e.startSelection-n,e.endSelection-n,r,t.startSelection-n,t.endSelection-n)}}u(Og,"CompositionState");class KA{constructor(e,t,n,i,s,r){this.id=e,this.label=t,this.alias=n,this._precondition=i,this._run=s,this._contextKeyService=r}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(){return this.isSupported()?this._run():Promise.resolve(void 0)}}u(KA,"InternalEditorAction");function Du(o){let e=0,t=0,n=0,i=0;for(let s=0,r=o.length;s<r;s++){const a=o.charCodeAt(s);a===13?(e===0&&(t=s),e++,s+1<r&&o.charCodeAt(s+1)===10?(i|=2,s++):i|=3,n=s+1):a===10&&(i|=1,e===0&&(t=s),e++,n=s+1)}return e===0&&(t=o.length),[e,t,o.length-n,i]}u(Du,"countEOL");class fm{constructor(e,t,n,i){this.range=e,this.nestingLevel=t,this.nestingLevelOfEqualBracketType=n,this.isInvalid=i}}u(fm,"BracketInfo");class d7{constructor(e,t,n,i,s,r){this.range=e,this.openingBracketRange=t,this.closingBracketRange=n,this.nestingLevel=i,this.nestingLevelOfEqualBracketType=s,this.bracketPairNode=r}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}}u(d7,"BracketPairInfo");class u7 extends d7{constructor(e,t,n,i,s,r,a){super(e,t,n,i,s,r),this.minVisibleColumnIndentation=a}}u(u7,"BracketPairWithMinIndentationInfo");class S1{constructor(e,t){this.lineCount=e,this.columnCount=t}toString(){return`${this.lineCount},${this.columnCount}`}}u(S1,"LengthObj");S1.zero=new S1(0,0);function BQ(o,e,t,n){return o!==t?sn(t-o,n):sn(0,n-e)}u(BQ,"lengthDiff");const So=0;function WQ(o){return o===0}u(WQ,"lengthIsZero");const Ms=Math.pow(2,26);function sn(o,e){return o*Ms+e}u(sn,"toLength");function bc(o){const e=o,t=Math.floor(e/Ms),n=e-t*Ms;return new S1(t,n)}u(bc,"lengthToObj");function UQ(o){return Math.floor(o/Ms)}u(UQ,"lengthGetLineCount");function Jt(o,e){return e<Ms?o+e:o-o%Ms+e}u(Jt,"lengthAdd");function GQ(o,e){const t=o,n=e;if(n-t<=0)return So;const s=Math.floor(t/Ms),r=Math.floor(n/Ms),a=n-r*Ms;if(s===r){const l=t-s*Ms;return sn(0,a-l)}else return sn(r-s,a)}u(GQ,"lengthDiffNonNegative");function Vg(o,e){return o<e}u(Vg,"lengthLessThan");function rc(o,e){return o<=e}u(rc,"lengthLessThanEqual");function pm(o,e){return o>=e}u(pm,"lengthGreaterThanEqual");function Rh(o){return sn(o.lineNumber-1,o.column-1)}u(Rh,"positionToLength");function nl(o,e){const t=o,n=Math.floor(t/Ms),i=t-n*Ms,s=e,r=Math.floor(s/Ms),a=s-r*Ms;return new L(n+1,i+1,r+1,a+1)}u(nl,"lengthsToRange");function zQ(o){const e=sa(o);return sn(e.length-1,e[e.length-1].length)}u(zQ,"lengthOfString");class _E{constructor(e,t,n){this.startOffset=e,this.endOffset=t,this.newLength=n}}u(_E,"TextEditInfo");class h7{constructor(e,t){this.documentLength=t,this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(n=>Cy.from(n))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],n=t?this.translateOldToCur(t.offsetObj):this.documentLength;return GQ(e,n)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?sn(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):sn(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=bc(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?sn(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):sn(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],n=this.translateOldToCur(t.endOffsetAfterObj);if(rc(n,e)){this.nextEditIdx++;const i=bc(n),s=bc(this.translateOldToCur(t.endOffsetBeforeObj)),r=i.lineCount-s.lineCount;this.deltaOldToNewLineCount+=r;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=i.columnCount-s.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}}u(h7,"BeforeEditPositionMapper");class Cy{constructor(e,t,n){this.endOffsetBeforeObj=bc(t),this.endOffsetAfterObj=bc(Jt(e,n)),this.offsetObj=bc(e)}static from(e){return new Cy(e.startOffset,e.endOffset,e.newLength)}}u(Cy,"TextEditInfoCache");const i0=new Array;class ln{constructor(e,t){this.items=e,this.additionalItems=t}static create(e,t){if(e<=128&&t.length===0){let n=ln.cache[e];return n||(n=new ln(e,t),ln.cache[e]=n),n}return new ln(e,t)}static getEmpty(){return this.empty}add(e,t){const n=t.getKey(e);let i=n>>5;if(i===0){const r=1<<n|this.items;return r===this.items?this:ln.create(r,this.additionalItems)}i--;const s=this.additionalItems.slice(0);for(;s.length<i;)s.push(0);return s[i]|=1<<(n&31),ln.create(this.items,s)}merge(e){const t=this.items|e.items;if(this.additionalItems===i0&&e.additionalItems===i0)return t===this.items?this:t===e.items?e:ln.create(t,i0);const n=new Array;for(let i=0;i<Math.max(this.additionalItems.length,e.additionalItems.length);i++){const s=this.additionalItems[i]||0,r=e.additionalItems[i]||0;n.push(s|r)}return ln.create(t,n)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}}u(ln,"SmallImmutableSet");ln.cache=new Array(129);ln.empty=ln.create(0,i0);const NP={getKey(o){return o}};class jA{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}}u(jA,"DenseKeyProvider");class wy{constructor(e){this._length=e}get length(){return this._length}}u(wy,"BaseAstNode");class _f extends wy{constructor(e,t,n,i,s){super(e),this.openingBracket=t,this.child=n,this.closingBracket=i,this.missingOpeningBracketIds=s}static create(e,t,n){let i=e.length;return t&&(i=Jt(i,t.length)),n&&(i=Jt(i,n.length)),new _f(i,e,t,n,t?t.missingOpeningBracketIds:ln.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=new Array;return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new _f(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(Jt(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}u(_f,"PairAstNode");class vr extends wy{constructor(e,t,n){super(e),this.listHeight=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}static create23(e,t,n,i=!1){let s=e.length,r=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(s=Jt(s,t.length),r=r.merge(t.missingOpeningBracketIds),n){if(e.listHeight!==n.listHeight)throw new Error("Invalid list heights");s=Jt(s,n.length),r=r.merge(n.missingOpeningBracketIds)}return i?new g7(s,e.listHeight+1,e,t,n,r):new vf(s,e.listHeight+1,e,t,n,r)}static getEmpty(){return new f7(So,0,[],ln.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(e-1,n),n}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(0,n),n}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds))return!1;let t=this,n;for(;t.kind===4&&(n=t.childrenLength)>0;)t=t.getChild(n-1);return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,n=this.getChild(0).missingOpeningBracketIds;for(let i=1;i<e;i++){const s=this.getChild(i);t=Jt(t,s.length),n=n.merge(s.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let n=Number.MAX_SAFE_INTEGER,i=e;for(let s=0;s<this.childrenLength;s++){const r=this.getChild(s);r&&(n=Math.min(n,r.computeMinIndentation(i,t)),i=Jt(i,r.length))}return this.cachedMinIndentation=n,n}}u(vr,"ListAstNode");class vf extends vr{constructor(e,t,n,i,s,r){super(e,t,r),this._item1=n,this._item2=i,this._item3=s}get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}deepClone(){return new vf(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}u(vf,"TwoThreeListAstNode");class g7 extends vf{toMutable(){return new vf(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}u(g7,"Immutable23ListAstNode");class Mb extends vr{constructor(e,t,n,i){super(e,t,i),this._children=n}get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new Mb(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}u(Mb,"ArrayListAstNode");class f7 extends Mb{toMutable(){return new Mb(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}u(f7,"ImmutableArrayListAstNode");const KQ=[];class yy extends wy{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return KQ}deepClone(){return this}}u(yy,"ImmutableLeafAstNode");class kd extends yy{get kind(){return 0}get missingOpeningBracketIds(){return ln.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const n=bc(e),i=(n.columnCount===0?n.lineCount:n.lineCount+1)+1,s=UQ(Jt(e,this.length))+1;let r=Number.MAX_SAFE_INTEGER;for(let a=i;a<=s;a++){const l=t.getLineFirstNonWhitespaceColumn(a),c=t.getLineContent(a);if(l===0)continue;const d=mn.visibleColumnFromColumn(c,l,t.getOptions().tabSize);r=Math.min(r,d)}return r}}u(kd,"TextAstNode");class Db extends yy{constructor(e,t,n){super(e),this.bracketInfo=t,this.bracketIds=n}static create(e,t,n){return new Db(e,t,n)}get kind(){return 1}get missingOpeningBracketIds(){return ln.getEmpty()}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}u(Db,"BracketAstNode");class p7 extends yy{constructor(e,t){super(t),this.missingOpeningBracketIds=e}get kind(){return 3}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}u(p7,"InvalidBracketAstNode");let tc=u(class{constructor(e,t,n,i,s){this.length=e,this.kind=t,this.bracketId=n,this.bracketIds=i,this.astNode=s}},"Token");class $A{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new m7(this.textModel,this.bracketTokens),this._offset=So,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return sn(this.textBufferLineCount,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=Jt(this._offset,e);const t=bc(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=Jt(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}u($A,"TextBufferTokenizer");class m7{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset)):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const s=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=s.length,s}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let n=0;for(;;){const s=this.lineTokens,r=s.getCount();let a=null;if(this.lineTokenOffset<r){const l=s.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<r&&l===s.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const c=$n.getTokenType(l)===0,d=$n.containsBalancedBrackets(l),h=s.getEndOffset(this.lineTokenOffset);if(d&&c&&this.lineCharOffset<h){const g=s.getLanguageId(this.lineTokenOffset),f=this.line.substring(this.lineCharOffset,h),p=this.bracketTokens.getSingleLanguageBracketTokens(g),_=p.regExpGlobal;if(_){_.lastIndex=0;const v=_.exec(f);v&&(a=p.getToken(v[0]),a&&(this.lineCharOffset+=v.index))}}if(n+=h-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=h}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,n+=33,n>1e3))break;if(n>1500)break}const i=BQ(e,t,this.lineIdx,this.lineCharOffset);return new tc(i,0,-1,ln.getEmpty(),new kd(i))}}u(m7,"NonPeekableTextBufferTokenizer");class b7{constructor(e,t){this.text=e,this._offset=So,this.idx=0;const n=t.getRegExpStr(),i=n?new RegExp(n+`|
`,"gi"):null,s=[];let r,a=0,l=0,c=0,d=0;const h=new Array;for(let p=0;p<60;p++)h.push(new tc(sn(0,p),0,-1,ln.getEmpty(),new kd(sn(0,p))));const g=new Array;for(let p=0;p<60;p++)g.push(new tc(sn(1,p),0,-1,ln.getEmpty(),new kd(sn(1,p))));if(i)for(i.lastIndex=0;(r=i.exec(e))!==null;){const p=r.index,_=r[0];if(_===`
`)a++,l=p+1;else{if(c!==p){let v;if(d===a){const C=p-c;if(C<h.length)v=h[C];else{const w=sn(0,C);v=new tc(w,0,-1,ln.getEmpty(),new kd(w))}}else{const C=a-d,w=p-l;if(C===1&&w<g.length)v=g[w];else{const y=sn(C,w);v=new tc(y,0,-1,ln.getEmpty(),new kd(y))}}s.push(v)}s.push(t.getToken(_)),c=p+_.length,d=a}}const f=e.length;if(c!==f){const p=d===a?sn(0,f-c):sn(a-d,f-l);s.push(new tc(p,0,-1,ln.getEmpty(),new kd(p)))}this.length=sn(a,f-l),this.tokens=s}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new p4}}u(b7,"FastTokenizer");class Sy{constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}static createFromLanguage(e,t){function n(s){return t.getKey(`${s.languageId}:::${s.bracketText}`)}u(n,"getId");const i=new Map;for(const s of e.bracketsNew.openingBrackets){const r=sn(0,s.bracketText.length),a=n(s),l=ln.getEmpty().add(a,NP);i.set(s.bracketText,new tc(r,1,a,l,Db.create(r,s,l)))}for(const s of e.bracketsNew.closingBrackets){const r=sn(0,s.bracketText.length);let a=ln.getEmpty();const l=s.getClosedBrackets();for(const c of l)a=a.add(n(c),NP);i.set(s.bracketText,new tc(r,2,n(l[0]),a,Db.create(r,s,a)))}return new Sy(i)}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>jQ(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(const[t,n]of this.map)if(n.kind===2&&n.bracketIds.intersects(e))return t}get isEmpty(){return this.map.size===0}}u(Sy,"BracketTokens");function jQ(o){let e=As(o);return/^[\w ]+/.test(o)&&(e=`\\b${e}`),/[\w ]+$/.test(o)&&(e=`${e}\\b`),e}u(jQ,"prepareBracketForRegExp");class qA{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=Sy.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}u(qA,"LanguageAgnosticBracketTokens");function $Q(o){if(o.length===0)return null;if(o.length===1)return o[0];let e=0;function t(){if(e>=o.length)return null;const r=e,a=o[r].listHeight;for(e++;e<o.length&&o[e].listHeight===a;)e++;return e-r>=2?_7(r===0&&e===o.length?o:o.slice(r,e),!1):o[r]}u(t,"readNode");let n=t(),i=t();if(!i)return n;for(let r=t();r;r=t())PP(n,i)<=PP(i,r)?(n=pT(n,i),i=r):i=pT(i,r);return pT(n,i)}u($Q,"concat23Trees");function _7(o,e=!1){if(o.length===0)return null;if(o.length===1)return o[0];let t=o.length;for(;t>3;){const n=t>>1;for(let i=0;i<n;i++){const s=i<<1;o[i]=vr.create23(o[s],o[s+1],s+3===t?o[s+2]:null,e)}t=n}return vr.create23(o[0],o[1],t>=3?o[2]:null,e)}u(_7,"concat23TreesOfSameHeight");function PP(o,e){return Math.abs(o.listHeight-e.listHeight)}u(PP,"heightDiff");function pT(o,e){return o.listHeight===e.listHeight?vr.create23(o,e,null,!1):o.listHeight>e.listHeight?qQ(o,e):YQ(e,o)}u(pT,"concat$1");function qQ(o,e){o=o.toMutable();let t=o;const n=new Array;let i;for(;;){if(e.listHeight===t.listHeight){i=e;break}if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeLastElementMutable()}for(let s=n.length-1;s>=0;s--){const r=n[s];i?r.childrenLength>=3?i=vr.create23(r.unappendChild(),i,null,!1):(r.appendChildOfSameHeight(i),i=void 0):r.handleChildrenChanged()}return i?vr.create23(o,i,null,!1):o}u(qQ,"append");function YQ(o,e){o=o.toMutable();let t=o;const n=new Array;for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeFirstElementMutable()}let i=e;for(let s=n.length-1;s>=0;s--){const r=n[s];i?r.childrenLength>=3?i=vr.create23(i,r.unprependChild(),null,!1):(r.prependChildOfSameHeight(i),i=void 0):r.handleChildrenChanged()}return i?vr.create23(i,o,null,!1):o}u(YQ,"prepend");class v7{constructor(e){this.lastOffset=So,this.nextNodes=[e],this.offsets=[So],this.idxs=[]}readLongestNodeAt(e,t){if(Vg(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const n=Bp(this.nextNodes);if(!n)return;const i=Bp(this.offsets);if(Vg(e,i))return;if(Vg(i,e))if(Jt(i,n.length)<=e)this.nextNodeAfterCurrent();else{const s=mT(n);s!==-1?(this.nextNodes.push(n.getChild(s)),this.offsets.push(i),this.idxs.push(s)):this.nextNodeAfterCurrent()}else{if(t(n))return this.nextNodeAfterCurrent(),n;{const s=mT(n);if(s===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(n.getChild(s)),this.offsets.push(i),this.idxs.push(s)}}}}nextNodeAfterCurrent(){for(;;){const e=Bp(this.offsets),t=Bp(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const n=Bp(this.nextNodes),i=mT(n,this.idxs[this.idxs.length-1]);if(i!==-1){this.nextNodes.push(n.getChild(i)),this.offsets.push(Jt(e,t.length)),this.idxs[this.idxs.length-1]=i;break}else this.idxs.pop()}}}u(v7,"NodeReader");function mT(o,e=-1){for(;;){if(e++,e>=o.childrenLength)return-1;if(o.getChild(e))return e}}u(mT,"getNextChildIdx");function Bp(o){return o.length>0?o[o.length-1]:void 0}u(Bp,"lastOrUndefined");function vE(o,e,t,n){return new C7(o,e,t,n).parseDocument()}u(vE,"parseDocument");class C7{constructor(e,t,n,i){if(this.tokenizer=e,this.createImmutableLists=i,this._itemsConstructed=0,this._itemsFromCache=0,n&&i)throw new Error("Not supported");this.oldNodeReader=n?new v7(n):void 0,this.positionMapper=new h7(t,e.length)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(ln.getEmpty());return e||(e=vr.getEmpty()),e}parseList(e){const t=new Array;for(;;){const i=this.tokenizer.peek();if(!i||i.kind===2&&i.bracketIds.intersects(e))break;const s=this.parseChild(e);s.kind===4&&s.childrenLength===0||t.push(s)}return this.oldNodeReader?$Q(t):_7(t,this.createImmutableLists)}parseChild(e){if(this.oldNodeReader){const n=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(!WQ(n)){const i=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),s=>Vg(s.length,n)?s.canBeReused(e):!1);if(i)return this._itemsFromCache++,this.tokenizer.skip(i.length),i}}this._itemsConstructed++;const t=this.tokenizer.read();switch(t.kind){case 2:return new p7(t.bracketIds,t.length);case 0:return t.astNode;case 1:{const n=e.merge(t.bracketIds),i=this.parseList(n),s=this.tokenizer.peek();return s&&s.kind===2&&(s.bracketId===t.bracketId||s.bracketIds.intersects(t.bracketIds))?(this.tokenizer.read(),_f.create(t.astNode,i,s.astNode)):_f.create(t.astNode,i,null)}default:throw new Error("unexpected")}}}u(C7,"Parser");class w7 extends U{constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new R,this.denseKeyProvider=new jA,this.brackets=new qA(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,e.tokenization.backgroundTokenizationState===0){const n=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),i=new b7(this.textModel.getValue(),n);this.initialAstWithoutTokens=vE(i,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}else e.tokenization.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):e.tokenization.backgroundTokenizationState===1&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens)}didLanguageChange(e){return this.brackets.didLanguageChange(e)}handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===2){const e=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:e}){const t=e.map(n=>new _E(sn(n.fromLineNumber-1,0),sn(n.toLineNumber,0),sn(n.toLineNumber-n.fromLineNumber+1,0)));this.astWithTokens=this.parseDocumentFromTextBuffer(t,this.astWithTokens,!1),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){const t=e.changes.map(n=>{const i=L.lift(n.range);return new _E(Rh(i.getStartPosition()),Rh(i.getEndPosition()),zQ(n.text))}).reverse();this.astWithTokens=this.parseDocumentFromTextBuffer(t,this.astWithTokens,!1),this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(t,this.initialAstWithoutTokens,!1))}parseDocumentFromTextBuffer(e,t,n){const i=t,s=new $A(this.textModel,this.brackets);return vE(s,e,i,n)}getBracketsInRange(e){const t=sn(e.startLineNumber-1,e.startColumn-1),n=sn(e.endLineNumber-1,e.endColumn-1),i=new Array,s=this.initialAstWithoutTokens||this.astWithTokens;return CE(s,So,s.length,t,n,i,0,new Map),i}getBracketPairsInRange(e,t){const n=new Array,i=Rh(e.getStartPosition()),s=Rh(e.getEndPosition()),r=this.initialAstWithoutTokens||this.astWithTokens,a=new T7(n,t,this.textModel);return wE(r,So,r.length,i,s,a,0,new Map),n}getFirstBracketAfter(e){const t=this.initialAstWithoutTokens||this.astWithTokens;return S7(t,So,t.length,Rh(e))}getFirstBracketBefore(e){const t=this.initialAstWithoutTokens||this.astWithTokens;return y7(t,So,t.length,Rh(e))}}u(w7,"BracketPairsTree");function y7(o,e,t,n){if(o.kind===4||o.kind===2){const i=[];for(const s of o.children)t=Jt(e,s.length),i.push({nodeOffsetStart:e,nodeOffsetEnd:t}),e=t;for(let s=i.length-1;s>=0;s--){const{nodeOffsetStart:r,nodeOffsetEnd:a}=i[s];if(Vg(r,n)){const l=y7(o.children[s],r,a,n);if(l)return l}}return null}else{if(o.kind===3)return null;if(o.kind===1){const i=nl(e,t);return{bracketInfo:o.bracketInfo,range:i}}}return null}u(y7,"getFirstBracketBefore");function S7(o,e,t,n){if(o.kind===4||o.kind===2){for(const i of o.children){if(t=Jt(e,i.length),Vg(n,t)){const s=S7(i,e,t,n);if(s)return s}e=t}return null}else{if(o.kind===3)return null;if(o.kind===1){const i=nl(e,t);return{bracketInfo:o.bracketInfo,range:i}}}return null}u(S7,"getFirstBracketAfter");function CE(o,e,t,n,i,s,r,a){if(!(r>200)){if(o.kind===4)for(const l of o.children)t=Jt(e,l.length),rc(e,i)&&pm(t,n)&&CE(l,e,t,n,i,s,r,a),e=t;else if(o.kind===2){let l=0;if(a){let c=a.get(o.openingBracket.text);c===void 0&&(c=0),l=c,c++,a.set(o.openingBracket.text,c)}{const c=o.openingBracket;if(t=Jt(e,c.length),rc(e,i)&&pm(t,n)){const d=nl(e,t);s.push(new fm(d,r,l,!o.closingBracket))}e=t}if(o.child){const c=o.child;t=Jt(e,c.length),rc(e,i)&&pm(t,n)&&CE(c,e,t,n,i,s,r+1,a),e=t}if(o.closingBracket){const c=o.closingBracket;if(t=Jt(e,c.length),rc(e,i)&&pm(t,n)){const d=nl(e,t);s.push(new fm(d,r,l,!1))}e=t}a?.set(o.openingBracket.text,l)}else if(o.kind===3){const l=nl(e,t);s.push(new fm(l,r-1,0,!0))}else if(o.kind===1){const l=nl(e,t);s.push(new fm(l,r-1,0,!1))}}}u(CE,"collectBrackets");class T7{constructor(e,t,n){this.result=e,this.includeMinIndentation=t,this.textModel=n}}u(T7,"CollectBracketPairsContext");function wE(o,e,t,n,i,s,r,a){var l;if(!(r>200))if(o.kind===2){let c=0;if(a){let g=a.get(o.openingBracket.text);g===void 0&&(g=0),c=g,g++,a.set(o.openingBracket.text,g)}const d=Jt(e,o.openingBracket.length);let h=-1;if(s.includeMinIndentation&&(h=o.computeMinIndentation(e,s.textModel)),s.result.push(new u7(nl(e,t),nl(e,d),o.closingBracket?nl(Jt(d,((l=o.child)===null||l===void 0?void 0:l.length)||So),t):void 0,r,c,o,h)),e=d,o.child){const g=o.child;t=Jt(e,g.length),rc(e,i)&&pm(t,n)&&wE(g,e,t,n,i,s,r+1,a)}a?.set(o.openingBracket.text,c)}else{let c=e;for(const d of o.children){const h=c;c=Jt(c,d.length),rc(h,i)&&rc(n,c)&&wE(d,h,c,n,i,s,r,a)}}}u(wE,"collectBracketPairs");class L7 extends U{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new gi),this.onDidChangeEmitter=new R,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(this.languageConfigurationService.onDidChange(n=>{var i;(!n.languageId||!((i=this.bracketPairsTree.value)===null||i===void 0)&&i.object.didLanguageChange(n.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}))}get canBuildAST(){return this.textModel.getValueLength()<=5e6}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){var t;(t=this.bracketPairsTree.value)===null||t===void 0||t.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){var e;(e=this.bracketPairsTree.value)===null||e===void 0||e.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){var t;(t=this.bracketPairsTree.value)===null||t===void 0||t.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){const e=new J;this.bracketPairsTree.value=XQ(e.add(new w7(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.bracketPairsTree.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!1))||[]}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!0))||[]}getBracketsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketsInRange(e))||[]}findMatchingBracketUp(e,t,n){const i=this.textModel.validatePosition(t),s=this.textModel.getLanguageIdAtPosition(i.lineNumber,i.column);if(this.canBuildAST){const r=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew.getClosingBracketInfo(e);if(!r)return null;const a=z0(this.getBracketPairsInRange(L.fromPositions(t,t))||[],l=>r.closes(l.openingBracketInfo));return a?a.openingBracketRange:null}else{const r=e.toLowerCase(),a=this.languageConfigurationService.getLanguageConfiguration(s).brackets;if(!a)return null;const l=a.textIsBracket[r];return l?nC(this._findMatchingBracketUp(l,i,bT(n))):null}}matchBracket(e,t){if(this.canBuildAST){const n=IO(this.getBracketPairsInRange(L.fromPositions(e,e)).filter(i=>i.closingBracketRange!==void 0&&(i.openingBracketRange.containsPosition(e)||i.closingBracketRange.containsPosition(e))),Am(i=>i.openingBracketRange.containsPosition(e)?i.openingBracketRange:i.closingBracketRange,L.compareRangesUsingStarts));return n?[n.openingBracketRange,n.closingBracketRange]:null}else{const n=bT(t);return this._matchBracket(this.textModel.validatePosition(e),n)}}_establishBracketSearchOffsets(e,t,n,i){const s=t.getCount(),r=t.getLanguageId(i);let a=Math.max(0,e.column-1-n.maxBracketLength);for(let c=i-1;c>=0;c--){const d=t.getEndOffset(c);if(d<=a)break;if(Rr(t.getStandardTokenType(c))||t.getLanguageId(c)!==r){a=d;break}}let l=Math.min(t.getLineContent().length,e.column-1+n.maxBracketLength);for(let c=i+1;c<s;c++){const d=t.getStartOffset(c);if(d>=l)break;if(Rr(t.getStandardTokenType(c))||t.getLanguageId(c)!==r){l=d;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e,t){const n=e.lineNumber,i=this.textModel.tokenization.getLineTokens(n),s=this.textModel.getLineContent(n),r=i.findTokenIndexAtOffset(e.column-1);if(r<0)return null;const a=this.languageConfigurationService.getLanguageConfiguration(i.getLanguageId(r)).brackets;if(a&&!Rr(i.getStandardTokenType(r))){let{searchStartOffset:l,searchEndOffset:c}=this._establishBracketSearchOffsets(e,i,a,r),d=null;for(;;){const h=Vs.findNextBracketInRange(a.forwardRegex,n,s,l,c);if(!h)break;if(h.startColumn<=e.column&&e.column<=h.endColumn){const g=s.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),f=this._matchFoundBracket(h,a.textIsBracket[g],a.textIsOpenBracket[g],t);if(f){if(f instanceof Wr)return null;d=f}}l=h.endColumn-1}if(d)return d}if(r>0&&i.getStartOffset(r)===e.column-1){const l=r-1,c=this.languageConfigurationService.getLanguageConfiguration(i.getLanguageId(l)).brackets;if(c&&!Rr(i.getStandardTokenType(l))){const{searchStartOffset:d,searchEndOffset:h}=this._establishBracketSearchOffsets(e,i,c,l),g=Vs.findPrevBracketInRange(c.reversedRegex,n,s,d,h);if(g&&g.startColumn<=e.column&&e.column<=g.endColumn){const f=s.substring(g.startColumn-1,g.endColumn-1).toLowerCase(),p=this._matchFoundBracket(g,c.textIsBracket[f],c.textIsOpenBracket[f],t);if(p)return p instanceof Wr?null:p}}}return null}_matchFoundBracket(e,t,n,i){if(!t)return null;const s=n?this._findMatchingBracketDown(t,e.getEndPosition(),i):this._findMatchingBracketUp(t,e.getStartPosition(),i);return s?s instanceof Wr?s:[e,s]:null}_findMatchingBracketUp(e,t,n){const i=e.languageId,s=e.reversedRegex;let r=-1,a=0;const l=u((c,d,h,g)=>{for(;;){if(n&&++a%100===0&&!n())return Wr.INSTANCE;const f=Vs.findPrevBracketInRange(s,c,d,h,g);if(!f)break;const p=d.substring(f.startColumn-1,f.endColumn-1).toLowerCase();if(e.isOpen(p)?r++:e.isClose(p)&&r--,r===0)return f;g=f.startColumn-1}return null},"searchPrevMatchingBracketInRange");for(let c=t.lineNumber;c>=1;c--){const d=this.textModel.tokenization.getLineTokens(c),h=d.getCount(),g=this.textModel.getLineContent(c);let f=h-1,p=g.length,_=g.length;c===t.lineNumber&&(f=d.findTokenIndexAtOffset(t.column-1),p=t.column-1,_=t.column-1);let v=!0;for(;f>=0;f--){const C=d.getLanguageId(f)===i&&!Rr(d.getStandardTokenType(f));if(C)v?p=d.getStartOffset(f):(p=d.getStartOffset(f),_=d.getEndOffset(f));else if(v&&p!==_){const w=l(c,g,p,_);if(w)return w}v=C}if(v&&p!==_){const C=l(c,g,p,_);if(C)return C}}return null}_findMatchingBracketDown(e,t,n){const i=e.languageId,s=e.forwardRegex;let r=1,a=0;const l=u((d,h,g,f)=>{for(;;){if(n&&++a%100===0&&!n())return Wr.INSTANCE;const p=Vs.findNextBracketInRange(s,d,h,g,f);if(!p)break;const _=h.substring(p.startColumn-1,p.endColumn-1).toLowerCase();if(e.isOpen(_)?r++:e.isClose(_)&&r--,r===0)return p;g=p.endColumn-1}return null},"searchNextMatchingBracketInRange"),c=this.textModel.getLineCount();for(let d=t.lineNumber;d<=c;d++){const h=this.textModel.tokenization.getLineTokens(d),g=h.getCount(),f=this.textModel.getLineContent(d);let p=0,_=0,v=0;d===t.lineNumber&&(p=h.findTokenIndexAtOffset(t.column-1),_=t.column-1,v=t.column-1);let C=!0;for(;p<g;p++){const w=h.getLanguageId(p)===i&&!Rr(h.getStandardTokenType(p));if(w)C||(_=h.getStartOffset(p)),v=h.getEndOffset(p);else if(C&&_!==v){const y=l(d,f,_,v);if(y)return y}C=w}if(C&&_!==v){const w=l(d,f,_,v);if(w)return w}}return null}findPrevBracket(e){var t;const n=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getFirstBracketBefore(n))||null;let i=null,s=null,r=null;for(let a=n.lineNumber;a>=1;a--){const l=this.textModel.tokenization.getLineTokens(a),c=l.getCount(),d=this.textModel.getLineContent(a);let h=c-1,g=d.length,f=d.length;if(a===n.lineNumber){h=l.findTokenIndexAtOffset(n.column-1),g=n.column-1,f=n.column-1;const _=l.getLanguageId(h);i!==_&&(i=_,s=this.languageConfigurationService.getLanguageConfiguration(i).brackets,r=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew)}let p=!0;for(;h>=0;h--){const _=l.getLanguageId(h);if(i!==_){if(s&&r&&p&&g!==f){const C=Vs.findPrevBracketInRange(s.reversedRegex,a,d,g,f);if(C)return this._toFoundBracket(r,C);p=!1}i=_,s=this.languageConfigurationService.getLanguageConfiguration(i).brackets,r=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew}const v=!!s&&!Rr(l.getStandardTokenType(h));if(v)p?g=l.getStartOffset(h):(g=l.getStartOffset(h),f=l.getEndOffset(h));else if(r&&s&&p&&g!==f){const C=Vs.findPrevBracketInRange(s.reversedRegex,a,d,g,f);if(C)return this._toFoundBracket(r,C)}p=v}if(r&&s&&p&&g!==f){const _=Vs.findPrevBracketInRange(s.reversedRegex,a,d,g,f);if(_)return this._toFoundBracket(r,_)}}return null}findNextBracket(e){var t;const n=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getFirstBracketAfter(n))||null;const i=this.textModel.getLineCount();let s=null,r=null,a=null;for(let l=n.lineNumber;l<=i;l++){const c=this.textModel.tokenization.getLineTokens(l),d=c.getCount(),h=this.textModel.getLineContent(l);let g=0,f=0,p=0;if(l===n.lineNumber){g=c.findTokenIndexAtOffset(n.column-1),f=n.column-1,p=n.column-1;const v=c.getLanguageId(g);s!==v&&(s=v,r=this.languageConfigurationService.getLanguageConfiguration(s).brackets,a=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew)}let _=!0;for(;g<d;g++){const v=c.getLanguageId(g);if(s!==v){if(a&&r&&_&&f!==p){const w=Vs.findNextBracketInRange(r.forwardRegex,l,h,f,p);if(w)return this._toFoundBracket(a,w);_=!1}s=v,r=this.languageConfigurationService.getLanguageConfiguration(s).brackets,a=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew}const C=!!r&&!Rr(c.getStandardTokenType(g));if(C)_||(f=c.getStartOffset(g)),p=c.getEndOffset(g);else if(a&&r&&_&&f!==p){const w=Vs.findNextBracketInRange(r.forwardRegex,l,h,f,p);if(w)return this._toFoundBracket(a,w)}_=C}if(a&&r&&_&&f!==p){const v=Vs.findNextBracketInRange(r.forwardRegex,l,h,f,p);if(v)return this._toFoundBracket(a,v)}}return null}findEnclosingBrackets(e,t){const n=this.textModel.validatePosition(e);if(this.canBuildAST){const f=L.fromPositions(n),p=z0(this.getBracketPairsInRange(L.fromPositions(n,n)),_=>_.closingBracketRange!==void 0&&_.range.strictContainsRange(f));return p?[p.openingBracketRange,p.closingBracketRange]:null}const i=bT(t),s=this.textModel.getLineCount(),r=new Map;let a=[];const l=u((f,p)=>{if(!r.has(f)){const _=[];for(let v=0,C=p?p.brackets.length:0;v<C;v++)_[v]=0;r.set(f,_)}a=r.get(f)},"resetCounts");let c=0;const d=u((f,p,_,v,C)=>{for(;;){if(i&&++c%100===0&&!i())return Wr.INSTANCE;const w=Vs.findNextBracketInRange(f.forwardRegex,p,_,v,C);if(!w)break;const y=_.substring(w.startColumn-1,w.endColumn-1).toLowerCase(),S=f.textIsBracket[y];if(S&&(S.isOpen(y)?a[S.index]++:S.isClose(y)&&a[S.index]--,a[S.index]===-1))return this._matchFoundBracket(w,S,!1,i);v=w.endColumn-1}return null},"searchInRange");let h=null,g=null;for(let f=n.lineNumber;f<=s;f++){const p=this.textModel.tokenization.getLineTokens(f),_=p.getCount(),v=this.textModel.getLineContent(f);let C=0,w=0,y=0;if(f===n.lineNumber){C=p.findTokenIndexAtOffset(n.column-1),w=n.column-1,y=n.column-1;const E=p.getLanguageId(C);h!==E&&(h=E,g=this.languageConfigurationService.getLanguageConfiguration(h).brackets,l(h,g))}let S=!0;for(;C<_;C++){const E=p.getLanguageId(C);if(h!==E){if(g&&S&&w!==y){const T=d(g,f,v,w,y);if(T)return nC(T);S=!1}h=E,g=this.languageConfigurationService.getLanguageConfiguration(h).brackets,l(h,g)}const k=!!g&&!Rr(p.getStandardTokenType(C));if(k)S||(w=p.getStartOffset(C)),y=p.getEndOffset(C);else if(g&&S&&w!==y){const T=d(g,f,v,w,y);if(T)return nC(T)}S=k}if(g&&S&&w!==y){const E=d(g,f,v,w,y);if(E)return nC(E)}}return null}_toFoundBracket(e,t){if(!t)return null;let n=this.textModel.getValueInRange(t);n=n.toLowerCase();const i=e.getBracketInfo(n);return i?{range:t,bracketInfo:i}:null}}u(L7,"BracketPairsTextModelPart");function XQ(o,e){return{object:o,dispose:()=>e?.dispose()}}u(XQ,"createDisposableRef$1");function bT(o){if(typeof o>"u")return()=>!0;{const e=Date.now();return()=>Date.now()-e<=o}}u(bT,"createTimeBasedContinueBracketSearchPredicate");class Wr{constructor(){this._searchCanceledBrand=void 0}}u(Wr,"BracketSearchCanceled");Wr.INSTANCE=new Wr;function nC(o){return o instanceof Wr?null:o}u(nC,"stripBracketSearchCanceled");class x7 extends U{constructor(e){super(),this.textModel=e,this.colorProvider=new YA,this.onDidChangeEmitter=new R,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,t,n){if(t===void 0)return[];if(!this.colorizationOptions.enabled)return[];const i=new Array,s=this.textModel.bracketPairs.getBracketsInRange(e);for(const r of s)i.push({id:`bracket${r.range.toString()}-${r.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(r,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:r.range});return i}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new L(1,1,this.textModel.getLineCount(),1),e,t):[]}}u(x7,"ColorizedBracketPairsDecorationProvider");class YA{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}u(YA,"ColorProvider");At((o,e)=>{const t=[VH,HH,BH,WH,UH,GH],n=new YA;e.addRule(`.monaco-editor .${n.unexpectedClosingBracketClassName} { color: ${o.getColor(QJ)}; }`);const i=t.map(s=>o.getColor(s)).filter(s=>!!s).filter(s=>!s.isTransparent());for(let s=0;s<30;s++){const r=i[s%i.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(s)} { color: ${r}; }`)}});function iC(o){return o.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}u(iC,"escapeNewLine");class zn{constructor(e,t,n,i){this.oldPosition=e,this.oldText=t,this.newPosition=n,this.newText=i}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${iC(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${iC(this.oldText)}")`:`(replace@${this.oldPosition} "${iC(this.oldText)}" with "${iC(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){const i=t.length;Vo(e,i,n),n+=4;for(let s=0;s<i;s++)Vq(e,t.charCodeAt(s),n),n+=2;return n}static _readString(e,t){const n=Oo(e,t);return t+=4,Sx(e,t,n)}writeSize(){return 4+4+zn._writeStringSize(this.oldText)+zn._writeStringSize(this.newText)}write(e,t){return Vo(e,this.oldPosition,t),t+=4,Vo(e,this.newPosition,t),t+=4,t=zn._writeString(e,this.oldText,t),t=zn._writeString(e,this.newText,t),t}static read(e,t,n){const i=Oo(e,t);t+=4;const s=Oo(e,t);t+=4;const r=zn._readString(e,t);t+=zn._writeStringSize(r);const a=zn._readString(e,t);return t+=zn._writeStringSize(a),n.push(new zn(i,r,s,a)),t}}u(zn,"TextChange");function ZQ(o,e){return o===null||o.length===0?e:new Ho(o,e).compress()}u(ZQ,"compressConsecutiveTextChanges");class Ho{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,n=this._getPrev(e),i=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(n===null){this._acceptCurr(i),i=this._getCurr(++t);continue}if(i===null){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldEnd<=n.newPosition){this._acceptCurr(i),i=this._getCurr(++t);continue}if(n.newEnd<=i.oldPosition){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldPosition<n.newPosition){const[c,d]=Ho._splitCurr(i,n.newPosition-i.oldPosition);this._acceptCurr(c),i=d;continue}if(n.newPosition<i.oldPosition){const[c,d]=Ho._splitPrev(n,i.oldPosition-n.newPosition);this._acceptPrev(c),n=d;continue}let a,l;if(i.oldEnd===n.newEnd)a=n,l=i,n=this._getPrev(++e),i=this._getCurr(++t);else if(i.oldEnd<n.newEnd){const[c,d]=Ho._splitPrev(n,i.oldLength);a=c,l=i,n=d,i=this._getCurr(++t)}else{const[c,d]=Ho._splitCurr(i,n.newLength);a=n,l=c,n=this._getPrev(++e),i=d}this._result[this._resultLen++]=new zn(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const s=Ho._merge(this._result);return Ho._removeNoOps(s)}_acceptCurr(e){this._result[this._resultLen++]=Ho._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=Ho._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new zn(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new zn(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const n=e.newText.substr(0,t),i=e.newText.substr(t);return[new zn(e.oldPosition,e.oldText,e.newPosition,n),new zn(e.oldEnd,"",e.newPosition+t,i)]}static _splitCurr(e,t){const n=e.oldText.substr(0,t),i=e.oldText.substr(t);return[new zn(e.oldPosition,n,e.newPosition,e.newText),new zn(e.oldPosition+t,i,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;const t=[];let n=0,i=e[0];for(let s=1;s<e.length;s++){const r=e[s];i.oldEnd===r.oldPosition?i=new zn(i.oldPosition,i.oldText+r.oldText,i.newPosition,i.newText+r.newText):(t[n++]=i,i=r)}return t[n++]=i,t}static _removeNoOps(e){if(e.length===0)return e;const t=[];let n=0;for(let i=0;i<e.length;i++){const s=e[i];s.oldText!==s.newText&&(t[n++]=s)}return t}}u(Ho,"TextChangeCompressor");function zl(o){return o===47||o===92}u(zl,"isPathSeparator");function E7(o){return o.replace(/[\\/]/g,bn.sep)}u(E7,"toSlashes");function JQ(o){return o.indexOf("/")===-1&&(o=E7(o)),/^[a-zA-Z]:(\/|$)/.test(o)&&(o="/"+o),o}u(JQ,"toPosixPath");function RP(o,e=bn.sep){if(!o)return"";const t=o.length,n=o.charCodeAt(0);if(zl(n)){if(zl(o.charCodeAt(1))&&!zl(o.charCodeAt(2))){let s=3;const r=s;for(;s<t&&!zl(o.charCodeAt(s));s++);if(r!==s&&!zl(o.charCodeAt(s+1))){for(s+=1;s<t;s++)if(zl(o.charCodeAt(s)))return o.slice(0,s+1).replace(/[\\/]/g,e)}}return e}else if(k7(n)&&o.charCodeAt(1)===58)return zl(o.charCodeAt(2))?o.slice(0,2)+e:o.slice(0,2);let i=o.indexOf("://");if(i!==-1){for(i+=3;i<t;i++)if(zl(o.charCodeAt(i)))return o.slice(0,i+1)}return""}u(RP,"getRoot");function yE(o,e,t,n=Xr){if(o===e)return!0;if(!o||!e||e.length>o.length)return!1;if(t){if(!WD(o,e))return!1;if(e.length===o.length)return!0;let s=e.length;return e.charAt(e.length-1)===n&&s--,o.charAt(s)===n}return e.charAt(e.length-1)!==n&&(e+=n),o.indexOf(e)===0}u(yE,"isEqualOrParent");function k7(o){return o>=65&&o<=90||o>=97&&o<=122}u(k7,"isWindowsDriveLetter");function QQ(o,e=ei){return e?k7(o.charCodeAt(0))&&o.charCodeAt(1)===58:!1}u(QQ,"hasDriveLetter");function Fr(o){return Y0(o,!0)}u(Fr,"originalFSPath");class Ty{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:ib(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}isEqualOrParent(e,t,n=!1){if(e.scheme===t.scheme){if(e.scheme===Pe.file)return yE(Fr(e),Fr(t),this._ignorePathCasing(e))&&e.query===t.query&&(n||e.fragment===t.fragment);if(OP(e.authority,t.authority))return yE(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(n||e.fragment===t.fragment)}return!1}joinPath(e,...t){return be.joinPath(e,...t)}basenameOrAuthority(e){return ro(e)||e.authority}basename(e){return bn.basename(e.path)}extname(e){return bn.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===Pe.file?t=be.file(k4(Fr(e))).path:(t=bn.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===Pe.file?t=be.file(E4(Fr(e))).path:t=bn.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!OP(e.authority,t.authority))return;if(e.scheme===Pe.file){const s=eq(Fr(e),Fr(t));return ei?E7(s):s}let n=e.path||"/";const i=t.path||"/";if(this._ignorePathCasing(e)){let s=0;for(const r=Math.min(n.length,i.length);s<r&&!(n.charCodeAt(s)!==i.charCodeAt(s)&&n.charAt(s).toLowerCase()!==i.charAt(s).toLowerCase());s++);n=i.substr(0,s)+n.substr(s)}return bn.relative(n,i)}resolvePath(e,t){if(e.scheme===Pe.file){const n=be.file(Q$(Fr(e),t));return e.with({authority:n.authority,path:n.path})}return t=JQ(t),e.with({path:bn.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&rg(e,t)}hasTrailingPathSeparator(e,t=Xr){if(e.scheme===Pe.file){const n=Fr(e);return n.length>RP(n).length&&n[n.length-1]===t}else{const n=e.path;return n.length>1&&n.charCodeAt(n.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=Xr){return VP(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=Xr){let n=!1;if(e.scheme===Pe.file){const i=Fr(e);n=i!==void 0&&i.length===RP(i).length&&i[i.length-1]===t}else{t="/";const i=e.path;n=i.length===1&&i.charCodeAt(i.length-1)===47}return!n&&!VP(e,t)?e.with({path:e.path+"/"}):e}}u(Ty,"ExtUri");const Dt=new Ty(()=>!1);new Ty(o=>o.scheme===Pe.file?!hi:!0);new Ty(o=>!0);const M7=Dt.isEqual.bind(Dt);Dt.isEqualOrParent.bind(Dt);Dt.getComparisonKey.bind(Dt);const eee=Dt.basenameOrAuthority.bind(Dt),ro=Dt.basename.bind(Dt),tee=Dt.extname.bind(Dt),Ly=Dt.dirname.bind(Dt),nee=Dt.joinPath.bind(Dt),iee=Dt.normalizePath.bind(Dt),see=Dt.relativePath.bind(Dt),FP=Dt.resolvePath.bind(Dt);Dt.isAbsolutePath.bind(Dt);const OP=Dt.isEqualAuthority.bind(Dt),VP=Dt.hasTrailingPathSeparator.bind(Dt);Dt.removeTrailingPathSeparator.bind(Dt);Dt.addTrailingPathSeparator.bind(Dt);var Nc;(function(o){o.META_DATA_LABEL="label",o.META_DATA_DESCRIPTION="description",o.META_DATA_SIZE="size",o.META_DATA_MIME="mime";function e(t){const n=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(r=>{const[a,l]=r.split(":");a&&l&&n.set(a,l)});const s=t.path.substring(0,t.path.indexOf(";"));return s&&n.set(o.META_DATA_MIME,s),n}u(e,"parseMetaData"),o.parseMetaData=e})(Nc||(Nc={}));function Fh(o){return o.toString()}u(Fh,"uriGetComparisonKey");class En{constructor(e,t,n,i,s,r,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=n,this.afterEOL=i,this.beforeCursorState=s,this.afterCursorState=r,this.changes=a}static create(e,t){const n=e.getAlternativeVersionId(),i=SE(e);return new En(n,n,i,i,t,t,[])}append(e,t,n,i,s){t.length>0&&(this.changes=ZQ(this.changes,t)),this.afterEOL=n,this.afterVersionId=i,this.afterCursorState=s}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,n){if(Vo(e,t?t.length:0,n),n+=4,t)for(const i of t)Vo(e,i.selectionStartLineNumber,n),n+=4,Vo(e,i.selectionStartColumn,n),n+=4,Vo(e,i.positionLineNumber,n),n+=4,Vo(e,i.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){const i=Oo(e,t);t+=4;for(let s=0;s<i;s++){const r=Oo(e,t);t+=4;const a=Oo(e,t);t+=4;const l=Oo(e,t);t+=4;const c=Oo(e,t);t+=4,n.push(new re(r,a,l,c))}return t}serialize(){let e=10+En._writeSelectionsSize(this.beforeCursorState)+En._writeSelectionsSize(this.afterCursorState)+4;for(const i of this.changes)e+=i.writeSize();const t=new Uint8Array(e);let n=0;Vo(t,this.beforeVersionId,n),n+=4,Vo(t,this.afterVersionId,n),n+=4,R2(t,this.beforeEOL,n),n+=1,R2(t,this.afterEOL,n),n+=1,n=En._writeSelections(t,this.beforeCursorState,n),n=En._writeSelections(t,this.afterCursorState,n),Vo(t,this.changes.length,n),n+=4;for(const i of this.changes)n=i.write(t,n);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let n=0;const i=Oo(t,n);n+=4;const s=Oo(t,n);n+=4;const r=P2(t,n);n+=1;const a=P2(t,n);n+=1;const l=[];n=En._readSelections(t,n,l);const c=[];n=En._readSelections(t,n,c);const d=Oo(t,n);n+=4;const h=[];for(let g=0;g<d;g++)n=zn.read(t,n,h);return new En(i,s,r,a,l,c,h)}}u(En,"SingleModelEditStackData");class XA{constructor(e,t,n,i){this.label=e,this.code=t,this.model=n,this._data=En.create(n,i)}get type(){return 0}get resource(){return be.isUri(this.model)?this.model:this.model.uri}toString(){return(this._data instanceof En?this._data:En.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(be.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof En}append(e,t,n,i,s){this._data instanceof En&&this._data.append(e,t,n,i,s)}close(){this._data instanceof En&&(this._data=this._data.serialize())}open(){this._data instanceof En||(this._data=En.deserialize(this._data))}undo(){if(be.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof En&&(this._data=this._data.serialize());const e=En.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(be.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof En&&(this._data=this._data.serialize());const e=En.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof En&&(this._data=this._data.serialize()),this._data.byteLength+168}}u(XA,"SingleModelEditStackElement");class D7{constructor(e,t,n){this.label=e,this.code=t,this.type=1,this._isOpen=!0,this._editStackElementsArr=n.slice(0),this._editStackElementsMap=new Map;for(const i of this._editStackElementsArr){const s=Fh(i.resource);this._editStackElementsMap.set(s,i)}this._delegate=null}get resources(){return this._editStackElementsArr.map(e=>e.resource)}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=Fh(e);return this._editStackElementsMap.has(t)}setModel(e){const t=Fh(be.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=Fh(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,n,i,s){const r=Fh(e.uri);this._editStackElementsMap.get(r).append(e,t,n,i,s)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=Fh(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){const e=[];for(const t of this._editStackElementsArr)e.push(`${ro(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}u(D7,"MultiModelEditStackElement");function SE(o){return o.getEOL()===`
`?0:1}u(SE,"getModelEOL");function Ra(o){return o?o instanceof XA||o instanceof D7:!1}u(Ra,"isEditStackElement");class xy{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Ra(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Ra(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e){const t=this._undoRedoService.getLastElement(this._model.uri);if(Ra(t)&&t.canAppend(this._model))return t;const n=new XA(m("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(n),n}pushEOL(e){const t=this._getOrCreateEditStackElement(null);this._model.setEOL(e),t.append(this._model,[],SE(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,n){const i=this._getOrCreateEditStackElement(e),s=this._model.applyEdits(t,!0),r=xy._computeCursorState(n,s),a=s.map((l,c)=>({index:c,textChange:l.textChange}));return a.sort((l,c)=>l.textChange.oldPosition===c.textChange.oldPosition?l.index-c.index:l.textChange.oldPosition-c.textChange.oldPosition),i.append(this._model,a.map(l=>l.textChange),SE(this._model),this._model.getAlternativeVersionId(),r),r}static _computeCursorState(e,t){try{return e?e(t):null}catch(n){return Ie(n),null}}}u(xy,"EditStack");class A7{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}u(A7,"SpacesDiffResult");function oee(o,e,t,n,i){i.spacesDiff=0,i.looksLikeAlignment=!1;let s;for(s=0;s<e&&s<n;s++){const g=o.charCodeAt(s),f=t.charCodeAt(s);if(g!==f)break}let r=0,a=0;for(let g=s;g<e;g++)o.charCodeAt(g)===32?r++:a++;let l=0,c=0;for(let g=s;g<n;g++)t.charCodeAt(g)===32?l++:c++;if(r>0&&a>0||l>0&&c>0)return;const d=Math.abs(a-c),h=Math.abs(r-l);if(d===0){i.spacesDiff=h,h>0&&0<=l-1&&l-1<o.length&&l<t.length&&t.charCodeAt(l)!==32&&o.charCodeAt(l-1)===32&&o.charCodeAt(o.length-1)===44&&(i.looksLikeAlignment=!0);return}if(h%d===0){i.spacesDiff=h/d;return}}u(oee,"spacesDiff");function HP(o,e,t){const n=Math.min(o.getLineCount(),1e4);let i=0,s=0,r="",a=0;const l=[2,4,6,8,3,5,7],c=8,d=[0,0,0,0,0,0,0,0,0],h=new A7;for(let p=1;p<=n;p++){const _=o.getLineLength(p),v=o.getLineContent(p),C=_<=65536;let w=!1,y=0,S=0,E=0;for(let T=0,x=_;T<x;T++){const M=C?v.charCodeAt(T):o.getLineCharCode(p,T);if(M===9)E++;else if(M===32)S++;else{w=!0,y=T;break}}if(!w||(E>0?i++:S>1&&s++,oee(r,a,v,y,h),h.looksLikeAlignment&&!(t&&e===h.spacesDiff)))continue;const k=h.spacesDiff;k<=c&&d[k]++,r=v,a=y}let g=t;i!==s&&(g=i<s);let f=e;if(g){let p=g?0:.1*n;l.forEach(_=>{const v=d[_];v>p&&(p=v,f=_)}),f===4&&d[4]>0&&d[2]>0&&d[2]>=d[4]/2&&(f=2)}return{insertSpaces:g,tabSize:f}}u(HP,"guessIndentation");function Vi(o){return(o.metadata&1)>>>0}u(Vi,"getNodeColor");function Lt(o,e){o.metadata=o.metadata&254|e<<0}u(Lt,"setNodeColor");function Qn(o){return(o.metadata&2)>>>1===1}u(Qn,"getNodeIsVisited");function St(o,e){o.metadata=o.metadata&253|(e?1:0)<<1}u(St,"setNodeIsVisited");function I7(o){return(o.metadata&4)>>>2===1}u(I7,"getNodeIsForValidation");function BP(o,e){o.metadata=o.metadata&251|(e?1:0)<<2}u(BP,"setNodeIsForValidation");function ree(o){return(o.metadata&24)>>>3}u(ree,"getNodeStickiness");function WP(o,e){o.metadata=o.metadata&231|e<<3}u(WP,"_setNodeStickiness");function aee(o){return(o.metadata&32)>>>5===1}u(aee,"getCollapseOnReplaceEdit");function UP(o,e){o.metadata=o.metadata&223|(e?1:0)<<5}u(UP,"setCollapseOnReplaceEdit");class ZA{constructor(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,Lt(this,1),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,BP(this,!1),WP(this,1),UP(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,St(this,!1)}reset(e,t,n,i){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=i}setOptions(e){this.options=e;const t=this.options.className;BP(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),WP(this,this.options.stickiness),UP(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}u(ZA,"IntervalNode");const Fe=new ZA(null,0,0);Fe.parent=Fe;Fe.left=Fe;Fe.right=Fe;Lt(Fe,0);class s0{constructor(){this.root=Fe,this.requestNormalizeDelta=!1}intervalSearch(e,t,n,i,s){return this.root===Fe?[]:pee(this,e,t,n,i,s)}search(e,t,n){return this.root===Fe?[]:fee(this,e,t,n)}collectNodesFromOwner(e){return hee(this,e)}collectNodesPostOrder(){return gee(this)}insert(e){GP(this,e),this._normalizeDeltaIfNecessary()}delete(e){zP(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const n=e;let i=0;for(;e!==this.root;)e===e.parent.right&&(i+=e.parent.delta),e=e.parent;const s=n.start+i,r=n.end+i;n.setCachedOffsets(s,r,t)}acceptReplace(e,t,n,i){const s=dee(this,e,e+t);for(let r=0,a=s.length;r<a;r++){const l=s[r];zP(this,l)}this._normalizeDeltaIfNecessary(),uee(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(let r=0,a=s.length;r<a;r++){const l=s[r];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,cee(l,e,e+t,n,i),l.maxEnd=l.end,GP(this,l)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,lee(this))}}u(s0,"IntervalTree");function lee(o){let e=o.root,t=0;for(;e!==Fe;){if(e.left!==Fe&&!Qn(e.left)){e=e.left;continue}if(e.right!==Fe&&!Qn(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,Pc(e),St(e,!0),St(e.left,!1),St(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}St(o.root,!1)}u(lee,"normalizeDelta");function Oh(o,e,t,n){return o<t?!0:o>t||n===1?!1:n===2?!0:e}u(Oh,"adjustMarkerBeforeColumn");function cee(o,e,t,n,i){const s=ree(o),r=s===0||s===2,a=s===1||s===2,l=t-e,c=n,d=Math.min(l,c),h=o.start;let g=!1;const f=o.end;let p=!1;e<=h&&f<=t&&aee(o)&&(o.start=e,g=!0,o.end=e,p=!0);{const v=i?1:l>0?2:0;!g&&Oh(h,r,e,v)&&(g=!0),!p&&Oh(f,a,e,v)&&(p=!0)}if(d>0&&!i){const v=l>c?2:0;!g&&Oh(h,r,e+d,v)&&(g=!0),!p&&Oh(f,a,e+d,v)&&(p=!0)}{const v=i?1:0;!g&&Oh(h,r,t,v)&&(o.start=e+c,g=!0),!p&&Oh(f,a,t,v)&&(o.end=e+c,p=!0)}const _=c-l;g||(o.start=Math.max(0,h+_)),p||(o.end=Math.max(0,f+_)),o.start>o.end&&(o.end=o.start)}u(cee,"nodeAcceptEdit");function dee(o,e,t){let n=o.root,i=0,s=0,r=0,a=0;const l=[];let c=0;for(;n!==Fe;){if(Qn(n)){St(n.left,!1),St(n.right,!1),n===n.parent.right&&(i-=n.parent.delta),n=n.parent;continue}if(!Qn(n.left)){if(s=i+n.maxEnd,s<e){St(n,!0);continue}if(n.left!==Fe){n=n.left;continue}}if(r=i+n.start,r>t){St(n,!0);continue}if(a=i+n.end,a>=e&&(n.setCachedOffsets(r,a,0),l[c++]=n),St(n,!0),n.right!==Fe&&!Qn(n.right)){i+=n.delta,n=n.right;continue}}return St(o.root,!1),l}u(dee,"searchForEditing");function uee(o,e,t,n){let i=o.root,s=0,r=0,a=0;const l=n-(t-e);for(;i!==Fe;){if(Qn(i)){St(i.left,!1),St(i.right,!1),i===i.parent.right&&(s-=i.parent.delta),Pc(i),i=i.parent;continue}if(!Qn(i.left)){if(r=s+i.maxEnd,r<e){St(i,!0);continue}if(i.left!==Fe){i=i.left;continue}}if(a=s+i.start,a>t){i.start+=l,i.end+=l,i.delta+=l,(i.delta<-1073741824||i.delta>1073741824)&&(o.requestNormalizeDelta=!0),St(i,!0);continue}if(St(i,!0),i.right!==Fe&&!Qn(i.right)){s+=i.delta,i=i.right;continue}}St(o.root,!1)}u(uee,"noOverlapReplace");function hee(o,e){let t=o.root;const n=[];let i=0;for(;t!==Fe;){if(Qn(t)){St(t.left,!1),St(t.right,!1),t=t.parent;continue}if(t.left!==Fe&&!Qn(t.left)){t=t.left;continue}if(t.ownerId===e&&(n[i++]=t),St(t,!0),t.right!==Fe&&!Qn(t.right)){t=t.right;continue}}return St(o.root,!1),n}u(hee,"collectNodesFromOwner");function gee(o){let e=o.root;const t=[];let n=0;for(;e!==Fe;){if(Qn(e)){St(e.left,!1),St(e.right,!1),e=e.parent;continue}if(e.left!==Fe&&!Qn(e.left)){e=e.left;continue}if(e.right!==Fe&&!Qn(e.right)){e=e.right;continue}t[n++]=e,St(e,!0)}return St(o.root,!1),t}u(gee,"collectNodesPostOrder");function fee(o,e,t,n){let i=o.root,s=0,r=0,a=0;const l=[];let c=0;for(;i!==Fe;){if(Qn(i)){St(i.left,!1),St(i.right,!1),i===i.parent.right&&(s-=i.parent.delta),i=i.parent;continue}if(i.left!==Fe&&!Qn(i.left)){i=i.left;continue}r=s+i.start,a=s+i.end,i.setCachedOffsets(r,a,n);let d=!0;if(e&&i.ownerId&&i.ownerId!==e&&(d=!1),t&&I7(i)&&(d=!1),d&&(l[c++]=i),St(i,!0),i.right!==Fe&&!Qn(i.right)){s+=i.delta,i=i.right;continue}}return St(o.root,!1),l}u(fee,"search");function pee(o,e,t,n,i,s){let r=o.root,a=0,l=0,c=0,d=0;const h=[];let g=0;for(;r!==Fe;){if(Qn(r)){St(r.left,!1),St(r.right,!1),r===r.parent.right&&(a-=r.parent.delta),r=r.parent;continue}if(!Qn(r.left)){if(l=a+r.maxEnd,l<e){St(r,!0);continue}if(r.left!==Fe){r=r.left;continue}}if(c=a+r.start,c>t){St(r,!0);continue}if(d=a+r.end,d>=e){r.setCachedOffsets(c,d,s);let f=!0;n&&r.ownerId&&r.ownerId!==n&&(f=!1),i&&I7(r)&&(f=!1),f&&(h[g++]=r)}if(St(r,!0),r.right!==Fe&&!Qn(r.right)){a+=r.delta,r=r.right;continue}}return St(o.root,!1),h}u(pee,"intervalSearch");function GP(o,e){if(o.root===Fe)return e.parent=Fe,e.left=Fe,e.right=Fe,Lt(e,0),o.root=e,o.root;mee(o,e),Xl(e.parent);let t=e;for(;t!==o.root&&Vi(t.parent)===1;)if(t.parent===t.parent.parent.left){const n=t.parent.parent.right;Vi(n)===1?(Lt(t.parent,0),Lt(n,0),Lt(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,Vm(o,t)),Lt(t.parent,0),Lt(t.parent.parent,1),Hm(o,t.parent.parent))}else{const n=t.parent.parent.left;Vi(n)===1?(Lt(t.parent,0),Lt(n,0),Lt(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,Hm(o,t)),Lt(t.parent,0),Lt(t.parent.parent,1),Vm(o,t.parent.parent))}return Lt(o.root,0),e}u(GP,"rbTreeInsert");function mee(o,e){let t=0,n=o.root;const i=e.start,s=e.end;for(;;)if(_ee(i,s,n.start+t,n.end+t)<0)if(n.left===Fe){e.start-=t,e.end-=t,e.maxEnd-=t,n.left=e;break}else n=n.left;else if(n.right===Fe){e.start-=t+n.delta,e.end-=t+n.delta,e.maxEnd-=t+n.delta,n.right=e;break}else t+=n.delta,n=n.right;e.parent=n,e.left=Fe,e.right=Fe,Lt(e,1)}u(mee,"treeInsert");function zP(o,e){let t,n;if(e.left===Fe?(t=e.right,n=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(o.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===Fe?(t=e.left,n=e):(n=bee(e.right),t=n.right,t.start+=n.delta,t.end+=n.delta,t.delta+=n.delta,(t.delta<-1073741824||t.delta>1073741824)&&(o.requestNormalizeDelta=!0),n.start+=e.delta,n.end+=e.delta,n.delta=e.delta,(n.delta<-1073741824||n.delta>1073741824)&&(o.requestNormalizeDelta=!0)),n===o.root){o.root=t,Lt(t,0),e.detach(),_T(),Pc(t),o.root.parent=Fe;return}const i=Vi(n)===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?t.parent=n.parent:(n.parent===e?t.parent=n:t.parent=n.parent,n.left=e.left,n.right=e.right,n.parent=e.parent,Lt(n,Vi(e)),e===o.root?o.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==Fe&&(n.left.parent=n),n.right!==Fe&&(n.right.parent=n)),e.detach(),i){Xl(t.parent),n!==e&&(Xl(n),Xl(n.parent)),_T();return}Xl(t),Xl(t.parent),n!==e&&(Xl(n),Xl(n.parent));let s;for(;t!==o.root&&Vi(t)===0;)t===t.parent.left?(s=t.parent.right,Vi(s)===1&&(Lt(s,0),Lt(t.parent,1),Vm(o,t.parent),s=t.parent.right),Vi(s.left)===0&&Vi(s.right)===0?(Lt(s,1),t=t.parent):(Vi(s.right)===0&&(Lt(s.left,0),Lt(s,1),Hm(o,s),s=t.parent.right),Lt(s,Vi(t.parent)),Lt(t.parent,0),Lt(s.right,0),Vm(o,t.parent),t=o.root)):(s=t.parent.left,Vi(s)===1&&(Lt(s,0),Lt(t.parent,1),Hm(o,t.parent),s=t.parent.left),Vi(s.left)===0&&Vi(s.right)===0?(Lt(s,1),t=t.parent):(Vi(s.left)===0&&(Lt(s.right,0),Lt(s,1),Vm(o,s),s=t.parent.left),Lt(s,Vi(t.parent)),Lt(t.parent,0),Lt(s.left,0),Hm(o,t.parent),t=o.root));Lt(t,0),_T()}u(zP,"rbTreeDelete");function bee(o){for(;o.left!==Fe;)o=o.left;return o}u(bee,"leftest$1");function _T(){Fe.parent=Fe,Fe.delta=0,Fe.start=0,Fe.end=0}u(_T,"resetSentinel$1");function Vm(o,e){const t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(o.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==Fe&&(t.left.parent=e),t.parent=e.parent,e.parent===Fe?o.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,Pc(e),Pc(t)}u(Vm,"leftRotate$1");function Hm(o,e){const t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(o.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==Fe&&(t.right.parent=e),t.parent=e.parent,e.parent===Fe?o.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,Pc(e),Pc(t)}u(Hm,"rightRotate$1");function N7(o){let e=o.end;if(o.left!==Fe){const t=o.left.maxEnd;t>e&&(e=t)}if(o.right!==Fe){const t=o.right.maxEnd+o.delta;t>e&&(e=t)}return e}u(N7,"computeMaxEnd");function Pc(o){o.maxEnd=N7(o)}u(Pc,"recomputeMaxEnd");function Xl(o){for(;o!==Fe;){const e=N7(o);if(o.maxEnd===e)return;o.maxEnd=e,o=o.parent}}u(Xl,"recomputeMaxEndWalkToRoot");function _ee(o,e,t,n){return o===t?e-n:o-t}u(_ee,"intervalCompare");class T1{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==Me)return JA(this.right);let e=this;for(;e.parent!==Me&&e.parent.left!==e;)e=e.parent;return e.parent===Me?Me:e.parent}prev(){if(this.left!==Me)return P7(this.left);let e=this;for(;e.parent!==Me&&e.parent.right!==e;)e=e.parent;return e.parent===Me?Me:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}u(T1,"TreeNode");const Me=new T1(null,0);Me.parent=Me;Me.left=Me;Me.right=Me;Me.color=0;function JA(o){for(;o.left!==Me;)o=o.left;return o}u(JA,"leftest");function P7(o){for(;o.right!==Me;)o=o.right;return o}u(P7,"righttest");function QA(o){return o===Me?0:o.size_left+o.piece.length+QA(o.right)}u(QA,"calculateSize");function eI(o){return o===Me?0:o.lf_left+o.piece.lineFeedCnt+eI(o.right)}u(eI,"calculateLF");function vT(){Me.parent=Me}u(vT,"resetSentinel");function Bm(o,e){const t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==Me&&(t.left.parent=e),t.parent=e.parent,e.parent===Me?o.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}u(Bm,"leftRotate");function Wm(o,e){const t=e.left;e.left=t.right,t.right!==Me&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===Me?o.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}u(Wm,"rightRotate");function sC(o,e){let t,n;if(e.left===Me?(n=e,t=n.right):e.right===Me?(n=e,t=n.left):(n=JA(e.right),t=n.right),n===o.root){o.root=t,t.color=0,e.detach(),vT(),o.root.parent=Me;return}const i=n.color===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?(t.parent=n.parent,mm(o,t)):(n.parent===e?t.parent=n:t.parent=n.parent,mm(o,t),n.left=e.left,n.right=e.right,n.parent=e.parent,n.color=e.color,e===o.root?o.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==Me&&(n.left.parent=n),n.right!==Me&&(n.right.parent=n),n.size_left=e.size_left,n.lf_left=e.lf_left,mm(o,n)),e.detach(),t.parent.left===t){const r=QA(t),a=eI(t);if(r!==t.parent.size_left||a!==t.parent.lf_left){const l=r-t.parent.size_left,c=a-t.parent.lf_left;t.parent.size_left=r,t.parent.lf_left=a,La(o,t.parent,l,c)}}if(mm(o,t.parent),i){vT();return}let s;for(;t!==o.root&&t.color===0;)t===t.parent.left?(s=t.parent.right,s.color===1&&(s.color=0,t.parent.color=1,Bm(o,t.parent),s=t.parent.right),s.left.color===0&&s.right.color===0?(s.color=1,t=t.parent):(s.right.color===0&&(s.left.color=0,s.color=1,Wm(o,s),s=t.parent.right),s.color=t.parent.color,t.parent.color=0,s.right.color=0,Bm(o,t.parent),t=o.root)):(s=t.parent.left,s.color===1&&(s.color=0,t.parent.color=1,Wm(o,t.parent),s=t.parent.left),s.left.color===0&&s.right.color===0?(s.color=1,t=t.parent):(s.left.color===0&&(s.right.color=0,s.color=1,Bm(o,s),s=t.parent.left),s.color=t.parent.color,t.parent.color=0,s.left.color=0,Wm(o,t.parent),t=o.root));t.color=0,vT()}u(sC,"rbDelete");function KP(o,e){for(mm(o,e);e!==o.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,Bm(o,e)),e.parent.color=0,e.parent.parent.color=1,Wm(o,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,Wm(o,e)),e.parent.color=0,e.parent.parent.color=1,Bm(o,e.parent.parent))}o.root.color=0}u(KP,"fixInsert");function La(o,e,t,n){for(;e!==o.root&&e!==Me;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}u(La,"updateTreeMetadata");function mm(o,e){let t=0,n=0;if(e!==o.root){for(;e!==o.root&&e===e.parent.right;)e=e.parent;if(e!==o.root)for(e=e.parent,t=QA(e.left)-e.size_left,n=eI(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=n;e!==o.root&&(t!==0||n!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}}u(mm,"recomputeTreeMetadata");const _a=65535;function R7(o){let e;return o[o.length-1]<65536?e=new Uint16Array(o.length):e=new Uint32Array(o.length),e.set(o,0),e}u(R7,"createUintArray");class F7{constructor(e,t,n,i,s){this.lineStarts=e,this.cr=t,this.lf=n,this.crlf=i,this.isBasicASCII=s}}u(F7,"LineStarts");function Aa(o,e=!0){const t=[0];let n=1;for(let i=0,s=o.length;i<s;i++){const r=o.charCodeAt(i);r===13?i+1<s&&o.charCodeAt(i+1)===10?(t[n++]=i+2,i++):t[n++]=i+1:r===10&&(t[n++]=i+1)}return e?R7(t):t}u(Aa,"createLineStartsFast");function vee(o,e){o.length=0,o[0]=0;let t=1,n=0,i=0,s=0,r=!0;for(let l=0,c=e.length;l<c;l++){const d=e.charCodeAt(l);d===13?l+1<c&&e.charCodeAt(l+1)===10?(s++,o[t++]=l+2,l++):(n++,o[t++]=l+1):d===10?(i++,o[t++]=l+1):r&&d!==9&&(d<32||d>126)&&(r=!1)}const a=new F7(R7(o),n,i,s,r);return o.length=0,a}u(vee,"createLineStarts");class Oi{constructor(e,t,n,i,s){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=i,this.length=s}}u(Oi,"Piece");class nc{constructor(e,t){this.buffer=e,this.lineStarts=t}}u(nc,"StringBuffer");class O7{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==Me&&e.iterate(e.root,n=>(n!==Me&&this._pieces.push(n.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}u(O7,"PieceTreeSnapshot");class V7{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){const n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){const n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1;const n=this._cache;for(let i=0;i<n.length;i++){const s=n[i];if(s.node.parent===null||s.nodeStartOffset>=e){n[i]=null,t=!0;continue}}if(t){const i=[];for(const s of n)s!==null&&i.push(s);this._cache=i}}}u(V7,"PieceTreeSearchCache");class H7{constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new nc("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=Me,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let i=null;for(let s=0,r=e.length;s<r;s++)if(e[s].buffer.length>0){e[s].lineStarts||(e[s].lineStarts=Aa(e[s].buffer));const a=new Oi(s+1,{line:0,column:0},{line:e[s].lineStarts.length-1,column:e[s].buffer.length-e[s].lineStarts[e[s].lineStarts.length-1]},e[s].lineStarts.length-1,e[s].buffer.length);this._buffers.push(e[s]),i=this.rbInsertRight(i,a)}this._searchCache=new V7(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const t=_a,n=t-Math.floor(t/3),i=n*2;let s="",r=0;const a=[];if(this.iterate(this.root,l=>{const c=this.getNodeContent(l),d=c.length;if(r<=n||r+d<i)return s+=c,r+=d,!0;const h=s.replace(/\r\n|\r|\n/g,e);return a.push(new nc(h,Aa(h))),s=c,r=d,!0}),r>0){const l=s.replace(/\r\n|\r|\n/g,e);a.push(new nc(l,Aa(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new O7(this,e)}getOffsetAt(e,t){let n=0,i=this.root;for(;i!==Me;)if(i.left!==Me&&i.lf_left+1>=e)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt+1>=e){n+=i.size_left;const s=this.getAccumulatedValue(i,e-i.lf_left-2);return n+=s+t-1}else e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right;return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0;const i=e;for(;t!==Me;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const s=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+s.index,s.index===0){const r=this.getOffsetAt(n+1,1),a=i-r;return new H(n+1,a+1)}return new H(n+1,s.remainder+1)}else if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===Me){const s=this.getOffsetAt(n+1,1),r=i-e-s;return new H(n+1,r+1)}else t=t.right;return new H(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const n=this.nodeAt2(e.startLineNumber,e.startColumn),i=this.nodeAt2(e.endLineNumber,e.endColumn),s=this.getValueInRange2(n,i);return t?t!==this._EOL||!this._EOLNormalized?s.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?s:s.replace(/\r\n|\r|\n/g,t):s}getValueInRange2(e,t){if(e.node===t.node){const a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,c=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(c+e.remainder,c+t.remainder)}let n=e.node;const i=this._buffers[n.piece.bufferIndex].buffer,s=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);let r=i.substring(s+e.remainder,s+n.piece.length);for(n=n.next();n!==Me;){const a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){r+=a.substring(l,l+t.remainder);break}else r+=a.substr(l,n.piece.length);n=n.next()}return r}getLinesContent(){const e=[];let t=0,n="",i=!1;return this.iterate(this.root,s=>{if(s===Me)return!0;const r=s.piece;let a=r.length;if(a===0)return!0;const l=this._buffers[r.bufferIndex].buffer,c=this._buffers[r.bufferIndex].lineStarts,d=r.start.line,h=r.end.line;let g=c[d]+r.start.column;if(i&&(l.charCodeAt(g)===10&&(g++,a--),e[t++]=n,n="",i=!1,a===0))return!0;if(d===h)return!this._EOLNormalized&&l.charCodeAt(g+a-1)===13?(i=!0,n+=l.substr(g,a-1)):n+=l.substr(g,a),!0;n+=this._EOLNormalized?l.substring(g,Math.max(g,c[d+1]-this._EOLLength)):l.substring(g,c[d+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;for(let f=d+1;f<h;f++)n=this._EOLNormalized?l.substring(c[f],c[f+1]-this._EOLLength):l.substring(c[f],c[f+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;return!this._EOLNormalized&&l.charCodeAt(c[h]+r.end.column-1)===13?(i=!0,r.end.column===0?t--:n=l.substr(c[h],r.end.column-1)):n=l.substr(c[h],r.end.column),!0}),i&&(e[t++]=n,n=""),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const n=this._buffers[t.piece.bufferIndex],i=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(i)}else{const t=this._buffers[e.node.piece.bufferIndex],i=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(i)}}getLineCharCode(e,t){const n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,n,i,s,r,a,l,c,d,h){const g=this._buffers[e.piece.bufferIndex],f=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),p=this.offsetInBuffer(e.piece.bufferIndex,s),_=this.offsetInBuffer(e.piece.bufferIndex,r);let v;const C={line:0,column:0};let w,y;t._wordSeparators?(w=g.buffer.substring(p,_),y=u(S=>S+p,"offsetInBuffer"),t.reset(0)):(w=g.buffer,y=u(S=>S,"offsetInBuffer"),t.reset(p));do if(v=t.next(w),v){if(y(v.index)>=_)return d;this.positionInBuffer(e,y(v.index)-f,C);const S=this.getLineFeedCnt(e.piece.bufferIndex,s,C),E=C.line===s.line?C.column-s.column+i:C.column+1,k=E+v[0].length;if(h[d++]=Td(new L(n+S,E,n+S,k),v,l),y(v.index)+v[0].length>=_||d>=c)return d}while(v);return d}findMatchesLineByLine(e,t,n,i){const s=[];let r=0;const a=new Fd(t.wordSeparators,t.regex);let l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];const c=this.nodeAt2(e.endLineNumber,e.endColumn);if(c===null)return[];let d=this.positionInBuffer(l.node,l.remainder);const h=this.positionInBuffer(c.node,c.remainder);if(l.node===c.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,d,h,t,n,i,r,s),s;let g=e.startLineNumber,f=l.node;for(;f!==c.node;){const _=this.getLineFeedCnt(f.piece.bufferIndex,d,f.piece.end);if(_>=1){const C=this._buffers[f.piece.bufferIndex].lineStarts,w=this.offsetInBuffer(f.piece.bufferIndex,f.piece.start),y=C[d.line+_],S=g===e.startLineNumber?e.startColumn:1;if(r=this.findMatchesInNode(f,a,g,S,d,this.positionInBuffer(f,y-w),t,n,i,r,s),r>=i)return s;g+=_}const v=g===e.startLineNumber?e.startColumn-1:0;if(g===e.endLineNumber){const C=this.getLineContent(g).substring(v,e.endColumn-1);return r=this._findMatchesInLine(t,a,C,e.endLineNumber,v,r,s,n,i),s}if(r=this._findMatchesInLine(t,a,this.getLineContent(g).substr(v),g,v,r,s,n,i),r>=i)return s;g++,l=this.nodeAt2(g,1),f=l.node,d=this.positionInBuffer(l.node,l.remainder)}if(g===e.endLineNumber){const _=g===e.startLineNumber?e.startColumn-1:0,v=this.getLineContent(g).substring(_,e.endColumn-1);return r=this._findMatchesInLine(t,a,v,e.endLineNumber,_,r,s,n,i),s}const p=g===e.startLineNumber?e.startColumn:1;return r=this.findMatchesInNode(c.node,a,g,p,d,h,t,n,i,r,s),s}_findMatchesInLine(e,t,n,i,s,r,a,l,c){const d=e.wordSeparators;if(!l&&e.simpleSearch){const g=e.simpleSearch,f=g.length,p=n.length;let _=-f;for(;(_=n.indexOf(g,_+f))!==-1;)if((!d||oA(d,n,p,_,f))&&(a[r++]=new Xg(new L(i,_+1+s,i,_+1+f+s),null),r>=c))return r;return r}let h;t.reset(0);do if(h=t.next(n),h&&(a[r++]=Td(new L(i,h.index+1+s,i,h.index+1+h[0].length+s),h,l),r>=c))return r;while(h);return r}insert(e,t,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==Me){const{node:i,remainder:s,nodeStartOffset:r}=this.nodeAt(e),a=i.piece,l=a.bufferIndex,c=this.positionInBuffer(i,s);if(i.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&r+a.length===e&&t.length<_a){this.appendToNode(i,t),this.computeBufferMetadata();return}if(r===e)this.insertContentToNodeLeft(t,i),this._searchCache.validate(e);else if(r+i.piece.length>e){const d=[];let h=new Oi(a.bufferIndex,c,a.end,this.getLineFeedCnt(a.bufferIndex,c,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,c));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(i,s)===10){const _={line:h.start.line+1,column:0};h=new Oi(h.bufferIndex,_,h.end,this.getLineFeedCnt(h.bufferIndex,_,h.end),h.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(i,s-1)===13){const _=this.positionInBuffer(i,s-1);this.deleteNodeTail(i,_),t="\r"+t,i.piece.length===0&&d.push(i)}else this.deleteNodeTail(i,c);else this.deleteNodeTail(i,c);const g=this.createNewPieces(t);h.length>0&&this.rbInsertRight(i,h);let f=i;for(let p=0;p<g.length;p++)f=this.rbInsertRight(f,g[p]);this.deleteNodes(d)}else this.insertContentToNodeRight(t,i)}else{const i=this.createNewPieces(t);let s=this.rbInsertLeft(null,i[0]);for(let r=1;r<i.length;r++)s=this.rbInsertRight(s,i[r])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===Me)return;const n=this.nodeAt(e),i=this.nodeAt(e+t),s=n.node,r=i.node;if(s===r){const g=this.positionInBuffer(s,n.remainder),f=this.positionInBuffer(s,i.remainder);if(n.nodeStartOffset===e){if(t===s.piece.length){const p=s.next();sC(this,s),this.validateCRLFWithPrevNode(p),this.computeBufferMetadata();return}this.deleteNodeHead(s,f),this._searchCache.validate(e),this.validateCRLFWithPrevNode(s),this.computeBufferMetadata();return}if(n.nodeStartOffset+s.piece.length===e+t){this.deleteNodeTail(s,g),this.validateCRLFWithNextNode(s),this.computeBufferMetadata();return}this.shrinkNode(s,g,f),this.computeBufferMetadata();return}const a=[],l=this.positionInBuffer(s,n.remainder);this.deleteNodeTail(s,l),this._searchCache.validate(e),s.piece.length===0&&a.push(s);const c=this.positionInBuffer(r,i.remainder);this.deleteNodeHead(r,c),r.piece.length===0&&a.push(r);const d=s.next();for(let g=d;g!==Me&&g!==r;g=g.next())a.push(g);const h=s.piece.length===0?s.prev():s;this.deleteNodes(a),this.validateCRLFWithNextNode(h),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){const n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){const r=t.piece,a={line:r.start.line+1,column:0},l=new Oi(r.bufferIndex,a,r.end,this.getLineFeedCnt(r.bufferIndex,a,r.end),r.length-1);t.piece=l,e+=`
`,La(this,t,-1,-1),t.piece.length===0&&n.push(t)}const i=this.createNewPieces(e);let s=this.rbInsertLeft(t,i[i.length-1]);for(let r=i.length-2;r>=0;r--)s=this.rbInsertLeft(s,i[r]);this.validateCRLFWithPrevNode(s),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);const n=this.createNewPieces(e),i=this.rbInsertRight(t,n[0]);let s=i;for(let r=1;r<n.length;r++)s=this.rbInsertRight(s,n[r]);this.validateCRLFWithPrevNode(i)}positionInBuffer(e,t,n){const i=e.piece,s=e.piece.bufferIndex,r=this._buffers[s].lineStarts,l=r[i.start.line]+i.start.column+t;let c=i.start.line,d=i.end.line,h=0,g=0,f=0;for(;c<=d&&(h=c+(d-c)/2|0,f=r[h],h!==d);)if(g=r[h+1],l<f)d=h-1;else if(l>=g)c=h+1;else break;return n?(n.line=h,n.column=l-f,null):{line:h,column:l-f}}getLineFeedCnt(e,t,n){if(n.column===0)return n.line-t.line;const i=this._buffers[e].lineStarts;if(n.line===i.length-1)return n.line-t.line;const s=i[n.line+1],r=i[n.line]+n.column;if(s>r+1)return n.line-t.line;const a=r-1;return this._buffers[e].buffer.charCodeAt(a)===13?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)sC(this,e[t])}createNewPieces(e){if(e.length>_a){const d=[];for(;e.length>_a;){const g=e.charCodeAt(_a-1);let f;g===13||g>=55296&&g<=56319?(f=e.substring(0,_a-1),e=e.substring(_a-1)):(f=e.substring(0,_a),e=e.substring(_a));const p=Aa(f);d.push(new Oi(this._buffers.length,{line:0,column:0},{line:p.length-1,column:f.length-p[p.length-1]},p.length-1,f.length)),this._buffers.push(new nc(f,p))}const h=Aa(e);return d.push(new Oi(this._buffers.length,{line:0,column:0},{line:h.length-1,column:e.length-h[h.length-1]},h.length-1,e.length)),this._buffers.push(new nc(e,h)),d}let t=this._buffers[0].buffer.length;const n=Aa(e,!1);let i=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},i=this._lastChangeBufferPos;for(let d=0;d<n.length;d++)n[d]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let d=0;d<n.length;d++)n[d]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}const s=this._buffers[0].buffer.length,r=this._buffers[0].lineStarts.length-1,a=s-this._buffers[0].lineStarts[r],l={line:r,column:a},c=new Oi(0,i,l,this.getLineFeedCnt(0,i,l),s-t);return this._lastChangeBufferPos=l,[c]}getLineRawContent(e,t=0){let n=this.root,i="";const s=this._searchCache.get2(e);if(s){n=s.node;const r=this.getAccumulatedValue(n,e-s.nodeStartLineNumber-1),a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(s.nodeStartLineNumber+n.piece.lineFeedCnt===e)i=a.substring(l+r,l+n.piece.length);else{const c=this.getAccumulatedValue(n,e-s.nodeStartLineNumber);return a.substring(l+r,l+c-t)}}else{let r=0;const a=e;for(;n!==Me;)if(n.left!==Me&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){const l=this.getAccumulatedValue(n,e-n.lf_left-2),c=this.getAccumulatedValue(n,e-n.lf_left-1),d=this._buffers[n.piece.bufferIndex].buffer,h=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return r+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:r,nodeStartLineNumber:a-(e-1-n.lf_left)}),d.substring(h+l,h+c-t)}else if(n.lf_left+n.piece.lineFeedCnt===e-1){const l=this.getAccumulatedValue(n,e-n.lf_left-2),c=this._buffers[n.piece.bufferIndex].buffer,d=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i=c.substring(d+l,d+n.piece.length);break}else e-=n.lf_left+n.piece.lineFeedCnt,r+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==Me;){const r=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){const a=this.getAccumulatedValue(n,0),l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i+=r.substring(l,l+a-t),i}else{const a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i+=r.substr(a,n.piece.length)}n=n.next()}return i}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==Me;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){const n=e.piece,i=this.positionInBuffer(e,t),s=i.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){const r=this.getLineFeedCnt(e.piece.bufferIndex,n.start,i);if(r!==s)return{index:r,remainder:0}}return{index:s,remainder:i.column}}getAccumulatedValue(e,t){if(t<0)return 0;const n=e.piece,i=this._buffers[n.bufferIndex].lineStarts,s=n.start.line+t+1;return s>n.end.line?i[n.end.line]+n.end.column-i[n.start.line]-n.start.column:i[s]-i[n.start.line]-n.start.column}deleteNodeTail(e,t){const n=e.piece,i=n.lineFeedCnt,s=this.offsetInBuffer(n.bufferIndex,n.end),r=t,a=this.offsetInBuffer(n.bufferIndex,r),l=this.getLineFeedCnt(n.bufferIndex,n.start,r),c=l-i,d=a-s,h=n.length+d;e.piece=new Oi(n.bufferIndex,n.start,r,l,h),La(this,e,d,c)}deleteNodeHead(e,t){const n=e.piece,i=n.lineFeedCnt,s=this.offsetInBuffer(n.bufferIndex,n.start),r=t,a=this.getLineFeedCnt(n.bufferIndex,r,n.end),l=this.offsetInBuffer(n.bufferIndex,r),c=a-i,d=s-l,h=n.length+d;e.piece=new Oi(n.bufferIndex,r,n.end,a,h),La(this,e,d,c)}shrinkNode(e,t,n){const i=e.piece,s=i.start,r=i.end,a=i.length,l=i.lineFeedCnt,c=t,d=this.getLineFeedCnt(i.bufferIndex,i.start,c),h=this.offsetInBuffer(i.bufferIndex,t)-this.offsetInBuffer(i.bufferIndex,s);e.piece=new Oi(i.bufferIndex,i.start,c,d,h),La(this,e,h-a,d-l);const g=new Oi(i.bufferIndex,n,r,this.getLineFeedCnt(i.bufferIndex,n,r),this.offsetInBuffer(i.bufferIndex,r)-this.offsetInBuffer(i.bufferIndex,n)),f=this.rbInsertRight(e,g);this.validateCRLFWithPrevNode(f)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),i=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const s=Aa(t,!1);for(let f=0;f<s.length;f++)s[f]+=i;if(n){const f=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:i-f}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(s.slice(1));const r=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[r],l={line:r,column:a},c=e.piece.length+t.length,d=e.piece.lineFeedCnt,h=this.getLineFeedCnt(0,e.piece.start,l),g=h-d;e.piece=new Oi(e.piece.bufferIndex,e.piece.start,l,h,c),this._lastChangeBufferPos=l,La(this,e,t.length,g)}nodeAt(e){let t=this.root;const n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let i=0;for(;t!==Me;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){i+=t.size_left;const s={node:t,remainder:e-t.size_left,nodeStartOffset:i};return this._searchCache.set(s),s}else e-=t.size_left+t.piece.length,i+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let n=this.root,i=0;for(;n!==Me;)if(n.left!==Me&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){const s=this.getAccumulatedValue(n,e-n.lf_left-2),r=this.getAccumulatedValue(n,e-n.lf_left-1);return i+=n.size_left,{node:n,remainder:Math.min(s+t-1,r),nodeStartOffset:i}}else if(n.lf_left+n.piece.lineFeedCnt===e-1){const s=this.getAccumulatedValue(n,e-n.lf_left-2);if(s+t-1<=n.piece.length)return{node:n,remainder:s+t-1,nodeStartOffset:i};t-=n.piece.length-s;break}else e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right;for(n=n.next();n!==Me;){if(n.piece.lineFeedCnt>0){const s=this.getAccumulatedValue(n,0),r=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,s),nodeStartOffset:r}}else if(n.piece.length>=t-1){const s=this.offsetOfNode(n);return{node:n,remainder:t-1,nodeStartOffset:s}}else t-=n.piece.length;n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;const n=this._buffers[e.piece.bufferIndex],i=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(i)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===Me||e.piece.lineFeedCnt===0)return!1;const t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,i=t.start.line,s=n[i]+t.start.column;return i===n.length-1||n[i+1]>s+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(s)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===Me||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){const n=[],i=this._buffers[e.piece.bufferIndex].lineStarts;let s;e.piece.end.column===0?s={line:e.piece.end.line-1,column:i[e.piece.end.line]-i[e.piece.end.line-1]-1}:s={line:e.piece.end.line,column:e.piece.end.column-1};const r=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new Oi(e.piece.bufferIndex,e.piece.start,s,a,r),La(this,e,-1,-1),e.piece.length===0&&n.push(e);const l={line:t.piece.start.line+1,column:0},c=t.piece.length-1,d=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new Oi(t.piece.bufferIndex,l,t.piece.end,d,c),La(this,t,-1,-1),t.piece.length===0&&n.push(t);const h=this.createNewPieces(`\r
`);this.rbInsertRight(e,h[0]);for(let g=0;g<n.length;g++)sC(this,n[g])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const n=t.next();if(this.startWithLF(n)){if(e+=`
`,n.piece.length===1)sC(this,n);else{const i=n.piece,s={line:i.start.line+1,column:0},r=i.length-1,a=this.getLineFeedCnt(i.bufferIndex,s,i.end);n.piece=new Oi(i.bufferIndex,s,i.end,a,r),La(this,n,-1,-1)}return!0}}return!1}iterate(e,t){if(e===Me)return t(Me);const n=this.iterate(e.left,t);return n&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===Me)return"";const t=this._buffers[e.piece.bufferIndex],n=e.piece,i=this.offsetInBuffer(n.bufferIndex,n.start),s=this.offsetInBuffer(n.bufferIndex,n.end);return t.buffer.substring(i,s)}getPieceContent(e){const t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),i=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,i)}rbInsertRight(e,t){const n=new T1(t,1);if(n.left=Me,n.right=Me,n.parent=Me,n.size_left=0,n.lf_left=0,this.root===Me)this.root=n,n.color=0;else if(e.right===Me)e.right=n,n.parent=e;else{const s=JA(e.right);s.left=n,n.parent=s}return KP(this,n),n}rbInsertLeft(e,t){const n=new T1(t,1);if(n.left=Me,n.right=Me,n.parent=Me,n.size_left=0,n.lf_left=0,this.root===Me)this.root=n,n.color=0;else if(e.left===Me)e.left=n,n.parent=e;else{const i=P7(e.left);i.right=n,n.parent=i}return KP(this,n),n}}u(H7,"PieceTreeBase");class nu extends U{constructor(e,t,n,i,s,r,a){super(),this._onDidChangeContent=this._register(new R),this._BOM=t,this._mightContainNonBasicASCII=!r,this._mightContainRTL=i,this._mightContainUnusualLineTerminators=s,this._pieceTree=new H7(e,n,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){const n=e+t,i=this.getPositionAt(e),s=this.getPositionAt(n);return new L(i.lineNumber,i.column,s.lineNumber,s.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const n=this.getOffsetAt(e.startLineNumber,e.startColumn);return this.getOffsetAt(e.endLineNumber,e.endColumn)-n}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let n=0;const i=e.startLineNumber,s=e.endLineNumber;for(let r=i;r<=s;r++){const a=this.getLineContent(r),l=r===i?e.startColumn-1:0,c=r===s?e.endColumn-1:a.length;for(let d=l;d<c;d++)kn(a.charCodeAt(d))?(n=n+1,d=d+1):n=n+1}return n+=this._getEndOfLine(t).length*(s-i),n}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=Di(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Jr(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,n){let i=this._mightContainRTL,s=this._mightContainUnusualLineTerminators,r=this._mightContainNonBasicASCII,a=!0,l=[];for(let _=0;_<e.length;_++){const v=e[_];a&&v._isTracked&&(a=!1);const C=v.range;if(v.text){let k=!0;r||(k=!Pw(v.text),r=k),!i&&k&&(i=qg(v.text)),!s&&k&&(s=W4(v.text))}let w="",y=0,S=0,E=0;if(v.text){let k;[y,S,E,k]=Du(v.text);const T=this.getEOL();k===0||k===(T===`\r
`?2:1)?w=v.text:w=v.text.replace(/\r\n|\r|\n/g,T)}l[_]={sortIndex:_,identifier:v.identifier||null,range:C,rangeOffset:this.getOffsetAt(C.startLineNumber,C.startColumn),rangeLength:this.getValueLengthInRange(C),text:w,eolCount:y,firstLineLength:S,lastLineLength:E,forceMoveMarkers:Boolean(v.forceMoveMarkers),isAutoWhitespaceEdit:v.isAutoWhitespaceEdit||!1}}l.sort(nu._sortOpsAscending);let c=!1;for(let _=0,v=l.length-1;_<v;_++){const C=l[_].range.getEndPosition(),w=l[_+1].range.getStartPosition();if(w.isBeforeOrEqual(C)){if(w.isBefore(C))throw new Error("Overlapping ranges are not allowed!");c=!0}}a&&(l=this._reduceOperations(l));const d=n||t?nu._getInverseEditRanges(l):[],h=[];if(t)for(let _=0;_<l.length;_++){const v=l[_],C=d[_];if(v.isAutoWhitespaceEdit&&v.range.isEmpty())for(let w=C.startLineNumber;w<=C.endLineNumber;w++){let y="";w===C.startLineNumber&&(y=this.getLineContent(v.range.startLineNumber),Di(y)!==-1)||h.push({lineNumber:w,oldContent:y})}}let g=null;if(n){let _=0;g=[];for(let v=0;v<l.length;v++){const C=l[v],w=d[v],y=this.getValueInRange(C.range),S=C.rangeOffset+_;_+=C.text.length-y.length,g[v]={sortIndex:C.sortIndex,identifier:C.identifier,range:w,text:y,textChange:new zn(C.rangeOffset,y,S,C.text)}}c||g.sort((v,C)=>v.sortIndex-C.sortIndex)}this._mightContainRTL=i,this._mightContainUnusualLineTerminators=s,this._mightContainNonBasicASCII=r;const f=this._doApplyEdits(l);let p=null;if(t&&h.length>0){h.sort((_,v)=>v.lineNumber-_.lineNumber),p=[];for(let _=0,v=h.length;_<v;_++){const C=h[_].lineNumber;if(_>0&&h[_-1].lineNumber===C)continue;const w=h[_].oldContent,y=this.getLineContent(C);y.length===0||y===w||Di(y)!==-1||p.push(C)}}return this._onDidChangeContent.fire(),new J4(g,f,p)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const n=e[0].range,i=e[e.length-1].range,s=new L(n.startLineNumber,n.startColumn,i.endLineNumber,i.endColumn);let r=n.startLineNumber,a=n.startColumn;const l=[];for(let f=0,p=e.length;f<p;f++){const _=e[f],v=_.range;t=t||_.forceMoveMarkers,l.push(this.getValueInRange(new L(r,a,v.startLineNumber,v.startColumn))),_.text.length>0&&l.push(_.text),r=v.endLineNumber,a=v.endColumn}const c=l.join(""),[d,h,g]=Du(c);return{sortIndex:0,identifier:e[0].identifier,range:s,rangeOffset:this.getOffsetAt(s.startLineNumber,s.startColumn),rangeLength:this.getValueLengthInRange(s,0),text:c,eolCount:d,firstLineLength:h,lastLineLength:g,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(nu._sortOpsDescending);const t=[];for(let n=0;n<e.length;n++){const i=e[n],s=i.range.startLineNumber,r=i.range.startColumn,a=i.range.endLineNumber,l=i.range.endColumn;if(s===a&&r===l&&i.text.length===0)continue;i.text?(this._pieceTree.delete(i.rangeOffset,i.rangeLength),this._pieceTree.insert(i.rangeOffset,i.text,!0)):this._pieceTree.delete(i.rangeOffset,i.rangeLength);const c=new L(s,r,a,l);t.push({range:c,rangeLength:i.rangeLength,text:i.text,rangeOffset:i.rangeOffset,forceMoveMarkers:i.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,n,i){return this._pieceTree.findMatchesLineByLine(e,t,n,i)}static _getInverseEditRanges(e){const t=[];let n=0,i=0,s=null;for(let r=0,a=e.length;r<a;r++){const l=e[r];let c,d;s?s.range.endLineNumber===l.range.startLineNumber?(c=n,d=i+(l.range.startColumn-s.range.endColumn)):(c=n+(l.range.startLineNumber-s.range.endLineNumber),d=l.range.startColumn):(c=l.range.startLineNumber,d=l.range.startColumn);let h;if(l.text.length>0){const g=l.eolCount+1;g===1?h=new L(c,d,c,d+l.firstLineLength):h=new L(c,d,c+g-1,l.lastLineLength+1)}else h=new L(c,d,c,d);n=h.endLineNumber,i=h.endColumn,t.push(h),s=l}return t}static _sortOpsAscending(e,t){const n=L.compareRangesUsingEnds(e.range,t.range);return n===0?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){const n=L.compareRangesUsingEnds(e.range,t.range);return n===0?t.sortIndex-e.sortIndex:-n}}u(nu,"PieceTreeTextBuffer");class B7{constructor(e,t,n,i,s,r,a,l,c){this._chunks=e,this._bom=t,this._cr=n,this._lf=i,this._crlf=s,this._containsRTL=r,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=c}_getEOL(e){const t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:n>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e),n=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let s=0,r=n.length;s<r;s++){const a=n[s].buffer.replace(/\r\n|\r|\n/g,t),l=Aa(a);n[s]=new nc(a,l)}const i=new nu(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:i,disposable:i}}}u(B7,"PieceTreeTextBufferFactory");class tI{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&KD(e)&&(this.BOM=wq,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=vee(this._tmpLineStarts,e);this.chunks.push(new nc(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,this.isBasicASCII&&(this.isBasicASCII=t.isBasicASCII),!this.isBasicASCII&&!this.containsRTL&&(this.containsRTL=qg(e)),!this.isBasicASCII&&!this.containsUnusualLineTerminators&&(this.containsUnusualLineTerminators=W4(e))}finish(e=!0){return this._finish(),new B7(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const t=Aa(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}}u(tI,"PieceTreeTextBufferBuilder");class W7{constructor(e,t){this._startLineNumber=e,this._tokens=t}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}}u(W7,"ContiguousMultilineTokens");class o0{constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){const n=this._tokens[this._tokens.length-1];if(n.endLineNumber+1===e){n.appendLineTokens(t);return}}this._tokens.push(new W7(e,[t]))}finalize(){return this._tokens}}u(o0,"ContiguousMultilineTokensBuilder");class TE{constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}delete(e,t){t===0||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(t===0||e>=this._store.length)return;const n=[];for(let i=0;i<t;i++)n[i]=this._default;this._store=Tw(this._store,e,n)}}u(TE,"ContiguousGrowingArray");class U7{constructor(e,t){this.tokenizationSupport=e,this.initialState=t,this._lineBeginState=new TE(null),this._lineNeedsTokenization=new TE(!0),this._firstLineNeedsTokenization=0,this._lineBeginState.set(0,this.initialState)}get invalidLineStartIndex(){return this._firstLineNeedsTokenization}markMustBeTokenized(e){this._lineNeedsTokenization.set(e,!0),this._firstLineNeedsTokenization=Math.min(this._firstLineNeedsTokenization,e)}getBeginState(e){return this._lineBeginState.get(e)}setEndState(e,t,n){if(this._lineNeedsTokenization.set(t,!1),this._firstLineNeedsTokenization=t+1,t===e-1)return;const i=this._lineBeginState.get(t+1);if(i===null||!n.equals(i)){this._lineBeginState.set(t+1,n),this.markMustBeTokenized(t+1);return}let s=t+1;for(;s<e&&!this._lineNeedsTokenization.get(s);)s++;this._firstLineNeedsTokenization=s}applyEdits(e,t){this.markMustBeTokenized(e.startLineNumber-1),this._lineBeginState.delete(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineNeedsTokenization.delete(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineBeginState.insert(e.startLineNumber,t),this._lineNeedsTokenization.insert(e.startLineNumber,t)}}u(U7,"TokenizationStateStore");class G7 extends U{constructor(e,t,n){super(),this._textModel=e,this._tokenizationPart=t,this._languageIdCodec=n,this._isScheduled=!1,this._isDisposed=!1,this._tokenizationStateStore=null,this._register(Wt.onDidChange(i=>{const s=this._textModel.getLanguageId();i.changedLanguages.indexOf(s)!==-1&&(this._resetTokenizationState(),this._tokenizationPart.clearTokens())})),this._resetTokenizationState()}dispose(){this._isDisposed=!0,super.dispose()}handleDidChangeContent(e){if(e.isFlush){this._resetTokenizationState();return}if(this._tokenizationStateStore)for(let t=0,n=e.changes.length;t<n;t++){const i=e.changes[t],[s]=Du(i.text);this._tokenizationStateStore.applyEdits(i.range,s)}this._beginBackgroundTokenization()}handleDidChangeAttached(){this._beginBackgroundTokenization()}handleDidChangeLanguage(e){this._resetTokenizationState(),this._tokenizationPart.clearTokens()}_resetTokenizationState(){const[e,t]=Cee(this._textModel,this._tokenizationPart);e&&t?this._tokenizationStateStore=new U7(e,t):this._tokenizationStateStore=null,this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,lb(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){const t=Date.now()+e.timeRemaining(),n=u(()=>{this._isDisposed||!this._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?wO(n):this._beginBackgroundTokenization())},"execute");n()}_backgroundTokenizeForAtLeast1ms(){const e=this._textModel.getLineCount(),t=new o0,n=Ai.create(!1);do if(n.elapsed()>1||this._tokenizeOneInvalidLine(t)>=e)break;while(this._hasLinesToTokenize());this._tokenizationPart.setTokens(t.finalize(),this._isTokenizationComplete())}tokenizeViewport(e,t){const n=new o0;this._tokenizeViewport(n,e,t),this._tokenizationPart.setTokens(n.finalize(),this._isTokenizationComplete())}reset(){this._resetTokenizationState(),this._tokenizationPart.clearTokens()}forceTokenization(e){const t=new o0;this._updateTokensUntilLine(t,e),this._tokenizationPart.setTokens(t.finalize(),this._isTokenizationComplete())}getTokenTypeIfInsertingCharacter(e,t){if(!this._tokenizationStateStore)return 0;this.forceTokenization(e.lineNumber);const n=this._tokenizationStateStore.getBeginState(e.lineNumber-1);if(!n)return 0;const i=this._textModel.getLanguageId(),s=this._textModel.getLineContent(e.lineNumber),r=s.substring(0,e.column-1)+t+s.substring(e.column-1),a=Wp(this._languageIdCodec,i,this._tokenizationStateStore.tokenizationSupport,r,!0,n),l=new yn(a.tokens,r,this._languageIdCodec);if(l.getCount()===0)return 0;const c=l.findTokenIndexAtOffset(e.column-1);return l.getStandardTokenType(c)}tokenizeLineWithEdit(e,t,n){const i=e.lineNumber,s=e.column;if(!this._tokenizationStateStore)return null;this.forceTokenization(i);const r=this._tokenizationStateStore.getBeginState(i-1);if(!r)return null;const a=this._textModel.getLineContent(i),l=a.substring(0,s-1)+n+a.substring(s-1+t),c=this._textModel.getLanguageIdAtPosition(i,0),d=Wp(this._languageIdCodec,c,this._tokenizationStateStore.tokenizationSupport,l,!0,r);return new yn(d.tokens,l,this._languageIdCodec)}isCheapToTokenize(e){if(!this._tokenizationStateStore)return!0;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return e>t?!1:e<t||this._textModel.getLineLength(e)<2048}_hasLinesToTokenize(){return this._tokenizationStateStore?this._tokenizationStateStore.invalidLineStartIndex<this._textModel.getLineCount():!1}_isTokenizationComplete(){return this._tokenizationStateStore?this._tokenizationStateStore.invalidLineStartIndex>=this._textModel.getLineCount():!1}_tokenizeOneInvalidLine(e){if(!this._tokenizationStateStore||!this._hasLinesToTokenize())return this._textModel.getLineCount()+1;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return this._updateTokensUntilLine(e,t),t}_updateTokensUntilLine(e,t){if(!this._tokenizationStateStore)return;const n=this._textModel.getLanguageId(),i=this._textModel.getLineCount(),s=t-1;for(let r=this._tokenizationStateStore.invalidLineStartIndex;r<=s;r++){const a=this._textModel.getLineContent(r+1),l=this._tokenizationStateStore.getBeginState(r),c=Wp(this._languageIdCodec,n,this._tokenizationStateStore.tokenizationSupport,a,!0,l);e.add(r+1,c.tokens),this._tokenizationStateStore.setEndState(i,r,c.endState),r=this._tokenizationStateStore.invalidLineStartIndex-1}}_tokenizeViewport(e,t,n){if(!this._tokenizationStateStore||n<=this._tokenizationStateStore.invalidLineStartIndex)return;if(t<=this._tokenizationStateStore.invalidLineStartIndex){this._updateTokensUntilLine(e,n);return}let i=this._textModel.getLineFirstNonWhitespaceColumn(t);const s=[];let r=null;for(let c=t-1;i>1&&c>=1;c--){const d=this._textModel.getLineFirstNonWhitespaceColumn(c);if(d!==0&&d<i&&(s.push(this._textModel.getLineContent(c)),i=d,r=this._tokenizationStateStore.getBeginState(c-1),r))break}r||(r=this._tokenizationStateStore.initialState);const a=this._textModel.getLanguageId();let l=r;for(let c=s.length-1;c>=0;c--)l=Wp(this._languageIdCodec,a,this._tokenizationStateStore.tokenizationSupport,s[c],!1,l).endState;for(let c=t;c<=n;c++){const d=this._textModel.getLineContent(c),h=Wp(this._languageIdCodec,a,this._tokenizationStateStore.tokenizationSupport,d,!0,l);e.add(c,h.tokens),this._tokenizationStateStore.markMustBeTokenized(c-1),l=h.endState}}}u(G7,"TextModelTokenization");function Cee(o,e){if(o.isTooLargeForTokenization())return[null,null];const t=Wt.get(e.getLanguageId());if(!t)return[null,null];let n;try{n=t.getInitialState()}catch(i){return Ie(i),[null,null]}return[t,n]}u(Cee,"initializeTokenization");function Wp(o,e,t,n,i,s){let r=null;if(t)try{r=t.tokenizeEncoded(n,i,s.clone())}catch(a){Ie(a)}return r||(r=Bw(o.encodeLanguageId(e),s)),yn.convertToEndOffset(r.tokens,n.length),r}u(Wp,"safeTokenize");const Ia=new Uint32Array(0).buffer;class Wo{static deleteBeginning(e,t){return e===null||e===Ia?e:Wo.delete(e,0,t)}static deleteEnding(e,t){if(e===null||e===Ia)return e;const n=Wa(e),i=n[n.length-2];return Wo.delete(e,t,i)}static delete(e,t,n){if(e===null||e===Ia||t===n)return e;const i=Wa(e),s=i.length>>>1;if(t===0&&i[i.length-2]===n)return Ia;const r=yn.findIndexInTokensArray(i,t),a=r>0?i[r-1<<1]:0,l=i[r<<1];if(n<l){const f=n-t;for(let p=r;p<s;p++)i[p<<1]-=f;return e}let c,d;a!==t?(i[r<<1]=t,c=r+1<<1,d=t):(c=r<<1,d=a);const h=n-t;for(let f=r+1;f<s;f++){const p=i[f<<1]-h;p>d&&(i[c++]=p,i[c++]=i[(f<<1)+1],d=p)}if(c===i.length)return e;const g=new Uint32Array(c);return g.set(i.subarray(0,c),0),g.buffer}static append(e,t){if(t===Ia)return e;if(e===Ia)return t;if(e===null)return e;if(t===null)return null;const n=Wa(e),i=Wa(t),s=i.length>>>1,r=new Uint32Array(n.length+i.length);r.set(n,0);let a=n.length;const l=n[n.length-2];for(let c=0;c<s;c++)r[a++]=i[c<<1]+l,r[a++]=i[(c<<1)+1];return r.buffer}static insert(e,t,n){if(e===null||e===Ia)return e;const i=Wa(e),s=i.length>>>1;let r=yn.findIndexInTokensArray(i,t);r>0&&i[r-1<<1]===t&&r--;for(let a=r;a<s;a++)i[a<<1]+=n;return e}}u(Wo,"ContiguousTokensEditing");function Wa(o){return o instanceof Uint32Array?o:new Uint32Array(o)}u(Wa,"toUint32Array");class Ab{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}getTokens(e,t,n){let i=null;if(t<this._len&&(i=this._lineTokens[t]),i!==null&&i!==Ia)return new yn(Wa(i),n,this._languageIdCodec);const s=new Uint32Array(2);return s[0]=n.length,s[1]=jP(this._languageIdCodec.encodeLanguageId(e)),new yn(s,n,this._languageIdCodec)}static _massageTokens(e,t,n){const i=n?Wa(n):null;if(t===0){let s=!1;if(i&&i.length>1&&(s=$n.getLanguageId(i[1])!==e),!s)return Ia}if(!i||i.length===0){const s=new Uint32Array(2);return s[0]=t,s[1]=jP(e),s.buffer}return i[i.length-2]=t,i.byteOffset===0&&i.byteLength===i.buffer.byteLength?i.buffer:i}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const n=[];for(let i=0;i<t;i++)n[i]=null;this._lineTokens=Tw(this._lineTokens,e,n),this._len+=t}setTokens(e,t,n,i,s){const r=Ab._massageTokens(this._languageIdCodec.encodeLanguageId(e),n,i);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=r,s?!Ab._equals(a,r):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const n=Wa(e),i=Wa(t);if(n.length!==i.length)return!1;for(let s=0,r=n.length;s<r;s++)if(n[s]!==i[s])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new H(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=Wo.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=Wo.deleteEnding(this._lineTokens[t],e.startColumn-1);const n=e.endLineNumber-1;let i=null;n<this._len&&(i=Wo.deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=Wo.append(this._lineTokens[t],i),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(t===0&&n===0)return;const i=e.lineNumber-1;if(!(i>=this._len)){if(t===0){this._lineTokens[i]=Wo.insert(this._lineTokens[i],e.column-1,n);return}this._lineTokens[i]=Wo.deleteEnding(this._lineTokens[i],e.column-1),this._lineTokens[i]=Wo.insert(this._lineTokens[i],e.column-1,n),this._insertLines(e.lineNumber,t)}}}u(Ab,"ContiguousTokensStore");function jP(o){return(o<<0|0<<8|0<<11|1<<15|2<<24|1024)>>>0}u(jP,"getDefaultMetadata");class Ey{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let n=e;if(t.length>0){const s=t[0].getRange(),r=t[t.length-1].getRange();if(!s||!r)return e;n=e.plusRange(s).plusRange(r)}let i=null;for(let s=0,r=this._pieces.length;s<r;s++){const a=this._pieces[s];if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){i=i||{index:s};break}if(a.removeTokens(n),a.isEmpty()){this._pieces.splice(s,1),s--,r--;continue}if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){i=i||{index:s};continue}const[l,c]=a.split(n);if(l.isEmpty()){i=i||{index:s};continue}c.isEmpty()||(this._pieces.splice(s,1,l,c),s++,r++,i=i||{index:s})}return i=i||{index:this._pieces.length},t.length>0&&(this._pieces=Tw(this._pieces,i.index,t)),n}isComplete(){return this._isComplete}addSparseTokens(e,t){if(t.getLineContent().length===0)return t;const n=this._pieces;if(n.length===0)return t;const i=Ey._findFirstPieceWithLine(n,e),s=n[i].getLineTokens(e);if(!s)return t;const r=t.getCount(),a=s.getCount();let l=0;const c=[];let d=0,h=0;const g=u((f,p)=>{f!==h&&(h=f,c[d++]=f,c[d++]=p)},"emitToken");for(let f=0;f<a;f++){const p=s.getStartCharacter(f),_=s.getEndCharacter(f),v=s.getMetadata(f),C=((v&1?2048:0)|(v&2?4096:0)|(v&4?8192:0)|(v&8?16384:0)|(v&16?16744448:0)|(v&32?4278190080:0))>>>0,w=~C>>>0;for(;l<r&&t.getEndOffset(l)<=p;)g(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<r&&t.getStartOffset(l)<p&&g(p,t.getMetadata(l));l<r&&t.getEndOffset(l)<_;)g(t.getEndOffset(l),t.getMetadata(l)&w|v&C),l++;if(l<r)g(_,t.getMetadata(l)&w|v&C),t.getEndOffset(l)===_&&l++;else{const y=Math.min(Math.max(0,l-1),r-1);g(_,t.getMetadata(y)&w|v&C)}}for(;l<r;)g(t.getEndOffset(l),t.getMetadata(l)),l++;return new yn(new Uint32Array(c),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let n=0,i=e.length-1;for(;n<i;){let s=n+Math.floor((i-n)/2);if(e[s].endLineNumber<t)n=s+1;else if(e[s].startLineNumber>t)i=s-1;else{for(;s>n&&e[s-1].startLineNumber<=t&&t<=e[s-1].endLineNumber;)s--;return s}}return n}acceptEdit(e,t,n,i,s){for(const r of this._pieces)r.acceptEdit(e,t,n,i,s)}}u(Ey,"SparseTokensStore");class Ib extends WA{constructor(e,t,n,i,s){super(),this._languageService=e,this._languageConfigurationService=t,this._textModel=n,this.bracketPairsTextModelPart=i,this._languageId=s,this._onDidChangeLanguage=this._register(new R),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new R),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new R),this.onDidChangeTokens=this._onDidChangeTokens.event,this._backgroundTokenizationState=0,this._onBackgroundTokenizationStateChanged=this._register(new R),this._tokens=new Ab(this._languageService.languageIdCodec),this._semanticTokens=new Ey(this._languageService.languageIdCodec),this._tokenization=new G7(n,this,this._languageService.languageIdCodec),this._languageRegistryListener=this._languageConfigurationService.onDidChange(r=>{r.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})})}acceptEdit(e,t,n,i,s){this._tokens.acceptEdit(e,n,i),this._semanticTokens.acceptEdit(e,n,i,s,t.length>0?t.charCodeAt(0):0)}handleDidChangeAttached(){this._tokenization.handleDidChangeAttached()}flush(){this._tokens.flush(),this._semanticTokens.flush()}handleDidChangeContent(e){this._tokenization.handleDidChangeContent(e)}dispose(){this._languageRegistryListener.dispose(),this._tokenization.dispose(),super.dispose()}get backgroundTokenizationState(){return this._backgroundTokenizationState}handleTokenizationProgress(e){if(this._backgroundTokenizationState===2)return;const t=e?2:1;this._backgroundTokenizationState!==t&&(this._backgroundTokenizationState=t,this.bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState(),this._onBackgroundTokenizationStateChanged.fire())}setTokens(e,t=!1){if(e.length!==0){const n=[];for(let i=0,s=e.length;i<s;i++){const r=e[i];let a=0,l=0,c=!1;for(let d=r.startLineNumber;d<=r.endLineNumber;d++)c?(this._tokens.setTokens(this._languageId,d-1,this._textModel.getLineLength(d),r.getLineTokens(d),!1),l=d):this._tokens.setTokens(this._languageId,d-1,this._textModel.getLineLength(d),r.getLineTokens(d),!0)&&(c=!0,a=d,l=d);c&&n.push({fromLineNumber:a,toLineNumber:l})}n.length>0&&this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!1,ranges:n})}this.handleTokenizationProgress(t)}setSemanticTokens(e,t){this._semanticTokens.set(e,t),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const n=this._textModel.validateRange(this._semanticTokens.setPartial(e,t));this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!0,ranges:[{fromLineNumber:n.startLineNumber,toLineNumber:n.endLineNumber}]})}tokenizeViewport(e,t){e=Math.max(1,e),t=Math.min(this._textModel.getLineCount(),t),this._tokenization.tokenizeViewport(e,t)}clearTokens(){this._tokens.flush(),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!0,semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}_emitModelTokensChangedEvent(e){this._textModel._isDisposing()||(this.bracketPairsTextModelPart.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}resetTokenization(){this._tokenization.reset()}forceTokenization(e){if(e<1||e>this._textModel.getLineCount())throw new Error("Illegal value for lineNumber");this._tokenization.forceTokenization(e)}isCheapToTokenize(e){return this._tokenization.isCheapToTokenize(e)}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}getLineTokens(e){if(e<1||e>this._textModel.getLineCount())throw new Error("Illegal value for lineNumber");return this._getLineTokens(e)}_getLineTokens(e){const t=this._textModel.getLineContent(e),n=this._tokens.getTokens(this._languageId,e-1,t);return this._semanticTokens.addSparseTokens(e,n)}getTokenTypeIfInsertingCharacter(e,t,n){const i=this._textModel.validatePosition(new H(e,t));return this._tokenization.getTokenTypeIfInsertingCharacter(i,n)}tokenizeLineWithEdit(e,t,n){const i=this._textModel.validatePosition(e);return this._tokenization.tokenizeLineWithEdit(i,t,n)}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}getWordAtPosition(e){this.assertNotDisposed();const t=this._textModel.validatePosition(e),n=this._textModel.getLineContent(t.lineNumber),i=this._getLineTokens(t.lineNumber),s=i.findTokenIndexAtOffset(t.column-1),[r,a]=Ib._findLanguageBoundaries(i,s),l=Jm(t.column,this.getLanguageConfiguration(i.getLanguageId(s)).getWordDefinition(),n.substring(r,a),r);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(s>0&&r===t.column-1){const[c,d]=Ib._findLanguageBoundaries(i,s-1),h=Jm(t.column,this.getLanguageConfiguration(i.getLanguageId(s-1)).getWordDefinition(),n.substring(c,d),c);if(h&&h.startColumn<=e.column&&e.column<=h.endColumn)return h}return null}static _findLanguageBoundaries(e,t){const n=e.getLanguageId(t);let i=0;for(let r=t;r>=0&&e.getLanguageId(r)===n;r--)i=e.getStartOffset(r);let s=e.getLineContent().length;for(let r=t,a=e.getCount();r<a&&e.getLanguageId(r)===n;r++)s=e.getEndOffset(r);return[i,s]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(e,t){const n=this._textModel.validatePosition(new H(e,t)),i=this.getLineTokens(n.lineNumber);return i.getLanguageId(i.findTokenIndexAtOffset(n.column-1))}setLanguageId(e){if(this._languageId===e)return;const t={oldLanguage:this._languageId,newLanguage:e};this._languageId=e,this.bracketPairsTextModelPart.handleDidChangeLanguage(t),this._tokenization.handleDidChangeLanguage(t),this._onDidChangeLanguage.fire(t),this._onDidChangeLanguageConfiguration.fire({})}}u(Ib,"TokenizationTextModelPart");const ky=Je("undoRedoService");class nI{constructor(e,t){this.resource=e,this.elements=t}}u(nI,"ResourceEditStackSnapshot");class Au{constructor(){this.id=Au._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}u(Au,"UndoRedoGroup");Au._ID=0;Au.None=new Au;class Zo{constructor(){this.id=Zo._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}u(Zo,"UndoRedoSource");Zo._ID=0;Zo.None=new Zo;var wee=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},CT=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};function yee(o){const e=new tI;return e.acceptChunk(o),e.finish()}u(yee,"createTextBufferFactory");function See(o){const e=new tI;let t;for(;typeof(t=o.read())=="string";)e.acceptChunk(t);return e.finish()}u(See,"createTextBufferFactoryFromSnapshot");function $P(o,e){let t;return typeof o=="string"?t=yee(o):Rq(o)?t=See(o):t=o,t.create(e)}u($P,"createTextBuffer");let oC=0;const Tee=999,Lee=1e4;class z7{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;const e=[];let t=0,n=0;do{const i=this._source.read();if(i===null)return this._eos=!0,t===0?null:e.join("");if(i.length>0&&(e[t++]=i,n+=i.length),n>=64*1024)return e.join("")}while(!0)}}u(z7,"TextModelSnapshot");const Up=u(()=>{throw new Error("Invalid change accessor")},"invalidFunc");let Cl=u(class bm extends U{constructor(e,t,n,i=null,s,r,a){super(),this._undoRedoService=s,this._languageService=r,this._languageConfigurationService=a,this._onWillDispose=this._register(new R),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new $7(g=>this.handleBeforeFireDecorationsChangedEvent(g))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new R),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new R),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new R),this._eventEmitter=this._register(new q7),this._deltaDecorationCallCnt=0,oC++,this.id="$model"+oC,this.isForSimpleWidget=n.isForSimpleWidget,typeof i>"u"||i===null?this._associatedResource=be.parse("inmemory://model/"+oC):this._associatedResource=i,this._attachedEditorCount=0;const{textBuffer:l,disposable:c}=$P(e,n.defaultEOL);this._buffer=l,this._bufferDisposable=c,this._options=bm.resolveOptions(this._buffer,n),this._bracketPairs=this._register(new L7(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new f3(this,this._languageConfigurationService)),this._decorationProvider=this._register(new x7(this)),this._tokenizationTextModelPart=new Ib(this._languageService,this._languageConfigurationService,this,this._bracketPairs,t);const d=this._buffer.getLineCount(),h=this._buffer.getValueLengthInRange(new L(1,1,d,this._buffer.getLineLength(d)+1),0);n.largeFileOptimizations?this._isTooLargeForTokenization=h>bm.LARGE_FILE_SIZE_THRESHOLD||d>bm.LARGE_FILE_LINE_COUNT_THRESHOLD:this._isTooLargeForTokenization=!1,this._isTooLargeForSyncing=h>bm.MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=U4(oC),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new LE,this._commandManager=new xy(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()}))}static resolveOptions(e,t){if(t.detectIndentation){const n=HP(e,t.tabSize,t.insertSpaces);return new Pm({tabSize:n.tabSize,indentSize:n.tabSize,insertSpaces:n.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new Pm({tabSize:t.tabSize,indentSize:t.indentSize,insertSpaces:t.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}onDidChangeContentOrInjectedText(e){return ur(this._eventEmitter.fastEvent(t=>e(t)),this._onDidChangeInjectedText.event(t=>e(t)))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;const e=new nu([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=U.None}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(e,t){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(t),this._bracketPairs.handleDidChangeContent(t),this._eventEmitter.fire(new mc(e,t)))}setValue(e){if(this._assertNotDisposed(),e===null)return;const{textBuffer:t,disposable:n}=$P(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,n)}_createContentChanged2(e,t,n,i,s,r,a){return{changes:[{range:e,rangeOffset:t,rangeLength:n,text:i}],eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:s,isRedoing:r,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueLengthInRange(n),s=this.getLineCount(),r=this.getLineMaxColumn(s);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._tokenizationTextModelPart.flush(),this._decorations=Object.create(null),this._decorationsTree=new LE,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new tu([new O3],this._versionId,!1,!1),this._createContentChanged2(new L(1,1,s,r),0,i,this.getValue(),!1,!1,!0))}setEOL(e){this._assertNotDisposed();const t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const n=this.getFullModelRange(),i=this.getValueLengthInRange(n),s=this.getLineCount(),r=this.getLineMaxColumn(s);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new tu([new B3],this._versionId,!1,!1),this._createContentChanged2(new L(1,1,s,r),0,i,this.getValue(),!1,!1,!1))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let n=0,i=t.length;n<i;n++){const s=t[n],r=s.range,a=s.cachedAbsoluteStart-s.start,l=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),c=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);s.cachedAbsoluteStart=l,s.cachedAbsoluteEnd=c,s.cachedVersionId=e,s.start=l-a,s.end=c-a,Pc(s)}}onBeforeAttached(){this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0))}onBeforeDetached(){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0))}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const n=this._buffer.getLineCount();for(let i=1;i<=n;i++){const s=this._buffer.getLineLength(i);s>=Lee?t+=s:e+=s}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();const t=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,n=typeof e.indentSize<"u"?e.indentSize:this._options.indentSize,i=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,s=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,r=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new Pm({tabSize:t,indentSize:n,insertSpaces:i,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:s,bracketPairColorizationOptions:r});if(this._options.equals(a))return;const l=this._options.createChangeEvent(a);this._options=a,this._bracketPairs.handleDidChangeOptions(l),this._decorationProvider.handleDidChangeOptions(l),this._onDidChangeOptions.fire(l)}detectIndentation(e,t){this._assertNotDisposed();const n=HP(this._buffer,t,e);this.updateOptions({insertSpaces:n.insertSpaces,tabSize:n.tabSize,indentSize:n.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),m1(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(B4.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(n=>({range:n.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();const t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();const t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueInRange(n,e);return t?this._buffer.getBOM()+i:i}createSnapshot(e=!1){return new z7(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueLengthInRange(n,e);return t?this._buffer.getBOM().length+i:i}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){return this._assertNotDisposed(),this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),n=e.startLineNumber,i=e.startColumn;let s=Math.floor(typeof n=="number"&&!isNaN(n)?n:1),r=Math.floor(typeof i=="number"&&!isNaN(i)?i:1);if(s<1)s=1,r=1;else if(s>t)s=t,r=this.getLineMaxColumn(s);else if(r<=1)r=1;else{const h=this.getLineMaxColumn(s);r>=h&&(r=h)}const a=e.endLineNumber,l=e.endColumn;let c=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),d=Math.floor(typeof l=="number"&&!isNaN(l)?l:1);if(c<1)c=1,d=1;else if(c>t)c=t,d=this.getLineMaxColumn(c);else if(d<=1)d=1;else{const h=this.getLineMaxColumn(c);d>=h&&(d=h)}return n===s&&i===r&&a===c&&l===d&&e instanceof L&&!(e instanceof re)?e:new L(s,r,c,d)}_isValidPosition(e,t,n){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const i=this._buffer.getLineCount();if(e>i)return!1;if(t===1)return!0;const s=this.getLineMaxColumn(e);if(t>s)return!1;if(n===1){const r=this._buffer.getLineCharCode(e,t-2);if(kn(r))return!1}return!0}_validatePosition(e,t,n){const i=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),s=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),r=this._buffer.getLineCount();if(i<1)return new H(1,1);if(i>r)return new H(r,this.getLineMaxColumn(r));if(s<=1)return new H(i,1);const a=this.getLineMaxColumn(i);if(s>=a)return new H(i,a);if(n===1){const l=this._buffer.getLineCharCode(i,s-2);if(kn(l))return new H(i,s-1)}return new H(i,s)}validatePosition(e){return this._assertNotDisposed(),e instanceof H&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const n=e.startLineNumber,i=e.startColumn,s=e.endLineNumber,r=e.endColumn;if(!this._isValidPosition(n,i,0)||!this._isValidPosition(s,r,0))return!1;if(t===1){const a=i>1?this._buffer.getLineCharCode(n,i-2):0,l=r>1&&r<=this._buffer.getLineLength(s)?this._buffer.getLineCharCode(s,r-2):0,c=kn(a),d=kn(l);return!c&&!d}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof L&&!(e instanceof re)&&this._isValidRange(e,1))return e;const n=this._validatePosition(e.startLineNumber,e.startColumn,0),i=this._validatePosition(e.endLineNumber,e.endColumn,0),s=n.lineNumber,r=n.column,a=i.lineNumber,l=i.column;{const c=r>1?this._buffer.getLineCharCode(s,r-2):0,d=l>1&&l<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,l-2):0,h=kn(c),g=kn(d);return!h&&!g?new L(s,r,a,l):s===a&&r===l?new L(s,r-1,a,l-1):h&&g?new L(s,r-1,a,l+1):h?new L(s,r-1,a,l):new L(s,r,a,l+1)}}modifyPosition(e,t){this._assertNotDisposed();const n=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,n)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new L(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,n,i){return this._buffer.findMatchesLineByLine(e,t,n,i)}findMatches(e,t,n,i,s,r,a=Tee){this._assertNotDisposed();let l=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(h=>L.isIRange(h))&&(l=t.map(h=>this.validateRange(h)))),l===null&&(l=[this.getFullModelRange()]),l=l.sort((h,g)=>h.startLineNumber-g.startLineNumber||h.startColumn-g.startColumn);const c=[];c.push(l.reduce((h,g)=>L.areIntersecting(h,g)?h.plusRange(g):(c.push(h),g)));let d;if(!n&&e.indexOf(`
`)<0){const g=new Zl(e,n,i,s).parseSearchRequest();if(!g)return[];d=u(f=>this.findMatchesLineByLine(f,g,r,a),"matchMapper")}else d=u(h=>im.findMatches(this,new Zl(e,n,i,s),h,r,a),"matchMapper");return c.map(d).reduce((h,g)=>h.concat(g),[])}findNextMatch(e,t,n,i,s,r){this._assertNotDisposed();const a=this.validatePosition(t);if(!n&&e.indexOf(`
`)<0){const c=new Zl(e,n,i,s).parseSearchRequest();if(!c)return null;const d=this.getLineCount();let h=new L(a.lineNumber,a.column,d,this.getLineMaxColumn(d)),g=this.findMatchesLineByLine(h,c,r,1);return im.findNextMatch(this,new Zl(e,n,i,s),a,r),g.length>0||(h=new L(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),g=this.findMatchesLineByLine(h,c,r,1),g.length>0)?g[0]:null}return im.findNextMatch(this,new Zl(e,n,i,s),a,r)}findPreviousMatch(e,t,n,i,s,r){this._assertNotDisposed();const a=this.validatePosition(t);return im.findPreviousMatch(this,new Zl(e,n,i,s),a,r)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof $C?e:new $C(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let n=0,i=e.length;n<i;n++)t[n]=this._validateEditOperation(e[n]);return t}pushEditOperations(e,t,n){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),n)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,n){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const i=t.map(r=>({range:this.validateRange(r.range),text:r.text}));let s=!0;if(e)for(let r=0,a=e.length;r<a;r++){const l=e[r];let c=!1;for(let d=0,h=i.length;d<h;d++){const g=i[d].range,f=g.startLineNumber>l.endLineNumber,p=l.startLineNumber>g.endLineNumber;if(!f&&!p){c=!0;break}}if(!c){s=!1;break}}if(s)for(let r=0,a=this._trimAutoWhitespaceLines.length;r<a;r++){const l=this._trimAutoWhitespaceLines[r],c=this.getLineMaxColumn(l);let d=!0;for(let h=0,g=i.length;h<g;h++){const f=i[h].range,p=i[h].text;if(!(l<f.startLineNumber||l>f.endLineNumber)&&!(l===f.startLineNumber&&f.startColumn===c&&f.isEmpty()&&p&&p.length>0&&p.charAt(0)===`
`)&&!(l===f.startLineNumber&&f.startColumn===1&&f.isEmpty()&&p&&p.length>0&&p.charAt(p.length-1)===`
`)){d=!1;break}}if(d){const h=new L(l,1,l,c);t.push(new $C(null,h,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,n)}_applyUndo(e,t,n,i){const s=e.map(r=>{const a=this.getPositionAt(r.newPosition),l=this.getPositionAt(r.newEnd);return{range:new L(a.lineNumber,a.column,l.lineNumber,l.column),text:r.oldText}});this._applyUndoRedoEdits(s,t,!0,!1,n,i)}_applyRedo(e,t,n,i){const s=e.map(r=>{const a=this.getPositionAt(r.oldPosition),l=this.getPositionAt(r.oldEnd);return{range:new L(a.lineNumber,a.column,l.lineNumber,l.column),text:r.newText}});this._applyUndoRedoEdits(s,t,!1,!0,n,i)}_applyUndoRedoEdits(e,t,n,i,s,r){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=n,this._isRedoing=i,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(s)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(r),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const n=this._validateEditOperations(e);return this._doApplyEdits(n,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const n=this._buffer.getLineCount(),i=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),s=this._buffer.getLineCount(),r=i.changes;if(this._trimAutoWhitespaceLines=i.trimAutoWhitespaceLineNumbers,r.length!==0){for(let c=0,d=r.length;c<d;c++){const h=r[c],[g,f,p]=Du(h.text);this._tokenizationTextModelPart.acceptEdit(h.range,h.text,g,f,p),this._decorationsTree.acceptReplace(h.rangeOffset,h.rangeLength,h.text.length,h.forceMoveMarkers)}const a=[];this._increaseVersionId();let l=n;for(let c=0,d=r.length;c<d;c++){const h=r[c],[g]=Du(h.text);this._onDidChangeDecorations.fire();const f=h.range.startLineNumber,p=h.range.endLineNumber,_=p-f,v=g,C=Math.min(_,v),w=v-_,y=s-l-w+f,S=y,E=y+v,k=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new H(S,1)),this.getOffsetAt(new H(E,this.getLineMaxColumn(E))),0),T=Do.fromDecorations(k),x=new $g(T);for(let M=C;M>=0;M--){const F=f+M,V=y+M;x.takeFromEndWhile(j=>j.lineNumber>V);const G=x.takeFromEndWhile(j=>j.lineNumber===V);a.push(new mE(F,this.getLineContent(V),G))}if(C<_){const M=f+C;a.push(new V3(M+1,p))}if(C<v){const M=new $g(T),F=f+C,V=v-C,G=s-l-V+F+1,j=[],ae=[];for(let he=0;he<V;he++){const Se=G+he;ae[he]=this.getLineContent(Se),M.takeWhile(Te=>Te.lineNumber<Se),j[he]=M.takeWhile(Te=>Te.lineNumber===Se)}a.push(new H3(F+1,f+v,ae,j))}l+=w}this._emitContentChangedEvent(new tu(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:r,eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return i.reverseEdits===null?void 0:i.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;const n=Array.from(e).map(i=>new mE(i,this.getLineContent(i),this._getInjectedTextInLine(i)));this._onDidChangeInjectedText.fire(new GA(n))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){const n={addDecoration:(s,r)=>this._deltaDecorationsImpl(e,[],[{range:s,options:r}])[0],changeDecoration:(s,r)=>{this._changeDecorationImpl(s,r)},changeDecorationOptions:(s,r)=>{this._changeDecorationOptionsImpl(s,YP(r))},removeDecoration:s=>{this._deltaDecorationsImpl(e,[s],[])},deltaDecorations:(s,r)=>s.length===0&&r.length===0?[]:this._deltaDecorationsImpl(e,s,r)};let i=null;try{i=t(n)}catch(s){Ie(s)}return n.addDecoration=Up,n.changeDecoration=Up,n.changeDecorationOptions=Up,n.removeDecoration=Up,n.deltaDecorations=Up,i}deltaDecorations(e,t,n=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),Ie(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(n,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,n){const i=e?this._decorations[e]:null;if(!i)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:qP[n]}])[0]:null;if(!t)return this._decorationsTree.delete(i),delete this._decorations[i.id],null;const s=this._validateRangeRelaxedNoAllocations(t),r=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),a=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);return this._decorationsTree.delete(i),i.reset(this.getVersionId(),r,a,s),i.setOptions(qP[n]),this._decorationsTree.insert(i),i.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let n=0,i=t.length;n<i;n++){const s=t[n];this._decorationsTree.delete(s),delete this._decorations[s.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,n=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,n)}getLinesDecorations(e,t,n=0,i=!1){const s=this.getLineCount(),r=Math.min(s,Math.max(1,e)),a=Math.min(s,Math.max(1,t)),l=this.getLineMaxColumn(a),c=new L(r,1,a,l),d=this._getDecorationsInRange(c,n,i);return S2(d,this._decorationProvider.getDecorationsInRange(c,n,i)),d}getDecorationsInRange(e,t=0,n=!1){const i=this.validateRange(e),s=this._getDecorationsInRange(i,t,n);return S2(s,this._decorationProvider.getDecorationsInRange(i,t,n)),s}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),n=t+this._buffer.getLineLength(e),i=this._decorationsTree.getInjectedTextInInterval(this,t,n,0);return Do.fromDecorations(i).filter(s=>s.lineNumber===e)}getAllDecorations(e=0,t=!1){let n=this._decorationsTree.getAll(this,e,t,!1);return n=n.concat(this._decorationProvider.getAllDecorations(e,t)),n}_getDecorationsInRange(e,t,n){const i=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),s=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,i,s,t,n)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const n=this._decorations[e];if(!n)return;if(n.options.after){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(n.options.before){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}const i=this._validateRangeRelaxedNoAllocations(t),s=this._buffer.getOffsetAt(i.startLineNumber,i.startColumn),r=this._buffer.getOffsetAt(i.endLineNumber,i.endColumn);this._decorationsTree.delete(n),n.reset(this.getVersionId(),s,r,i),this._decorationsTree.insert(n),this._onDidChangeDecorations.checkAffectedAndFire(n.options),n.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(i.endLineNumber),n.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(i.startLineNumber)}_changeDecorationOptionsImpl(e,t){const n=this._decorations[e];if(!n)return;const i=!!(n.options.overviewRuler&&n.options.overviewRuler.color),s=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(n.options),this._onDidChangeDecorations.checkAffectedAndFire(t),n.options.after||t.after){const r=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.endLineNumber)}if(n.options.before||t.before){const r=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.startLineNumber)}i!==s?(this._decorationsTree.delete(n),n.setOptions(t),this._decorationsTree.insert(n)):n.setOptions(t)}_deltaDecorationsImpl(e,t,n){const i=this.getVersionId(),s=t.length;let r=0;const a=n.length;let l=0;const c=new Array(a);for(;r<s||l<a;){let d=null;if(r<s){do d=this._decorations[t[r++]];while(!d&&r<s);if(d){if(d.options.after){const h=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.endLineNumber)}if(d.options.before){const h=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.startLineNumber)}this._decorationsTree.delete(d),this._onDidChangeDecorations.checkAffectedAndFire(d.options)}}if(l<a){if(!d){const v=++this._lastDecorationId,C=`${this._instanceId};${v}`;d=new ZA(C,0,0),this._decorations[C]=d}const h=n[l],g=this._validateRangeRelaxedNoAllocations(h.range),f=YP(h.options),p=this._buffer.getOffsetAt(g.startLineNumber,g.startColumn),_=this._buffer.getOffsetAt(g.endLineNumber,g.endColumn);d.ownerId=e,d.reset(i,p,_,g),d.setOptions(f),d.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(g.endLineNumber),d.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(g.startLineNumber),this._onDidChangeDecorations.checkAffectedAndFire(f),this._decorationsTree.insert(d),c[l]=d.id,l++}else d&&delete this._decorations[d.id]}return c}getLanguageId(){return this.tokenization.getLanguageId()}setMode(e){this.tokenization.setLanguageId(e)}getLanguageIdAtPosition(e,t){return this.tokenization.getLanguageIdAtPosition(e,t)}getWordAtPosition(e){return this._tokenizationTextModelPart.getWordAtPosition(e)}getWordUntilPosition(e){return this._tokenizationTextModelPart.getWordUntilPosition(e)}normalizePosition(e,t){return e}getLineIndentColumn(e){return xee(this.getLineContent(e))+1}},"TextModel");Cl.MODEL_SYNC_LIMIT=50*1024*1024;Cl.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024;Cl.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3;Cl.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:ri.tabSize,indentSize:ri.indentSize,insertSpaces:ri.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:ri.trimAutoWhitespace,largeFileOptimizations:ri.largeFileOptimizations,bracketPairColorizationOptions:ri.bracketPairColorizationOptions};Cl=wee([CT(4,ky),CT(5,Gt),CT(6,rn)],Cl);function xee(o){let e=0;for(const t of o)if(t===" "||t==="	")e++;else break;return e}u(xee,"indentOfLine");function wT(o){return!!(o.options.overviewRuler&&o.options.overviewRuler.color)}u(wT,"isNodeInOverviewRuler");function yT(o){return!!o.options.after||!!o.options.before}u(yT,"isNodeInjectedText");class LE{constructor(){this._decorationsTree0=new s0,this._decorationsTree1=new s0,this._injectedTextDecorationsTree=new s0}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1)}_ensureNodesHaveRanges(e,t){for(const n of t)n.range===null&&(n.range=e.getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd));return t}getAllInInterval(e,t,n,i,s){const r=e.getVersionId(),a=this._intervalSearch(t,n,i,s,r);return this._ensureNodesHaveRanges(e,a)}_intervalSearch(e,t,n,i,s){const r=this._decorationsTree0.intervalSearch(e,t,n,i,s),a=this._decorationsTree1.intervalSearch(e,t,n,i,s),l=this._injectedTextDecorationsTree.intervalSearch(e,t,n,i,s);return r.concat(a).concat(l)}getInjectedTextInInterval(e,t,n,i){const s=e.getVersionId(),r=this._injectedTextDecorationsTree.intervalSearch(t,n,i,!1,s);return this._ensureNodesHaveRanges(e,r).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){const n=e.getVersionId(),i=this._injectedTextDecorationsTree.search(t,!1,n);return this._ensureNodesHaveRanges(e,i).filter(s=>s.options.showIfCollapsed||!s.range.isEmpty())}getAll(e,t,n,i){const s=e.getVersionId(),r=this._search(t,n,i,s);return this._ensureNodesHaveRanges(e,r)}_search(e,t,n,i){if(n)return this._decorationsTree1.search(e,t,i);{const s=this._decorationsTree0.search(e,t,i),r=this._decorationsTree1.search(e,t,i),a=this._injectedTextDecorationsTree.search(e,t,i);return s.concat(r).concat(a)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e),i=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(n).concat(i)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),n=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(n)}insert(e){yT(e)?this._injectedTextDecorationsTree.insert(e):wT(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){yT(e)?this._injectedTextDecorationsTree.delete(e):wT(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const n=e.getVersionId();return t.cachedVersionId!==n&&this._resolveNode(t,n),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){yT(e)?this._injectedTextDecorationsTree.resolveNode(e,t):wT(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,i){this._decorationsTree0.acceptReplace(e,t,n,i),this._decorationsTree1.acceptReplace(e,t,n,i),this._injectedTextDecorationsTree.acceptReplace(e,t,n,i)}}u(LE,"DecorationsTrees");function va(o){return o.replace(/[^a-z0-9\-_]/gi," ")}u(va,"cleanClassName");class iI{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}u(iI,"DecorationOptions");class K7 extends iI{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:io.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;const n=e?t.getColor(e.id):null;return n?n.toString():""}}u(K7,"ModelDecorationOverviewRulerOptions");class j7 extends iI{constructor(e){super(e),this.position=e.position}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?B.fromHex(e):t.getColor(e.id)}}u(j7,"ModelDecorationMinimapOptions");class Rc{constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}static from(e){return e instanceof Rc?e:new Rc(e)}}u(Rc,"ModelDecorationInjectedTextOptions");class Ae{constructor(e){var t,n;this.description=e.description,this.blockClassName=e.blockClassName?va(e.blockClassName):null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?va(e.className):null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new K7(e.overviewRuler):null,this.minimap=e.minimap?new j7(e.minimap):null,this.glyphMarginClassName=e.glyphMarginClassName?va(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?va(e.linesDecorationsClassName):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?va(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?va(e.marginClassName):null,this.inlineClassName=e.inlineClassName?va(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?va(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?va(e.afterContentClassName):null,this.after=e.after?Rc.from(e.after):null,this.before=e.before?Rc.from(e.before):null,this.hideInCommentTokens=(t=e.hideInCommentTokens)!==null&&t!==void 0?t:!1,this.hideInStringTokens=(n=e.hideInStringTokens)!==null&&n!==void 0?n:!1}static register(e){return new Ae(e)}static createDynamic(e){return new Ae(e)}}u(Ae,"ModelDecorationOptions");Ae.EMPTY=Ae.register({description:"empty"});const qP=[Ae.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),Ae.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),Ae.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),Ae.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function YP(o){return o instanceof Ae?o:Ae.createDynamic(o)}u(YP,"_normalizeOptions");class $7 extends U{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new R),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;if(this._deferredCnt--,this._deferredCnt===0){if(this._shouldFire){this.handleBeforeFire(this._affectedInjectedTextLines);const t={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler};this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._actual.fire(t)}(e=this._affectedInjectedTextLines)===null||e===void 0||e.clear(),this._affectedInjectedTextLines=null}}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){this._affectsMinimap||(this._affectsMinimap=!!(e.minimap&&e.minimap.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!(e.overviewRuler&&e.overviewRuler.color)),this._shouldFire=!0}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._shouldFire=!0}}u($7,"DidChangeDecorationsEmitter");class q7 extends U{constructor(){super(),this._fastEmitter=this._register(new R),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new R),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}u(q7,"DidChangeContentEmitter");var Eee=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const XP={getInitialState:()=>Qg,tokenizeEncoded:(o,e,t)=>Bw(0,t)};function kee(o,e,t){return Eee(this,void 0,void 0,function*(){if(!t)return ZP(e,o.languageIdCodec,XP);const n=yield Wt.getOrCreate(t);return ZP(e,o.languageIdCodec,n||XP)})}u(kee,"tokenizeToString");function Mee(o,e,t,n,i,s,r){let a="<div>",l=n,c=0,d=!0;for(let h=0,g=e.getCount();h<g;h++){const f=e.getEndOffset(h);if(f<=n)continue;let p="";for(;l<f&&l<i;l++){const _=o.charCodeAt(l);switch(_){case 9:{let v=s-(l+c)%s;for(c+=v-1;v>0;)r&&d?(p+="&#160;",d=!1):(p+=" ",d=!0),v--;break}case 60:p+="&lt;",d=!1;break;case 62:p+="&gt;",d=!1;break;case 38:p+="&amp;",d=!1;break;case 0:p+="&#00;",d=!1;break;case 65279:case 8232:case 8233:case 133:p+="�",d=!1;break;case 13:p+="&#8203",d=!1;break;case 32:r&&d?(p+="&#160;",d=!1):(p+=" ",d=!0);break;default:p+=String.fromCharCode(_),d=!1}}if(a+=`<span style="${e.getInlineStyle(h,t)}">${p}</span>`,f>i||l>=i)break}return a+="</div>",a}u(Mee,"tokenizeLineToHTML");function ZP(o,e,t){let n='<div class="monaco-tokenized-source">';const i=sa(o);let s=t.getInitialState();for(let r=0,a=i.length;r<a;r++){const l=i[r];r>0&&(n+="<br/>");const c=t.tokenizeEncoded(l,!0,s);yn.convertToEndOffset(c.tokens,l.length);const h=new yn(c.tokens,l,e).inflate();let g=0;for(let f=0,p=h.getCount();f<p;f++){const _=h.getClassName(f),v=h.getEndOffset(f);n+=`<span class="${_}">${HD(l.substring(g,v))}</span>`,g=v}s=c.endState}return n+="</div>",n}u(ZP,"_tokenizeToString");class Y7{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,n=this._changes,i=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,n,i)}}u(Y7,"PendingChanges");class X7{constructor(e,t,n,i,s){this.id=e,this.afterLineNumber=t,this.ordinal=n,this.height=i,this.minWidth=s,this.prefixSum=0}}u(X7,"EditorWhitespace");class Cf{constructor(e,t,n,i){this._instanceId=U4(++Cf.INSTANCE_COUNT),this._pendingChanges=new Y7,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=n,this._paddingBottom=i}static findInsertionIndex(e,t,n){let i=0,s=e.length;for(;i<s;){const r=i+s>>>1;t===e[r].afterLineNumber?n<e[r].ordinal?s=r:i=r+1:t<e[r].afterLineNumber?s=r:i=r+1}return i}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(i,s,r,a)=>{t=!0,i=i|0,s=s|0,r=r|0,a=a|0;const l=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new X7(l,i,s,r,a)),l},changeOneWhitespace:(i,s,r)=>{t=!0,s=s|0,r=r|0,this._pendingChanges.change({id:i,newAfterLineNumber:s,newHeight:r})},removeWhitespace:i=>{t=!0,this._pendingChanges.remove({id:i})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,n){if((e.length>0||n.length>0)&&(this._minWidth=-1),e.length+t.length+n.length<=1){for(const l of e)this._insertWhitespace(l);for(const l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(const l of n){const c=this._findWhitespaceIndex(l.id);c!==-1&&this._removeWhitespace(c)}return}const i=new Set;for(const l of n)i.add(l.id);const s=new Map;for(const l of t)s.set(l.id,l);const r=u(l=>{const c=[];for(const d of l)if(!i.has(d.id)){if(s.has(d.id)){const h=s.get(d.id);d.afterLineNumber=h.newAfterLineNumber,d.height=h.newHeight}c.push(d)}return c},"applyRemoveAndChange"),a=r(this._arr).concat(r(e));a.sort((l,c)=>l.afterLineNumber===c.afterLineNumber?l.ordinal-c.ordinal:l.afterLineNumber-c.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=Cf.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let n=0,i=t.length;n<i;n++)if(t[n].id===e)return n;return-1}_changeOneWhitespace(e,t,n){const i=this._findWhitespaceIndex(e);if(i!==-1&&(this._arr[i].height!==n&&(this._arr[i].height=n,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,i-1)),this._arr[i].afterLineNumber!==t)){const s=this._arr[i];this._removeWhitespace(i),s.afterLineNumber=t,this._insertWhitespace(s)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let n=0,i=this._arr.length;n<i;n++){const s=this._arr[n].afterLineNumber;e<=s&&s<=t?this._arr[n].afterLineNumber=e-1:s>t&&(this._arr[n].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let n=0,i=this._arr.length;n<i;n++){const s=this._arr[n].afterLineNumber;e<=s&&(this._arr[n].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let n=t;n<=e;n++)this._arr[n].prefixSum=this._arr[n-1].prefixSum+this._arr[n].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let n=0,i=t.length-1;for(;n<=i;){const r=(i-n|0)/2|0,a=n+r|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;n=a+1|0}else i=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const n=this._findLastWhitespaceBeforeLineNumber(e)+1;return n<this._arr.length?n:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;let n;e>1?n=this._lineHeight*(e-1):n=0;const i=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e-(t?1:0));return n+i+this._paddingTop}getVerticalOffsetAfterLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;const n=this._lineHeight*e,i=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e+(t?1:0));return n+i+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,n=this._arr.length;t<n;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const t=this._lineCount|0,n=this._lineHeight;let i=1,s=t;for(;i<s;){const r=(i+s)/2|0,a=this.getVerticalOffsetForLineNumber(r)|0;if(e>=a+n)i=r+1;else{if(e>=a)return r;s=r}}return i>t?t:i}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this._lineHeight,i=this.getLineNumberAtOrAfterVerticalOffset(e)|0,s=this.getVerticalOffsetForLineNumber(i)|0;let r=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(i)|0;const l=this.getWhitespacesCount()|0;let c,d;a===-1?(a=l,d=r+1,c=0):(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);let h=s,g=h;const f=5e5;let p=0;s>=f&&(p=Math.floor(s/f)*f,p=Math.floor(p/n)*n,g-=p);const _=[],v=e+(t-e)/2;let C=-1;for(let E=i;E<=r;E++){if(C===-1){const k=h,T=h+n;(k<=v&&v<T||k>v)&&(C=E)}for(h+=n,_[E-i]=g,g+=n;d===E;)g+=c,h+=c,a++,a>=l?d=r+1:(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);if(h>=t){r=E;break}}C===-1&&(C=r);const w=this.getVerticalOffsetForLineNumber(r)|0;let y=i,S=r;return y<S&&s<e&&y++,y<S&&w+n>t&&S--,{bigNumbersDelta:p,startLineNumber:i,endLineNumber:r,relativeVerticalOffset:_,centeredLineNumber:C,completelyVisibleStartLineNumber:y,completelyVisibleEndLineNumber:S}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let n;t>=1?n=this._lineHeight*t:n=0;let i;return e>0?i=this.getWhitespacesAccumulatedHeight(e-1):i=0,n+i+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,n=this.getWhitespacesCount()-1;if(n<0)return-1;const i=this.getVerticalOffsetForWhitespaceIndex(n),s=this.getHeightForWhitespaceIndex(n);if(e>=i+s)return-1;for(;t<n;){const r=Math.floor((t+n)/2),a=this.getVerticalOffsetForWhitespaceIndex(r),l=this.getHeightForWhitespaceIndex(r);if(e>=a+l)t=r+1;else{if(e>=a)return r;n=r}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const n=this.getVerticalOffsetForWhitespaceIndex(t);if(n>e)return null;const i=this.getHeightForWhitespaceIndex(t),s=this.getIdForWhitespaceIndex(t),r=this.getAfterLineNumberForWhitespaceIndex(t);return{id:s,afterLineNumber:r,verticalOffset:n,height:i}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),i=this.getWhitespacesCount()-1;if(n<0)return[];const s=[];for(let r=n;r<=i;r++){const a=this.getVerticalOffsetForWhitespaceIndex(r),l=this.getHeightForWhitespaceIndex(r);if(a>=t)break;s.push({id:this.getIdForWhitespaceIndex(r),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(r),verticalOffset:a,height:l})}return s}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}}u(Cf,"LinesLayout");Cf.INSTANCE_COUNT=0;const Dee=125;class pg{constructor(e,t,n,i){e=e|0,t=t|0,n=n|0,i=i|0,e<0&&(e=0),t<0&&(t=0),n<0&&(n=0),i<0&&(i=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=n,this.contentHeight=i,this.scrollHeight=Math.max(n,i)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}u(pg,"EditorScrollDimensions");class Z7 extends U{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new R),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new pg(0,0,0,0),this._scrollable=this._register(new ap({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:t})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const n=t.contentWidth!==e.contentWidth,i=t.contentHeight!==e.contentHeight;(n||i)&&this._onDidContentSizeChange.fire(new by(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}}u(Z7,"EditorScrollable");class J7 extends U{constructor(e,t,n){super(),this._configuration=e;const i=this._configuration.options,s=i.get(133),r=i.get(77);this._linesLayout=new Cf(t,i.get(61),r.top,r.bottom),this._scrollable=this._register(new Z7(0,n)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new pg(s.contentWidth,0,s.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(105)?Dee:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(61)&&this._linesLayout.setLineHeight(t.get(61)),e.hasChanged(77)){const n=t.get(77);this._linesLayout.setPadding(n.top,n.bottom)}if(e.hasChanged(133)){const n=t.get(133),i=n.contentWidth,s=n.height,r=this._scrollable.getScrollDimensions(),a=r.contentWidth;this._scrollable.setScrollDimensions(new pg(i,r.contentWidth,s,this._getContentHeight(i,s,a)))}else this._updateHeight();e.hasChanged(105)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const i=this._configuration.options.get(94);return i.horizontal===2||e>=t?0:i.horizontalScrollbarSize}_getContentHeight(e,t,n){const i=this._configuration.options;let s=this._linesLayout.getLinesTotalHeight();return i.get(96)?s+=Math.max(0,t-i.get(61)-i.get(77).bottom):s+=this._getHorizontalScrollbarHeight(e,n),s}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,n=e.height,i=e.contentWidth;this._scrollable.setScrollDimensions(new pg(t,e.contentWidth,n,this._getContentHeight(t,n,i)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new Gx(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new Gx(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(e){const t=this._configuration.options,n=t.get(134),i=t.get(46),s=t.get(133);if(n.isViewportWrapping){const r=t.get(67);return e>s.contentWidth+i.typicalHalfwidthCharacterWidth&&r.enabled&&r.side==="right"?e+s.verticalScrollbarWidth:e}else{const r=t.get(95)*i.typicalHalfwidthCharacterWidth,a=this._linesLayout.getWhitespaceMinWidth();return Math.max(e+r+s.verticalScrollbarWidth,a)}}setMaxLineWidth(e){const t=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new pg(t.width,this._computeContentWidth(e),t.height,t.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,n=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),i=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(n);return{scrollTop:t,scrollTopWithoutViewZones:t-i,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetAfterLineNumber(e,t)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}deltaScrollNow(e,t){const n=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:n.scrollLeft+e,scrollTop:n.scrollTop+t})}}u(J7,"ViewLayout");class Q7{constructor(e,t,n,i,s){this.editorId=e,this.model=t,this.configuration=n,this._linesCollection=i,this._coordinatesConverter=s,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let n=this._decorationsCache[t];if(!n){const i=e.range,s=e.options;let r;if(s.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new H(i.startLineNumber,1),0),l=this._coordinatesConverter.convertModelPositionToViewPosition(new H(i.endLineNumber,this.model.getLineMaxColumn(i.endLineNumber)),1);r=new L(a.lineNumber,a.column,l.lineNumber,l.column)}else r=this._coordinatesConverter.convertModelRangeToViewRange(i,1);n=new lA(r,s),this._decorationsCache[t]=n}return n}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(e),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(e){const t=new L(e,this._linesCollection.getViewLineMinColumn(e),e,this._linesCollection.getViewLineMaxColumn(e));return this._getDecorationsInRange(t).inlineDecorations[0]}_getDecorationsInRange(e){const t=this._linesCollection.getDecorationsInRange(e,this.editorId,j0(this.configuration.options)),n=e.startLineNumber,i=e.endLineNumber,s=[];let r=0;const a=[];for(let l=n;l<=i;l++)a[l-n]=[];for(let l=0,c=t.length;l<c;l++){const d=t[l],h=d.options;if(!sI(this.model,d))continue;const g=this._getOrCreateViewModelDecoration(d),f=g.range;if(s[r++]=g,h.inlineClassName){const p=new xg(f,h.inlineClassName,h.inlineClassNameAffectsLetterSpacing?3:0),_=Math.max(n,f.startLineNumber),v=Math.min(i,f.endLineNumber);for(let C=_;C<=v;C++)a[C-n].push(p)}if(h.beforeContentClassName&&n<=f.startLineNumber&&f.startLineNumber<=i){const p=new xg(new L(f.startLineNumber,f.startColumn,f.startLineNumber,f.startColumn),h.beforeContentClassName,1);a[f.startLineNumber-n].push(p)}if(h.afterContentClassName&&n<=f.endLineNumber&&f.endLineNumber<=i){const p=new xg(new L(f.endLineNumber,f.endColumn,f.endLineNumber,f.endColumn),h.afterContentClassName,2);a[f.endLineNumber-n].push(p)}}return{decorations:s,inlineDecorations:a}}}u(Q7,"ViewModelDecorations");function sI(o,e){return!(e.options.hideInCommentTokens&&oI(o,e)||e.options.hideInStringTokens&&rI(o,e))}u(sI,"isModelDecorationVisible");function oI(o,e){return e9(o,e.range,t=>t===1)}u(oI,"isModelDecorationInComment");function rI(o,e){return e9(o,e.range,t=>t===2)}u(rI,"isModelDecorationInString");function e9(o,e,t){for(let n=e.startLineNumber;n<=e.endLineNumber;n++){const i=o.tokenization.getLineTokens(n),s=n===e.startLineNumber,r=n===e.endLineNumber;let a=s?i.findTokenIndexAtOffset(e.startColumn-1):0;for(;a<i.getCount()&&!(r&&i.getStartOffset(a)>e.endColumn-1);){if(!t(i.getStandardTokenType(a)))return!1;a++}}return!0}u(e9,"testTokensInRange");function ST(o,e){return o===null?e?Nb.INSTANCE:Pb.INSTANCE:new t9(o,e)}u(ST,"createModelLineProjection");class t9{constructor(e,t){this._projectionData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(e,t,n){this._assertVisible();const i=n>0?this._projectionData.breakOffsets[n-1]:0,s=this._projectionData.breakOffsets[n];let r;if(this._projectionData.injectionOffsets!==null){const a=this._projectionData.injectionOffsets.map((c,d)=>new Do(0,0,c+1,this._projectionData.injectionOptions[d],0));r=Do.applyInjectedText(e.getLineContent(t),a).substring(i,s)}else r=e.getValueInRange({startLineNumber:t,startColumn:i+1,endLineNumber:t,endColumn:s+1});return n>0&&(r=JP(this._projectionData.wrappedTextIndentLength)+r),r}getViewLineLength(e,t,n){return this._assertVisible(),this._projectionData.getLineLength(n)}getViewLineMinColumn(e,t,n){return this._assertVisible(),this._projectionData.getMinOutputOffset(n)+1}getViewLineMaxColumn(e,t,n){return this._assertVisible(),this._projectionData.getMaxOutputOffset(n)+1}getViewLineData(e,t,n){const i=new Array;return this.getViewLinesData(e,t,n,1,0,[!0],i),i[0]}getViewLinesData(e,t,n,i,s,r,a){this._assertVisible();const l=this._projectionData,c=l.injectionOffsets,d=l.injectionOptions;let h=null;if(c){h=[];let f=0,p=0;for(let _=0;_<l.getOutputLineCount();_++){const v=new Array;h[_]=v;const C=_>0?l.breakOffsets[_-1]:0,w=l.breakOffsets[_];for(;p<c.length;){const y=d[p].content.length,S=c[p]+f,E=S+y;if(S>w)break;if(C<E){const k=d[p];if(k.inlineClassName){const T=_>0?l.wrappedTextIndentLength:0,x=T+Math.max(S-C,0),M=T+Math.min(E-C,w);x!==M&&v.push(new gV(x,M,k.inlineClassName,k.inlineClassNameAffectsLetterSpacing))}}if(E<=w)f+=y,p++;else break}}}let g;c?g=e.tokenization.getLineTokens(t).withInserted(c.map((f,p)=>({offset:f,text:d[p].content,tokenMetadata:yn.defaultTokenMetadata}))):g=e.tokenization.getLineTokens(t);for(let f=n;f<n+i;f++){const p=s+f-n;if(!r[p]){a[p]=null;continue}a[p]=this._getViewLineData(g,h?h[f]:null,f)}}_getViewLineData(e,t,n){this._assertVisible();const i=this._projectionData,s=n>0?i.wrappedTextIndentLength:0,r=n>0?i.breakOffsets[n-1]:0,a=i.breakOffsets[n],l=e.sliceAndInflate(r,a,s);let c=l.getLineContent();n>0&&(c=JP(i.wrappedTextIndentLength)+c);const d=this._projectionData.getMinOutputOffset(n)+1,h=c.length+1,g=n+1<this.getViewLineCount(),f=n===0?0:i.breakOffsetsVisibleColumn[n-1];return new $w(c,g,d,h,f,l,t)}getModelColumnOfViewPosition(e,t){return this._assertVisible(),this._projectionData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t,n=2){return this._assertVisible(),this._projectionData.translateToOutputPosition(t-1,n).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this._assertVisible();const n=this._projectionData.translateToOutputPosition(t-1);return e+n.outputLineIndex}normalizePosition(e,t,n){const i=t.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,t.column-1,n).toPosition(i)}getInjectedTextAt(e,t){return this._projectionData.getInjectedText(e,t-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}u(t9,"ModelLineProjection");class Nb{constructor(){}isVisible(){return!0}setVisible(e){return e?this:Pb.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,n){return e.getLineContent(t)}getViewLineLength(e,t,n){return e.getLineLength(t)}getViewLineMinColumn(e,t,n){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,n){return e.getLineMaxColumn(t)}getViewLineData(e,t,n){const i=e.tokenization.getLineTokens(t),s=i.getLineContent();return new $w(s,!1,1,s.length+1,0,i.inflate(),null)}getViewLinesData(e,t,n,i,s,r,a){if(!r[s]){a[s]=null;return}a[s]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new H(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,n){return t}getInjectedTextAt(e,t){return null}}u(Nb,"IdentityModelLineProjection");Nb.INSTANCE=new Nb;class Pb{constructor(){}isVisible(){return!1}setVisible(e){return e?Nb.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,n){throw new Error("Not supported")}getViewLineLength(e,t,n){throw new Error("Not supported")}getViewLineMinColumn(e,t,n){throw new Error("Not supported")}getViewLineMaxColumn(e,t,n){throw new Error("Not supported")}getViewLineData(e,t,n){throw new Error("Not supported")}getViewLinesData(e,t,n,i,s,r,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,n){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}}u(Pb,"HiddenModelLineProjection");Pb.INSTANCE=new Pb;const TT=[""];function JP(o){if(o>=TT.length)for(let e=1;e<=o;e++)TT[e]=Aee(e);return TT[o]}u(JP,"spaces");function Aee(o){return new Array(o+1).join(" ")}u(Aee,"_makeSpaces");class n9{constructor(e,t,n,i,s,r,a,l,c){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=n,this._monospaceLineBreaksComputerFactory=i,this.fontInfo=s,this.tabSize=r,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=c,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new i9(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const n=this.model.getLinesContent(),i=this.model.getInjectedTextDecorations(this._editorId),s=n.length,r=this.createLineBreaksComputer(),a=new $g(Do.fromDecorations(i));for(let _=0;_<s;_++){const v=a.takeWhile(C=>C.lineNumber===_+1);r.addRequest(n[_],v,t?t[_]:null)}const l=r.finalize(),c=[],d=this.hiddenAreasDecorationIds.map(_=>this.model.getDecorationRange(_)).sort(L.compareRangesUsingStarts);let h=1,g=0,f=-1,p=f+1<d.length?g+1:s+2;for(let _=0;_<s;_++){const v=_+1;v===p&&(f++,h=d[f].startLineNumber,g=d[f].endLineNumber,p=f+1<d.length?g+1:s+2);const C=v>=h&&v<=g,w=ST(l[_],!C);c[_]=w.getViewLineCount(),this.modelLineProjections[_]=w}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new j5(c)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){const t=e.map(g=>this.model.validateRange(g)),n=Iee(t),i=this.hiddenAreasDecorationIds.map(g=>this.model.getDecorationRange(g)).sort(L.compareRangesUsingStarts);if(n.length===i.length){let g=!1;for(let f=0;f<n.length;f++)if(!n[f].equalsRange(i[f])){g=!0;break}if(!g)return!1}const s=n.map(g=>({range:g,options:Ae.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,s);const r=n;let a=1,l=0,c=-1,d=c+1<r.length?l+1:this.modelLineProjections.length+2,h=!1;for(let g=0;g<this.modelLineProjections.length;g++){const f=g+1;f===d&&(c++,a=r[c].startLineNumber,l=r[c].endLineNumber,d=c+1<r.length?l+1:this.modelLineProjections.length+2);let p=!1;if(f>=a&&f<=l?this.modelLineProjections[g].isVisible()&&(this.modelLineProjections[g]=this.modelLineProjections[g].setVisible(!1),p=!0):(h=!0,this.modelLineProjections[g].isVisible()||(this.modelLineProjections[g]=this.modelLineProjections[g].setVisible(!0),p=!0)),p){const _=this.modelLineProjections[g].getViewLineCount();this.projectedModelLineLineCounts.setValue(g,_)}}return h||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.modelLineProjections.length?!1:this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,n,i){const s=this.fontInfo.equals(e),r=this.wrappingStrategy===t,a=this.wrappingColumn===n,l=this.wrappingIndent===i;if(s&&r&&a&&l)return!1;const c=s&&r&&!a&&l;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=n,this.wrappingIndent=i;let d=null;if(c){d=[];for(let h=0,g=this.modelLineProjections.length;h<g;h++)d[h]=this.modelLineProjections[h].getProjectionData()}return this._constructLines(!1,d),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,n){if(!e||e<=this._validModelVersionId)return null;const i=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,s=this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections.splice(t-1,n-t+1),this.projectedModelLineLineCounts.removeValues(t-1,n-t+1),new w1(i,s)}onModelLinesInserted(e,t,n,i){if(!e||e<=this._validModelVersionId)return null;const s=t>2&&!this.modelLineProjections[t-2].isVisible(),r=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1;let a=0;const l=[],c=[];for(let d=0,h=i.length;d<h;d++){const g=ST(i[d],!s);l.push(g);const f=g.getViewLineCount();a+=f,c[d]=f}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(l).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,c),new y1(r,r+a-1)}onModelLineChanged(e,t,n){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];const i=t-1,s=this.modelLineProjections[i].getViewLineCount(),r=this.modelLineProjections[i].isVisible(),a=ST(n,r);this.modelLineProjections[i]=a;const l=this.modelLineProjections[i].getViewLineCount();let c=!1,d=0,h=-1,g=0,f=-1,p=0,_=-1;s>l?(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=d+l-1,p=h+1,_=p+(s-l)-1,c=!0):s<l?(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=d+s-1,g=h+1,f=g+(l-s)-1,c=!0):(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=d+l-1),this.projectedModelLineLineCounts.setValue(i,l);const v=d<=h?new zA(d,h-d+1):null,C=g<=f?new y1(g,f):null,w=p<=_?new w1(p,_):null;return[c,v,C,w]}acceptVersionId(e){this._validModelVersionId=e,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),n=this._toValidViewLineNumber(n);const i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),s=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),r=this.convertViewPositionToModelPosition(n,this.getViewLineMinColumn(n)),a=this.model.guides.getActiveIndentGuide(i.lineNumber,s.lineNumber,r.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),c=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:c.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);const t=this.projectedModelLineLineCounts.getIndexOf(e-1),n=t.index,i=t.remainder;return new xE(n+1,i)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),i=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new H(e.modelLineNumber,i)}getModelEndPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),i=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new H(e.modelLineNumber,i)}getViewLineInfosGroupedByModelRanges(e,t){const n=this.getViewLineInfo(e),i=this.getViewLineInfo(t),s=new Array;let r=this.getModelStartPositionOfViewLine(n),a=new Array;for(let l=n.modelLineNumber;l<=i.modelLineNumber;l++){const c=this.modelLineProjections[l-1];if(c.isVisible()){const d=l===n.modelLineNumber?n.modelLineWrappedLineIdx:0,h=l===i.modelLineNumber?i.modelLineWrappedLineIdx+1:c.getViewLineCount();for(let g=d;g<h;g++)a.push(new xE(l,g))}if(!c.isVisible()&&r){const d=new H(l-1,this.model.getLineMaxColumn(l-1)+1),h=L.fromPositions(r,d);s.push(new EE(h,a)),a=[],r=null}else c.isVisible()&&!r&&(r=new H(l,1))}if(r){const l=L.fromPositions(r,this.getModelEndPositionOfViewLine(i));s.push(new EE(l,a))}return s}getViewLinesBracketGuides(e,t,n,i){const s=n?this.convertViewPositionToModelPosition(n.lineNumber,n.column):null,r=[];for(const a of this.getViewLineInfosGroupedByModelRanges(e,t)){const l=a.modelRange.startLineNumber,c=this.model.guides.getLinesBracketGuides(l,a.modelRange.endLineNumber,s,i);for(const d of a.viewLines){const g=c[d.modelLineNumber-l].map(f=>{if(f.forWrappedLinesAfterColumn!==-1&&this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.forWrappedLinesAfterColumn).lineNumber>=d.modelLineWrappedLineIdx||f.forWrappedLinesBeforeOrAtColumn!==-1&&this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.forWrappedLinesBeforeOrAtColumn).lineNumber<d.modelLineWrappedLineIdx)return;if(!f.horizontalLine)return f;let p=-1;if(f.column!==-1){const C=this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.column);if(C.lineNumber===d.modelLineWrappedLineIdx)p=C.column;else if(C.lineNumber<d.modelLineWrappedLineIdx)p=this.getMinColumnOfViewLine(d);else if(C.lineNumber>d.modelLineWrappedLineIdx)return}const _=this.convertModelPositionToViewPosition(d.modelLineNumber,f.horizontalLine.endColumn),v=this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.horizontalLine.endColumn);return v.lineNumber===d.modelLineWrappedLineIdx?new oc(f.visibleColumn,p,f.className,new Ng(f.horizontalLine.top,_.column),-1,-1):v.lineNumber<d.modelLineWrappedLineIdx||f.visibleColumn!==-1?void 0:new oc(f.visibleColumn,p,f.className,new Ng(f.horizontalLine.top,this.getMaxColumnOfViewLine(d)),-1,-1)});r.push(g.filter(f=>!!f))}}return r}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),i=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let s=[];const r=[],a=[],l=n.lineNumber-1,c=i.lineNumber-1;let d=null;for(let p=l;p<=c;p++){const _=this.modelLineProjections[p];if(_.isVisible()){const v=_.getViewLineNumberOfModelPosition(0,p===l?n.column:1),C=_.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(p+1)),w=C-v+1;let y=0;w>1&&_.getViewLineMinColumn(this.model,p+1,C)===1&&(y=v===0?1:2),r.push(w),a.push(y),d===null&&(d=new H(p+1,0))}else d!==null&&(s=s.concat(this.model.guides.getLinesIndentGuides(d.lineNumber,p)),d=null)}d!==null&&(s=s.concat(this.model.guides.getLinesIndentGuides(d.lineNumber,i.lineNumber)),d=null);const h=t-e+1,g=new Array(h);let f=0;for(let p=0,_=s.length;p<_;p++){let v=s[p];const C=Math.min(h-f,r[p]),w=a[p];let y;w===2?y=0:w===1?y=1:y=C;for(let S=0;S<C;S++)S===y&&(v=0),g[f++]=v}return g}getViewLineContent(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const i=this.projectedModelLineLineCounts.getIndexOf(e-1);let s=e;const r=i.index,a=i.remainder,l=[];for(let c=r,d=this.model.getLineCount();c<d;c++){const h=this.modelLineProjections[c];if(!h.isVisible())continue;const g=c===r?a:0;let f=h.getViewLineCount()-g,p=!1;if(s+f>t&&(p=!0,f=t-s+1),h.getViewLinesData(this.model,c+1,g,f,s-e,n,l),s+=f,p)break}return l}validateViewPosition(e,t,n){e=this._toValidViewLineNumber(e);const i=this.projectedModelLineLineCounts.getIndexOf(e-1),s=i.index,r=i.remainder,a=this.modelLineProjections[s],l=a.getViewLineMinColumn(this.model,s+1,r),c=a.getViewLineMaxColumn(this.model,s+1,r);t<l&&(t=l),t>c&&(t=c);const d=a.getModelColumnOfViewPosition(r,t);return this.model.validatePosition(new H(s+1,d)).equals(n)?new H(e,t):this.convertModelPositionToViewPosition(n.lineNumber,n.column)}validateViewRange(e,t){const n=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),i=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new L(n.lineNumber,n.column,i.lineNumber,i.column)}convertViewPositionToModelPosition(e,t){const n=this.getViewLineInfo(e),i=this.modelLineProjections[n.modelLineNumber-1].getModelColumnOfViewPosition(n.modelLineWrappedLineIdx,t);return this.model.validatePosition(new H(n.modelLineNumber,i))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),n=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new L(t.lineNumber,t.column,n.lineNumber,n.column)}convertModelPositionToViewPosition(e,t,n=2){const i=this.model.validatePosition(new H(e,t)),s=i.lineNumber,r=i.column;let a=s-1,l=!1;for(;a>0&&!this.modelLineProjections[a].isVisible();)a--,l=!0;if(a===0&&!this.modelLineProjections[a].isVisible())return new H(1,1);const c=1+this.projectedModelLineLineCounts.getPrefixSum(a);let d;return l?d=this.modelLineProjections[a].getViewPositionOfModelPosition(c,this.model.getLineMaxColumn(a+1),n):d=this.modelLineProjections[s-1].getViewPositionOfModelPosition(c,r,n),d}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return L.fromPositions(n)}else{const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),i=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new L(n.lineNumber,n.column,i.lineNumber,i.column)}}getViewLineNumberOfModelPosition(e,t){let n=e-1;if(this.modelLineProjections[n].isVisible()){const s=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(s,t)}for(;n>0&&!this.modelLineProjections[n].isVisible();)n--;if(n===0&&!this.modelLineProjections[n].isVisible())return 1;const i=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(i,this.model.getLineMaxColumn(n+1))}getDecorationsInRange(e,t,n){const i=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),s=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(s.lineNumber-i.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new L(i.lineNumber,1,s.lineNumber,s.column),t,n);let r=[];const a=i.lineNumber-1,l=s.lineNumber-1;let c=null;for(let f=a;f<=l;f++)if(this.modelLineProjections[f].isVisible())c===null&&(c=new H(f+1,f===a?i.column:1));else if(c!==null){const _=this.model.getLineMaxColumn(f);r=r.concat(this.model.getDecorationsInRange(new L(c.lineNumber,c.column,f,_),t,n)),c=null}c!==null&&(r=r.concat(this.model.getDecorationsInRange(new L(c.lineNumber,c.column,s.lineNumber,s.column),t,n)),c=null),r.sort((f,p)=>{const _=L.compareRangesUsingStarts(f.range,p.range);return _===0?f.id<p.id?-1:f.id>p.id?1:0:_});const d=[];let h=0,g=null;for(const f of r){const p=f.id;g!==p&&(g=p,d[h++]=f)}return d}getInjectedTextAt(e){const t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){const n=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[n.modelLineNumber-1].normalizePosition(n.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){const t=this.getViewLineInfo(e);return t.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(t.modelLineNumber):0}}u(n9,"ViewModelLinesFromProjectedModel");function Iee(o){if(o.length===0)return[];const e=o.slice();e.sort(L.compareRangesUsingStarts);const t=[];let n=e[0].startLineNumber,i=e[0].endLineNumber;for(let s=1,r=e.length;s<r;s++){const a=e[s];a.startLineNumber>i+1?(t.push(new L(n,1,i,1)),n=a.startLineNumber,i=a.endLineNumber):a.endLineNumber>i&&(i=a.endLineNumber)}return t.push(new L(n,1,i,1)),t}u(Iee,"normalizeLineRanges");class xE{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}}u(xE,"ViewLineInfo");class EE{constructor(e,t){this.modelRange=e,this.viewLines=t}}u(EE,"ViewLineInfoGroupedByModelRange");class i9{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}u(i9,"CoordinatesConverter");class s9{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new o9(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,n,i){return!1}createLineBreaksComputer(){const e=[];return{addRequest:(t,n,i)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,n){return new w1(t,n)}onModelLinesInserted(e,t,n,i){return new y1(t,n)}onModelLineChanged(e,t,n){return[!1,new zA(t,1),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,n){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,n){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const n=t-e+1,i=new Array(n);for(let s=0;s<n;s++)i[s]=0;return i}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){const t=this.model.tokenization.getLineTokens(e),n=t.getLineContent();return new $w(n,!1,1,n.length+1,0,t.inflate(),null)}getViewLinesData(e,t,n){const i=this.model.getLineCount();e=Math.min(Math.max(1,e),i),t=Math.min(Math.max(1,t),i);const s=[];for(let r=e;r<=t;r++){const a=r-e;s[a]=n[a]?this.getViewLineData(r):null}return s}getDecorationsInRange(e,t,n){return this.model.getDecorationsInRange(e,t,n)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}u(s9,"ViewModelLinesFromModelAsIs");class o9{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}u(o9,"IdentityCoordinatesConverter");class r9 extends U{constructor(e,t,n,i,s,r,a,l){if(super(),this.languageConfigurationService=a,this._themeService=l,this._editorId=e,this._configuration=t,this.model=n,this._eventDispatcher=new Z3,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new bd(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._tokenizeViewportSoon=this._register(new pt(()=>this.tokenizeViewport(),50)),this._updateConfigurationViewLineCount=this._register(new pt(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStart=My.create(this.model),this.model.isTooLargeForTokenization())this._lines=new s9(this.model);else{const c=this._configuration.options,d=c.get(46),h=c.get(127),g=c.get(134),f=c.get(126);this._lines=new n9(this._editorId,this.model,i,s,d,this.model.getOptions().tabSize,h,g.wrappingColumn,f)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new Mu(n,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new J7(this._configuration,this.getLineCount(),r)),this._register(this.viewLayout.onDidScroll(c=>{c.scrollTopChanged&&this._tokenizeViewportSoon.schedule(),c.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new $3(c)),this._eventDispatcher.emitOutgoingEvent(new vy(c.oldScrollWidth,c.oldScrollLeft,c.oldScrollHeight,c.oldScrollTop,c.scrollWidth,c.scrollLeft,c.scrollHeight,c.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(c=>{this._eventDispatcher.emitOutgoingEvent(c)})),this._decorations=new Q7(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(c=>{try{const d=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(d,c)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(cp.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new X3)})),this._register(this._themeService.onDidColorThemeChange(c=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new q3(c))})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}tokenizeViewport(){const e=this.viewLayout.getLinesViewportData(),t=new L(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber)),n=this._toModelVisibleRanges(t);for(const i of n)this.model.tokenization.tokenizeViewport(i.startLineNumber,i.endLineNumber)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new K3(e)),this._eventDispatcher.emitOutgoingEvent(new _y(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new W3)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new U3)}_onConfigurationChanged(e,t){let n=null;if(this._viewportStart.isValid){const d=new H(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber));n=this.coordinatesConverter.convertViewPositionToModelPosition(d)}let i=!1;const s=this._configuration.options,r=s.get(46),a=s.get(127),l=s.get(134),c=s.get(126);if(this._lines.setWrappingSettings(r,a,l.wrappingColumn,c)&&(e.emitViewEvent(new hm),e.emitViewEvent(new gm),e.emitViewEvent(new _d(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.getCurrentScrollTop()!==0&&(i=!0),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(83)&&(this._decorations.reset(),e.emitViewEvent(new _d(null))),e.emitViewEvent(new G3(t)),this.viewLayout.onConfigurationChanged(t),i&&n){const d=this.coordinatesConverter.convertModelPositionToViewPosition(n),h=this.viewLayout.getVerticalOffsetForLineNumber(d.lineNumber);this.viewLayout.setScrollPosition({scrollTop:h+this._viewportStart.startLineDelta},1)}bd.shouldRecreate(t)&&(this.cursorConfig=new bd(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const n=this._eventDispatcher.beginEmitViewEvents();let i=!1,s=!1;const r=e instanceof mc?e.rawContentChangedEvent.changes:e.changes,a=e instanceof mc?e.rawContentChangedEvent.versionId:null,l=this._lines.createLineBreaksComputer();for(const h of r)switch(h.changeType){case 4:{for(let g=0;g<h.detail.length;g++){const f=h.detail[g];let p=h.injectedTexts[g];p&&(p=p.filter(_=>!_.ownerId||_.ownerId===this._editorId)),l.addRequest(f,p,null)}break}case 2:{let g=null;h.injectedText&&(g=h.injectedText.filter(f=>!f.ownerId||f.ownerId===this._editorId)),l.addRequest(h.detail,g,null);break}}const c=l.finalize(),d=new $g(c);for(const h of r)switch(h.changeType){case 1:{this._lines.onModelFlushed(),n.emitViewEvent(new hm),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),i=!0;break}case 3:{const g=this._lines.onModelLinesDeleted(a,h.fromLineNumber,h.toLineNumber);g!==null&&(n.emitViewEvent(g),this.viewLayout.onLinesDeleted(g.fromLineNumber,g.toLineNumber)),i=!0;break}case 4:{const g=d.takeCount(h.detail.length),f=this._lines.onModelLinesInserted(a,h.fromLineNumber,h.toLineNumber,g);f!==null&&(n.emitViewEvent(f),this.viewLayout.onLinesInserted(f.fromLineNumber,f.toLineNumber)),i=!0;break}case 2:{const g=d.dequeue(),[f,p,_,v]=this._lines.onModelLineChanged(a,h.lineNumber,g);s=f,p&&n.emitViewEvent(p),_&&(n.emitViewEvent(_),this.viewLayout.onLinesInserted(_.fromLineNumber,_.toLineNumber)),v&&(n.emitViewEvent(v),this.viewLayout.onLinesDeleted(v.fromLineNumber,v.toLineNumber));break}case 5:break}a!==null&&this._lines.acceptVersionId(a),this.viewLayout.onHeightMaybeChanged(),!i&&s&&(n.emitViewEvent(new gm),n.emitViewEvent(new _d(null)),this._cursor.onLineMappingChanged(n),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}const t=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&t){const n=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(n){const i=this.coordinatesConverter.convertModelPositionToViewPosition(n.getStartPosition()),s=this.viewLayout.getVerticalOffsetForLineNumber(i.lineNumber);this.viewLayout.setScrollPosition({scrollTop:s+this._viewportStart.startLineDelta},1)}}try{const n=this._eventDispatcher.beginEmitViewEvents();e instanceof mc&&n.emitOutgoingEvent(new o7(e.contentChangedEvent)),this._cursor.onModelContentChanged(n,e)}finally{this._eventDispatcher.endEmitViewEvents()}this._tokenizeViewportSoon.schedule()})),this._register(this.model.onDidChangeTokens(e=>{const t=[];for(let n=0,i=e.ranges.length;n<i;n++){const s=e.ranges[n],r=this.coordinatesConverter.convertModelPositionToViewPosition(new H(s.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new H(s.toLineNumber,this.model.getLineMaxColumn(s.toLineNumber))).lineNumber;t[n]={fromLineNumber:r,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new Y3(t)),e.tokenizationSupportChanged&&this._tokenizeViewportSoon.schedule(),this._eventDispatcher.emitOutgoingEvent(new a7(e))})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new j3),this.cursorConfig=new bd(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new s7(e))})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new bd(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new i7(e))})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new hm),t.emitViewEvent(new gm),t.emitViewEvent(new _d(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new bd(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new r7(e))})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new _d(e)),this._eventDispatcher.emitOutgoingEvent(new n7(e))}))}setHiddenAreas(e){let t=!1;try{const n=this._eventDispatcher.beginEmitViewEvents();t=this._lines.setHiddenAreas(e),t&&(n.emitViewEvent(new hm),n.emitViewEvent(new gm),n.emitViewEvent(new _d(null)),this._cursor.onLineMappingChanged(n),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),t&&this._eventDispatcher.emitOutgoingEvent(new e7)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(133),t=this._configuration.options.get(61),n=Math.max(20,Math.round(e.height/t)),i=this.viewLayout.getLinesViewportData(),s=Math.max(1,i.completelyVisibleStartLineNumber-n),r=Math.min(this.getLineCount(),i.completelyVisibleEndLineNumber+n);return this._toModelVisibleRanges(new L(s,this.getLineMinColumn(s),r,this.getLineMaxColumn(r)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),n=this._lines.getHiddenAreas();if(n.length===0)return[t];const i=[];let s=0,r=t.startLineNumber,a=t.startColumn;const l=t.endLineNumber,c=t.endColumn;for(let d=0,h=n.length;d<h;d++){const g=n[d].startLineNumber,f=n[d].endLineNumber;f<r||g>l||(r<g&&(i[s++]=new L(r,a,g-1,this.model.getLineMaxColumn(g-1))),r=f+1,a=1)}return(r<l||r===l&&a<c)&&(i[s++]=new L(r,a,l,c)),i}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,n=e.completelyVisibleEndLineNumber;return new L(t,this.getLineMinColumn(t),n,this.getLineMaxColumn(n))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),n=t.completelyVisibleStartLineNumber,i=t.completelyVisibleEndLineNumber;return new L(n,this.getLineMinColumn(n),i,this.getLineMaxColumn(i))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,n=this.viewLayout.getLineNumberAtVerticalOffset(t),i=this.coordinatesConverter.convertViewPositionToModelPosition(new H(n,this.getLineMinColumn(n))),s=this.viewLayout.getVerticalOffsetForLineNumber(n)-t;return{scrollLeft:e.scrollLeft,firstPosition:i,firstPositionDeltaTop:s}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),n=this.coordinatesConverter.convertModelPositionToViewPosition(t),i=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:i}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,n){this._viewportStart.update(this,e)}getActiveIndentGuide(e,t,n){return this._lines.getActiveIndentGuide(e,t,n)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,n,i){return this._lines.getViewLinesBracketGuides(e,t,n,i)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=Di(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Jr(this.getLineContent(e));return t===-1?0:t+2}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewportViewLineRenderingData(e,t){const i=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return this._getViewLineRenderingData(t,i)}getViewLineRenderingData(e){const t=this._decorations.getInlineDecorationsOnLine(e);return this._getViewLineRenderingData(e,t)}_getViewLineRenderingData(e,t){const n=this.model.mightContainRTL(),i=this.model.mightContainNonBasicASCII(),s=this.getTabSize(),r=this._lines.getViewLineData(e);return r.inlineDecorations&&(t=[...t,...r.inlineDecorations.map(a=>a.toInlineDecoration(e))]),new as(r.minColumn,r.maxColumn,r.content,r.continuesWithWrappedLine,n,i,r.tokens,t,s,r.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,n){const i=this._lines.getViewLinesData(e,t,n);return new hV(this.getTabSize(),i)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,j0(this._configuration.options)),n=new a9;for(const i of t){const s=i.options,r=s.overviewRuler;if(!r)continue;const a=r.position;if(a===0)continue;const l=r.getColor(e.value),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(i.range.startLineNumber,i.range.startColumn),d=this.coordinatesConverter.getViewLineNumberOfModelPosition(i.range.endLineNumber,i.range.endColumn);n.accept(l,s.zIndex,c,d,a)}return n.asArray}_invalidateDecorationsColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const n=t.options.overviewRuler;n&&n.invalidateCachedColor();const i=t.options.minimap;i&&i.invalidateCachedColor()}}getValueInRange(e,t){const n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(n,t)}deduceModelPositionRelativeToViewPosition(e,t,n){const i=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=n:t+=n);const r=this.model.getOffsetAt(i)+t;return this.model.getPositionAt(r)}getPlainTextToCopy(e,t,n){const i=n?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(L.compareRangesUsingStarts);let s=!1,r=!1;for(const l of e)l.isEmpty()?s=!0:r=!0;if(!r){if(!t)return"";const l=e.map(d=>d.startLineNumber);let c="";for(let d=0;d<l.length;d++)d>0&&l[d-1]===l[d]||(c+=this.model.getLineContent(l[d])+i);return c}if(s&&t){const l=[];let c=0;for(const d of e){const h=d.startLineNumber;d.isEmpty()?h!==c&&l.push(this.model.getLineContent(h)):l.push(this.model.getValueInRange(d,n?2:0)),c=h}return l.length===1?l[0]:l}const a=[];for(const l of e)l.isEmpty()||a.push(this.model.getValueInRange(l,n?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const n=this.model.getLanguageId();if(n===Js||e.length!==1)return null;let i=e[0];if(i.isEmpty()){if(!t)return null;const d=i.startLineNumber;i=new L(d,this.model.getLineMinColumn(d),d,this.model.getLineMaxColumn(d))}const s=this._configuration.options.get(46),r=this._getColorMap(),l=/[:;\\\/<>]/.test(s.fontFamily)||s.fontFamily===rs.fontFamily;let c;return l?c=rs.fontFamily:(c=s.fontFamily,c=c.replace(/"/g,"'"),/[,']/.test(c)||/[+ ]/.test(c)&&(c=`'${c}'`),c=`${c}, ${rs.fontFamily}`),{mode:n,html:`<div style="color: ${r[1]};background-color: ${r[2]};font-family: ${c};font-weight: ${s.fontWeight};font-size: ${s.fontSize}px;line-height: ${s.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(i,r)+"</div>"}}_getHTMLToCopy(e,t){const n=e.startLineNumber,i=e.startColumn,s=e.endLineNumber,r=e.endColumn,a=this.getTabSize();let l="";for(let c=n;c<=s;c++){const d=this.model.tokenization.getLineTokens(c),h=d.getLineContent(),g=c===n?i-1:0,f=c===s?r-1:h.length;h===""?l+="<br>":l+=Mee(h,d.inflate(),t,g,f,a,ei)}return l}_getColorMap(){const e=Wt.getColorMap(),t=["#000000"];if(e)for(let n=1,i=e.length;n<i;n++)t[n]=B.Format.CSS.formatHex(e[n]);return t}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,n){return this._withViewEventsCollector(i=>this._cursor.setStates(i,e,t,n))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,n=0){this._withViewEventsCollector(i=>this._cursor.setSelections(i,e,t,n))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new t7);return}this._withViewEventsCollector(e)}executeEdits(e,t,n){this._executeCursorEdit(i=>this._cursor.executeEdits(i,e,t,n))}startComposition(){this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(n=>this._cursor.type(n,e,t))}compositionType(e,t,n,i,s){this._executeCursorEdit(r=>this._cursor.compositionType(r,e,t,n,i,s))}paste(e,t,n,i){this._executeCursorEdit(s=>this._cursor.paste(s,e,t,n,i))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(n=>this._cursor.executeCommand(n,e,t))}executeCommands(e,t){this._executeCursorEdit(n=>this._cursor.executeCommands(n,e,t))}revealPrimaryCursor(e,t,n=!1){this._withViewEventsCollector(i=>this._cursor.revealPrimary(i,e,n,0,t,0))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),n=new L(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(i=>i.emitViewEvent(new Om(e,!1,n,null,0,!0,0)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),n=new L(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(i=>i.emitViewEvent(new Om(e,!1,n,null,0,!0,0)))}revealRange(e,t,n,i,s){this._withViewEventsCollector(r=>r.emitViewEvent(new Om(e,!1,n,null,i,t,s)))}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new HQ),this._eventDispatcher.emitOutgoingEvent(new Q3))}_withViewEventsCollector(e){try{const t=this._eventDispatcher.beginEmitViewEvents();return e(t)}finally{this._eventDispatcher.endEmitViewEvents()}}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}}u(r9,"ViewModel");class My{constructor(e,t,n,i,s){this._model=e,this._viewLineNumber=t,this._isValid=n,this._modelTrackedRange=i,this._startLineDelta=s}static create(e){const t=e._setTrackedRange(null,new L(1,1,1,1),1);return new My(e,1,!1,t,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(e,t){const n=e.coordinatesConverter.convertViewPositionToModelPosition(new H(t,e.getLineMinColumn(t))),i=e.model._setTrackedRange(this._modelTrackedRange,new L(n.lineNumber,n.column,n.lineNumber,n.column),1),s=e.viewLayout.getVerticalOffsetForLineNumber(t),r=e.viewLayout.getCurrentScrollTop();this._viewLineNumber=t,this._isValid=!0,this._modelTrackedRange=i,this._startLineDelta=r-s}invalidate(){this._isValid=!1}}u(My,"ViewportStart");class a9{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,n,i,s){const r=this._asMap[e];if(r){const a=r.data,l=a[a.length-3],c=a[a.length-1];if(l===s&&c+1>=n){i>c&&(a[a.length-1]=i);return}a.push(s,n,i)}else{const a=new cA(e,t,[s,n,i]);this._asMap[e]=a,this.asArray.push(a)}}}u(a9,"OverviewRulerDecorations");class z_{constructor(...e){this._entries=new Map;for(const[t,n]of e)this.set(t,n)}set(e,t){const n=this._entries.get(e);return this._entries.set(e,t),n}get(e){return this._entries.get(e)}}u(z_,"ServiceCollection");var Rb;(function(o){o[o.Ignore=0]="Ignore",o[o.Info=1]="Info",o[o.Warning=2]="Warning",o[o.Error=3]="Error"})(Rb||(Rb={}));(function(o){const e="error",t="warning",n="warn",i="info",s="ignore";function r(l){return l?rg(e,l)?o.Error:rg(t,l)||rg(n,l)?o.Warning:rg(i,l)?o.Info:o.Ignore:o.Ignore}u(r,"fromValue"),o.fromValue=r;function a(l){switch(l){case o.Error:return e;case o.Warning:return t;case o.Info:return i;default:return s}}u(a,"toString"),o.toString=a})(Rb||(Rb={}));const Bt=Rb;var l9=Bt;const gn=Je("notificationService");class c9{}u(c9,"NoOpNotification");class Hg{constructor(e,t,n,i,s){this.injectionOffsets=e,this.injectionOptions=t,this.breakOffsets=n,this.breakOffsetsVisibleColumn=i,this.wrappedTextIndentLength=s}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){const t=e>0?this.breakOffsets[e-1]:0;let i=this.breakOffsets[e]-t;return e>0&&(i+=this.wrappedTextIndentLength),i}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let i=e===0?t:this.breakOffsets[e-1]+t;if(this.injectionOffsets!==null)for(let s=0;s<this.injectionOffsets.length&&i>this.injectionOffsets[s];s++)i<this.injectionOffsets[s]+this.injectionOptions[s].content.length?i=this.injectionOffsets[s]:i-=this.injectionOptions[s].content.length;return i}translateToOutputPosition(e,t=2){let n=e;if(this.injectionOffsets!==null)for(let i=0;i<this.injectionOffsets.length&&!(e<this.injectionOffsets[i]||t!==1&&e===this.injectionOffsets[i]);i++)n+=this.injectionOptions[i].content.length;return this.offsetInInputWithInjectionsToOutputPosition(n,t)}offsetInInputWithInjectionsToOutputPosition(e,t=2){let n=0,i=this.breakOffsets.length-1,s=0,r=0;for(;n<=i;){s=n+(i-n)/2|0;const l=this.breakOffsets[s];if(r=s>0?this.breakOffsets[s-1]:0,t===0)if(e<=r)i=s-1;else if(e>l)n=s+1;else break;else if(e<r)i=s-1;else if(e>=l)n=s+1;else break}let a=e-r;return s>0&&(a+=this.wrappedTextIndentLength),new _m(s,a)}normalizeOutputPosition(e,t,n){if(this.injectionOffsets!==null){const i=this.outputPositionToOffsetInInputWithInjections(e,t),s=this.normalizeOffsetInInputWithInjectionsAroundInjections(i,n);if(s!==i)return this.offsetInInputWithInjectionsToOutputPosition(s,n)}if(n===0){if(e>0&&t===this.getMinOutputOffset(e))return new _m(e-1,this.getMaxOutputOffset(e-1))}else if(n===1){const i=this.getOutputLineCount()-1;if(e<i&&t===this.getMaxOutputOffset(e))return new _m(e+1,this.getMinOutputOffset(e+1))}return new _m(e,t)}outputPositionToOffsetInInputWithInjections(e,t){return e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+t}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){const n=this.getInjectedTextAtOffset(e);if(!n)return e;if(t===2){if(e===n.offsetInInputWithInjections+n.length&&QP(this.injectionOptions[n.injectedTextIndex].cursorStops))return n.offsetInInputWithInjections+n.length;{let i=n.offsetInInputWithInjections;if(eR(this.injectionOptions[n.injectedTextIndex].cursorStops))return i;let s=n.injectedTextIndex-1;for(;s>=0&&this.injectionOffsets[s]===this.injectionOffsets[n.injectedTextIndex]&&!(QP(this.injectionOptions[s].cursorStops)||(i-=this.injectionOptions[s].content.length,eR(this.injectionOptions[s].cursorStops)));)s--;return i}}else if(t===1||t===4){let i=n.offsetInInputWithInjections+n.length,s=n.injectedTextIndex;for(;s+1<this.injectionOffsets.length&&this.injectionOffsets[s+1]===this.injectionOffsets[s];)i+=this.injectionOptions[s+1].content.length,s++;return i}else if(t===0||t===3){let i=n.offsetInInputWithInjections,s=n.injectedTextIndex;for(;s-1>=0&&this.injectionOffsets[s-1]===this.injectionOffsets[s];)i-=this.injectionOptions[s-1].content.length,s--;return i}Lw()}getInjectedText(e,t){const n=this.outputPositionToOffsetInInputWithInjections(e,t),i=this.getInjectedTextAtOffset(n);return i?{options:this.injectionOptions[i.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,n=this.injectionOptions;if(t!==null){let i=0;for(let s=0;s<t.length;s++){const r=n[s].content.length,a=t[s]+i,l=t[s]+i+r;if(a>e)break;if(e<=l)return{injectedTextIndex:s,offsetInInputWithInjections:a,length:r};i+=r}}}}u(Hg,"ModelLineProjectionData");function QP(o){return o==null?!0:o===nr.Right||o===nr.Both}u(QP,"hasRightCursorStop");function eR(o){return o==null?!0:o===nr.Left||o===nr.Both}u(eR,"hasLeftCursorStop");class _m{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new H(e+this.outputLineIndex,this.outputOffset+1)}}u(_m,"OutputPosition");class Dy{constructor(e,t){this.classifier=new d9(e,t)}static create(e){return new Dy(e.get(122),e.get(121))}createLineBreaksComputer(e,t,n,i){const s=[],r=[],a=[];return{addRequest:(l,c,d)=>{s.push(l),r.push(c),a.push(d)},finalize:()=>{const l=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,c=[];for(let d=0,h=s.length;d<h;d++){const g=r[d],f=a[d];f&&!f.injectionOptions&&!g?c[d]=Nee(this.classifier,f,s[d],t,n,l,i):c[d]=Pee(this.classifier,s[d],g,t,n,l,i)}return kE.length=0,ME.length=0,c}}}}u(Dy,"MonospaceLineBreaksComputerFactory");class d9 extends oh{constructor(e,t){super(0);for(let n=0;n<e.length;n++)this.set(e.charCodeAt(n),1);for(let n=0;n<t.length;n++)this.set(t.charCodeAt(n),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}u(d9,"WrappingCharacterClassifier");let kE=[],ME=[];function Nee(o,e,t,n,i,s,r){if(i===-1)return null;const a=t.length;if(a<=1)return null;const l=e.breakOffsets,c=e.breakOffsetsVisibleColumn,d=u9(t,n,i,s,r),h=i-d,g=kE,f=ME;let p=0,_=0,v=0,C=i;const w=l.length;let y=0;if(y>=0){let S=Math.abs(c[y]-C);for(;y+1<w;){const E=Math.abs(c[y+1]-C);if(E>=S)break;S=E,y++}}for(;y<w;){let S=y<0?0:l[y],E=y<0?0:c[y];_>S&&(S=_,E=v);let k=0,T=0,x=0,M=0;if(E<=C){let V=E,G=S===0?0:t.charCodeAt(S-1),j=S===0?0:o.get(G),ae=!0;for(let he=S;he<a;he++){const Se=he,Te=t.charCodeAt(he);let ke,Ue;if(kn(Te)?(he++,ke=0,Ue=2):(ke=o.get(Te),Ue=Um(Te,V,n,s)),Se>_&&DE(G,j,Te,ke)&&(k=Se,T=V),V+=Ue,V>C){Se>_?(x=Se,M=V-Ue):(x=he+1,M=V),V-T>h&&(k=0),ae=!1;break}G=Te,j=ke}if(ae){p>0&&(g[p]=l[l.length-1],f[p]=c[l.length-1],p++);break}}if(k===0){let V=E,G=t.charCodeAt(S),j=o.get(G),ae=!1;for(let he=S-1;he>=_;he--){const Se=he+1,Te=t.charCodeAt(he);if(Te===9){ae=!0;break}let ke,Ue;if(_u(Te)?(he--,ke=0,Ue=2):(ke=o.get(Te),Ue=Tc(Te)?s:1),V<=C){if(x===0&&(x=Se,M=V),V<=C-h)break;if(DE(Te,ke,G,j)){k=Se,T=V;break}}V-=Ue,G=Te,j=ke}if(k!==0){const he=h-(M-T);if(he<=n){const Se=t.charCodeAt(x);let Te;kn(Se)?Te=2:Te=Um(Se,M,n,s),he-Te<0&&(k=0)}}if(ae){y--;continue}}if(k===0&&(k=x,T=M),k<=_){const V=t.charCodeAt(_);kn(V)?(k=_+2,T=v+2):(k=_+1,T=v+Um(V,v,n,s))}for(_=k,g[p]=k,v=T,f[p]=T,p++,C=T+h;y<0||y<w&&c[y]<T;)y++;let F=Math.abs(c[y]-C);for(;y+1<w;){const V=Math.abs(c[y+1]-C);if(V>=F)break;F=V,y++}}return p===0?null:(g.length=p,f.length=p,kE=e.breakOffsets,ME=e.breakOffsetsVisibleColumn,e.breakOffsets=g,e.breakOffsetsVisibleColumn=f,e.wrappedTextIndentLength=d,e)}u(Nee,"createLineBreaksFromPreviousLineBreaks");function Pee(o,e,t,n,i,s,r){const a=Do.applyInjectedText(e,t);let l,c;if(t&&t.length>0?(l=t.map(T=>T.options),c=t.map(T=>T.column-1)):(l=null,c=null),i===-1)return l?new Hg(c,l,[a.length],[],0):null;const d=a.length;if(d<=1)return l?new Hg(c,l,[a.length],[],0):null;const h=u9(a,n,i,s,r),g=i-h,f=[],p=[];let _=0,v=0,C=0,w=i,y=a.charCodeAt(0),S=o.get(y),E=Um(y,0,n,s),k=1;kn(y)&&(E+=1,y=a.charCodeAt(1),S=o.get(y),k++);for(let T=k;T<d;T++){const x=T,M=a.charCodeAt(T);let F,V;kn(M)?(T++,F=0,V=2):(F=o.get(M),V=Um(M,E,n,s)),DE(y,S,M,F)&&(v=x,C=E),E+=V,E>w&&((v===0||E-C>g)&&(v=x,C=E-V),f[_]=v,p[_]=C,_++,w=C+g,v=0),y=M,S=F}return _===0&&(!t||t.length===0)?null:(f[_]=d,p[_]=E,new Hg(c,l,f,p,h))}u(Pee,"createLineBreaks$1");function Um(o,e,t,n){return o===9?t-e%t:Tc(o)||o<32?n:1}u(Um,"computeCharWidth");function tR(o,e){return e-o%e}u(tR,"tabCharacterWidth");function DE(o,e,t,n){return t!==32&&(e===2&&n!==2||e!==1&&n===1||e===3&&n!==2||n===3&&e!==1)}u(DE,"canBreak");function u9(o,e,t,n,i){let s=0;if(i!==0){const r=Di(o);if(r!==-1){for(let l=0;l<r;l++){const c=o.charCodeAt(l)===9?tR(s,e):1;s+=c}const a=i===3?2:i===2?1:0;for(let l=0;l<a;l++){const c=tR(s,e);s+=c}s+n>t&&(s=0)}}return s}u(u9,"computeWrappedTextIndentLength");var LT;const xT=(LT=window.trustedTypes)===null||LT===void 0?void 0:LT.createPolicy("domLineBreaksComputer",{createHTML:o=>o});class Ay{static create(){return new Ay}constructor(){}createLineBreaksComputer(e,t,n,i){const s=[],r=[];return{addRequest:(a,l,c)=>{s.push(a),r.push(l)},finalize:()=>Ree(s,e,t,n,i,r)}}}u(Ay,"DOMLineBreaksComputerFactory");function Ree(o,e,t,n,i,s){var r;function a(x){const M=s[x];if(M){const F=Do.applyInjectedText(o[x],M),V=M.map(j=>j.options),G=M.map(j=>j.column-1);return new Hg(G,V,[F.length],[],0)}else return null}if(u(a,"createEmptyLineBreakWithPossiblyInjectedText"),n===-1){const x=[];for(let M=0,F=o.length;M<F;M++)x[M]=a(M);return x}const l=Math.round(n*e.typicalHalfwidthCharacterWidth),d=Math.round(t*(i===3?2:i===2?1:0)),h=Math.ceil(e.spaceWidth*d),g=document.createElement("div");di(g,e);const f=Lc(1e4),p=[],_=[],v=[],C=[],w=[];for(let x=0;x<o.length;x++){const M=Do.applyInjectedText(o[x],s[x]);let F=0,V=0,G=l;if(i!==0)if(F=Di(M),F===-1)F=0;else{for(let Se=0;Se<F;Se++){const Te=M.charCodeAt(Se)===9?t-V%t:1;V+=Te}const he=Math.ceil(e.spaceWidth*V);he+e.typicalFullwidthCharacterWidth>l?(F=0,V=0):G=l-he}const j=M.substr(F),ae=Fee(j,V,t,G,f,h);p[x]=F,_[x]=V,v[x]=j,C[x]=ae[0],w[x]=ae[1]}const y=f.build(),S=(r=xT?.createHTML(y))!==null&&r!==void 0?r:y;g.innerHTML=S,g.style.position="absolute",g.style.top="10000",g.style.wordWrap="break-word",document.body.appendChild(g);const E=document.createRange(),k=Array.prototype.slice.call(g.children,0),T=[];for(let x=0;x<o.length;x++){const M=k[x],F=Oee(E,M,v[x],C[x]);if(F===null){T[x]=a(x);continue}const V=p[x],G=_[x]+d,j=w[x],ae=[];for(let ke=0,Ue=F.length;ke<Ue;ke++)ae[ke]=j[F[ke]];if(V!==0)for(let ke=0,Ue=F.length;ke<Ue;ke++)F[ke]+=V;let he,Se;const Te=s[x];Te?(he=Te.map(ke=>ke.options),Se=Te.map(ke=>ke.column-1)):(he=null,Se=null),T[x]=new Hg(Se,he,F,ae,G)}return document.body.removeChild(g),T}u(Ree,"createLineBreaks");function Fee(o,e,t,n,i,s){if(s!==0){const g=String(s);i.appendASCIIString('<div style="text-indent: -'),i.appendASCIIString(g),i.appendASCIIString("px; padding-left: "),i.appendASCIIString(g),i.appendASCIIString("px; box-sizing: border-box; width:")}else i.appendASCIIString('<div style="width:');i.appendASCIIString(String(n)),i.appendASCIIString('px;">');const r=o.length;let a=e,l=0;const c=[],d=[];let h=0<r?o.charCodeAt(0):0;i.appendASCIIString("<span>");for(let g=0;g<r;g++){g!==0&&g%16384===0&&i.appendASCIIString("</span><span>"),c[g]=l,d[g]=a;const f=h;h=g+1<r?o.charCodeAt(g+1):0;let p=1,_=1;switch(f){case 9:p=t-a%t,_=p;for(let v=1;v<=p;v++)v<p?i.write1(160):i.appendASCII(32);break;case 32:h===32?i.write1(160):i.appendASCII(32);break;case 60:i.appendASCIIString("&lt;");break;case 62:i.appendASCIIString("&gt;");break;case 38:i.appendASCIIString("&amp;");break;case 0:i.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:i.write1(65533);break;default:Tc(f)&&_++,f<32?i.write1(9216+f):i.write1(f)}l+=p,a+=_}return i.appendASCIIString("</span>"),c[o.length]=l,d[o.length]=a,i.appendASCIIString("</div>"),[c,d]}u(Fee,"renderLine");function Oee(o,e,t,n){if(t.length<=1)return null;const i=Array.prototype.slice.call(e.children,0),s=[];try{AE(o,i,n,0,null,t.length-1,null,s)}catch(r){return console.log(r),null}return s.length===0?null:(s.push(t.length),s)}u(Oee,"readLineBreaks");function AE(o,e,t,n,i,s,r,a){if(n===s||(i=i||ET(o,e,t[n],t[n+1]),r=r||ET(o,e,t[s],t[s+1]),Math.abs(i[0].top-r[0].top)<=.1))return;if(n+1===s){a.push(s);return}const l=n+(s-n)/2|0,c=ET(o,e,t[l],t[l+1]);AE(o,e,t,n,i,l,c,a),AE(o,e,t,l,c,s,r,a)}u(AE,"discoverBreaks");function ET(o,e,t,n){return o.setStart(e[t/16384|0].firstChild,t%16384),o.setEnd(e[n/16384|0].firstChild,n%16384),o.getClientRects()}u(ET,"readClientRect");var Vee=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Ca=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Hee=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let Bee=0,Wee=u(class{constructor(e,t,n,i,s){this.model=e,this.viewModel=t,this.view=n,this.hasRealView=i,this.listenersToRemove=s}dispose(){st(this.listenersToRemove),this.model.onBeforeDetached(),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}},"ModelData"),wf=u(class Jh extends U{constructor(e,t,n,i,s,r,a,l,c,d,h,g){super(),this.languageConfigurationService=h,this._deliveryQueue=new FD,this._onDidDispose=this._register(new R),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onDidChangeModel=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new IE({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new IE({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onWillType=this._onWillType.event,this._onDidType=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection();const f=Object.assign({},t);this._domElement=e,this._overflowWidgetsDomNode=f.overflowWidgetsDomNode,delete f.overflowWidgetsDomNode,this._id=++Bee,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=n.telemetryData,this._configuration=this._register(this._createConfiguration(n.isSimpleWidget||!1,f,d)),this._register(this._configuration.onDidChange(v=>{this._onDidChangeConfiguration.fire(v);const C=this._configuration.options;if(v.hasChanged(133)){const w=C.get(133);this._onDidLayoutChange.fire(w)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=c,this._codeEditorService=s,this._commandService=r,this._themeService=l,this._register(new h9(this,this._contextKeyService)),this._register(new g9(this,this._contextKeyService,g)),this._instantiationService=i.createChild(new z_([De,this._contextKeyService])),this._modelData=null,this._contributions={},this._actions={},this._focusTracker=new f9(e),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={};let p;Array.isArray(n.contributions)?p=n.contributions:p=Zd.getEditorContributions();for(const v of p){if(this._contributions[v.id]){Ie(new Error(`Cannot have two contributions with the same id ${v.id}`));continue}try{const C=this._instantiationService.createInstance(v.ctor,this);this._contributions[v.id]=C}catch(C){Ie(C)}}Zd.getEditorActions().forEach(v=>{if(this._actions[v.id]){Ie(new Error(`Cannot have two actions with the same id ${v.id}`));return}const C=new KA(v.id,v.label,v.alias,Gi(v.precondition),()=>this._instantiationService.invokeFunction(w=>Promise.resolve(v.runEditorCommand(w,this,null))),this._contextKeyService);this._actions[C.id]=C});const _=u(()=>!this._configuration.options.get(83)&&this._configuration.options.get(32).enabled,"isDropIntoEnabled");this._register(new OV(this._domElement,{onDragEnter:()=>{},onDragOver:v=>{if(!_())return;const C=this.getTargetAtClientPoint(v.clientX,v.clientY);C?.position&&this.showDropIndicatorAt(C.position)},onDrop:v=>Hee(this,void 0,void 0,function*(){if(!_()||(this.removeDropIndicator(),!v.dataTransfer))return;const C=this.getTargetAtClientPoint(v.clientX,v.clientY);C?.position&&this._onDropIntoEditor.fire({position:C.position,event:v})}),onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}get isSimpleWidget(){return this._configuration.isSimpleWidget}_createConfiguration(e,t,n){return new Zx(e,t,this._domElement,n)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return C_.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose();const e=Object.keys(this._contributions);for(let t=0,n=e.length;t<n;t++){const i=e[t];this._contributions[i].dispose()}this._contributions={},this._actions={},this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?tt.getWordAtPosition(this._modelData.model,this._configuration.options.get(119),e):null}getValue(e=null){if(!this._modelData)return"";const t=!!(e&&e.preserveBOM);let n=0;return e&&e.lineEnding&&e.lineEnding===`
`?n=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(n=2),this._modelData.model.getValue(n,t)}setValue(e){this._modelData&&this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){const t=e;if(this._modelData===null&&t===null||this._modelData&&this._modelData.model===t)return;const n=this.hasTextFocus(),i=this._detachModel();this._attachModel(t),n&&this.hasModel()&&this.focus();const s={oldModelUrl:i?i.uri:null,newModelUrl:t?t.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(s),this._postDetachModelCleanup(i)}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(const e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(const n in t)this._removeDecorationType(e+"-"+n)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(e,t,n,i){const s=e.model.validatePosition({lineNumber:t,column:n}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(r.lineNumber,i)}getTopForLineNumber(e,t=!1){return this._modelData?Jh._getVerticalOffsetForPosition(this._modelData,e,1,t):-1}getTopForPosition(e,t){return this._modelData?Jh._getVerticalOffsetForPosition(this._modelData,e,t,!1):-1}static _getVerticalOffsetForPosition(e,t,n,i=!1){const s=e.model.validatePosition({lineNumber:t,column:n}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(r.lineNumber,i)}getBottomForLineNumber(e,t=!1){return this._modelData?Jh._getVerticalOffsetAfterPosition(this._modelData,e,1,t):-1}setHiddenAreas(e){var t;(t=this._modelData)===null||t===void 0||t.viewModel.setHiddenAreas(e.map(n=>L.lift(n)))}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),n=this._modelData.model.getOptions().tabSize;return mn.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,n)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e,t="api"){if(this._modelData){if(!H.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,n,i){if(!this._modelData)return;if(!L.isIRange(e))throw new Error("Invalid arguments");const s=this._modelData.model.validateRange(e),r=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(s);this._modelData.viewModel.revealRange("api",n,r,t,i)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,n){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new L(e,1,e,1),t,!1,n)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,n,i){if(!H.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new L(e.lineNumber,e.column,e.lineNumber,e.column),t,n,i)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e,t="api"){const n=re.isISelection(e),i=L.isIRange(e);if(!n&&!i)throw new Error("Invalid arguments");if(n)this._setSelectionImpl(e,t);else if(i){const s={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(s,t)}}_setSelectionImpl(e,t){if(!this._modelData)return;const n=new re(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(t,[n])}revealLines(e,t,n=0){this._revealLines(e,t,0,n)}revealLinesInCenter(e,t,n=0){this._revealLines(e,t,1,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._revealLines(e,t,2,n)}revealLinesNearTop(e,t,n=0){this._revealLines(e,t,5,n)}_revealLines(e,t,n,i){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new L(e,1,t,1),n,!1,i)}revealRange(e,t=0,n=!1,i=!0){this._revealRange(e,n?1:0,i,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,n,i){if(!L.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(L.lift(e),t,n,i)}setSelections(e,t="api",n=0){if(this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let i=0,s=e.length;i<s;i++)if(!re.isISelection(e[i]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,n)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,t)}saveViewState(){if(!this._modelData)return null;const e={},t=Object.keys(this._contributions);for(const s of t){const r=this._contributions[s];typeof r.saveViewState=="function"&&(e[s]=r.saveViewState())}const n=this._modelData.viewModel.saveCursorState(),i=this._modelData.viewModel.saveState();return{cursorState:n,viewState:i,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const n=t.cursorState;Array.isArray(n)?n.length>0&&this._modelData.viewModel.restoreCursorState(n):this._modelData.viewModel.restoreCursorState([n]);const i=t.contributionsState||{},s=Object.keys(this._contributions);for(let a=0,l=s.length;a<l;a++){const c=s[a],d=this._contributions[c];typeof d.restoreViewState=="function"&&d.restoreViewState(i[c])}const r=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(r)}}getContribution(e){return this._contributions[e]||null}getActions(){const e=[],t=Object.keys(this._actions);for(let n=0,i=t.length;n<i;n++){const s=t[n];e.push(this._actions[s])}return e}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions[e]||null}trigger(e,t,n){switch(n=n||{},t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const s=n;this._type(e,s.text||"");return}case"replacePreviousChar":{const s=n;this._compositionType(e,s.text||"",s.replaceCharCnt||0,0,0);return}case"compositionType":{const s=n;this._compositionType(e,s.text||"",s.replacePrevCharCnt||0,s.replaceNextCharCnt||0,s.positionDelta||0);return}case"paste":{const s=n;this._paste(e,s.text||"",s.pasteOnNewLine||!1,s.multicursorText||null,s.mode||null);return}case"cut":this._cut(e);return}const i=this.getAction(t);if(i){Promise.resolve(i.run()).then(void 0,Ie);return}this._modelData&&(this._triggerEditorCommand(e,t,n)||this._triggerCommand(t,n))}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,n,i,s){this._modelData&&this._modelData.viewModel.compositionType(t,n,i,s,e)}_paste(e,t,n,i,s){if(!this._modelData||t.length===0)return;const r=this._modelData.viewModel,a=r.getSelection().getStartPosition();r.paste(t,n,i,e);const l=r.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({range:new L(a.lineNumber,a.column,l.lineNumber,l.column),languageId:s})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,n){const i=Zd.getEditorCommand(t);return i?(n=n||{},n.source=e,this._instantiationService.invokeFunction(s=>{Promise.resolve(i.runEditorCommand(s,this,n)).then(void 0,Ie)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(83)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(83)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,n){if(!this._modelData||this._configuration.options.get(83))return!1;let i;return n?Array.isArray(n)?i=u(()=>n,"cursorStateComputer"):i=n:i=u(()=>null,"cursorStateComputer"),this._modelData.viewModel.executeEdits(e,t,i),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}createDecorationsCollection(e){return new p9(this,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,j0(this._configuration.options)):null}getDecorationsInRange(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,j0(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){!this._modelData||e.length===0||this._modelData.model.changeDecorations(t=>{t.deltaDecorations(e,[])})}removeDecorationsByType(e){const t=this._decorationTypeKeysToIds[e];t&&this.deltaDecorations(t,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(133)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarPointerDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarPointerDown(e)}layout(e){this._configuration.observeContainer(e),this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(n)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(n)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(n)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(n)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),n=this._configuration.options,i=n.get(133),s=Jh._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),r=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+i.glyphMarginWidth+i.lineNumbersWidth+i.decorationsWidth-this.getScrollLeft();return{top:s,left:r,height:n.get(61)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.view.render(!0,e)}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){di(e,this._configuration.options.get(46))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=e,this._configuration.setReservedHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e){this._modelData=null;return}const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount()),e.onBeforeAttached();const n=new r9(this._id,this._configuration,e,Ay.create(),Dy.create(this._configuration.options),r=>br(r),this.languageConfigurationService,this._themeService);t.push(e.onWillDispose(()=>this.setModel(null))),t.push(n.onEvent(r=>{switch(r.kind){case 0:this._onDidContentSizeChange.fire(r);break;case 1:this._editorTextFocus.setValue(r.hasFocus);break;case 2:this._onDidScrollChange.fire(r);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{r.reachedMaxCursorCount&&this._notificationService.warn(m("cursors.maximum","The number of cursors has been limited to {0}.",Mu.MAX_CURSOR_COUNT));const a=[];for(let d=0,h=r.selections.length;d<h;d++)a[d]=r.selections[d].getPosition();const l={position:a[0],secondaryPositions:a.slice(1),reason:r.reason,source:r.source};this._onDidChangeCursorPosition.fire(l);const c={selection:r.selections[0],secondarySelections:r.selections.slice(1),modelVersionId:r.modelVersionId,oldSelections:r.oldSelections,oldModelVersionId:r.oldModelVersionId,source:r.source,reason:r.reason};this._onDidChangeCursorSelection.fire(c);break}case 7:this._onDidChangeModelDecorations.fire(r.event);break;case 8:this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(r.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(r.event);break;case 10:this._onDidChangeModelContent.fire(r.event);break;case 11:this._onDidChangeModelOptions.fire(r.event);break;case 12:this._onDidChangeModelTokens.fire(r.event);break}}));const[i,s]=this._createView(n);if(s){this._domElement.appendChild(i.domNode.domNode);let r=Object.keys(this._contentWidgets);for(let a=0,l=r.length;a<l;a++){const c=r[a];i.addContentWidget(this._contentWidgets[c])}r=Object.keys(this._overlayWidgets);for(let a=0,l=r.length;a<l;a++){const c=r[a];i.addOverlayWidget(this._overlayWidgets[c])}i.render(!1,!0),i.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new Wee(e,n,i,s,t)}_createView(e){let t;this.isSimpleWidget?t={paste:(s,r,a,l)=>{this._paste("keyboard",s,r,a,l)},type:s=>{this._type("keyboard",s)},compositionType:(s,r,a,l)=>{this._compositionType("keyboard",s,r,a,l)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(s,r,a,l)=>{const c={text:s,pasteOnNewLine:r,multicursorText:a,mode:l};this._commandService.executeCommand("paste",c)},type:s=>{const r={text:s};this._commandService.executeCommand("type",r)},compositionType:(s,r,a,l)=>{if(a||l){const c={text:s,replacePrevCharCnt:r,replaceNextCharCnt:a,positionDelta:l};this._commandService.executeCommand("compositionType",c)}else{const c={text:s,replaceCharCnt:r};this._commandService.executeCommand("replacePreviousChar",c)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const n=new U_(e.coordinatesConverter);return n.onKeyDown=s=>this._onKeyDown.fire(s),n.onKeyUp=s=>this._onKeyUp.fire(s),n.onContextMenu=s=>this._onContextMenu.fire(s),n.onMouseMove=s=>this._onMouseMove.fire(s),n.onMouseLeave=s=>this._onMouseLeave.fire(s),n.onMouseDown=s=>this._onMouseDown.fire(s),n.onMouseUp=s=>this._onMouseUp.fire(s),n.onMouseDrag=s=>this._onMouseDrag.fire(s),n.onMouseDrop=s=>this._onMouseDrop.fire(s),n.onMouseDropCanceled=s=>this._onMouseDropCanceled.fire(s),n.onMouseWheel=s=>this._onMouseWheel.fire(s),[new F3(t,this._configuration,this._themeService.getColorTheme(),e,n,this._overflowWidgetsDomNode),!0]}_postDetachModelCleanup(e){e?.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&this._domElement.removeChild(t),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}showDropIndicatorAt(e){const t=[{range:new L(e.lineNumber,e.column,e.lineNumber,e.column),options:Jh.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(t),this.revealPosition(e,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}},"CodeEditorWidget");wf.dropIntoEditorDecorationOptions=Ae.register({description:"workbench-dnd-target",className:"dnd-target"});wf=Vee([Ca(3,Ne),Ca(4,dt),Ca(5,hn),Ca(6,De),Ca(7,wt),Ca(8,gn),Ca(9,Dl),Ca(10,rn),Ca(11,ue)],wf);class IE extends U{constructor(e){super(),this._emitterOptions=e,this._onDidChangeToTrue=this._register(new R(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new R(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}u(IE,"BooleanEventEmitter");class h9 extends U{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=A.editorSimpleInput.bindTo(t),this._editorFocus=A.focus.bindTo(t),this._textInputFocus=A.textInputFocus.bindTo(t),this._editorTextFocus=A.editorTextFocus.bindTo(t),this._editorTabMovesFocus=A.tabMovesFocus.bindTo(t),this._editorReadonly=A.readOnly.bindTo(t),this._inDiffEditor=A.inDiffEditor.bindTo(t),this._editorColumnSelection=A.columnSelection.bindTo(t),this._hasMultipleSelections=A.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=A.hasNonEmptySelection.bindTo(t),this._canUndo=A.canUndo.bindTo(t),this._canRedo=A.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._editorTabMovesFocus.set(e.get(132)),this._editorReadonly.set(e.get(83)),this._inDiffEditor.set(e.get(56)),this._editorColumnSelection.set(e.get(18))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(Boolean(e&&e.canUndo())),this._canRedo.set(Boolean(e&&e.canRedo()))}}u(h9,"EditorContextKeysManager");class g9 extends U{constructor(e,t,n){super(),this._editor=e,this._contextKeyService=t,this._languageFeaturesService=n,this._langId=A.languageId.bindTo(t),this._hasCompletionItemProvider=A.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=A.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=A.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=A.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=A.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=A.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=A.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=A.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=A.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=A.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=A.hasReferenceProvider.bindTo(t),this._hasRenameProvider=A.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=A.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=A.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=A.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=A.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=A.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=A.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInWalkThrough=A.isInWalkThroughSnippet.bindTo(t);const i=u(()=>this._update(),"update");this._register(e.onDidChangeModel(i)),this._register(e.onDidChangeModelLanguage(i)),this._register(n.completionProvider.onDidChange(i)),this._register(n.codeActionProvider.onDidChange(i)),this._register(n.codeLensProvider.onDidChange(i)),this._register(n.definitionProvider.onDidChange(i)),this._register(n.declarationProvider.onDidChange(i)),this._register(n.implementationProvider.onDidChange(i)),this._register(n.typeDefinitionProvider.onDidChange(i)),this._register(n.hoverProvider.onDidChange(i)),this._register(n.documentHighlightProvider.onDidChange(i)),this._register(n.documentSymbolProvider.onDidChange(i)),this._register(n.referenceProvider.onDidChange(i)),this._register(n.renameProvider.onDidChange(i)),this._register(n.documentFormattingEditProvider.onDidChange(i)),this._register(n.documentRangeFormattingEditProvider.onDidChange(i)),this._register(n.signatureHelpProvider.onDidChange(i)),this._register(n.inlayHintsProvider.onDidChange(i)),i()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInWalkThrough.set(e.uri.scheme===Pe.walkThroughSnippet)})}}u(g9,"EditorModeContext");class f9 extends U{constructor(e){super(),this._onChange=this._register(new R),this.onChange=this._onChange.event,this._hasFocus=!1,this._domFocusTracker=this._register(yu(e)),this._register(this._domFocusTracker.onDidFocus(()=>{this._hasFocus=!0,this._onChange.fire(void 0)})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasFocus=!1,this._onChange.fire(void 0)}))}hasFocus(){return this._hasFocus}}u(f9,"CodeEditorWidgetFocusTracker");class p9{constructor(e,t){this._editor=e,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(t)&&t.length>0&&this.set(t)}get length(){return this._decorationIds.length}onDidChange(e,t,n){return this._editor.onDidChangeModelDecorations(i=>{this._isChangingDecorations||e.call(t,i)},n)}getRange(e){return!this._editor.hasModel()||e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e])}getRanges(){if(!this._editor.hasModel())return[];const e=this._editor.getModel(),t=[];for(const n of this._decorationIds){const i=e.getDecorationRange(n);i&&t.push(i)}return t}has(e){return this._decorationIds.includes(e.id)}clear(){this._decorationIds.length!==0&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations(t=>{this._decorationIds=t.deltaDecorations(this._decorationIds,e)})}finally{this._isChangingDecorations=!1}}}u(p9,"EditorDecorationsCollection");const Uee=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),Gee=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function kT(o){return Uee+encodeURIComponent(o.toString())+Gee}u(kT,"getSquigglySVGData");const zee=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),Kee=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function jee(o){return zee+encodeURIComponent(o.toString())+Kee}u(jee,"getDotDotDotSVGData");At((o,e)=>{const t=o.getColor(iH);t&&e.addRule(`.monaco-editor .squiggly-error { border-bottom: 4px double ${t}; }`);const n=o.getColor($r);n&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${kT(n)}") repeat-x bottom left; }`);const i=o.getColor(rZ);i&&e.addRule(`.monaco-editor .squiggly-error::before { display: block; content: ''; width: 100%; height: 100%; background: ${i}; }`);const s=o.getColor(of);s&&e.addRule(`.monaco-editor .squiggly-warning { border-bottom: 4px double ${s}; }`);const r=o.getColor(xs);r&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${kT(r)}") repeat-x bottom left; }`);const a=o.getColor(aZ);a&&e.addRule(`.monaco-editor .squiggly-warning::before { display: block; content: ''; width: 100%; height: 100%; background: ${a}; }`);const l=o.getColor(g1);l&&e.addRule(`.monaco-editor .squiggly-info { border-bottom: 4px double ${l}; }`);const c=o.getColor($i);c&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${kT(c)}") repeat-x bottom left; }`);const d=o.getColor(lZ);d&&e.addRule(`.monaco-editor .squiggly-info::before { display: block; content: ''; width: 100%; height: 100%; background: ${d}; }`);const h=o.getColor(dZ);h&&e.addRule(`.monaco-editor .squiggly-hint { border-bottom: 2px dotted ${h}; }`);const g=o.getColor(cZ);g&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${jee(g)}") no-repeat bottom left; }`);const f=o.getColor(KJ);f&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${f.rgba.a}; }`);const p=o.getColor(zJ);p&&e.addRule(`.monaco-editor.showUnused .squiggly-unnecessary { border-bottom: 2px dashed ${p}; }`);const _=o.getColor(Es)||"inherit";e.addRule(`.monaco-editor.showDeprecated .squiggly-inline-deprecated { text-decoration: line-through; text-decoration-color: ${_}}`)});class _t{constructor(e,t,n){const i=u(s=>this.emitter.fire(s),"fn");this.emitter=new R({onFirstListenerAdd:()=>e.addEventListener(t,i,n),onLastListenerRemove:()=>e.removeEventListener(t,i,n)})}get event(){return this.emitter.event}dispose(){this.emitter.dispose()}}u(_t,"DomEmitter");function NE(o){return o.preventDefault(),o.stopPropagation(),o}u(NE,"stopEvent");var dp=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};const $ee=!1;var L1;(function(o){o.North="north",o.South="south",o.East="east",o.West="west"})(L1||(L1={}));let qee=4;const Yee=new R;let Xee=300;const Zee=new R;class Iy{constructor(){this.disposables=new J}get onPointerMove(){return this.disposables.add(new _t(window,"mousemove")).event}get onPointerUp(){return this.disposables.add(new _t(window,"mouseup")).event}dispose(){this.disposables.dispose()}}u(Iy,"MouseEventFactory");dp([_n],Iy.prototype,"onPointerMove",null);dp([_n],Iy.prototype,"onPointerUp",null);class Ny{constructor(e){this.el=e,this.disposables=new J}get onPointerMove(){return this.disposables.add(new _t(this.el,Mt.Change)).event}get onPointerUp(){return this.disposables.add(new _t(this.el,Mt.End)).event}dispose(){this.disposables.dispose()}}u(Ny,"GestureEventFactory");dp([_n],Ny.prototype,"onPointerMove",null);dp([_n],Ny.prototype,"onPointerUp",null);class Fb{constructor(e){this.factory=e}get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}dispose(){}}u(Fb,"OrthogonalPointerEventFactory");dp([_n],Fb.prototype,"onPointerMove",null);dp([_n],Fb.prototype,"onPointerUp",null);const nR="pointer-events-disabled";class Yn extends U{constructor(e,t,n){super(),this.hoverDelay=Xee,this.hoverDelayer=this._register(new pr(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new R),this._onDidStart=this._register(new R),this._onDidChange=this._register(new R),this._onDidReset=this._register(new R),this._onDidEnd=this._register(new R),this.orthogonalStartSashDisposables=this._register(new J),this.orthogonalStartDragHandleDisposables=this._register(new J),this.orthogonalEndSashDisposables=this._register(new J),this.orthogonalEndDragHandleDisposables=this._register(new J),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=q(e,ee(".monaco-sash")),n.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${n.orthogonalEdge}`),Xe&&this.el.classList.add("mac");const i=this._register(new _t(this.el,"mousedown")).event;this._register(i(h=>this.onPointerStart(h,new Iy),this));const s=this._register(new _t(this.el,"dblclick")).event;this._register(s(this.onPointerDoublePress,this));const r=this._register(new _t(this.el,"mouseenter")).event;this._register(r(()=>Yn.onMouseEnter(this)));const a=this._register(new _t(this.el,"mouseleave")).event;this._register(a(()=>Yn.onMouseLeave(this))),this._register(gt.addTarget(this.el));const l=fe.map(this._register(new _t(this.el,Mt.Start)).event,h=>{var g;return Object.assign(Object.assign({},h),{target:(g=h.initialTarget)!==null&&g!==void 0?g:null})});this._register(l(h=>this.onPointerStart(h,new Ny(this.el)),this));const c=this._register(new _t(this.el,Mt.Tap)).event,d=fe.map(fe.filter(fe.debounce(c,(h,g)=>{var f;return{event:g,count:((f=h?.count)!==null&&f!==void 0?f:0)+1}},250),({count:h})=>h===2),({event:h})=>{var g;return Object.assign(Object.assign({},h),{target:(g=h.initialTarget)!==null&&g!==void 0?g:null})});this._register(d(this.onPointerDoublePress,this)),typeof n.size=="number"?(this.size=n.size,n.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=qee,this._register(Yee.event(h=>{this.size=h,this.layout()}))),this._register(Zee.event(h=>this.hoverDelay=h)),this.layoutProvider=t,this.orthogonalStartSash=n.orthogonalStartSash,this.orthogonalEndSash=n.orthogonalEndSash,this.orientation=n.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",$ee),this.layout()}get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=u(n=>{this.orthogonalStartDragHandleDisposables.clear(),n!==0&&(this._orthogonalStartDragHandle=q(this.el,ee(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(He(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new _t(this._orthogonalStartDragHandle,"mouseenter")).event(()=>Yn.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new _t(this._orthogonalStartDragHandle,"mouseleave")).event(()=>Yn.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))},"onChange");this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}set orthogonalEndSash(e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=u(n=>{this.orthogonalEndDragHandleDisposables.clear(),n!==0&&(this._orthogonalEndDragHandle=q(this.el,ee(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(He(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new _t(this._orthogonalEndDragHandle,"mouseenter")).event(()=>Yn.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new _t(this._orthogonalEndDragHandle,"mouseleave")).event(()=>Yn.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))},"onChange");this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}onPointerStart(e,t){ft.stop(e);let n=!1;if(!e.__orthogonalSashEvent){const p=this.getOrthogonalSash(e);p&&(n=!0,e.__orthogonalSashEvent=!0,p.onPointerStart(e,new Fb(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new Fb(t))),!this.state)return;const i=RX("iframe");for(const p of i)p.classList.add(nR);const s=e.pageX,r=e.pageY,a=e.altKey,l={startX:s,currentX:s,startY:r,currentY:r,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);const c=oo(this.el),d=u(()=>{let p="";n?p="all-scroll":this.orientation===1?this.state===1?p="s-resize":this.state===2?p="n-resize":p=Xe?"row-resize":"ns-resize":this.state===1?p="e-resize":this.state===2?p="w-resize":p=Xe?"col-resize":"ew-resize",c.textContent=`* { cursor: ${p} !important; }`},"updateStyle"),h=new J;d(),n||this.onDidEnablementChange.event(d,null,h);const g=u(p=>{ft.stop(p,!1);const _={startX:s,currentX:p.pageX,startY:r,currentY:p.pageY,altKey:a};this._onDidChange.fire(_)},"onPointerMove"),f=u(p=>{ft.stop(p,!1),this.el.removeChild(c),this.el.classList.remove("active"),this._onDidEnd.fire(),h.dispose();for(const _ of i)_.classList.remove(nR)},"onPointerUp");t.onPointerMove(g,null,h),t.onPointerUp(f,null,h),h.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&Yn.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&Yn.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){Yn.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){if(!(!e.target||!(e.target instanceof HTMLElement))&&e.target.classList.contains("orthogonal-drag-handle"))return e.target.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}u(Yn,"Sash");class wl{constructor(e,t,n){this._visiblePosition=e,this._visiblePositionScrollDelta=t,this._cursorPosition=n}static capture(e){let t=null,n=0;if(e.getScrollTop()!==0){const i=e.getVisibleRanges();if(i.length>0){t=i[0].getStartPosition();const s=e.getTopForPosition(t.lineNumber,t.column);n=e.getScrollTop()-s}}return new wl(t,n,e.getPosition())}restore(e){if(this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){const t=e.getPosition();if(!this._cursorPosition||!t)return;const n=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+n)}}u(wl,"StableEditorScrollState");const K_={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:zi.text},dd={CurrentDragAndDropData:void 0};var iR,sR;class m9{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),n=this._value.charCodeAt(this._pos);return t-n}value(){return this._value[this._pos]}}u(m9,"StringIterator");class b9{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?BD(e,this._value,0,e.length,this._from,this._to):v_(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}u(b9,"ConfigKeysIterator");class _9{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){const n=this._value.charCodeAt(t);if(!(n===47||this._splitOnBackslash&&n===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?BD(e,this._value,0,e.length,this._from,this._to):v_(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}u(_9,"PathIterator");class v9{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new _9(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return vx(e,this._value.scheme);if(this._states[this._stateIdx]===2)return vx(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return ib(e,this._value.query);if(this._states[this._stateIdx]===5)return ib(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}u(v9,"UriIterator");class vm{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e,t;return(t=(e=this.left)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}get heightRight(){var e,t;return(t=(e=this.right)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}}u(vm,"TernarySearchTreeNode");class iu{constructor(e){this._iter=e}static forUris(e=()=>!1,t=()=>!1){return new iu(new v9(e,t))}static forStrings(){return new iu(new m9)}static forConfigKeys(){return new iu(new b9)}clear(){this._root=void 0}set(e,t){const n=this._iter.reset(e);let i;this._root||(this._root=new vm,this._root.segment=n.value());const s=[];for(i=this._root;;){const a=n.cmp(i.segment);if(a>0)i.left||(i.left=new vm,i.left.segment=n.value()),s.push([-1,i]),i=i.left;else if(a<0)i.right||(i.right=new vm,i.right.segment=n.value()),s.push([1,i]),i=i.right;else if(n.hasNext())n.next(),i.mid||(i.mid=new vm,i.mid.segment=n.value()),s.push([0,i]),i=i.mid;else break}const r=i.value;i.value=t,i.key=e;for(let a=s.length-1;a>=0;a--){const l=s[a][1];l.updateHeight();const c=l.balanceFactor();if(c<-1||c>1){const d=s[a][0],h=s[a+1][0];if(d===1&&h===1)s[a][1]=l.rotateLeft();else if(d===-1&&h===-1)s[a][1]=l.rotateRight();else if(d===1&&h===-1)l.right=s[a+1][1]=s[a+1][1].rotateRight(),s[a][1]=l.rotateLeft();else if(d===-1&&h===1)l.left=s[a+1][1]=s[a+1][1].rotateLeft(),s[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(s[a-1][0]){case-1:s[a-1][1].left=s[a][1];break;case 1:s[a-1][1].right=s[a][1];break;case 0:s[a-1][1].mid=s[a][1];break}else this._root=s[0][1]}}return r}get(e){var t;return(t=this._getNode(e))===null||t===void 0?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const i=t.cmp(n.segment);if(i>0)n=n.left;else if(i<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else break}return n}has(e){const t=this._getNode(e);return!(t?.value===void 0&&t?.mid===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){var n;const i=this._iter.reset(e),s=[];let r=this._root;for(;r;){const a=i.cmp(r.segment);if(a>0)s.push([-1,r]),r=r.left;else if(a<0)s.push([1,r]),r=r.right;else if(i.hasNext())i.next(),s.push([0,r]),r=r.mid;else break}if(r){if(t?(r.left=void 0,r.mid=void 0,r.right=void 0,r.height=1):(r.key=void 0,r.value=void 0),!r.mid&&!r.value)if(r.left&&r.right){const a=this._min(r.right),{key:l,value:c,segment:d}=a;this._delete(a.key,!1),r.key=l,r.value=c,r.segment=d}else{const a=(n=r.left)!==null&&n!==void 0?n:r.right;if(s.length>0){const[l,c]=s[s.length-1];switch(l){case-1:c.left=a;break;case 0:c.mid=a;break;case 1:c.right=a;break}}else this._root=a}for(let a=s.length-1;a>=0;a--){const l=s[a][1];l.updateHeight();const c=l.balanceFactor();if(c>1?(l.right.balanceFactor()>=0||(l.right=l.right.rotateRight()),s[a][1]=l.rotateLeft()):c<-1&&(l.left.balanceFactor()<=0||(l.left=l.left.rotateLeft()),s[a][1]=l.rotateRight()),a>0)switch(s[a-1][0]){case-1:s[a-1][1].left=s[a][1];break;case 1:s[a-1][1].right=s[a][1];break;case 0:s[a-1][1].mid=s[a][1];break}else this._root=s[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let n=this._root,i;for(;n;){const s=t.cmp(n.segment);if(s>0)n=n.left;else if(s<0)n=n.right;else if(t.hasNext())t.next(),i=n.value||i,n=n.mid;else break}return n&&n.value||i}findSuperstr(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const i=t.cmp(n.segment);if(i>0)n=n.left;else if(i<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else return n.mid?this._entries(n.mid):void 0}}forEach(e){for(const[t,n]of this)e(n,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){const t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value&&t.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}}u(iu,"TernarySearchTree");class C9{constructor(e,t){this.uri=e,this.value=t}}u(C9,"ResourceMapEntry");class ai{constructor(e,t){this[iR]="ResourceMap",e instanceof ai?(this.map=new Map(e.map),this.toKey=t??ai.defaultToKey):(this.map=new Map,this.toKey=e??ai.defaultToKey)}set(e,t){return this.map.set(this.toKey(e),new C9(e,t)),this}get(e){var t;return(t=this.map.get(this.toKey(e)))===null||t===void 0?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(const[n,i]of this.map)e(i.value,i.uri,this)}*values(){for(const e of this.map.values())yield e.value}*keys(){for(const e of this.map.values())yield e.uri}*entries(){for(const e of this.map.values())yield[e.uri,e.value]}*[(iR=Symbol.toStringTag,Symbol.iterator)](){for(const[,e]of this.map)yield[e.uri,e.value]}}u(ai,"ResourceMap");ai.defaultToKey=o=>o.toString();class w9{constructor(){this[sR]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const n=this._map.get(e);if(n)return t!==0&&this.touch(n,t),n.value}set(e,t,n=0){let i=this._map.get(e);if(i)i.value=t,n!==0&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const s={value:n.key,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}values(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const s={value:n.value,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}entries(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const s={value:[n.key,n.value],done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}[(sR=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}u(w9,"LinkedMap");class Al extends w9{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}u(Al,"LRUCache");function aI(...o){return function(e,t){for(let n=0,i=o.length;n<i;n++){const s=o[n](e,t);if(s)return s}return null}}u(aI,"or");y9.bind(void 0,!1);const Py=y9.bind(void 0,!0);function y9(o,e,t){if(!t||t.length<e.length)return null;let n;return o?n=WD(t,e):n=t.indexOf(e)===0,n?e.length>0?[{start:0,end:e.length}]:[]:null}u(y9,"_matchesPrefix");function S9(o,e){const t=e.toLowerCase().indexOf(o.toLowerCase());return t===-1?null:[{start:t,end:t+o.length}]}u(S9,"matchesContiguousSubString");function T9(o,e){return PE(o.toLowerCase(),e.toLowerCase(),0,0)}u(T9,"matchesSubString");function PE(o,e,t,n){if(t===o.length)return[];if(n===e.length)return null;if(o[t]===e[n]){let i=null;return(i=PE(o,e,t+1,n+1))?dI({start:n,end:n+1},i):null}return PE(o,e,t,n+1)}u(PE,"_matchesSubString");function lI(o){return 97<=o&&o<=122}u(lI,"isLower");function Ry(o){return 65<=o&&o<=90}u(Ry,"isUpper");function cI(o){return 48<=o&&o<=57}u(cI,"isNumber");function L9(o){return o===32||o===9||o===10||o===13}u(L9,"isWhitespace");const x9=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(o=>x9.add(o.charCodeAt(0)));function x1(o){return L9(o)||x9.has(o)}u(x1,"isWordSeparator");function Jee(o,e){return o===e||x1(o)&&x1(e)}u(Jee,"charactersMatch");function E9(o){return lI(o)||Ry(o)||cI(o)}u(E9,"isAlphanumeric");function dI(o,e){return e.length===0?e=[o]:o.end===e[0].start?e[0].start=o.start:e.unshift(o),e}u(dI,"join");function k9(o,e){for(let t=e;t<o.length;t++){const n=o.charCodeAt(t);if(Ry(n)||cI(n)||t>0&&!E9(o.charCodeAt(t-1)))return t}return o.length}u(k9,"nextAnchor");function RE(o,e,t,n){if(t===o.length)return[];if(n===e.length)return null;if(o[t]!==e[n].toLowerCase())return null;{let i=null,s=n+1;for(i=RE(o,e,t+1,n+1);!i&&(s=k9(e,s))<e.length;)i=RE(o,e,t+1,s),s++;return i===null?null:dI({start:n,end:n+1},i)}}u(RE,"_matchesCamelCase");function Qee(o){let e=0,t=0,n=0,i=0,s=0;for(let d=0;d<o.length;d++)s=o.charCodeAt(d),Ry(s)&&e++,lI(s)&&t++,E9(s)&&n++,cI(s)&&i++;const r=e/o.length,a=t/o.length,l=n/o.length,c=i/o.length;return{upperPercent:r,lowerPercent:a,alphaPercent:l,numericPercent:c}}u(Qee,"analyzeCamelCaseWord");function ete(o){const{upperPercent:e,lowerPercent:t}=o;return t===0&&e>.6}u(ete,"isUpperCaseWord");function tte(o){const{upperPercent:e,lowerPercent:t,alphaPercent:n,numericPercent:i}=o;return t>.2&&e<.8&&n>.6&&i<.2}u(tte,"isCamelCaseWord");function nte(o){let e=0,t=0,n=0,i=0;for(let s=0;s<o.length;s++)n=o.charCodeAt(s),Ry(n)&&e++,lI(n)&&t++,L9(n)&&i++;return(e===0||t===0)&&i===0?o.length<=30:e<=5}u(nte,"isCamelCasePattern");function M9(o,e){if(!e||(e=e.trim(),e.length===0)||!nte(o)||e.length>60)return null;const t=Qee(e);if(!tte(t)){if(!ete(t))return null;e=e.toLowerCase()}let n=null,i=0;for(o=o.toLowerCase();i<e.length&&(n=RE(o,e,0,i))===null;)i=k9(e,i+1);return n}u(M9,"matchesCamelCase");function ite(o,e,t=!1){if(!e||e.length===0)return null;let n=null,i=0;for(o=o.toLowerCase(),e=e.toLowerCase();i<e.length&&(n=FE(o,e,0,i,t))===null;)i=D9(e,i+1);return n}u(ite,"matchesWords");function FE(o,e,t,n,i){if(t===o.length)return[];if(n===e.length)return null;if(Jee(o.charCodeAt(t),e.charCodeAt(n))){let s=null,r=n+1;if(s=FE(o,e,t+1,n+1,i),!i)for(;!s&&(r=D9(e,r))<e.length;)s=FE(o,e,t+1,r,i),r++;return s===null?null:dI({start:n,end:n+1},s)}else return null}u(FE,"_matchesWords");function D9(o,e){for(let t=e;t<o.length;t++)if(x1(o.charCodeAt(t))||t>0&&x1(o.charCodeAt(t-1)))return t;return o.length}u(D9,"nextWord");const ste=aI(Py,M9,S9),ote=aI(Py,M9,T9),oR=new Al(1e4);function rR(o,e,t=!1){if(typeof o!="string"||typeof e!="string")return null;let n=oR.get(o);n||(n=new RegExp(fq(o),"i"),oR.set(o,n));const i=n.exec(e);return i?[{start:i.index,end:i.index+i[0].length}]:t?ote(o,e):ste(o,e)}u(rR,"matchesFuzzy");function rte(o,e,t,n,i,s){const r=Math.min(13,o.length);for(;t<r;t++){const a=yf(o,e,t,n,i,s,{firstMatchCanBeWeak:!1,boostFullMatch:!0});if(a)return a}return[0,s]}u(rte,"anyScore");function Fy(o){if(typeof o>"u")return[];const e=[],t=o[1];for(let n=o.length-1;n>1;n--){const i=o[n]+t,s=e[e.length-1];s&&s.end===i?s.end=i+1:e.push({start:i,end:i+1})}return e}u(Fy,"createMatches");const ac=128;function uI(){const o=[],e=[];for(let t=0;t<=ac;t++)e[t]=0;for(let t=0;t<=ac;t++)o.push(e.slice(0));return o}u(uI,"initTable");function A9(o){const e=[];for(let t=0;t<=o;t++)e[t]=0;return e}u(A9,"initArr");const I9=A9(2*ac),OE=A9(2*ac),wa=uI(),ud=uI(),rC=uI();function aC(o,e){if(e<0||e>=o.length)return!1;const t=o.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!zD(t)}}u(aC,"isSeparatorAtPos");function aR(o,e){if(e<0||e>=o.length)return!1;switch(o.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}u(aR,"isWhitespaceAtPos");function r0(o,e,t){return e[o]!==t[o]}u(r0,"isUpperCaseAtPos");function ate(o,e,t,n,i,s,r=!1){for(;e<t&&i<s;)o[e]===n[i]&&(r&&(I9[e]=i),e+=1),i+=1;return e===t}u(ate,"isPatternInWord");var fr;(function(o){o.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}u(e,"isDefault"),o.isDefault=e})(fr||(fr={}));class Oy{constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}}u(Oy,"FuzzyScoreOptions");Oy.default={boostFullMatch:!0,firstMatchCanBeWeak:!1};function yf(o,e,t,n,i,s,r=Oy.default){const a=o.length>ac?ac:o.length,l=n.length>ac?ac:n.length;if(t>=a||s>=l||a-t>l-s||!ate(e,t,a,i,s,l,!0))return;lte(a,l,t,s,e,i);let c=1,d=1,h=t,g=s;const f=[!1];for(c=1,h=t;h<a;c++,h++){const w=I9[h],y=OE[h],S=h+1<a?OE[h+1]:l;for(d=w-s+1,g=w;g<S;d++,g++){let E=Number.MIN_SAFE_INTEGER,k=!1;g<=y&&(E=cte(o,e,h,t,n,i,g,l,s,wa[c-1][d-1]===0,f));let T=0;E!==Number.MAX_SAFE_INTEGER&&(k=!0,T=E+ud[c-1][d-1]);const x=g>w,M=x?ud[c][d-1]+(wa[c][d-1]>0?-5:0):0,F=g>w+1&&wa[c][d-1]>0,V=F?ud[c][d-2]+(wa[c][d-2]>0?-5:0):0;if(F&&(!x||V>=M)&&(!k||V>=T))ud[c][d]=V,rC[c][d]=3,wa[c][d]=0;else if(x&&(!k||M>=T))ud[c][d]=M,rC[c][d]=2,wa[c][d]=0;else if(k)ud[c][d]=T,rC[c][d]=1,wa[c][d]=wa[c-1][d-1]+1;else throw new Error("not possible")}}if(!f[0]&&!r.firstMatchCanBeWeak)return;c--,d--;const p=[ud[c][d],s];let _=0,v=0;for(;c>=1;){let w=d;do{const y=rC[c][w];if(y===3)w=w-2;else if(y===2)w=w-1;else break}while(w>=1);_>1&&e[t+c-1]===i[s+d-1]&&!r0(w+s-1,n,i)&&_+1>wa[c][w]&&(w=d),w===d?_++:_=1,v||(v=w),c--,d=w-1,p.push(d)}l===a&&r.boostFullMatch&&(p[0]+=2);const C=v-a;return p[0]-=C,p}u(yf,"fuzzyScore");function lte(o,e,t,n,i,s){let r=o-1,a=e-1;for(;r>=t&&a>=n;)i[r]===s[a]&&(OE[r]=a,r--),a--}u(lte,"_fillInMaxWordMatchPos");function cte(o,e,t,n,i,s,r,a,l,c,d){if(e[t]!==s[r])return Number.MIN_SAFE_INTEGER;let h=1,g=!1;return r===t-n?h=o[t]===i[r]?7:5:r0(r,i,s)&&(r===0||!r0(r-1,i,s))?(h=o[t]===i[r]?7:5,g=!0):aC(s,r)&&(r===0||!aC(s,r-1))?h=5:(aC(s,r-1)||aR(s,r-1))&&(h=5,g=!0),h>1&&t===n&&(d[0]=!0),g||(g=r0(r,i,s)||aC(s,r-1)||aR(s,r-1)),t===n?r>l&&(h-=g?3:5):c?h+=g?2:0:h+=g?0:1,r+1===a&&(h-=g?3:5),h}u(cte,"_doScore");function dte(o,e,t,n,i,s,r){return ute(o,e,t,n,i,s,!0,r)}u(dte,"fuzzyScoreGracefulAggressive");function ute(o,e,t,n,i,s,r,a){let l=yf(o,e,t,n,i,s,a);if(l&&!r)return l;if(o.length>=3){const c=Math.min(7,o.length-1);for(let d=t+1;d<c;d++){const h=hte(o,d);if(h){const g=yf(h,h.toLowerCase(),t,n,i,s,a);g&&(g[0]-=3,(!l||g[0]>l[0])&&(l=g))}}}return l}u(ute,"fuzzyScoreWithPermutations");function hte(o,e){if(e+1>=o.length)return;const t=o[e],n=o[e+1];if(t!==n)return o.slice(0,e)+n+t+o.slice(e+2)}u(hte,"nextTypoPermutation");const Gm="$(",hI=new RegExp(`\\$\\(${Mi.iconNameExpression}(?:${Mi.iconModifierExpression})?\\)`,"g"),gte=new RegExp(Mi.iconNameCharacter),fte=new RegExp(`(\\\\)?${hI.source}`,"g");function pte(o){return o.replace(fte,(e,t)=>t?e:`\\${e}`)}u(pte,"escapeIcons");const mte=new RegExp(`\\\\${hI.source}`,"g");function bte(o){return o.replace(mte,e=>`\\${e}`)}u(bte,"markdownEscapeEscapedIcons");const _te=new RegExp(`(\\s)?(\\\\)?${hI.source}(\\s)?`,"g");function gI(o){return o.indexOf(Gm)===-1?o:o.replace(_te,(e,t,n,i)=>n?e:t||i||"")}u(gI,"stripIcons");function Vh(o){const e=o.indexOf(Gm);return e===-1?{text:o}:vte(o,e)}u(Vh,"parseLabelWithIcons");function vte(o,e){const t=[];let n="";function i(g){if(g){n+=g;for(const f of g)t.push(a)}}u(i,"appendChars");let s=-1,r="",a=0,l,c,d=e;const h=o.length;for(i(o.substr(0,e));d<h;){if(l=o[d],c=o[d+1],l===Gm[0]&&c===Gm[1])s=d,i(r),r=Gm,d++;else if(l===")"&&s!==-1){const g=d-s+1;a+=g,s=-1,r=""}else s!==-1?gte.test(l)?r+=l:(i(r),s=-1,r=""):i(l);d++}return i(r),{text:n,iconOffsets:t}}u(vte,"doParseLabelWithIcons");function lC(o,e,t=!1){const{text:n,iconOffsets:i}=e;if(!i||i.length===0)return rR(o,n,t);const s=Iw(n," "),r=n.length-s.length,a=rR(o,s,t);if(a)for(const l of a){const c=i[l.start+r]+r;l.start+=c,l.end+=c}return a}u(lC,"matchesFuzzyIconAware");class Ei{constructor(e="",t=!1){var n,i,s;if(this.value=e,typeof this.value!="string")throw dr("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=(n=t.isTrusted)!==null&&n!==void 0?n:void 0,this.supportThemeIcons=(i=t.supportThemeIcons)!==null&&i!==void 0?i:!1,this.supportHtml=(s=t.supportHtml)!==null&&s!==void 0?s:!1)}appendText(e,t=0){return this.value+=Cte(this.supportThemeIcons?pte(e):e).replace(/([ \t]+)/g,(n,i)=>"&nbsp;".repeat(i.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+="\n```",this.value+=e,this.value+=`
`,this.value+=t,this.value+="\n```\n",this}appendLink(e,t,n){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),n&&(this.value+=` "${this._escape(this._escape(n,'"'),")")}"`),this.value+=")",this}_escape(e,t){const n=new RegExp(As(t),"g");return e.replace(n,(i,s)=>e.charAt(s-1)!=="\\"?`\\${i}`:i)}}u(Ei,"MarkdownString");function Sf(o){return N9(o)?!o.value:Array.isArray(o)?o.every(Sf):!0}u(Sf,"isEmptyMarkdownString");function N9(o){return o instanceof Ei?!0:o&&typeof o=="object"?typeof o.value=="string"&&(typeof o.isTrusted=="boolean"||o.isTrusted===void 0)&&(typeof o.supportThemeIcons=="boolean"||o.supportThemeIcons===void 0):!1}u(N9,"isMarkdownString");function Cte(o){return o.replace(/[\\`*_{}[\]()#+\-!]/g,"\\$&")}u(Cte,"escapeMarkdownSyntaxTokens");function cC(o){return o.replace(/"/g,"&quot;")}u(cC,"escapeDoubleQuotes");function MT(o){return o&&o.replace(/\\([\\`*_{}[\]()#+\-.!])/g,"$1")}u(MT,"removeMarkdownEscapes");function wte(o){const e=[],t=o.split("|").map(i=>i.trim());o=t[0];const n=t[1];if(n){const i=/height=(\d+)/.exec(n),s=/width=(\d+)/.exec(n),r=i?i[1]:"",a=s?s[1]:"",l=isFinite(parseInt(a)),c=isFinite(parseInt(r));l&&e.push(`width="${a}"`),c&&e.push(`height="${r}"`)}return{href:o,dimensions:e}}u(wte,"parseHrefAndDimensions");var VE=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};function yte(o,e){qi(e)?o.title=gI(e):e?.markdownNotSupportedFallback?o.title=e.markdownNotSupportedFallback:o.removeAttribute("title")}u(yte,"setupNativeHover");class P9{constructor(e,t,n){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=n}update(e,t,n){var i;return VE(this,void 0,void 0,function*(){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let s;if(e===void 0||qi(e)||e instanceof HTMLElement)s=e;else if(!K0(e.markdown))s=(i=e.markdown)!==null&&i!==void 0?i:e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(m("iconLabel.loading","Loading..."),t),this._cancellationTokenSource=new ti;const r=this._cancellationTokenSource.token;if(s=yield e.markdown(r),s===void 0&&(s=e.markdownNotSupportedFallback),this.isDisposed||r.isCancellationRequested)return}this.show(s,t,n)})}show(e,t,n){const i=this._hoverWidget;if(this.hasContent(e)){const s=Object.assign({content:e,target:this.target,showPointer:this.hoverDelegate.placement==="element",hoverPosition:2,skipFadeInAnimation:!this.fadeInAnimation||!!i},n);this._hoverWidget=this.hoverDelegate.showHover(s,t)}i?.dispose()}hasContent(e){return e?N9(e)?!!e.value:!0:!1}get isDisposed(){var e;return(e=this._hoverWidget)===null||e===void 0?void 0:e.isDisposed}dispose(){var e,t;(e=this._hoverWidget)===null||e===void 0||e.dispose(),(t=this._cancellationTokenSource)===null||t===void 0||t.dispose(!0),this._cancellationTokenSource=void 0}}u(P9,"UpdatableHoverWidget");function R9(o,e,t,n){let i,s;const r=u((h,g)=>{var f;h&&(s?.dispose(),s=void 0),g&&(i?.dispose(),i=void 0),(f=o.onDidHideHover)===null||f===void 0||f.call(o)},"hideHover"),a=u((h,g,f)=>new hs(()=>VE(this,void 0,void 0,function*(){(!s||s.isDisposed)&&(s=new P9(o,f||e,h>0),yield s.update(t,g,n))}),h),"triggerShowHover"),l=u(()=>{if(i)return;const h=new J,g=u(_=>r(!1,_.fromElement===e),"onMouseLeave");h.add(Y(e,le.MOUSE_LEAVE,g,!0));const f=u(()=>r(!0,!0),"onMouseDown");h.add(Y(e,le.MOUSE_DOWN,f,!0));const p={targetElements:[e],dispose:()=>{}};if(o.placement===void 0||o.placement==="mouse"){const _=u(v=>{p.x=v.x+10,v.target instanceof HTMLElement&&v.target.classList.contains("action-label")&&r(!0,!0)},"onMouseMove");h.add(Y(e,le.MOUSE_MOVE,_,!0))}h.add(a(o.delay,!1,p)),i=h},"onMouseOver"),c=Y(e,le.MOUSE_OVER,l,!0);return{show:h=>{r(!1,!0),a(0,h)},hide:()=>{r(!0,!0)},update:(h,g)=>VE(this,void 0,void 0,function*(){t=h,yield s?.update(t,void 0,g)}),dispose:()=>{c.dispose(),r(!0,!0)}}}u(R9,"setupCustomHover");class $o extends U{constructor(e,t,n={}){super(),this.options=n,this._context=e||this,this._action=t,t instanceof Yi&&this._register(t.onDidChange(i=>{this.element&&this.handleActionChangeEvent(i)}))}get action(){return this._action}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new Tu)),this._actionRunner}set actionRunner(e){this._actionRunner=e}getAction(){return this._action}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(gt.addTarget(e));const n=this.options&&this.options.draggable;n&&(e.draggable=!0,Is&&this._register(Y(e,le.DRAG_START,i=>{var s;return(s=i.dataTransfer)===null||s===void 0?void 0:s.setData(K_.TEXT,this._action.label)}))),this._register(Y(t,Mt.Tap,i=>this.onClick(i,!0))),this._register(Y(t,le.MOUSE_DOWN,i=>{n||ft.stop(i,!0),this._action.enabled&&i.button===0&&t.classList.add("active")})),Xe&&this._register(Y(t,le.CONTEXT_MENU,i=>{i.button===0&&i.ctrlKey===!0&&this.onClick(i)})),this._register(Y(t,le.CLICK,i=>{ft.stop(i,!0),this.options&&this.options.isMenu||this.onClick(i)})),this._register(Y(t,le.DBLCLICK,i=>{ft.stop(i,!0)})),[le.MOUSE_UP,le.MOUSE_OUT].forEach(i=>{this._register(Y(t,i,s=>{ft.stop(s),t.classList.remove("active")}))})}onClick(e,t=!1){var n;ft.stop(e,!0);const i=ys(this._context)?!((n=this.options)===null||n===void 0)&&n.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,i)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getTooltip(){return this.getAction().tooltip}updateTooltip(){var e;if(!this.element)return;const t=(e=this.getTooltip())!==null&&e!==void 0?e:"";this.element.setAttribute("aria-label",t),this.options.hoverDelegate?(this.element.title="",this.customHover?this.customHover.update(t):(this.customHover=R9(this.options.hoverDelegate,this.element,t),this._store.add(this.customHover))):this.element.title=t}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),super.dispose()}}u($o,"BaseActionViewItem");class Tf extends $o{constructor(e,t,n={}){super(e,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass=""}render(e){super.render(e),this.element&&(this.label=q(this.element,ee("a.action-label"))),this.label&&(this._action.id===Jn.ID?this.label.setAttribute("role","presentation"):this.options.isMenu?this.label.setAttribute("role","menuitem"):this.label.setAttribute("role","button")),this.options.label&&this.options.keybinding&&this.element&&(q(this.element,ee("span.keybinding")).textContent=this.options.keybinding),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.getAction().label)}getTooltip(){let e=null;return this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=m({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e??void 0}updateClass(){var e;this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getAction().class,this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):(e=this.label)===null||e===void 0||e.classList.remove("codicon")}updateEnabled(){var e,t;this.getAction().enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),(e=this.element)===null||e===void 0||e.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),(t=this.element)===null||t===void 0||t.classList.add("disabled"))}updateChecked(){this.label&&(this.getAction().checked?this.label.classList.add("checked"):this.label.classList.remove("checked"))}}u(Tf,"ActionViewItem");var Ste=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class Cr extends U{constructor(e,t={}){var n,i,s,r,a,l;super(),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new R),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new R({onFirstListenerAdd:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new R),this.onDidRun=this._onDidRun.event,this._onBeforeRun=this._register(new R),this.onBeforeRun=this._onBeforeRun.event,this.options=t,this._context=(n=t.context)!==null&&n!==void 0?n:null,this._orientation=(i=this.options.orientation)!==null&&i!==void 0?i:0,this._triggerKeys={keyDown:(r=(s=this.options.triggerKeys)===null||s===void 0?void 0:s.keyDown)!==null&&r!==void 0?r:!1,keys:(l=(a=this.options.triggerKeys)===null||a===void 0?void 0:a.keys)!==null&&l!==void 0?l:[3,10]},this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new Tu,this._register(this._actionRunner)),this._register(this._actionRunner.onDidRun(h=>this._onDidRun.fire(h))),this._register(this._actionRunner.onBeforeRun(h=>this._onBeforeRun.fire(h))),this._actionIds=[],this.viewItems=[],this.viewItemDisposables=new Map,this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",t.animated!==!1&&this.domNode.classList.add("animated");let c,d;switch(this._orientation){case 0:c=[15],d=[17];break;case 1:c=[16],d=[18],this.domNode.className+=" vertical";break}this._register(Y(this.domNode,le.KEY_DOWN,h=>{const g=new Pt(h);let f=!0;const p=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;c&&(g.equals(c[0])||g.equals(c[1]))?f=this.focusPrevious():d&&(g.equals(d[0])||g.equals(d[1]))?f=this.focusNext():g.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():g.equals(14)?f=this.focusFirst():g.equals(13)?f=this.focusLast():g.equals(2)&&p instanceof $o&&p.trapsArrowNavigation?f=this.focusNext():this.isTriggerKeyEvent(g)?this._triggerKeys.keyDown?this.doTrigger(g):this.triggerKeyDown=!0:f=!1,f&&(g.preventDefault(),g.stopPropagation())})),this._register(Y(this.domNode,le.KEY_UP,h=>{const g=new Pt(h);this.isTriggerKeyEvent(g)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(g)),g.preventDefault(),g.stopPropagation()):(g.equals(2)||g.equals(1026))&&this.updateFocusedItem()})),this.focusTracker=this._register(yu(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(kg()===this.domNode||!ll(kg(),this.domNode))&&(this._onDidBlur.fire(),this.focusedItem=void 0,this.previouslyFocusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=2?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(e){if(this.focusable=e,this.focusable){const t=this.viewItems.find(n=>n instanceof $o&&n.isEnabled());t instanceof $o&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof $o&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(n=>{t=t||e.equals(n)}),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){const t=this.actionsList.children[e];if(ll(kg(),t)){this.focusedItem=e;break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){e&&(this._actionRunner=e,this.viewItems.forEach(t=>t.actionRunner=e))}getContainer(){return this.domNode}push(e,t={}){const n=Array.isArray(e)?e:[e];let i=Sc(t.index)?t.index:null;n.forEach(s=>{const r=document.createElement("li");r.className="action-item",r.setAttribute("role","presentation");let a;this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(s)),a||(a=new Tf(this.context,s,Object.assign({hoverDelegate:this.options.hoverDelegate},t))),this.options.allowContextMenu||this.viewItemDisposables.set(a,Y(r,le.CONTEXT_MENU,l=>{ft.stop(l,!0)})),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(r),this.focusable&&a instanceof $o&&this.viewItems.length===0&&a.setFocusable(!0),i===null||i<0||i>=this.actionsList.children.length?(this.actionsList.appendChild(r),this.viewItems.push(a),this._actionIds.push(s.id)):(this.actionsList.insertBefore(r,this.actionsList.children[i]),this.viewItems.splice(i,0,a),this._actionIds.splice(i,0,s.id),i++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}clear(){st(this.viewItems),this.viewItemDisposables.forEach(e=>e.dispose()),this.viewItemDisposables.clear(),this.viewItems=[],this._actionIds=[],Tn(this.actionsList),this.refreshRole()}length(){return this.viewItems.length}focus(e){let t=!1,n;if(e===void 0?t=!0:typeof e=="number"?n=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){const i=this.viewItems.findIndex(s=>s.isEnabled());this.focusedItem=i===-1?void 0:i,this.updateFocus(void 0,void 0,!0)}else n!==void 0&&(this.focusedItem=n),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let n;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=t,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!n.isEnabled()||n.action.id===Jn.ID));return this.updateFocus(),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let n;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!n.isEnabled()||n.action.id===Jn.ID));return this.updateFocus(!0),!0}updateFocus(e,t,n=!1){var i;typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&((i=this.viewItems[this.previouslyFocusedItem])===null||i===void 0||i.blur());const s=this.focusedItem!==void 0&&this.viewItems[this.focusedItem];if(s){let r=!0;K0(s.focus)||(r=!1),this.options.focusOnlyEnabledItems&&K0(s.isEnabled)&&!s.isEnabled()&&(r=!1),s.action.id===Jn.ID&&(r=!1),r?(n||this.previouslyFocusedItem!==this.focusedItem)&&(s.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0)}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof $o){const n=t._context===null||t._context===void 0?e:t._context;this.run(t._action,n)}}run(e,t){return Ste(this,void 0,void 0,function*(){yield this._actionRunner.run(e,t)})}dispose(){st(this.viewItems),this.viewItems=[],this._actionIds=[],this.getContainer().remove(),super.dispose()}}u(Cr,"ActionBar");const Tte={IconContribution:"base.contributions.icons"};var lR;(function(o){function e(t,n){let i=t.defaults;for(;ct.isThemeIcon(i);){const s=gh.getIcon(i.id);if(!s)return;i=s.defaults}return i}u(e,"getDefinition"),o.getDefinition=e})(lR||(lR={}));var cR;(function(o){function e(n){return{weight:n.weight,style:n.style,src:n.src.map(i=>({format:i.format,location:i.location.toString()}))}}u(e,"toJSONObject"),o.toJSONObject=e;function t(n){const i=u(s=>qi(s)?s:void 0,"stringOrUndef");if(n&&Array.isArray(n.src)&&n.src.every(s=>qi(s.format)&&qi(s.location)))return{weight:i(n.weight),style:i(n.style),src:n.src.map(s=>({format:s.format,location:be.parse(s.location)}))}}u(t,"fromJSONObject"),o.fromJSONObject=t})(cR||(cR={}));class F9{constructor(){this._onDidChange=new R,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:m("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:m("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${Mi.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,n,i){const s=this.iconsById[e];if(s){if(n&&!s.description){s.description=n,this.iconSchema.properties[e].markdownDescription=`${n} $(${e})`;const l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=n),this._onDidChange.fire()}return s}const r={id:e,description:n,defaults:t,deprecationMessage:i};this.iconsById[e]=r;const a={$ref:"#/definitions/icons"};return i&&(a.deprecationMessage=i),n&&(a.markdownDescription=`${n}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(n||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}toString(){const e=u((s,r)=>s.id.localeCompare(r.id),"sorter"),t=u(s=>{for(;ct.isThemeIcon(s.defaults);)s=this.iconsById[s.defaults.id];return`codicon codicon-${s?s.id:""}`},"classNames"),n=[];n.push("| preview     | identifier                        | default codicon ID                | description"),n.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const i=Object.keys(this.iconsById).map(s=>this.iconsById[s]);for(const s of i.filter(r=>!!r.description).sort(e))n.push(`|<i class="${t(s)}"></i>|${s.id}|${ct.isThemeIcon(s.defaults)?s.defaults.id:s.id}|${s.description||""}|`);n.push("| preview     | identifier                        "),n.push("| ----------- | --------------------------------- |");for(const s of i.filter(r=>!ct.isThemeIcon(r.defaults)).sort(e))n.push(`|<i class="${t(s)}"></i>|${s.id}|`);return n.join(`
`)}}u(F9,"IconRegistry");const gh=new F9;zt.add(Tte.IconContribution,gh);function vn(o,e,t,n){return gh.registerIcon(o,e,t,n)}u(vn,"registerIcon");function O9(){return gh}u(O9,"getIconRegistry");function Lte(){for(const o of b.getAll())gh.registerIcon(o.id,o.definition,o.description)}u(Lte,"initialize");Lte();const V9="vscode://schemas/icons",H9=zt.as(Hw.JSONContribution);H9.registerSchema(V9,gh.getIconSchema());const dR=new pt(()=>H9.notifySchemaChanged(V9),200);gh.onDidChange(()=>{dR.isScheduled()||dR.schedule()});const B9=vn("widget-close",b.close,m("widgetClose","Icon for the close action in widgets."));vn("goto-previous-location",b.arrowUp,m("previousChangeIcon","Icon for goto previous editor location."));vn("goto-next-location",b.arrowDown,m("nextChangeIcon","Icon for goto next editor location."));ct.modify(b.sync,"spin");ct.modify(b.loading,"spin");var xte=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Ete=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},kte=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})},DT;const dC=3;class Qh{constructor(e,t,n,i){this.originalLineStart=e,this.originalLineEnd=t,this.modifiedLineStart=n,this.modifiedLineEnd=i}getType(){return this.originalLineStart===0?1:this.modifiedLineStart===0?2:0}}u(Qh,"DiffEntry");class a0{constructor(e){this.entries=e}}u(a0,"Diff");const Mte=vn("diff-review-insert",b.add,m("diffReviewInsertIcon","Icon for 'Insert' in diff review.")),Dte=vn("diff-review-remove",b.remove,m("diffReviewRemoveIcon","Icon for 'Remove' in diff review.")),Ate=vn("diff-review-close",b.close,m("diffReviewCloseIcon","Icon for 'Close' in diff review."));let E1=u(class vd extends U{constructor(e,t){super(),this._languageService=t,this._width=0,this._diffEditor=e,this._isVisible=!1,this.shadow=et(document.createElement("div")),this.shadow.setClassName("diff-review-shadow"),this.actionBarContainer=et(document.createElement("div")),this.actionBarContainer.setClassName("diff-review-actions"),this._actionBar=this._register(new Cr(this.actionBarContainer.domNode)),this._actionBar.push(new Yi("diffreview.close",m("label.close","Close"),"close-diff-review "+ct.asClassName(Ate),!0,()=>kte(this,void 0,void 0,function*(){return this.hide()})),{label:!1,icon:!0}),this.domNode=et(document.createElement("div")),this.domNode.setClassName("diff-review monaco-editor-background"),this._content=et(document.createElement("div")),this._content.setClassName("diff-review-content"),this._content.setAttribute("role","code"),this.scrollbar=this._register(new lp(this._content.domNode,{})),this.domNode.domNode.appendChild(this.scrollbar.getDomNode()),this._register(e.onDidUpdateDiff(()=>{this._isVisible&&(this._diffs=this._compute(),this._render())})),this._register(e.getModifiedEditor().onDidChangeCursorPosition(()=>{this._isVisible&&this._render()})),this._register(Dn(this.domNode.domNode,"click",n=>{n.preventDefault();const i=AV(n.target,"diff-review-row");i&&this._goToRow(i)})),this._register(Dn(this.domNode.domNode,"keydown",n=>{(n.equals(18)||n.equals(2066)||n.equals(530))&&(n.preventDefault(),this._goToRow(this._getNextRow())),(n.equals(16)||n.equals(2064)||n.equals(528))&&(n.preventDefault(),this._goToRow(this._getPrevRow())),(n.equals(9)||n.equals(2057)||n.equals(521)||n.equals(1033))&&(n.preventDefault(),this.hide()),(n.equals(10)||n.equals(3))&&(n.preventDefault(),this.accept())})),this._diffs=[],this._currentDiff=null}prev(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let n=-1;for(let i=0,s=this._diffs.length;i<s;i++)if(this._diffs[i]===this._currentDiff){n=i;break}e=this._diffs.length+n-1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new H(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}next(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let n=-1;for(let i=0,s=this._diffs.length;i<s;i++)if(this._diffs[i]===this._currentDiff){n=i;break}e=n+1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new H(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}accept(){let e=-1;const t=this._getCurrentFocusedRow();if(t){const n=parseInt(t.getAttribute("data-line"),10);isNaN(n)||(e=n)}this.hide(),e!==-1&&(this._diffEditor.setPosition(new H(e,1)),this._diffEditor.revealPosition(new H(e,1),1))}hide(){this._isVisible=!1,this._diffEditor.updateOptions({readOnly:!1}),this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()}_getPrevRow(){const e=this._getCurrentFocusedRow();return e?e.previousElementSibling?e.previousElementSibling:e:this._getFirstRow()}_getNextRow(){const e=this._getCurrentFocusedRow();return e?e.nextElementSibling?e.nextElementSibling:e:this._getFirstRow()}_getFirstRow(){return this.domNode.domNode.querySelector(".diff-review-row")}_getCurrentFocusedRow(){const e=document.activeElement;return e&&/diff-review-row/.test(e.className)?e:null}_goToRow(e){const t=this._getCurrentFocusedRow();e.tabIndex=0,e.focus(),t&&t!==e&&(t.tabIndex=-1),this.scrollbar.scanDomNode()}isVisible(){return this._isVisible}layout(e,t,n){this._width=t,this.shadow.setTop(e-6),this.shadow.setWidth(t),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(e),this.domNode.setWidth(t),this.domNode.setHeight(n),this._content.setHeight(n),this._content.setWidth(t),this._isVisible?(this.actionBarContainer.setAttribute("aria-hidden","false"),this.actionBarContainer.setDisplay("block")):(this.actionBarContainer.setAttribute("aria-hidden","true"),this.actionBarContainer.setDisplay("none"))}_compute(){const e=this._diffEditor.getLineChanges();if(!e||e.length===0)return[];const t=this._diffEditor.getOriginalEditor().getModel(),n=this._diffEditor.getModifiedEditor().getModel();return!t||!n?[]:vd._mergeAdjacent(e,t.getLineCount(),n.getLineCount())}static _mergeAdjacent(e,t,n){if(!e||e.length===0)return[];const i=[];let s=0;for(let c=0,d=e.length;c<d;c++){const h=e[c],g=h.originalStartLineNumber,f=h.originalEndLineNumber,p=h.modifiedStartLineNumber,_=h.modifiedEndLineNumber,v=[];let C=0;{const w=f===0?g:g-1,y=_===0?p:p-1;let S=1,E=1;if(c>0){const x=e[c-1];x.originalEndLineNumber===0?S=x.originalStartLineNumber+1:S=x.originalEndLineNumber+1,x.modifiedEndLineNumber===0?E=x.modifiedStartLineNumber+1:E=x.modifiedEndLineNumber+1}let k=w-dC+1,T=y-dC+1;if(k<S){const x=S-k;k=k+x,T=T+x}if(T<E){const x=E-T;k=k+x,T=T+x}v[C++]=new Qh(k,w,T,y)}f!==0&&(v[C++]=new Qh(g,f,0,0)),_!==0&&(v[C++]=new Qh(0,0,p,_));{const w=f===0?g+1:f+1,y=_===0?p+1:_+1;let S=t,E=n;if(c+1<d){const x=e[c+1];x.originalEndLineNumber===0?S=x.originalStartLineNumber:S=x.originalStartLineNumber-1,x.modifiedEndLineNumber===0?E=x.modifiedStartLineNumber:E=x.modifiedStartLineNumber-1}let k=w+dC-1,T=y+dC-1;if(k>S){const x=S-k;k=k+x,T=T+x}if(T>E){const x=E-T;k=k+x,T=T+x}v[C++]=new Qh(w,k,y,T)}i[s++]=new a0(v)}let r=i[0].entries;const a=[];let l=0;for(let c=1,d=i.length;c<d;c++){const h=i[c].entries,g=r[r.length-1],f=h[0];if(g.getType()===0&&f.getType()===0&&f.originalLineStart<=g.originalLineEnd){r[r.length-1]=new Qh(g.originalLineStart,f.originalLineEnd,g.modifiedLineStart,f.modifiedLineEnd),r=r.concat(h.slice(1));continue}a[l++]=new a0(r),r=h}return a[l++]=new a0(r),a}_findDiffIndex(e){const t=e.lineNumber;for(let n=0,i=this._diffs.length;n<i;n++){const s=this._diffs[n].entries,r=s[s.length-1].modifiedLineEnd;if(t<=r)return n}return 0}_render(){const e=this._diffEditor.getOriginalEditor().getOptions(),t=this._diffEditor.getModifiedEditor().getOptions(),n=this._diffEditor.getOriginalEditor().getModel(),i=this._diffEditor.getModifiedEditor().getModel(),s=n.getOptions(),r=i.getOptions();if(!this._isVisible||!n||!i){Tn(this._content.domNode),this._currentDiff=null,this.scrollbar.scanDomNode();return}this._diffEditor.updateOptions({readOnly:!0});const a=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[a]===this._currentDiff)return;this._currentDiff=this._diffs[a];const l=this._diffs[a].entries,c=document.createElement("div");c.className="diff-review-table",c.setAttribute("role","list"),c.setAttribute("aria-label",'Difference review. Use "Stage | Unstage | Revert Selected Ranges" commands'),di(c,t.get(46));let d=0,h=0,g=0,f=0;for(let T=0,x=l.length;T<x;T++){const M=l[T],F=M.originalLineStart,V=M.originalLineEnd,G=M.modifiedLineStart,j=M.modifiedLineEnd;F!==0&&(d===0||F<d)&&(d=F),V!==0&&(h===0||V>h)&&(h=V),G!==0&&(g===0||G<g)&&(g=G),j!==0&&(f===0||j>f)&&(f=j)}const p=document.createElement("div");p.className="diff-review-row";const _=document.createElement("div");_.className="diff-review-cell diff-review-summary";const v=h-d+1,C=f-g+1;_.appendChild(document.createTextNode(`${a+1}/${this._diffs.length}: @@ -${d},${v} +${g},${C} @@`)),p.setAttribute("data-line",String(g));const w=u(T=>T===0?m("no_lines_changed","no lines changed"):T===1?m("one_line_changed","1 line changed"):m("more_lines_changed","{0} lines changed",T),"getAriaLines"),y=w(v),S=w(C);p.setAttribute("aria-label",m({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",a+1,this._diffs.length,d,y,g,S)),p.appendChild(_),p.setAttribute("role","listitem"),c.appendChild(p);const E=t.get(61);let k=g;for(let T=0,x=l.length;T<x;T++){const M=l[T];vd._renderSection(c,M,k,E,this._width,e,n,s,t,i,r,this._languageService.languageIdCodec),M.modifiedLineStart!==0&&(k=M.modifiedLineEnd)}Tn(this._content.domNode),this._content.domNode.appendChild(c),this.scrollbar.scanDomNode()}static _renderSection(e,t,n,i,s,r,a,l,c,d,h,g){const f=t.getType();let p="diff-review-row",_="";const v="diff-review-spacer";let C=null;switch(f){case 1:p="diff-review-row line-insert",_=" char-insert",C=Mte;break;case 2:p="diff-review-row line-delete",_=" char-delete",C=Dte;break}const w=t.originalLineStart,y=t.originalLineEnd,S=t.modifiedLineStart,E=t.modifiedLineEnd,k=Math.max(E-S,y-w),T=r.get(133),x=T.glyphMarginWidth+T.lineNumbersWidth,M=c.get(133),F=10+M.glyphMarginWidth+M.lineNumbersWidth;for(let V=0;V<=k;V++){const G=w===0?0:w+V,j=S===0?0:S+V,ae=document.createElement("div");ae.style.minWidth=s+"px",ae.className=p,ae.setAttribute("role","listitem"),j!==0&&(n=j),ae.setAttribute("data-line",String(n));const he=document.createElement("div");he.className="diff-review-cell",he.style.height=`${i}px`,ae.appendChild(he);const Se=document.createElement("span");Se.style.width=x+"px",Se.style.minWidth=x+"px",Se.className="diff-review-line-number"+_,G!==0?Se.appendChild(document.createTextNode(String(G))):Se.innerText=" ",he.appendChild(Se);const Te=document.createElement("span");Te.style.width=F+"px",Te.style.minWidth=F+"px",Te.style.paddingRight="10px",Te.className="diff-review-line-number"+_,j!==0?Te.appendChild(document.createTextNode(String(j))):Te.innerText=" ",he.appendChild(Te);const ke=document.createElement("span");if(ke.className=v,C){const Tt=document.createElement("span");Tt.className=ct.asClassName(C),Tt.innerText="  ",ke.appendChild(Tt)}else ke.innerText="  ";he.appendChild(ke);let Ue;if(j!==0){let Tt=this._renderLine(d,c,h.tabSize,j,g);vd._ttPolicy&&(Tt=vd._ttPolicy.createHTML(Tt)),he.insertAdjacentHTML("beforeend",Tt),Ue=d.getLineContent(j)}else{let Tt=this._renderLine(a,r,l.tabSize,G,g);vd._ttPolicy&&(Tt=vd._ttPolicy.createHTML(Tt)),he.insertAdjacentHTML("beforeend",Tt),Ue=a.getLineContent(G)}Ue.length===0&&(Ue=m("blankLine","blank"));let Rt="";switch(f){case 0:G===j?Rt=m({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",Ue,G):Rt=m("equalLine","{0} original line {1} modified line {2}",Ue,G,j);break;case 1:Rt=m("insertLine","+ {0} modified line {1}",Ue,j);break;case 2:Rt=m("deleteLine","- {0} original line {1}",Ue,G);break}ae.setAttribute("aria-label",Rt),e.appendChild(ae)}}static _renderLine(e,t,n,i,s){const r=e.getLineContent(i),a=t.get(46),l=yn.createEmpty(r,s),c=as.isBasicASCII(r,e.mightContainNonBasicASCII()),d=as.containsRTL(r,c,e.mightContainRTL());return jw(new Ml(a.isMonospace&&!t.get(29),a.canUseHalfwidthRightwardsArrow,r,!1,c,d,0,l,[],n,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(107),t.get(90),t.get(85),t.get(47)!==is.OFF,null)).html}},"DiffReview");E1._ttPolicy=(DT=window.trustedTypes)===null||DT===void 0?void 0:DT.createPolicy("diffReview",{createHTML:o=>o});E1=xte([Ete(1,Gt)],E1);At((o,e)=>{const t=o.getColor(FH);t&&e.addRule(`.monaco-diff-editor .diff-review-line-number { color: ${t}; }`);const n=o.getColor(ip);n&&e.addRule(`.monaco-diff-editor .diff-review-shadow { box-shadow: ${n} 0 -6px 6px -6px inset; }`)});class W9 extends de{constructor(){super({id:"editor.action.diffReview.next",label:m("editor.action.diffReview.next","Go to Next Difference"),alias:"Go to Next Difference",precondition:oe.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:65,weight:100}})}run(e,t){const n=G9(e);n&&n.diffReviewNext()}}u(W9,"DiffReviewNext");class U9 extends de{constructor(){super({id:"editor.action.diffReview.prev",label:m("editor.action.diffReview.prev","Go to Previous Difference"),alias:"Go to Previous Difference",precondition:oe.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:1089,weight:100}})}run(e,t){const n=G9(e);n&&n.diffReviewPrev()}}u(U9,"DiffReviewPrev");function G9(o){const e=o.get(dt),t=e.listDiffEditors(),n=e.getActiveCodeEditor();if(!n)return null;for(let i=0,s=t.length;i<s;i++){const r=t[i];if(r.getModifiedEditor().getId()===n.getId()||r.getOriginalEditor().getId()===n.getId())return r}return null}u(G9,"findFocusedDiffEditor");ie(W9);ie(U9);const Ite="editorWorkerService",co=Je(Ite),fh=Je("contextViewService"),Il=Je("contextMenuService");var AT=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class z9 extends U{constructor(e,t,n,i,s,r){super(),this._viewZoneId=e,this._marginDomNode=t,this.editor=n,this.diff=i,this._contextMenuService=s,this._clipboardService=r,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=b.lightBulb.classNames+" lightbulb-glyph",this._diffActions.style.position="absolute";const a=n.getOption(61),l=n.getModel().getEOL();this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${a}px`,this._diffActions.style.lineHeight=`${a}px`,this._marginDomNode.appendChild(this._diffActions);const c=[],d=i.modifiedEndLineNumber===0;c.push(new Yi("diff.clipboard.copyDeletedContent",d?i.originalEndLineNumber>i.modifiedStartLineNumber?m("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):m("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):i.originalEndLineNumber>i.modifiedStartLineNumber?m("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):m("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,()=>AT(this,void 0,void 0,function*(){const _=new L(i.originalStartLineNumber,1,i.originalEndLineNumber+1,1),v=i.originalModel.getValueInRange(_);yield this._clipboardService.writeText(v)})));let h=0,g;i.originalEndLineNumber>i.modifiedStartLineNumber&&(g=new Yi("diff.clipboard.copyDeletedLineContent",d?m("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",i.originalStartLineNumber):m("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",i.originalStartLineNumber),void 0,!0,()=>AT(this,void 0,void 0,function*(){const _=i.originalModel.getLineContent(i.originalStartLineNumber+h);if(_===""){const v=i.originalModel.getEndOfLineSequence();yield this._clipboardService.writeText(v===0?`
`:`\r
`)}else yield this._clipboardService.writeText(_)})),c.push(g)),n.getOption(83)||c.push(new Yi("diff.inline.revertChange",m("diff.inline.revertChange.label","Revert this change"),void 0,!0,()=>AT(this,void 0,void 0,function*(){const _=new L(i.originalStartLineNumber,1,i.originalEndLineNumber,i.originalModel.getLineMaxColumn(i.originalEndLineNumber)),v=i.originalModel.getValueInRange(_);if(i.modifiedEndLineNumber===0){const C=n.getModel().getLineMaxColumn(i.modifiedStartLineNumber);n.executeEdits("diffEditor",[{range:new L(i.modifiedStartLineNumber,C,i.modifiedStartLineNumber,C),text:l+v}])}else{const C=n.getModel().getLineMaxColumn(i.modifiedEndLineNumber);n.executeEdits("diffEditor",[{range:new L(i.modifiedStartLineNumber,1,i.modifiedEndLineNumber,C),text:v}])}})));const p=u((_,v)=>{this._contextMenuService.showContextMenu({getAnchor:()=>({x:_,y:v}),getActions:()=>(g&&(g.label=d?m("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",i.originalStartLineNumber+h):m("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",i.originalStartLineNumber+h)),c),autoSelectFirstItem:!0})},"showContextMenu");this._register(Dn(this._diffActions,"mousedown",_=>{const{top:v,height:C}=li(this._diffActions),w=Math.floor(a/3);_.preventDefault(),p(_.posx,v+C+w)})),this._register(n.onMouseMove(_=>{_.target.type===8||_.target.type===5?_.target.detail.viewZoneId===this._viewZoneId?(this.visibility=!0,h=this._updateLightBulbPosition(this._marginDomNode,_.event.browserEvent.y,a)):this.visibility=!1:this.visibility=!1})),this._register(n.onMouseDown(_=>{_.event.rightButton&&(_.target.type===8||_.target.type===5)&&_.target.detail.viewZoneId===this._viewZoneId&&(_.event.preventDefault(),h=this._updateLightBulbPosition(this._marginDomNode,_.event.browserEvent.y,a),p(_.event.posx,_.event.posy+a))}))}get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,e?this._diffActions.style.visibility="visible":this._diffActions.style.visibility="hidden")}_updateLightBulbPosition(e,t,n){const{top:i}=li(e),s=t-i,r=Math.floor(s/n),a=r*n;if(this._diffActions.style.top=`${a}px`,this.diff.viewLineCounts){let l=0;for(let c=0;c<this.diff.viewLineCounts.length;c++)if(l+=this.diff.viewLineCounts[c],r<l)return c}return r}}u(z9,"InlineDiffMargin");const Nl=Je("clipboardService"),K9=Je("progressService");class Jc{constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}}u(Jc,"Progress");Jc.None=Object.freeze({report(){}});const Qc=Je("editorProgressService");var Nte=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ya=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},IT;class HE{constructor(e,t){this._contextMenuService=e,this._clipboardService=t,this._zones=[],this._inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}getForeignViewZones(e){return e.filter(t=>!this._zonesMap[String(t.id)])}clean(e){this._zones.length>0&&e.changeViewZones(t=>{for(const n of this._zones)t.removeZone(n)}),this._zones=[],this._zonesMap={},e.changeDecorations(t=>{this._decorations=t.deltaDecorations(this._decorations,[])})}apply(e,t,n,i){const s=i?wl.capture(e):null;e.changeViewZones(r=>{var a;for(const l of this._zones)r.removeZone(l);for(const l of this._inlineDiffMargins)l.dispose();this._zones=[],this._zonesMap={},this._inlineDiffMargins=[];for(let l=0,c=n.zones.length;l<c;l++){const d=n.zones[l];d.suppressMouseDown=!0;const h=r.addZone(d);this._zones.push(h),this._zonesMap[String(h)]=!0,n.zones[l].diff&&d.marginDomNode&&(d.suppressMouseDown=!1,((a=n.zones[l].diff)===null||a===void 0?void 0:a.originalModel.getValueLength())!==0&&this._inlineDiffMargins.push(new z9(h,d.marginDomNode,e,n.zones[l].diff,this._contextMenuService,this._clipboardService)))}}),s?.restore(e),e.changeDecorations(r=>{this._decorations=r.deltaDecorations(this._decorations,n.decorations)}),t?.setZones(n.overviewZones)}}u(HE,"VisualEditorState");let Pte=0;const Rte=vn("diff-insert",b.add,m("diffInsertIcon","Line decoration for inserts in the diff editor.")),j9=vn("diff-remove",b.remove,m("diffRemoveIcon","Line decoration for removals in the diff editor.")),uR=(IT=window.trustedTypes)===null||IT===void 0?void 0:IT.createPolicy("diffEditorWidget",{createHTML:o=>o});let Fc=u(class ni extends U{constructor(e,t,n,i,s,r,a,l,c,d,h,g){super(),this._editorProgressService=g,this._onDidDispose=this._register(new R),this.onDidDispose=this._onDidDispose.event,this._onDidUpdateDiff=this._register(new R),this.onDidUpdateDiff=this._onDidUpdateDiff.event,this._onDidContentSizeChange=this._register(new R),this._lastOriginalWarning=null,this._lastModifiedWarning=null,this._editorWorkerService=s,this._codeEditorService=l,this._contextKeyService=this._register(r.createScoped(e)),this._instantiationService=a.createChild(new z_([De,this._contextKeyService])),this._contextKeyService.createKey("isInDiffEditor",!0),this._themeService=c,this._notificationService=d,this._id=++Pte,this._state=0,this._updatingDiffProgress=null,this._domElement=e,t=t||{},this._options=hR(t,{enableSplitViewResizing:!0,renderSideBySide:!0,renderMarginRevertIcon:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit"}),typeof t.isInEmbeddedEditor<"u"?this._contextKeyService.createKey("isInEmbeddedDiffEditor",t.isInEmbeddedEditor):this._contextKeyService.createKey("isInEmbeddedDiffEditor",!1),this._updateDecorationsRunner=this._register(new pt(()=>this._updateDecorations(),0)),this._containerDomElement=document.createElement("div"),this._containerDomElement.className=ni._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide),this._containerDomElement.style.position="relative",this._containerDomElement.style.height="100%",this._domElement.appendChild(this._containerDomElement),this._overviewViewportDomElement=et(document.createElement("div")),this._overviewViewportDomElement.setClassName("diffViewport"),this._overviewViewportDomElement.setPosition("absolute"),this._overviewDomElement=document.createElement("div"),this._overviewDomElement.className="diffOverview",this._overviewDomElement.style.position="absolute",this._overviewDomElement.appendChild(this._overviewViewportDomElement.domNode),this._register(Dn(this._overviewDomElement,le.POINTER_DOWN,p=>{this._modifiedEditor.delegateVerticalScrollbarPointerDown(p)})),this._options.renderOverviewRuler&&this._containerDomElement.appendChild(this._overviewDomElement),this._originalDomNode=document.createElement("div"),this._originalDomNode.className="editor original",this._originalDomNode.style.position="absolute",this._originalDomNode.style.height="100%",this._containerDomElement.appendChild(this._originalDomNode),this._modifiedDomNode=document.createElement("div"),this._modifiedDomNode.className="editor modified",this._modifiedDomNode.style.position="absolute",this._modifiedDomNode.style.height="100%",this._containerDomElement.appendChild(this._modifiedDomNode),this._beginUpdateDecorationsTimeout=-1,this._currentlyChangingViewZones=!1,this._diffComputationToken=0,this._originalEditorState=new HE(h,i),this._modifiedEditorState=new HE(h,i),this._isVisible=!0,this._isHandlingScrollEvent=!1,this._elementSizeObserver=this._register(new mA(this._containerDomElement,t.dimension)),this._register(this._elementSizeObserver.onDidChange(()=>this._onDidContainerSizeChanged())),t.automaticLayout&&this._elementSizeObserver.startObserving(),this._diffComputationResult=null,this._originalEditor=this._createLeftHandSideEditor(t,n.originalEditor||{}),this._modifiedEditor=this._createRightHandSideEditor(t,n.modifiedEditor||{}),this._originalOverviewRuler=null,this._modifiedOverviewRuler=null,this._reviewPane=a.createInstance(E1,this),this._containerDomElement.appendChild(this._reviewPane.domNode.domNode),this._containerDomElement.appendChild(this._reviewPane.shadow.domNode),this._containerDomElement.appendChild(this._reviewPane.actionBarContainer.domNode),this._options.renderSideBySide?this._setStrategy(new Kr(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new WE(this._createDataSource(),this._options.enableSplitViewResizing)),this._register(c.onDidColorThemeChange(p=>{this._strategy&&this._strategy.applyColors(p)&&this._updateDecorationsRunner.schedule(),this._containerDomElement.className=ni._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)}));const f=Zd.getDiffEditorContributions();for(const p of f)try{this._register(a.createInstance(p.ctor,this))}catch(_){Ie(_)}this._codeEditorService.addDiffEditor(this)}_setState(e){this._state!==e&&(this._state=e,this._updatingDiffProgress&&(this._updatingDiffProgress.done(),this._updatingDiffProgress=null),this._state===1&&(this._updatingDiffProgress=this._editorProgressService.show(!0,1e3)))}diffReviewNext(){this._reviewPane.next()}diffReviewPrev(){this._reviewPane.prev()}static _getClassName(e,t){let n="monaco-diff-editor monaco-editor-background ";return t&&(n+="side-by-side "),n+=l1(e.type),n}_disposeOverviewRulers(){this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose(),this._originalOverviewRuler=null),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose(),this._modifiedOverviewRuler=null)}_createOverviewRulers(){this._options.renderOverviewRuler&&(Nm(!this._originalOverviewRuler&&!this._modifiedOverviewRuler),this._originalEditor.hasModel()&&(this._originalOverviewRuler=this._originalEditor.createOverviewRuler("original diffOverviewRuler"),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this._modifiedEditor.createOverviewRuler("modified diffOverviewRuler"),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers())}_createLeftHandSideEditor(e,t){const n=this._createInnerEditor(this._instantiationService,this._originalDomNode,this._adjustOptionsForLeftHandSide(e),t);this._register(n.onDidScrollChange(s=>{this._isHandlingScrollEvent||!s.scrollTopChanged&&!s.scrollLeftChanged&&!s.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._modifiedEditor.setScrollPosition({scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(n.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(n.onDidChangeConfiguration(s=>{n.getModel()&&(s.hasChanged(46)&&this._updateDecorationsRunner.schedule(),s.hasChanged(134)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(n.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(n.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()}));const i=this._contextKeyService.createKey("isInDiffLeftEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>i.set(!0))),this._register(n.onDidBlurEditorWidget(()=>i.set(!1))),this._register(n.onDidContentSizeChange(s=>{const r=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+ni.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:r,contentHeightChanged:s.contentHeightChanged,contentWidthChanged:s.contentWidthChanged})})),n}_createRightHandSideEditor(e,t){const n=this._createInnerEditor(this._instantiationService,this._modifiedDomNode,this._adjustOptionsForRightHandSide(e),t);this._register(n.onDidScrollChange(s=>{this._isHandlingScrollEvent||!s.scrollTopChanged&&!s.scrollLeftChanged&&!s.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._originalEditor.setScrollPosition({scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(n.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(n.onDidChangeConfiguration(s=>{n.getModel()&&(s.hasChanged(46)&&this._updateDecorationsRunner.schedule(),s.hasChanged(134)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(n.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(n.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()})),this._register(n.onDidChangeModelOptions(s=>{s.tabSize&&this._updateDecorationsRunner.schedule()}));const i=this._contextKeyService.createKey("isInDiffRightEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>i.set(!0))),this._register(n.onDidBlurEditorWidget(()=>i.set(!1))),this._register(n.onDidContentSizeChange(s=>{const r=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+ni.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:r,contentHeightChanged:s.contentHeightChanged,contentWidthChanged:s.contentWidthChanged})})),this._register(n.onMouseDown(s=>{var r,a;if(!s.event.rightButton&&s.target.position&&(!((r=s.target.element)===null||r===void 0)&&r.className.includes("arrow-revert-change"))){const l=s.target.position.lineNumber,c=(a=this._diffComputationResult)===null||a===void 0?void 0:a.changes.find(d=>d.modifiedStartLineNumber===l-1||d.modifiedStartLineNumber===l);c&&this.revertChange(c),s.event.stopPropagation(),this._updateDecorations();return}})),n}revertChange(e){const t=this._modifiedEditor,n=this._originalEditor.getModel(),i=this._modifiedEditor.getModel();if(!n||!i||!t)return;const s=e.originalEndLineNumber>0?new L(e.originalStartLineNumber,1,e.originalEndLineNumber,n.getLineMaxColumn(e.originalEndLineNumber)):null,r=s?n.getValueInRange(s):null,a=e.modifiedEndLineNumber>0?new L(e.modifiedStartLineNumber,1,e.modifiedEndLineNumber,i.getLineMaxColumn(e.modifiedEndLineNumber)):null,l=i.getEOL();if(e.originalEndLineNumber===0&&a){let c=a;e.modifiedStartLineNumber>1?c=a.setStartPosition(e.modifiedStartLineNumber-1,i.getLineMaxColumn(e.modifiedStartLineNumber-1)):e.modifiedEndLineNumber<i.getLineCount()&&(c=a.setEndPosition(e.modifiedEndLineNumber+1,1)),t.executeEdits("diffEditor",[{range:c,text:""}])}else if(e.modifiedEndLineNumber===0&&r!==null){const c=e.modifiedStartLineNumber<i.getLineCount()?new H(e.modifiedStartLineNumber+1,1):new H(e.modifiedStartLineNumber,i.getLineMaxColumn(e.modifiedStartLineNumber));t.executeEdits("diffEditor",[{range:L.fromPositions(c,c),text:e.modifiedStartLineNumber<i.getLineCount()?r+l:l+r}])}else a&&r!==null&&t.executeEdits("diffEditor",[{range:a,text:r}])}_createInnerEditor(e,t,n,i){return e.createInstance(wf,t,n,i)}dispose(){this._codeEditorService.removeDiffEditor(this),this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._options.renderOverviewRuler&&this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this._originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this._modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),super.dispose()}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return C_.IDiffEditor}getLineChanges(){return this._diffComputationResult?this._diffComputationResult.changes:null}getOriginalEditor(){return this._originalEditor}getModifiedEditor(){return this._modifiedEditor}updateOptions(e){const t=hR(e,this._options),n=Vte(this._options,t);this._options=t;const i=n.ignoreTrimWhitespace||n.renderIndicators||n.renderMarginRevertIcon,s=this._isVisible&&(n.maxComputationTime||n.maxFileSize);i?this._beginUpdateDecorations():s&&this._beginUpdateDecorationsSoon(),this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(e)),this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(e)),this._strategy.setEnableSplitViewResizing(this._options.enableSplitViewResizing),n.renderSideBySide&&(this._options.renderSideBySide?this._setStrategy(new Kr(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new WE(this._createDataSource(),this._options.enableSplitViewResizing)),this._containerDomElement.className=ni._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)),n.renderOverviewRuler&&(this._options.renderOverviewRuler?this._containerDomElement.appendChild(this._overviewDomElement):this._containerDomElement.removeChild(this._overviewDomElement))}getModel(){return{original:this._originalEditor.getModel(),modified:this._modifiedEditor.getModel()}}setModel(e){if(e&&(!e.original||!e.modified))throw new Error(e.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this._disposeOverviewRulers(),this._originalEditor.setModel(e?e.original:null),this._modifiedEditor.setModel(e?e.modified:null),this._updateDecorationsRunner.cancel(),e&&(this._originalEditor.setScrollTop(0),this._modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,this._setState(0),e&&(this._createOverviewRulers(),this._beginUpdateDecorations()),this._layoutOverviewViewport()}getContainerDomNode(){return this._domElement}getVisibleColumnFromPosition(e){return this._modifiedEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._modifiedEditor.getPosition()}setPosition(e,t="api"){this._modifiedEditor.setPosition(e,t)}revealLine(e,t=0){this._modifiedEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._modifiedEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._modifiedEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._modifiedEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._modifiedEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._modifiedEditor.revealPositionNearTop(e,t)}getSelection(){return this._modifiedEditor.getSelection()}getSelections(){return this._modifiedEditor.getSelections()}setSelection(e,t="api"){this._modifiedEditor.setSelection(e,t)}setSelections(e,t="api"){this._modifiedEditor.setSelections(e,t)}revealLines(e,t,n=0){this._modifiedEditor.revealLines(e,t,n)}revealLinesInCenter(e,t,n=0){this._modifiedEditor.revealLinesInCenter(e,t,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._modifiedEditor.revealLinesInCenterIfOutsideViewport(e,t,n)}revealLinesNearTop(e,t,n=0){this._modifiedEditor.revealLinesNearTop(e,t,n)}revealRange(e,t=0,n=!1,i=!0){this._modifiedEditor.revealRange(e,t,n,i)}revealRangeInCenter(e,t=0){this._modifiedEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._modifiedEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._modifiedEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._modifiedEditor.getSupportedActions()}saveViewState(){const e=this._originalEditor.saveViewState(),t=this._modifiedEditor.saveViewState();return{original:e,modified:t}}restoreViewState(e){if(e&&e.original&&e.modified){const t=e;this._originalEditor.restoreViewState(t.original),this._modifiedEditor.restoreViewState(t.modified)}}layout(e){this._elementSizeObserver.observe(e)}focus(){this._modifiedEditor.focus()}hasTextFocus(){return this._originalEditor.hasTextFocus()||this._modifiedEditor.hasTextFocus()}trigger(e,t,n){this._modifiedEditor.trigger(e,t,n)}createDecorationsCollection(e){return this._modifiedEditor.createDecorationsCollection(e)}changeDecorations(e){return this._modifiedEditor.changeDecorations(e)}_onDidContainerSizeChanged(){this._doLayout()}_getReviewHeight(){return this._reviewPane.isVisible()?this._elementSizeObserver.getHeight():0}_layoutOverviewRulers(){if(!this._options.renderOverviewRuler||!this._originalOverviewRuler||!this._modifiedOverviewRuler)return;const e=this._elementSizeObserver.getHeight(),t=this._getReviewHeight(),n=ni.ENTIRE_DIFF_OVERVIEW_WIDTH-2*ni.ONE_OVERVIEW_WIDTH;this._modifiedEditor.getLayoutInfo()&&(this._originalOverviewRuler.setLayout({top:0,width:ni.ONE_OVERVIEW_WIDTH,right:n+ni.ONE_OVERVIEW_WIDTH,height:e-t}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:ni.ONE_OVERVIEW_WIDTH,height:e-t}))}_onViewZonesChanged(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()}_beginUpdateDecorationsSoon(){this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout(()=>this._beginUpdateDecorations(),ni.UPDATE_DIFF_DECORATIONS_DELAY)}static _equals(e,t){return!e&&!t?!0:!e||!t?!1:e.toString()===t.toString()}_beginUpdateDecorations(){this._beginUpdateDecorationsTimeout=-1;const e=this._originalEditor.getModel(),t=this._modifiedEditor.getModel();if(!e||!t)return;this._diffComputationToken++;const n=this._diffComputationToken,i=this._options.maxFileSize*1024*1024,s=u(r=>{const a=r.getValueLength();return i===0||a<=i},"canSyncModelForDiff");if(!s(e)||!s(t)){(!ni._equals(e.uri,this._lastOriginalWarning)||!ni._equals(t.uri,this._lastModifiedWarning))&&(this._lastOriginalWarning=e.uri,this._lastModifiedWarning=t.uri,this._notificationService.warn(m("diff.tooLarge","Cannot compare files because one file is too large.")));return}this._setState(1),this._editorWorkerService.computeDiff(e.uri,t.uri,this._options.ignoreTrimWhitespace,this._options.maxComputationTime).then(r=>{n===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=r,this._updateDecorationsRunner.schedule(),this._onDidUpdateDiff.fire())},r=>{n===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=null,this._updateDecorationsRunner.schedule())})}_cleanViewZonesAndDecorations(){this._originalEditorState.clean(this._originalEditor),this._modifiedEditorState.clean(this._modifiedEditor)}_updateDecorations(){if(!this._originalEditor.getModel()||!this._modifiedEditor.getModel())return;const e=this._diffComputationResult?this._diffComputationResult.changes:[],t=this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces()),n=this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces()),i=this._strategy.getEditorsDiffDecorations(e,this._options.ignoreTrimWhitespace,this._options.renderIndicators,this._options.renderMarginRevertIcon,t,n);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this._originalEditor,this._originalOverviewRuler,i.original,!1),this._modifiedEditorState.apply(this._modifiedEditor,this._modifiedOverviewRuler,i.modified,!0)}finally{this._currentlyChangingViewZones=!1}}_adjustOptionsForSubEditor(e){const t=Object.assign({},e);return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar=Object.assign({},t.scrollbar||{}),t.scrollbar.vertical="visible",t.folding=!1,t.codeLens=this._options.diffCodeLens,t.fixedOverflowWidgets=!0,t.minimap=Object.assign({},t.minimap||{}),t.minimap.enabled=!1,t}_adjustOptionsForLeftHandSide(e){const t=this._adjustOptionsForSubEditor(e);return this._options.renderSideBySide?t.wordWrapOverride1=this._options.diffWordWrap:(t.wordWrapOverride1="off",t.wordWrapOverride2="off"),e.originalAriaLabel&&(t.ariaLabel=e.originalAriaLabel),t.readOnly=!this._options.originalEditable,t.dropIntoEditor={enabled:!t.readOnly},t.extraEditorClassName="original-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}_adjustOptionsForRightHandSide(e){const t=this._adjustOptionsForSubEditor(e);return e.modifiedAriaLabel&&(t.ariaLabel=e.modifiedAriaLabel),t.wordWrapOverride1=this._options.diffWordWrap,t.revealHorizontalRightPadding=Sr.revealHorizontalRightPadding.defaultValue+ni.ENTIRE_DIFF_OVERVIEW_WIDTH,t.scrollbar.verticalHasArrows=!1,t.extraEditorClassName="modified-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}doLayout(){this._elementSizeObserver.observe(),this._doLayout()}_doLayout(){const e=this._elementSizeObserver.getWidth(),t=this._elementSizeObserver.getHeight(),n=this._getReviewHeight(),i=this._strategy.layout();this._originalDomNode.style.width=i+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=e-i+"px",this._modifiedDomNode.style.left=i+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.height=t-n+"px",this._overviewDomElement.style.width=ni.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=e-ni.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.setWidth(ni.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this._originalEditor.layout({width:i,height:t-n}),this._modifiedEditor.layout({width:e-i-(this._options.renderOverviewRuler?ni.ENTIRE_DIFF_OVERVIEW_WIDTH:0),height:t-n}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(t-n,e,n),this._layoutOverviewViewport()}_layoutOverviewViewport(){const e=this._computeOverviewViewport();e?(this._overviewViewportDomElement.setTop(e.top),this._overviewViewportDomElement.setHeight(e.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))}_computeOverviewViewport(){const e=this._modifiedEditor.getLayoutInfo();if(!e)return null;const t=this._modifiedEditor.getScrollTop(),n=this._modifiedEditor.getScrollHeight(),i=Math.max(0,e.height),s=Math.max(0,i-2*0),r=n>0?s/n:0,a=Math.max(0,Math.floor(e.height*r)),l=Math.floor(t*r);return{height:a,top:l}}_createDataSource(){return{getWidth:()=>this._elementSizeObserver.getWidth(),getHeight:()=>this._elementSizeObserver.getHeight()-this._getReviewHeight(),getOptions:()=>({renderOverviewRuler:this._options.renderOverviewRuler}),getContainerDomNode:()=>this._containerDomElement,relayoutEditors:()=>{this._doLayout()},getOriginalEditor:()=>this._originalEditor,getModifiedEditor:()=>this._modifiedEditor}}_setStrategy(e){this._strategy&&this._strategy.dispose(),this._strategy=e,e.applyColors(this._themeService.getColorTheme()),this._diffComputationResult&&this._updateDecorations(),this._doLayout()}_getLineChangeAtOrBeforeLineNumber(e,t){const n=this._diffComputationResult?this._diffComputationResult.changes:[];if(n.length===0||e<t(n[0]))return null;let i=0,s=n.length-1;for(;i<s;){const r=Math.floor((i+s)/2),a=t(n[r]),l=r+1<=s?t(n[r+1]):1073741824;e<a?s=r-1:e>=l?i=r+1:(i=r,s=r)}return n[i]}_getEquivalentLineForOriginalLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,l=>l.originalStartLineNumber);if(!t)return e;const n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),i=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),s=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,r=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-n;return a<=s?i+Math.min(a,r):i+r-s+a}_getEquivalentLineForModifiedLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,l=>l.modifiedStartLineNumber);if(!t)return e;const n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),i=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),s=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,r=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-i;return a<=r?n+Math.min(a,s):n+s-r+a}getDiffLineInformationForOriginal(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(e)}:null}getDiffLineInformationForModified(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(e)}:null}},"DiffEditorWidget");Fc.ONE_OVERVIEW_WIDTH=15;Fc.ENTIRE_DIFF_OVERVIEW_WIDTH=30;Fc.UPDATE_DIFF_DECORATIONS_DELAY=200;Fc=Nte([ya(3,Nl),ya(4,co),ya(5,De),ya(6,Ne),ya(7,dt),ya(8,wt),ya(9,gn),ya(10,Il),ya(11,Qc)],Fc);class fI extends U{constructor(e){super(),this._dataSource=e,this._insertColor=null,this._removeColor=null}applyColors(e){const t=e.getColor(VZ)||(e.getColor(sH)||Qx).transparent(2),n=e.getColor(HZ)||(e.getColor(oH)||eE).transparent(2),i=!t.equals(this._insertColor)||!n.equals(this._removeColor);return this._insertColor=t,this._removeColor=n,i}getEditorsDiffDecorations(e,t,n,i,s,r){r=r.sort((d,h)=>d.afterLineNumber-h.afterLineNumber),s=s.sort((d,h)=>d.afterLineNumber-h.afterLineNumber);const a=this._getViewZones(e,s,r,n),l=this._getOriginalEditorDecorations(a,e,t,n),c=this._getModifiedEditorDecorations(a,e,t,n,i);return{original:{decorations:l.decorations,overviewZones:l.overviewZones,zones:a.original},modified:{decorations:c.decorations,overviewZones:c.overviewZones,zones:a.modified}}}}u(fI,"DiffEditorWidgetStyle");class BE{constructor(e){this._source=e,this._index=-1,this.current=null,this.advance()}advance(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null}}u(BE,"ForeignViewZonesIterator");class lc{constructor(e,t,n,i,s){this._lineChanges=e,this._originalForeignVZ=t,this._modifiedForeignVZ=n,this._originalEditor=i,this._modifiedEditor=s}static _getViewLineCount(e,t,n){const i=e.getModel(),s=e._getViewModel();if(i&&s){const r=Ob(i,s,t,n);return r.endLineNumber-r.startLineNumber+1}return n-t+1}getViewZones(){const e=this._originalEditor.getOption(61),t=this._modifiedEditor.getOption(61),n=this._originalEditor.getOption(134).wrappingColumn!==-1,i=this._modifiedEditor.getOption(134).wrappingColumn!==-1,s=n||i,r=this._originalEditor.getModel(),a=this._originalEditor._getViewModel().coordinatesConverter,l=this._modifiedEditor._getViewModel().coordinatesConverter,c={original:[],modified:[]};let d=0,h=0,g=0,f=0,p=0,_=0;const v=u((k,T)=>k.afterLineNumber-T.afterLineNumber,"sortMyViewZones"),C=u((k,T)=>{if(T.domNode===null&&k.length>0){const x=k[k.length-1];if(x.afterLineNumber===T.afterLineNumber&&x.domNode===null){x.heightInLines+=T.heightInLines;return}}k.push(T)},"addAndCombineIfPossible"),w=new BE(this._modifiedForeignVZ),y=new BE(this._originalForeignVZ);let S=1,E=1;for(let k=0,T=this._lineChanges.length;k<=T;k++){const x=k<T?this._lineChanges[k]:null;x!==null?(g=x.originalStartLineNumber+(x.originalEndLineNumber>0?-1:0),f=x.modifiedStartLineNumber+(x.modifiedEndLineNumber>0?-1:0),h=x.originalEndLineNumber>0?lc._getViewLineCount(this._originalEditor,x.originalStartLineNumber,x.originalEndLineNumber):0,d=x.modifiedEndLineNumber>0?lc._getViewLineCount(this._modifiedEditor,x.modifiedStartLineNumber,x.modifiedEndLineNumber):0,p=Math.max(x.originalStartLineNumber,x.originalEndLineNumber),_=Math.max(x.modifiedStartLineNumber,x.modifiedEndLineNumber)):(g+=1e7+h,f+=1e7+d,p=g,_=f);let M=[],F=[];if(s){let j;x?x.originalEndLineNumber>0?j=x.originalStartLineNumber-S:j=x.modifiedStartLineNumber-E:j=r.getLineCount()-S+1;for(let ae=0;ae<j;ae++){const he=S+ae,Se=E+ae,Te=a.getModelLineViewLineCount(he),ke=l.getModelLineViewLineCount(Se);Te<ke?M.push({afterLineNumber:he,heightInLines:ke-Te,domNode:null,marginDomNode:null}):Te>ke&&F.push({afterLineNumber:Se,heightInLines:Te-ke,domNode:null,marginDomNode:null})}x&&(S=(x.originalEndLineNumber>0?x.originalEndLineNumber:x.originalStartLineNumber)+1,E=(x.modifiedEndLineNumber>0?x.modifiedEndLineNumber:x.modifiedStartLineNumber)+1)}for(;w.current&&w.current.afterLineNumber<=_;){let j;w.current.afterLineNumber<=f?j=g-f+w.current.afterLineNumber:j=p;let ae=null;x&&x.modifiedStartLineNumber<=w.current.afterLineNumber&&w.current.afterLineNumber<=x.modifiedEndLineNumber&&(ae=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),M.push({afterLineNumber:j,heightInLines:w.current.height/t,domNode:null,marginDomNode:ae}),w.advance()}for(;y.current&&y.current.afterLineNumber<=p;){let j;y.current.afterLineNumber<=g?j=f-g+y.current.afterLineNumber:j=_,F.push({afterLineNumber:j,heightInLines:y.current.height/e,domNode:null}),y.advance()}if(x!==null&&k1(x)){const j=this._produceOriginalFromDiff(x,h,d);j&&M.push(j)}if(x!==null&&M1(x)){const j=this._produceModifiedFromDiff(x,h,d);j&&F.push(j)}let V=0,G=0;for(M=M.sort(v),F=F.sort(v);V<M.length&&G<F.length;){const j=M[V],ae=F[G],he=j.afterLineNumber-g,Se=ae.afterLineNumber-f;he<Se?(C(c.original,j),V++):Se<he?(C(c.modified,ae),G++):j.shouldNotShrink?(C(c.original,j),V++):ae.shouldNotShrink?(C(c.modified,ae),G++):j.heightInLines>=ae.heightInLines?(j.heightInLines-=ae.heightInLines,G++):(ae.heightInLines-=j.heightInLines,V++)}for(;V<M.length;)C(c.original,M[V]),V++;for(;G<F.length;)C(c.modified,F[G]),G++}return{original:lc._ensureDomNodes(c.original),modified:lc._ensureDomNodes(c.modified)}}static _ensureDomNodes(e){return e.map(t=>(t.domNode||(t.domNode=Z9()),t))}}u(lc,"ViewZonesComputer");function Fa(o,e,t,n,i){return{range:new L(o,e,t,n),options:i}}u(Fa,"createDecoration");const Si={arrowRevertChange:Ae.register({description:"diff-editor-arrow-revert-change",glyphMarginClassName:"arrow-revert-change "+ct.asClassName(b.arrowRight)}),charDelete:Ae.register({description:"diff-editor-char-delete",className:"char-delete"}),charDeleteWholeLine:Ae.register({description:"diff-editor-char-delete-whole-line",className:"char-delete",isWholeLine:!0}),charInsert:Ae.register({description:"diff-editor-char-insert",className:"char-insert"}),charInsertWholeLine:Ae.register({description:"diff-editor-char-insert-whole-line",className:"char-insert",isWholeLine:!0}),lineInsert:Ae.register({description:"diff-editor-line-insert",className:"line-insert",marginClassName:"gutter-insert",isWholeLine:!0}),lineInsertWithSign:Ae.register({description:"diff-editor-line-insert-with-sign",className:"line-insert",linesDecorationsClassName:"insert-sign "+ct.asClassName(Rte),marginClassName:"gutter-insert",isWholeLine:!0}),lineDelete:Ae.register({description:"diff-editor-line-delete",className:"line-delete",marginClassName:"gutter-delete",isWholeLine:!0}),lineDeleteWithSign:Ae.register({description:"diff-editor-line-delete-with-sign",className:"line-delete",linesDecorationsClassName:"delete-sign "+ct.asClassName(j9),marginClassName:"gutter-delete",isWholeLine:!0}),lineDeleteMargin:Ae.register({description:"diff-editor-line-delete-margin",marginClassName:"gutter-delete"})};class Kr extends fI{constructor(e,t){super(e),this._disableSash=t===!1,this._sashRatio=null,this._sashPosition=null,this._startSashPosition=null,this._sash=this._register(new Yn(this._dataSource.getContainerDomNode(),this,{orientation:0})),this._disableSash&&(this._sash.state=0),this._sash.onDidStart(()=>this._onSashDragStart()),this._sash.onDidChange(n=>this._onSashDrag(n)),this._sash.onDidEnd(()=>this._onSashDragEnd()),this._sash.onDidReset(()=>this._onSashReset())}setEnableSplitViewResizing(e){const t=e===!1;this._disableSash!==t&&(this._disableSash=t,this._sash.state=this._disableSash?0:3)}layout(e=this._sashRatio){const n=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?Fc.ENTIRE_DIFF_OVERVIEW_WIDTH:0);let i=Math.floor((e||.5)*n);const s=Math.floor(.5*n);return i=this._disableSash?s:i||s,n>Kr.MINIMUM_EDITOR_WIDTH*2?(i<Kr.MINIMUM_EDITOR_WIDTH&&(i=Kr.MINIMUM_EDITOR_WIDTH),i>n-Kr.MINIMUM_EDITOR_WIDTH&&(i=n-Kr.MINIMUM_EDITOR_WIDTH)):i=s,this._sashPosition!==i&&(this._sashPosition=i),this._sash.layout(),this._sashPosition}_onSashDragStart(){this._startSashPosition=this._sashPosition}_onSashDrag(e){const n=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?Fc.ENTIRE_DIFF_OVERVIEW_WIDTH:0),i=this.layout((this._startSashPosition+(e.currentX-e.startX))/n);this._sashRatio=i/n,this._dataSource.relayoutEditors()}_onSashDragEnd(){this._sash.layout()}_onSashReset(){this._sashRatio=.5,this._dataSource.relayoutEditors(),this._sash.layout()}getVerticalSashTop(e){return 0}getVerticalSashLeft(e){return this._sashPosition}getVerticalSashHeight(e){return this._dataSource.getHeight()}_getViewZones(e,t,n){const i=this._dataSource.getOriginalEditor(),s=this._dataSource.getModifiedEditor();return new $9(e,t,n,i,s).getViewZones()}_getOriginalEditorDecorations(e,t,n,i){const s=this._dataSource.getOriginalEditor(),r=String(this._removeColor),a={decorations:[],overviewZones:[]},l=s.getModel(),c=s._getViewModel();for(const d of t)if(M1(d)){a.decorations.push({range:new L(d.originalStartLineNumber,1,d.originalEndLineNumber,1073741824),options:i?Si.lineDeleteWithSign:Si.lineDelete}),(!k1(d)||!d.charChanges)&&a.decorations.push(Fa(d.originalStartLineNumber,1,d.originalEndLineNumber,1073741824,Si.charDeleteWholeLine));const h=Ob(l,c,d.originalStartLineNumber,d.originalEndLineNumber);if(a.overviewZones.push(new mf(h.startLineNumber,h.endLineNumber,0,r)),d.charChanges){for(const g of d.charChanges)if(X9(g))if(n)for(let f=g.originalStartLineNumber;f<=g.originalEndLineNumber;f++){let p,_;f===g.originalStartLineNumber?p=g.originalStartColumn:p=l.getLineFirstNonWhitespaceColumn(f),f===g.originalEndLineNumber?_=g.originalEndColumn:_=l.getLineLastNonWhitespaceColumn(f),a.decorations.push(Fa(f,p,f,_,Si.charDelete))}else a.decorations.push(Fa(g.originalStartLineNumber,g.originalStartColumn,g.originalEndLineNumber,g.originalEndColumn,Si.charDelete))}}return a}_getModifiedEditorDecorations(e,t,n,i,s){const r=this._dataSource.getModifiedEditor(),a=String(this._insertColor),l={decorations:[],overviewZones:[]},c=r.getModel(),d=r._getViewModel();for(const h of t){if(s)if(h.modifiedEndLineNumber>0)l.decorations.push({range:new L(h.modifiedStartLineNumber,1,h.modifiedStartLineNumber,1),options:Si.arrowRevertChange});else{const g=e.modified.find(f=>f.afterLineNumber===h.modifiedStartLineNumber);g&&(g.marginDomNode=Ote())}if(k1(h)){l.decorations.push({range:new L(h.modifiedStartLineNumber,1,h.modifiedEndLineNumber,1073741824),options:i?Si.lineInsertWithSign:Si.lineInsert}),(!M1(h)||!h.charChanges)&&l.decorations.push(Fa(h.modifiedStartLineNumber,1,h.modifiedEndLineNumber,1073741824,Si.charInsertWholeLine));const g=Ob(c,d,h.modifiedStartLineNumber,h.modifiedEndLineNumber);if(l.overviewZones.push(new mf(g.startLineNumber,g.endLineNumber,0,a)),h.charChanges){for(const f of h.charChanges)if(Y9(f))if(n)for(let p=f.modifiedStartLineNumber;p<=f.modifiedEndLineNumber;p++){let _,v;p===f.modifiedStartLineNumber?_=f.modifiedStartColumn:_=c.getLineFirstNonWhitespaceColumn(p),p===f.modifiedEndLineNumber?v=f.modifiedEndColumn:v=c.getLineLastNonWhitespaceColumn(p),l.decorations.push(Fa(p,_,p,v,Si.charInsert))}else l.decorations.push(Fa(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn,Si.charInsert))}}}return l}}u(Kr,"DiffEditorWidgetSideBySide");Kr.MINIMUM_EDITOR_WIDTH=100;class $9 extends lc{constructor(e,t,n,i,s){super(e,t,n,i,s)}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){return null}_produceOriginalFromDiff(e,t,n){return n>t?{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n-t,domNode:null}:null}_produceModifiedFromDiff(e,t,n){return t>n?{afterLineNumber:Math.max(e.modifiedStartLineNumber,e.modifiedEndLineNumber),heightInLines:t-n,domNode:null}:null}}u($9,"SideBySideViewZonesComputer");class WE extends fI{constructor(e,t){super(e),this._decorationsLeft=e.getOriginalEditor().getLayoutInfo().decorationsLeft,this._register(e.getOriginalEditor().onDidLayoutChange(n=>{this._decorationsLeft!==n.decorationsLeft&&(this._decorationsLeft=n.decorationsLeft,e.relayoutEditors())}))}setEnableSplitViewResizing(e){}_getViewZones(e,t,n,i){const s=this._dataSource.getOriginalEditor(),r=this._dataSource.getModifiedEditor();return new q9(e,t,n,s,r,i).getViewZones()}_getOriginalEditorDecorations(e,t,n,i){const s=String(this._removeColor),r={decorations:[],overviewZones:[]},a=this._dataSource.getOriginalEditor(),l=a.getModel(),c=a._getViewModel();let d=0;for(const h of t)if(M1(h)){for(r.decorations.push({range:new L(h.originalStartLineNumber,1,h.originalEndLineNumber,1073741824),options:Si.lineDeleteMargin});d<e.modified.length;){const p=e.modified[d];if(p.diff&&p.diff.originalStartLineNumber>=h.originalStartLineNumber)break;d++}let g=0;if(d<e.modified.length){const p=e.modified[d];p.diff&&p.diff.originalStartLineNumber===h.originalStartLineNumber&&p.diff.originalEndLineNumber===h.originalEndLineNumber&&p.diff.modifiedStartLineNumber===h.modifiedStartLineNumber&&p.diff.modifiedEndLineNumber===h.modifiedEndLineNumber&&(g=p.heightInLines)}const f=Ob(l,c,h.originalStartLineNumber,h.originalEndLineNumber);r.overviewZones.push(new mf(f.startLineNumber,f.endLineNumber,g,s))}return r}_getModifiedEditorDecorations(e,t,n,i,s){const r=this._dataSource.getModifiedEditor(),a=String(this._insertColor),l={decorations:[],overviewZones:[]},c=r.getModel(),d=r._getViewModel();for(const h of t)if(k1(h)){l.decorations.push({range:new L(h.modifiedStartLineNumber,1,h.modifiedEndLineNumber,1073741824),options:i?Si.lineInsertWithSign:Si.lineInsert});const g=Ob(c,d,h.modifiedStartLineNumber,h.modifiedEndLineNumber);if(l.overviewZones.push(new mf(g.startLineNumber,g.endLineNumber,0,a)),h.charChanges){for(const f of h.charChanges)if(Y9(f))if(n)for(let p=f.modifiedStartLineNumber;p<=f.modifiedEndLineNumber;p++){let _,v;p===f.modifiedStartLineNumber?_=f.modifiedStartColumn:_=c.getLineFirstNonWhitespaceColumn(p),p===f.modifiedEndLineNumber?v=f.modifiedEndColumn:v=c.getLineLastNonWhitespaceColumn(p),l.decorations.push(Fa(p,_,p,v,Si.charInsert))}else l.decorations.push(Fa(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn,Si.charInsert))}else l.decorations.push(Fa(h.modifiedStartLineNumber,1,h.modifiedEndLineNumber,1073741824,Si.charInsertWholeLine))}return l}layout(){return Math.max(5,this._decorationsLeft)}}u(WE,"DiffEditorWidgetInline");class q9 extends lc{constructor(e,t,n,i,s,r){super(e,t,n,i,s),this._originalModel=i.getModel(),this._renderIndicators=r,this._pendingLineChange=[],this._pendingViewZones=[],this._lineBreaksComputer=this._modifiedEditor._getViewModel().createLineBreaksComputer()}getViewZones(){const e=super.getViewZones();return this._finalize(e),e}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){const e=document.createElement("div");return e.className="inline-added-margin-view-zone",e}_produceOriginalFromDiff(e,t,n){const i=document.createElement("div");return i.className="inline-added-margin-view-zone",{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n,domNode:document.createElement("div"),marginDomNode:i}}_produceModifiedFromDiff(e,t,n){const i=document.createElement("div");i.className=`view-lines line-delete ${Qd}`;const s=document.createElement("div");s.className="inline-deleted-margin-view-zone";const r={shouldNotShrink:!0,afterLineNumber:e.modifiedEndLineNumber===0?e.modifiedStartLineNumber:e.modifiedStartLineNumber-1,heightInLines:t,minWidthInPx:0,domNode:i,marginDomNode:s,diff:{originalStartLineNumber:e.originalStartLineNumber,originalEndLineNumber:e.originalEndLineNumber,modifiedStartLineNumber:e.modifiedStartLineNumber,modifiedEndLineNumber:e.modifiedEndLineNumber,originalModel:this._originalModel,viewLineCounts:null}};for(let a=e.originalStartLineNumber;a<=e.originalEndLineNumber;a++)this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(a),null,null);return this._pendingLineChange.push(e),this._pendingViewZones.push(r),r}_finalize(e){const t=this._modifiedEditor.getOptions(),n=this._modifiedEditor.getModel().getOptions().tabSize,i=t.get(46),s=t.get(29),r=i.typicalHalfwidthCharacterWidth,a=t.get(95),l=this._originalModel.mightContainNonBasicASCII(),c=this._originalModel.mightContainRTL(),d=t.get(61),g=t.get(133).decorationsWidth,f=t.get(107),p=t.get(90),_=t.get(85),v=t.get(47),C=this._lineBreaksComputer.finalize();let w=0;for(let y=0;y<this._pendingLineChange.length;y++){const S=this._pendingLineChange[y],E=this._pendingViewZones[y],k=E.domNode;di(k,i);const T=E.marginDomNode;di(T,i);const x=[];if(S.charChanges)for(const Se of S.charChanges)X9(Se)&&x.push(new xg(new L(Se.originalStartLineNumber,Se.originalStartColumn,Se.originalEndLineNumber,Se.originalEndColumn),"char-delete",0));const M=x.length>0,F=Lc(1e4);let V=0,G=0,j=null;for(let Se=S.originalStartLineNumber;Se<=S.originalEndLineNumber;Se++){const Te=Se-S.originalStartLineNumber,ke=this._originalModel.tokenization.getLineTokens(Se),Ue=ke.getLineContent(),Rt=C[w++],Tt=ji.filter(x,Se,1,Ue.length+1);if(Rt){let Ce=0;for(const It of Rt.breakOffsets){const Bn=ke.sliceAndInflate(Ce,It,0),Ni=Ue.substring(Ce,It);V=Math.max(V,this._renderOriginalLine(G++,Ni,Bn,ji.extractWrapped(Tt,Ce,It),M,l,c,i,s,d,g,f,p,_,v,n,F,T)),Ce=It}for(j||(j=[]);j.length<Te;)j[j.length]=1;j[Te]=Rt.breakOffsets.length,E.heightInLines+=Rt.breakOffsets.length-1;const _e=document.createElement("div");_e.className="gutter-delete",e.original.push({afterLineNumber:Se,afterColumn:0,heightInLines:Rt.breakOffsets.length-1,domNode:Z9(),marginDomNode:_e})}else V=Math.max(V,this._renderOriginalLine(G++,Ue,ke,Tt,M,l,c,i,s,d,g,f,p,_,v,n,F,T))}V+=a;const ae=F.build(),he=uR?uR.createHTML(ae):ae;if(k.innerHTML=he,E.minWidthInPx=V*r,j){const Se=S.originalEndLineNumber-S.originalStartLineNumber;for(;j.length<=Se;)j[j.length]=1}E.diff.viewLineCounts=j}e.original.sort((y,S)=>y.afterLineNumber-S.afterLineNumber)}_renderOriginalLine(e,t,n,i,s,r,a,l,c,d,h,g,f,p,_,v,C,w){C.appendASCIIString('<div class="view-line'),s||C.appendASCIIString(" char-delete"),C.appendASCIIString('" style="top:'),C.appendASCIIString(String(e*d)),C.appendASCIIString('px;width:1000000px;">');const y=as.isBasicASCII(t,r),S=as.containsRTL(t,y,a),E=L_(new Ml(l.isMonospace&&!c,l.canUseHalfwidthRightwardsArrow,t,!1,y,S,0,n,i,v,0,l.spaceWidth,l.middotWidth,l.wsmiddotWidth,g,f,p,_!==is.OFF,null),C);if(C.appendASCIIString("</div>"),this._renderIndicators){const k=document.createElement("div");k.className=`delete-sign ${ct.asClassName(j9)}`,k.setAttribute("style",`position:absolute;top:${e*d}px;width:${h}px;height:${d}px;right:0;`),w.appendChild(k)}return E.characterMapping.getHorizontalOffset(E.characterMapping.length)}}u(q9,"InlineViewZonesComputer");function Fte(o,e){return Xn(o,e,["off","on","inherit"])}u(Fte,"validateDiffWordWrap");function k1(o){return o.modifiedEndLineNumber>0}u(k1,"isChangeOrInsert");function M1(o){return o.originalEndLineNumber>0}u(M1,"isChangeOrDelete");function Y9(o){return o.modifiedStartLineNumber===o.modifiedEndLineNumber?o.modifiedEndColumn-o.modifiedStartColumn>0:o.modifiedEndLineNumber-o.modifiedStartLineNumber>0}u(Y9,"isCharChangeOrInsert");function X9(o){return o.originalStartLineNumber===o.originalEndLineNumber?o.originalEndColumn-o.originalStartColumn>0:o.originalEndLineNumber-o.originalStartLineNumber>0}u(X9,"isCharChangeOrDelete");function Z9(){const o=document.createElement("div");return o.className="diagonal-fill",o}u(Z9,"createFakeLinesDiv");function Ote(){const o=document.createElement("div");return o.className="arrow-revert-change "+ct.asClassName(b.arrowRight),ee("div",{},o)}u(Ote,"createViewZoneMarginArrow");function Ob(o,e,t,n){const i=o.getLineCount();return t=Math.min(i,Math.max(1,t)),n=Math.min(i,Math.max(1,n)),e.coordinatesConverter.convertModelRangeToViewRange(new L(t,o.getLineMinColumn(t),n,o.getLineMaxColumn(n)))}u(Ob,"getViewRange");function hR(o,e){return{enableSplitViewResizing:ye(o.enableSplitViewResizing,e.enableSplitViewResizing),renderSideBySide:ye(o.renderSideBySide,e.renderSideBySide),renderMarginRevertIcon:ye(o.renderMarginRevertIcon,e.renderMarginRevertIcon),maxComputationTime:LL(o.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:LL(o.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:ye(o.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:ye(o.renderIndicators,e.renderIndicators),originalEditable:ye(o.originalEditable,e.originalEditable),diffCodeLens:ye(o.diffCodeLens,e.diffCodeLens),renderOverviewRuler:ye(o.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:Fte(o.diffWordWrap,e.diffWordWrap)}}u(hR,"validateDiffEditorOptions");function Vte(o,e){return{enableSplitViewResizing:o.enableSplitViewResizing!==e.enableSplitViewResizing,renderSideBySide:o.renderSideBySide!==e.renderSideBySide,renderMarginRevertIcon:o.renderMarginRevertIcon!==e.renderMarginRevertIcon,maxComputationTime:o.maxComputationTime!==e.maxComputationTime,maxFileSize:o.maxFileSize!==e.maxFileSize,ignoreTrimWhitespace:o.ignoreTrimWhitespace!==e.ignoreTrimWhitespace,renderIndicators:o.renderIndicators!==e.renderIndicators,originalEditable:o.originalEditable!==e.originalEditable,diffCodeLens:o.diffCodeLens!==e.diffCodeLens,renderOverviewRuler:o.renderOverviewRuler!==e.renderOverviewRuler,diffWordWrap:o.diffWordWrap!==e.diffWordWrap}}u(Vte,"changedDiffEditorOptions");At((o,e)=>{const t=o.getColor(sH);t&&e.addRule(`.monaco-editor .char-insert, .monaco-diff-editor .char-insert { background-color: ${t}; }`);const n=o.getColor(PZ)||t;n&&e.addRule(`.monaco-editor .line-insert, .monaco-diff-editor .line-insert { background-color: ${n}; }`);const i=o.getColor(FZ)||n;i&&(e.addRule(`.monaco-editor .inline-added-margin-view-zone { background-color: ${i}; }`),e.addRule(`.monaco-editor .gutter-insert, .monaco-diff-editor .gutter-insert { background-color: ${i}; }`));const s=o.getColor(oH);s&&e.addRule(`.monaco-editor .char-delete, .monaco-diff-editor .char-delete { background-color: ${s}; }`);const r=o.getColor(RZ)||s;r&&e.addRule(`.monaco-editor .line-delete, .monaco-diff-editor .line-delete { background-color: ${r}; }`);const a=o.getColor(OZ)||r;a&&(e.addRule(`.monaco-editor .inline-deleted-margin-view-zone { background-color: ${a}; }`),e.addRule(`.monaco-editor .gutter-delete, .monaco-diff-editor .gutter-delete { background-color: ${a}; }`));const l=o.getColor(BZ);l&&e.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px ${ui(o.type)?"dashed":"solid"} ${l}; }`);const c=o.getColor(WZ);c&&e.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px ${ui(o.type)?"dashed":"solid"} ${c}; }`);const d=o.getColor(ip);d&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px ${d}; }`);const h=o.getColor(UZ);h&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid ${h}; }`);const g=o.getColor(Hd);g&&e.addRule(`
			.monaco-diff-editor .diffViewport {
				background: ${g};
			}
		`);const f=o.getColor(Bd);f&&e.addRule(`
			.monaco-diff-editor .diffViewport:hover {
				background: ${f};
			}
		`);const p=o.getColor(Wd);p&&e.addRule(`
			.monaco-diff-editor .diffViewport:active {
				background: ${p};
			}
		`);const _=o.getColor(GZ);e.addRule(`
	.monaco-editor .diagonal-fill {
		background-image: linear-gradient(
			-45deg,
			${_} 12.5%,
			#0000 12.5%, #0000 50%,
			${_} 50%, ${_} 62.5%,
			#0000 62.5%, #0000 100%
		);
		background-size: 8px 8px;
	}
	`)});var Hte=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Bte=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Wte=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let UE=u(class extends U{constructor(e){super(),this._themeService=e,this._onCodeEditorAdd=this._register(new R),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new R),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onDiffEditorAdd=this._register(new R),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new R),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new vi,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}removeDiffEditor(e){delete this._diffEditors[e.getId()]&&this._onDiffEditorRemove.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const n of t){if(n.hasTextFocus())return n;n.hasWidgetFocus()&&(e=n)}return e}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(n=>n.removeDecorationsByType(e))))}setModelProperty(e,t,n){const i=e.toString();let s;this._modelProperties.has(i)?s=this._modelProperties.get(i):(s=new Map,this._modelProperties.set(i,s)),s.set(t,n)}getModelProperty(e,t){const n=e.toString();if(this._modelProperties.has(n))return this._modelProperties.get(n).get(t)}openCodeEditor(e,t,n){return Wte(this,void 0,void 0,function*(){for(const i of this._codeEditorOpenHandlers){const s=yield i(e,t,n);if(s!==null)return s}return null})}registerCodeEditorOpenHandler(e){const t=this._codeEditorOpenHandlers.unshift(e);return He(t)}},"AbstractCodeEditorService");UE=Hte([Bte(0,wt)],UE);var Ute=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},gR=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Gte=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let D1=u(class extends UE{constructor(e,t){super(t),this.onCodeEditorAdd(()=>this._checkContextKey()),this.onCodeEditorRemove(()=>this._checkContextKey()),this._editorIsOpen=e.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this.registerCodeEditorOpenHandler((n,i,s)=>Gte(this,void 0,void 0,function*(){return i?this.doOpenEditor(i,n):null}))}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const s=t.resource.scheme;if(s===Pe.http||s===Pe.https)return FV(t.resource.toString()),e}return null}const i=t.options?t.options.selection:null;if(i)if(typeof i.endLineNumber=="number"&&typeof i.endColumn=="number")e.setSelection(i),e.revealRangeInCenter(i,1);else{const s={lineNumber:i.startLineNumber,column:i.startColumn};e.setPosition(s),e.revealPositionInCenter(s,1)}return e}findModel(e,t){const n=e.getModel();return n&&n.uri.toString()!==t.toString()?null:n}},"StandaloneCodeEditorService");D1=Ute([gR(0,De),gR(1,wt)],D1);nt(dt,D1);const up=Je("layoutService");var J9=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Q9=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let A1=u(class{constructor(e){this._codeEditorService=e,this.onDidLayout=fe.None,this.offset={top:0,quickPickTop:0}}get dimension(){return this._dimension||(this._dimension=Xw(window.document.body)),this._dimension}get hasContainer(){return!1}get container(){throw new Error("ILayoutService.container is not available in the standalone editor!")}focus(){var e;(e=this._codeEditorService.getFocusedCodeEditor())===null||e===void 0||e.focus()}},"StandaloneLayoutService");A1=J9([Q9(0,dt)],A1);let GE=u(class extends A1{constructor(e,t){super(t),this._container=e}get hasContainer(){return!1}get container(){return this._container}},"EditorScopedLayoutService");GE=J9([Q9(1,dt)],GE);nt(up,A1);const j_=Je("dialogService");var zte=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},fR=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},uC=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};function hC(o){return o.scheme===Pe.file?o.fsPath:o.path}u(hC,"getResourceLabel");let e8=0;class Cm{constructor(e,t,n,i,s,r,a){this.id=++e8,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=n,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=i,this.groupOrder=s,this.sourceId=r,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}u(Cm,"ResourceStackElement");class zE{constructor(e,t){this.resourceLabel=e,this.reason=t}}u(zE,"ResourceReasonPair");class KE{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,i]of this.elements)(i.reason===0?e:t).push(i.resourceLabel);const n=[];return e.length>0&&n.push(m({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&n.push(m({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),n.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}u(KE,"RemovedResources");class t8{constructor(e,t,n,i,s,r,a){this.id=++e8,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=n,this.groupId=i,this.groupOrder=s,this.sourceId=r,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,n){this.removedResources||(this.removedResources=new KE),this.removedResources.has(t)||this.removedResources.set(t,new zE(e,n))}setValid(e,t,n){n?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new KE),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new zE(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}u(t8,"WorkspaceStackElement");class pI{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){const e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const n of this._past)t(n.actual)&&this._setElementValidFlag(n,e);for(const n of this._future)t(n.actual)&&this._setElementValidFlag(n,e)}pushElement(e){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let n=0,i=this._past.length;n<i;n++)t.push(this._past[n].id);for(let n=this._future.length-1;n>=0;n--)t.push(this._future[n].id);return new nI(e,t)}restoreSnapshot(e){const t=e.elements.length;let n=!0,i=0,s=-1;for(let a=0,l=this._past.length;a<l;a++,i++){const c=this._past[a];n&&(i>=t||c.id!==e.elements[i])&&(n=!1,s=0),!n&&c.type===1&&c.removeResource(this.resourceLabel,this.strResource,0)}let r=-1;for(let a=this._future.length-1;a>=0;a--,i++){const l=this._future[a];n&&(i>=t||l.id!==e.elements[i])&&(n=!1,r=a),!n&&l.type===1&&l.removeResource(this.resourceLabel,this.strResource,0)}s!==-1&&(this._past=this._past.slice(0,s)),r!==-1&&(this._future=this._future.slice(r+1)),this.versionId++}getElements(){const e=[],t=[];for(const n of this._past)e.push(n.actual);for(const n of this._future)t.push(n.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let n=this._past.length-1;n>=0;n--)if(this._past[n]===e){t.has(this.strResource)?this._past[n]=t.get(this.strResource):this._past.splice(n,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let n=this._future.length-1;n>=0;n--)if(this._future[n]===e){t.has(this.strResource)?this._future[n]=t.get(this.strResource):this._future.splice(n,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}u(pI,"ResourceEditStack");class l0{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,n=this.editStacks.length;t<n;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}u(l0,"EditStackSnapshot");const n8=new pI("","");n8.locked=!0;let jE=u(class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);const t=[];for(const n of this._editStacks)t.push(n[1].toString());console.log(t.join(`
`))}pushElement(e,t=Au.None,n=Zo.None){if(e.type===0){const i=hC(e.resource),s=this.getUriComparisonKey(e.resource);this._pushElement(new Cm(e,i,s,t.id,t.nextOrder(),n.id,n.nextOrder()))}else{const i=new Set,s=[],r=[];for(const a of e.resources){const l=hC(a),c=this.getUriComparisonKey(a);i.has(c)||(i.add(c),s.push(l),r.push(c))}s.length===1?this._pushElement(new Cm(e,s[0],r[0],t.id,t.nextOrder(),n.id,n.nextOrder())):this._pushElement(new t8(e,s,r,t.id,t.nextOrder(),n.id,n.nextOrder()))}}_pushElement(e){for(let t=0,n=e.strResources.length;t<n;t++){const i=e.resourceLabels[t],s=e.strResources[t];let r;this._editStacks.has(s)?r=this._editStacks.get(s):(r=new pI(i,s),this._editStacks.set(s,r)),r.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const n=this._editStacks.get(t);if(n.hasFutureElements())return null;const i=n.getClosestPastElement();return i?i.actual:null}return null}_splitPastWorkspaceElement(e,t){const n=e.actual.split(),i=new Map;for(const s of n){const r=hC(s.resource),a=this.getUriComparisonKey(s.resource),l=new Cm(s,r,a,0,0,0,0);i.set(l.strResource,l)}for(const s of e.strResources){if(t&&t.has(s))continue;this._editStacks.get(s).splitPastWorkspaceElement(e,i)}}_splitFutureWorkspaceElement(e,t){const n=e.actual.split(),i=new Map;for(const s of n){const r=hC(s.resource),a=this.getUriComparisonKey(s.resource),l=new Cm(s,r,a,0,0,0,0);i.set(l.strResource,l)}for(const s of e.strResources){if(t&&t.has(s))continue;this._editStacks.get(s).splitFutureWorkspaceElement(e,i)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,n){const i=this.getUriComparisonKey(e);this._editStacks.has(i)&&this._editStacks.get(i).setElementsValidFlag(t,n)}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new nI(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const n=this._editStacks.get(t);n.restoreSnapshot(e),!n.hasPastElements()&&!n.hasFutureElements()&&(n.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[i,s]of this._editStacks){const r=s.getClosestPastElement();r&&r.sourceId===e&&(!t||r.sourceOrder>t.sourceOrder)&&(t=r,n=i)}return[t,n]}canUndo(e){if(e instanceof Zo){const[,n]=this._findClosestUndoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){Ie(e);for(const n of t.strResources)this.removeElements(n);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,n,i,s){const r=this._acquireLocks(n);let a;try{a=t()}catch(l){return r(),i.dispose(),this._onError(l,e)}return a?a.then(()=>(r(),i.dispose(),s()),l=>(r(),i.dispose(),this._onError(l,e))):(r(),i.dispose(),s())}_invokeWorkspacePrepare(e){return uC(this,void 0,void 0,function*(){if(typeof e.actual.prepareUndoRedo>"u")return U.None;const t=e.actual.prepareUndoRedo();return typeof t>"u"?U.None:t})}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo>"u")return t(U.None);const n=e.actual.prepareUndoRedo();return n?RD(n)?t(n):n.then(i=>t(i)):t(U.None)}_getAffectedEditStacks(e){const t=[];for(const n of e.strResources)t.push(this._editStacks.get(n)||n8);return new l0(t)}_tryToSplitAndUndo(e,t,n,i){if(t.canSplit())return this._splitPastWorkspaceElement(t,n),this._notificationService.warn(i),new wm(this._undo(e,0,!0));for(const s of t.strResources)this.removeElements(s);return this._notificationService.warn(i),new wm}_checkWorkspaceUndo(e,t,n,i){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,m({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(i&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,m({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const s=[];for(const a of n.editStacks)a.getClosestPastElement()!==t&&s.push(a.resourceLabel);if(s.length>0)return this._tryToSplitAndUndo(e,t,null,m({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));const r=[];for(const a of n.editStacks)a.locked&&r.push(a.resourceLabel);return r.length>0?this._tryToSplitAndUndo(e,t,null,m({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,r.join(", "))):n.isValid()?null:this._tryToSplitAndUndo(e,t,null,m({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,n){const i=this._getAffectedEditStacks(t),s=this._checkWorkspaceUndo(e,t,i,!1);return s?s.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,i,n)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const n=t.getClosestPastElement();if(n){if(n===e){const i=t.getSecondClosestPastElement();if(i&&i.groupId===e.groupId)return!0}if(n.groupId===e.groupId)return!0}}return!1}_confirmAndExecuteWorkspaceUndo(e,t,n,i){return uC(this,void 0,void 0,function*(){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){const a=yield this._dialogService.show(Bt.Info,m("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),[m({key:"ok",comment:["{0} denotes a number that is > 1"]},"Undo in {0} Files",n.editStacks.length),m("nok","Undo this File"),m("cancel","Cancel")],{cancelId:2});if(a.choice===2)return;if(a.choice===1)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const l=this._checkWorkspaceUndo(e,t,n,!1);if(l)return l.returnValue;i=!0}let s;try{s=yield this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const r=this._checkWorkspaceUndo(e,t,n,!0);if(r)return s.dispose(),r.returnValue;for(const a of n.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),n,s,()=>this._continueUndoInGroup(t.groupId,i))})}_resourceUndo(e,t,n){if(!t.isValid){e.flushAllElements();return}if(e.locked){const i=m({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(i);return}return this._invokeResourcePrepare(t,i=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new l0([e]),i,()=>this._continueUndoInGroup(t.groupId,n))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[i,s]of this._editStacks){const r=s.getClosestPastElement();r&&r.groupId===e&&(!t||r.groupOrder>t.groupOrder)&&(t=r,n=i)}return[t,n]}_continueUndoInGroup(e,t){if(!e)return;const[,n]=this._findClosestUndoElementInGroup(e);if(n)return this._undo(n,0,t)}undo(e){if(e instanceof Zo){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,n){if(!this._editStacks.has(e))return;const i=this._editStacks.get(e),s=i.getClosestPastElement();if(!s)return;if(s.groupId){const[a,l]=this._findClosestUndoElementInGroup(s.groupId);if(s!==a&&l)return this._undo(l,t,n)}if((s.sourceId!==t||s.confirmBeforeUndo)&&!n)return this._confirmAndContinueUndo(e,t,s);try{return s.type===1?this._workspaceUndo(e,s,n):this._resourceUndo(i,s,n)}finally{}}_confirmAndContinueUndo(e,t,n){return uC(this,void 0,void 0,function*(){if((yield this._dialogService.show(Bt.Info,m("confirmDifferentSource","Would you like to undo '{0}'?",n.label),[m("confirmDifferentSource.yes","Yes"),m("confirmDifferentSource.no","No")],{cancelId:1})).choice!==1)return this._undo(e,t,!0)})}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[i,s]of this._editStacks){const r=s.getClosestFutureElement();r&&r.sourceId===e&&(!t||r.sourceOrder<t.sourceOrder)&&(t=r,n=i)}return[t,n]}canRedo(e){if(e instanceof Zo){const[,n]=this._findClosestRedoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,n,i){if(t.canSplit())return this._splitFutureWorkspaceElement(t,n),this._notificationService.warn(i),new wm(this._redo(e));for(const s of t.strResources)this.removeElements(s);return this._notificationService.warn(i),new wm}_checkWorkspaceRedo(e,t,n,i){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,m({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(i&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,m({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const s=[];for(const a of n.editStacks)a.getClosestFutureElement()!==t&&s.push(a.resourceLabel);if(s.length>0)return this._tryToSplitAndRedo(e,t,null,m({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));const r=[];for(const a of n.editStacks)a.locked&&r.push(a.resourceLabel);return r.length>0?this._tryToSplitAndRedo(e,t,null,m({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,r.join(", "))):n.isValid()?null:this._tryToSplitAndRedo(e,t,null,m({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const n=this._getAffectedEditStacks(t),i=this._checkWorkspaceRedo(e,t,n,!1);return i?i.returnValue:this._executeWorkspaceRedo(e,t,n)}_executeWorkspaceRedo(e,t,n){return uC(this,void 0,void 0,function*(){let i;try{i=yield this._invokeWorkspacePrepare(t)}catch(r){return this._onError(r,t)}const s=this._checkWorkspaceRedo(e,t,n,!0);if(s)return i.dispose(),s.returnValue;for(const r of n.editStacks)r.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),n,i,()=>this._continueRedoInGroup(t.groupId))})}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const n=m({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(n);return}return this._invokeResourcePrepare(t,n=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new l0([e]),n,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[i,s]of this._editStacks){const r=s.getClosestFutureElement();r&&r.groupId===e&&(!t||r.groupOrder<t.groupOrder)&&(t=r,n=i)}return[t,n]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof Zo){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),n=t.getClosestFutureElement();if(n){if(n.groupId){const[i,s]=this._findClosestRedoElementInGroup(n.groupId);if(n!==i&&s)return this._redo(s)}try{return n.type===1?this._workspaceRedo(e,n):this._resourceRedo(t,n)}finally{}}}},"UndoRedoService");jE=zte([fR(0,j_),fR(1,gn)],jE);class wm{constructor(e){this.returnValue=e}}u(wm,"WorkspaceVerificationError");nt(ky,jE);function ts(o,e,t){return Math.min(Math.max(o,e),t)}u(ts,"clamp");class mI{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}u(mI,"MovingAverage");class i8{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(e),this._values.fill(0,0,e)}update(e){const t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}u(i8,"SlidingWindowAverage");var pR=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const uo=Je("openerService"),Kte=Object.freeze({_serviceBrand:void 0,registerOpener(){return U.None},registerValidator(){return U.None},registerExternalUriResolver(){return U.None},setDefaultExternalOpener(){},registerExternalOpener(){return U.None},open(){return pR(this,void 0,void 0,function*(){return!1})},resolveExternalUri(o){return pR(this,void 0,void 0,function*(){return{resolved:o,dispose(){}}})}});function bI(o,e){return be.isUri(o)?rg(o.scheme,e):WD(o,e+":")}u(bI,"matchesScheme");function mR(o,...e){return e.some(t=>bI(o,t))}u(mR,"matchesSomeScheme");function s8(o){let e;const t=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(o.fragment);return t&&(e={startLineNumber:parseInt(t[1]),startColumn:t[2]?parseInt(t[2]):1,endLineNumber:t[4]?parseInt(t[4]):void 0,endColumn:t[4]?t[5]?parseInt(t[5]):1:void 0},o=o.with({fragment:""})),{selection:e,uri:o}}u(s8,"extractSelection");var jte=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},$te=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const ho=Je("ILanguageFeatureDebounceService");var I1;(function(o){const e=new WeakMap;let t=0;function n(i){let s=e.get(i);return s===void 0&&(s=++t,e.set(i,s)),s}u(n,"of"),o.of=n})(I1||(I1={}));class o8{constructor(e,t,n,i,s,r){this._logService=e,this._name=t,this._registry=n,this._default=i,this._min=s,this._max=r,this._cache=new Al(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((t,n)=>Uw(I1.of(n),t),0)}get(e){const t=this._key(e),n=this._cache.get(t);return n?ts(n.value,this._min,this._max):this.default()}update(e,t){const n=this._key(e);let i=this._cache.get(n);i||(i=new i8(6),this._cache.set(n,i));const s=ts(i.update(t),this._min,this._max);return bI(e.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${s}ms`),s}_overall(){const e=new mI;for(const[,t]of this._cache)e.update(t.value);return e.value}default(){const e=this._overall()|0||this._default;return ts(e,this._min,this._max)}}u(o8,"FeatureDebounceInformation");let $E=u(class{constructor(e){this._logService=e,this._data=new Map}for(e,t,n){var i,s,r;const a=(i=n?.min)!==null&&i!==void 0?i:50,l=(s=n?.max)!==null&&s!==void 0?s:Math.pow(a,2),c=(r=n?.key)!==null&&r!==void 0?r:void 0,d=`${I1.of(e)},${a}${c?","+c:""}`;let h=this._data.get(d);return h||(h=new o8(this._logService,t,e,this._overallAverage()|0||a*1.5,a,l),this._data.set(d,h)),h}_overallAverage(){const e=new mI;for(const t of this._data.values())e.update(t.default());return e.value}},"LanguageFeatureDebounceService");$E=jte([$te(0,Ao)],$E);nt(ho,$E,!0);const $_=Je("IWorkspaceEditService");class ph{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(_c.is(t))return _c.lift(t);if(su.is(t))return su.lift(t);throw new Error("Unsupported edit")})}}u(ph,"ResourceEdit");class _c extends ph{constructor(e,t,n=void 0,i){super(i),this.resource=e,this.textEdit=t,this.versionId=n}static is(e){return e instanceof _c?!0:Ki(e)&&be.isUri(e.resource)&&Ki(e.textEdit)}static lift(e){return e instanceof _c?e:new _c(e.resource,e.textEdit,e.versionId,e.metadata)}}u(_c,"ResourceTextEdit");class su extends ph{constructor(e,t,n={},i){super(i),this.oldResource=e,this.newResource=t,this.options=n}static is(e){return e instanceof su?!0:Ki(e)&&(Boolean(e.newResource)||Boolean(e.oldResource))}static lift(e){return e instanceof su?e:new su(e.oldResource,e.newResource,e.options,e.metadata)}}u(su,"ResourceFileEdit");const _I=Object.freeze({id:"editor",order:5,type:"object",title:m("editorConfigurationTitle","Editor"),scope:5}),N1=Object.assign(Object.assign({},_I),{properties:{"editor.tabSize":{type:"number",default:ri.tabSize,minimum:1,markdownDescription:m("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.insertSpaces":{type:"boolean",default:ri.insertSpaces,markdownDescription:m("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.detectIndentation":{type:"boolean",default:ri.detectIndentation,markdownDescription:m("detectIndentation","Controls whether `#editor.tabSize#` and `#editor.insertSpaces#` will be automatically detected when a file is opened based on the file contents.")},"editor.trimAutoWhitespace":{type:"boolean",default:ri.trimAutoWhitespace,description:m("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:ri.largeFileOptimizations,description:m("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{type:"boolean",default:!0,description:m("wordBasedSuggestions","Controls whether completions should be computed based on words in the document.")},"editor.wordBasedSuggestionsMode":{enum:["currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[m("wordBasedSuggestionsMode.currentDocument","Only suggest words from the active document."),m("wordBasedSuggestionsMode.matchingDocuments","Suggest words from all open documents of the same language."),m("wordBasedSuggestionsMode.allDocuments","Suggest words from all open documents.")],description:m("wordBasedSuggestionsMode","Controls from which documents word based completions are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[m("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),m("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),m("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:m("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:m("stablePeek","Keep peek editors open even when double clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:m("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.language.brackets":{type:["array","null"],default:null,description:m("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:m("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:m("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:m("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:m("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:m("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:5e3,description:m("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:50,description:m("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:!0,description:m("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:!0,description:m("renderMarginRevertIcon","When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:!0,description:m("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:!0,description:m("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:!1,description:m("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:"inherit",markdownEnumDescriptions:[m("wordWrap.off","Lines will never wrap."),m("wordWrap.on","Lines will wrap at the viewport width."),m("wordWrap.inherit","Lines will wrap according to the `#editor.wordWrap#` setting.")]}}});function qte(o){return typeof o.type<"u"||typeof o.anyOf<"u"}u(qte,"isConfigurationPropertySchema");for(const o of og){const e=o.schema;if(typeof e<"u")if(qte(e))N1.properties[`editor.${o.name}`]=e;else for(const t in e)Object.hasOwnProperty.call(e,t)&&(N1.properties[t]=e[t])}let gC=null;function r8(){return gC===null&&(gC=Object.create(null),Object.keys(N1.properties).forEach(o=>{gC[o]=!0})),gC}u(r8,"getEditorConfigurationKeys");function Yte(o){return r8()[`editor.${o}`]||!1}u(Yte,"isEditorConfigurationKey");function Xte(o){return r8()[`diffEditor.${o}`]||!1}u(Xte,"isDiffEditorConfigurationKey");const Zte=zt.as(kl.Configuration);Zte.registerConfiguration(N1);class Ot{static insert(e,t){return{range:new L(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}u(Ot,"EditOperation");class Wi{constructor(e={},t=[],n=[]){this._contents=e,this._keys=t,this._overrides=n,this.frozen=!1,this.overrideConfigurations=new Map}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?F2(this.contents,e):this.contents}getOverrideValue(e,t){const n=this.getContentsForOverrideIdentifer(t);return n?e?F2(n,e):n:void 0}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){const t=Pa(this.contents),n=Pa(this.overrides),i=[...this.keys];for(const s of e)if(!s.isEmpty()){this.mergeContents(t,s.contents);for(const r of s.overrides){const[a]=n.filter(l=>Ds(l.identifiers,r.identifiers));a?(this.mergeContents(a.contents,r.contents),a.keys.push(...r.keys),a.keys=gl(a.keys)):n.push(Pa(r))}for(const r of s.keys)i.indexOf(r)===-1&&i.push(r)}return new Wi(t,i,n)}freeze(){return this.frozen=!0,this}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;const n={};for(const i of gl([...Object.keys(this.contents),...Object.keys(t)])){let s=this.contents[i];const r=t[i];r&&(typeof s=="object"&&typeof r=="object"?(s=Pa(s),this.mergeContents(s,r)):s=r),n[i]=s}return new Wi(n,this.keys,this.overrides)}mergeContents(e,t){for(const n of Object.keys(t)){if(n in e&&Ki(e[n])&&Ki(t[n])){this.mergeContents(e[n],t[n]);continue}e[n]=Pa(t[n])}}checkAndFreeze(e){return this.frozen&&!Object.isFrozen(e)?N$(e):e}getContentsForOverrideIdentifer(e){let t=null,n=null;const i=u(s=>{s&&(n?this.mergeContents(n,s):n=Pa(s))},"mergeContents");for(const s of this.overrides)Ds(s.identifiers,[e])?t=s.contents:s.identifiers.includes(e)&&i(s.contents);return i(t),n}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.addKey(e),JD(this.contents,e,t,n=>{throw new Error(n)})}removeValue(e){this.removeKey(e)&&$q(this.contents,e)}addKey(e){let t=this.keys.length;for(let n=0;n<t;n++)e.indexOf(this.keys[n])===0&&(t=n);this.keys.splice(t,1,e)}removeKey(e){const t=this.keys.indexOf(e);return t!==-1?(this.keys.splice(t,1),!0):!1}}u(Wi,"ConfigurationModel");class q_{constructor(e,t,n,i,s=new Wi,r=new Wi,a=new ai,l=new Wi,c=new ai,d=!0){this._defaultConfiguration=e,this._policyConfiguration=t,this._applicationConfiguration=n,this._localUserConfiguration=i,this._remoteUserConfiguration=s,this._workspaceConfiguration=r,this._folderConfigurations=a,this._memoryConfiguration=l,this._memoryConfigurationByResource=c,this._freeze=d,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new ai,this._userConfiguration=null}getValue(e,t,n){return this.getConsolidatedConfigurationModel(e,t,n).getValue(e)}updateValue(e,t,n={}){let i;n.resource?(i=this._memoryConfigurationByResource.get(n.resource),i||(i=new Wi,this._memoryConfigurationByResource.set(n.resource,i))):i=this._memoryConfiguration,t===void 0?i.removeValue(e):i.setValue(e,t),n.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,n){const i=this.getConsolidatedConfigurationModel(e,t,n),s=this.getFolderConfigurationModelForResource(t.resource,n),r=t.resource?this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration:this._memoryConfiguration,a=t.overrideIdentifier?this._defaultConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this._defaultConfiguration.freeze().getValue(e),l=this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration.freeze().getValue(e),c=this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration.freeze().getValue(e),d=t.overrideIdentifier?this.userConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this.userConfiguration.freeze().getValue(e),h=t.overrideIdentifier?this.localUserConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this.localUserConfiguration.freeze().getValue(e),g=t.overrideIdentifier?this.remoteUserConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this.remoteUserConfiguration.freeze().getValue(e),f=n?t.overrideIdentifier?this._workspaceConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this._workspaceConfiguration.freeze().getValue(e):void 0,p=s?t.overrideIdentifier?s.freeze().override(t.overrideIdentifier).getValue(e):s.freeze().getValue(e):void 0,_=t.overrideIdentifier?r.override(t.overrideIdentifier).getValue(e):r.getValue(e),v=i.getValue(e),C=gl(i.overrides.map(w=>w.identifiers).flat()).filter(w=>i.getOverrideValue(e,w)!==void 0);return{defaultValue:a,policyValue:l,applicationValue:c,userValue:d,userLocalValue:h,userRemoteValue:g,workspaceValue:f,workspaceFolderValue:p,memoryValue:_,value:v,default:a!==void 0?{value:this._defaultConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this._defaultConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,policy:l!==void 0?{value:l}:void 0,application:c!==void 0?{value:c,override:t.overrideIdentifier?this.applicationConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,user:d!==void 0?{value:this.userConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this.userConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,userLocal:h!==void 0?{value:this.localUserConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this.localUserConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,userRemote:g!==void 0?{value:this.remoteUserConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this.remoteUserConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,workspace:f!==void 0?{value:this._workspaceConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this._workspaceConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,workspaceFolder:p!==void 0?{value:s?.freeze().getValue(e),override:t.overrideIdentifier?s?.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,memory:_!==void 0?{value:r.getValue(e),override:t.overrideIdentifier?r.getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,overrideIdentifiers:C.length?C:void 0}}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration),this._freeze&&this._userConfiguration.freeze()),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidatedConfigurationModel(e,t,n){let i=this.getConsolidatedConfigurationModelForResource(t,n);return t.overrideIdentifier&&(i=i.override(t.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(e)!==void 0&&(i=i.merge(this._policyConfiguration)),i}getConsolidatedConfigurationModelForResource({resource:e},t){let n=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const i=t.getFolder(e);i&&(n=this.getFolderConsolidatedConfiguration(i.uri)||n);const s=this._memoryConfigurationByResource.get(e);s&&(n=n.merge(s))}return n}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const n=this.getWorkspaceConsolidatedConfiguration(),i=this._folderConfigurations.get(e);i?(t=n.merge(i),this._freeze&&(t=t.freeze()),this._foldersConsolidatedConfigurations.set(e,t)):t=n}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const n=t.getFolder(e);if(n)return this._folderConfigurations.get(n.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:n,overrides:i,keys:s}=this._folderConfigurations.get(t);return e.push([t,{contents:n,overrides:i,keys:s}]),e},[])}}static parse(e){const t=this.parseConfigurationModel(e.defaults),n=this.parseConfigurationModel(e.policy),i=this.parseConfigurationModel(e.application),s=this.parseConfigurationModel(e.user),r=this.parseConfigurationModel(e.workspace),a=e.folders.reduce((l,c)=>(l.set(be.revive(c[0]),this.parseConfigurationModel(c[1])),l),new ai);return new q_(t,n,i,s,new Wi,r,a,new Wi,new ai,!1)}static parseConfigurationModel(e){return new Wi(e.contents,e.keys,e.overrides).freeze()}}u(q_,"Configuration");class a8{constructor(e,t,n,i){this.change=e,this.previous=t,this.currentConfiguraiton=n,this.currentWorkspace=i,this._previousConfiguration=void 0;const s=new Set;e.keys.forEach(a=>s.add(a)),e.overrides.forEach(([,a])=>a.forEach(l=>s.add(l))),this.affectedKeys=[...s.values()];const r=new Wi;this.affectedKeys.forEach(a=>r.setValue(a,{})),this.affectedKeysTree=r.contents}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=q_.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(e,t){var n;if(this.doesAffectedKeysTreeContains(this.affectedKeysTree,e)){if(t){const i=this.previousConfiguration?this.previousConfiguration.getValue(e,t,(n=this.previous)===null||n===void 0?void 0:n.workspace):void 0,s=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!Xs(i,s)}return!0}return!1}doesAffectedKeysTreeContains(e,t){let n=h5({[t]:!0},()=>{}),i;for(;typeof n=="object"&&(i=Object.keys(n)[0]);){if(e=e[i],!e)return!1;n=n[i]}return!0}}u(a8,"ConfigurationChangeEvent");const Jte=/^(cursor|delete)/;class l8 extends U{constructor(e,t,n,i,s){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=n,this._notificationService=i,this._logService=s,this._onDidUpdateKeybindings=this._register(new R),this._currentChord=null,this._currentChordChecker=new tp,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=zd.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new hs,this._logging=!1}get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:fe.None}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const n=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(n)return n.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){this._log("/ Soft dispatching keyboard event");const n=this.resolveKeyboardEvent(e);if(n.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),null;const[i]=n.getDispatchParts();if(i===null)return this._log("\\ Keyboard event cannot be dispatched"),null;const s=this._contextKeyService.getContext(t),r=this._currentChord?this._currentChord.keypress:null;return this._getResolver().resolve(s,r,i)}_enterChordMode(e,t){this._currentChord={keypress:e,label:t},this._currentChordStatusMessage=this._notificationService.status(m("first.chord","({0}) was pressed. Waiting for second key of chord...",t));const n=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-n>5e3&&this._leaveChordMode()},500)}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChord=null}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const n=this.resolveKeyboardEvent(e),[i]=n.getSingleModifierDispatchParts();if(i)return this._ignoreSingleModifiers.has(i)?(this._log(`+ Ignoring single modifier ${i} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=zd.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=zd.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${i}.`),this._currentSingleModifier=i,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):i===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${i} ${i}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(n,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${i}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[s]=n.getParts();return this._ignoreSingleModifiers=new zd(s),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,n=!1){let i=!1;if(e.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),!1;let s=null,r=null;if(n){const[d]=e.getSingleModifierDispatchParts();s=d,r=d}else[s]=e.getDispatchParts(),r=this._currentChord?this._currentChord.keypress:null;if(s===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),i;const a=this._contextKeyService.getContext(t),l=e.getLabel(),c=this._getResolver().resolve(a,r,s);return this._logService.trace("KeybindingService#dispatch",l,c?.commandId),c&&c.enterChord?(i=!0,this._enterChordMode(s,l),this._log("+ Entering chord mode..."),i):(this._currentChord&&(!c||!c.commandId)&&(this._log(`+ Leaving chord mode: Nothing bound to "${this._currentChord.label} ${l}".`),this._notificationService.status(m("missing.chord","The key combination ({0}, {1}) is not a command.",this._currentChord.label,l),{hideAfter:10*1e3}),i=!0),this._leaveChordMode(),c&&c.commandId&&(c.bubble||(i=!0),this._log(`+ Invoking command ${c.commandId}.`),typeof c.commandArgs>"u"?this._commandService.executeCommand(c.commandId).then(void 0,d=>this._notificationService.warn(d)):this._commandService.executeCommand(c.commandId,c.commandArgs).then(void 0,d=>this._notificationService.warn(d)),Jte.test(c.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:c.commandId,from:"keybinding"})),i)}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}}u(l8,"AbstractKeybindingService");class zd{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}}u(zd,"KeybindingModifierSet");zd.EMPTY=new zd(null);const Cn=Je("keybindingService");class Bg{constructor(e,t,n){this._log=n,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(const i of e){const s=i.command;s&&s.charAt(0)!=="-"&&this._defaultBoundCommands.set(s,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=Bg.handleRemovals([].concat(e).concat(t));for(let i=0,s=this._keybindings.length;i<s;i++){const r=this._keybindings[i];r.keypressParts.length!==0&&(r.when&&r.when.type===0||this._addKeyPress(r.keypressParts[0],r))}}static _isTargetedForRemoval(e,t,n,i){return!(t&&e.keypressParts[0]!==t||n&&e.keypressParts[1]!==n||i&&(!e.when||!BX(i,e.when)))}static handleRemovals(e){const t=new Map;for(let i=0,s=e.length;i<s;i++){const r=e[i];if(r.command&&r.command.charAt(0)==="-"){const a=r.command.substring(1);t.has(a)?t.get(a).push(r):t.set(a,[r])}}if(t.size===0)return e;const n=[];for(let i=0,s=e.length;i<s;i++){const r=e[i];if(!r.command||r.command.length===0){n.push(r);continue}if(r.command.charAt(0)==="-")continue;const a=t.get(r.command);if(!a||!r.isDefault){n.push(r);continue}let l=!1;for(const c of a){const d=c.keypressParts[0],h=c.keypressParts[1],g=c.when;if(this._isTargetedForRemoval(r,d,h,g)){l=!0;break}}if(!l){n.push(r);continue}}return n}_addKeyPress(e,t){const n=this._map.get(e);if(typeof n>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let i=n.length-1;i>=0;i--){const s=n[i];if(s.command===t.command)continue;const r=s.keypressParts.length>1,a=t.keypressParts.length>1;r&&a&&s.keypressParts[1]!==t.keypressParts[1]||Bg.whenIsEntirelyIncluded(s.when,t.when)&&this._removeFromLookupMap(s)}n.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;const t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let n=0,i=t.length;n<i;n++)if(t[n]===e){t.splice(n,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:BV(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const n=this._lookupMap.get(e);if(typeof n>"u"||n.length===0)return null;if(n.length===1)return n[0];for(let i=n.length-1;i>=0;i--){const s=n[i];if(t.contextMatchesRules(s.when))return s}return n[n.length-1]}resolve(e,t,n){this._log(`| Resolving ${n}${t?` chorded from ${t}`:""}`);let i=null;if(t!==null){const r=this._map.get(t);if(typeof r>"u")return this._log("\\ No keybinding entries."),null;i=[];for(let a=0,l=r.length;a<l;a++){const c=r[a];c.keypressParts[1]===n&&i.push(c)}}else{const r=this._map.get(n);if(typeof r>"u")return this._log("\\ No keybinding entries."),null;i=r}const s=this._findCommand(e,i);return s?t===null&&s.keypressParts.length>1&&s.keypressParts[1]!==null?(this._log(`\\ From ${i.length} keybinding entries, matched chord, when: ${bR(s.when)}, source: ${_R(s)}.`),{enterChord:!0,leaveChord:!1,commandId:null,commandArgs:null,bubble:!1}):(this._log(`\\ From ${i.length} keybinding entries, matched ${s.command}, when: ${bR(s.when)}, source: ${_R(s)}.`),{enterChord:!1,leaveChord:s.keypressParts.length>1,commandId:s.command,commandArgs:s.commandArgs,bubble:s.bubble}):(this._log(`\\ From ${i.length} keybinding entries, no when clauses matched the context.`),null)}_findCommand(e,t){for(let n=t.length-1;n>=0;n--){const i=t[n];if(Bg._contextMatchesRules(e,i.when))return i}return null}static _contextMatchesRules(e,t){return t?t.evaluate(e):!0}}u(Bg,"KeybindingResolver");function bR(o){return o?`${o.serialize()}`:"no when condition"}u(bR,"printWhenExplanation");function _R(o){return o.extensionId?o.isBuiltinExtension?`built-in extension ${o.extensionId}`:`user extension ${o.extensionId}`:o.isDefault?"built-in":"user"}u(_R,"printSourceExplanation");class qE{constructor(e,t,n,i,s,r,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.keypressParts=e?YE(e.getDispatchParts()):[],e&&this.keypressParts.length===0&&(this.keypressParts=YE(e.getSingleModifierDispatchParts())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=n,this.when=i,this.isDefault=s,this.extensionId=r,this.isBuiltinExtension=a}}u(qE,"ResolvedKeybindingItem");function YE(o){const e=[];for(let t=0,n=o.length;t<n;t++){const i=o[t];if(!i)return e;e.push(i)}return e}u(YE,"removeElementsAfterNulls");class Y_{constructor(e,t,n=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=n}toLabel(e,t,n){if(t.length===0)return null;const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=n(a);if(l===null)return null;i[s]=tne(a,l,this.modifierLabels[e])}return i.join(" ")}}u(Y_,"ModifierLabelProvider");const vI=new Y_({ctrlKey:"⌃",shiftKey:"⇧",altKey:"⌥",metaKey:"⌘",separator:""},{ctrlKey:m({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:m({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:m({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:m({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:m({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:m({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:m({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:m({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),Qte=new Y_({ctrlKey:m({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:m({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:m({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:m({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:m({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:m({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:m({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:m({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:m({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:m({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:m({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:m({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),ene=new Y_({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"});new Y_({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function tne(o,e,t){if(e===null)return"";const n=[];return o.ctrlKey&&n.push(t.ctrlKey),o.shiftKey&&n.push(t.shiftKey),o.altKey&&n.push(t.altKey),o.metaKey&&n.push(t.metaKey),e!==""&&n.push(e),n.join(t.separator)}u(tne,"_simpleAsString");class c8 extends vV{constructor(e,t){if(super(),t.length===0)throw dr("parts");this._os=e,this._parts=t}getLabel(){return vI.toLabel(this._os,this._parts,e=>this._getLabel(e))}getAriaLabel(){return Qte.toLabel(this._os,this._parts,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._parts.length>1||this._parts[0].isDuplicateModifierCase()?null:ene.toLabel(this._os,this._parts,e=>this._getElectronAccelerator(e))}isChord(){return this._parts.length>1}getParts(){return this._parts.map(e=>this._getPart(e))}_getPart(e){return new _V(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchParts(){return this._parts.map(e=>this._getDispatchPart(e))}getSingleModifierDispatchParts(){return this._parts.map(e=>this._getSingleModifierDispatchPart(e))}}u(c8,"BaseResolvedKeybinding");class Lf extends c8{constructor(e,t){super(t,e.parts)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"←";case 16:return"↑";case 17:return"→";case 18:return"↓"}return Nd.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":Nd.toString(e.keyCode)}_getElectronAccelerator(e){return Nd.toElectronAccelerator(e.keyCode)}_getDispatchPart(e){return Lf.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=Nd.toString(e.keyCode),t}_getSingleModifierDispatchPart(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const t=OD[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 83;case 52:return 81;case 53:return 87;case 54:return 89;case 55:return 88;case 56:return 0;case 57:return 80;case 58:return 90;case 59:return 86;case 60:return 82;case 61:return 84;case 62:return 85;case 106:return 92}return 0}static _resolveSimpleUserBinding(e){if(!e)return null;if(e instanceof Ec)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new Ec(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveUserBinding(e,t){const n=YE(e.map(i=>this._resolveSimpleUserBinding(i)));return n.length>0?[new Lf(new gb(n),t)]:[]}}u(Lf,"USLayoutResolvedKeybinding");const xf=Je("labelService"),Vb=Je("contextService");function vR(o){const e=o;return typeof e?.id=="string"&&be.isUri(e.uri)}u(vR,"isSingleFolderWorkspaceIdentifier");function nne(o){if(o.configuration)return{id:o.id,configPath:o.configuration};if(o.folders.length===1)return{id:o.id,uri:o.folders[0].uri}}u(nne,"toWorkspaceIdentifier");class d8{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}u(d8,"WorkspaceFolder");const XE="code-workspace";m("codeWorkspace","Code Workspace");var pn;(function(o){o.noSelection=m("noSelection","No selection"),o.singleSelectionRange=m("singleSelectionRange","Line {0}, Column {1} ({2} selected)"),o.singleSelection=m("singleSelection","Line {0}, Column {1}"),o.multiSelectionRange=m("multiSelectionRange","{0} selections ({1} characters selected)"),o.multiSelection=m("multiSelection","{0} selections"),o.emergencyConfOn=m("emergencyConfOn","Now changing the setting `accessibilitySupport` to 'on'."),o.openingDocs=m("openingDocs","Now opening the Editor Accessibility documentation page."),o.readonlyDiffEditor=m("readonlyDiffEditor"," in a read-only pane of a diff editor."),o.editableDiffEditor=m("editableDiffEditor"," in a pane of a diff editor."),o.readonlyEditor=m("readonlyEditor"," in a read-only code editor"),o.editableEditor=m("editableEditor"," in a code editor"),o.changeConfigToOnMac=m("changeConfigToOnMac","To configure the editor to be optimized for usage with a Screen Reader press Command+E now."),o.changeConfigToOnWinLinux=m("changeConfigToOnWinLinux","To configure the editor to be optimized for usage with a Screen Reader press Control+E now."),o.auto_on=m("auto_on","The editor is configured to be optimized for usage with a Screen Reader."),o.auto_off=m("auto_off","The editor is configured to never be optimized for usage with a Screen Reader, which is not the case at this time."),o.tabFocusModeOnMsg=m("tabFocusModeOnMsg","Pressing Tab in the current editor will move focus to the next focusable element. Toggle this behavior by pressing {0}."),o.tabFocusModeOnMsgNoKb=m("tabFocusModeOnMsgNoKb","Pressing Tab in the current editor will move focus to the next focusable element. The command {0} is currently not triggerable by a keybinding."),o.tabFocusModeOffMsg=m("tabFocusModeOffMsg","Pressing Tab in the current editor will insert the tab character. Toggle this behavior by pressing {0}."),o.tabFocusModeOffMsgNoKb=m("tabFocusModeOffMsgNoKb","Pressing Tab in the current editor will insert the tab character. The command {0} is currently not triggerable by a keybinding."),o.openDocMac=m("openDocMac","Press Command+H now to open a browser window with more information related to editor accessibility."),o.openDocWinLinux=m("openDocWinLinux","Press Control+H now to open a browser window with more information related to editor accessibility."),o.outroMsg=m("outroMsg","You can dismiss this tooltip and return to the editor by pressing Escape or Shift+Escape."),o.showAccessibilityHelpAction=m("showAccessibilityHelpAction","Show Accessibility Help")})(pn||(pn={}));var ZE;(function(o){o.inspectTokensAction=m("inspectTokens","Developer: Inspect Tokens")})(ZE||(ZE={}));var P1;(function(o){o.gotoLineActionLabel=m("gotoLineActionLabel","Go to Line/Column...")})(P1||(P1={}));var JE;(function(o){o.helpQuickAccessActionLabel=m("helpQuickAccess","Show all Quick Access Providers")})(JE||(JE={}));var R1;(function(o){o.quickCommandActionLabel=m("quickCommandActionLabel","Command Palette"),o.quickCommandHelp=m("quickCommandActionHelp","Show And Run Commands")})(R1||(R1={}));var Hb;(function(o){o.quickOutlineActionLabel=m("quickOutlineActionLabel","Go to Symbol..."),o.quickOutlineByCategoryActionLabel=m("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(Hb||(Hb={}));var F1;(function(o){o.editorViewAccessibleLabel=m("editorViewAccessibleLabel","Editor content"),o.accessibilityHelpMessage=m("accessibilityHelpMessage","Press Alt+F1 for Accessibility Options.")})(F1||(F1={}));var QE;(function(o){o.toggleHighContrast=m("toggleHighContrast","Toggle High Contrast Theme")})(QE||(QE={}));var ek;(function(o){o.bulkEditServiceSummary=m("bulkEditServiceSummary","Made {0} edits in {1} files")})(ek||(ek={}));const u8=Je("workspaceTrustManagementService");var ii;(function(o){function e(s,r){if(s.start>=r.end||r.start>=s.end)return{start:0,end:0};const a=Math.max(s.start,r.start),l=Math.min(s.end,r.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}u(e,"intersect"),o.intersect=e;function t(s){return s.end-s.start<=0}u(t,"isEmpty"),o.isEmpty=t;function n(s,r){return!t(e(s,r))}u(n,"intersects"),o.intersects=n;function i(s,r){const a=[],l={start:s.start,end:Math.min(r.start,s.end)},c={start:Math.max(r.end,s.start),end:s.end};return t(l)||a.push(l),t(c)||a.push(c),a}u(i,"relativeComplement"),o.relativeComplement=i})(ii||(ii={}));var cc;(function(o){o[o.AVOID=0]="AVOID",o[o.ALIGN=1]="ALIGN"})(cc||(cc={}));function mg(o,e,t){const n=t.mode===cc.ALIGN?t.offset:t.offset+t.size,i=t.mode===cc.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=o-n?n:e<=i?i-e:Math.max(o-e,0):e<=i?i-e:e<=o-n?n:0}u(mg,"layout");class Iu extends U{constructor(e,t){super(),this.container=null,this.delegate=null,this.toDisposeOnClean=U.None,this.toDisposeOnSetContainer=U.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=ee(".context-view"),this.useFixedPosition=!1,this.useShadowDOM=!1,Ui(this.view),this.setContainer(e,t),this._register(He(()=>this.setContainer(null,1)))}setContainer(e,t){var n;if(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,(n=this.shadowRootHostElement)===null||n===void 0||n.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),e){if(this.container=e,this.useFixedPosition=t!==1,this.useShadowDOM=t===3,this.useShadowDOM){this.shadowRootHostElement=ee(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const s=document.createElement("style");s.textContent=ine,this.shadowRoot.appendChild(s),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(ee("slot"))}else this.container.appendChild(this.view);const i=new J;Iu.BUBBLE_UP_EVENTS.forEach(s=>{i.add(Dn(this.container,s,r=>{this.onDOMEvent(r,!1)}))}),Iu.BUBBLE_DOWN_EVENTS.forEach(s=>{i.add(Dn(this.container,s,r=>{this.onDOMEvent(r,!0)},!0))}),this.toDisposeOnSetContainer=i}}show(e){var t,n;this.isVisible()&&this.hide(),Tn(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex="2575",this.view.style.position=this.useFixedPosition?"fixed":"absolute",Ss(this.view),this.toDisposeOnClean=e.render(this.view)||U.None,this.delegate=e,this.doLayout(),(n=(t=this.delegate).focus)===null||n===void 0||n.call(t)}getViewElement(){return this.view}layout(){if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(na&&dA.pointerEvents)){this.hide();return}this.delegate.layout&&this.delegate.layout(),this.doLayout()}}doLayout(){if(!this.isVisible())return;const e=this.delegate.getAnchor();let t;if(PV(e)){const h=li(e),g=kX(e);t={top:h.top*g,left:h.left*g,width:h.width*g,height:h.height*g}}else t={top:e.y,left:e.x,width:e.width||1,height:e.height||2};const n=bo(this.view),i=jx(this.view),s=this.delegate.anchorPosition||0,r=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let l,c;if(a===0){const h={offset:t.top-window.pageYOffset,size:t.height,position:s===0?0:1},g={offset:t.left,size:t.width,position:r===0?0:1,mode:cc.ALIGN};l=mg(window.innerHeight,i,h)+window.pageYOffset,ii.intersects({start:l,end:l+i},{start:h.offset,end:h.offset+h.size})&&(g.mode=cc.AVOID),c=mg(window.innerWidth,n,g)}else{const h={offset:t.left,size:t.width,position:r===0?0:1},g={offset:t.top,size:t.height,position:s===0?0:1,mode:cc.ALIGN};c=mg(window.innerWidth,n,h),ii.intersects({start:c,end:c+n},{start:h.offset,end:h.offset+h.size})&&(g.mode=cc.AVOID),l=mg(window.innerHeight,i,g)+window.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(s===0?"bottom":"top"),this.view.classList.add(r===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const d=li(this.container);this.view.style.top=`${l-(this.useFixedPosition?li(this.view).top:d.top)}px`,this.view.style.left=`${c-(this.useFixedPosition?li(this.view).left:d.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t?.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),Ui(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,document.activeElement):t&&!ll(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}u(Iu,"ContextView");Iu.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"];Iu.BUBBLE_DOWN_EVENTS=["click"];const ine=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	@font-face {
		font-family: "codicon";
		font-display: block;
		src: url("./codicon.ttf?5d4d76ab2ce5108968ad644d591a16a6") format("truetype");
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;var sne=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},one=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let tk=u(class extends U{constructor(e){super(),this.layoutService=e,this.currentViewDisposable=U.None,this.container=e.hasContainer?e.container:null,this.contextView=this._register(new Iu(this.container,1)),this.layout(),this._register(e.onDidLayout(()=>this.layout()))}setContainer(e,t){this.contextView.setContainer(e,t||1)}showContextView(e,t,n){t?(t!==this.container||this.shadowRoot!==n)&&(this.container=t,this.setContainer(t,n?3:2)):this.layoutService.hasContainer&&this.container!==this.layoutService.container&&(this.container=this.layoutService.container,this.setContainer(this.container,1)),this.shadowRoot=n,this.contextView.show(e);const i=He(()=>{this.currentViewDisposable===i&&this.hideContextView()});return this.currentViewDisposable=i,i}getContextViewElement(){return this.contextView.getViewElement()}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e)}},"ContextViewService");tk=sne([one(0,up)],tk);var CR=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const fC="**",wR="/",c0="[/\\\\]",d0="[^/\\\\]",rne=/\//g;function yR(o,e){switch(o){case 0:return"";case 1:return`${d0}*?`;default:return`(?:${c0}|${d0}+${c0}${e?`|${c0}${d0}+`:""})*?`}}u(yR,"starsToRegExp");function SR(o,e){if(!o)return[];const t=[];let n=!1,i=!1,s="";for(const r of o){switch(r){case e:if(!n&&!i){t.push(s),s="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":i=!0;break;case"]":i=!1;break}s+=r}return s&&t.push(s),t}u(SR,"splitGlobAware");function h8(o){if(!o)return"";let e="";const t=SR(o,wR);if(t.every(n=>n===fC))e=".*";else{let n=!1;t.forEach((i,s)=>{if(i===fC){if(n)return;e+=yR(2,s===t.length-1)}else{let r=!1,a="",l=!1,c="";for(const d of i){if(d!=="}"&&r){a+=d;continue}if(l&&(d!=="]"||!c)){let h;d==="-"?h=d:(d==="^"||d==="!")&&!c?h="^":d===wR?h="":h=As(d),c+=h;continue}switch(d){case"{":r=!0;continue;case"[":l=!0;continue;case"}":{const g=`(?:${SR(a,",").map(f=>h8(f)).join("|")})`;e+=g,r=!1,a="";break}case"]":{e+="["+c+"]",l=!1,c="";break}case"?":e+=d0;continue;case"*":e+=yR(1);continue;default:e+=As(d)}}s<t.length-1&&(t[s+1]!==fC||s+2<t.length)&&(e+=c0)}n=i===fC})}return e}u(h8,"parseRegExp");const ane=/^\*\*\/\*\.[\w\.-]+$/,lne=/^\*\*\/([\w\.-]+)\/?$/,cne=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,dne=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,une=/^\*\*((\/[\w\.-]+)+)\/?$/,hne=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,TR=new Al(1e4),LR=u(function(){return!1},"FALSE"),Qr=u(function(){return null},"NULL");function CI(o,e){if(!o)return Qr;let t;typeof o!="string"?t=o.pattern:t=o,t=t.trim();const n=`${t}_${!!e.trimForExclusions}`;let i=TR.get(n);if(i)return xR(i,o);let s;return ane.test(t)?i=gne(t.substr(4),t):(s=lne.exec(NT(t,e)))?i=fne(s[1],t):(e.trimForExclusions?dne:cne).test(t)?i=pne(t,e):(s=une.exec(NT(t,e)))?i=ER(s[1].substr(1),t,!0):(s=hne.exec(NT(t,e)))?i=ER(s[1],t,!1):i=mne(t),TR.set(n,i),xR(i,o)}u(CI,"parsePattern");function xR(o,e){if(typeof e=="string")return o;const t=u(function(n,i){return yE(n,e.base,!hi)?o(n.substr(e.base.length+1),i):null},"wrappedPattern");return t.allBasenames=o.allBasenames,t.allPaths=o.allPaths,t.basenames=o.basenames,t.patterns=o.patterns,t}u(xR,"wrapRelativePattern");function NT(o,e){return e.trimForExclusions&&o.endsWith("/**")?o.substr(0,o.length-2):o}u(NT,"trimForExclusions");function gne(o,e){return function(t,n){return typeof t=="string"&&t.endsWith(o)?e:null}}u(gne,"trivia1");function fne(o,e){const t=`/${o}`,n=`\\${o}`,i=u(function(r,a){return typeof r!="string"?null:a?a===o?e:null:r===o||r.endsWith(t)||r.endsWith(n)?e:null},"parsedPattern"),s=[o];return i.basenames=s,i.patterns=[e],i.allBasenames=s,i}u(fne,"trivia2");function pne(o,e){const t=f8(o.slice(1,-1).split(",").map(a=>CI(a,e)).filter(a=>a!==Qr),o),n=t.length;if(!n)return Qr;if(n===1)return t[0];const i=u(function(a,l){for(let c=0,d=t.length;c<d;c++)if(t[c](a,l))return o;return null},"parsedPattern"),s=t.find(a=>!!a.allBasenames);s&&(i.allBasenames=s.allBasenames);const r=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return r.length&&(i.allPaths=r),i}u(pne,"trivia3");function ER(o,e,t){const n=Xr===bn.sep,i=n?o:o.replace(rne,Xr),s=Xr+i,r=bn.sep+o;let a;return t?a=u(function(l,c){return typeof l=="string"&&(l===i||l.endsWith(s)||!n&&(l===o||l.endsWith(r)))?e:null},"parsedPattern"):a=u(function(l,c){return typeof l=="string"&&(l===i||!n&&l===o)?e:null},"parsedPattern"),a.allPaths=[(t?"*/":"./")+o],a}u(ER,"trivia4and5");function mne(o){try{const e=new RegExp(`^${h8(o)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?o:null}}catch{return Qr}}u(mne,"toRegExp");function bne(o,e,t){return!o||typeof e!="string"?!1:g8(o)(e,void 0,t)}u(bne,"match");function g8(o,e={}){if(!o)return LR;if(typeof o=="string"||_ne(o)){const t=CI(o,e);if(t===Qr)return LR;const n=u(function(i,s){return!!t(i,s)},"resultPattern");return t.allBasenames&&(n.allBasenames=t.allBasenames),t.allPaths&&(n.allPaths=t.allPaths),n}return vne(o,e)}u(g8,"parse$1");function _ne(o){const e=o;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}u(_ne,"isRelativePattern");function vne(o,e){const t=f8(Object.getOwnPropertyNames(o).map(a=>Cne(a,o[a],e)).filter(a=>a!==Qr)),n=t.length;if(!n)return Qr;if(!t.some(a=>!!a.requiresSiblings)){if(n===1)return t[0];const a=u(function(d,h){let g;for(let f=0,p=t.length;f<p;f++){const _=t[f](d,h);if(typeof _=="string")return _;kx(_)&&(g||(g=[]),g.push(_))}return g?(()=>CR(this,void 0,void 0,function*(){for(const f of g){const p=yield f;if(typeof p=="string")return p}return null}))():null},"resultExpression"),l=t.find(d=>!!d.allBasenames);l&&(a.allBasenames=l.allBasenames);const c=t.reduce((d,h)=>h.allPaths?d.concat(h.allPaths):d,[]);return c.length&&(a.allPaths=c),a}const i=u(function(a,l,c){let d,h;for(let g=0,f=t.length;g<f;g++){const p=t[g];p.requiresSiblings&&c&&(l||(l=Yd(a)),d||(d=l.substr(0,l.length-tq(a).length)));const _=p(a,l,d,c);if(typeof _=="string")return _;kx(_)&&(h||(h=[]),h.push(_))}return h?(()=>CR(this,void 0,void 0,function*(){for(const g of h){const f=yield g;if(typeof f=="string")return f}return null}))():null},"resultExpression"),s=t.find(a=>!!a.allBasenames);s&&(i.allBasenames=s.allBasenames);const r=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return r.length&&(i.allPaths=r),i}u(vne,"parsedExpression");function Cne(o,e,t){if(e===!1)return Qr;const n=CI(o,t);if(n===Qr)return Qr;if(typeof e=="boolean")return n;if(e){const i=e.when;if(typeof i=="string"){const s=u((r,a,l,c)=>{if(!c||!n(r,a))return null;const d=i.replace("$(basename)",l),h=c(d);return kx(h)?h.then(g=>g?o:null):h?o:null},"result");return s.requiresSiblings=!0,s}}return n}u(Cne,"parseExpressionPattern");function f8(o,e){const t=o.filter(a=>!!a.basenames);if(t.length<2)return o;const n=t.reduce((a,l)=>{const c=l.basenames;return c?a.concat(c):a},[]);let i;if(e){i=[];for(let a=0,l=n.length;a<l;a++)i.push(e)}else i=t.reduce((a,l)=>{const c=l.patterns;return c?a.concat(c):a},[]);const s=u(function(a,l){if(typeof a!="string")return null;if(!l){let d;for(d=a.length;d>0;d--){const h=a.charCodeAt(d-1);if(h===47||h===92)break}l=a.substr(d)}const c=n.indexOf(l);return c!==-1?i[c]:null},"aggregate");s.basenames=n,s.patterns=i,s.allBasenames=n;const r=o.filter(a=>!a.basenames);return r.push(s),r}u(f8,"aggregateBasenameMatches");let Ef=[],wI=[],p8=[];function pC(o,e=!1){wne(o,!1,e)}u(pC,"registerPlatformLanguageAssociation");function wne(o,e,t){const n=yne(o,e);Ef.push(n),n.userConfigured?p8.push(n):wI.push(n),t&&!n.userConfigured&&Ef.forEach(i=>{i.mime===n.mime||i.userConfigured||(n.extension&&i.extension===n.extension&&console.warn(`Overwriting extension <<${n.extension}>> to now point to mime <<${n.mime}>>`),n.filename&&i.filename===n.filename&&console.warn(`Overwriting filename <<${n.filename}>> to now point to mime <<${n.mime}>>`),n.filepattern&&i.filepattern===n.filepattern&&console.warn(`Overwriting filepattern <<${n.filepattern}>> to now point to mime <<${n.mime}>>`),n.firstline&&i.firstline===n.firstline&&console.warn(`Overwriting firstline <<${n.firstline}>> to now point to mime <<${n.mime}>>`))})}u(wne,"_registerLanguageAssociation");function yne(o,e){return{id:o.id,mime:o.mime,filename:o.filename,extension:o.extension,filepattern:o.filepattern,firstline:o.firstline,userConfigured:e,filenameLowercase:o.filename?o.filename.toLowerCase():void 0,extensionLowercase:o.extension?o.extension.toLowerCase():void 0,filepatternLowercase:o.filepattern?g8(o.filepattern.toLowerCase()):void 0,filepatternOnPath:o.filepattern?o.filepattern.indexOf(bn.sep)>=0:!1}}u(yne,"toLanguageAssociationItem");function Sne(){Ef=Ef.filter(o=>o.userConfigured),wI=[]}u(Sne,"clearPlatformLanguageAssociations");function Tne(o,e){return Lne(o,e).map(t=>t.id)}u(Tne,"getLanguageIds");function Lne(o,e){let t;if(o)switch(o.scheme){case Pe.file:t=o.fsPath;break;case Pe.data:{t=Nc.parseMetaData(o).get(Nc.META_DATA_LABEL);break}case Pe.vscodeNotebookCell:t=void 0;break;default:t=o.path}if(!t)return[{id:"unknown",mime:zi.unknown}];t=t.toLowerCase();const n=Yd(t),i=kR(t,n,p8);if(i)return[i,{id:Js,mime:zi.text}];const s=kR(t,n,wI);if(s)return[s,{id:Js,mime:zi.text}];if(e){const r=xne(e);if(r)return[r,{id:Js,mime:zi.text}]}return[{id:"unknown",mime:zi.unknown}]}u(Lne,"getAssociations");function kR(o,e,t){var n;let i,s,r;for(let a=t.length-1;a>=0;a--){const l=t[a];if(e===l.filenameLowercase){i=l;break}if(l.filepattern&&(!s||l.filepattern.length>s.filepattern.length)){const c=l.filepatternOnPath?o:e;!((n=l.filepatternLowercase)===null||n===void 0)&&n.call(l,c)&&(s=l)}l.extension&&(!r||l.extension.length>r.extension.length)&&e.endsWith(l.extensionLowercase)&&(r=l)}if(i)return i;if(s)return s;if(r)return r}u(kR,"getAssociationByPath");function xne(o){if(KD(o)&&(o=o.substr(1)),o.length>0)for(let e=Ef.length-1;e>=0;e--){const t=Ef[e];if(!t.firstline)continue;const n=o.match(t.firstline);if(n&&n.length>0)return t}}u(xne,"getAssociationByFirstline");const mC=Object.prototype.hasOwnProperty,MR="vs.editor.nullLanguage";class m8{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(MR,0),this._register(Js,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||MR}}u(m8,"LanguageIdCodec");class kf extends U{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new R),this.onDidChange=this._onDidChange.event,kf.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new m8,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(Zg.onDidChangeLanguages(n=>{this._initializeFromRegistry()})))}dispose(){kf.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Sne();const e=[].concat(Zg.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{const n=this._languages[t];n.name&&(this._nameMap[n.name]=n.identifier),n.aliases.forEach(i=>{this._lowercaseNameMap[i.toLowerCase()]=n.identifier}),n.mimetypes.forEach(i=>{this._mimeTypesMap[i]=n.identifier})}),zt.as(kl.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let n;mC.call(this._languages,t)?n=this._languages[t]:(this.languageIdCodec.register(t),n={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[t]=n),this._mergeLanguage(n,e)}_mergeLanguage(e,t){const n=t.id;let i=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),i=t.mimetypes[0]),i||(i=`text/x-${n}`,e.mimetypes.push(i)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(const a of t.extensions)pC({id:n,mime:i,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(const a of t.filenames)pC({id:n,mime:i,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(const a of t.filenamePatterns)pC({id:n,mime:i,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{const l=new RegExp(a);mq(l)||pC({id:n,mime:i,firstline:l},this._warnOnOverwrite)}catch(l){Ie(l)}}e.aliases.push(n);let s=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?s=[null]:s=t.aliases),s!==null)for(const a of s)!a||a.length===0||e.aliases.push(a);const r=s!==null&&s.length>0;if(!(r&&s[0]===null)){const a=(r?s[0]:null)||n;(r||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return e?mC.call(this._languages,e):!1}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(e){const t=e.toLowerCase();return mC.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&mC.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){return!e&&!t?[]:Tne(e,t)}}u(kf,"LanguagesRegistry");kf.instanceCount=0;class Mf extends U{constructor(e=!1){super(),this._onDidEncounterLanguage=this._register(new R),this.onDidEncounterLanguage=this._onDidEncounterLanguage.event,this._onDidChange=this._register(new R({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,Mf.instanceCount++,this._encounteredLanguages=new Set,this._registry=this._register(new kf(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){Mf.instanceCount--,super.dispose()}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){const n=this._registry.guessLanguageIdByFilepathOrFirstLine(e,t);return MO(n,null)}createById(e){return new nk(this.onDidChange,()=>this._createAndGetLanguageIdentifier(e))}createByFilepathOrFirstLine(e,t){return new nk(this.onDidChange,()=>{const n=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(n)})}_createAndGetLanguageIdentifier(e){return(!e||!this.isRegisteredLanguageId(e))&&(e=Js),this._encounteredLanguages.has(e)||(this._encounteredLanguages.add(e),Wt.getOrCreate(e),this._onDidEncounterLanguage.fire(e)),e}}u(Mf,"LanguageService");Mf.instanceCount=0;class nk{constructor(e,t){this._onDidChangeLanguages=e,this._selector=t,this._listener=null,this._emitter=null,this.languageId=this._selector()}_dispose(){this._listener&&(this._listener.dispose(),this._listener=null),this._emitter&&(this._emitter.dispose(),this._emitter=null)}get onDidChange(){return this._listener||(this._listener=this._onDidChangeLanguages(()=>this._evaluate())),this._emitter||(this._emitter=new R({onLastListenerRemove:()=>{this._dispose()}})),this._emitter.event}_evaluate(){var e;const t=this._selector();t!==this.languageId&&(this.languageId=t,(e=this._emitter)===null||e===void 0||e.fire(this.languageId))}}u(nk,"LanguageSelection");function DR(o){let e=o.definition;for(;e instanceof b;)e=e.definition;return`.codicon-${o.id}:before { content: '${e.fontCharacter}'; }`}u(DR,"formatRule");const ik=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,PT=/(&amp;)?(&amp;)([^\s&])/g;var O1;(function(o){o[o.Right=0]="Right",o[o.Left=1]="Left"})(O1||(O1={}));let zm=u(class extends Cr{constructor(e,t,n={}){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const i=document.createElement("div");i.classList.add("monaco-menu"),i.setAttribute("role","presentation"),super(i,{orientation:1,actionViewItemProvider:a=>this.doGetActionViewItem(a,n,s),context:n.context,actionRunner:n.actionRunner,ariaLabel:n.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...Xe||hi?[10]:[]],keyDown:!0}}),this.menuElement=i,this.actionsList.tabIndex=0,this.menuDisposables=this._register(new J),this.initializeOrUpdateStyleSheet(e,{}),this._register(gt.addTarget(i)),Y(i,le.KEY_DOWN,a=>{new Pt(a).equals(2)&&a.preventDefault()}),n.enableMnemonics&&this.menuDisposables.add(Y(i,le.KEY_DOWN,a=>{const l=a.key.toLocaleLowerCase();if(this.mnemonics.has(l)){ft.stop(a,!0);const c=this.mnemonics.get(l);if(c.length===1&&(c[0]instanceof sk&&c[0].container&&this.focusItemByElement(c[0].container),c[0].onClick(a)),c.length>1){const d=c.shift();d&&d.container&&(this.focusItemByElement(d.container),c.push(d)),this.mnemonics.set(l,c)}}})),hi&&this._register(Y(i,le.KEY_DOWN,a=>{const l=new Pt(a);l.equals(14)||l.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),ft.stop(a,!0)):(l.equals(13)||l.equals(12))&&(this.focusedItem=0,this.focusPrevious(),ft.stop(a,!0))})),this._register(Y(this.domNode,le.MOUSE_OUT,a=>{const l=a.relatedTarget;ll(l,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),a.stopPropagation())})),this._register(Y(this.actionsList,le.MOUSE_OVER,a=>{let l=a.target;if(!(!l||!ll(l,this.actionsList)||l===this.actionsList)){for(;l.parentElement!==this.actionsList&&l.parentElement!==null;)l=l.parentElement;if(l.classList.contains("action-item")){const c=this.focusedItem;this.setFocusedItem(l),c!==this.focusedItem&&this.updateFocus()}}})),this._register(gt.addTarget(this.actionsList)),this._register(Y(this.actionsList,Mt.Tap,a=>{let l=a.initialTarget;if(!(!l||!ll(l,this.actionsList)||l===this.actionsList)){for(;l.parentElement!==this.actionsList&&l.parentElement!==null;)l=l.parentElement;if(l.classList.contains("action-item")){const c=this.focusedItem;this.setFocusedItem(l),c!==this.focusedItem&&this.updateFocus()}}}));const s={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new lp(i,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const r=this.scrollableElement.getDomNode();r.style.position="",this._register(Y(i,Mt.Change,a=>{ft.stop(a,!0);const l=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:l-a.translationY})})),this._register(Y(r,le.MOUSE_UP,a=>{a.preventDefault()})),i.style.maxHeight=`${Math.max(10,window.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter(a=>{var l;return!((l=n.submenuIds)===null||l===void 0)&&l.has(a.id)?(console.warn(`Found submenu cycle: ${a.id}`),!1):!0}),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(a=>!(a instanceof u0)).forEach((a,l,c)=>{a.updatePositionInSet(l+1,c.length)})}initializeOrUpdateStyleSheet(e,t){this.styleSheet||(fb(e)?this.styleSheet=oo(e):(zm.globalStyleSheet||(zm.globalStyleSheet=oo()),this.styleSheet=zm.globalStyleSheet)),this.styleSheet.textContent=kne(t,fb(e))}style(e){const t=this.getContainer();this.initializeOrUpdateStyleSheet(t,e);const n=e.foregroundColor?`${e.foregroundColor}`:"",i=e.backgroundColor?`${e.backgroundColor}`:"",s=e.borderColor?`1px solid ${e.borderColor}`:"",r="5px",a=e.shadowColor?`0 2px 8px ${e.shadowColor}`:"";t.style.outline=s,t.style.borderRadius=r,t.style.color=n,t.style.backgroundColor=i,t.style.boxShadow=a,this.viewItems&&this.viewItems.forEach(l=>{(l instanceof V1||l instanceof u0)&&l.style(e)})}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){const n=this.actionsList.children[t];if(e===n){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,n){if(e instanceof Jn)return new u0(t.context,e,{icon:!0});if(e instanceof sf){const i=new sk(e,e.actions,n,Object.assign(Object.assign({},t),{submenuIds:new Set([...t.submenuIds||[],e.id])}));if(t.enableMnemonics){const s=i.getMnemonic();if(s&&i.isEnabled()){let r=[];this.mnemonics.has(s)&&(r=this.mnemonics.get(s)),r.push(i),this.mnemonics.set(s,r)}}return i}else{const i={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const r=t.getKeyBinding(e);if(r){const a=r.getLabel();a&&(i.keybinding=a)}}const s=new V1(t.context,e,i);if(t.enableMnemonics){const r=s.getMnemonic();if(r&&s.isEnabled()){let a=[];this.mnemonics.has(r)&&(a=this.mnemonics.get(r)),a.push(s),this.mnemonics.set(r,a)}}return s}}},"Menu");class V1 extends $o{constructor(e,t,n={}){if(n.isMenu=!0,super(t,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass="",this.options.label&&n.enableMnemonics){const i=this.getAction().label;if(i){const s=ik.exec(i);s&&(this.mnemonic=(s[1]?s[1]:s[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new pt(()=>{this.element&&(this._register(Y(this.element,le.MOUSE_UP,i=>{if(ft.stop(i,!0),Is){if(new sr(i).rightButton)return;this.onClick(i)}else setTimeout(()=>{this.onClick(i)},0)})),this._register(Y(this.element,le.CONTEXT_MENU,i=>{ft.stop(i,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=q(this.element,ee("a.action-menu-item")),this._action.id===Jn.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=q(this.item,ee("span.menu-item-check"+b.menuSelection.cssSelector)),this.check.setAttribute("role","none"),this.label=q(this.item,ee("span.action-label")),this.options.label&&this.options.keybinding&&(q(this.item,ee("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item&&this.item.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){var e;if(this.label&&this.options.label){Tn(this.label);let t=gI(this.getAction().label);if(t){const n=Ene(t);this.options.enableMnemonics||(t=n),this.label.setAttribute("aria-label",n.replace(/&&/g,"&"));const i=ik.exec(t);if(i){t=HD(t),PT.lastIndex=0;let s=PT.exec(t);for(;s&&s[1];)s=PT.exec(t);const r=u(a=>a.replace(/&amp;&amp;/g,"&amp;"),"replaceDoubleEscapes");s?this.label.append(Iw(r(t.substr(0,s.index))," "),ee("u",{"aria-hidden":"true"},s[3]),O4(r(t.substr(s.index+s[0].length))," ")):this.label.innerText=r(t).trim(),(e=this.item)===null||e===void 0||e.setAttribute("aria-keyshortcuts",(i[1]?i[1]:i[3]).toLocaleLowerCase())}else this.label.innerText=t.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.getAction().class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.getAction().enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.getAction().checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){if(!this.menuStyle)return;const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,n=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,i=e&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",s=e&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=t?t.toString():"",this.item.style.backgroundColor=n?n.toString():"",this.item.style.outline=i,this.item.style.outlineOffset=s),this.check&&(this.check.style.color=t?t.toString():"")}style(e){this.menuStyle=e,this.applyStyle()}}u(V1,"BaseMenuActionViewItem");class sk extends V1{constructor(e,t,n,i){super(e,e,i),this.submenuActions=t,this.parentData=n,this.submenuOptions=i,this.mysubmenu=null,this.submenuDisposables=this._register(new J),this.mouseOver=!1,this.expandDirection=i&&i.expandDirection!==void 0?i.expandDirection:O1.Right,this.showScheduler=new pt(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new pt(()=>{this.element&&!ll(kg(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=q(this.item,ee("span.submenu-indicator"+b.menuSubmenu.cssSelector)),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(Y(this.element,le.KEY_UP,t=>{const n=new Pt(t);(n.equals(17)||n.equals(3))&&(ft.stop(t,!0),this.createSubmenu(!0))})),this._register(Y(this.element,le.KEY_DOWN,t=>{const n=new Pt(t);kg()===this.item&&(n.equals(17)||n.equals(3))&&ft.stop(t,!0)})),this._register(Y(this.element,le.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(Y(this.element,le.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(Y(this.element,le.FOCUS_OUT,t=>{this.element&&!ll(kg(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))})))}updateEnabled(){}onClick(e){ft.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,n,i){const s={top:0,left:0};return s.left=mg(e.width,t.width,{position:i===O1.Right?0:1,offset:n.left,size:n.width}),s.left>=n.left&&s.left<n.left+n.width&&(n.left+10+t.width<=e.width&&(s.left=n.left+10),n.top+=10,n.height=0),s.top=mg(e.height,t.height,{position:0,offset:n.top,size:0}),s.top+t.height===n.top&&s.top+n.height+t.height<=e.height&&(s.top+=n.height),s}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=q(this.element,ee("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=getComputedStyle(this.parentData.parent.domNode),n=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new zm(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new x_],this.submenuOptions),this.menuStyle&&this.parentData.submenu.style(this.menuStyle);const i=this.element.getBoundingClientRect(),s={top:i.top-n,left:i.left,height:i.height+2*n,width:i.width},r=this.submenuContainer.getBoundingClientRect(),{top:a,left:l}=this.calculateSubmenuMenuLayout(new Ct(window.innerWidth,window.innerHeight),Ct.lift(r),s,this.expandDirection);this.submenuContainer.style.left=`${l-r.left}px`,this.submenuContainer.style.top=`${a-r.top}px`,this.submenuDisposables.add(Y(this.submenuContainer,le.KEY_UP,c=>{new Pt(c).equals(15)&&(ft.stop(c,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(Y(this.submenuContainer,le.KEY_DOWN,c=>{new Pt(c).equals(15)&&ft.stop(c,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&((t=this.item)===null||t===void 0||t.setAttribute("aria-expanded",e))}applyStyle(){var e;if(super.applyStyle(),!this.menuStyle)return;const n=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=n?`${n}`:""),(e=this.parentData.submenu)===null||e===void 0||e.style(this.menuStyle)}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}u(sk,"SubmenuMenuActionViewItem");class u0 extends Tf{style(e){this.label&&(this.label.style.borderBottomColor=e.separatorColor?`${e.separatorColor}`:"")}}u(u0,"MenuSeparatorActionViewItem");function Ene(o){const e=ik,t=e.exec(o);if(!t)return o;const n=!t[1];return o.replace(e,n?"$2$3":"").trim()}u(Ene,"cleanMnemonic");function kne(o,e){let t=`
.monaco-menu {
	font-size: 13px;
	border-radius: 5px;
	min-width: 160px;
}

${DR(b.menuSelection)}
${DR(b.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar.animated .action-item.active {
	transform: scale(1.272019649, 1.272019649); /* 1.272019649 = √φ */
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	color: var(--vscode-disabledForeground);
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid var(--vscode-menu-separatorBackground);
	padding-top: 1px;
	padding: 30px;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {
	opacity: unset;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	width: 100%;
	height: 0px !important;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.hc-black .context-view.monaco-menu-container,
.hc-light .context-view.monaco-menu-container,
:host-context(.hc-black) .context-view.monaco-menu-container,
:host-context(.hc-light) .context-view.monaco-menu-container {
	box-shadow: none;
}

.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,
.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: .6em 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	margin: 5px 0 !important;
	padding: 0;
	border-radius: 0;
}

.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}`;if(e){t+=`
			/* Arrows */
			.monaco-scrollable-element > .scrollbar > .scra {
				cursor: pointer;
				font-size: 11px !important;
			}

			.monaco-scrollable-element > .visible {
				opacity: 1;

				/* Background rule added for IE9 - to allow clicks on dom node */
				background:rgba(0,0,0,0);

				transition: opacity 100ms linear;
			}
			.monaco-scrollable-element > .invisible {
				opacity: 0;
				pointer-events: none;
			}
			.monaco-scrollable-element > .invisible.fade {
				transition: opacity 800ms linear;
			}

			/* Scrollable Content Inset Shadow */
			.monaco-scrollable-element > .shadow {
				position: absolute;
				display: none;
			}
			.monaco-scrollable-element > .shadow.top {
				display: block;
				top: 0;
				left: 3px;
				height: 3px;
				width: 100%;
			}
			.monaco-scrollable-element > .shadow.left {
				display: block;
				top: 3px;
				left: 0;
				height: 100%;
				width: 3px;
			}
			.monaco-scrollable-element > .shadow.top-left-corner {
				display: block;
				top: 0;
				left: 0;
				height: 3px;
				width: 3px;
			}
		`;const n=o.scrollbarShadow;n&&(t+=`
				.monaco-scrollable-element > .shadow.top {
					box-shadow: ${n} 0 6px 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.left {
					box-shadow: ${n} 6px 0 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.top.left {
					box-shadow: ${n} 6px 6px 6px -6px inset;
				}
			`);const i=o.scrollbarSliderBackground;i&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider {
					background: ${i};
				}
			`);const s=o.scrollbarSliderHoverBackground;s&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider:hover {
					background: ${s};
				}
			`);const r=o.scrollbarSliderActiveBackground;r&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider.active {
					background: ${r};
				}
			`)}return t}u(kne,"getMenuWidgetCSS");function Uo(o,e){const t=Object.create(null);for(const n in e){const i=e[n];i&&(t[n]=Ma(i,o))}return t}u(Uo,"computeStyles");function yI(o,e,t){function n(){const i=Uo(o.getColorTheme(),e);typeof t=="function"?t(i):t.style(i)}return u(n,"applyStyles"),n(),o.onDidColorThemeChange(n)}u(yI,"attachStyler");function Mne(o,e,t){return yI(e,{badgeBackground:t?.badgeBackground||lg,badgeForeground:t?.badgeForeground||cg,badgeBorder:Be},o)}u(Mne,"attachBadgeStyler");function Nu(o,e,t){return yI(e,Object.assign(Object.assign({},Vy),t||{}),o)}u(Nu,"attachListStyler");const Vy={listFocusBackground:zZ,listFocusForeground:KZ,listFocusOutline:jZ,listActiveSelectionBackground:el,listActiveSelectionForeground:qr,listActiveSelectionIconForeground:rm,listFocusAndSelectionOutline:$Z,listFocusAndSelectionBackground:el,listFocusAndSelectionForeground:qr,listInactiveSelectionBackground:qZ,listInactiveSelectionIconForeground:XZ,listInactiveSelectionForeground:YZ,listInactiveFocusBackground:ZZ,listInactiveFocusOutline:JZ,listHoverBackground:QZ,listHoverForeground:eJ,listDropBackground:tJ,listSelectionOutline:Vt,listHoverOutline:Vt,listFilterWidgetBackground:nJ,listFilterWidgetOutline:iJ,listFilterWidgetNoMatchesOutline:sJ,listFilterWidgetShadow:oJ,treeIndentGuidesStroke:rJ,tableColumnsBorder:aJ,tableOddRowsBackgroundColor:lJ,inputActiveOptionBorder:d1,inputActiveOptionForeground:h1,inputActiveOptionBackground:u1,inputBackground:iy,inputForeground:sy,inputBorder:oy,inputValidationInfoBackground:bA,inputValidationInfoForeground:_A,inputValidationInfoBorder:vA,inputValidationWarningBackground:CA,inputValidationWarningForeground:wA,inputValidationWarningBorder:yA,inputValidationErrorBackground:SA,inputValidationErrorForeground:TA,inputValidationErrorBorder:LA},Dne={shadowColor:rr,borderColor:cJ,foregroundColor:dJ,backgroundColor:uJ,selectionForegroundColor:hJ,selectionBackgroundColor:gJ,selectionBorderColor:fJ,separatorColor:pJ,scrollbarShadow:ip,scrollbarSliderBackground:Hd,scrollbarSliderHoverBackground:Bd,scrollbarSliderActiveBackground:Wd};function Ane(o,e,t){return yI(e,Object.assign(Object.assign({},Dne),t),o)}u(Ane,"attachMenuStyler");class b8{constructor(e,t,n,i,s){this.contextViewService=e,this.telemetryService=t,this.notificationService=n,this.keybindingService=i,this.themeService=s,this.focusToReturn=null,this.block=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=document.activeElement;let n;const i=PV(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:s=>{const r=e.getMenuClassName?e.getMenuClassName():"";r&&(s.className+=" "+r),this.options.blockMouse&&(this.block=s.appendChild(ee(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",Y(this.block,le.MOUSE_DOWN,c=>c.stopPropagation()));const a=new J,l=e.actionRunner||new Tu;return l.onBeforeRun(this.onActionRun,this,a),l.onDidRun(this.onDidActionRun,this,a),n=new zm(s,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:l,getKeyBinding:e.getKeyBinding?e.getKeyBinding:c=>this.keybindingService.lookupKeybinding(c.id)}),a.add(Ane(n,this.themeService)),n.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,a),n.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,a),a.add(Y(window,le.BLUR,()=>this.contextViewService.hideContextView(!0))),a.add(Y(window,le.MOUSE_DOWN,c=>{if(c.defaultPrevented)return;const d=new sr(c);let h=d.target;if(!d.rightButton){for(;h;){if(h===s)return;h=h.parentElement}this.contextViewService.hideContextView(!0)}})),ur(a,n)},focus:()=>{n?.focus(!!e.autoSelectFirstItem)},onHide:s=>{var r;(r=e.onHide)===null||r===void 0||r.call(e,!!s),this.block&&(this.block.remove(),this.block=null),this.focusToReturn&&this.focusToReturn.focus()}},i,!!i)}onActionRun(e){this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1),this.focusToReturn&&this.focusToReturn.focus()}onDidActionRun(e){e.error&&!ca(e.error)&&this.notificationService.error(e.error)}}u(b8,"ContextMenuHandler");var Ine=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Gp=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let ok=u(class extends U{constructor(e,t,n,i,s){super(),this._onDidShowContextMenu=new R,this._onDidHideContextMenu=new R,this.contextMenuHandler=new b8(n,e,t,i,s)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){this.contextMenuHandler.showContextMenu(Object.assign(Object.assign({},e),{onHide:t=>{var n;(n=e.onHide)===null||n===void 0||n.call(e,t),this._onDidHideContextMenu.fire()}})),ja.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}},"ContextMenuService");ok=Ine([Gp(0,Tr),Gp(1,gn),Gp(2,fh),Gp(3,Cn),Gp(4,wt)],ok);function H1(o){let e=JSON.parse(o);return e=rk(e),e}u(H1,"parse");function rk(o,e=0){if(!o||e>200)return o;if(typeof o=="object"){switch(o.$mid){case 1:return be.revive(o);case 2:return new RegExp(o.source,o.flags);case 14:return new Date(o.source)}if(o instanceof y_||o instanceof Uint8Array)return o;if(Array.isArray(o))for(let t=0;t<o.length;++t)o[t]=rk(o[t],e+1);else for(const t in o)Object.hasOwnProperty.call(o,t)&&(o[t]=rk(o[t],e+1))}return o}u(rk,"revive");var B1;(function(o){o[o.API=0]="API",o[o.USER=1]="USER"})(B1||(B1={}));var SI=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},W1=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Md=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let ak=u(class{constructor(e){this._commandService=e}open(e,t){return Md(this,void 0,void 0,function*(){if(!bI(e,Pe.command))return!1;if(!t?.allowCommands)return!0;typeof e=="string"&&(e=be.parse(e));let n=[];try{n=H1(decodeURIComponent(e.query))}catch{try{n=H1(e.query)}catch{}}return Array.isArray(n)||(n=[n]),yield this._commandService.executeCommand(e.path,...n),!0})}},"CommandOpener");ak=SI([W1(0,hn)],ak);let lk=u(class{constructor(e){this._editorService=e}open(e,t){return Md(this,void 0,void 0,function*(){typeof e=="string"&&(e=be.parse(e));const{selection:n,uri:i}=s8(e);return e=i,e.scheme===Pe.file&&(e=iee(e)),yield this._editorService.openCodeEditor({resource:e,options:Object.assign({selection:n,source:t?.fromUserGesture?B1.USER:B1.API},t?.editorOptions)},this._editorService.getFocusedCodeEditor(),t?.openToSide),!0})}},"EditorOpener");lk=SI([W1(0,dt)],lk);let ck=u(class{constructor(e,t){this._openers=new vi,this._validators=new vi,this._resolvers=new vi,this._resolvedUriTargets=new ai(n=>n.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new vi,this._defaultExternalOpener={openExternal:n=>Md(this,void 0,void 0,function*(){return mR(n,Pe.http,Pe.https)?FV(n):window.location.href=n,!0})},this._openers.push({open:(n,i)=>Md(this,void 0,void 0,function*(){return i?.openExternal||mR(n,Pe.mailto,Pe.http,Pe.https,Pe.vsls)?(yield this._doOpenExternal(n,i),!0):!1})}),this._openers.push(new ak(t)),this._openers.push(new lk(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}registerValidator(e){return{dispose:this._validators.push(e)}}registerExternalUriResolver(e){return{dispose:this._resolvers.push(e)}}setDefaultExternalOpener(e){this._defaultExternalOpener=e}registerExternalOpener(e){return{dispose:this._externalOpeners.push(e)}}open(e,t){var n;return Md(this,void 0,void 0,function*(){const i=typeof e=="string"?be.parse(e):e,s=(n=this._resolvedUriTargets.get(i))!==null&&n!==void 0?n:e;for(const r of this._validators)if(!(yield r.shouldOpen(s,t)))return!1;for(const r of this._openers)if(yield r.open(e,t))return!0;return!1})}resolveExternalUri(e,t){return Md(this,void 0,void 0,function*(){for(const n of this._resolvers)try{const i=yield n.resolveExternalUri(e,t);if(i)return this._resolvedUriTargets.has(i.resolved)||this._resolvedUriTargets.set(i.resolved,e),i}catch{}throw new Error("Could not resolve external URI: "+e.toString())})}_doOpenExternal(e,t){return Md(this,void 0,void 0,function*(){const n=typeof e=="string"?be.parse(e):e;let i;try{i=(yield this.resolveExternalUri(n,t)).resolved}catch{i=n}let s;if(typeof e=="string"&&n.toString()===i.toString()?s=e:s=encodeURI(i.toString(!0)),t?.allowContributedOpeners){const r=typeof t?.allowContributedOpeners=="string"?t?.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(yield a.openExternal(s,{sourceUri:n,preferredOpenerId:r},Ge.None))return!0}return this._defaultExternalOpener.openExternal(s,{sourceUri:n},Ge.None)})}dispose(){this._validators.clear()}},"OpenerService");ck=SI([W1(0,dt),W1(1,hn)],ck);var Ut;(function(o){o[o.Hint=1]="Hint",o[o.Info=2]="Info",o[o.Warning=4]="Warning",o[o.Error=8]="Error"})(Ut||(Ut={}));(function(o){function e(r,a){return a-r}u(e,"compare"),o.compare=e;const t=Object.create(null);t[o.Error]=m("sev.error","Error"),t[o.Warning]=m("sev.warning","Warning"),t[o.Info]=m("sev.info","Info");function n(r){return t[r]||""}u(n,"toString"),o.toString=n;function i(r){switch(r){case Bt.Error:return o.Error;case Bt.Warning:return o.Warning;case Bt.Info:return o.Info;case Bt.Ignore:return o.Hint}}u(i,"fromSeverity"),o.fromSeverity=i;function s(r){switch(r){case o.Error:return Bt.Error;case o.Warning:return Bt.Warning;case o.Info:return Bt.Info;case o.Hint:return Bt.Ignore}}u(s,"toSeverity"),o.toSeverity=s})(Ut||(Ut={}));var U1;(function(o){const e="";function t(i){return n(i,!0)}u(t,"makeKey"),o.makeKey=t;function n(i,s){const r=[e];return i.source?r.push(i.source.replace("¦","\\¦")):r.push(e),i.code?typeof i.code=="string"?r.push(i.code.replace("¦","\\¦")):r.push(i.code.value.replace("¦","\\¦")):r.push(e),i.severity!==void 0&&i.severity!==null?r.push(Ut.toString(i.severity)):r.push(e),i.message&&s?r.push(i.message.replace("¦","\\¦")):r.push(e),i.startLineNumber!==void 0&&i.startLineNumber!==null?r.push(i.startLineNumber.toString()):r.push(e),i.startColumn!==void 0&&i.startColumn!==null?r.push(i.startColumn.toString()):r.push(e),i.endLineNumber!==void 0&&i.endLineNumber!==null?r.push(i.endLineNumber.toString()):r.push(e),i.endColumn!==void 0&&i.endColumn!==null?r.push(i.endColumn.toString()):r.push(e),r.push(e),r.join("¦")}u(n,"makeKeyOptionalMessage"),o.makeKeyOptionalMessage=n})(U1||(U1={}));const ha=Je("markerService");var Nne=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},AR=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};class _8 extends U{constructor(e){super(),this.model=e,this._markersData=new Map,this._register(He(()=>{this.model.deltaDecorations([...this._markersData.keys()],[]),this._markersData.clear()}))}update(e,t){const n=[...this._markersData.keys()];this._markersData.clear();const i=this.model.deltaDecorations(n,t);for(let s=0;s<i.length;s++)this._markersData.set(i[s],e[s]);return n.length!==0||i.length!==0}getMarker(e){return this._markersData.get(e.id)}}u(_8,"MarkerDecorations");let dk=u(class extends U{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new R),this._markerDecorations=new ai,e.getModels().forEach(n=>this._onModelAdded(n)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const n=this._markerDecorations.get(e);return n&&n.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{const n=this._markerDecorations.get(t);n&&this._updateDecorations(n)})}_onModelAdded(e){const t=new _8(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){var t;const n=this._markerDecorations.get(e.uri);n&&(n.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===Pe.inMemory||e.uri.scheme===Pe.internal||e.uri.scheme===Pe.vscode)&&((t=this._markerService)===null||t===void 0||t.read({resource:e.uri}).map(i=>i.owner).forEach(i=>this._markerService.remove(i,[e.uri])))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500}),n=t.map(i=>({range:this._createDecorationRange(e.model,i),options:this._createDecorationOption(i)}));e.update(t,n)&&this._onDidChangeMarker.fire(e.model)}_createDecorationRange(e,t){let n=L.lift(t);if(t.severity===Ut.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(n=n.setEndPosition(n.startLineNumber,n.startColumn+2)),n=e.validateRange(n),n.isEmpty()){const i=e.getLineLastNonWhitespaceColumn(n.startLineNumber)||e.getLineMaxColumn(n.startLineNumber);if(i===1||n.endColumn>=i)return n;const s=e.getWordAtPosition(n.getStartPosition());s&&(n=new L(n.startLineNumber,s.startColumn,n.endLineNumber,s.endColumn))}else if(t.endColumn===Number.MAX_VALUE&&t.startColumn===1&&n.startLineNumber===n.endLineNumber){const i=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);i<n.endColumn&&(n=new L(n.startLineNumber,i,n.endLineNumber,n.endColumn),t.startColumn=i)}return n}_createDecorationOption(e){let t,n,i,s,r;switch(e.severity){case Ut.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",i=0;break;case Ut.Warning:t="squiggly-warning",n=Zt(ZJ),i=20,r={color:Zt(bJ),position:Zs.Inline};break;case Ut.Info:t="squiggly-info",n=Zt(JJ),i=10;break;case Ut.Error:default:t="squiggly-error",n=Zt(XJ),i=30,r={color:Zt(mJ),position:Zs.Inline};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(s="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(s="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:n,position:io.Right},minimap:r,zIndex:i,inlineClassName:s}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}},"MarkerDecorationsService");dk=Nne([AR(0,Kt),AR(1,ha)],dk);class Wg{constructor(e,t){this._startLineNumber=e,this._tokens=t,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}static create(e,t){return new Wg(e,new Bb(t))}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._endLineNumber}toString(){return this._tokens.toString(this._startLineNumber)}_updateEndLineNumber(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}isEmpty(){return this._tokens.isEmpty()}getLineTokens(e){return this._startLineNumber<=e&&e<=this._endLineNumber?this._tokens.getLineTokens(e-this._startLineNumber):null}getRange(){const e=this._tokens.getRange();return e&&new L(this._startLineNumber+e.startLineNumber,e.startColumn,this._startLineNumber+e.endLineNumber,e.endColumn)}removeTokens(e){const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(t,e.startColumn-1,n,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber,[i,s,r]=this._tokens.split(t,e.startColumn-1,n,e.endColumn-1);return[new Wg(this._startLineNumber,i),new Wg(this._startLineNumber+r,s)]}applyEdit(e,t){const[n,i,s]=Du(t);this.acceptEdit(e,n,i,s,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,n,i,s){this._acceptDeleteRange(e),this._acceptInsertText(new H(e.startLineNumber,e.startColumn),t,n,i,s),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;if(n<0){const s=n-t;this._startLineNumber-=s;return}const i=this._tokens.getMaxDeltaLine();if(!(t>=i+1)){if(t<0&&n>=i+1){this._startLineNumber=0,this._tokens.clear();return}if(t<0){const s=-t;this._startLineNumber-=s,this._tokens.acceptDeleteRange(e.startColumn-1,0,0,n,e.endColumn-1)}else this._tokens.acceptDeleteRange(0,t,e.startColumn-1,n,e.endColumn-1)}}_acceptInsertText(e,t,n,i,s){if(t===0&&n===0)return;const r=e.lineNumber-this._startLineNumber;if(r<0){this._startLineNumber+=t;return}const a=this._tokens.getMaxDeltaLine();r>=a+1||this._tokens.acceptInsertText(r,e.column-1,t,n,i,s)}}u(Wg,"SparseMultilineTokens");class Bb{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){const t=[];for(let n=0;n<this._tokenCount;n++)t.push(`(${this._getDeltaLine(n)+e},${this._getStartCharacter(n)}-${this._getEndCharacter(n)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return e===0?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(e===0)return null;const t=this._getStartCharacter(0),n=this._getDeltaLine(e-1),i=this._getEndCharacter(e-1);return new L(0,t+1,n,i+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(e){let t=0,n=this._getTokenCount()-1;for(;t<n;){const i=t+Math.floor((n-t)/2),s=this._getDeltaLine(i);if(s<e)t=i+1;else if(s>e)n=i-1;else{let r=i;for(;r>t&&this._getDeltaLine(r-1)===e;)r--;let a=i;for(;a<n&&this._getDeltaLine(a+1)===e;)a++;return new uk(this._tokens.subarray(4*r,4*a+4))}}return this._getDeltaLine(t)===e?new uk(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,n,i){const s=this._tokens,r=this._tokenCount;let a=0,l=!1,c=0;for(let d=0;d<r;d++){const h=4*d,g=s[h],f=s[h+1],p=s[h+2],_=s[h+3];if((g>e||g===e&&p>=t)&&(g<n||g===n&&f<=i))l=!0;else{if(a===0&&(c=g),l){const v=4*a;s[v]=g-c,s[v+1]=f,s[v+2]=p,s[v+3]=_}a++}}return this._tokenCount=a,c}split(e,t,n,i){const s=this._tokens,r=this._tokenCount,a=[],l=[];let c=a,d=0,h=0;for(let g=0;g<r;g++){const f=4*g,p=s[f],_=s[f+1],v=s[f+2],C=s[f+3];if(p>e||p===e&&v>=t){if(p<n||p===n&&_<=i)continue;c!==l&&(c=l,d=0,h=p)}c[d++]=p-h,c[d++]=_,c[d++]=v,c[d++]=C}return[new Bb(new Uint32Array(a)),new Bb(new Uint32Array(l)),h]}acceptDeleteRange(e,t,n,i,s){const r=this._tokens,a=this._tokenCount,l=i-t;let c=0,d=!1;for(let h=0;h<a;h++){const g=4*h;let f=r[g],p=r[g+1],_=r[g+2];const v=r[g+3];if(f<t||f===t&&_<=n){c++;continue}else if(f===t&&p<n)f===i&&_>s?_-=s-n:_=n;else if(f===t&&p===n)if(f===i&&_>s)_-=s-n;else{d=!0;continue}else if(f<i||f===i&&p<s)if(f===i&&_>s)f===t?(p=n,_=p+(_-s)):(p=0,_=p+(_-s));else{d=!0;continue}else if(f>i){if(l===0&&!d){c=a;break}f-=l}else if(f===i&&p>=s)e&&f===0&&(p+=e,_+=e),f-=l,p-=s-n,_-=s-n;else throw new Error("Not possible!");const C=4*c;r[C]=f,r[C+1]=p,r[C+2]=_,r[C+3]=v,c++}this._tokenCount=c}acceptInsertText(e,t,n,i,s,r){const a=n===0&&i===1&&(r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122),l=this._tokens,c=this._tokenCount;for(let d=0;d<c;d++){const h=4*d;let g=l[h],f=l[h+1],p=l[h+2];if(!(g<e||g===e&&p<t)){if(g===e&&p===t)if(a)p+=1;else continue;else if(g===e&&f<t&&t<p)n===0?p+=i:p=t;else{if(g===e&&f===t&&a)continue;if(g===e)if(g+=n,n===0)f+=i,p+=i;else{const _=p-f;f=s+(f-t),p=f+_}else g+=n}l[h]=g,l[h+1]=f,l[h+2]=p}}}}u(Bb,"SparseMultilineTokensStorage");class uk{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}u(uk,"SparseLineTokens");var Pne=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},RT=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let hk=u(class{constructor(e,t,n,i){this._legend=e,this._themeService=t,this._languageService=n,this._logService=i,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new Ur}getMetadata(e,t,n){const i=this._languageService.languageIdCodec.encodeLanguageId(n),s=this._hashTable.get(e,t,i);let r;if(s)r=s.metadata,this._logService.getLevel()===ir.Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${e} / ${t}: foreground ${$n.getForeground(r)}, fontStyle ${$n.getFontStyle(r).toString(2)}`);else{let a=this._legend.tokenTypes[e];const l=[];if(a){let c=t;for(let h=0;c>0&&h<this._legend.tokenModifiers.length;h++)c&1&&l.push(this._legend.tokenModifiers[h]),c=c>>1;c>0&&this._logService.getLevel()===ir.Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${t.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),l.push("not-in-legend"));const d=this._themeService.getColorTheme().getTokenStyleMetadata(a,l,n);if(typeof d>"u")r=2147483647;else{if(r=0,typeof d.italic<"u"){const h=(d.italic?1:0)<<11;r|=h|1}if(typeof d.bold<"u"){const h=(d.bold?2:0)<<11;r|=h|2}if(typeof d.underline<"u"){const h=(d.underline?4:0)<<11;r|=h|4}if(typeof d.strikethrough<"u"){const h=(d.strikethrough?8:0)<<11;r|=h|8}if(d.foreground){const h=d.foreground<<15;r|=h|16}r===0&&(r=2147483647)}}else this._logService.getLevel()===ir.Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${e} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),r=2147483647,a="not-in-legend";this._hashTable.add(e,t,i,r),this._logService.getLevel()===ir.Trace&&this._logService.trace(`SemanticTokensProviderStyling ${e} (${a}) / ${t} (${l.join(" ")}): foreground ${$n.getForeground(r)}, fontStyle ${$n.getFontStyle(r).toString(2)}`)}return r}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,console.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}warnInvalidLengthSemanticTokens(e,t){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,console.warn(`Semantic token with invalid length detected at lineNumber ${e}, column ${t}`))}warnInvalidEditStart(e,t,n,i,s){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,console.warn(`Invalid semantic tokens edit detected (previousResultId: ${e}, resultId: ${t}) at edit #${n}: The provided start offset ${i} is outside the previous data (length ${s}).`))}},"SemanticTokensProviderStyling");hk=Pne([RT(1,wt),RT(2,Gt),RT(3,Ao)],hk);function v8(o,e,t){const n=o.data,i=o.data.length/5|0,s=Math.max(Math.ceil(i/1024),400),r=[];let a=0,l=1,c=0;for(;a<i;){const d=a;let h=Math.min(d+s,i);if(h<i){let w=h;for(;w-1>d&&n[5*w]===0;)w--;if(w-1===d){let y=h;for(;y+1<i&&n[5*y]===0;)y++;h=y}else h=w}let g=new Uint32Array((h-d)*4),f=0,p=0,_=0,v=0;for(;a<h;){const w=5*a,y=n[w],S=n[w+1],E=l+y|0,k=y===0?c+S|0:S,T=n[w+2],x=k+T|0,M=n[w+3],F=n[w+4];if(x<=k)e.warnInvalidLengthSemanticTokens(E,k+1);else if(_===E&&v>k)e.warnOverlappingSemanticTokens(E,k+1);else{const V=e.getMetadata(M,F,t);V!==2147483647&&(p===0&&(p=E),g[f]=E-p,g[f+1]=k,g[f+2]=x,g[f+3]=V,f+=4,_=E,v=x)}l=E,c=k,a++}f!==g.length&&(g=g.subarray(0,f));const C=Wg.create(p,g);r.push(C)}return r}u(v8,"toMultilineTokens2");class C8{constructor(e,t,n,i){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=n,this.metadata=i,this.next=null}}u(C8,"HashTableEntry");class Ur{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=Ur._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Ur._SIZES.length?2/3*this._currentLength:0),this._elements=[],Ur._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let n=0;n<t;n++)e[n]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,n){return this._hash2(this._hash2(e,t),n)%this._currentLength}get(e,t,n){const i=this._hashFunc(e,t,n);let s=this._elements[i];for(;s;){if(s.tokenTypeIndex===e&&s.tokenModifierSet===t&&s.languageId===n)return s;s=s.next}return null}add(e,t,n,i){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const s=this._elements;this._currentLengthIndex++,this._currentLength=Ur._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Ur._SIZES.length?2/3*this._currentLength:0),this._elements=[],Ur._nullOutEntries(this._elements,this._currentLength);for(const r of s){let a=r;for(;a;){const l=a.next;a.next=null,this._add(a),a=l}}}this._add(new C8(e,t,n,i))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}}u(Ur,"HashTable");Ur._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];function Rne(o){for(let e=0,t=o.length;e<t;e+=4){const n=o[e+0],i=o[e+1],s=o[e+2],r=o[e+3];o[e+0]=r,o[e+1]=s,o[e+2]=i,o[e+3]=n}}u(Rne,"reverseEndianness");function Fne(o){const e=new Uint8Array(o.buffer,o.byteOffset,o.length*4);return yO()||Rne(e),y_.wrap(e)}u(Fne,"toLittleEndianBuffer");function w8(o){const e=new Uint32Array(One(o));let t=0;if(e[t++]=o.id,o.type==="full")e[t++]=1,e[t++]=o.data.length,e.set(o.data,t),t+=o.data.length;else{e[t++]=2,e[t++]=o.deltas.length;for(const n of o.deltas)e[t++]=n.start,e[t++]=n.deleteCount,n.data?(e[t++]=n.data.length,e.set(n.data,t),t+=n.data.length):e[t++]=0}return Fne(e)}u(w8,"encodeSemanticTokensDto");function One(o){let e=0;if(e+=1+1,o.type==="full")e+=1+o.data.length;else{e+=1,e+=(1+1+1)*o.deltas.length;for(const t of o.deltas)t.data&&(e+=t.data.length)}return e}u(One,"encodeSemanticTokensDtoSize");var Oc=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};function Hy(o){return o&&!!o.data}u(Hy,"isSemanticTokens");function y8(o){return o&&Array.isArray(o.edits)}u(y8,"isSemanticTokensEdits");class S8{constructor(e,t,n){this.provider=e,this.tokens=t,this.error=n}}u(S8,"DocumentSemanticTokensResult");function T8(o,e){return o.has(e)}u(T8,"hasDocumentSemanticTokensProvider");function Vne(o,e){const t=o.orderedGroups(e);return t.length>0?t[0]:[]}u(Vne,"getDocumentSemanticTokensProviders");function L8(o,e,t,n,i){return Oc(this,void 0,void 0,function*(){const s=Vne(o,e),r=yield Promise.all(s.map(a=>Oc(this,void 0,void 0,function*(){let l,c=null;try{l=yield a.provideDocumentSemanticTokens(e,a===t?n:null,i)}catch(d){c=d,l=null}return(!l||!Hy(l)&&!y8(l))&&(l=null),new S8(a,l,c)})));for(const a of r){if(a.error)throw a.error;if(a.tokens)return a}return r.length>0?r[0]:null})}u(L8,"getDocumentSemanticTokens");function Hne(o,e){const t=o.orderedGroups(e);return t.length>0?t[0]:null}u(Hne,"_getDocumentSemanticTokensProviderHighestGroup");class x8{constructor(e,t){this.provider=e,this.tokens=t}}u(x8,"DocumentRangeSemanticTokensResult");function Bne(o,e){return o.has(e)}u(Bne,"hasDocumentRangeSemanticTokensProvider");function E8(o,e){const t=o.orderedGroups(e);return t.length>0?t[0]:[]}u(E8,"getDocumentRangeSemanticTokensProviders");function TI(o,e,t,n){return Oc(this,void 0,void 0,function*(){const i=E8(o,e),s=yield Promise.all(i.map(r=>Oc(this,void 0,void 0,function*(){let a;try{a=yield r.provideDocumentRangeSemanticTokens(e,t,n)}catch(l){Hn(l),a=null}return(!a||!Hy(a))&&(a=null),new x8(r,a)})));for(const r of s)if(r.tokens)return r;return s.length>0?s[0]:null})}u(TI,"getDocumentRangeSemanticTokens");Qe.registerCommand("_provideDocumentSemanticTokensLegend",(o,...e)=>Oc(void 0,void 0,void 0,function*(){const[t]=e;bt(t instanceof be);const n=o.get(Kt).getModel(t);if(!n)return;const{documentSemanticTokensProvider:i}=o.get(ue),s=Hne(i,n);return s?s[0].getLegend():o.get(hn).executeCommand("_provideDocumentRangeSemanticTokensLegend",t)}));Qe.registerCommand("_provideDocumentSemanticTokens",(o,...e)=>Oc(void 0,void 0,void 0,function*(){const[t]=e;bt(t instanceof be);const n=o.get(Kt).getModel(t);if(!n)return;const{documentSemanticTokensProvider:i}=o.get(ue);if(!T8(i,n))return o.get(hn).executeCommand("_provideDocumentRangeSemanticTokens",t,n.getFullModelRange());const s=yield L8(i,n,null,null,Ge.None);if(!s)return;const{provider:r,tokens:a}=s;if(!a||!Hy(a))return;const l=w8({id:0,type:"full",data:a.data});return a.resultId&&r.releaseDocumentSemanticTokens(a.resultId),l}));Qe.registerCommand("_provideDocumentRangeSemanticTokensLegend",(o,...e)=>Oc(void 0,void 0,void 0,function*(){const[t,n]=e;bt(t instanceof be);const i=o.get(Kt).getModel(t);if(!i)return;const{documentRangeSemanticTokensProvider:s}=o.get(ue),r=E8(s,i);if(r.length===0)return;if(r.length===1)return r[0].getLegend();if(!n||!L.isIRange(n))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),r[0].getLegend();const a=yield TI(s,i,L.lift(n),Ge.None);if(a)return a.provider.getLegend()}));Qe.registerCommand("_provideDocumentRangeSemanticTokens",(o,...e)=>Oc(void 0,void 0,void 0,function*(){const[t,n]=e;bt(t instanceof be),bt(L.isIRange(n));const i=o.get(Kt).getModel(t);if(!i)return;const{documentRangeSemanticTokensProvider:s}=o.get(ue),r=yield TI(s,i,L.lift(n),Ge.None);if(!(!r||!r.tokens))return w8({id:0,type:"full",data:r.tokens.data})}));var LI=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},xi=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};function Kl(o){return o.toString()}u(Kl,"MODEL_ID");function IR(o){const e=new T_,t=o.createSnapshot();let n;for(;n=t.read();)e.update(n);return e.digest()}u(IR,"computeModelSha1");class k8{constructor(e,t,n){this._modelEventListeners=new J,this.model=e,this._languageSelection=null,this._languageSelectionListener=null,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(i=>n(e,i)))}_disposeLanguageSelection(){this._languageSelectionListener&&(this._languageSelectionListener.dispose(),this._languageSelectionListener=null)}dispose(){this._modelEventListeners.dispose(),this._disposeLanguageSelection()}setLanguage(e){this._disposeLanguageSelection(),this._languageSelection=e,this._languageSelectionListener=this._languageSelection.onDidChange(()=>this.model.setMode(e.languageId)),this.model.setMode(e.languageId)}}u(k8,"ModelData");const Wne=hi||Xe?1:2;class M8{constructor(e,t,n,i,s,r,a,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=n,this.sharesUndoRedoStack=i,this.heapSize=s,this.sha1=r,this.versionId=a,this.alternativeVersionId=l}}u(M8,"DisposedModelInfo");let G1=u(class ym extends U{constructor(e,t,n,i,s,r,a,l,c){super(),this._configurationService=e,this._resourcePropertiesService=t,this._themeService=n,this._logService=i,this._undoRedoService=s,this._languageService=r,this._languageConfigurationService=a,this._languageFeatureDebounceService=l,this._onModelAdded=this._register(new R),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new R),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new R),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._semanticStyling=this._register(new D8(this._themeService,this._languageService,this._logService)),this._register(this._configurationService.onDidChangeConfiguration(()=>this._updateModelOptions())),this._updateModelOptions(),this._register(new fk(this._semanticStyling,this,this._themeService,this._configurationService,this._languageFeatureDebounceService,c))}static _readModelOptions(e,t){var n;let i=ri.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){const f=parseInt(e.editor.tabSize,10);isNaN(f)||(i=f),i<1&&(i=1)}let s=i;if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){const f=parseInt(e.editor.indentSize,10);isNaN(f)||(s=f),s<1&&(s=1)}let r=ri.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(r=e.editor.insertSpaces==="false"?!1:Boolean(e.editor.insertSpaces));let a=Wne;const l=e.eol;l===`\r
`?a=2:l===`
`&&(a=1);let c=ri.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(c=e.editor.trimAutoWhitespace==="false"?!1:Boolean(e.editor.trimAutoWhitespace));let d=ri.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(d=e.editor.detectIndentation==="false"?!1:Boolean(e.editor.detectIndentation));let h=ri.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(h=e.editor.largeFileOptimizations==="false"?!1:Boolean(e.editor.largeFileOptimizations));let g=ri.bracketPairColorizationOptions;return!((n=e.editor)===null||n===void 0)&&n.bracketPairColorization&&typeof e.editor.bracketPairColorization=="object"&&(g={enabled:!!e.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!e.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:t,tabSize:i,indentSize:s,insertSpaces:r,detectIndentation:d,defaultEOL:a,trimAutoWhitespace:c,largeFileOptimizations:h,bracketPairColorizationOptions:g}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const n=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return n&&typeof n=="string"&&n!=="auto"?n:Us===3||Us===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,n){let i=this._modelCreationOptionsByLanguageAndResource[e+t];if(!i){const s=this._configurationService.getValue("editor",{overrideIdentifier:e,resource:t}),r=this._getEOL(t,e);i=ym._readModelOptions({editor:s,eol:r},n),this._modelCreationOptionsByLanguageAndResource[e+t]=i}return i}_updateModelOptions(){const e=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const t=Object.keys(this._models);for(let n=0,i=t.length;n<i;n++){const s=t[n],r=this._models[s],a=r.model.getLanguageId(),l=r.model.uri,c=e[a+l],d=this.getCreationOptions(a,l,r.model.isForSimpleWidget);ym._setModelOptionsForModel(r.model,d,c)}}static _setModelOptionsForModel(e,t,n){n&&n.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(n&&n.detectIndentation===t.detectIndentation&&n.insertSpaces===t.insertSpaces&&n.tabSize===t.tabSize&&n.indentSize===t.indentSize&&n.trimAutoWhitespace===t.trimAutoWhitespace&&Xs(n.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(Kl(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(Kl(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(Kl(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(n=>{n.sharesUndoRedoStack||t.push(n)}),t.sort((n,i)=>n.time-i.time);t.length>0&&this._disposedModelsHeapSize>e;){const n=t.shift();this._removeDisposedModel(n.uri),n.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(n.initialUndoRedoSnapshot)}}}_createModelData(e,t,n,i){const s=this.getCreationOptions(t,n,i),r=new Cl(e,t,s,n,this._undoRedoService,this._languageService,this._languageConfigurationService);if(n&&this._disposedModels.has(Kl(n))){const c=this._removeDisposedModel(n),d=this._undoRedoService.getElements(n),h=IR(r)===c.sha1;if(h||c.sharesUndoRedoStack){for(const g of d.past)Ra(g)&&g.matchesResource(n)&&g.setModel(r);for(const g of d.future)Ra(g)&&g.matchesResource(n)&&g.setModel(r);this._undoRedoService.setElementsValidFlag(n,!0,g=>Ra(g)&&g.matchesResource(n)),h&&(r._overwriteVersionId(c.versionId),r._overwriteAlternativeVersionId(c.alternativeVersionId),r._overwriteInitialUndoRedoSnapshot(c.initialUndoRedoSnapshot))}else c.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(c.initialUndoRedoSnapshot)}const a=Kl(r.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const l=new k8(r,c=>this._onWillDispose(c),(c,d)=>this._onDidChangeLanguage(c,d));return this._models[a]=l,l}createModel(e,t,n,i=!1){let s;return t?(s=this._createModelData(e,t.languageId,n,i),this.setMode(s.model,t)):s=this._createModelData(e,Js,n,i),this._onModelAdded.fire(s.model),s.model}setMode(e,t){if(!t)return;const n=this._models[Kl(e.uri)];n&&n.setLanguage(t)}getModels(){const e=[],t=Object.keys(this._models);for(let n=0,i=t.length;n<i;n++){const s=t[n];e.push(this._models[s].model)}return e}getModel(e){const t=Kl(e),n=this._models[t];return n?n.model:null}getSemanticTokensProviderStyling(e){return this._semanticStyling.get(e)}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===Pe.file||e.scheme===Pe.vscodeRemote||e.scheme===Pe.vscodeUserData||e.scheme===Pe.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const t=Kl(e.uri),n=this._models[t],i=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let s=!1,r=0;if(i||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const l=this._undoRedoService.getElements(e.uri);if(l.past.length>0||l.future.length>0){for(const c of l.past)Ra(c)&&c.matchesResource(e.uri)&&(s=!0,r+=c.heapSize(e.uri),c.setModel(e.uri));for(const c of l.future)Ra(c)&&c.matchesResource(e.uri)&&(s=!0,r+=c.heapSize(e.uri),c.setModel(e.uri))}}const a=ym.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK;if(s)if(!i&&r>a){const l=n.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}else this._ensureDisposedModelsHeapSize(a-r),this._undoRedoService.setElementsValidFlag(e.uri,!1,l=>Ra(l)&&l.matchesResource(e.uri)),this._insertDisposedModel(new M8(e.uri,n.model.getInitialUndoRedoSnapshot(),Date.now(),i,r,IR(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!i){const l=n.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}delete this._models[t],n.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const n=t.oldLanguage,i=e.getLanguageId(),s=this.getCreationOptions(n,e.uri,e.isForSimpleWidget),r=this.getCreationOptions(i,e.uri,e.isForSimpleWidget);ym._setModelOptionsForModel(e,r,s),this._onModelModeChanged.fire({model:e,oldLanguageId:n})}},"ModelService");G1.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024;G1=LI([xi(0,rt),xi(1,J5),xi(2,wt),xi(3,Ao),xi(4,ky),xi(5,Gt),xi(6,rn),xi(7,ho),xi(8,ue)],G1);const xI="editor.semanticHighlighting";function gk(o,e,t){var n;const i=(n=t.getValue(xI,{overrideIdentifier:o.getLanguageId(),resource:o.uri}))===null||n===void 0?void 0:n.enabled;return typeof i=="boolean"?i:e.getColorTheme().semanticHighlighting}u(gk,"isSemanticColoringEnabled");let fk=u(class extends U{constructor(e,t,n,i,s,r){super(),this._watchers=Object.create(null),this._semanticStyling=e;const a=u(d=>{this._watchers[d.uri.toString()]=new Wb(d,this._semanticStyling,n,s,r)},"register"),l=u((d,h)=>{h.dispose(),delete this._watchers[d.uri.toString()]},"deregister"),c=u(()=>{for(const d of t.getModels()){const h=this._watchers[d.uri.toString()];gk(d,n,i)?h||a(d):h&&l(d,h)}},"handleSettingOrThemeChange");this._register(t.onModelAdded(d=>{gk(d,n,i)&&a(d)})),this._register(t.onModelRemoved(d=>{const h=this._watchers[d.uri.toString()];h&&l(d,h)})),this._register(i.onDidChangeConfiguration(d=>{d.affectsConfiguration(xI)&&c()})),this._register(n.onDidColorThemeChange(c))}dispose(){for(const e of Object.values(this._watchers))e.dispose();super.dispose()}},"SemanticColoringFeature");fk=LI([xi(1,Kt),xi(2,wt),xi(3,rt),xi(4,ho),xi(5,ue)],fk);class D8 extends U{constructor(e,t,n){super(),this._themeService=e,this._languageService=t,this._logService=n,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}get(e){return this._caches.has(e)||this._caches.set(e,new hk(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}}u(D8,"SemanticStyling");class A8{constructor(e,t,n){this.provider=e,this.resultId=t,this.data=n}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}u(A8,"SemanticTokensResponse");let Wb=u(class Cd extends U{constructor(e,t,n,i,s){super(),this._isDisposed=!1,this._model=e,this._semanticStyling=t,this._provider=s.documentSemanticTokensProvider,this._debounceInformation=i.for(this._provider,"DocumentSemanticTokens",{min:Cd.REQUEST_MIN_DELAY,max:Cd.REQUEST_MAX_DELAY}),this._fetchDocumentSemanticTokens=this._register(new pt(()=>this._fetchDocumentSemanticTokensNow(),Cd.REQUEST_MIN_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));const r=u(()=>{st(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(const a of this._provider.all(e))typeof a.onDidChange=="function"&&this._documentProvidersChangeListeners.push(a.onDidChange(()=>this._fetchDocumentSemanticTokens.schedule(0)))},"bindDocumentChangeListeners");r(),this._register(this._provider.onDidChange(()=>{r(),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(n.onDidColorThemeChange(a=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!T8(this._provider,this._model)){this._currentDocumentResponse&&this._model.tokenization.setSemanticTokens(null,!1);return}const e=new ti,t=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,n=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,i=L8(this._provider,this._model,t,n,e.token);this._currentDocumentRequestCancellationTokenSource=e;const s=[],r=this._model.onDidChangeContent(l=>{s.push(l)}),a=new Ai(!1);i.then(l=>{if(this._debounceInformation.update(this._model,a.elapsed()),this._currentDocumentRequestCancellationTokenSource=null,r.dispose(),!l)this._setDocumentSemanticTokens(null,null,null,s);else{const{provider:c,tokens:d}=l,h=this._semanticStyling.get(c);this._setDocumentSemanticTokens(c,d||null,h,s)}},l=>{l&&(ca(l)||typeof l.message=="string"&&l.message.indexOf("busy")!==-1)||Ie(l),this._currentDocumentRequestCancellationTokenSource=null,r.dispose(),s.length>0&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model)))})}static _copy(e,t,n,i,s){s=Math.min(s,n.length-i,e.length-t);for(let r=0;r<s;r++)n[i+r]=e[t+r]}_setDocumentSemanticTokens(e,t,n,i){const s=this._currentDocumentResponse,r=u(()=>{i.length>0&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))},"rescheduleIfNeeded");if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed){e&&t&&e.releaseDocumentSemanticTokens(t.resultId);return}if(!e||!n){this._model.tokenization.setSemanticTokens(null,!1);return}if(!t){this._model.tokenization.setSemanticTokens(null,!0),r();return}if(y8(t)){if(!s){this._model.tokenization.setSemanticTokens(null,!0);return}if(t.edits.length===0)t={resultId:t.resultId,data:s.data};else{let a=0;for(const g of t.edits)a+=(g.data?g.data.length:0)-g.deleteCount;const l=s.data,c=new Uint32Array(l.length+a);let d=l.length,h=c.length;for(let g=t.edits.length-1;g>=0;g--){const f=t.edits[g];if(f.start>l.length){n.warnInvalidEditStart(s.resultId,t.resultId,g,f.start,l.length),this._model.tokenization.setSemanticTokens(null,!0);return}const p=d-(f.start+f.deleteCount);p>0&&(Cd._copy(l,d-p,c,h-p,p),h-=p),f.data&&(Cd._copy(f.data,0,c,h-f.data.length,f.data.length),h-=f.data.length),d=f.start}d>0&&Cd._copy(l,0,c,0,d),t={resultId:t.resultId,data:c}}}if(Hy(t)){this._currentDocumentResponse=new A8(e,t.resultId,t.data);const a=v8(t,n,this._model.getLanguageId());if(i.length>0)for(const l of i)for(const c of a)for(const d of l.changes)c.applyEdit(d.range,d.text);this._model.tokenization.setSemanticTokens(a,!0)}else this._model.tokenization.setSemanticTokens(null,!0);r()}},"ModelSemanticColoring");Wb.REQUEST_MIN_DELAY=300;Wb.REQUEST_MAX_DELAY=2e3;Wb=LI([xi(2,wt),xi(3,ho),xi(4,ue)],Wb);const Une=new RegExp(`(\\\\)?\\$\\((${Mi.iconNameExpression}(?:${Mi.iconModifierExpression})?)\\)`,"g");function ou(o){const e=new Array;let t,n=0,i=0;for(;(t=Une.exec(o))!==null;){i=t.index||0,e.push(o.substring(n,i)),n=(t.index||0)+t[0].length;const[,s,r]=t;e.push(s?`$(${r})`:Gne({id:r}))}return n<o.length&&e.push(o.substring(n)),e}u(ou,"renderLabelWithIcons");function Gne(o){const e=ee("span");return e.classList.add(...Mi.asClassNameArray(o)),e}u(Gne,"renderIcon");const zne={buttonBackground:B.fromHex("#0E639C"),buttonHoverBackground:B.fromHex("#006BB3"),buttonSeparator:B.white,buttonForeground:B.white};class pk extends U{constructor(e,t){super(),this._onDidClick=this._register(new R),this.options=t||Object.create(null),la(this.options,zne,!1),this.buttonForeground=this.options.buttonForeground,this.buttonBackground=this.options.buttonBackground,this.buttonHoverBackground=this.options.buttonHoverBackground,this.buttonSecondaryForeground=this.options.buttonSecondaryForeground,this.buttonSecondaryBackground=this.options.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=this.options.buttonSecondaryHoverBackground,this.buttonBorder=this.options.buttonBorder,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),e.appendChild(this._element),this._register(gt.addTarget(this._element)),[le.CLICK,Mt.Tap].forEach(n=>{this._register(Y(this._element,n,i=>{if(!this.enabled){ft.stop(i);return}this._onDidClick.fire(i)}))}),this._register(Y(this._element,le.KEY_DOWN,n=>{const i=new Pt(n);let s=!1;this.enabled&&(i.equals(3)||i.equals(10))?(this._onDidClick.fire(n),s=!0):i.equals(9)&&(this._element.blur(),s=!0),s&&ft.stop(i,!0)})),this._register(Y(this._element,le.MOUSE_OVER,n=>{this._element.classList.contains("disabled")||this.setHoverBackground()})),this._register(Y(this._element,le.MOUSE_OUT,n=>{this.applyStyles()})),this.focusTracker=this._register(yu(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.setHoverBackground()})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.applyStyles()})),this.applyStyles()}get onDidClick(){return this._onDidClick.event}setHoverBackground(){let e;this.options.secondary?e=this.buttonSecondaryHoverBackground?this.buttonSecondaryHoverBackground.toString():null:e=this.buttonHoverBackground?this.buttonHoverBackground.toString():null,e&&(this._element.style.backgroundColor=e)}style(e){this.buttonForeground=e.buttonForeground,this.buttonBackground=e.buttonBackground,this.buttonHoverBackground=e.buttonHoverBackground,this.buttonSecondaryForeground=e.buttonSecondaryForeground,this.buttonSecondaryBackground=e.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=e.buttonSecondaryHoverBackground,this.buttonBorder=e.buttonBorder,this.applyStyles()}applyStyles(){if(this._element){let e,t;this.options.secondary?(t=this.buttonSecondaryForeground?this.buttonSecondaryForeground.toString():"",e=this.buttonSecondaryBackground?this.buttonSecondaryBackground.toString():""):(t=this.buttonForeground?this.buttonForeground.toString():"",e=this.buttonBackground?this.buttonBackground.toString():"");const n=this.buttonBorder?this.buttonBorder.toString():"";this._element.style.color=t,this._element.style.backgroundColor=e,this._element.style.borderWidth=n?"1px":"",this._element.style.borderStyle=n?"solid":"",this._element.style.borderColor=n}}get element(){return this._element}set label(e){this._element.classList.add("monaco-text-button"),this.options.supportIcons?kc(this._element,...ou(e)):this._element.textContent=e,typeof this.options.title=="string"?this._element.title=this.options.title:this.options.title&&(this._element.title=e)}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}}u(pk,"Button");const Kne={badgeBackground:B.fromHex("#4D4D4D"),badgeForeground:B.fromHex("#FFFFFF")};class z1{constructor(e,t){this.count=0,this.options=t||Object.create(null),la(this.options,Kne,!1),this.badgeBackground=this.options.badgeBackground,this.badgeForeground=this.options.badgeForeground,this.badgeBorder=this.options.badgeBorder,this.element=q(e,ee(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=$s(this.countFormat,this.count),this.element.title=$s(this.titleFormat,this.count),this.applyStyles()}style(e){this.badgeBackground=e.badgeBackground,this.badgeForeground=e.badgeForeground,this.badgeBorder=e.badgeBorder,this.applyStyles()}applyStyles(){if(this.element){const e=this.badgeBackground?this.badgeBackground.toString():"",t=this.badgeForeground?this.badgeForeground.toString():"",n=this.badgeBorder?this.badgeBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.element.style.borderWidth=n?"1px":"",this.element.style.borderStyle=n?"solid":"",this.element.style.borderColor=n}}}u(z1,"CountBadge");const NR="done",PR="active",FT="infinite",OT="infinite-long-running",RR="discrete",jne={progressBarBackground:B.fromHex("#0E70C0")};class X_ extends U{constructor(e,t){super(),this.options=t||Object.create(null),la(this.options,jne,!1),this.workedVal=0,this.progressBarBackground=this.options.progressBarBackground,this.showDelayedScheduler=this._register(new pt(()=>Ss(this.element),0)),this.longRunningScheduler=this._register(new pt(()=>this.infiniteLongRunning(),X_.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e)}create(e){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.element.appendChild(this.bit),this.applyStyles()}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(PR,FT,OT,RR),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel()}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(NR),this.element.classList.contains(FT)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(RR,NR,OT),this.element.classList.add(PR,FT),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(OT)}getContainer(){return this.element}style(e){this.progressBarBackground=e.progressBarBackground,this.applyStyles()}applyStyles(){if(this.bit){const e=this.progressBarBackground?this.progressBarBackground.toString():"";this.bit.style.backgroundColor=e}}}u(X_,"ProgressBar");X_.LONG_RUNNING_INFINITE_THRESHOLD=1e4;class By{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}u(By,"IdGenerator");const I8=new By("id#");const VT={},$ne=new By("quick-input-button-icon-");function mk(o){if(!o)return;let e;const t=o.dark.toString();return VT[t]?e=VT[t]:(e=$ne.nextId(),$x(`.${e}, .hc-light .${e}`,`background-image: ${Su(o.light||o.dark)}`),$x(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${Su(o.dark)}`),VT[t]=e),e}u(mk,"getIconClass");const qne={ctrlCmd:!1,alt:!1};var Ub;(function(o){o[o.Blur=1]="Blur",o[o.Gesture=2]="Gesture",o[o.Other=3]="Other"})(Ub||(Ub={}));var Bo;(function(o){o[o.NONE=0]="NONE",o[o.FIRST=1]="FIRST",o[o.SECOND=2]="SECOND",o[o.LAST=3]="LAST"})(Bo||(Bo={}));function Yne(o,e={}){const t=EI(e);return t.textContent=o,t}u(Yne,"renderText");function N8(o,e={}){const t=EI(e);return R8(t,Xne(o,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}u(N8,"renderFormattedText");function EI(o){const e=o.inline?"span":"div",t=document.createElement(e);return o.className&&(t.className=o.className),t}u(EI,"createElement");class P8{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}u(P8,"StringStream");function R8(o,e,t,n){let i;if(e.type===2)i=document.createTextNode(e.content||"");else if(e.type===3)i=document.createElement("b");else if(e.type===4)i=document.createElement("i");else if(e.type===7&&n)i=document.createElement("code");else if(e.type===5&&t){const s=document.createElement("a");t.disposables.add(Dn(s,"click",r=>{t.callback(String(e.index),r)})),i=s}else e.type===8?i=document.createElement("br"):e.type===1&&(i=o);i&&o!==i&&o.appendChild(i),i&&Array.isArray(e.children)&&e.children.forEach(s=>{R8(i,s,t,n)})}u(R8,"_renderFormattedText");function Xne(o,e){const t={type:1,children:[]};let n=0,i=t;const s=[],r=new P8(o);for(;!r.eos();){let a=r.next();const l=a==="\\"&&bk(r.peek(),e)!==0;if(l&&(a=r.next()),!l&&Zne(a,e)&&a===r.peek()){r.advance(),i.type===2&&(i=s.pop());const c=bk(a,e);if(i.type===c||i.type===5&&c===6)i=s.pop();else{const d={type:c,children:[]};c===5&&(d.index=n,n++),i.children.push(d),s.push(i),i=d}}else if(a===`
`)i.type===2&&(i=s.pop()),i.children.push({type:8});else if(i.type!==2){const c={type:2,content:a};i.children.push(c),s.push(i),i=c}else i.content+=a}return i.type===2&&(i=s.pop()),t}u(Xne,"parseFormattedText");function Zne(o,e){return bk(o,e)!==0}u(Zne,"isFormatTag");function bk(o,e){switch(o){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}u(bk,"formatTagType");class F8{constructor(e,t=0,n=e.length,i=t-1){this.items=e,this.start=t,this.end=n,this.index=i}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}u(F8,"ArrayNavigator");class O8{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._currentPosition()!==this._elements.length-1?this._navigator.next():null}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new F8(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}}u(O8,"HistoryNavigator");const zp=ee,Jne={inputBackground:B.fromHex("#3C3C3C"),inputForeground:B.fromHex("#CCCCCC"),inputValidationInfoBorder:B.fromHex("#55AAFF"),inputValidationInfoBackground:B.fromHex("#063B49"),inputValidationWarningBorder:B.fromHex("#B89500"),inputValidationWarningBackground:B.fromHex("#352A05"),inputValidationErrorBorder:B.fromHex("#BE1100"),inputValidationErrorBackground:B.fromHex("#5A1D1D")};class kI extends lo{constructor(e,t,n){var i;super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new R),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new R),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=n||Object.create(null),la(this.options,Jne,!1),this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=(i=this.options.tooltip)!==null&&i!==void 0?i:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.inputBackground=this.options.inputBackground,this.inputForeground=this.options.inputForeground,this.inputBorder=this.options.inputBorder,this.inputValidationInfoBorder=this.options.inputValidationInfoBorder,this.inputValidationInfoBackground=this.options.inputValidationInfoBackground,this.inputValidationInfoForeground=this.options.inputValidationInfoForeground,this.inputValidationWarningBorder=this.options.inputValidationWarningBorder,this.inputValidationWarningBackground=this.options.inputValidationWarningBackground,this.inputValidationWarningForeground=this.options.inputValidationWarningForeground,this.inputValidationErrorBorder=this.options.inputValidationErrorBorder,this.inputValidationErrorBackground=this.options.inputValidationErrorBackground,this.inputValidationErrorForeground=this.options.inputValidationErrorForeground,this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=q(e,zp(".monaco-inputbox.idle"));const s=this.options.flexibleHeight?"textarea":"input",r=q(this.element,zp(".ibwrapper"));if(this.input=q(r,zp(s+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=q(r,zp("div.mirror")),this.mirror.innerText=" ",this.scrollableElement=new BA(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),q(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(c=>this.input.scrollTop=c.scrollTop));const a=this._register(new _t(document,"selectionchange")),l=fe.filter(a.event,()=>{const c=document.getSelection();return c?.anchorNode===r});this._register(l(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this.ignoreGesture(this.input),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new Cr(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.input.title=e}setAriaLabel(e){this.ariaLabel=e,e?this.input.setAttribute("aria-label",this.ariaLabel):this.input.removeAttribute("aria-label")}getAriaLabel(){return this.ariaLabel}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:jx(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return document.activeElement===this.input}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}get width(){return bo(this.input)}set width(e){if(this.options.flexibleHeight&&this.options.flexibleWidth){let t=0;if(this.mirror){const n=parseFloat(this.mirror.style.paddingLeft||"")||0,i=parseFloat(this.mirror.style.paddingRight||"")||0;t=n+i}this.input.style.width=e-t+"px"}else this.input.style.width=e+"px";this.mirror&&(this.mirror.style.width=e+"px")}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,n=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:n})}showMessage(e,t){this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const n=this.stylesForType(this.message.type);this.element.style.border=n.border?`1px solid ${n.border}`:"",(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e?.type}stylesForType(e){switch(e){case 1:return{border:this.inputValidationInfoBorder,background:this.inputValidationInfoBackground,foreground:this.inputValidationInfoForeground};case 2:return{border:this.inputValidationWarningBorder,background:this.inputValidationWarningBackground,foreground:this.inputValidationWarningForeground};default:return{border:this.inputValidationErrorBorder,background:this.inputValidationErrorBackground,foreground:this.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e;const t=u(()=>e.style.width=bo(this.element)+"px","layout");this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:i=>{if(!this.message)return null;e=q(i,zp(".monaco-inputbox-container")),t();const s={inline:!0,className:"monaco-inputbox-message"},r=this.message.formatContent?N8(this.message.content,s):Yne(this.message.content,s);r.classList.add(this.classForType(this.message.type));const a=this.stylesForType(this.message.type);return r.style.backgroundColor=a.background?a.background.toString():"",r.style.color=a.foreground?a.foreground.toString():"",r.style.border=a.border?`1px solid ${a.border}`:"",q(e,r),null},onHide:()=>{this.state="closed"},layout:t});let n;this.message.type===3?n=m("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?n=m("alertWarningMessage","Warning: {0}",this.message.content):n=m("alertInfoMessage","Info: {0}",this.message.content),Zn(n),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,n=e.charCodeAt(e.length-1)===10?" ":"";(e+n).replace(/\u000c/g,"")?this.mirror.textContent=e+n:this.mirror.innerText=" ",this.layout()}style(e){this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){const e=this.inputBackground?this.inputBackground.toString():"",t=this.inputForeground?this.inputForeground.toString():"",n=this.inputBorder?this.inputBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.input.style.backgroundColor="inherit",this.input.style.color=t,this.element.style.borderWidth=n?"1px":"",this.element.style.borderStyle=n?"solid":"",this.element.style.borderColor=n}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=jx(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,n=t.selectionStart,i=t.selectionEnd,s=t.value;n!==null&&i!==null&&(this.value=s.substr(0,n)+e+s.substr(i),t.setSelectionRange(n+1,n+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar&&this.actionbar.dispose(),super.dispose()}}u(kI,"InputBox");class MI extends kI{constructor(e,t,n){const i=m({key:"history.inputbox.hint",comment:["Text will be prefixed with ⇅ plus a single space, then used as a hint where input field keeps history"]},"for history"),s=` or ⇅ ${i}`,r=` (⇅ ${i})`;super(e,t,n),this._onDidFocus=this._register(new R),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new R),this.onDidBlur=this._onDidBlur.event,this.history=new O8(n.history,100);const a=u(()=>{if(n.showHistoryHint&&n.showHistoryHint()&&!this.placeholder.endsWith(s)&&!this.placeholder.endsWith(r)&&this.history.getHistory().length){const l=this.placeholder.endsWith(")")?s:r,c=this.placeholder+l;n.showPlaceholderOnFocus&&document.activeElement!==this.input?this.placeholder=c:this.setPlaceHolder(c)}},"addSuffix");this.observer=new MutationObserver((l,c)=>{l.forEach(d=>{d.target.textContent||a()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>a()),this.onblur(this.input,()=>{const l=u(c=>{if(this.placeholder.endsWith(c)){const d=this.placeholder.slice(0,this.placeholder.length-c.length);return n.showPlaceholderOnFocus?this.placeholder=d:this.setPlaceHolder(d),!0}else return!1},"resetPlaceholder");l(r)||l(s)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(){this.value&&this.value!==this.getCurrentValue()&&this.history.add(this.value)}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),e&&(this.value=e,o1(this.value))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,o1(this.value))}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()||this.history.last()}}u(MI,"HistoryInputBox");const Qne=ee;class V8 extends U{constructor(e){super(),this.parent=e,this.onKeyDown=t=>Y(this.inputBox.inputElement,le.KEY_DOWN,n=>{t(new Pt(n))}),this.onMouseDown=t=>Y(this.inputBox.inputElement,le.MOUSE_DOWN,n=>{t(new sr(n))}),this.onDidChange=t=>this.inputBox.onDidChange(t),this.container=q(this.parent,Qne(".quick-input-box")),this.inputBox=this._register(new kI(this.container,void 0))}get value(){return this.inputBox.value}set value(e){this.inputBox.value=e}select(e=null){this.inputBox.select(e)}isSelectionAtEnd(){return this.inputBox.isSelectionAtEnd()}get placeholder(){return this.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.inputBox.setPlaceHolder(e)}get ariaLabel(){return this.inputBox.getAriaLabel()}set ariaLabel(e){this.inputBox.setAriaLabel(e)}get password(){return this.inputBox.inputElement.type==="password"}set password(e){this.inputBox.inputElement.type=e?"password":"text"}setAttribute(e,t){this.inputBox.inputElement.setAttribute(e,t)}removeAttribute(e){this.inputBox.inputElement.removeAttribute(e)}showDecoration(e){e===Bt.Ignore?this.inputBox.hideMessage():this.inputBox.showMessage({type:e===Bt.Info?1:e===Bt.Warning?2:3,content:""})}stylesForType(e){return this.inputBox.stylesForType(e===Bt.Info?1:e===Bt.Warning?2:3)}setFocus(){this.inputBox.focus()}layout(){this.inputBox.layout()}style(e){this.inputBox.style(e)}}u(V8,"QuickInputBox");class Vc{constructor(e,t){var n;this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=(n=t?.supportIcons)!==null&&n!==void 0?n:!1,this.domNode=q(e,ee("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,t=[],n="",i){e||(e=""),i&&(e=Vc.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===n&&Xs(this.highlights,t))&&(this.text=e,this.title=n,this.highlights=t,this.render())}render(){const e=[];let t=0;for(const n of this.highlights){if(n.end===n.start)continue;if(t<n.start){const r=this.text.substring(t,n.start);e.push(ee("span",void 0,...this.supportIcons?ou(r):[r])),t=n.end}const i=this.text.substring(n.start,n.end),s=ee("span.highlight",void 0,...this.supportIcons?ou(i):[i]);n.extraClasses&&s.classList.add(...n.extraClasses),e.push(s),t=n.end}if(t<this.text.length){const n=this.text.substring(t);e.push(ee("span",void 0,...this.supportIcons?ou(n):[n]))}kc(this.domNode,...e),this.title?this.domNode.title=this.title:this.domNode.removeAttribute("title"),this.didEverRender=!0}static escapeNewLines(e,t){let n=0,i=0;return e.replace(/\r\n|\r|\n/g,(s,r)=>{i=s===`\r
`?-1:0,r+=n;for(const a of t)a.end<=r||(a.start>=r&&(a.start+=i),a.end>=r&&(a.end+=i));return n+=i,"⏎"})}}u(Vc,"HighlightedLabel");class h0{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set className(e){this.disposed||e===this._className||(this._className=e,this._element.className=e)}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}u(h0,"FastLabelNode");class Gb extends U{constructor(e,t){super(),this.customHovers=new Map,this.domNode=this._register(new h0(q(e,ee(".monaco-icon-label")))),this.labelContainer=q(this.domNode.element,ee(".monaco-icon-label-container"));const n=q(this.labelContainer,ee("span.monaco-icon-name-container"));this.descriptionContainer=this._register(new h0(q(this.labelContainer,ee("span.monaco-icon-description-container")))),t?.supportHighlights||t?.supportIcons?this.nameNode=new B8(n,!!t.supportIcons):this.nameNode=new H8(n),t?.supportDescriptionHighlights?this.descriptionNodeFactory=()=>new Vc(q(this.descriptionContainer.element,ee("span.label-description")),{supportIcons:!!t.supportIcons}):this.descriptionNodeFactory=()=>this._register(new h0(q(this.descriptionContainer.element,ee("span.label-description")))),this.hoverDelegate=t?.hoverDelegate}get element(){return this.domNode.element}setLabel(e,t,n){const i=["monaco-icon-label"];n&&(n.extraClasses&&i.push(...n.extraClasses),n.italic&&i.push("italic"),n.strikethrough&&i.push("strikethrough")),this.domNode.className=i.join(" "),this.setupHover(n?.descriptionTitle?this.labelContainer:this.element,n?.title),this.nameNode.setLabel(e,n),(t||this.descriptionNode)&&(this.descriptionNode||(this.descriptionNode=this.descriptionNodeFactory()),this.descriptionNode instanceof Vc?(this.descriptionNode.set(t||"",n?n.descriptionMatches:void 0),this.setupHover(this.descriptionNode.element,n?.descriptionTitle)):(this.descriptionNode.textContent=t||"",this.setupHover(this.descriptionNode.element,n?.descriptionTitle||""),this.descriptionNode.empty=!t))}setupHover(e,t){const n=this.customHovers.get(e);if(n&&(n.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(!this.hoverDelegate)yte(e,t);else{const i=R9(this.hoverDelegate,e,t);i&&this.customHovers.set(e,i)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}}u(Gb,"IconLabel");class H8{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&Xs(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=q(this.container,ee("a.label-name",{id:t?.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let n=0;n<e.length;n++){const i=e[n],s=t?.domId&&`${t?.domId}_${n}`;q(this.container,ee("a.label-name",{id:s,"data-icon-label-count":e.length,"data-icon-label-index":n,role:"treeitem"},i)),n<e.length-1&&q(this.container,ee("span.label-separator",void 0,t?.separator||"/"))}}}}u(H8,"Label");function eie(o,e,t){if(!t)return;let n=0;return o.map(i=>{const s={start:n,end:n+i.length},r=t.map(a=>ii.intersect(s,a)).filter(a=>!ii.isEmpty(a)).map(({start:a,end:l})=>({start:a-n,end:l-n}));return n=s.end+e.length,r})}u(eie,"splitMatches");class B8{constructor(e,t){this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&Xs(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=new Vc(q(this.container,ee("a.label-name",{id:t?.domId})),{supportIcons:this.supportIcons})),this.singleLabel.set(e,t?.matches,void 0,t?.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const n=t?.separator||"/",i=eie(e,n,t?.matches);for(let s=0;s<e.length;s++){const r=e[s],a=i?i[s]:void 0,l=t?.domId&&`${t?.domId}_${s}`,c=ee("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":s,role:"treeitem"});new Vc(q(this.container,c),{supportIcons:this.supportIcons}).set(r,a,void 0,t?.labelEscapeNewLines),s<e.length-1&&q(c,ee("span.label-separator",void 0,n))}}}}u(B8,"LabelWithHighlights");const bC=ee;class Wy{constructor(e,t,n){this.os=t,this.keyElements=new Set,this.options=n||Object.create(null),this.labelBackground=this.options.keybindingLabelBackground,this.labelForeground=this.options.keybindingLabelForeground,this.labelBorder=this.options.keybindingLabelBorder,this.labelBottomBorder=this.options.keybindingLabelBottomBorder,this.labelShadow=this.options.keybindingLabelShadow,this.domNode=q(e,bC(".monaco-keybinding")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&Wy.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){const[e,t]=this.keybinding.getParts();e&&this.renderPart(this.domNode,e,this.matches?this.matches.firstPart:null),t&&(q(this.domNode,bC("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderPart(this.domNode,t,this.matches?this.matches.chordPart:null)),this.domNode.title=this.keybinding.getAriaLabel()||""}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.applyStyles(),this.didEverRender=!0}clear(){Tn(this.domNode),this.keyElements.clear()}renderPart(e,t,n){const i=vI.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,i.ctrlKey,Boolean(n?.ctrlKey),i.separator),t.shiftKey&&this.renderKey(e,i.shiftKey,Boolean(n?.shiftKey),i.separator),t.altKey&&this.renderKey(e,i.altKey,Boolean(n?.altKey),i.separator),t.metaKey&&this.renderKey(e,i.metaKey,Boolean(n?.metaKey),i.separator);const s=t.keyLabel;s&&this.renderKey(e,s,Boolean(n?.keyCode),"")}renderKey(e,t,n,i){q(e,this.createKeyElement(t,n?".highlight":"")),i&&q(e,bC("span.monaco-keybinding-key-separator",void 0,i))}renderUnbound(e){q(e,this.createKeyElement(m("unbound","Unbound")))}createKeyElement(e,t=""){const n=bC("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(n),n}style(e){this.labelBackground=e.keybindingLabelBackground,this.labelForeground=e.keybindingLabelForeground,this.labelBorder=e.keybindingLabelBorder,this.labelBottomBorder=e.keybindingLabelBottomBorder,this.labelShadow=e.keybindingLabelShadow,this.applyStyles()}applyStyles(){var e;if(this.element){for(const t of this.keyElements)this.labelBackground&&(t.style.backgroundColor=(e=this.labelBackground)===null||e===void 0?void 0:e.toString()),this.labelBorder&&(t.style.borderColor=this.labelBorder.toString()),this.labelBottomBorder&&(t.style.borderBottomColor=this.labelBottomBorder.toString()),this.labelShadow&&(t.style.boxShadow=`inset 0 -1px 0 ${this.labelShadow}`);this.labelForeground&&(this.element.style.color=this.labelForeground.toString())}}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&Xs(e.firstPart,t.firstPart)&&Xs(e.chordPart,t.chordPart)}}u(Wy,"KeybindingLabel");const FR=new ol(()=>{const o=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:o,collatorIsNumeric:o.resolvedOptions().numeric}});new ol(()=>({collator:new Intl.Collator(void 0,{numeric:!0})}));new ol(()=>({collator:new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"})}));function tie(o,e,t=!1){const n=o||"",i=e||"",s=FR.value.collator.compare(n,i);return FR.value.collatorIsNumeric&&s===0&&n!==i?n<i?-1:1:s}u(tie,"compareFileNames");function nie(o,e,t){const n=o.toLowerCase(),i=e.toLowerCase(),s=iie(o,e,t);if(s)return s;const r=n.endsWith(t),a=i.endsWith(t);if(r!==a)return r?-1:1;const l=tie(n,i);return l!==0?l:n.localeCompare(i)}u(nie,"compareAnything");function iie(o,e,t){const n=o.toLowerCase(),i=e.toLowerCase(),s=n.startsWith(t),r=i.startsWith(t);if(s!==r)return s?-1:1;if(s&&r){if(n.length<i.length)return-1;if(n.length>i.length)return 1}return 0}u(iie,"compareByPrefix");var W8=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},sie=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const Or=ee;class U8{constructor(e){this.hidden=!1,this._onChecked=new R,this.onChecked=this._onChecked.event,Object.assign(this,e)}get checked(){return!!this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire(e))}dispose(){this._onChecked.dispose()}}u(U8,"ListElement");class hp{get templateId(){return hp.ID}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=[],t.toDisposeTemplate=[],t.entry=q(e,Or(".quick-input-list-entry"));const n=q(t.entry,Or("label.quick-input-list-label"));t.toDisposeTemplate.push(Dn(n,le.CLICK,c=>{t.checkbox.offsetParent||c.preventDefault()})),t.checkbox=q(n,Or("input.quick-input-list-checkbox")),t.checkbox.type="checkbox",t.toDisposeTemplate.push(Dn(t.checkbox,le.CHANGE,c=>{t.element.checked=t.checkbox.checked}));const i=q(n,Or(".quick-input-list-rows")),s=q(i,Or(".quick-input-list-row")),r=q(i,Or(".quick-input-list-row"));t.label=new Gb(s,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0});const a=q(s,Or(".quick-input-list-entry-keybinding"));t.keybinding=new Wy(a,Us);const l=q(r,Or(".quick-input-list-label-meta"));return t.detail=new Gb(l,{supportHighlights:!0,supportIcons:!0}),t.separator=q(t.entry,Or(".quick-input-list-separator")),t.actionBar=new Cr(t.entry),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.push(t.actionBar),t}renderElement(e,t,n){n.toDisposeElement=st(n.toDisposeElement),n.element=e,n.checkbox.checked=e.checked,n.toDisposeElement.push(e.onChecked(c=>n.checkbox.checked=c));const{labelHighlights:i,descriptionHighlights:s,detailHighlights:r}=e,a=Object.create(null);a.matches=i||[],a.descriptionTitle=e.saneDescription,a.descriptionMatches=s||[],a.extraClasses=e.item.iconClasses,a.italic=e.item.italic,a.strikethrough=e.item.strikethrough,n.label.setLabel(e.saneLabel,e.saneDescription,a),n.keybinding.set(e.item.keybinding),e.saneDetail&&n.detail.setLabel(e.saneDetail,void 0,{matches:r,title:e.saneDetail}),e.separator&&e.separator.label?(n.separator.textContent=e.separator.label,n.separator.style.display=""):n.separator.style.display="none",n.entry.classList.toggle("quick-input-list-separator-border",!!e.separator),n.actionBar.clear();const l=e.item.buttons;l&&l.length?(n.actionBar.push(l.map((c,d)=>{let h=c.iconClass||(c.iconPath?mk(c.iconPath):void 0);c.alwaysVisible&&(h=h?`${h} always-visible`:"always-visible");const g=new Yi(`id-${d}`,"",h,!0,()=>sie(this,void 0,void 0,function*(){e.fireButtonTriggered({button:c,item:e.item})}));return g.tooltip=c.tooltip||"",g}),{icon:!0,label:!1}),n.entry.classList.add("has-actions")):n.entry.classList.remove("has-actions")}disposeElement(e,t,n){n.toDisposeElement=st(n.toDisposeElement)}disposeTemplate(e){e.toDisposeElement=st(e.toDisposeElement),e.toDisposeTemplate=st(e.toDisposeTemplate)}}u(hp,"ListElementRenderer");hp.ID="listelement";class G8{getHeight(e){return e.saneDetail?44:22}getTemplateId(e){return hp.ID}}u(G8,"ListElementDelegate");var an;(function(o){o[o.First=1]="First",o[o.Second=2]="Second",o[o.Last=3]="Last",o[o.Next=4]="Next",o[o.Previous=5]="Previous",o[o.NextPage=6]="NextPage",o[o.PreviousPage=7]="PreviousPage"})(an||(an={}));class Uy{constructor(e,t,n){this.parent=e,this.inputElements=[],this.elements=[],this.elementsToIndexes=new Map,this.matchOnDescription=!1,this.matchOnDetail=!1,this.matchOnLabel=!0,this.matchOnLabelMode="fuzzy",this.matchOnMeta=!0,this.sortByLabel=!0,this._onChangedAllVisibleChecked=new R,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new R,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new R,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new R,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new R,this.onButtonTriggered=this._onButtonTriggered.event,this._onKeyDown=new R,this.onKeyDown=this._onKeyDown.event,this._onLeave=new R,this.onLeave=this._onLeave.event,this._fireCheckedEvents=!0,this.elementDisposables=[],this.disposables=[],this.id=t,this.container=q(this.parent,Or(".quick-input-list"));const i=new G8,s=new z8;this.list=n.createList("QuickInput",this.container,i,[new hp],{identityProvider:{getId:r=>r.saneLabel},setRowLineHeight:!1,multipleSelectionSupport:!1,horizontalScrolling:!1,accessibilityProvider:s}),this.list.getHTMLElement().id=t,this.disposables.push(this.list),this.disposables.push(this.list.onKeyDown(r=>{const a=new Pt(r);switch(a.keyCode){case 10:this.toggleCheckbox();break;case 31:(Xe?r.metaKey:r.ctrlKey)&&this.list.setFocus(yi(this.list.length));break;case 16:{const l=this.list.getFocus();l.length===1&&l[0]===0&&this._onLeave.fire();break}case 18:{const l=this.list.getFocus();l.length===1&&l[0]===this.list.length-1&&this._onLeave.fire();break}}this._onKeyDown.fire(a)})),this.disposables.push(this.list.onMouseDown(r=>{r.browserEvent.button!==2&&r.browserEvent.preventDefault()})),this.disposables.push(Y(this.container,le.CLICK,r=>{(r.x||r.y)&&this._onLeave.fire()})),this.disposables.push(this.list.onMouseMiddleClick(r=>{this._onLeave.fire()})),this.disposables.push(this.list.onContextMenu(r=>{typeof r.index=="number"&&(r.browserEvent.preventDefault(),this.list.setSelection([r.index]))})),this.disposables.push(this._onChangedAllVisibleChecked,this._onChangedCheckedCount,this._onChangedVisibleCount,this._onChangedCheckedElements,this._onButtonTriggered,this._onLeave,this._onKeyDown)}get onDidChangeFocus(){return fe.map(this.list.onDidChangeFocus,e=>e.elements.map(t=>t.item))}get onDidChangeSelection(){return fe.map(this.list.onDidChangeSelection,e=>({items:e.elements.map(t=>t.item),event:e.browserEvent}))}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}getAllVisibleChecked(){return this.allVisibleChecked(this.elements,!1)}allVisibleChecked(e,t=!0){for(let n=0,i=e.length;n<i;n++){const s=e[n];if(!s.hidden)if(s.checked)t=!0;else return!1}return t}getCheckedCount(){let e=0;const t=this.elements;for(let n=0,i=t.length;n<i;n++)t[n].checked&&e++;return e}getVisibleCount(){let e=0;const t=this.elements;for(let n=0,i=t.length;n<i;n++)t[n].hidden||e++;return e}setAllVisibleChecked(e){try{this._fireCheckedEvents=!1,this.elements.forEach(t=>{t.hidden||(t.checked=e)})}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}setElements(e){this.elementDisposables=st(this.elementDisposables);const t=u(n=>this.fireButtonTriggered(n),"fireButtonTriggered");this.inputElements=e,this.elements=e.reduce((n,i,s)=>{var r,a,l;if(i.type!=="separator"){const c=s&&e[s-1],d=i.label&&i.label.replace(/\r?\n/g," "),h=Vh(d).text.trim(),g=i.meta&&i.meta.replace(/\r?\n/g," "),f=i.description&&i.description.replace(/\r?\n/g," "),p=i.detail&&i.detail.replace(/\r?\n/g," "),_=i.ariaLabel||[d,f,p].map(C=>cq(C)).filter(C=>!!C).join(", "),v=this.parent.classList.contains("show-checkboxes");n.push(new U8({hasCheckbox:v,index:s,item:i,saneLabel:d,saneSortLabel:h,saneMeta:g,saneAriaLabel:_,saneDescription:f,saneDetail:p,labelHighlights:(r=i.highlights)===null||r===void 0?void 0:r.label,descriptionHighlights:(a=i.highlights)===null||a===void 0?void 0:a.description,detailHighlights:(l=i.highlights)===null||l===void 0?void 0:l.detail,checked:!1,separator:c&&c.type==="separator"?c:void 0,fireButtonTriggered:t}))}return n},[]),this.elementDisposables.push(...this.elements),this.elementDisposables.push(...this.elements.map(n=>n.onChecked(()=>this.fireCheckedEvents()))),this.elementsToIndexes=this.elements.reduce((n,i,s)=>(n.set(i.item,s),n),new Map),this.list.splice(0,this.list.length),this.list.splice(0,this.list.length,this.elements),this._onChangedVisibleCount.fire(this.elements.length)}getFocusedElements(){return this.list.getFocusedElements().map(e=>e.item)}setFocusedElements(e){if(this.list.setFocus(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t))),e.length>0){const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}}getActiveDescendant(){return this.list.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){this.list.setSelection(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t)))}getCheckedElements(){return this.elements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){try{this._fireCheckedEvents=!1;const t=new Set;for(const n of e)t.add(n);for(const n of this.elements)n.checked=t.has(n.item)}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}set enabled(e){this.list.getHTMLElement().style.pointerEvents=e?"":"none"}focus(e){if(!this.list.length)return;switch(e===an.Next&&this.list.getFocus()[0]===this.list.length-1&&(e=an.First),e===an.Previous&&this.list.getFocus()[0]===0&&(e=an.Last),e===an.Second&&this.list.length<2&&(e=an.First),e){case an.First:this.list.focusFirst();break;case an.Second:this.list.focusNth(1);break;case an.Last:this.list.focusLast();break;case an.Next:this.list.focusNext();break;case an.Previous:this.list.focusPrevious();break;case an.NextPage:this.list.focusNextPage();break;case an.PreviousPage:this.list.focusPreviousPage();break}const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}clearFocus(){this.list.setFocus([])}domFocus(){this.list.domFocus()}layout(e){this.list.getHTMLElement().style.maxHeight=e?`calc(${Math.floor(e/44)*44}px)`:"",this.list.layout()}filter(e){if(!(this.sortByLabel||this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))return this.list.layout(),!1;const t=e;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this.elements.forEach(i=>{i.labelHighlights=void 0,i.descriptionHighlights=void 0,i.detailHighlights=void 0,i.hidden=!1;const s=i.index&&this.inputElements[i.index-1];i.separator=s&&s.type==="separator"?s:void 0});else{let i;this.elements.forEach(s=>{let r;this.matchOnLabelMode==="fuzzy"?r=this.matchOnLabel?Gi(lC(e,Vh(s.saneLabel))):void 0:r=this.matchOnLabel?Gi(oie(t,Vh(s.saneLabel))):void 0;const a=this.matchOnDescription?Gi(lC(e,Vh(s.saneDescription||""))):void 0,l=this.matchOnDetail?Gi(lC(e,Vh(s.saneDetail||""))):void 0,c=this.matchOnMeta?Gi(lC(e,Vh(s.saneMeta||""))):void 0;if(r||a||l||c?(s.labelHighlights=r,s.descriptionHighlights=a,s.detailHighlights=l,s.hidden=!1):(s.labelHighlights=void 0,s.descriptionHighlights=void 0,s.detailHighlights=void 0,s.hidden=!s.item.alwaysShow),s.separator=void 0,!this.sortByLabel){const d=s.index&&this.inputElements[s.index-1];i=d&&d.type==="separator"?d:i,i&&!s.hidden&&(s.separator=i,i=void 0)}})}const n=this.elements.filter(i=>!i.hidden);if(this.sortByLabel&&e){const i=e.toLowerCase();n.sort((s,r)=>rie(s,r,i))}return this.elementsToIndexes=n.reduce((i,s,r)=>(i.set(s.item,r),i),new Map),this.list.splice(0,this.list.length,n),this.list.setFocus([]),this.list.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(n.length),!0}toggleCheckbox(){try{this._fireCheckedEvents=!1;const e=this.list.getFocusedElements(),t=this.allVisibleChecked(e);for(const n of e)n.checked=!t}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}display(e){this.container.style.display=e?"":"none"}isDisplayed(){return this.container.style.display!=="none"}dispose(){this.elementDisposables=st(this.elementDisposables),this.disposables=st(this.disposables)}fireCheckedEvents(){this._fireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(e){this._onButtonTriggered.fire(e)}style(e){this.list.style(e)}}u(Uy,"QuickInputList");W8([_n],Uy.prototype,"onDidChangeFocus",null);W8([_n],Uy.prototype,"onDidChangeSelection",null);function oie(o,e){const{text:t,iconOffsets:n}=e;if(!n||n.length===0)return OR(o,t);const i=Iw(t," "),s=t.length-i.length,r=OR(o,i);if(r)for(const a of r){const l=n[a.start+s]+s;a.start+=l,a.end+=l}return r}u(oie,"matchesContiguousIconAware");function OR(o,e){const t=e.toLowerCase().indexOf(o.toLowerCase());return t!==-1?[{start:t,end:t+o.length}]:null}u(OR,"matchesContiguous");function rie(o,e,t){const n=o.labelHighlights||[],i=e.labelHighlights||[];return n.length&&!i.length?-1:!n.length&&i.length?1:n.length===0&&i.length===0?0:nie(o.saneSortLabel,e.saneSortLabel,t)}u(rie,"compareEntries");class z8{getWidgetAriaLabel(){return m("quickInput","Quick Input")}getAriaLabel(e){var t;return!((t=e.separator)===null||t===void 0)&&t.label?`${e.saneAriaLabel}, ${e.separator.label}`:e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(e){return e.hasCheckbox?"checkbox":"option"}isChecked(e){if(e.hasCheckbox)return{value:e.checked,onDidChange:e.onChecked}}}u(z8,"QuickInputAccessibilityProvider");var VR=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const bs=ee,_k={iconClass:b.quickInputBack.classNames,tooltip:m("quickInput.back","Back"),handle:-1};class Z_ extends U{constructor(e){super(),this.ui=e,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.noValidationMessage=Z_.noPromptMessage,this._severity=Bt.Ignore,this.buttonsUpdated=!1,this.onDidTriggerButtonEmitter=this._register(new R),this.onDidHideEmitter=this._register(new R),this.onDisposeEmitter=this._register(new R),this.visibleDisposables=this._register(new J),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!na;this._ignoreFocusOut=e&&!na,t&&this.update()}get buttons(){return this._buttons}set buttons(e){this._buttons=e,this.buttonsUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=Ub.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}update(){if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText=" ");const t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this.busy&&!this.busyDelay&&(this.busyDelay=new hs,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const i=this.buttons.filter(r=>r===_k);this.ui.leftActionBar.push(i.map((r,a)=>{const l=new Yi(`id-${a}`,"",r.iconClass||mk(r.iconPath),!0,()=>VR(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(r)}));return l.tooltip=r.tooltip||"",l}),{icon:!0,label:!1}),this.ui.rightActionBar.clear();const s=this.buttons.filter(r=>r!==_k);this.ui.rightActionBar.push(s.map((r,a)=>{const l=new Yi(`id-${a}`,"",r.iconClass||mk(r.iconPath),!0,()=>VR(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(r)}));return l.tooltip=r.tooltip||"",l}),{icon:!0,label:!1})}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const n=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==n&&(this._lastValidationMessage=n,kc(this.ui.message,...ou(n))),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?m("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==Bt.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}u(Z_,"QuickInput");Z_.noPromptMessage=m("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");class Df extends Z_{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new R),this.onWillAcceptEmitter=this._register(new R),this.onDidAcceptEmitter=this._register(new R),this.onDidCustomEmitter=this._register(new R),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._autoFocusOnList=!0,this._keepScrollPosition=!1,this._itemActivation=this.ui.isScreenReaderOptimized()?Bo.NONE:Bo.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new R),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new R),this.onDidTriggerItemButtonEmitter=this._register(new R),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,t){this._value!==e&&(this._value=e,t||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get autoFocusOnList(){return this._autoFocusOnList}set autoFocusOnList(e){this._autoFocusOnList=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?qne:this.ui.keyMods}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.autoFocusOnList&&(this.canSelectMany||this.ui.list.focus(an.First))}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{this.doSetValue(e,!0)})),this.visibleDisposables.add(this.ui.inputBox.onMouseDown(e=>{this.autoFocusOnList||this.ui.list.clearFocus()})),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown(e=>{switch(e.keyCode){case 18:this.ui.list.focus(an.Next),this.canSelectMany&&this.ui.list.domFocus(),ft.stop(e,!0);break;case 16:this.ui.list.getFocusedElements().length?this.ui.list.focus(an.Previous):this.ui.list.focus(an.Last),this.canSelectMany&&this.ui.list.domFocus(),ft.stop(e,!0);break;case 12:this.ui.list.focus(an.NextPage),this.canSelectMany&&this.ui.list.domFocus(),ft.stop(e,!0);break;case 11:this.ui.list.focus(an.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),ft.stop(e,!0);break;case 17:if(!this._canAcceptInBackground||!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(an.First),ft.stop(e,!0));break;case 13:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(an.Last),ft.stop(e,!0));break}})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this.ui.list.onDidChangeFocus(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&Ds(e,this._activeItems,(t,n)=>t===n)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&Ds(e,this._selectedItems,(n,i)=>n===i)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(t instanceof MouseEvent&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{this.canSelectMany&&(this.selectedItemsToConfirm!==this._selectedItems&&Ds(e,this._selectedItems,(t,n)=>t===n)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e)))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return Y(this.ui.container,le.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new Pt(e),n=t.keyCode;this._quickNavigate.keybindings.some(r=>{const[a,l]=r.getParts();return l?!1:a.shiftKey&&n===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a.altKey&&n===6||a.ctrlKey&&n===5||a.metaKey&&n===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this._hideInput&&this._items.length>0;this.ui.container.classList.toggle("hidden-input",t&&!this.description);const n={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!t,progressBar:!t,visibleCount:!0,count:this.canSelectMany,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(n),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let i=this.ariaLabel;if(i||(i=this.placeholder||Df.DEFAULT_ARIA_LABEL,this.title&&(i+=` - ${this.title}`)),this.ui.inputBox.ariaLabel!==i&&(this.ui.inputBox.ariaLabel=i),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated)switch(this.itemsUpdated=!1,this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case Bo.NONE:this._itemActivation=Bo.FIRST;break;case Bo.SECOND:this.ui.list.focus(an.Second),this._itemActivation=Bo.FIRST;break;case Bo.LAST:this.ui.list.focus(an.Last),this._itemActivation=Bo.FIRST;break;default:this.trySelectFirst();break}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",this.ui.setComboboxAccessibility(!0),n.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(an.First)),this.keepScrollPosition&&(this.scrollTop=e)}}u(Df,"QuickPick");Df.DEFAULT_ARIA_LABEL=m("quickInputBox.ariaLabel","Type to narrow down results.");class J_ extends U{constructor(e){super(),this.options=e,this.comboboxAccessibility=!1,this.enabled=!0,this.onDidAcceptEmitter=this._register(new R),this.onDidCustomEmitter=this._register(new R),this.onDidTriggerButtonEmitter=this._register(new R),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new R),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new R),this.onHide=this.onHideEmitter.event,this.idPrefix=e.idPrefix,this.parentElement=e.container,this.styles=e.styles,this.registerKeyModsListeners()}registerKeyModsListeners(){const e=u(t=>{this.keyMods.ctrlCmd=t.ctrlKey||t.metaKey,this.keyMods.alt=t.altKey},"listener");this._register(Y(window,le.KEY_DOWN,e,!0)),this._register(Y(window,le.KEY_UP,e,!0)),this._register(Y(window,le.MOUSE_DOWN,e,!0))}getUI(){if(this.ui)return this.ui;const e=q(this.parentElement,bs(".quick-input-widget.show-file-icons"));e.tabIndex=-1,e.style.display="none";const t=oo(e),n=q(e,bs(".quick-input-titlebar")),i=this._register(new Cr(n));i.domNode.classList.add("quick-input-left-action-bar");const s=q(n,bs(".quick-input-title")),r=this._register(new Cr(n));r.domNode.classList.add("quick-input-right-action-bar");const a=q(e,bs(".quick-input-description")),l=q(e,bs(".quick-input-header")),c=q(l,bs("input.quick-input-check-all"));c.type="checkbox",c.setAttribute("aria-label",m("quickInput.checkAll","Toggle all checkboxes")),this._register(Dn(c,le.CHANGE,F=>{const V=c.checked;T.setAllVisibleChecked(V)})),this._register(Y(c,le.CLICK,F=>{(F.x||F.y)&&f.setFocus()}));const d=q(l,bs(".quick-input-description")),h=q(l,bs(".quick-input-and-message")),g=q(h,bs(".quick-input-filter")),f=this._register(new V8(g));f.setAttribute("aria-describedby",`${this.idPrefix}message`);const p=q(g,bs(".quick-input-visible-count"));p.setAttribute("aria-live","polite"),p.setAttribute("aria-atomic","true");const _=new z1(p,{countFormat:m({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")}),v=q(g,bs(".quick-input-count"));v.setAttribute("aria-live","polite");const C=new z1(v,{countFormat:m({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")}),w=q(l,bs(".quick-input-action")),y=new pk(w);y.label=m("ok","OK"),this._register(y.onDidClick(F=>{this.onDidAcceptEmitter.fire()}));const S=q(l,bs(".quick-input-action")),E=new pk(S);E.label=m("custom","Custom"),this._register(E.onDidClick(F=>{this.onDidCustomEmitter.fire()}));const k=q(h,bs(`#${this.idPrefix}message.quick-input-message`)),T=this._register(new Uy(e,this.idPrefix+"list",this.options));this._register(T.onChangedAllVisibleChecked(F=>{c.checked=F})),this._register(T.onChangedVisibleCount(F=>{_.setCount(F)})),this._register(T.onChangedCheckedCount(F=>{C.setCount(F)})),this._register(T.onLeave(()=>{setTimeout(()=>{f.setFocus(),this.controller instanceof Df&&this.controller.canSelectMany&&T.clearFocus()},0)})),this._register(T.onDidChangeFocus(()=>{this.comboboxAccessibility&&this.getUI().inputBox.setAttribute("aria-activedescendant",this.getUI().list.getActiveDescendant()||"")}));const x=new X_(e);x.getContainer().classList.add("quick-input-progress");const M=yu(e);return this._register(M),this._register(Y(e,le.FOCUS,F=>{this.previousFocusElement=F.relatedTarget instanceof HTMLElement?F.relatedTarget:void 0},!0)),this._register(M.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(Ub.Blur),this.previousFocusElement=void 0})),this._register(Y(e,le.FOCUS,F=>{f.setFocus()})),this._register(Y(e,le.KEY_DOWN,F=>{const V=new Pt(F);switch(V.keyCode){case 3:ft.stop(F,!0),this.onDidAcceptEmitter.fire();break;case 9:ft.stop(F,!0),this.hide(Ub.Gesture);break;case 2:if(!V.altKey&&!V.ctrlKey&&!V.metaKey){const G=[".action-label.codicon"];e.classList.contains("show-checkboxes")?G.push("input"):G.push("input[type=text]"),this.getUI().list.isDisplayed()&&G.push(".monaco-list");const j=e.querySelectorAll(G.join(", "));V.shiftKey&&V.target===j[0]?(ft.stop(F,!0),j[j.length-1].focus()):!V.shiftKey&&V.target===j[j.length-1]&&(ft.stop(F,!0),j[0].focus())}break}})),this.ui={container:e,styleSheet:t,leftActionBar:i,titleBar:n,title:s,description1:a,description2:d,rightActionBar:r,checkAll:c,filterContainer:g,inputBox:f,visibleCountContainer:p,visibleCount:_,countContainer:v,count:C,okContainer:w,ok:y,message:k,customButtonContainer:S,customButton:E,list:T,progressBar:x,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,isScreenReaderOptimized:()=>this.options.isScreenReaderOptimized(),show:F=>this.show(F),hide:()=>this.hide(),setVisibilities:F=>this.setVisibilities(F),setComboboxAccessibility:F=>this.setComboboxAccessibility(F),setEnabled:F=>this.setEnabled(F),setContextKey:F=>this.options.setContextKey(F)},this.updateStyles(),this.ui}pick(e,t={},n=Ge.None){return new Promise((i,s)=>{let r=u(d=>{var h;r=i,(h=t.onKeyMods)===null||h===void 0||h.call(t,a.keyMods),i(d)},"resolve");if(n.isCancellationRequested){r(void 0);return}const a=this.createQuickPick();let l;const c=[a,a.onDidAccept(()=>{if(a.canSelectMany)r(a.selectedItems.slice()),a.hide();else{const d=a.activeItems[0];d&&(r(d),a.hide())}}),a.onDidChangeActive(d=>{const h=d[0];h&&t.onDidFocus&&t.onDidFocus(h)}),a.onDidChangeSelection(d=>{if(!a.canSelectMany){const h=d[0];h&&(r(h),a.hide())}}),a.onDidTriggerItemButton(d=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton(Object.assign(Object.assign({},d),{removeItem:()=>{const h=a.items.indexOf(d.item);if(h!==-1){const g=a.items.slice(),f=g.splice(h,1),p=a.activeItems.filter(v=>v!==f[0]),_=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=g,p&&(a.activeItems=p),a.keepScrollPosition=_}}}))),a.onDidChangeValue(d=>{l&&!d&&(a.activeItems.length!==1||a.activeItems[0]!==l)&&(a.activeItems=[l])}),n.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{st(c),r(void 0)})];a.title=t.title,a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.autoFocusOnList=t.autoFocusOnList===void 0||t.autoFocusOnList,a.quickNavigate=t.quickNavigate,a.hideInput=!!t.hideInput,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([d,h])=>{l=h,a.busy=!1,a.items=d,a.canSelectMany&&(a.selectedItems=d.filter(g=>g.type!=="separator"&&g.picked)),l&&(a.activeItems=[l])}),a.show(),Promise.resolve(e).then(void 0,d=>{s(d),a.hide()})})}createQuickPick(){const e=this.getUI();return new Df(e)}show(e){const t=this.getUI();this.onShowEmitter.fire();const n=this.controller;this.controller=e,n&&n.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",t.rightActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(Bt.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),kc(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,this.setComboboxAccessibility(!1),t.inputBox.ariaLabel="";const i=this.options.backKeybindingLabel();_k.tooltip=i?m("quickInput.backWithKeybinding","Back ({0})",i):m("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus()}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.display(!!e.list),t.container.classList[e.checkBox?"add":"remove"]("show-checkboxes"),this.updateLayout()}setComboboxAccessibility(e){if(e!==this.comboboxAccessibility){const t=this.getUI();this.comboboxAccessibility=e,this.comboboxAccessibility?(t.inputBox.setAttribute("role","combobox"),t.inputBox.setAttribute("aria-haspopup","true"),t.inputBox.setAttribute("aria-autocomplete","list"),t.inputBox.setAttribute("aria-activedescendant",t.list.getActiveDescendant()||"")):(t.inputBox.removeAttribute("role"),t.inputBox.removeAttribute("aria-haspopup"),t.inputBox.removeAttribute("aria-autocomplete"),t.inputBox.removeAttribute("aria-activedescendant"))}}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.getAction().enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.getAction().enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var t;const n=this.controller;if(n){const i=!(!((t=this.ui)===null||t===void 0)&&t.container.contains(document.activeElement));if(this.controller=null,this.onHideEmitter.fire(),this.getUI().container.style.display="none",!i){let s=this.previousFocusElement;for(;s&&!s.offsetParent;)s=Gi(s.parentElement);s?.offsetParent?(s.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}n.didHide(e)}}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,J_.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:n,contrastBorder:i,widgetShadow:s}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e?e.toString():"",this.ui.container.style.backgroundColor=t?t.toString():"",this.ui.container.style.color=n?n.toString():"",this.ui.container.style.border=i?`1px solid ${i}`:"",this.ui.container.style.boxShadow=s?`0 0 8px 2px ${s}`:"",this.ui.inputBox.style(this.styles.inputBox),this.ui.count.style(this.styles.countBadge),this.ui.ok.style(this.styles.button),this.ui.customButton.style(this.styles.button),this.ui.progressBar.style(this.styles.progressBar),this.ui.list.style(this.styles.list);const r=[];this.styles.list.pickerGroupBorder&&r.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.list.pickerGroupBorder}; }`),this.styles.list.pickerGroupForeground&&r.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.list.pickerGroupForeground}; }`),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(r.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&r.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&r.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&r.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&r.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&r.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),r.push("}"));const a=r.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}}u(J_,"QuickInputController");J_.MAX_WIDTH=600;class K8{constructor(e){this.spliceables=e}splice(e,t,n){this.spliceables.forEach(i=>i.splice(e,t,n))}}u(K8,"CombinedSpliceable");class wd extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}u(wd,"ListError");function HR(o,e){const t=[];for(const n of e){if(o.start>=n.range.end)continue;if(o.end<n.range.start)break;const i=ii.intersect(o,n.range);ii.isEmpty(i)||t.push({range:i,size:n.size})}return t}u(HR,"groupIntersect");function vk({start:o,end:e},t){return{start:o+t,end:e+t}}u(vk,"shift");function aie(o){const e=[];let t=null;for(const n of o){const i=n.range.start,s=n.range.end,r=n.size;if(t&&r===t.size){t.range.end=s;continue}t={range:{start:i,end:s},size:r},e.push(t)}return e}u(aie,"consolidate");function lie(...o){return aie(o.reduce((e,t)=>e.concat(t),[]))}u(lie,"concat");class Ck{constructor(){this.groups=[],this._size=0}splice(e,t,n=[]){const i=n.length-t,s=HR({start:0,end:e},this.groups),r=HR({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:vk(l.range,i),size:l.size})),a=n.map((l,c)=>({range:{start:e+c,end:e+c+1},size:l.size}));this.groups=lie(s,a,r),this._size=this.groups.reduce((l,c)=>l+c.size*(c.range.end-c.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;let t=0,n=0;for(const i of this.groups){const s=i.range.end-i.range.start,r=n+s*i.size;if(e<r)return t+Math.floor((e-n)/i.size);t+=s,n=r}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,n=0;for(const i of this.groups){const s=i.range.end-i.range.start,r=n+s;if(e<r)return t+(e-n)*i.size;t+=s*i.size,n=r}return-1}}u(Ck,"RangeMap");function cie(o){var e;try{(e=o.parentElement)===null||e===void 0||e.removeChild(o)}catch{}}u(cie,"removeFromParent");class j8{constructor(e){this.renderers=e,this.cache=new Map}alloc(e){let t=this.getTemplateCache(e).pop();if(!t){const n=ee(".monaco-list-row"),s=this.getRenderer(e).renderTemplate(n);t={domNode:n,templateId:e,templateData:s}}return t}release(e){e&&this.releaseRow(e)}releaseRow(e){const{domNode:t,templateId:n}=e;t&&(t.classList.remove("scrolling"),cie(t)),this.getTemplateCache(n).push(e)}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const n of e)this.getRenderer(t).disposeTemplate(n.templateData),n.templateData=null}),this.cache.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}u(j8,"RowCache");var ed=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};const Ir={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(o){return[o]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class gp{constructor(e){this.elements=e}update(){}getData(){return this.elements}}u(gp,"ElementsDragAndDropData");class $8{constructor(e){this.elements=e}update(){}getData(){return this.elements}}u($8,"ExternalElementsDragAndDropData");class q8{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const n=e.files.item(t);n&&(n.size||n.type)&&this.files.push(n)}}}getData(){return{types:this.types,files:this.files}}}u(q8,"NativeDragAndDropData");function die(o,e){return Array.isArray(o)&&Array.isArray(e)?Ds(o,e):o===e}u(die,"equalsDragFeedback");class Y8{constructor(e){e?.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,n,i)=>i,e?.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,n)=>n+1,e?.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e?.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}u(Y8,"ListViewAccessibilityProvider");class go{constructor(e,t,n,i=Ir){var s,r,a,l,c,d,h,g,f,p;if(this.virtualDelegate=t,this.domId=`list_id_${++go.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new pr(50),this.splicing=!1,this.dragOverAnimationStopDisposable=U.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=U.None,this.onDragLeaveTimeout=U.None,this.disposables=new J,this._onDidChangeContentHeight=new R,this._horizontalScrolling=!1,i.horizontalScrolling&&i.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=new Ck;for(const v of n)this.renderers.set(v.templateId,v);this.cache=this.disposables.add(new j8(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof i.mouseSupport=="boolean"?i.mouseSupport:!0),this._horizontalScrolling=(s=i.horizontalScrolling)!==null&&s!==void 0?s:Ir.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.additionalScrollHeight=typeof i.additionalScrollHeight>"u"?0:i.additionalScrollHeight,this.accessibilityProvider=new Y8(i.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",((r=i.transformOptimization)!==null&&r!==void 0?r:Ir.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)"),this.disposables.add(gt.addTarget(this.rowsContainer)),this.scrollable=new ap({forceIntegerValues:!0,smoothScrollDuration:(a=i.smoothScrolling)!==null&&a!==void 0&&a?125:0,scheduleAtNextAnimationFrame:v=>br(v)}),this.scrollableElement=this.disposables.add(new gy(this.rowsContainer,{alwaysConsumeMouseWheel:(l=i.alwaysConsumeMouseWheel)!==null&&l!==void 0?l:Ir.alwaysConsumeMouseWheel,horizontal:1,vertical:(c=i.verticalScrollMode)!==null&&c!==void 0?c:Ir.verticalScrollMode,useShadows:(d=i.useShadows)!==null&&d!==void 0?d:Ir.useShadows,mouseWheelScrollSensitivity:i.mouseWheelScrollSensitivity,fastScrollSensitivity:i.fastScrollSensitivity},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(Y(this.rowsContainer,Mt.Change,v=>this.onTouchChange(v))),this.disposables.add(Y(this.scrollableElement.getDomNode(),"scroll",v=>v.target.scrollTop=0)),this.disposables.add(Y(this.domNode,"dragover",v=>this.onDragOver(this.toDragEvent(v)))),this.disposables.add(Y(this.domNode,"drop",v=>this.onDrop(this.toDragEvent(v)))),this.disposables.add(Y(this.domNode,"dragleave",v=>this.onDragLeave(this.toDragEvent(v)))),this.disposables.add(Y(this.domNode,"dragend",v=>this.onDragEnd(v))),this.setRowLineHeight=(h=i.setRowLineHeight)!==null&&h!==void 0?h:Ir.setRowLineHeight,this.setRowHeight=(g=i.setRowHeight)!==null&&g!==void 0?g:Ir.setRowHeight,this.supportDynamicHeights=(f=i.supportDynamicHeights)!==null&&f!==void 0?f:Ir.supportDynamicHeights,this.dnd=(p=i.dnd)!==null&&p!==void 0?p:Ir.dnd,this.layout()}get contentHeight(){return this.rangeMap.size}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:oT(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}updateOptions(e){e.additionalScrollHeight!==void 0&&(this.additionalScrollHeight=e.additionalScrollHeight,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling),e.mouseWheelScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({fastScrollSensitivity:e.fastScrollSensitivity})}splice(e,t,n=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,n)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,n=[]){const i=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s={start:e,end:e+t},r=ii.intersect(i,s),a=new Map;for(let k=r.end-1;k>=r.start;k--){const T=this.items[k];if(T.dragStartDisposable.dispose(),T.checkedDisposable.dispose(),T.row){let x=a.get(T.templateId);x||(x=[],a.set(T.templateId,x));const M=this.renderers.get(T.templateId);M&&M.disposeElement&&M.disposeElement(T.element,k,T.row.templateData,T.size),x.push(T.row)}T.row=null}const l={start:e+t,end:this.items.length},c=ii.intersect(l,i),d=ii.relativeComplement(l,i),h=n.map(k=>({id:String(this.itemId++),element:k,templateId:this.virtualDelegate.getTemplateId(k),size:this.virtualDelegate.getHeight(k),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(k),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:U.None,checkedDisposable:U.None}));let g;e===0&&t>=this.items.length?(this.rangeMap=new Ck,this.rangeMap.splice(0,0,h),g=this.items,this.items=h):(this.rangeMap.splice(e,t,h),g=this.items.splice(e,t,...h));const f=n.length-t,p=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),_=vk(c,f),v=ii.intersect(p,_);for(let k=v.start;k<v.end;k++)this.updateItemInDOM(this.items[k],k);const C=ii.relativeComplement(_,p);for(const k of C)for(let T=k.start;T<k.end;T++)this.removeItemFromDOM(T);const w=d.map(k=>vk(k,f)),S=[{start:e,end:e+n.length},...w].map(k=>ii.intersect(p,k)),E=this.getNextToLastElement(S);for(const k of S)for(let T=k.start;T<k.end;T++){const x=this.items[T],M=a.get(x.templateId),F=M?.pop();this.insertItemInDOM(T,E,F)}for(const k of a.values())for(const T of k)this.cache.release(T);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),g.map(k=>k.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=br(()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10})}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}element(e){return this.items[e].element}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){const n={height:typeof e=="number"?e:MX(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,n.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(n),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:oT(this.domNode)})}render(e,t,n,i,s,r=!1){const a=this.getRenderRange(t,n),l=ii.relativeComplement(a,e),c=ii.relativeComplement(e,a),d=this.getNextToLastElement(l);if(r){const h=ii.intersect(e,a);for(let g=h.start;g<h.end;g++)this.updateItemInDOM(this.items[g],g)}for(const h of l)for(let g=h.start;g<h.end;g++)this.insertItemInDOM(g,d);for(const h of c)for(let g=h.start;g<h.end;g++)this.removeItemFromDOM(g);i!==void 0&&(this.rowsContainer.style.left=`-${i}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&s!==void 0&&(this.rowsContainer.style.width=`${Math.max(s,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=n}insertItemInDOM(e,t,n){const i=this.items[e];i.row||(i.row=n??this.cache.alloc(i.templateId));const s=this.accessibilityProvider.getRole(i.element)||"listitem";i.row.domNode.setAttribute("role",s);const r=this.accessibilityProvider.isChecked(i.element);if(typeof r=="boolean")i.row.domNode.setAttribute("aria-checked",String(!!r));else if(r){const c=u(d=>i.row.domNode.setAttribute("aria-checked",String(!!d)),"update");c(r.value),i.checkedDisposable=r.onDidChange(c)}i.row.domNode.parentElement||(t?this.rowsContainer.insertBefore(i.row.domNode,t):this.rowsContainer.appendChild(i.row.domNode)),this.updateItemInDOM(i,e);const a=this.renderers.get(i.templateId);if(!a)throw new Error(`No renderer found for template id ${i.templateId}`);a?.renderElement(i.element,e,i.row.templateData,i.size);const l=this.dnd.getDragURI(i.element);i.dragStartDisposable.dispose(),i.row.domNode.draggable=!!l,l&&(i.dragStartDisposable=Y(i.row.domNode,"dragstart",c=>this.onDragStart(i.element,l,c))),this.horizontalScrolling&&(this.measureItemWidth(i),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width=Is?"-moz-fit-content":"fit-content",e.width=oT(e.row.domNode);const t=window.getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){const n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.additionalScrollHeight}get onMouseClick(){return fe.map(this.disposables.add(new _t(this.domNode,"click")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return fe.map(this.disposables.add(new _t(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return fe.filter(fe.map(this.disposables.add(new _t(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e),this.disposables),e=>e.browserEvent.button===1,this.disposables)}get onMouseDown(){return fe.map(this.disposables.add(new _t(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return fe.map(this.disposables.add(new _t(this.domNode,"mouseover")).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return fe.any(fe.map(this.disposables.add(new _t(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e),this.disposables),fe.map(this.disposables.add(new _t(this.domNode,Mt.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return fe.map(this.disposables.add(new _t(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return fe.map(this.disposables.add(new _t(this.rowsContainer,Mt.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,n){var i,s;if(!n.dataTransfer)return;const r=this.dnd.getDragElements(e);if(n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setData(K_.TEXT,t),n.dataTransfer.setDragImage){let a;this.dnd.getDragLabel&&(a=this.dnd.getDragLabel(r,n)),typeof a>"u"&&(a=String(r.length));const l=ee(".monaco-drag-image");l.textContent=a,document.body.appendChild(l),n.dataTransfer.setDragImage(l,-10,-10),setTimeout(()=>document.body.removeChild(l),0)}this.currentDragData=new gp(r),dd.CurrentDragAndDropData=new $8(r),(s=(i=this.dnd).onDragStart)===null||s===void 0||s.call(i,this.currentDragData,n)}onDragOver(e){var t;if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),dd.CurrentDragAndDropData&&dd.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(dd.CurrentDragAndDropData)this.currentDragData=dd.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new q8}const n=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.browserEvent);if(this.canDrop=typeof n=="boolean"?n:n.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof n!="boolean"&&n.effect===0?"copy":"move";let i;if(typeof n!="boolean"&&n.feedback?i=n.feedback:typeof e.index>"u"?i=[-1]:i=[e.index],i=gl(i).filter(s=>s>=-1&&s<this.length).sort((s,r)=>s-r),i=i[0]===-1?[-1]:i,die(this.currentDragFeedback,i))return!0;if(this.currentDragFeedback=i,this.currentDragFeedbackDisposable.dispose(),i[0]===-1)this.domNode.classList.add("drop-target"),this.rowsContainer.classList.add("drop-target"),this.currentDragFeedbackDisposable=He(()=>{this.domNode.classList.remove("drop-target"),this.rowsContainer.classList.remove("drop-target")});else{for(const s of i){const r=this.items[s];r.dropTarget=!0,(t=r.row)===null||t===void 0||t.domNode.classList.add("drop-target")}this.currentDragFeedbackDisposable=He(()=>{var s;for(const r of i){const a=this.items[r];a.dropTarget=!1,(s=a.row)===null||s===void 0||s.domNode.classList.remove("drop-target")}})}return!0}onDragLeave(e){var t,n;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=vu(()=>this.clearDragOverFeedback(),100),this.currentDragData&&((n=(t=this.dnd).onDragLeave)===null||n===void 0||n.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,dd.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.browserEvent))}onDragEnd(e){var t,n;this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,dd.CurrentDragAndDropData=void 0,(n=(t=this.dnd).onDragEnd)===null||n===void 0||n.call(t,e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=U.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=DV(this.domNode).top;this.dragOverAnimationDisposable=FX(this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=vu(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,n=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>n&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-n))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let n=e;for(;n instanceof HTMLElement&&n!==this.rowsContainer&&t.contains(n);){const i=n.getAttribute("data-index");if(i){const s=Number(i);if(!isNaN(s))return s}n=n.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,n){const i=this.getRenderRange(e,t);let s,r;e===this.elementTop(i.start)?(s=i.start,r=0):i.end-i.start>1&&(s=i.start+1,r=this.elementTop(s)-e);let a=0;for(;;){const l=this.getRenderRange(e,t);let c=!1;for(let d=l.start;d<l.end;d++){const h=this.probeDynamicHeight(d);h!==0&&this.rangeMap.splice(d,1,[this.items[d]]),a+=h,c=c||h!==0}if(!c){a!==0&&this.eventuallyUpdateScrollDimensions();const d=ii.relativeComplement(i,l);for(const g of d)for(let f=g.start;f<g.end;f++)this.items[f].row&&this.removeItemFromDOM(f);const h=ii.relativeComplement(l,i);for(const g of h)for(let f=g.start;f<g.end;f++){const p=f+1,_=p<this.items.length?this.items[p].row:null,v=_?_.domNode:null;this.insertItemInDOM(f,v)}for(let g=l.start;g<l.end;g++)this.items[g].row&&this.updateItemInDOM(this.items[g],g);if(typeof s=="number"){const g=this.scrollable.getFutureScrollPosition().scrollTop-e,f=this.elementTop(s)-r+g;this.setScrollTop(f,n)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){var t,n,i;const s=this.items[e];if(this.virtualDelegate.getDynamicHeight){const c=this.virtualDelegate.getDynamicHeight(s.element);if(c!==null){const d=s.size;return s.size=c,s.lastDynamicHeightWidth=this.renderWidth,c-d}}if(!s.hasDynamicHeight||s.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(s.element))return 0;const r=s.size;if(!this.setRowHeight&&s.row){const c=s.row.domNode.offsetHeight;return s.size=c,s.lastDynamicHeightWidth=this.renderWidth,c-r}const a=this.cache.alloc(s.templateId);a.domNode.style.height="",this.rowsContainer.appendChild(a.domNode);const l=this.renderers.get(s.templateId);return l&&(l.renderElement(s.element,e,a.templateData,void 0),(t=l.disposeElement)===null||t===void 0||t.call(l,s.element,e,a.templateData,void 0)),s.size=a.domNode.offsetHeight,(i=(n=this.virtualDelegate).setDynamicHeight)===null||i===void 0||i.call(n,s.element,s.size),s.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(a.domNode),this.cache.release(a),s.size-r}getNextToLastElement(e){const t=e[e.length-1];if(!t)return null;const n=this.items[t.end];return!n||!n.row?null:n.row.domNode}getElementDomId(e){return`${this.domId}_${e}`}dispose(){var e;if(this.items){for(const t of this.items)if(t.row){const n=this.renderers.get(t.row.templateId);n&&((e=n.disposeElement)===null||e===void 0||e.call(n,t.element,-1,t.row.templateData,void 0),n.disposeTemplate(t.row.templateData))}this.items=[]}this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),st(this.disposables)}}u(go,"ListView");go.InstanceCount=0;ed([_n],go.prototype,"onMouseClick",null);ed([_n],go.prototype,"onMouseDblClick",null);ed([_n],go.prototype,"onMouseMiddleClick",null);ed([_n],go.prototype,"onMouseDown",null);ed([_n],go.prototype,"onMouseOver",null);ed([_n],go.prototype,"onContextMenu",null);ed([_n],go.prototype,"onTouchStart",null);ed([_n],go.prototype,"onTap",null);var mh=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},BR=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class X8{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,n){const i=this.renderedElements.findIndex(s=>s.templateData===n);if(i>=0){const s=this.renderedElements[i];this.trait.unrender(n),s.index=t}else{const s={index:t,templateData:n};this.renderedElements.push(s)}this.trait.renderIndex(t,n)}splice(e,t,n){const i=[];for(const s of this.renderedElements)s.index<e?i.push(s):s.index>=e+t&&i.push({index:s.index+n-t,templateData:s.templateData});this.renderedElements=i}renderIndexes(e){for(const{index:t,templateData:n}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,n)}disposeTemplate(e){const t=this.renderedElements.findIndex(n=>n.templateData===e);t<0||this.renderedElements.splice(t,1)}}u(X8,"TraitRenderer");let K1=u(class{constructor(e){this._trait=e,this.length=0,this.indexes=[],this.sortedIndexes=[],this._onChange=new R,this.onChange=this._onChange.event}get name(){return this._trait}get renderer(){return new X8(this)}splice(e,t,n){var i;t=Math.max(0,Math.min(t,this.length-e));const s=n.length-t,r=e+t,a=[...this.sortedIndexes.filter(c=>c<e),...n.map((c,d)=>c?d+e:-1).filter(c=>c!==-1),...this.sortedIndexes.filter(c=>c>=r).map(c=>c+s)],l=this.length+s;if(this.sortedIndexes.length>0&&a.length===0&&l>0){const c=(i=this.sortedIndexes.find(d=>d>=e))!==null&&i!==void 0?i:l-1;a.push(Math.min(c,l-1))}this.renderer.splice(e,t,n.length),this._set(a,a),this.length=l}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(UR),t)}_set(e,t,n){const i=this.indexes,s=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const r=wk(s,e);return this.renderer.renderIndexes(r),this._onChange.fire({indexes:e,browserEvent:n}),i}get(){return this.indexes}contains(e){return DD(this.sortedIndexes,e,UR)>=0}dispose(){st(this._onChange)}},"Trait");mh([_n],K1.prototype,"renderer",null);class Z8 extends K1{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}u(Z8,"SelectionTrait");class g0{constructor(e,t,n){this.trait=e,this.view=t,this.identityProvider=n}splice(e,t,n){if(!this.identityProvider)return this.trait.splice(e,t,n.map(()=>!1));const i=this.trait.get().map(r=>this.identityProvider.getId(this.view.element(r)).toString()),s=n.map(r=>i.indexOf(this.identityProvider.getId(r).toString())>-1);this.trait.splice(e,t,s)}}u(g0,"TraitSpliceable");function Pu(o){return o.tagName==="INPUT"||o.tagName==="TEXTAREA"}u(Pu,"isInputElement");function bg(o){return o.classList.contains("monaco-editor")?!0:o.classList.contains("monaco-list")||!o.parentElement?!1:bg(o.parentElement)}u(bg,"isMonacoEditor");function J8(o){return o.tagName==="A"&&o.classList.contains("monaco-button")||o.tagName==="DIV"&&o.classList.contains("monaco-button-dropdown")?!0:o.classList.contains("monaco-list")||!o.parentElement?!1:J8(o.parentElement)}u(J8,"isButton");class DI{constructor(e,t,n){this.list=e,this.view=t,this.disposables=new J,this.multipleSelectionDisposables=new J,this.onKeyDown.filter(i=>i.keyCode===3).on(this.onEnter,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===16).on(this.onUpArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===18).on(this.onDownArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===11).on(this.onPageUpArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===12).on(this.onPageDownArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===9).on(this.onEscape,this,this.disposables),n.multipleSelectionSupport!==!1&&this.onKeyDown.filter(i=>(Xe?i.metaKey:i.ctrlKey)&&i.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables)}get onKeyDown(){return this.disposables.add(fe.chain(this.disposables.add(new _t(this.view.domNode,"keydown")).event).filter(e=>!Pu(e.target)).map(e=>new Pt(e)))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionDisposables.clear(),e.multipleSelectionSupport&&this.onKeyDown.filter(t=>(Xe?t.metaKey:t.ctrlKey)&&t.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables))}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(yi(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}u(DI,"KeyboardController");mh([_n],DI.prototype,"onKeyDown",null);var vc;(function(o){o[o.Automatic=0]="Automatic",o[o.Trigger=1]="Trigger"})(vc||(vc={}));var _g;(function(o){o[o.Idle=0]="Idle",o[o.Typing=1]="Typing"})(_g||(_g={}));const uie=new class{mightProducePrintableCharacter(o){return o.ctrlKey||o.metaKey||o.altKey?!1:o.keyCode>=31&&o.keyCode<=56||o.keyCode>=21&&o.keyCode<=30||o.keyCode>=93&&o.keyCode<=102||o.keyCode>=80&&o.keyCode<=90}};class Q8{constructor(e,t,n,i,s){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=n,this.keyboardNavigationEventFilter=i,this.delegate=s,this.enabled=!1,this.state=_g.Idle,this.mode=vc.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new J,this.disposables=new J,this.updateOptions(e.options)}updateOptions(e){var t,n;!((t=e.typeNavigationEnabled)!==null&&t!==void 0)||t?this.enable():this.disable(),this.mode=(n=e.typeNavigationMode)!==null&&n!==void 0?n:vc.Automatic}enable(){if(this.enabled)return;let e=!1;const t=this.enabledDisposables.add(fe.chain(this.enabledDisposables.add(new _t(this.view.domNode,"keydown")).event)).filter(s=>!Pu(s.target)).filter(()=>this.mode===vc.Automatic||this.triggered).map(s=>new Pt(s)).filter(s=>e||this.keyboardNavigationEventFilter(s)).filter(s=>this.delegate.mightProducePrintableCharacter(s)).forEach(NE).map(s=>s.browserEvent.key).event,n=fe.debounce(t,()=>null,800,void 0,void 0,this.enabledDisposables);fe.reduce(fe.any(t,n),(s,r)=>r===null?null:(s||"")+r,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),n(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),n(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var e;const t=this.list.getFocus();if(t.length>0&&t[0]===this.previouslyFocused){const n=(e=this.list.options.accessibilityProvider)===null||e===void 0?void 0:e.getAriaLabel(this.list.element(t[0]));n&&Zn(n)}this.previouslyFocused=-1}onInput(e){if(!e){this.state=_g.Idle,this.triggered=!1;return}const t=this.list.getFocus(),n=t.length>0?t[0]:0,i=this.state===_g.Idle?1:0;this.state=_g.Typing;for(let s=0;s<this.list.length;s++){const r=(n+s+i)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(r)),l=a&&a.toString();if(typeof l>"u"||Py(e,l)){this.previouslyFocused=n,this.list.setFocus([r]),this.list.reveal(r);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}u(Q8,"TypeNavigationController");class eB{constructor(e,t){this.list=e,this.view=t,this.disposables=new J,this.disposables.add(fe.chain(this.disposables.add(new _t(t.domNode,"keydown")).event)).filter(i=>!Pu(i.target)).map(i=>new Pt(i)).filter(i=>i.keyCode===2&&!i.ctrlKey&&!i.metaKey&&!i.shiftKey&&!i.altKey).on(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const n=this.view.domElement(t[0]);if(!n)return;const i=n.querySelector("[tabIndex]");if(!i||!(i instanceof HTMLElement)||i.tabIndex===-1)return;const s=window.getComputedStyle(i);s.visibility==="hidden"||s.display==="none"||(e.preventDefault(),e.stopPropagation(),i.focus())}dispose(){this.disposables.dispose()}}u(eB,"DOMFocusController");function tB(o){return Xe?o.browserEvent.metaKey:o.browserEvent.ctrlKey}u(tB,"isSelectionSingleChangeEvent");function nB(o){return o.browserEvent.shiftKey}u(nB,"isSelectionRangeChangeEvent");function hie(o){return o instanceof MouseEvent&&o.button===2}u(hie,"isMouseRightClick");const WR={isSelectionSingleChangeEvent:tB,isSelectionRangeChangeEvent:nB};class AI{constructor(e){this.list=e,this.disposables=new J,this._onPointer=new R,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||WR),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(gt.addTarget(e.getHTMLElement()))),fe.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||WR))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){bg(e.browserEvent.target)||document.activeElement!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(bg(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||Pu(e.browserEvent.target)||bg(e.browserEvent.target))return;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionRangeChangeEvent(e))return this.changeSelection(e);if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),hie(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(Pu(e.browserEvent.target)||bg(e.browserEvent.target)||this.isSelectionChangeEvent(e))return;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let n=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){if(typeof n>"u"){const d=this.list.getFocus()[0];n=d??t,this.list.setAnchor(n)}const i=Math.min(n,t),s=Math.max(n,t),r=yi(i,s+1),a=this.list.getSelection(),l=pie(wk(a,[n]),n);if(l.length===0)return;const c=wk(r,mie(a,l));this.list.setSelection(c,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const i=this.list.getSelection(),s=i.filter(r=>r!==t);this.list.setFocus([t]),this.list.setAnchor(t),i.length===s.length?this.list.setSelection([...s,t],e.browserEvent):this.list.setSelection(s,e.browserEvent)}}dispose(){this.disposables.dispose()}}u(AI,"MouseController");class II{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,n=[];e.listBackground&&(e.listBackground.isOpaque()?n.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`):Xe||console.warn(`List with id '${this.selectorSuffix}' was styled with a non-opaque background color. This will break sub-pixel antialiasing.`)),e.listFocusBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionOutline&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected { outline-color: ${e.listFocusAndSelectionOutline} !important; }`),e.listFocusAndSelectionBackground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&n.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(n.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&n.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&n.push(`.monaco-list${t}:not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&n.push(`.monaco-list${t} .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`),e.listSelectionOutline&&n.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listFocusOutline&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`),e.listInactiveFocusOutline&&n.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&n.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropBackground&&n.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropBackground} !important; color: inherit !important; }
			`),e.tableColumnsBorder&&n.push(`
				.monaco-table:hover > .monaco-split-view2,
				.monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
			}`),e.tableOddRowsBackgroundColor&&n.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=n.join(`
`)}}u(II,"DefaultStyleController");const gie={listFocusBackground:B.fromHex("#7FB0D0"),listActiveSelectionBackground:B.fromHex("#0E639C"),listActiveSelectionForeground:B.fromHex("#FFFFFF"),listActiveSelectionIconForeground:B.fromHex("#FFFFFF"),listFocusAndSelectionOutline:B.fromHex("#90C2F9"),listFocusAndSelectionBackground:B.fromHex("#094771"),listFocusAndSelectionForeground:B.fromHex("#FFFFFF"),listInactiveSelectionBackground:B.fromHex("#3F3F46"),listInactiveSelectionIconForeground:B.fromHex("#FFFFFF"),listHoverBackground:B.fromHex("#2A2D2E"),listDropBackground:B.fromHex("#383B3D"),treeIndentGuidesStroke:B.fromHex("#a9a9a9"),tableColumnsBorder:B.fromHex("#cccccc").transparent(.2),tableOddRowsBackgroundColor:B.fromHex("#cccccc").transparent(.04)},fie={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}}};function pie(o,e){const t=o.indexOf(e);if(t===-1)return[];const n=[];let i=t-1;for(;i>=0&&o[i]===e-(t-i);)n.push(o[i--]);for(n.reverse(),i=t;i<o.length&&o[i]===e+(i-t);)n.push(o[i++]);return n}u(pie,"getContiguousRangeContaining");function wk(o,e){const t=[];let n=0,i=0;for(;n<o.length||i<e.length;)if(n>=o.length)t.push(e[i++]);else if(i>=e.length)t.push(o[n++]);else if(o[n]===e[i]){t.push(o[n]),n++,i++;continue}else o[n]<e[i]?t.push(o[n++]):t.push(e[i++]);return t}u(wk,"disjunction");function mie(o,e){const t=[];let n=0,i=0;for(;n<o.length||i<e.length;)if(n>=o.length)t.push(e[i++]);else if(i>=e.length)t.push(o[n++]);else if(o[n]===e[i]){n++,i++;continue}else o[n]<e[i]?t.push(o[n++]):i++;return t}u(mie,"relativeComplement");const UR=u((o,e)=>o-e,"numericSort");class iB{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,n,i){let s=0;for(const r of this.renderers)r.renderElement(e,t,n[s++],i)}disposeElement(e,t,n,i){var s;let r=0;for(const a of this.renderers)(s=a.disposeElement)===null||s===void 0||s.call(a,e,t,n[r],i),r+=1}disposeTemplate(e){let t=0;for(const n of this.renderers)n.disposeTemplate(e[t++])}}u(iB,"PipelineRenderer");class sB{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return e}renderElement(e,t,n){const i=this.accessibilityProvider.getAriaLabel(e);i?n.setAttribute("aria-label",i):n.removeAttribute("aria-label");const s=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof s=="number"?n.setAttribute("aria-level",`${s}`):n.removeAttribute("aria-level")}disposeTemplate(e){}}u(sB,"AccessibiltyRenderer");class oB{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){var n,i;(i=(n=this.dnd).onDragStart)===null||i===void 0||i.call(n,e,t)}onDragOver(e,t,n,i){return this.dnd.onDragOver(e,t,n,i)}onDragLeave(e,t,n,i){var s,r;(r=(s=this.dnd).onDragLeave)===null||r===void 0||r.call(s,e,t,n,i)}onDragEnd(e){var t,n;(n=(t=this.dnd).onDragEnd)===null||n===void 0||n.call(t,e)}drop(e,t,n,i){this.dnd.drop(e,t,n,i)}}u(oB,"ListViewDragAndDrop");class Io{constructor(e,t,n,i,s=fie){var r,a,l,c;this.user=e,this._options=s,this.focus=new K1("focused"),this.anchor=new K1("anchor"),this.eventBufferer=new Mw,this._ariaLabel="",this.disposables=new J,this._onDidDispose=new R,this.onDidDispose=this._onDidDispose.event;const d=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(r=this._options.accessibilityProvider)===null||r===void 0?void 0:r.getWidgetRole():"list";this.selection=new Z8(d!=="listbox"),la(s,gie,!1);const h=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=s.accessibilityProvider,this.accessibilityProvider&&(h.push(new sB(this.accessibilityProvider)),(l=(a=this.accessibilityProvider).onDidChangeActiveDescendant)===null||l===void 0||l.call(a,this.onDidChangeActiveDescendant,this,this.disposables)),i=i.map(f=>new iB(f.templateId,[...h,f]));const g=Object.assign(Object.assign({},s),{dnd:s.dnd&&new oB(this,s.dnd)});if(this.view=new go(t,n,i,g),this.view.domNode.setAttribute("role",d),s.styleController)this.styleController=s.styleController(this.view.domId);else{const f=oo(this.view.domNode);this.styleController=new II(f,this.view.domId)}if(this.spliceable=new K8([new g0(this.focus,this.view,s.identityProvider),new g0(this.selection,this.view,s.identityProvider),new g0(this.anchor,this.view,s.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new eB(this,this.view)),(typeof s.keyboardSupport!="boolean"||s.keyboardSupport)&&(this.keyboardController=new DI(this,this.view,s),this.disposables.add(this.keyboardController)),s.keyboardNavigationLabelProvider){const f=s.keyboardNavigationDelegate||uie;this.typeNavigationController=new Q8(this,this.view,s.keyboardNavigationLabelProvider,(c=s.keyboardNavigationEventFilter)!==null&&c!==void 0?c:()=>!0,f),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(s),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}get onDidChangeFocus(){return fe.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return fe.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=this.disposables.add(fe.chain(this.disposables.add(new _t(this.view.domNode,"keydown")).event)).map(s=>new Pt(s)).filter(s=>e=s.keyCode===58||s.shiftKey&&s.keyCode===68).map(NE).filter(()=>!1).event,n=this.disposables.add(fe.chain(this.disposables.add(new _t(this.view.domNode,"keyup")).event)).forEach(()=>e=!1).map(s=>new Pt(s)).filter(s=>s.keyCode===58||s.shiftKey&&s.keyCode===68).map(NE).map(({browserEvent:s})=>{const r=this.getFocus(),a=r.length?r[0]:void 0,l=typeof a<"u"?this.view.element(a):void 0,c=typeof a<"u"?this.view.domElement(a):this.view.domNode;return{index:a,element:l,anchor:c,browserEvent:s}}).event,i=this.disposables.add(fe.chain(this.view.onContextMenu)).filter(s=>!e).map(({element:s,index:r,browserEvent:a})=>({element:s,index:r,anchor:{x:a.pageX+1,y:a.pageY},browserEvent:a})).event;return fe.any(t,n,i)}get onKeyDown(){return this.disposables.add(new _t(this.view.domNode,"keydown")).event}get onDidFocus(){return fe.signal(this.disposables.add(new _t(this.view.domNode,"focus",!0)).event)}createMouseController(e){return new AI(this)}updateOptions(e={}){var t,n;this._options=Object.assign(Object.assign({},this._options),e),(t=this.typeNavigationController)===null||t===void 0||t.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),(n=this.keyboardController)===null||n===void 0||n.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,n=[]){if(e<0||e>this.view.length)throw new wd(this.user,`Invalid start index: ${e}`);if(t<0)throw new wd(this.user,`Invalid delete count: ${t}`);t===0&&n.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,n))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const n of e)if(n<0||n>=this.length)throw new wd(this.user,`Invalid index ${n}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new wd(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return MO(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const n of e)if(n<0||n>=this.length)throw new wd(this.user,`Invalid index ${n}`);this.focus.set(e,t)}focusNext(e=1,t=!1,n,i){if(this.length===0)return;const s=this.focus.get(),r=this.findNextIndex(s.length>0?s[0]+e:0,t,i);r>-1&&this.setFocus([r],n)}focusPrevious(e=1,t=!1,n,i){if(this.length===0)return;const s=this.focus.get(),r=this.findPreviousIndex(s.length>0?s[0]-e:0,t,i);r>-1&&this.setFocus([r],n)}focusNextPage(e,t){return BR(this,void 0,void 0,function*(){let n=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);n=n===0?0:n-1;const i=this.getFocus()[0];if(i!==n&&(i===void 0||n>i)){const s=this.findPreviousIndex(n,!1,t);s>-1&&i!==s?this.setFocus([s],e):this.setFocus([n],e)}else{const s=this.view.getScrollTop();let r=s+this.view.renderHeight;n>i&&(r-=this.view.elementHeight(n)),this.view.setScrollTop(r),this.view.getScrollTop()!==s&&(this.setFocus([]),yield xc(0),yield this.focusNextPage(e,t))}})}focusPreviousPage(e,t){return BR(this,void 0,void 0,function*(){let n;const i=this.view.getScrollTop();i===0?n=this.view.indexAt(i):n=this.view.indexAfter(i-1);const s=this.getFocus()[0];if(s!==n&&(s===void 0||s>=n)){const r=this.findNextIndex(n,!1,t);r>-1&&s!==r?this.setFocus([r],e):this.setFocus([n],e)}else{const r=i;this.view.setScrollTop(i-this.view.renderHeight),this.view.getScrollTop()!==r&&(this.setFocus([]),yield xc(0),yield this.focusPreviousPage(e,t))}})}focusLast(e,t){if(this.length===0)return;const n=this.findPreviousIndex(this.length-1,!1,t);n>-1&&this.setFocus([n],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,n){if(this.length===0)return;const i=this.findNextIndex(e,!1,n);i>-1&&this.setFocus([i],t)}findNextIndex(e,t=!1,n){for(let i=0;i<this.length;i++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!n||n(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,n){for(let i=0;i<this.length;i++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!n||n(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t){if(e<0||e>=this.length)throw new wd(this.user,`Invalid index ${e}`);const n=this.view.getScrollTop(),i=this.view.elementTop(e),s=this.view.elementHeight(e);if(Sc(t)){const r=s-this.view.renderHeight;this.view.setScrollTop(r*ts(t,0,1)+i)}else{const r=i+s,a=n+this.view.renderHeight;i<n&&r>=a||(i<n||r>=a&&s>=this.view.renderHeight?this.view.setScrollTop(i):r>=a&&this.view.setScrollTop(r-this.view.renderHeight))}}getHTMLElement(){return this.view.domNode}getElementID(e){return this.view.getElementDomId(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(n=>this.view.element(n)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var e;const t=this.focus.get();if(t.length>0){let n;!((e=this.accessibilityProvider)===null||e===void 0)&&e.getActiveDescendantId&&(n=this.accessibilityProvider.getActiveDescendantId(this.view.element(t[0]))),this.view.domNode.setAttribute("aria-activedescendant",n||this.view.getElementDomId(t[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}u(Io,"List");mh([_n],Io.prototype,"onDidChangeFocus",null);mh([_n],Io.prototype,"onDidChangeSelection",null);mh([_n],Io.prototype,"onContextMenu",null);mh([_n],Io.prototype,"onKeyDown",null);mh([_n],Io.prototype,"onDidFocus",null);class rB{constructor(e,t){this.renderer=e,this.modelProvider=t}get templateId(){return this.renderer.templateId}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:U.None}}renderElement(e,t,n,i){if(n.disposable&&n.disposable.dispose(),!n.data)return;const s=this.modelProvider();if(s.isResolved(e))return this.renderer.renderElement(s.get(e),e,n.data,i);const r=new ti,a=s.resolve(e,r.token);n.disposable={dispose:()=>r.cancel()},this.renderer.renderPlaceholder(e,n.data),a.then(l=>this.renderer.renderElement(l,e,n.data,i))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}u(rB,"PagedRenderer");class aB{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}u(aB,"PagedAccessibilityProvider");function bie(o,e){return Object.assign(Object.assign({},e),{accessibilityProvider:e.accessibilityProvider&&new aB(o,e.accessibilityProvider)})}u(bie,"fromPagedListOptions");class lB{constructor(e,t,n,i,s={}){const r=u(()=>this.model,"modelProvider"),a=i.map(l=>new rB(l,r));this.list=new Io(e,t,n,a,bie(r,s))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return fe.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onPointer(){return fe.map(this.list.onPointer,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onDidChangeSelection(){return fe.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:n})=>({elements:e.map(i=>this._model.get(i)),indexes:t,browserEvent:n}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,yi(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}u(lB,"PagedList");const _ie={separatorBorder:B.transparent};class NI{constructor(e,t,n,i){this.container=e,this.view=t,this.disposable=i,this._cachedVisibleSize=void 0,typeof n=="number"?(this._size=n,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=n.cachedVisibleSize)}set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){var n,i;e!==this.visible&&(e?(this.size=ts(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e),(i=(n=this.view).setVisible)===null||i===void 0||i.call(n,e))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}layout(e,t){this.layoutContainer(e),this.view.layout(this.size,e,t)}dispose(){return this.disposable.dispose(),this.view}}u(NI,"ViewItem");class cB extends NI{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}u(cB,"VerticalViewItem");class dB extends NI{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}u(dB,"HorizontalViewItem");var Na;(function(o){o[o.Idle=0]="Idle",o[o.Busy=1]="Busy"})(Na||(Na={}));var j1;(function(o){o.Distribute={type:"distribute"};function e(n){return{type:"split",index:n}}u(e,"Split"),o.Split=e;function t(n){return{type:"invisible",cachedVisibleSize:n}}u(t,"Invisible"),o.Invisible=t})(j1||(j1={}));class PI extends U{constructor(e,t={}){var n,i,s,r,a;super(),this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=Na.Idle,this._onDidSashChange=this._register(new R),this._onDidSashReset=this._register(new R),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=(n=t.orientation)!==null&&n!==void 0?n:0,this.inverseAltBehavior=(i=t.inverseAltBehavior)!==null&&i!==void 0?i:!1,this.proportionalLayout=(s=t.proportionalLayout)!==null&&s!==void 0?s:!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=q(this.el,ee(".sash-container")),this.viewContainer=ee(".split-view-container"),this.scrollable=new ap({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:br}),this.scrollableElement=this._register(new gy(this.viewContainer,{vertical:this.orientation===0?(r=t.scrollbarVisibility)!==null&&r!==void 0?r:1:2,horizontal:this.orientation===1?(a=t.scrollbarVisibility)!==null&&a!==void 0?a:1:2},this.scrollable)),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(l=>{this.viewContainer.scrollTop=l.scrollTop,this.viewContainer.scrollLeft=l.scrollLeft})),q(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||_ie),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((l,c)=>{const d=ss(l.visible)||l.visible?l.size:{type:"invisible",cachedVisibleSize:l.size},h=l.view;this.doAddView(h,d,c,!0)}),this.contentSize=this.viewItems.reduce((l,c)=>l+c.size,0),this.saveProportions())}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,n=this.viewItems.length,i){this.doAddView(e,t,n,i)}layout(e,t){const n=Math.max(this.size,this.contentSize);if(this.size=e,this.layoutContext=t,this.proportions)for(let i=0;i<this.viewItems.length;i++){const s=this.viewItems[i];s.size=ts(Math.round(this.proportions[i]*e),s.minimumSize,s.maximumSize)}else{const i=yi(this.viewItems.length),s=i.filter(a=>this.viewItems[a].priority===1),r=i.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-n,void 0,s,r)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(e=>e.size/this.contentSize))}onSashStart({sash:e,start:t,alt:n}){for(const a of this.viewItems)a.enabled=!1;const i=this.sashItems.findIndex(a=>a.sash===e),s=ur(Y(document.body,"keydown",a=>r(this.sashDragState.current,a.altKey)),Y(document.body,"keyup",()=>r(this.sashDragState.current,!1))),r=u((a,l)=>{const c=this.viewItems.map(p=>p.size);let d=Number.NEGATIVE_INFINITY,h=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(i===this.sashItems.length-1){const _=this.viewItems[i];d=(_.minimumSize-_.size)/2,h=(_.maximumSize-_.size)/2}else{const _=this.viewItems[i+1];d=(_.size-_.maximumSize)/2,h=(_.size-_.minimumSize)/2}let g,f;if(!l){const p=yi(i,-1),_=yi(i+1,this.viewItems.length),v=p.reduce((x,M)=>x+(this.viewItems[M].minimumSize-c[M]),0),C=p.reduce((x,M)=>x+(this.viewItems[M].viewMaximumSize-c[M]),0),w=_.length===0?Number.POSITIVE_INFINITY:_.reduce((x,M)=>x+(c[M]-this.viewItems[M].minimumSize),0),y=_.length===0?Number.NEGATIVE_INFINITY:_.reduce((x,M)=>x+(c[M]-this.viewItems[M].viewMaximumSize),0),S=Math.max(v,y),E=Math.min(w,C),k=this.findFirstSnapIndex(p),T=this.findFirstSnapIndex(_);if(typeof k=="number"){const x=this.viewItems[k],M=Math.floor(x.viewMinimumSize/2);g={index:k,limitDelta:x.visible?S-M:S+M,size:x.size}}if(typeof T=="number"){const x=this.viewItems[T],M=Math.floor(x.viewMinimumSize/2);f={index:T,limitDelta:x.visible?E+M:E-M,size:x.size}}}this.sashDragState={start:a,current:a,index:i,sizes:c,minDelta:d,maxDelta:h,alt:l,snapBefore:g,snapAfter:f,disposable:s}},"resetSashDragState");r(t,n)}onSashChange({current:e}){const{index:t,start:n,sizes:i,alt:s,minDelta:r,maxDelta:a,snapBefore:l,snapAfter:c}=this.sashDragState;this.sashDragState.current=e;const d=e-n,h=this.resize(t,d,i,void 0,void 0,r,a,l,c);if(s){const g=t===this.sashItems.length-1,f=this.viewItems.map(y=>y.size),p=g?t:t+1,_=this.viewItems[p],v=_.size-_.maximumSize,C=_.size-_.minimumSize,w=g?t-1:t+1;this.resize(w,-h,f,void 0,void 0,v,C)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const n=this.viewItems.indexOf(e);n<0||n>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=ts(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&n>0?(this.resize(n-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([n],void 0)))}resizeView(e,t){if(this.state!==Na.Idle)throw new Error("Cant modify splitview");if(this.state=Na.Busy,e<0||e>=this.viewItems.length)return;const n=yi(this.viewItems.length).filter(a=>a!==e),i=[...n.filter(a=>this.viewItems[a].priority===1),e],s=n.filter(a=>this.viewItems[a].priority===2),r=this.viewItems[e];t=Math.round(t),t=ts(t,r.minimumSize,Math.min(r.maximumSize,this.size)),r.size=t,this.relayout(i,s),this.state=Na.Idle}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const n=Math.floor(t/e.length);for(const a of e)a.size=ts(n,a.minimumSize,a.maximumSize);const i=yi(this.viewItems.length),s=i.filter(a=>this.viewItems[a].priority===1),r=i.filter(a=>this.viewItems[a].priority===2);this.relayout(s,r)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,n=this.viewItems.length,i){if(this.state!==Na.Idle)throw new Error("Cant modify splitview");this.state=Na.Busy;const s=ee(".split-view-view");n===this.viewItems.length?this.viewContainer.appendChild(s):this.viewContainer.insertBefore(s,this.viewContainer.children.item(n));const r=e.onDidChange(g=>this.onViewChange(d,g)),a=He(()=>this.viewContainer.removeChild(s)),l=ur(r,a);let c;typeof t=="number"?c=t:t.type==="split"?c=this.getViewSize(t.index)/2:t.type==="invisible"?c={cachedVisibleSize:t.cachedVisibleSize}:c=e.minimumSize;const d=this.orientation===0?new cB(s,e,c,l):new dB(s,e,c,l);if(this.viewItems.splice(n,0,d),this.viewItems.length>1){const g={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},f=this.orientation===0?new Yn(this.sashContainer,{getHorizontalSashTop:x=>this.getSashPosition(x),getHorizontalSashWidth:this.getSashOrthogonalSize},Object.assign(Object.assign({},g),{orientation:1})):new Yn(this.sashContainer,{getVerticalSashLeft:x=>this.getSashPosition(x),getVerticalSashHeight:this.getSashOrthogonalSize},Object.assign(Object.assign({},g),{orientation:0})),p=this.orientation===0?x=>({sash:f,start:x.startY,current:x.currentY,alt:x.altKey}):x=>({sash:f,start:x.startX,current:x.currentX,alt:x.altKey}),v=fe.map(f.onDidStart,p)(this.onSashStart,this),w=fe.map(f.onDidChange,p)(this.onSashChange,this),S=fe.map(f.onDidEnd,()=>this.sashItems.findIndex(x=>x.sash===f))(this.onSashEnd,this),E=f.onDidReset(()=>{const x=this.sashItems.findIndex(j=>j.sash===f),M=yi(x,-1),F=yi(x+1,this.viewItems.length),V=this.findFirstSnapIndex(M),G=this.findFirstSnapIndex(F);typeof V=="number"&&!this.viewItems[V].visible||typeof G=="number"&&!this.viewItems[G].visible||this._onDidSashReset.fire(x)}),k=ur(v,w,S,E,f),T={sash:f,disposable:k};this.sashItems.splice(n-1,0,T)}s.appendChild(e.element);let h;typeof t!="number"&&t.type==="split"&&(h=[t.index]),i||this.relayout([n],h),this.state=Na.Idle,!i&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}relayout(e,t){const n=this.viewItems.reduce((i,s)=>i+s.size,0);this.resize(this.viewItems.length-1,this.size-n,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,n=this.viewItems.map(d=>d.size),i,s,r=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,c){if(e<0||e>=this.viewItems.length)return 0;const d=yi(e,-1),h=yi(e+1,this.viewItems.length);if(s)for(const T of s)WS(d,T),WS(h,T);if(i)for(const T of i)Hv(d,T),Hv(h,T);const g=d.map(T=>this.viewItems[T]),f=d.map(T=>n[T]),p=h.map(T=>this.viewItems[T]),_=h.map(T=>n[T]),v=d.reduce((T,x)=>T+(this.viewItems[x].minimumSize-n[x]),0),C=d.reduce((T,x)=>T+(this.viewItems[x].maximumSize-n[x]),0),w=h.length===0?Number.POSITIVE_INFINITY:h.reduce((T,x)=>T+(n[x]-this.viewItems[x].minimumSize),0),y=h.length===0?Number.NEGATIVE_INFINITY:h.reduce((T,x)=>T+(n[x]-this.viewItems[x].maximumSize),0),S=Math.max(v,y,r),E=Math.min(w,C,a);let k=!1;if(l){const T=this.viewItems[l.index],x=t>=l.limitDelta;k=x!==T.visible,T.setVisible(x,l.size)}if(!k&&c){const T=this.viewItems[c.index],x=t<c.limitDelta;k=x!==T.visible,T.setVisible(x,c.size)}if(k)return this.resize(e,t,n,i,s,r,a);t=ts(t,S,E);for(let T=0,x=t;T<g.length;T++){const M=g[T],F=ts(f[T]+x,M.minimumSize,M.maximumSize),V=F-f[T];x-=V,M.size=F}for(let T=0,x=t;T<p.length;T++){const M=p[T],F=ts(_[T]-x,M.minimumSize,M.maximumSize),V=F-_[T];x+=V,M.size=F}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,l)=>a+l.size,0);let n=this.size-t;const i=yi(this.viewItems.length-1,-1),s=i.filter(a=>this.viewItems[a].priority===1),r=i.filter(a=>this.viewItems[a].priority===2);for(const a of r)WS(i,a);for(const a of s)Hv(i,a);typeof e=="number"&&Hv(i,e);for(let a=0;n!==0&&a<i.length;a++){const l=this.viewItems[i[a]],c=ts(l.size+n,l.minimumSize,l.maximumSize),d=c-l.size;n-=d,l.size=c}}layoutViews(){this.contentSize=this.viewItems.reduce((t,n)=>t+n.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this.contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this.contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;const n=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),i=[...this.viewItems].reverse();e=!1;const s=i.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;const r=i.map(l=>e=l.maximumSize-l.size>0||e).reverse();let a=0;for(let l=0;l<this.sashItems.length;l++){const{sash:c}=this.sashItems[l],d=this.viewItems[l];a+=d.size;const h=!(t[l]&&r[l+1]),g=!(n[l]&&s[l+1]);if(h&&g){const f=yi(l,-1),p=yi(l+1,this.viewItems.length),_=this.findFirstSnapIndex(f),v=this.findFirstSnapIndex(p),C=typeof _=="number"&&!this.viewItems[_].visible,w=typeof v=="number"&&!this.viewItems[v].visible;C&&s[l]&&(a>0||this.startSnappingEnabled)?c.state=1:w&&t[l]&&(a<this.contentSize||this.endSnappingEnabled)?c.state=2:c.state=0}else h&&!g?c.state=1:!h&&g?c.state=2:c.state=3}}getSashPosition(e){let t=0;for(let n=0;n<this.sashItems.length;n++)if(t+=this.viewItems[n].size,this.sashItems[n].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const n=this.viewItems[t];if(n.visible&&n.snap)return t}for(const t of e){const n=this.viewItems[t];if(n.visible&&n.maximumSize-n.minimumSize>0)return;if(!n.visible&&n.snap)return t}}dispose(){super.dispose(),st(this.viewItems),this.viewItems=[],this.sashItems.forEach(e=>e.disposable.dispose()),this.sashItems=[]}}u(PI,"SplitView");class fp{constructor(e,t,n){this.columns=e,this.getColumnSize=n,this.templateId=fp.TemplateId,this.renderedTemplates=new Set;const i=new Map(t.map(s=>[s.templateId,s]));this.renderers=[];for(const s of e){const r=i.get(s.templateId);if(!r)throw new Error(`Table cell renderer for template id ${s.templateId} not found.`);this.renderers.push(r)}}renderTemplate(e){const t=q(e,ee(".monaco-table-tr")),n=[],i=[];for(let r=0;r<this.columns.length;r++){const a=this.renderers[r],l=q(t,ee(".monaco-table-td",{"data-col-index":r}));l.style.width=`${this.getColumnSize(r)}px`,n.push(l),i.push(a.renderTemplate(l))}const s={container:e,cellContainers:n,cellTemplateData:i};return this.renderedTemplates.add(s),s}renderElement(e,t,n,i){for(let s=0;s<this.columns.length;s++){const a=this.columns[s].project(e);this.renderers[s].renderElement(a,t,n.cellTemplateData[s],i)}}disposeElement(e,t,n,i){for(let s=0;s<this.columns.length;s++){const r=this.renderers[s];if(r.disposeElement){const l=this.columns[s].project(e);r.disposeElement(l,t,n.cellTemplateData[s],i)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);Tn(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:n}of this.renderedTemplates)n[e].style.width=`${t}px`}}u(fp,"TableListRenderer");fp.TemplateId="row";function vie(o){return{getHeight(e){return o.getHeight(e)},getTemplateId(){return fp.TemplateId}}}u(vie,"asListVirtualDelegate");class uB{constructor(e,t){this.column=e,this.index=t,this._onDidLayout=new R,this.onDidLayout=this._onDidLayout.event,this.element=ee(".monaco-table-th",{"data-col-index":t,title:e.tooltip},e.label)}get minimumSize(){var e;return(e=this.column.minimumWidth)!==null&&e!==void 0?e:120}get maximumSize(){var e;return(e=this.column.maximumWidth)!==null&&e!==void 0?e:Number.POSITIVE_INFINITY}get onDidChange(){var e;return(e=this.column.onDidChangeWidthConstraints)!==null&&e!==void 0?e:fe.None}layout(e){this._onDidLayout.fire([this.index,e])}}u(uB,"ColumnHeader");class Q_{constructor(e,t,n,i,s,r){this.virtualDelegate=n,this.domId=`table_id_${++Q_.InstanceCount}`,this.disposables=new J,this.cachedWidth=0,this.cachedHeight=0,this.domNode=q(t,ee(`.monaco-table.${this.domId}`));const a=i.map((d,h)=>new uB(d,h)),l={size:a.reduce((d,h)=>d+h.column.weight,0),views:a.map(d=>({size:d.column.weight,view:d}))};this.splitview=this.disposables.add(new PI(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l})),this.splitview.el.style.height=`${n.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${n.headerRowHeight}px`;const c=new fp(i,s,d=>this.splitview.getViewSize(d));this.list=this.disposables.add(new Io(e,this.domNode,vie(n),[c],r)),fe.any(...a.map(d=>d.onDidLayout))(([d,h])=>c.layoutColumn(d,h),null,this.disposables),this.splitview.onDidSashReset(d=>{const h=i.reduce((f,p)=>f+p.weight,0),g=i[d].weight/h*this.cachedWidth;this.splitview.resizeView(d,g)},null,this.disposables),this.styleElement=oo(this.domNode),this.style({})}get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}updateOptions(e){this.list.updateOptions(e)}splice(e,t,n=[]){this.list.splice(e,t,n)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}}u(Q_,"Table");Q_.InstanceCount=0;const Cie={inputActiveOptionBorder:B.fromHex("#007ACC00"),inputActiveOptionForeground:B.fromHex("#FFFFFF"),inputActiveOptionBackground:B.fromHex("#0E639C50")};class pp extends lo{constructor(e){super(),this._onChange=this._register(new R),this.onChange=this._onChange.event,this._onKeyDown=this._register(new R),this.onKeyDown=this._onKeyDown.event,this._opts=Object.assign(Object.assign({},Cie),e),this._checked=this._opts.isChecked;const t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...Mi.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this.domNode.title=this._opts.title,this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,n=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),n.preventDefault())}),this.ignoreGesture(this.domNode),this.onkeydown(this.domNode,n=>{if(n.keyCode===10||n.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),n.preventDefault(),n.stopPropagation();return}this._onKeyDown.fire(n)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 2+2+2+16}style(e){e.inputActiveOptionBorder&&(this._opts.inputActiveOptionBorder=e.inputActiveOptionBorder),e.inputActiveOptionForeground&&(this._opts.inputActiveOptionForeground=e.inputActiveOptionForeground),e.inputActiveOptionBackground&&(this._opts.inputActiveOptionBackground=e.inputActiveOptionBackground),this.applyStyles()}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder?this._opts.inputActiveOptionBorder.toString():"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground?this._opts.inputActiveOptionForeground.toString():"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground?this._opts.inputActiveOptionBackground.toString():"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}u(pp,"Toggle");const wie=m("caseDescription","Match Case"),yie=m("wordsDescription","Match Whole Word"),Sie=m("regexDescription","Use Regular Expression");class RI extends pp{constructor(e){super({icon:b.caseSensitive,title:wie+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}u(RI,"CaseSensitiveToggle");class FI extends pp{constructor(e){super({icon:b.wholeWord,title:yie+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}u(FI,"WholeWordsToggle");class OI extends pp{constructor(e){super({icon:b.regex,title:Sie+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}u(OI,"RegexToggle");const Tie=m("defaultLabel","input");class hB extends lo{constructor(e,t,n,i){var s;super(),this._showOptionButtons=n,this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalToggles=[],this._onDidOptionChange=this._register(new R),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new R),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new R),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new R),this._onKeyUp=this._register(new R),this._onCaseSensitiveKeyDown=this._register(new R),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new R),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.contextViewProvider=t,this.placeholder=i.placeholder||"",this.validation=i.validation,this.label=i.label||Tie,this.inputActiveOptionBorder=i.inputActiveOptionBorder,this.inputActiveOptionForeground=i.inputActiveOptionForeground,this.inputActiveOptionBackground=i.inputActiveOptionBackground,this.inputBackground=i.inputBackground,this.inputForeground=i.inputForeground,this.inputBorder=i.inputBorder,this.inputValidationInfoBorder=i.inputValidationInfoBorder,this.inputValidationInfoBackground=i.inputValidationInfoBackground,this.inputValidationInfoForeground=i.inputValidationInfoForeground,this.inputValidationWarningBorder=i.inputValidationWarningBorder,this.inputValidationWarningBackground=i.inputValidationWarningBackground,this.inputValidationWarningForeground=i.inputValidationWarningForeground,this.inputValidationErrorBorder=i.inputValidationErrorBorder,this.inputValidationErrorBackground=i.inputValidationErrorBackground,this.inputValidationErrorForeground=i.inputValidationErrorForeground;const r=i.appendCaseSensitiveLabel||"",a=i.appendWholeWordsLabel||"",l=i.appendRegexLabel||"",c=i.history||[],d=!!i.flexibleHeight,h=!!i.flexibleWidth,g=i.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new MI(this.domNode,this.contextViewProvider,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:c,showHistoryHint:i.showHistoryHint,flexibleHeight:d,flexibleWidth:h,flexibleMaxHeight:g})),this.regex=this._register(new OI({appendTitle:l,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.regex.onChange(p=>{this._onDidOptionChange.fire(p),!p&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(p=>{this._onRegexKeyDown.fire(p)})),this.wholeWords=this._register(new FI({appendTitle:a,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.wholeWords.onChange(p=>{this._onDidOptionChange.fire(p),!p&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new RI({appendTitle:r,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.caseSensitive.onChange(p=>{this._onDidOptionChange.fire(p),!p&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(p=>{this._onCaseSensitiveKeyDown.fire(p)}));const f=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,p=>{if(p.equals(15)||p.equals(17)||p.equals(9)){const _=f.indexOf(document.activeElement);if(_>=0){let v=-1;p.equals(17)?v=(_+1)%f.length:p.equals(15)&&(_===0?v=f.length-1:v=_-1),p.equals(9)?(f[_].blur(),this.inputBox.focus()):v>=0&&f[v].focus(),ft.stop(p,!0)}}}),this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this._showOptionButtons?"block":"none",this.controls.appendChild(this.caseSensitive.domNode),this.controls.appendChild(this.wholeWords.domNode),this.controls.appendChild(this.regex.domNode),this._showOptionButtons||(this.caseSensitive.domNode.style.display="none",this.wholeWords.domNode.style.display="none",this.regex.domNode.style.display="none");for(const p of(s=i?.additionalToggles)!==null&&s!==void 0?s:[])this._register(p),this.controls.appendChild(p.domNode),this._register(p.onChange(_=>{this._onDidOptionChange.fire(_),!_&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(p);this.additionalToggles.length>0&&(this.controls.style.display="block"),this.inputBox.paddingRight=(this._showOptionButtons?this.caseSensitive.width()+this.wholeWords.width()+this.regex.width():0)+this.additionalToggles.reduce((p,_)=>p+_.width(),0),this.domNode.appendChild(this.controls),e?.appendChild(this.domNode),this._register(Y(this.inputBox.inputElement,"compositionstart",p=>{this.imeSessionInProgress=!0})),this._register(Y(this.inputBox.inputElement,"compositionend",p=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,p=>this._onKeyDown.fire(p)),this.onkeyup(this.inputBox.inputElement,p=>this._onKeyUp.fire(p)),this.oninput(this.inputBox.inputElement,p=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,p=>this._onMouseDown.fire(p))}get onDidChange(){return this.inputBox.onDidChange}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.regex.enable(),this.wholeWords.enable(),this.caseSensitive.enable();for(const e of this.additionalToggles)e.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.regex.disable(),this.wholeWords.disable(),this.caseSensitive.disable();for(const e of this.additionalToggles)e.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.regex.style(e),this.wholeWords.style(e),this.caseSensitive.style(e);for(const n of this.additionalToggles)n.style(e);const t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){return this.caseSensitive.checked}setCaseSensitive(e){this.caseSensitive.checked=e}getWholeWords(){return this.wholeWords.checked}setWholeWords(e){this.wholeWords.checked=e}getRegex(){return this.regex.checked}setRegex(e){this.regex.checked=e,this.validate()}focusOnCaseSensitive(){this.caseSensitive.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}}u(hB,"FindInput");var Kd;(function(o){o[o.Unknown=0]="Unknown",o[o.Twistie=1]="Twistie",o[o.Element=2]="Element",o[o.Filter=3]="Filter"})(Kd||(Kd={}));class Ls extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}u(Ls,"TreeError");class Gy{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}u(Gy,"WeakMapper");function VI(o){return typeof o=="object"&&"visibility"in o&&"data"in o}u(VI,"isFilterResult");function zb(o){switch(o){case!0:return 1;case!1:return 0;default:return o}}u(zb,"getVisibleState");function HT(o){return typeof o.collapsible=="boolean"}u(HT,"isCollapsibleStateUpdate");class gB{constructor(e,t,n,i={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new Mw,this._onDidChangeCollapseState=new R,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new R,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new R,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new pr(M5),this.collapseByDefault=typeof i.collapseByDefault>"u"?!1:i.collapseByDefault,this.filter=i.filter,this.autoExpandSingleChildren=typeof i.autoExpandSingleChildren>"u"?!1:i.autoExpandSingleChildren,this.root={parent:void 0,element:n,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,n=je.empty(),i={}){if(e.length===0)throw new Ls(this.user,"Invalid tree location");i.diffIdentityProvider?this.spliceSmart(i.diffIdentityProvider,e,t,n,i):this.spliceSimple(e,t,n,i)}spliceSmart(e,t,n,i,s,r){var a;i===void 0&&(i=je.empty()),r===void 0&&(r=(a=s.diffDepth)!==null&&a!==void 0?a:0);const{parentNode:l}=this.getParentNodeWithListIndex(t);if(!l.lastDiffIds)return this.spliceSimple(t,n,i,s);const c=[...i],d=t[t.length-1],h=new Yo({getElements:()=>l.lastDiffIds},{getElements:()=>[...l.children.slice(0,d),...c,...l.children.slice(d+n)].map(v=>e.getId(v.element).toString())}).ComputeDiff(!1);if(h.quitEarly)return l.lastDiffIds=void 0,this.spliceSimple(t,n,c,s);const g=t.slice(0,-1),f=u((v,C,w)=>{if(r>0)for(let y=0;y<w;y++)v--,C--,this.spliceSmart(e,[...g,v,0],Number.MAX_SAFE_INTEGER,c[C].children,s,r-1)},"recurseSplice");let p=Math.min(l.children.length,d+n),_=c.length;for(const v of h.changes.sort((C,w)=>w.originalStart-C.originalStart))f(p,_,p-(v.originalStart+v.originalLength)),p=v.originalStart,_=v.modifiedStart-d,this.spliceSimple([...g,p],v.originalLength,je.slice(c,_,_+v.modifiedLength),s);f(p,_,p)}spliceSimple(e,t,n=je.empty(),{onDidCreateNode:i,onDidDeleteNode:s,diffIdentityProvider:r}){const{parentNode:a,listIndex:l,revealed:c,visible:d}=this.getParentNodeWithListIndex(e),h=[],g=je.map(n,T=>this.createTreeNode(T,a,a.visible?1:0,c,h,i)),f=e[e.length-1],p=a.children.length>0;let _=0;for(let T=f;T>=0&&T<a.children.length;T--){const x=a.children[T];if(x.visible){_=x.visibleChildIndex;break}}const v=[];let C=0,w=0;for(const T of g)v.push(T),w+=T.renderNodeCount,T.visible&&(T.visibleChildIndex=_+C++);const y=T2(a.children,f,t,v);r?a.lastDiffIds?T2(a.lastDiffIds,f,t,v.map(T=>r.getId(T.element).toString())):a.lastDiffIds=a.children.map(T=>r.getId(T.element).toString()):a.lastDiffIds=void 0;let S=0;for(const T of y)T.visible&&S++;if(S!==0)for(let T=f+v.length;T<a.children.length;T++){const x=a.children[T];x.visible&&(x.visibleChildIndex-=S)}if(a.visibleChildrenCount+=C-S,c&&d){const T=y.reduce((x,M)=>x+(M.visible?M.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,w-T),this.list.splice(l,T,h)}if(y.length>0&&s){const T=u(x=>{s(x),x.children.forEach(T)},"visit");y.forEach(T)}this._onDidSplice.fire({insertedNodes:v,deletedNodes:y});const E=a.children.length>0;p!==E&&this.setCollapsible(e.slice(0,-1),E);let k=a;for(;k;){if(k.visibility===2){this.refilterDelayer.trigger(()=>this.refilter());break}k=k.parent}}rerender(e){if(e.length===0)throw new Ls(this.user,"Invalid tree location");const{node:t,listIndex:n,revealed:i}=this.getTreeNodeWithListIndex(e);t.visible&&i&&this.list.splice(n,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:n,revealed:i}=this.getTreeNodeWithListIndex(e);return n&&i?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const n=this.getTreeNode(e);typeof t>"u"&&(t=!n.collapsible);const i={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,i))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,n){const i=this.getTreeNode(e);typeof t>"u"&&(t=!i.collapsed);const s={collapsed:t,recursive:n||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,s))}_setCollapseState(e,t){const{node:n,listIndex:i,revealed:s}=this.getTreeNodeWithListIndex(e),r=this._setListNodeCollapseState(n,i,s,t);if(n!==this.root&&this.autoExpandSingleChildren&&r&&!HT(t)&&n.collapsible&&!n.collapsed&&!t.recursive){let a=-1;for(let l=0;l<n.children.length;l++)if(n.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return r}_setListNodeCollapseState(e,t,n,i){const s=this._setNodeCollapseState(e,i,!1);if(!n||!e.visible||!s)return s;const r=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=r-(t===-1?0:1);return this.list.splice(t+1,l,a.slice(1)),s}_setNodeCollapseState(e,t,n){let i;if(e===this.root?i=!1:(HT(t)?(i=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(i=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):i=!1,i&&this._onDidChangeCollapseState.fire({node:e,deep:n})),!HT(t)&&t.recursive)for(const s of e.children)i=this._setNodeCollapseState(s,t,!0)||i;return i}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t),this.refilterDelayer.cancel()}createTreeNode(e,t,n,i,s,r){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,n);a.visibility=l,i&&s.push(a);const c=e.children||je.empty(),d=i&&l!==0&&!a.collapsed,h=je.map(c,p=>this.createTreeNode(p,a,l,d,s,r));let g=0,f=1;for(const p of h)a.children.push(p),f+=p.renderNodeCount,p.visible&&(p.visibleChildIndex=g++);return a.collapsible=a.collapsible||a.children.length>0,a.visibleChildrenCount=g,a.visible=l===2?g>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=f):(a.renderNodeCount=0,i&&s.pop()),r?.(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterCollapseChange(e,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const n of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(n,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterFilterChange(e,t,n,i=!0){let s;if(e!==this.root){if(s=this._filterNode(e,t),s===0)return e.visible=!1,e.renderNodeCount=0,!1;i&&n.push(e)}const r=n.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||s!==0){let l=0;for(const c of e.children)a=this._updateNodeAfterFilterChange(c,s,n,i&&!e.collapsed)||a,c.visible&&(c.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=s===2?a:s===1,e.visibility=s),e.visible?e.collapsed||(e.renderNodeCount+=n.length-r):(e.renderNodeCount=0,i&&n.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const n=this.filter?this.filter.filter(e.element,t):1;return typeof n=="boolean"?(e.filterData=void 0,n?1:0):VI(n)?(e.filterData=n.data,zb(n.visibility)):(e.filterData=void 0,zb(n))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[n,...i]=e;return n<0||n>t.children.length?!1:this.hasTreeNode(i,t.children[n])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[n,...i]=e;if(n<0||n>t.children.length)throw new Ls(this.user,"Invalid tree location");return this.getTreeNode(i,t.children[n])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:n,revealed:i,visible:s}=this.getParentNodeWithListIndex(e),r=e[e.length-1];if(r<0||r>t.children.length)throw new Ls(this.user,"Invalid tree location");const a=t.children[r];return{node:a,listIndex:n,revealed:i,visible:s&&a.visible}}getParentNodeWithListIndex(e,t=this.root,n=0,i=!0,s=!0){const[r,...a]=e;if(r<0||r>t.children.length)throw new Ls(this.user,"Invalid tree location");for(let l=0;l<r;l++)n+=t.children[l].renderNodeCount;return i=i&&!t.collapsed,s=s&&t.visible,a.length===0?{parentNode:t,listIndex:n,revealed:i,visible:s}:this.getParentNodeWithListIndex(a,t.children[r],n+1,i,s)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let n=e;for(;n.parent;)t.push(n.parent.children.indexOf(n)),n=n.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:C$(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}}u(gB,"IndexTreeModel");class fB{constructor(){this.map=new Map}add(e,t){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(t)}delete(e,t){const n=this.map.get(e);n&&(n.delete(t),n.size===0&&this.map.delete(e))}forEach(e,t){const n=this.map.get(e);n&&n.forEach(t)}}u(fB,"SetMap");globalThis&&globalThis.__awaiter;class pB extends gp{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}u(pB,"TreeElementsDragAndDropData");function BT(o){return o instanceof gp?new pB(o):o}u(BT,"asTreeDragAndDropData");class mB{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=U.None}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){var n,i;(i=(n=this.dnd).onDragStart)===null||i===void 0||i.call(n,BT(e),t)}onDragOver(e,t,n,i,s=!0){const r=this.dnd.onDragOver(BT(e),t&&t.element,n,i),a=this.autoExpandNode!==t;if(a&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return r;if(a&&typeof r!="boolean"&&r.autoExpand&&(this.autoExpandDisposable=vu(()=>{const g=this.modelProvider(),f=g.getNodeLocation(t);g.isCollapsed(f)&&g.setCollapsed(f,!1),this.autoExpandNode=void 0},500)),typeof r=="boolean"||!r.accept||typeof r.bubble>"u"||r.feedback){if(!s){const g=typeof r=="boolean"?r:r.accept,f=typeof r=="boolean"?void 0:r.effect;return{accept:g,effect:f,feedback:[n]}}return r}if(r.bubble===1){const g=this.modelProvider(),f=g.getNodeLocation(t),p=g.getParentNodeLocation(f),_=g.getNode(p),v=p&&g.getListIndex(p);return this.onDragOver(e,_,v,i,!1)}const l=this.modelProvider(),c=l.getNodeLocation(t),d=l.getListIndex(c),h=l.getListRenderCount(c);return Object.assign(Object.assign({},r),{feedback:yi(d,d+h)})}drop(e,t,n,i){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(BT(e),t&&t.element,n,i)}onDragEnd(e){var t,n;(n=(t=this.dnd).onDragEnd)===null||n===void 0||n.call(t,e)}}u(mB,"TreeNodeListDragAndDrop");function Lie(o,e){return e&&Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new mB(o,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))}},accessibilityProvider:e.accessibilityProvider&&Object.assign(Object.assign({},e.accessibilityProvider),{getSetSize(t){const n=o(),i=n.getNodeLocation(t),s=n.getParentNodeLocation(i);return n.getNode(s).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))}),keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}})})}u(Lie,"asListOptions");class zy{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){var n,i;(i=(n=this.delegate).setDynamicHeight)===null||i===void 0||i.call(n,e.element,t)}}u(zy,"ComposedTreeDelegate");var Kb;(function(o){o.None="none",o.OnHover="onHover",o.Always="always"})(Kb||(Kb={}));class bB{constructor(e,t=[]){this._elements=t,this.disposables=new J,this.onDidChange=fe.forEach(e,n=>this._elements=n,this.disposables)}get elements(){return this._elements}dispose(){this.disposables.dispose()}}u(bB,"EventCollection");class Af{constructor(e,t,n,i,s={}){var r;this.renderer=e,this.modelProvider=t,this.activeNodes=i,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=Af.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.renderedIndentGuides=new fB,this.activeIndentNodes=new Set,this.indentGuidesDisposable=U.None,this.disposables=new J,this.templateId=e.templateId,this.updateOptions(s),fe.map(n,a=>a.node)(this.onDidChangeNodeTwistieState,this,this.disposables),(r=e.onDidChangeTwistieState)===null||r===void 0||r.call(e,this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"&&(this.indent=ts(e.indent,0,40)),typeof e.renderIndentGuides<"u"){const t=e.renderIndentGuides!==Kb.None;if(t!==this.shouldRenderIndentGuides&&(this.shouldRenderIndentGuides=t,this.indentGuidesDisposable.dispose(),t)){const n=new J;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,n),this.indentGuidesDisposable=n,this._onDidChangeActiveNodes(this.activeNodes.elements)}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=q(e,ee(".monaco-tl-row")),n=q(t,ee(".monaco-tl-indent")),i=q(t,ee(".monaco-tl-twistie")),s=q(t,ee(".monaco-tl-contents")),r=this.renderer.renderTemplate(s);return{container:e,indent:n,twistie:i,indentGuidesDisposable:U.None,templateData:r}}renderElement(e,t,n,i){typeof i=="number"&&(this.renderedNodes.set(e,{templateData:n,height:i}),this.renderedElements.set(e.element,e));const s=Af.DefaultIndent+(e.depth-1)*this.indent;n.twistie.style.paddingLeft=`${s}px`,n.indent.style.width=`${s+this.indent-16}px`,this.renderTwistie(e,n),typeof i=="number"&&this.renderIndentGuides(e,n),this.renderer.renderElement(e,t,n.templateData,i)}disposeElement(e,t,n,i){var s,r;n.indentGuidesDisposable.dispose(),(r=(s=this.renderer).disposeElement)===null||r===void 0||r.call(s,e,t,n.templateData,i),typeof i=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this.renderTwistie(e,t.templateData),this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderIndentGuides(e,t.templateData))}renderTwistie(e,t){t.twistie.classList.remove(...b.treeItemExpanded.classNamesArray);let n=!1;this.renderer.renderTwistie&&(n=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(n||t.twistie.classList.add(...b.treeItemExpanded.classNamesArray),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded")}renderIndentGuides(e,t){if(Tn(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const n=new J,i=this.modelProvider();let s=e;for(;;){const r=i.getNodeLocation(s),a=i.getParentNodeLocation(r);if(!a)break;const l=i.getNode(a),c=ee(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(l)&&c.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(c):t.indent.insertBefore(c,t.indent.firstElementChild),this.renderedIndentGuides.add(l,c),n.add(He(()=>this.renderedIndentGuides.delete(l,c))),s=l}t.indentGuidesDisposable=n}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,n=this.modelProvider();e.forEach(i=>{const s=n.getNodeLocation(i);try{const r=n.getParentNodeLocation(s);i.collapsible&&i.children.length>0&&!i.collapsed?t.add(i):r&&t.add(n.getNode(r))}catch{}}),this.activeIndentNodes.forEach(i=>{t.has(i)||this.renderedIndentGuides.forEach(i,s=>s.classList.remove("active"))}),t.forEach(i=>{this.activeIndentNodes.has(i)||this.renderedIndentGuides.forEach(i,s=>s.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),st(this.disposables)}}u(Af,"TreeRenderer");Af.DefaultIndent=8;class _B{constructor(e,t,n){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=n,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new J,e.onWillRefilter(this.reset,this,this.disposables)}get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}filter(e,t){let n=1;if(this._filter){const r=this._filter.filter(e,t);if(typeof r=="boolean"?n=r?1:0:VI(r)?n=zb(r.visibility):n=r,n===0)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:fr.Default,visibility:n};const i=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),s=Array.isArray(i)?i:[i];for(const r of s){const a=r&&r.toString();if(typeof a>"u")return{data:fr.Default,visibility:n};const l=yf(this._pattern,this._lowercasePattern,0,a,a.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(l)return this._matchCount++,s.length===1?{data:l,visibility:n}:{data:{label:a,score:l},visibility:n}}return this.tree.findMode===Yr.Filter?2:{data:fr.Default,visibility:n}}reset(){this._totalCount=0,this._matchCount=0}dispose(){st(this.disposables)}}u(_B,"FindFilter");var Yr;(function(o){o[o.Highlight=0]="Highlight",o[o.Filter=1]="Filter"})(Yr||(Yr={}));let xie=u(class{constructor(e,t,n,i,s){var r;this.tree=e,this.view=n,this.filter=i,this.contextViewProvider=s,this._pattern="",this.width=0,this._onDidChangeMode=new R,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangePattern=new R,this._onDidChangeOpenState=new R,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new J,this.disposables=new J,this._mode=(r=e.options.defaultFindMode)!==null&&r!==void 0?r:Yr.Highlight,t.onDidSplice(this.onDidSpliceModel,this,this.disposables)}get pattern(){return this._pattern}get mode(){return this._mode}set mode(e){e!==this._mode&&(this._mode=e,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e))}onDidSpliceModel(){!this.widget||this.pattern.length===0||(this.tree.refilter(),this.render())}render(){var e,t;const n=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&n?(e=this.widget)===null||e===void 0||e.showMessage({type:2,content:m("not found","No elements found.")}):(t=this.widget)===null||t===void 0||t.clearMessage()}shouldAllowFocus(e){return!this.widget||!this.pattern||this._mode===Yr.Filter||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!fr.isDefault(e.filterData)}style(e){var t;this.styles=e,(t=this.widget)===null||t===void 0||t.style(e)}layout(e){var t;this.width=e,(t=this.widget)===null||t===void 0||t.layout(e)}dispose(){this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}},"FindController");function GR(o){let e=Kd.Unknown;return rT(o.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=Kd.Twistie:rT(o.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?e=Kd.Element:rT(o.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(e=Kd.Filter),{browserEvent:o.browserEvent,element:o.element?o.element.element:null,target:e}}u(GR,"asTreeMouseEvent$1");function f0(o,e){e(o),o.children.forEach(t=>f0(t,e))}u(f0,"dfs$1");class p0{constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new R,this.onDidChange=this._onDidChange.event}get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}set(e,t){!t?.__forceEvent&&Ds(this.nodes,e)||this._set(e,!1,t)}_set(e,t,n){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const i=this;this._onDidChange.fire({get elements(){return i.get()},browserEvent:n})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const l=this.createNodeSet(),c=u(d=>l.delete(d),"visit");t.forEach(d=>f0(d,c)),this.set([...l.values()]);return}const n=new Set,i=u(l=>n.add(this.identityProvider.getId(l.element).toString()),"deletedNodesVisitor");t.forEach(l=>f0(l,i));const s=new Map,r=u(l=>s.set(this.identityProvider.getId(l.element).toString(),l),"insertedNodesVisitor");e.forEach(l=>f0(l,r));const a=[];for(const l of this.nodes){const c=this.identityProvider.getId(l.element).toString();if(!n.has(c))a.push(l);else{const h=s.get(c);h&&a.push(h)}}if(this.nodes.length>0&&a.length===0){const l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}u(p0,"Trait");class vB extends AI{constructor(e,t){super(e),this.tree=t}onViewPointer(e){if(J8(e.browserEvent.target)||Pu(e.browserEvent.target)||bg(e.browserEvent.target))return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const n=e.browserEvent.target,i=n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&e.browserEvent.offsetX<16;let s=!1;if(typeof this.tree.expandOnlyOnTwistieClick=="function"?s=this.tree.expandOnlyOnTwistieClick(t.element):s=!!this.tree.expandOnlyOnTwistieClick,s&&!i&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e);if(t.collapsible){const r=this.tree.model,a=r.getNodeLocation(t),l=e.browserEvent.altKey;if(this.tree.setFocus([a]),r.setCollapsed(a,void 0,l),s&&i)return}super.onViewPointer(e)}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||super.onDoubleClick(e)}}u(vB,"TreeNodeListMouseController");class CB extends Io{constructor(e,t,n,i,s,r,a,l){super(e,t,n,i,l),this.focusTrait=s,this.selectionTrait=r,this.anchorTrait=a}createMouseController(e){return new vB(this,e.tree)}splice(e,t,n=[]){if(super.splice(e,t,n),n.length===0)return;const i=[],s=[];let r;n.forEach((a,l)=>{this.focusTrait.has(a)&&i.push(e+l),this.selectionTrait.has(a)&&s.push(e+l),this.anchorTrait.has(a)&&(r=e+l)}),i.length>0&&super.setFocus(gl([...super.getFocus(),...i])),s.length>0&&super.setSelection(gl([...super.getSelection(),...s])),typeof r=="number"&&super.setAnchor(r)}setFocus(e,t,n=!1){super.setFocus(e,t),n||this.focusTrait.set(e.map(i=>this.element(i)),t)}setSelection(e,t,n=!1){super.setSelection(e,t),n||this.selectionTrait.set(e.map(i=>this.element(i)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}u(CB,"TreeNodeList");class HI{constructor(e,t,n,i,s={}){var r;this._user=e,this._options=s,this.eventBufferer=new Mw,this.onDidChangeFindOpenState=fe.None,this.disposables=new J,this._onWillRefilter=new R,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new R;const a=new zy(n),l=new xL,c=new xL,d=this.disposables.add(new bB(c.event));this.renderers=i.map(f=>new Af(f,()=>this.model,l.event,d,s));for(const f of this.renderers)this.disposables.add(f);let h;s.keyboardNavigationLabelProvider&&(h=new _B(this,s.keyboardNavigationLabelProvider,s.filter),s=Object.assign(Object.assign({},s),{filter:h}),this.disposables.add(h)),this.focus=new p0(()=>this.view.getFocusedElements()[0],s.identityProvider),this.selection=new p0(()=>this.view.getSelectedElements()[0],s.identityProvider),this.anchor=new p0(()=>this.view.getAnchorElement(),s.identityProvider),this.view=new CB(e,t,a,this.renderers,this.focus,this.selection,this.anchor,Object.assign(Object.assign({},Lie(()=>this.model,s)),{tree:this})),this.model=this.createModel(e,this.view,s),l.input=this.model.onDidChangeCollapseState;const g=fe.forEach(this.model.onDidSplice,f=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(f),this.selection.onDidModelSplice(f)})},this.disposables);if(g(()=>null,null,this.disposables),c.input=fe.chain(fe.any(g,this.focus.onDidChange,this.selection.onDidChange)).debounce(()=>null,0).map(()=>{const f=new Set;for(const p of this.focus.getNodes())f.add(p);for(const p of this.selection.getNodes())f.add(p);return[...f.values()]}).event,s.keyboardSupport!==!1){const f=fe.chain(this.view.onKeyDown).filter(p=>!Pu(p.target)).map(p=>new Pt(p));f.filter(p=>p.keyCode===15).on(this.onLeftArrow,this,this.disposables),f.filter(p=>p.keyCode===17).on(this.onRightArrow,this,this.disposables),f.filter(p=>p.keyCode===10).on(this.onSpace,this,this.disposables)}(!((r=s.findWidgetEnabled)!==null&&r!==void 0)||r)&&s.keyboardNavigationLabelProvider&&s.contextViewProvider?(this.findController=new xie(this,this.model,this.view,h,s.contextViewProvider),this.focusNavigationFilter=f=>this.findController.shouldAllowFocus(f),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode):this.onDidChangeFindMode=fe.None,this.styleElement=oo(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===Kb.Always)}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return fe.filter(fe.map(this.view.onMouseDblClick,GR),e=>e.target!==Kd.Filter)}get onPointer(){return fe.map(this.view.onPointer,GR)}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return fe.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get findMode(){var e,t;return(t=(e=this.findController)===null||e===void 0?void 0:e.mode)!==null&&t!==void 0?t:Yr.Highlight}set findMode(e){this.findController&&(this.findController.mode=e)}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}updateOptions(e={}){this._options=Object.assign(Object.assign({},this._options),e);for(const t of this.renderers)t.updateOptions(e);this.view.updateOptions(this._options),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===Kb.Always)}get options(){return this._options}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}domFocus(){this.view.domFocus()}layout(e,t){var n;this.view.layout(e,t),Sc(t)&&((n=this.findController)===null||n===void 0||n.layout(t))}style(e){var t;const n=`.${this.view.domId}`,i=[];e.treeIndentGuidesStroke&&(i.push(`.monaco-list${n}:hover .monaco-tl-indent > .indent-guide, .monaco-list${n}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeIndentGuidesStroke.transparent(.4)}; }`),i.push(`.monaco-list${n} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`)),this.styleElement.textContent=i.join(`
`),(t=this.findController)===null||t===void 0||t.style(e),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){const n=e.map(s=>this.model.getNode(s));this.selection.set(n,t);const i=e.map(s=>this.model.getListIndex(s)).filter(s=>s>-1);this.view.setSelection(i,t,!0)}getSelection(){return this.selection.get()}setFocus(e,t){const n=e.map(s=>this.model.getNode(s));this.focus.set(n,t);const i=e.map(s=>this.model.getListIndex(s)).filter(s=>s>-1);this.view.setFocus(i,t,!0)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const n=this.model.getListIndex(e);n!==-1&&this.view.reveal(n,t)}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],i=this.model.getNodeLocation(n);if(!this.model.setCollapsed(i,!0)){const r=this.model.getParentNodeLocation(i);if(!r)return;const a=this.model.getListIndex(r);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],i=this.model.getNodeLocation(n);if(!this.model.setCollapsed(i,!1)){if(!n.children.some(l=>l.visible))return;const[r]=this.view.getFocus(),a=r+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],i=this.model.getNodeLocation(n),s=e.browserEvent.altKey;this.model.setCollapsed(i,void 0,s)}dispose(){st(this.disposables),this.view.dispose()}}u(HI,"AbstractTree");class Ky{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new gB(e,t,null,n),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,n.sorter&&(this.sorter={compare(i,s){return n.sorter.compare(i.element,s.element)}}),this.identityProvider=n.identityProvider}setChildren(e,t=je.empty(),n={}){const i=this.getElementLocation(e);this._setChildren(i,this.preserveCollapseState(t),n)}_setChildren(e,t=je.empty(),n){const i=new Set,s=new Set,r=u(l=>{var c;if(l.element===null)return;const d=l;if(i.add(d.element),this.nodes.set(d.element,d),this.identityProvider){const h=this.identityProvider.getId(d.element).toString();s.add(h),this.nodesByIdentity.set(h,d)}(c=n.onDidCreateNode)===null||c===void 0||c.call(n,d)},"onDidCreateNode"),a=u(l=>{var c;if(l.element===null)return;const d=l;if(i.has(d.element)||this.nodes.delete(d.element),this.identityProvider){const h=this.identityProvider.getId(d.element).toString();s.has(h)||this.nodesByIdentity.delete(h)}(c=n.onDidDeleteNode)===null||c===void 0||c.call(n,d)},"onDidDeleteNode");this.model.splice([...e,0],Number.MAX_VALUE,t,Object.assign(Object.assign({},n),{onDidCreateNode:r,onDidDeleteNode:a}))}preserveCollapseState(e=je.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),je.map(e,t=>{let n=this.nodes.get(t.element);if(!n&&this.identityProvider){const r=this.identityProvider.getId(t.element).toString();n=this.nodesByIdentity.get(r)}if(!n)return Object.assign(Object.assign({},t),{children:this.preserveCollapseState(t.children)});const i=typeof t.collapsible=="boolean"?t.collapsible:n.collapsible,s=typeof t.collapsed<"u"?t.collapsed:n.collapsed;return Object.assign(Object.assign({},t),{collapsible:i,collapsed:s,children:this.preserveCollapseState(t.children)})})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(e=null){const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getElementLocation(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const i=this.getElementLocation(e);return this.model.setCollapsed(i,t,n)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new Ls(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new Ls(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new Ls(this.user,`Tree element not found: ${e}`);const n=this.model.getNodeLocation(t),i=this.model.getParentNodeLocation(n);return this.model.getNode(i).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new Ls(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}u(Ky,"ObjectTreeModel");function m0(o){const e=[o.element],t=o.incompressible||!1;return{element:{elements:e,incompressible:t},children:je.map(je.from(o.children),m0),collapsible:o.collapsible,collapsed:o.collapsed}}u(m0,"noCompress");function b0(o){const e=[o.element],t=o.incompressible||!1;let n,i;for(;[i,n]=je.consume(je.from(o.children),2),!(i.length!==1||i[0].incompressible);)o=i[0],e.push(o.element);return{element:{elements:e,incompressible:t},children:je.map(je.concat(i,n),b0),collapsible:o.collapsible,collapsed:o.collapsed}}u(b0,"compress");function yk(o,e=0){let t;return e<o.element.elements.length-1?t=[yk(o,e+1)]:t=je.map(je.from(o.children),n=>yk(n,0)),e===0&&o.element.incompressible?{element:o.element.elements[e],children:t,incompressible:!0,collapsible:o.collapsible,collapsed:o.collapsed}:{element:o.element.elements[e],children:t,collapsible:o.collapsible,collapsed:o.collapsed}}u(yk,"_decompress");function zR(o){return yk(o,0)}u(zR,"decompress");function wB(o,e,t){return o.element===e?Object.assign(Object.assign({},o),{children:t}):Object.assign(Object.assign({},o),{children:je.map(je.from(o.children),n=>wB(n,e,t))})}u(wB,"splice");const Eie=u(o=>({getId(e){return e.elements.map(t=>o.getId(t).toString()).join("\0")}}),"wrapIdentityProvider");class yB{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new Ky(e,t,n),this.enabled=typeof n.compressionEnabled>"u"?!0:n.compressionEnabled,this.identityProvider=n.identityProvider}get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}setChildren(e,t=je.empty(),n){const i=n.diffIdentityProvider&&Eie(n.diffIdentityProvider);if(e===null){const f=je.map(t,this.enabled?b0:m0);this._setChildren(null,f,{diffIdentityProvider:i,diffDepth:1/0});return}const s=this.nodes.get(e);if(!s)throw new Error("Unknown compressed tree node");const r=this.model.getNode(s),a=this.model.getParentNodeLocation(s),l=this.model.getNode(a),c=zR(r),d=wB(c,e,t),h=(this.enabled?b0:m0)(d),g=l.children.map(f=>f===r?h:f);this._setChildren(l.element,g,{diffIdentityProvider:i,diffDepth:r.depth-l.depth})}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const n=this.model.getNode().children,i=je.map(n,zR),s=je.map(i,e?b0:m0);this._setChildren(null,s,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,n){const i=new Set,s=u(a=>{for(const l of a.element.elements)i.add(l),this.nodes.set(l,a.element)},"onDidCreateNode"),r=u(a=>{for(const l of a.element.elements)i.has(l)||this.nodes.delete(l)},"onDidDeleteNode");this.model.setChildren(e,t,Object.assign(Object.assign({},n),{onDidCreateNode:s,onDidDeleteNode:r}))}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),n=this.model.getParentNodeLocation(t);return n===null?null:n.elements[n.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getCompressedNode(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const i=this.getCompressedNode(e);return this.model.setCollapsed(i,t,n)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new Ls(this.user,`Tree element not found: ${e}`);return t}}u(yB,"CompressedObjectTreeModel");const kie=u(o=>o[o.length-1],"DefaultElementMapper");class jy{constructor(e,t){this.unwrapper=e,this.node=t}get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new jy(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}u(jy,"CompressedTreeNodeWrapper");function Mie(o,e){return{splice(t,n,i){e.splice(t,n,i.map(s=>o.map(s)))},updateElementHeight(t,n){e.updateElementHeight(t,n)}}}u(Mie,"mapList");function Die(o,e){return Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(o(t))}},sorter:e.sorter&&{compare(t,n){return e.sorter.compare(t.elements[0],n.elements[0])}},filter:e.filter&&{filter(t,n){return e.filter.filter(o(t),n)}}})}u(Die,"mapOptions");class SB{constructor(e,t,n={}){this.rootRef=null,this.elementMapper=n.elementMapper||kie;const i=u(s=>this.elementMapper(s.elements),"compressedNodeUnwrapper");this.nodeMapper=new Gy(s=>new jy(i,s)),this.model=new yB(e,Mie(this.nodeMapper,t),Die(i,n))}get onDidSplice(){return fe.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(n=>this.nodeMapper.map(n)),deletedNodes:t.map(n=>this.nodeMapper.map(n))}))}get onDidChangeCollapseState(){return fe.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return fe.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}setChildren(e,t=je.empty(),n={}){this.model.setChildren(e,t,n)}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,n){return this.model.setCollapsed(e,t,n)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}u(SB,"CompressibleObjectTreeModel");var Aie=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};class $y extends HI{constructor(e,t,n,i,s={}){super(e,t,n,i,s),this.user=e}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}setChildren(e,t=je.empty(),n){this.model.setChildren(e,t,n)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,n){return new Ky(e,t,n)}}u($y,"ObjectTree");class BI{constructor(e,t){this._compressedTreeNodeProvider=e,this.renderer=t,this.templateId=t.templateId,t.onDidChangeTwistieState&&(this.onDidChangeTwistieState=t.onDidChangeTwistieState)}get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){const s=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element);s.element.elements.length===1?(n.compressedTreeNode=void 0,this.renderer.renderElement(e,t,n.data,i)):(n.compressedTreeNode=s,this.renderer.renderCompressedElements(s,t,n.data,i))}disposeElement(e,t,n,i){var s,r,a,l;n.compressedTreeNode?(r=(s=this.renderer).disposeCompressedElements)===null||r===void 0||r.call(s,n.compressedTreeNode,t,n.data,i):(l=(a=this.renderer).disposeElement)===null||l===void 0||l.call(a,e,t,n.data,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}}u(BI,"CompressibleRenderer");Aie([_n],BI.prototype,"compressedTreeNodeProvider",null);function Iie(o,e){return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let n;try{n=o().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return n.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(n.element.elements)}}})}u(Iie,"asObjectTreeOptions$1");class WI extends $y{constructor(e,t,n,i,s={}){const r=u(()=>this,"compressedTreeNodeProvider"),a=i.map(l=>new BI(r,l));super(e,t,n,a,Iie(r,s))}setChildren(e,t=je.empty(),n){this.model.setChildren(e,t,n)}createModel(e,t,n){return new SB(e,t,n)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}u(WI,"CompressibleObjectTree");var jl=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};function WT(o){return Object.assign(Object.assign({},o),{children:[],refreshPromise:void 0,stale:!0,slow:!1,collapsedByDefault:void 0})}u(WT,"createAsyncDataTreeNode");function Sk(o,e){return e.parent?e.parent===o?!0:Sk(o,e.parent):!1}u(Sk,"isAncestor");function Nie(o,e){return o===e||Sk(o,e)||Sk(e,o)}u(Nie,"intersects");class qy{constructor(e){this.node=e}get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new qy(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}u(qy,"AsyncDataTreeNodeWrapper");class TB{constructor(e,t,n){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,i)}renderTwistie(e,t){return e.slow?(t.classList.add(...b.treeItemLoading.classNamesArray),!0):(t.classList.remove(...b.treeItemLoading.classNamesArray),!1)}disposeElement(e,t,n,i){var s,r;(r=(s=this.renderer).disposeElement)===null||r===void 0||r.call(s,this.nodeMapper.map(e),t,n.templateData,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}u(TB,"AsyncDataTreeRenderer");function KR(o){return{browserEvent:o.browserEvent,elements:o.elements.map(e=>e.element)}}u(KR,"asTreeEvent");function jR(o){return{browserEvent:o.browserEvent,element:o.element&&o.element.element,target:o.target}}u(jR,"asTreeMouseEvent");class LB extends gp{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}u(LB,"AsyncDataTreeElementsDragAndDropData");function UT(o){return o instanceof gp?new LB(o):o}u(UT,"asAsyncDataTreeDragAndDropData");class xB{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){var n,i;(i=(n=this.dnd).onDragStart)===null||i===void 0||i.call(n,UT(e),t)}onDragOver(e,t,n,i,s=!0){return this.dnd.onDragOver(UT(e),t&&t.element,n,i)}drop(e,t,n,i){this.dnd.drop(UT(e),t&&t.element,n,i)}onDragEnd(e){var t,n;(n=(t=this.dnd).onDragEnd)===null||n===void 0||n.call(t,e)}}u(xB,"AsyncDataTreeNodeListDragAndDrop");function EB(o){return o&&Object.assign(Object.assign({},o),{collapseByDefault:!0,identityProvider:o.identityProvider&&{getId(e){return o.identityProvider.getId(e.element)}},dnd:o.dnd&&new xB(o.dnd),multipleSelectionController:o.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return o.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))},isSelectionRangeChangeEvent(e){return o.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))}},accessibilityProvider:o.accessibilityProvider&&Object.assign(Object.assign({},o.accessibilityProvider),{getPosInSet:void 0,getSetSize:void 0,getRole:o.accessibilityProvider.getRole?e=>o.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:o.accessibilityProvider.isChecked?e=>{var t;return!!(!((t=o.accessibilityProvider)===null||t===void 0)&&t.isChecked(e.element))}:void 0,getAriaLabel(e){return o.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return o.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:o.accessibilityProvider.getWidgetRole?()=>o.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:o.accessibilityProvider.getAriaLevel&&(e=>o.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:o.accessibilityProvider.getActiveDescendantId&&(e=>o.accessibilityProvider.getActiveDescendantId(e.element))}),filter:o.filter&&{filter(e,t){return o.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:o.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},o.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(e){return o.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}}),sorter:void 0,expandOnlyOnTwistieClick:typeof o.expandOnlyOnTwistieClick>"u"?void 0:typeof o.expandOnlyOnTwistieClick!="function"?o.expandOnlyOnTwistieClick:e=>o.expandOnlyOnTwistieClick(e.element),additionalScrollHeight:o.additionalScrollHeight})}u(EB,"asObjectTreeOptions");function Tk(o,e){e(o),o.children.forEach(t=>Tk(t,e))}u(Tk,"dfs");class UI{constructor(e,t,n,i,s,r={}){this.user=e,this.dataSource=s,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new R,this._onDidChangeNodeSlowState=new R,this.nodeMapper=new Gy(a=>new qy(a)),this.disposables=new J,this.identityProvider=r.identityProvider,this.autoExpandSingleChildren=typeof r.autoExpandSingleChildren>"u"?!1:r.autoExpandSingleChildren,this.sorter=r.sorter,this.collapseByDefault=r.collapseByDefault,this.tree=this.createTree(e,t,n,i,r),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.root=WT({element:void 0,parent:null,hasChildren:!0}),this.identityProvider&&(this.root=Object.assign(Object.assign({},this.root),{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}get onDidChangeFocus(){return fe.map(this.tree.onDidChangeFocus,KR)}get onDidChangeSelection(){return fe.map(this.tree.onDidChangeSelection,KR)}get onMouseDblClick(){return fe.map(this.tree.onMouseDblClick,jR)}get onPointer(){return fe.map(this.tree.onPointer,jR)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidDispose(){return this.tree.onDidDispose}createTree(e,t,n,i,s){const r=new zy(n),a=i.map(c=>new TB(c,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=EB(s)||{};return new $y(e,t,r,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}setInput(e,t){return jl(this,void 0,void 0,function*(){this.refreshPromises.forEach(i=>i.cancel()),this.refreshPromises.clear(),this.root.element=e;const n=t&&{viewState:t,focus:[],selection:[]};yield this._updateChildren(e,!0,!1,n),n&&(this.tree.setFocus(n.focus),this.tree.setSelection(n.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)})}_updateChildren(e=this.root.element,t=!0,n=!1,i,s){return jl(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new Ls(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield fe.toPromise(this._onDidRender.event));const r=this.getDataNode(e);if(yield this.refreshAndRenderNode(r,t,i,s),n)try{this.tree.rerender(r)}catch{}})}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}getNode(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(n)}collapse(e,t=!1){const n=this.getDataNode(e);return this.tree.collapse(n===this.root?null:n,t)}expand(e,t=!1){return jl(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new Ls(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield fe.toPromise(this._onDidRender.event));const n=this.getDataNode(e);if(this.tree.hasElement(n)&&!this.tree.isCollapsible(n)||(n.refreshPromise&&(yield this.root.refreshPromise,yield fe.toPromise(this._onDidRender.event)),n!==this.root&&!n.refreshPromise&&!this.tree.isCollapsed(n)))return!1;const i=this.tree.expand(n===this.root?null:n,t);return n.refreshPromise&&(yield this.root.refreshPromise,yield fe.toPromise(this._onDidRender.event)),i})}setSelection(e,t){const n=e.map(i=>this.getDataNode(i));this.tree.setSelection(n,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const n=e.map(i=>this.getDataNode(i));this.tree.setFocus(n,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getFirstElementChild(t===this.root?null:t);return n&&n.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new Ls(this.user,`Data tree node not found: ${e}`);return t}refreshAndRenderNode(e,t,n,i){return jl(this,void 0,void 0,function*(){yield this.refreshNode(e,t,n),this.render(e,n,i)})}refreshNode(e,t,n){return jl(this,void 0,void 0,function*(){let i;if(this.subTreeRefreshPromises.forEach((s,r)=>{!i&&Nie(r,e)&&(i=s.then(()=>this.refreshNode(e,t,n)))}),i)return i;if(e!==this.root&&this.tree.getNode(e).collapsed){e.hasChildren=!!this.dataSource.hasChildren(e.element),e.stale=!0;return}return this.doRefreshSubTree(e,t,n)})}doRefreshSubTree(e,t,n){return jl(this,void 0,void 0,function*(){let i;e.refreshPromise=new Promise(s=>i=s),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const s=yield this.doRefreshNode(e,t,n);e.stale=!1,yield Mx.settled(s.map(r=>this.doRefreshSubTree(r,t,n)))}finally{i()}})}doRefreshNode(e,t,n){return jl(this,void 0,void 0,function*(){e.hasChildren=!!this.dataSource.hasChildren(e.element);let i;if(!e.hasChildren)i=Promise.resolve(je.empty());else{const s=this.doGetChildren(e);if(x2(s))i=Promise.resolve(s);else{const r=xc(800);r.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},a=>null),i=s.finally(()=>r.cancel())}}try{const s=yield i;return this.setChildren(e,s,t,n)}catch(s){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),ca(s))return[];throw s}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}})}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;const n=this.dataSource.getChildren(e.element);return x2(n)?this.processChildren(n):(t=On(()=>jl(this,void 0,void 0,function*(){return this.processChildren(yield n)})),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(Ie))}setChildren(e,t,n,i){const s=[...t];if(e.children.length===0&&s.length===0)return[];const r=new Map,a=new Map;for(const d of e.children)if(r.set(d.element,d),this.identityProvider){const h=this.tree.isCollapsed(d);a.set(d.id,{node:d,collapsed:h})}const l=[],c=s.map(d=>{const h=!!this.dataSource.hasChildren(d);if(!this.identityProvider){const _=WT({element:d,parent:e,hasChildren:h});return h&&this.collapseByDefault&&!this.collapseByDefault(d)&&(_.collapsedByDefault=!1,l.push(_)),_}const g=this.identityProvider.getId(d).toString(),f=a.get(g);if(f){const _=f.node;return r.delete(_.element),this.nodes.delete(_.element),this.nodes.set(d,_),_.element=d,_.hasChildren=h,n?f.collapsed?(_.children.forEach(v=>Tk(v,C=>this.nodes.delete(C.element))),_.children.splice(0,_.children.length),_.stale=!0):l.push(_):h&&this.collapseByDefault&&!this.collapseByDefault(d)&&(_.collapsedByDefault=!1,l.push(_)),_}const p=WT({element:d,parent:e,id:g,hasChildren:h});return i&&i.viewState.focus&&i.viewState.focus.indexOf(g)>-1&&i.focus.push(p),i&&i.viewState.selection&&i.viewState.selection.indexOf(g)>-1&&i.selection.push(p),i&&i.viewState.expanded&&i.viewState.expanded.indexOf(g)>-1?l.push(p):h&&this.collapseByDefault&&!this.collapseByDefault(d)&&(p.collapsedByDefault=!1,l.push(p)),p});for(const d of r.values())Tk(d,h=>this.nodes.delete(h.element));for(const d of c)this.nodes.set(d.element,d);return e.children.splice(0,e.children.length,...c),e!==this.root&&this.autoExpandSingleChildren&&c.length===1&&l.length===0&&(c[0].collapsedByDefault=!1,l.push(c[0])),l}render(e,t,n){const i=e.children.map(r=>this.asTreeElement(r,t)),s=n&&Object.assign(Object.assign({},n),{diffIdentityProvider:n.diffIdentityProvider&&{getId(r){return n.diffIdentityProvider.getId(r.element)}}});this.tree.setChildren(e===this.root?null:e,i,s),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let n;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?n=!1:n=e.collapsedByDefault,e.collapsedByDefault=void 0,{element:e,children:e.hasChildren?je.map(e.children,i=>this.asTreeElement(i,t)):[],collapsible:e.hasChildren,collapsed:n}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose()}}u(UI,"AsyncDataTree");class Yy{constructor(e){this.node=e}get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new Yy(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}u(Yy,"CompressibleAsyncDataTreeNodeWrapper");class kB{constructor(e,t,n,i){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=n,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,i)}renderCompressedElements(e,t,n,i){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,i)}renderTwistie(e,t){return e.slow?(t.classList.add(...b.treeItemLoading.classNamesArray),!0):(t.classList.remove(...b.treeItemLoading.classNamesArray),!1)}disposeElement(e,t,n,i){var s,r;(r=(s=this.renderer).disposeElement)===null||r===void 0||r.call(s,this.nodeMapper.map(e),t,n.templateData,i)}disposeCompressedElements(e,t,n,i){var s,r;(r=(s=this.renderer).disposeCompressedElements)===null||r===void 0||r.call(s,this.compressibleNodeMapperProvider().map(e),t,n.templateData,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=st(this.disposables)}}u(kB,"CompressibleAsyncDataTreeRenderer");function Pie(o){const e=o&&EB(o);return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getCompressedNodeKeyboardNavigationLabel(t){return o.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(n=>n.element))}})})}u(Pie,"asCompressibleObjectTreeOptions");class MB extends UI{constructor(e,t,n,i,s,r,a={}){super(e,t,n,s,r,a),this.compressionDelegate=i,this.compressibleNodeMapper=new Gy(l=>new Yy(l)),this.filter=a.filter}createTree(e,t,n,i,s){const r=new zy(n),a=i.map(c=>new kB(c,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=Pie(s)||{};return new WI(e,t,r,a,l)}asTreeElement(e,t){return Object.assign({incompressible:this.compressionDelegate.isIncompressible(e.element)},super.asTreeElement(e,t))}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t){if(!this.identityProvider)return super.render(e,t);const n=u(g=>this.identityProvider.getId(g).toString(),"getId"),i=u(g=>{const f=new Set;for(const p of g){const _=this.tree.getCompressedTreeNode(p===this.root?null:p);if(_.element)for(const v of _.element.elements)f.add(n(v.element))}return f},"getUncompressedIds"),s=i(this.tree.getSelection()),r=i(this.tree.getFocus());super.render(e,t);const a=this.getSelection();let l=!1;const c=this.getFocus();let d=!1;const h=u(g=>{const f=g.element;if(f)for(let p=0;p<f.elements.length;p++){const _=n(f.elements[p].element),v=f.elements[f.elements.length-1].element;s.has(_)&&a.indexOf(v)===-1&&(a.push(v),l=!0),r.has(_)&&c.indexOf(v)===-1&&(c.push(v),d=!0)}g.children.forEach(h)},"visit");h(this.tree.getCompressedTreeNode(e===this.root?null:e)),l&&this.setSelection(a),d&&this.setFocus(c)}processChildren(e){return this.filter&&(e=je.filter(e,t=>{const n=this.filter.filter(t,1),i=Rie(n);if(i===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return i===1})),super.processChildren(e)}}u(MB,"CompressibleAsyncDataTree");function Rie(o){return typeof o=="boolean"?o?1:0:VI(o)?zb(o.visibility):zb(o)}u(Rie,"getVisibility");class DB extends HI{constructor(e,t,n,i,s,r={}){super(e,t,n,i,r),this.user=e,this.dataSource=s,this.identityProvider=r.identityProvider}createModel(e,t,n){return new Ky(e,t,n)}}u(DB,"DataTree");new ce("isMac",Xe,m("isMac","Whether the operating system is macOS"));new ce("isLinux",hi,m("isLinux","Whether the operating system is Linux"));const Xy=new ce("isWindows",ei,m("isWindows","Whether the operating system is Windows"));new ce("isWeb",Xc,m("isWeb","Whether the platform is a web browser"));new ce("isMacNative",Xe&&!Xc,m("isMacNative","Whether the operating system is macOS on a non-browser platform"));new ce("isIOS",na,m("isIOS","Whether the operating system is iOS"));new ce("isDevelopment",!1,!0);new ce("productQualityType","",m("productQualityType","Quality type of VS Code"));const AB="inputFocus";new ce(AB,!1,m("inputFocus","Whether keyboard focus is inside an input box"));var ga=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ot=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const fo=Je("listService");let Lk=u(class{constructor(e){this._themeService=e,this.disposables=new J,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}get lastFocusedList(){return this._lastFocusedWidget}setLastFocusedList(e){var t,n;e!==this._lastFocusedWidget&&((t=this._lastFocusedWidget)===null||t===void 0||t.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,(n=this._lastFocusedWidget)===null||n===void 0||n.getHTMLElement().classList.add("last-focused"))}register(e,t){if(!this._hasCreatedStyleController){this._hasCreatedStyleController=!0;const i=new II(oo(),"");this.disposables.add(Nu(i,this._themeService))}if(this.lists.some(i=>i.widget===e))throw new Error("Cannot register the same widget multiple times");const n={widget:e,extraContextKeys:t};return this.lists.push(n),e.getHTMLElement()===document.activeElement&&this.setLastFocusedList(e),ur(e.onDidFocus(()=>this.setLastFocusedList(e)),He(()=>this.lists.splice(this.lists.indexOf(n),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(i=>i!==n),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}},"ListService");Lk=ga([ot(0,wt)],Lk);const IB=new ce("listFocus",!0),Zy=new ce("listSupportsMultiselect",!0),NB=oe.and(IB,oe.not(AB)),GI=new ce("listHasSelectionOrFocus",!1),zI=new ce("listDoubleSelection",!1),KI=new ce("listMultiSelection",!1),Jy=new ce("listSelectionNavigation",!1),Fie=new ce("listSupportsFind",!0),jI=new ce("treeElementCanCollapse",!1),Oie=new ce("treeElementHasParent",!1),$I=new ce("treeElementCanExpand",!1),Vie=new ce("treeElementHasChild",!1),Hie=new ce("treeFindOpen",!1),PB="listTypeNavigationMode",RB="listAutomaticKeyboardNavigation";function Qy(o,e){const t=o.createScoped(e.getHTMLElement());return IB.bindTo(t),t}u(Qy,"createScopedContextKeyService");const bh="workbench.list.multiSelectModifier",xk="workbench.list.openMode",eo="workbench.list.horizontalScrolling",qI="workbench.list.defaultFindMode",YI="workbench.list.keyboardNavigation",jb="workbench.tree.indent",$1="workbench.tree.renderIndentGuides",wr="workbench.list.smoothScrolling",oa="workbench.list.mouseWheelScrollSensitivity",ra="workbench.list.fastScrollSensitivity",q1="workbench.tree.expandMode";function aa(o){return o.getValue(bh)==="alt"}u(aa,"useAltAsMultipleSelectionModifier");class FB extends U{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=aa(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(bh)&&(this.useAltAsMultipleSelectionModifier=aa(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:tB(e)}isSelectionRangeChangeEvent(e){return nB(e)}}u(FB,"MultipleSelectionController");function eS(o,e){var t;const n=o.get(rt),i=o.get(Cn),s=new J;return[Object.assign(Object.assign({},e),{keyboardNavigationDelegate:{mightProducePrintableCharacter(a){return i.mightProducePrintableCharacter(a)}},smoothScrolling:Boolean(n.getValue(wr)),mouseWheelScrollSensitivity:n.getValue(oa),fastScrollSensitivity:n.getValue(ra),multipleSelectionController:(t=e.multipleSelectionController)!==null&&t!==void 0?t:s.add(new FB(n)),keyboardNavigationEventFilter:Bie(i)}),s]}u(eS,"toWorkbenchListOptions");let Ek=u(class extends Io{constructor(e,t,n,i,s,r,a,l,c,d){const h=typeof s.horizontalScrolling<"u"?s.horizontalScrolling:Boolean(c.getValue(eo)),[g,f]=d.invokeFunction(eS,s);super(e,t,n,i,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Uo(l.getColorTheme(),Vy)),g),{horizontalScrolling:h})),this.disposables.add(f),this.contextKeyService=Qy(r,this),this.themeService=l,this.listSupportsMultiSelect=Zy.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(s.multipleSelectionSupport!==!1),Jy.bindTo(this.contextKeyService).set(Boolean(s.selectionNavigation)),this.listHasSelectionOrFocus=GI.bindTo(this.contextKeyService),this.listDoubleSelection=zI.bindTo(this.contextKeyService),this.listMultiSelection=KI.bindTo(this.contextKeyService),this.horizontalScrolling=s.horizontalScrolling,this._useAltAsMultipleSelectionModifier=aa(c),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),s.overrideStyles&&this.updateStyles(s.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const _=this.getSelection(),v=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(_.length>0||v.length>0),this.listMultiSelection.set(_.length>1),this.listDoubleSelection.set(_.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const _=this.getSelection(),v=this.getFocus();this.listHasSelectionOrFocus.set(_.length>0||v.length>0)})),this.disposables.add(c.onDidChangeConfiguration(_=>{_.affectsConfiguration(bh)&&(this._useAltAsMultipleSelectionModifier=aa(c));let v={};if(_.affectsConfiguration(eo)&&this.horizontalScrolling===void 0){const C=Boolean(c.getValue(eo));v=Object.assign(Object.assign({},v),{horizontalScrolling:C})}if(_.affectsConfiguration(wr)){const C=Boolean(c.getValue(wr));v=Object.assign(Object.assign({},v),{smoothScrolling:C})}if(_.affectsConfiguration(oa)){const C=c.getValue(oa);v=Object.assign(Object.assign({},v),{mouseWheelScrollSensitivity:C})}if(_.affectsConfiguration(ra)){const C=c.getValue(ra);v=Object.assign(Object.assign({},v),{fastScrollSensitivity:C})}Object.keys(v).length>0&&this.updateOptions(v)})),this.navigator=new XI(this,Object.assign({configurationService:c},s)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=Nu(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),super.dispose()}},"WorkbenchList");Ek=ga([ot(5,De),ot(6,fo),ot(7,wt),ot(8,rt),ot(9,Ne)],Ek);let $R=u(class extends lB{constructor(e,t,n,i,s,r,a,l,c,d){const h=typeof s.horizontalScrolling<"u"?s.horizontalScrolling:Boolean(c.getValue(eo)),[g,f]=d.invokeFunction(eS,s);super(e,t,n,i,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Uo(l.getColorTheme(),Vy)),g),{horizontalScrolling:h})),this.disposables=new J,this.disposables.add(f),this.contextKeyService=Qy(r,this),this.themeService=l,this.horizontalScrolling=s.horizontalScrolling,this.listSupportsMultiSelect=Zy.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(s.multipleSelectionSupport!==!1),Jy.bindTo(this.contextKeyService).set(Boolean(s.selectionNavigation)),this._useAltAsMultipleSelectionModifier=aa(c),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),s.overrideStyles&&this.updateStyles(s.overrideStyles),s.overrideStyles&&this.disposables.add(Nu(this,l,s.overrideStyles)),this.disposables.add(c.onDidChangeConfiguration(_=>{_.affectsConfiguration(bh)&&(this._useAltAsMultipleSelectionModifier=aa(c));let v={};if(_.affectsConfiguration(eo)&&this.horizontalScrolling===void 0){const C=Boolean(c.getValue(eo));v=Object.assign(Object.assign({},v),{horizontalScrolling:C})}if(_.affectsConfiguration(wr)){const C=Boolean(c.getValue(wr));v=Object.assign(Object.assign({},v),{smoothScrolling:C})}if(_.affectsConfiguration(oa)){const C=c.getValue(oa);v=Object.assign(Object.assign({},v),{mouseWheelScrollSensitivity:C})}if(_.affectsConfiguration(ra)){const C=c.getValue(ra);v=Object.assign(Object.assign({},v),{fastScrollSensitivity:C})}Object.keys(v).length>0&&this.updateOptions(v)})),this.navigator=new XI(this,Object.assign({configurationService:c},s)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=Nu(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}},"WorkbenchPagedList");$R=ga([ot(5,De),ot(6,fo),ot(7,wt),ot(8,rt),ot(9,Ne)],$R);let qR=u(class extends Q_{constructor(e,t,n,i,s,r,a,l,c,d,h){const g=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:Boolean(d.getValue(eo)),[f,p]=h.invokeFunction(eS,r);super(e,t,n,i,s,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Uo(c.getColorTheme(),Vy)),f),{horizontalScrolling:g})),this.disposables.add(p),this.contextKeyService=Qy(a,this),this.themeService=c,this.listSupportsMultiSelect=Zy.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),Jy.bindTo(this.contextKeyService).set(Boolean(r.selectionNavigation)),this.listHasSelectionOrFocus=GI.bindTo(this.contextKeyService),this.listDoubleSelection=zI.bindTo(this.contextKeyService),this.listMultiSelection=KI.bindTo(this.contextKeyService),this.horizontalScrolling=r.horizontalScrolling,this._useAltAsMultipleSelectionModifier=aa(d),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),r.overrideStyles&&this.updateStyles(r.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const v=this.getSelection(),C=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(v.length>0||C.length>0),this.listMultiSelection.set(v.length>1),this.listDoubleSelection.set(v.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const v=this.getSelection(),C=this.getFocus();this.listHasSelectionOrFocus.set(v.length>0||C.length>0)})),this.disposables.add(d.onDidChangeConfiguration(v=>{v.affectsConfiguration(bh)&&(this._useAltAsMultipleSelectionModifier=aa(d));let C={};if(v.affectsConfiguration(eo)&&this.horizontalScrolling===void 0){const w=Boolean(d.getValue(eo));C=Object.assign(Object.assign({},C),{horizontalScrolling:w})}if(v.affectsConfiguration(wr)){const w=Boolean(d.getValue(wr));C=Object.assign(Object.assign({},C),{smoothScrolling:w})}if(v.affectsConfiguration(oa)){const w=d.getValue(oa);C=Object.assign(Object.assign({},C),{mouseWheelScrollSensitivity:w})}if(v.affectsConfiguration(ra)){const w=d.getValue(ra);C=Object.assign(Object.assign({},C),{fastScrollSensitivity:w})}Object.keys(C).length>0&&this.updateOptions(C)})),this.navigator=new OB(this,Object.assign({configurationService:d},r)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=Nu(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}},"WorkbenchTable");qR=ga([ot(6,De),ot(7,fo),ot(8,wt),ot(9,rt),ot(10,Ne)],qR);class tS extends U{constructor(e,t){var n;super(),this.widget=e,this._onDidOpen=this._register(new R),this.onDidOpen=this._onDidOpen.event,this._register(fe.filter(this.widget.onDidChangeSelection,i=>i.browserEvent instanceof KeyboardEvent)(i=>this.onSelectionFromKeyboard(i))),this._register(this.widget.onPointer(i=>this.onPointer(i.element,i.browserEvent))),this._register(this.widget.onMouseDblClick(i=>this.onMouseDblClick(i.element,i.browserEvent))),typeof t?.openOnSingleClick!="boolean"&&t?.configurationService?(this.openOnSingleClick=t?.configurationService.getValue(xk)!=="doubleClick",this._register(t?.configurationService.onDidChangeConfiguration(()=>{this.openOnSingleClick=t?.configurationService.getValue(xk)!=="doubleClick"}))):this.openOnSingleClick=(n=t?.openOnSingleClick)!==null&&n!==void 0?n:!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,n=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,i=typeof t.pinned=="boolean"?t.pinned:!n,s=!1;this._open(this.getSelectedElement(),n,i,s,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const i=t.button===1,s=!0,r=i,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,s,r,a,t)}onMouseDblClick(e,t){if(!t)return;const n=t.target;if(n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&t.offsetX<16)return;const s=!1,r=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,s,r,a,t)}_open(e,t,n,i,s){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:n,revealIfVisible:!0},sideBySide:i,element:e,browserEvent:s})}}u(tS,"ResourceNavigator");class XI extends tS{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}u(XI,"ListResourceNavigator");class OB extends tS{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}u(OB,"TableResourceNavigator");class VB extends tS{constructor(e,t){super(e,t)}getSelectedElement(){var e;return(e=this.widget.getSelection()[0])!==null&&e!==void 0?e:void 0}}u(VB,"TreeResourceNavigator");function Bie(o){let e=!1;return t=>{if(t.toKeybinding().isModifierKey())return!1;if(e)return e=!1,!1;const n=o.softDispatch(t,t.target);return n?.enterChord?(e=!0,!1):(e=!1,!n)}}u(Bie,"createKeyboardNavigationEventFilter");let YR=u(class extends $y{constructor(e,t,n,i,s,r,a,l,c,d){const{options:h,getTypeNavigationMode:g,disposable:f}=r.invokeFunction(ev,s);super(e,t,n,i,h),this.disposables.add(f),this.internals=new Ru(this,s,g,s.overrideStyles,a,l,c,d),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}},"WorkbenchObjectTree");YR=ga([ot(5,Ne),ot(6,De),ot(7,fo),ot(8,wt),ot(9,rt)],YR);let XR=u(class extends WI{constructor(e,t,n,i,s,r,a,l,c,d){const{options:h,getTypeNavigationMode:g,disposable:f}=r.invokeFunction(ev,s);super(e,t,n,i,h),this.disposables.add(f),this.internals=new Ru(this,s,g,s.overrideStyles,a,l,c,d),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}},"WorkbenchCompressibleObjectTree");XR=ga([ot(5,Ne),ot(6,De),ot(7,fo),ot(8,wt),ot(9,rt)],XR);let ZR=u(class extends DB{constructor(e,t,n,i,s,r,a,l,c,d,h){const{options:g,getTypeNavigationMode:f,disposable:p}=a.invokeFunction(ev,r);super(e,t,n,i,s,g),this.disposables.add(p),this.internals=new Ru(this,r,f,r.overrideStyles,l,c,d,h),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}},"WorkbenchDataTree");ZR=ga([ot(6,Ne),ot(7,De),ot(8,fo),ot(9,wt),ot(10,rt)],ZR);let kk=u(class extends UI{constructor(e,t,n,i,s,r,a,l,c,d,h){const{options:g,getTypeNavigationMode:f,disposable:p}=a.invokeFunction(ev,r);super(e,t,n,i,s,g),this.disposables.add(p),this.internals=new Ru(this,r,f,r.overrideStyles,l,c,d,h),this.disposables.add(this.internals)}get onDidOpen(){return this.internals.onDidOpen}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}},"WorkbenchAsyncDataTree");kk=ga([ot(6,Ne),ot(7,De),ot(8,fo),ot(9,wt),ot(10,rt)],kk);let JR=u(class extends MB{constructor(e,t,n,i,s,r,a,l,c,d,h,g){const{options:f,getTypeNavigationMode:p,disposable:_}=l.invokeFunction(ev,a);super(e,t,n,i,s,r,f),this.disposables.add(_),this.internals=new Ru(this,a,p,a.overrideStyles,c,d,h,g),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}},"WorkbenchCompressibleAsyncDataTree");JR=ga([ot(7,Ne),ot(8,De),ot(9,fo),ot(10,wt),ot(11,rt)],JR);function HB(o){const e=o.getValue(qI);if(e==="highlight")return Yr.Highlight;if(e==="filter")return Yr.Filter;const t=o.getValue(YI);if(t==="simple"||t==="highlight")return Yr.Highlight;if(t==="filter")return Yr.Filter}u(HB,"getDefaultTreeFindMode");function ev(o,e){var t;const n=o.get(rt),i=o.get(fh),s=o.get(De),r=o.get(Ne),a=u(()=>{const g=s.getContextKeyValue(PB);if(g==="automatic")return vc.Automatic;if(g==="trigger"||s.getContextKeyValue(RB)===!1)return vc.Trigger},"getTypeNavigationMode"),l=e.horizontalScrolling!==void 0?e.horizontalScrolling:Boolean(n.getValue(eo)),[c,d]=r.invokeFunction(eS,e),h=e.additionalScrollHeight;return{getTypeNavigationMode:a,disposable:d,options:Object.assign(Object.assign({keyboardSupport:!1},c),{indent:typeof n.getValue(jb)=="number"?n.getValue(jb):void 0,renderIndentGuides:n.getValue($1),smoothScrolling:Boolean(n.getValue(wr)),defaultFindMode:HB(n),horizontalScrolling:l,additionalScrollHeight:h,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:(t=e.expandOnlyOnTwistieClick)!==null&&t!==void 0?t:n.getValue(q1)==="doubleClick",contextViewProvider:i})}}u(ev,"workbenchTreeDataPreamble");let Ru=u(class{constructor(e,t,n,i,s,r,a,l){var c;this.tree=e,this.themeService=a,this.disposables=[],this.contextKeyService=Qy(s,e),this.listSupportsMultiSelect=Zy.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),Jy.bindTo(this.contextKeyService).set(Boolean(t.selectionNavigation)),this.listSupportFindWidget=Fie.bindTo(this.contextKeyService),this.listSupportFindWidget.set((c=t.findWidgetEnabled)!==null&&c!==void 0?c:!0),this.hasSelectionOrFocus=GI.bindTo(this.contextKeyService),this.hasDoubleSelection=zI.bindTo(this.contextKeyService),this.hasMultiSelection=KI.bindTo(this.contextKeyService),this.treeElementCanCollapse=jI.bindTo(this.contextKeyService),this.treeElementHasParent=Oie.bindTo(this.contextKeyService),this.treeElementCanExpand=$I.bindTo(this.contextKeyService),this.treeElementHasChild=Vie.bindTo(this.contextKeyService),this.treeFindOpen=Hie.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=aa(l),this.updateStyleOverrides(i);const h=u(()=>{const f=e.getFocus()[0];if(!f)return;const p=e.getNode(f);this.treeElementCanCollapse.set(p.collapsible&&!p.collapsed),this.treeElementHasParent.set(!!e.getParentElement(f)),this.treeElementCanExpand.set(p.collapsible&&p.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(f))},"updateCollapseContextKeys"),g=new Set;g.add(PB),g.add(RB),this.disposables.push(this.contextKeyService,r.register(e),e.onDidChangeSelection(()=>{const f=e.getSelection(),p=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(f.length>0||p.length>0),this.hasMultiSelection.set(f.length>1),this.hasDoubleSelection.set(f.length===2)})}),e.onDidChangeFocus(()=>{const f=e.getSelection(),p=e.getFocus();this.hasSelectionOrFocus.set(f.length>0||p.length>0),h()}),e.onDidChangeCollapseState(h),e.onDidChangeModel(h),e.onDidChangeFindOpenState(f=>this.treeFindOpen.set(f)),l.onDidChangeConfiguration(f=>{let p={};if(f.affectsConfiguration(bh)&&(this._useAltAsMultipleSelectionModifier=aa(l)),f.affectsConfiguration(jb)){const _=l.getValue(jb);p=Object.assign(Object.assign({},p),{indent:_})}if(f.affectsConfiguration($1)){const _=l.getValue($1);p=Object.assign(Object.assign({},p),{renderIndentGuides:_})}if(f.affectsConfiguration(wr)){const _=Boolean(l.getValue(wr));p=Object.assign(Object.assign({},p),{smoothScrolling:_})}if((f.affectsConfiguration(qI)||f.affectsConfiguration(YI))&&e.updateOptions({defaultFindMode:HB(l)}),f.affectsConfiguration(eo)&&t.horizontalScrolling===void 0){const _=Boolean(l.getValue(eo));p=Object.assign(Object.assign({},p),{horizontalScrolling:_})}if(f.affectsConfiguration(q1)&&t.expandOnlyOnTwistieClick===void 0&&(p=Object.assign(Object.assign({},p),{expandOnlyOnTwistieClick:l.getValue(q1)==="doubleClick"})),f.affectsConfiguration(oa)){const _=l.getValue(oa);p=Object.assign(Object.assign({},p),{mouseWheelScrollSensitivity:_})}if(f.affectsConfiguration(ra)){const _=l.getValue(ra);p=Object.assign(Object.assign({},p),{fastScrollSensitivity:_})}Object.keys(p).length>0&&e.updateOptions(p)}),this.contextKeyService.onDidChangeContext(f=>{f.affectsSome(g)&&e.updateOptions({typeNavigationMode:n()})})),this.navigator=new VB(e,Object.assign({configurationService:l},t)),this.disposables.push(this.navigator)}get onDidOpen(){return this.navigator.onDidOpen}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){st(this.styler),this.styler=e?Nu(this.tree,this.themeService,e):U.None}dispose(){this.disposables=st(this.disposables),st(this.styler),this.styler=void 0}},"WorkbenchTreeInternals");Ru=ga([ot(4,De),ot(5,fo),ot(6,wt),ot(7,rt)],Ru);const Wie=zt.as(kl.Configuration);Wie.registerConfiguration({id:"workbench",order:7,title:m("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[bh]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[m("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),m("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:m({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[xk]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:m({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[eo]:{type:"boolean",default:!1,description:m("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[jb]:{type:"number",default:8,minimum:4,maximum:40,description:m("tree indent setting","Controls tree indentation in pixels.")},[$1]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:m("render tree indent guides","Controls whether the tree should render indent guides.")},[wr]:{type:"boolean",default:!1,description:m("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[oa]:{type:"number",default:1,markdownDescription:m("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[ra]:{type:"number",default:5,description:m("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[qI]:{type:"string",enum:["highlight","filter"],enumDescriptions:[m("defaultFindModeSettingKey.highlight","Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),m("defaultFindModeSettingKey.filter","Filter elements when searching.")],default:"highlight",description:m("defaultFindModeSettingKey","Controls the default find mode for lists and trees in the workbench.")},[YI]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[m("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),m("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),m("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:m("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:m("keyboardNavigationSettingKeyDeprecated","Please use 'workbench.list.defaultFindMode' instead.")},[q1]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:m("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")}}});var Mk;(function(o){o[o.PRESERVE=0]="PRESERVE",o[o.LAST=1]="LAST"})(Mk||(Mk={}));const _h={Quickaccess:"workbench.contributions.quickaccess"};class BB{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,n)=>n.prefix.length-t.prefix.length),He(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return p_([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(n=>e.startsWith(n.prefix))||void 0||this.defaultProvider}}u(BB,"QuickAccessRegistry");zt.add(_h.Quickaccess,new BB);const Pl=Je("quickInputService");var Uie=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},QR=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let Dk=u(class extends U{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=zt.as(_h.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,n){var i;const[s,r]=this.getOrInstantiateProvider(e),a=this.visibleQuickAccess,l=a?.descriptor;if(a&&r&&l===r){e!==r.prefix&&!n?.preserveValue&&(a.picker.value=e),this.adjustValueSelection(a.picker,r,n);return}if(r&&!n?.preserveValue){let f;if(a&&l&&l!==r){const p=a.value.substr(l.prefix.length);p&&(f=`${r.prefix}${p}`)}if(!f){const p=s?.defaultFilterValue;p===Mk.LAST?f=this.lastAcceptedPickerValues.get(r):typeof p=="string"&&(f=`${r.prefix}${p}`)}typeof f=="string"&&(e=f)}const c=new J,d=c.add(this.quickInputService.createQuickPick());d.value=e,this.adjustValueSelection(d,r,n),d.placeholder=r?.placeholder,d.quickNavigate=n?.quickNavigateConfiguration,d.hideInput=!!d.quickNavigate&&!a,(typeof n?.itemActivation=="number"||n?.quickNavigateConfiguration)&&(d.itemActivation=(i=n?.itemActivation)!==null&&i!==void 0?i:Bo.SECOND),d.contextKey=r?.contextKey,d.filterValue=f=>f.substring(r?r.prefix.length:0),r?.placeholder&&(d.ariaLabel=r?.placeholder);let h;t&&(h=new Ww,c.add(fl(d.onWillAccept)(f=>{f.veto(),d.hide()}))),c.add(this.registerPickerListeners(d,s,r,e));const g=c.add(new ti);if(s&&c.add(s.provide(d,g.token)),fl(d.onDidHide)(()=>{d.selectedItems.length===0&&g.cancel(),c.dispose(),h?.complete(d.selectedItems.slice(0))}),d.show(),t)return h?.p}adjustValueSelection(e,t,n){var i;let s;n?.preserveValue?s=[e.value.length,e.value.length]:s=[(i=t?.prefix.length)!==null&&i!==void 0?i:0,e.value.length],e.valueSelection=s}registerPickerListeners(e,t,n,i){const s=new J,r=this.visibleQuickAccess={picker:e,descriptor:n,value:i};return s.add(He(()=>{r===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),s.add(e.onDidChangeValue(a=>{const[l]=this.getOrInstantiateProvider(a);l!==t?this.show(a,{preserveValue:!0}):r.value=a})),n&&s.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(n,e.value)})),s}getOrInstantiateProvider(e){const t=this.registry.getQuickAccessProvider(e);if(!t)return[void 0,void 0];let n=this.mapProviderToDescriptor.get(t);return n||(n=this.instantiationService.createInstance(t.ctor),this.mapProviderToDescriptor.set(t,n)),[n,t]}},"QuickAccessController");Dk=Uie([QR(0,Pl),QR(1,Ne)],Dk);var Gie=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Kp=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let Ak=u(class extends zV{constructor(e,t,n,i,s){super(n),this.instantiationService=e,this.contextKeyService=t,this.accessibilityService=i,this.layoutService=s,this.contexts=new Map}get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(Dk))),this._quickAccess}createController(e=this.layoutService,t){const n={idPrefix:"quickInput_",container:e.container,ignoreFocusOut:()=>!1,isScreenReaderOptimized:()=>this.accessibilityService.isScreenReaderOptimized(),backKeybindingLabel:()=>{},setContextKey:s=>this.setContextKey(s),returnFocus:()=>e.focus(),createList:(s,r,a,l,c)=>this.instantiationService.createInstance(Ek,s,r,a,l,c),styles:this.computeStyles()},i=this._register(new J_(Object.assign(Object.assign({},n),t)));return i.layout(e.dimension,e.offset.quickPickTop),this._register(e.onDidLayout(s=>i.layout(s,e.offset.quickPickTop))),this._register(i.onShow(()=>this.resetContextKeys())),this._register(i.onHide(()=>this.resetContextKeys())),i}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new ce(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t?.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t={},n=Ge.None){return this.controller.pick(e,t,n)}createQuickPick(){return this.controller.createQuickPick()}updateStyles(){this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:Object.assign({},Uo(this.theme,{quickInputBackground:mP,quickInputForeground:hZ,quickInputTitleBackground:gZ,contrastBorder:Be,widgetShadow:rr})),inputBox:Uo(this.theme,{inputForeground:sy,inputBackground:iy,inputBorder:oy,inputValidationInfoBackground:bA,inputValidationInfoForeground:_A,inputValidationInfoBorder:vA,inputValidationWarningBackground:CA,inputValidationWarningForeground:wA,inputValidationWarningBorder:yA,inputValidationErrorBackground:SA,inputValidationErrorForeground:TA,inputValidationErrorBorder:LA}),countBadge:Uo(this.theme,{badgeBackground:lg,badgeForeground:cg,badgeBorder:Be}),button:Uo(this.theme,{buttonForeground:om,buttonBackground:Jx,buttonHoverBackground:sZ,buttonBorder:Be}),progressBar:Uo(this.theme,{progressBarBackground:oZ}),keybindingLabel:Uo(this.theme,{keybindingLabelBackground:mZ,keybindingLabelForeground:bZ,keybindingLabelBorder:_Z,keybindingLabelBottomBorder:vZ,keybindingLabelShadow:rr}),list:Uo(this.theme,{listBackground:mP,listInactiveFocusForeground:am,listInactiveSelectionIconForeground:lm,listInactiveFocusBackground:cm,listFocusOutline:Vt,listInactiveFocusOutline:Vt,pickerGroupBorder:pZ,pickerGroupForeground:fZ})}}},"QuickInputService");Ak=Gie([Kp(0,Ne),Kp(1,De),Kp(2,wt),Kp(3,Dl),Kp(4,up)],Ak);var WB=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Dd=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let Ik=u(class extends Ak{constructor(e,t,n,i,s,r){super(t,n,i,s,new GE(e.getContainerDomNode(),r)),this.host=void 0;const a=Fu.get(e);if(a){const l=a.widget;this.host={_serviceBrand:void 0,get hasContainer(){return!0},get container(){return l.getDomNode()},get dimension(){return e.getLayoutInfo()},get onDidLayout(){return e.onDidLayoutChange},focus:()=>e.focus(),offset:{top:0,quickPickTop:0}}}else this.host=void 0}createController(){return super.createController(this.host)}},"EditorScopedQuickInputService");Ik=WB([Dd(1,Ne),Dd(2,De),Dd(3,wt),Dd(4,Dl),Dd(5,dt)],Ik);let Nk=u(class{constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const n=t=this.instantiationService.createInstance(Ik,e);this.mapEditorToService.set(e,t),fl(e.onDidDispose)(()=>{n.dispose(),this.mapEditorToService.delete(e)})}return t}get quickAccess(){return this.activeService.quickAccess}pick(e,t={},n=Ge.None){return this.activeService.pick(e,t,n)}createQuickPick(){return this.activeService.createQuickPick()}},"StandaloneQuickInputService");Nk=WB([Dd(0,Ne),Dd(1,dt)],Nk);class Fu{constructor(e){this.editor=e,this.widget=new tv(this.editor)}static get(e){return e.getContribution(Fu.ID)}dispose(){this.widget.dispose()}}u(Fu,"QuickInputEditorContribution");Fu.ID="editor.controller.quickInput";class tv{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return tv.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}}u(tv,"QuickInputEditorWidget");tv.ID="editor.contrib.quickInputWidget";it(Fu.ID,Fu);class UB{constructor(e,t,n,i,s){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=n,this.foreground=i,this.background=s}}u(UB,"ParsedTokenThemeRule");function zie(o){if(!o||!Array.isArray(o))return[];const e=[];let t=0;for(let n=0,i=o.length;n<i;n++){const s=o[n];let r=-1;if(typeof s.fontStyle=="string"){r=0;const c=s.fontStyle.split(" ");for(let d=0,h=c.length;d<h;d++)switch(c[d]){case"italic":r=r|1;break;case"bold":r=r|2;break;case"underline":r=r|4;break;case"strikethrough":r=r|8;break}}let a=null;typeof s.foreground=="string"&&(a=s.foreground);let l=null;typeof s.background=="string"&&(l=s.background),e[t++]=new UB(s.token||"",n,r,a,l)}return e}u(zie,"parseTokenTheme");function Kie(o,e){o.sort((d,h)=>{const g=Yie(d.token,h.token);return g!==0?g:d.index-h.index});let t=0,n="000000",i="ffffff";for(;o.length>=1&&o[0].token==="";){const d=o.shift();d.fontStyle!==-1&&(t=d.fontStyle),d.foreground!==null&&(n=d.foreground),d.background!==null&&(i=d.background)}const s=new GB;for(const d of e)s.getId(d);const r=s.getId(n),a=s.getId(i),l=new nS(t,r,a),c=new iS(l);for(let d=0,h=o.length;d<h;d++){const g=o[d];c.insert(g.token,g.fontStyle,s.getId(g.foreground),s.getId(g.background))}return new ZI(s,c)}u(Kie,"resolveParsedTokenThemeRules");const jie=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class GB{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(jie);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let n=this._color2id.get(e);return n||(n=++this._lastColorId,this._color2id.set(e,n),this._id2color[n]=B.fromHex("#"+e),n)}getColorMap(){return this._id2color.slice(0)}}u(GB,"ColorMap");class ZI{constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(zie(e),t)}static createFromParsedTokenTheme(e,t){return Kie(e,t)}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let n=this._cache.get(t);if(typeof n>"u"){const i=this._match(t),s=qie(t);n=(i.metadata|s<<8)>>>0,this._cache.set(t,n)}return(n|e<<0)>>>0}}u(ZI,"TokenTheme");const $ie=/\b(comment|string|regex|regexp)\b/;function qie(o){const e=o.match($ie);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}u(qie,"toStandardTokenType");function Yie(o,e){return o<e?-1:o>e?1:0}u(Yie,"strcmp");class nS{constructor(e,t,n){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=n,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}clone(){return new nS(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,n){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),n!==0&&(this._background=n),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}}u(nS,"ThemeTrieElementRule");class iS{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;const t=e.indexOf(".");let n,i;t===-1?(n=e,i=""):(n=e.substring(0,t),i=e.substring(t+1));const s=this._children.get(n);return typeof s<"u"?s.match(i):this._mainRule}insert(e,t,n,i){if(e===""){this._mainRule.acceptOverwrite(t,n,i);return}const s=e.indexOf(".");let r,a;s===-1?(r=e,a=""):(r=e.substring(0,s),a=e.substring(s+1));let l=this._children.get(r);typeof l>"u"&&(l=new iS(this._mainRule.clone()),this._children.set(r,l)),l.insert(a,t,n,i)}}u(iS,"ThemeTrieElement");function Xie(o){const e=[];for(let t=1,n=o.length;t<n;t++){const i=o[t];e[t]=`.mtk${t} { color: ${i}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.push(".mtks { text-decoration: line-through; }"),e.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),e.join(`
`)}u(Xie,"generateTokensCSSForColorMap");const Zie={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Sn]:"#FFFFFE",[Es]:"#000000",[xA]:"#E5EBF1",[H_]:"#D3D3D3",[B_]:"#939393",[EA]:"#ADD6FF4D"}},Jie={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Sn]:"#1E1E1E",[Es]:"#D4D4D4",[xA]:"#3A3D41",[H_]:"#404040",[B_]:"#707070",[EA]:"#ADD6FF26"}},Qie={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Sn]:"#000000",[Es]:"#FFFFFF",[H_]:"#FFFFFF",[B_]:"#FFFFFF"}},ese={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Sn]:"#FFFFFF",[Es]:"#292929",[H_]:"#292929",[B_]:"#292929"}};function tse(o){const e=new R,t=O9();return t.onDidChange(()=>e.fire()),o?.onDidProductIconThemeChange(()=>e.fire()),{onDidChange:e.event,getCSS(){const n=o?o.getProductIconTheme():new JI,i={},s=u(a=>{const l=n.getIcon(a);if(!l)return;const c=l.font;return c?(i[c.id]=c.definition,`.codicon-${a.id}:before { content: '${l.fontCharacter}'; font-family: ${dP(c.id)}; }`):`.codicon-${a.id}:before { content: '${l.fontCharacter}'; }`},"formatIconRule"),r=[];for(const a of t.getIcons()){const l=s(a);l&&r.push(l)}for(const a in i){const l=i[a],c=l.weight?`font-weight: ${l.weight};`:"",d=l.style?`font-style: ${l.style};`:"",h=l.src.map(g=>`${Su(g.location)} format('${g.format}')`).join(", ");r.push(`@font-face { src: ${h}; font-family: ${dP(a)};${c}${d} font-display: block; }`)}return r.join(`
`)}}}u(tse,"getIconsStyleSheet");class JI{getIcon(e){const t=O9();let n=e.defaults;for(;ct.isThemeIcon(n);){const i=t.getIcon(n.id);if(!i)return;n=i.defaults}return n}}u(JI,"UnthemedProductIconTheme");const Ua="vs",Ug="vs-dark",ru="hc-black",au="hc-light",zB=zt.as(eH.ColorContribution),nse=zt.as(WV.ThemingContribution);class QI{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;const n=t.base;e.length>0?(_0(e)?this.id=e:this.id=n+" "+e,this.themeName=e):(this.id=n,this.themeName=n),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(const t in this.themeData.colors)e.set(t,B.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){const t=Pk(this.themeData.base);for(const n in t.colors)e.has(n)||e.set(n,B.fromHex(t.colors[n]))}this.colors=e}return this.colors}getColor(e,t){const n=this.getColors().get(e);if(n)return n;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=zB.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return Object.prototype.hasOwnProperty.call(this.getColors(),e)}get type(){switch(this.base){case Ua:return qs.LIGHT;case ru:return qs.HIGH_CONTRAST_DARK;case au:return qs.HIGH_CONTRAST_LIGHT;default:return qs.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){const s=Pk(this.themeData.base);e=s.rules,s.encodedTokensColors&&(t=s.encodedTokensColors)}const n=this.themeData.colors["editor.foreground"],i=this.themeData.colors["editor.background"];if(n||i){const s={token:""};n&&(s.foreground=n),i&&(s.background=i),e.push(s)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=ZI.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,n){const s=this.tokenTheme._match([e].concat(t).join(".")).metadata,r=$n.getForeground(s),a=$n.getFontStyle(s);return{foreground:r,italic:Boolean(a&1),bold:Boolean(a&2),underline:Boolean(a&4),strikethrough:Boolean(a&8)}}}u(QI,"StandaloneTheme");function _0(o){return o===Ua||o===Ug||o===ru||o===au}u(_0,"isBuiltinTheme");function Pk(o){switch(o){case Ua:return Zie;case Ug:return Jie;case ru:return Qie;case au:return ese}}u(Pk,"getBuiltinRules");function _C(o){const e=Pk(o);return new QI(o,e)}u(_C,"newBuiltInTheme");class KB extends U{constructor(){super(),this._onColorThemeChange=this._register(new R),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new R),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new JI,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(Ua,_C(Ua)),this._knownThemes.set(Ug,_C(Ug)),this._knownThemes.set(ru,_C(ru)),this._knownThemes.set(au,_C(au));const e=tse(this);this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(Ua),this._onOSSchemeChanged(),e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()}),jD("(forced-colors: active)",()=>{this._onOSSchemeChanged()})}registerEditorContainer(e){return fb(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=oo(),this._globalStyleElement.className="monaco-colors",this._globalStyleElement.textContent=this._allCSS,this._styleElements.push(this._globalStyleElement)),U.None}_registerShadowDomContainer(e){const t=oo(e);return t.className="monaco-colors",t.textContent=this._allCSS,this._styleElements.push(t),{dispose:()=>{for(let n=0;n<this._styleElements.length;n++)if(this._styleElements[n]===t){this._styleElements.splice(n,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!_0(t.base)&&!_0(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new QI(e,t)),_0(e)&&this._knownThemes.forEach(n=>{n.base===e&&n.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get(Ua),this._updateActualTheme(t)}_updateActualTheme(e){!e||this._theme===e||(this._theme=e,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){const e=window.matchMedia("(forced-colors: active)").matches;if(e!==ui(this._theme.type)){let t;vb(this._theme.type)?t=e?ru:Ug:t=e?au:Ua,this._updateActualTheme(this._knownThemes.get(t))}}}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._onOSSchemeChanged()}_updateThemeOrColorMap(){const e=[],t={},n={addRule:r=>{t[r]||(e.push(r),t[r]=!0)}};nse.getThemingParticipants().forEach(r=>r(this._theme,n,this._environment));const i=[];for(const r of zB.getColors()){const a=this._theme.getColor(r.id,!0);a&&i.push(`${QV(r.id)}: ${a.toString()};`)}n.addRule(`.monaco-editor { ${i.join(`
`)} }`);const s=this._colorMapOverride||this._theme.tokenTheme.getColorMap();n.addRule(Xie(s)),this._themeCSS=e.join(`
`),this._updateCSS(),Wt.setColorMap(s),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}}u(KB,"StandaloneThemeService");const Ps=Je("themeService");var ise=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},GT=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let Rk=u(class extends U{constructor(e,t,n){super(),this._contextKeyService=e,this._layoutService=t,this._configurationService=n,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new R,this._onDidChangeReducedMotion=new R,this._accessibilityModeEnabledContext=F_.bindTo(this._contextKeyService);const i=u(()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized()),"updateContextKey");this._register(this._configurationService.onDidChangeConfiguration(r=>{r.affectsConfiguration("editor.accessibilitySupport")&&(i(),this._onDidChangeScreenReaderOptimized.fire()),r.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())})),i(),this._register(this.onDidChangeScreenReaderOptimized(()=>i()));const s=window.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=s.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this.initReducedMotionListeners(s)}initReducedMotionListeners(e){if(!this._layoutService.hasContainer)return;this._register(Y(e,"change",()=>{this._systemMotionReduced=e.matches,this._configMotionReduced==="auto"&&this._onDidChangeReducedMotion.fire()}));const t=u(()=>{const n=this.isMotionReduced();this._layoutService.container.classList.toggle("reduce-motion",n),this._layoutService.container.classList.toggle("enable-motion",!n)},"updateRootClasses");t(),this._register(this.onDidChangeReducedMotion(()=>t()))}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){const e=this._configMotionReduced;return e==="on"||e==="auto"&&this._systemMotionReduced}getAccessibilitySupport(){return this._accessibilitySupport}},"AccessibilityService");Rk=ise([GT(0,De),GT(1,up),GT(2,rt)],Rk);var Sm=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})},vg;(function(o){o[o.None=0]="None",o[o.Initialized=1]="Initialized",o[o.Closed=2]="Closed"})(vg||(vg={}));class lu extends U{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new R),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=vg.None,this.cache=new Map,this.flushDelayer=new D5(lu.DEFAULT_FLUSH_DELAY),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,n;(t=e.changed)===null||t===void 0||t.forEach((i,s)=>this.accept(s,i)),(n=e.deleted)===null||n===void 0||n.forEach(i=>this.accept(i,void 0))}accept(e,t){if(this.state===vg.Closed)return;let n=!1;ys(t)?n=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),n=!0),n&&this._onDidChangeStorage.fire(e)}get(e,t){const n=this.cache.get(e);return ys(n)?t:n}getBoolean(e,t){const n=this.get(e);return ys(n)?t:n==="true"}getNumber(e,t){const n=this.get(e);return ys(n)?t:parseInt(n,10)}set(e,t){return Sm(this,void 0,void 0,function*(){if(this.state===vg.Closed)return;if(ys(t))return this.delete(e);const n=String(t);if(this.cache.get(e)!==n)return this.cache.set(e,n),this.pendingInserts.set(e,n),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire(e),this.doFlush()})}delete(e){return Sm(this,void 0,void 0,function*(){if(!(this.state===vg.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire(e),this.doFlush()})}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}flushPending(){return Sm(this,void 0,void 0,function*(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var t;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(t=this.whenFlushedCallbacks.pop())===null||t===void 0||t()})})}doFlush(e){return Sm(this,void 0,void 0,function*(){return this.flushDelayer.trigger(()=>this.flushPending(),e)})}dispose(){this.flushDelayer.dispose(),super.dispose()}}u(lu,"Storage");lu.DEFAULT_FLUSH_DELAY=100;class v0{constructor(){this.onDidChangeItemsExternal=fe.None,this.items=new Map}updateItems(e){var t,n;return Sm(this,void 0,void 0,function*(){(t=e.insert)===null||t===void 0||t.forEach((i,s)=>this.items.set(s,i)),(n=e.delete)===null||n===void 0||n.forEach(i=>this.items.delete(i))})}}u(v0,"InMemoryStorageDatabase");const vC="__$__targetStorageMarker",No=Je("storageService");var Y1;(function(o){o[o.NONE=0]="NONE",o[o.SHUTDOWN=1]="SHUTDOWN"})(Y1||(Y1={}));class nv extends U{constructor(e={flushInterval:nv.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new Qm),this.onDidChangeValue=this._onDidChangeValue.event,this._onDidChangeTarget=this._register(new Qm),this._onWillSaveState=this._register(new R),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}emitDidChangeValue(e,t){if(t===vC){switch(e){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:t,target:this.getKeyTargets(e)[t]})}get(e,t,n){var i;return(i=this.getStorage(t))===null||i===void 0?void 0:i.get(e,n)}getBoolean(e,t,n){var i;return(i=this.getStorage(t))===null||i===void 0?void 0:i.getBoolean(e,n)}getNumber(e,t,n){var i;return(i=this.getStorage(t))===null||i===void 0?void 0:i.getNumber(e,n)}store(e,t,n,i){if(ys(t)){this.remove(e,n);return}this.withPausedEmitters(()=>{var s;this.updateKeyTarget(e,n,i),(s=this.getStorage(n))===null||s===void 0||s.set(e,t)})}remove(e,t){this.withPausedEmitters(()=>{var n;this.updateKeyTarget(e,t,void 0),(n=this.getStorage(t))===null||n===void 0||n.delete(e)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,n){var i,s;const r=this.getKeyTargets(t);typeof n=="number"?r[e]!==n&&(r[e]=n,(i=this.getStorage(t))===null||i===void 0||i.set(vC,JSON.stringify(r))):typeof r[e]=="number"&&(delete r[e],(s=this.getStorage(t))===null||s===void 0||s.set(vC,JSON.stringify(r)))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(e){switch(e){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){const t=this.get(vC,e);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}}u(nv,"AbstractStorageService");nv.DEFAULT_FLUSH_INTERVAL=60*1e3;class jB extends nv{constructor(){super(),this.applicationStorage=this._register(new lu(new v0)),this.profileStorage=this._register(new lu(new v0)),this.workspaceStorage=this._register(new lu(new v0)),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.profileStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e))),this._register(this.applicationStorage.onDidChangeStorage(e=>this.emitDidChangeValue(-1,e)))}getStorage(e){switch(e){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}}u(jB,"InMemoryStorageService");var eN=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Gg=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let Fk=u(class{constructor(e,t){this._commandService=e,this._hiddenStates=new X1(t)}createMenu(e,t,n){return new Ok(e,this._hiddenStates,Object.assign({emitEventsForSubmenuChanges:!1,eventDebounceDelay:50},n),this._commandService,t,this)}},"MenuService");Fk=eN([Gg(0,hn),Gg(1,No)],Fk);let X1=u(class Tm{constructor(e){this._storageService=e,this._disposables=new J,this._onDidChange=new R,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1;try{const t=e.get(Tm._key,0,"{}");this._data=JSON.parse(t)}catch{this._data=Object.create(null)}this._disposables.add(e.onDidChangeValue(t=>{if(t.key===Tm._key){if(!this._ignoreChangeEvent)try{const n=e.get(Tm._key,0,"{}");this._data=JSON.parse(n)}catch(n){console.log("FAILED to read storage after UPDATE",n)}this._onDidChange.fire()}}))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}isHidden(e,t){var n,i;return(i=(n=this._data[e.id])===null||n===void 0?void 0:n.includes(t))!==null&&i!==void 0?i:!1}updateHidden(e,t,n){const i=this._data[e.id];if(n)i?i.indexOf(t)<0&&i.push(t):this._data[e.id]=[t];else if(i){const s=i.indexOf(t);s>=0&&w$(i,s),i.length===0&&delete this._data[e.id]}this._persist()}_persist(){try{this._ignoreChangeEvent=!0;const e=JSON.stringify(this._data);this._storageService.store(Tm._key,e,0,0)}finally{this._ignoreChangeEvent=!1}}},"PersistedMenuHideState");X1._key="menu.hiddenCommands";X1=eN([Gg(0,No)],X1);let Ok=u(class eg{constructor(e,t,n,i,s,r){this._id=e,this._hiddenStates=t,this._options=n,this._commandService=i,this._contextKeyService=s,this._menuService=r,this._disposables=new J,this._menuGroups=[],this._contextKeys=new Set,this._build();const a=new pt(()=>{this._build(),this._onDidChange.fire(this)},n.eventDebounceDelay);this._disposables.add(a),this._disposables.add(Qs.onDidChangeMenu(d=>{d.has(e)&&a.schedule()}));const l=this._disposables.add(new J),c=u(()=>{const d=new pt(()=>this._onDidChange.fire(this),n.eventDebounceDelay);l.add(d),l.add(s.onDidChangeContext(h=>{h.affectsSome(this._contextKeys)&&d.schedule()})),l.add(t.onDidChange(()=>{d.schedule()}))},"startLazyListener");this._onDidChange=new R({onFirstListenerAdd:c,onLastListenerRemove:l.clear.bind(l)}),this.onDidChange=this._onDidChange.event}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}_build(){this._menuGroups.length=0,this._contextKeys.clear();const e=Qs.getMenuItems(this._id);let t;e.sort(eg._compareMenuItems);for(const n of e){const i=n.group||"";(!t||t[0]!==i)&&(t=[i,[]],this._menuGroups.push(t)),t[1].push(n),this._collectContextKeys(n)}}_collectContextKeys(e){if(eg._fillInKbExprKeys(e.when,this._contextKeys),ag(e)){if(e.command.precondition&&eg._fillInKbExprKeys(e.command.precondition,this._contextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;eg._fillInKbExprKeys(t,this._contextKeys)}}else this._options.emitEventsForSubmenuChanges&&Qs.getMenuItems(e.submenu).forEach(this._collectContextKeys,this)}getActions(e){const t=[];for(const n of this._menuGroups){const[i,s]=n,r=[],a=[];for(const l of s)if(this._contextKeyService.contextMatchesRules(l.when)){let c;if(ag(l)){const h=sse(this._id,l.command,this._hiddenStates);c=new Dc(l.command,l.alt,e,h,this._contextKeyService,this._commandService)}else c=new Qw(l,this._menuService,this._contextKeyService,e),c.actions.length===0&&(c.dispose(),c=void 0);c&&a.push(c)}a.length>0&&t.push([i,a]),r.length>0}return t}static _fillInKbExprKeys(e,t){if(e)for(const n of e.keys())t.add(n)}static _compareMenuItems(e,t){const n=e.group,i=t.group;if(n!==i){if(n){if(!i)return-1}else return 1;if(n==="navigation")return-1;if(i==="navigation")return 1;const a=n.localeCompare(i);if(a!==0)return a}const s=e.order||0,r=t.order||0;return s<r?-1:s>r?1:eg._compareTitles(ag(e)?e.command.title:e.title,ag(t)?t.command.title:t.title)}static _compareTitles(e,t){const n=typeof e=="string"?e:e.original,i=typeof t=="string"?t:t.original;return n.localeCompare(i)}},"Menu");Ok=eN([Gg(3,hn),Gg(4,De),Gg(5,ah)],Ok);function sse(o,e,t){const n=`${o.id}/${e.id}`,i=typeof e.title=="string"?e.title:e.title.value,s=hP({id:n,label:m("hide.label","Hide '{0}'",i),run(){t.updateHidden(o,e.id,!0)}}),r=hP({id:n,label:i,get checked(){return!t.isHidden(o,e.id)},run(){const a=!t.isHidden(o,e.id);t.updateHidden(o,e.id,a)}});return{hide:s,toggle:r,get isHidden(){return!r.checked}}}u(sse,"createMenuHide");var ose=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},eF=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Hh=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let Vk=u(class extends U{constructor(e,t){super(),this.layoutService=e,this.logService=t,this.mapTextToType=new Map,this.findText="",this.resources=[],(pl||qD)&&this.installWebKitWriteTextWorkaround()}installWebKitWriteTextWorkaround(){const e=u(()=>{const t=new Ww;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=t,navigator.clipboard.write([new ClipboardItem({"text/plain":t.p})]).catch(n=>Hh(this,void 0,void 0,function*(){(!(n instanceof Error)||n.name!=="NotAllowedError"||!t.isRejected)&&this.logService.error(n)}))},"handler");this.layoutService.hasContainer&&(this._register(Y(this.layoutService.container,"click",e)),this._register(Y(this.layoutService.container,"keydown",e)))}writeText(e,t){return Hh(this,void 0,void 0,function*(){if(t){this.mapTextToType.set(t,e);return}if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(e);try{return yield navigator.clipboard.writeText(e)}catch(s){console.error(s)}const n=document.activeElement,i=document.body.appendChild(ee("textarea",{"aria-hidden":!0}));i.style.height="1px",i.style.width="1px",i.style.position="absolute",i.value=e,i.focus(),i.select(),document.execCommand("copy"),n instanceof HTMLElement&&n.focus(),document.body.removeChild(i)})}readText(e){return Hh(this,void 0,void 0,function*(){if(e)return this.mapTextToType.get(e)||"";try{return yield navigator.clipboard.readText()}catch(t){return console.error(t),""}})}readFindText(){return Hh(this,void 0,void 0,function*(){return this.findText})}writeFindText(e){return Hh(this,void 0,void 0,function*(){this.findText=e})}readResources(){return Hh(this,void 0,void 0,function*(){return this.resources})}},"BrowserClipboardService");Vk=ose([eF(0,up),eF(1,Ao)],Vk);var rse=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ase=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const Km="data-keybinding-context";let tN=u(class{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}get value(){return Object.assign({},this._value)}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}},"Context");class Ou extends tN{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}}u(Ou,"NullContext");Ou.INSTANCE=new Ou;class If extends tN{constructor(e,t,n){super(e,null),this._configurationService=t,this._values=iu.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(i=>{if(i.source===7){const s=Array.from(je.map(this._values,([r])=>r));this._values.clear(),n.fire(new Bk(s))}else{const s=[];for(const r of i.affectedKeys){const a=`config.${r}`,l=this._values.findSuperstr(a);l!==void 0&&(s.push(...je.map(l,([c])=>c)),this._values.deleteSuperstr(a)),this._values.has(a)&&(s.push(a),this._values.delete(a))}n.fire(new Bk(s))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(If._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(If._keyPrefix.length),n=this._configurationService.getValue(t);let i;switch(typeof n){case"number":case"boolean":case"string":i=n;break;default:Array.isArray(n)?i=JSON.stringify(n):i=n}return this._values.set(e,i),i}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}}u(If,"ConfigAwareContextValuesContainer");If._keyPrefix="config.";class $B{constructor(e,t,n){this._service=e,this._key=t,this._defaultValue=n,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}u($B,"ContextKey");class Hk{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}allKeysContainedIn(e){return this.affectsSome(e)}}u(Hk,"SimpleContextKeyChangeEvent");class Bk{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}allKeysContainedIn(e){return this.keys.every(t=>e.has(t))}}u(Bk,"ArrayContextKeyChangeEvent");class qB{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}allKeysContainedIn(e){return this.events.every(t=>t.allKeysContainedIn(e))}}u(qB,"CompositeContextKeyChangeEvent");function lse(o,e){return o.allKeysContainedIn(new Set(Object.keys(e)))}u(lse,"allEventKeysInContext");class nN{constructor(e){this._onDidChangeContext=new Qm({merge:t=>new qB(t)}),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new $B(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new YB(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return e?e.evaluate(t):!0}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const n=this.getContextValuesContainer(this._myContextId);n&&n.setValue(e,t)&&this._onDidChangeContext.fire(new Hk(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new Hk(e))}getContext(e){return this._isDisposed?Ou.INSTANCE:this.getContextValuesContainer(cse(e))}}u(nN,"AbstractContextKeyService");let Wk=u(class extends nN{constructor(e){super(0),this._contexts=new Map,this._toDispose=new J,this._lastContextId=0;const t=new If(this._myContextId,e,this._onDidChangeContext);this._contexts.set(this._myContextId,t),this._toDispose.add(t)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._toDispose.dispose()}getContextValuesContainer(e){return this._isDisposed?Ou.INSTANCE:this._contexts.get(e)||Ou.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");const t=++this._lastContextId;return this._contexts.set(t,new tN(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}},"ContextKeyService");Wk=rse([ase(0,rt)],Wk);class YB extends nN{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=new gi,this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(Km)){let n="";this._domNode.classList&&(n=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${n?": "+n:""}`)}this._domNode.setAttribute(Km,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(e=>{const n=this._parent.getContextValuesContainer(this._myContextId).value;lse(e,n)||this._onDidChangeContext.fire(e)})}dispose(){this._isDisposed||(this._onDidChangeContext.dispose(),this._parent.disposeContext(this._myContextId),this._parentChangeListener.dispose(),this._domNode.removeAttribute(Km),this._isDisposed=!0)}getContextValuesContainer(e){return this._isDisposed?Ou.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}u(YB,"ScopedContextKeyService");function cse(o){for(;o;){if(o.hasAttribute(Km)){const e=o.getAttribute(Km);return e?parseInt(e,10):NaN}o=o.parentElement}return 0}u(cse,"findContextAttr");function dse(o,e,t){o.get(De).createKey(String(e),use(t))}u(dse,"setContext");function use(o){return FO(o,e=>{if(typeof e=="object"&&e.$mid===1)return be.revive(e).toString();if(e instanceof be)return e.toString()})}u(use,"stringifyURIs");Qe.registerCommand(WX,dse);Qe.registerCommand({id:"getContextKeyInfo",handler(){return[...ce.all()].sort((o,e)=>o.key.localeCompare(e.key))},description:{description:m("getContextKeyInfo","A command that returns information about context keys"),args:[]}});Qe.registerCommand("_generateContextKeyInfo",function(){const o=[],e=new Set;for(const t of ce.all())e.has(t.key)||(e.add(t.key),o.push(t));o.sort((t,n)=>t.key.localeCompare(n.key)),console.log(JSON.stringify(o,void 0,2))});let hse=u(class{constructor(e){this.incoming=new Map,this.outgoing=new Map,this.data=e}},"Node");class XB{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(const t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(t);n.outgoing.set(this._hashFn(t),i),i.incoming.set(this._hashFn(e),n)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const n of this._nodes.values())n.outgoing.delete(t),n.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let n=this._nodes.get(t);return n||(n=new hse(e),this._nodes.set(t,n)),n}isEmpty(){return this._nodes.size===0}toString(){const e=[];for(const[t,n]of this._nodes)e.push(`${t}, (incoming)[${[...n.incoming.keys()].join(", ")}], (outgoing)[${[...n.outgoing.keys()].join(",")}]`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this._nodes){const n=new Set([e]),i=this._findCycle(t,n);if(i)return i}}_findCycle(e,t){for(const[n,i]of e.outgoing){if(t.has(n))return[...t,n].join(" -> ");t.add(n);const s=this._findCycle(i,t);if(s)return s;t.delete(n)}}}u(XB,"Graph");class Uk extends Error{constructor(e){var t;super("cyclic dependency between services"),this.message=(t=e.findCycleSlow())!==null&&t!==void 0?t:`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}u(Uk,"CyclicDependencyError");class sS{constructor(e=new z_,t=!1,n){this._activeInstantiations=new Set,this._services=e,this._strict=t,this._parent=n,this._services.set(Ne,this)}createChild(e){return new sS(e,this._strict,this)}invokeFunction(e,...t){const n=Ks.traceInvocation(e);let i=!1;try{return e({get:r=>{if(i)throw G$("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(r,n);if(!a)throw new Error(`[invokeFunction] unknown service '${r}'`);return a}},...t)}finally{i=!0,n.stop()}}createInstance(e,...t){let n,i;return e instanceof Ko?(n=Ks.traceCreation(e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(t),n)):(n=Ks.traceCreation(e),i=this._createInstance(e,t,n)),n.stop(),i}_createInstance(e,t=[],n){const i=tr.getServiceDependencies(e).sort((a,l)=>a.index-l.index),s=[];for(const a of i){const l=this._getOrCreateServiceInstance(a.id,n);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),s.push(l)}const r=i.length>0?i[0].index:t.length;if(t.length!==r){console.trace(`[createInstance] First service dependency of ${e.name} at position ${r+1} conflicts with ${t.length} static arguments`);const a=r-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,r)}return new e(...t,...s)}_setServiceInstance(e,t){if(this._services.get(e)instanceof Ko)this._services.set(e,t);else if(this._parent)this._parent._setServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){const n=this._getServiceInstanceOrDescriptor(e);return n instanceof Ko?this._safeCreateAndCacheServiceInstance(e,n,t.branch(e,!0)):(t.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,t,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,n){const i=new XB(a=>a.id.toString());let s=0;const r=[{id:e,desc:t,_trace:n}];for(;r.length;){const a=r.pop();if(i.lookupOrInsertNode(a),s++>1e3)throw new Uk(i);for(const l of tr.getServiceDependencies(a.desc.ctor)){const c=this._getServiceInstanceOrDescriptor(l.id);if(c||this._throwIfStrict(`[createInstance] ${e} depends on ${l.id} which is NOT registered.`,!0),c instanceof Ko){const d={id:l.id,desc:c,_trace:a._trace.branch(l.id,!0)};i.insertEdge(a,d),r.push(d)}}}for(;;){const a=i.roots();if(a.length===0){if(!i.isEmpty())throw new Uk(i);break}for(const{data:l}of a){if(this._getServiceInstanceOrDescriptor(l.id)instanceof Ko){const d=this._createServiceInstanceWithOwner(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this._setServiceInstance(l.id,d)}i.removeNode(l)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,n=[],i,s){if(this._services.get(e)instanceof Ko)return this._createServiceInstance(t,n,i,s);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,n,i,s);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t=[],n,i){if(n){const s=new ol(()=>this._createInstance(e,t,i));return new Proxy(Object.create(null),{get(r,a){if(a in r)return r[a];const l=s.value;let c=l[a];return typeof c!="function"||(c=c.bind(l),r[a]=c),c},set(r,a,l){return s.value[a]=l,!0}})}else return this._createInstance(e,t,i)}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}}u(sS,"InstantiationService");class Ks{constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}static traceInvocation(e){return Ks._None}static traceCreation(e){return Ks._None}branch(e,t){const n=new Ks(2,e.toString());return this._dep.push([e,t,n]),n}stop(){const e=Date.now()-this._start;Ks._totals+=e;let t=!1;function n(s,r){const a=[],l=new Array(s+1).join("	");for(const[c,d,h]of r._dep)if(d&&h){t=!0,a.push(`${l}CREATES -> ${c}`);const g=n(s+1,h);g&&a.push(g)}else a.push(`${l}uses -> ${c}`);return a.join(`
`)}u(n,"printChild");const i=[`${this.type===0?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${Ks._totals.toFixed(2)}ms)`];(e>2||t)&&console.log(i.join(`
`))}}u(Ks,"Trace");Ks._None=new class extends Ks{constructor(){super(-1,null)}stop(){}branch(){return this}};Ks._totals=0;class ZB{constructor(){this._byResource=new ai,this._byOwner=new Map}set(e,t,n){let i=this._byResource.get(e);i||(i=new Map,this._byResource.set(e,i)),i.set(t,n);let s=this._byOwner.get(t);s||(s=new ai,this._byOwner.set(t,s)),s.set(e,n)}get(e,t){const n=this._byResource.get(e);return n?.get(t)}delete(e,t){let n=!1,i=!1;const s=this._byResource.get(e);s&&(n=s.delete(t));const r=this._byOwner.get(t);if(r&&(i=r.delete(e)),n!==i)throw new Error("illegal state");return n&&i}values(e){var t,n,i,s;return typeof e=="string"?(n=(t=this._byOwner.get(e))===null||t===void 0?void 0:t.values())!==null&&n!==void 0?n:je.empty():be.isUri(e)?(s=(i=this._byResource.get(e))===null||i===void 0?void 0:i.values())!==null&&s!==void 0?s:je.empty():je.map(je.concat(...this._byOwner.values()),r=>r[1])}}u(ZB,"DoubleResourceMap");class JB{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new ai,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const n=this._data.get(t);n&&this._substract(n);const i=this._resourceStats(t);this._add(i),this._data.set(t,i)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(e.scheme===Pe.inMemory||e.scheme===Pe.walkThrough||e.scheme===Pe.walkThroughSnippet||e.scheme===Pe.vscodeSourceControl)return t;for(const{severity:n}of this._service.read({resource:e}))n===Ut.Error?t.errors+=1:n===Ut.Warning?t.warnings+=1:n===Ut.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}u(JB,"MarkerStats");class Oa{constructor(){this._onMarkerChanged=new S4({delay:0,merge:Oa._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new ZB,this._stats=new JB(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const n of t||[])this.changeOne(e,n,[])}changeOne(e,t,n){if(kO(n))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const i=[];for(const s of n){const r=Oa._toMarker(e,t,s);r&&i.push(r)}this._data.set(t,e,i),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,n){let{code:i,severity:s,message:r,source:a,startLineNumber:l,startColumn:c,endLineNumber:d,endColumn:h,relatedInformation:g,tags:f}=n;if(r)return l=l>0?l:1,c=c>0?c:1,d=d>=l?d:l,h=h>0?h:c,{resource:t,owner:e,code:i,severity:s,message:r,source:a,startLineNumber:l,startColumn:c,endLineNumber:d,endColumn:h,relatedInformation:g,tags:f}}changeAll(e,t){const n=[],i=this._data.values(e);if(i)for(const s of i){const r=je.first(s);r&&(n.push(r.resource),this._data.delete(r.resource,e))}if(ci(t)){const s=new ai;for(const{resource:r,marker:a}of t){const l=Oa._toMarker(e,r,a);if(!l)continue;const c=s.get(r);c?c.push(l):(s.set(r,[l]),n.push(r))}for(const[r,a]of s)this._data.set(r,e,a)}n.length>0&&this._onMarkerChanged.fire(n)}read(e=Object.create(null)){let{owner:t,resource:n,severities:i,take:s}=e;if((!s||s<0)&&(s=-1),t&&n){const r=this._data.get(n,t);if(r){const a=[];for(const l of r)if(Oa._accept(l,i)){const c=a.push(l);if(s>0&&c===s)break}return a}else return[]}else if(!t&&!n){const r=[];for(const a of this._data.values())for(const l of a)if(Oa._accept(l,i)){const c=r.push(l);if(s>0&&c===s)return r}return r}else{const r=this._data.values(n??t),a=[];for(const l of r)for(const c of l)if(Oa._accept(c,i)){const d=a.push(c);if(s>0&&d===s)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new ai;for(const n of e)for(const i of n)t.set(i,!0);return Array.from(t.keys())}}u(Oa,"MarkerService");function QB(o,e,t,n,i,s){if(Array.isArray(o)){let r=0;for(const a of o){const l=QB(a,e,t,n,i,s);if(l===10)return l;l>r&&(r=l)}return r}else{if(typeof o=="string")return n?o==="*"?5:o===t?10:0:0;if(o){const{language:r,pattern:a,scheme:l,hasAccessToAllModels:c,notebookType:d}=o;if(!n&&!c)return 0;d&&i&&(e=i);let h=0;if(l)if(l===e.scheme)h=10;else if(l==="*")h=5;else return 0;if(r)if(r===t)h=10;else if(r==="*")h=Math.max(h,5);else return 0;if(d)if(d===s)h=10;else if(d==="*"&&s!==void 0)h=Math.max(h,5);else return 0;if(a){let g;if(typeof a=="string"?g=a:g=Object.assign(Object.assign({},a),{base:E4(a.base)}),g===e.fsPath||bne(g,e.fsPath))h=10;else return 0}return h}else return 0}}u(QB,"score");function e6(o){return typeof o=="string"?!1:Array.isArray(o)?o.every(e6):!!o.exclusive}u(e6,"isExclusive");class Gk{constructor(e,t,n,i){this.uri=e,this.languageId=t,this.notebookUri=n,this.notebookType=i}equals(e){var t,n;return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&((t=this.notebookUri)===null||t===void 0?void 0:t.toString())===((n=e.notebookUri)===null||n===void 0?void 0:n.toString())}}u(Gk,"MatchCandidate");class Ht{constructor(e){this._notebookInfoResolver=e,this._clock=0,this._entries=[],this._onDidChange=new R,this.onDidChange=this._onDidChange.event}register(e,t){let n={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(n),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),He(()=>{if(n){const i=this._entries.indexOf(n);i>=0&&(this._entries.splice(i,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),n=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e);const t=[];for(const n of this._entries)n._score>0&&t.push(n.provider);return t}ordered(e){const t=[];return this._orderedForEach(e,n=>t.push(n.provider)),t}orderedGroups(e){const t=[];let n,i;return this._orderedForEach(e,s=>{n&&i===s._score?n.push(s.provider):(i=s._score,n=[s.provider],t.push(n))}),t}_orderedForEach(e,t){this._updateScores(e);for(const n of this._entries)n._score>0&&t(n)}_updateScores(e){var t,n;const i=(t=this._notebookInfoResolver)===null||t===void 0?void 0:t.call(this,e.uri),s=i?new Gk(e.uri,e.getLanguageId(),i.uri,i.type):new Gk(e.uri,e.getLanguageId(),void 0,void 0);if(!(!((n=this._lastCandidate)===null||n===void 0)&&n.equals(s))){this._lastCandidate=s;for(const r of this._entries)if(r._score=QB(r.selector,s.uri,s.languageId,Fq(e),s.notebookUri,s.notebookType),e6(r.selector)&&r._score>0){for(const a of this._entries)a._score=0;r._score=1e3;break}this._entries.sort(Ht._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:e._time<t._time?1:e._time>t._time?-1:0}}u(Ht,"LanguageFeatureRegistry");class t6{constructor(){this.referenceProvider=new Ht(this._score.bind(this)),this.renameProvider=new Ht(this._score.bind(this)),this.codeActionProvider=new Ht(this._score.bind(this)),this.definitionProvider=new Ht(this._score.bind(this)),this.typeDefinitionProvider=new Ht(this._score.bind(this)),this.declarationProvider=new Ht(this._score.bind(this)),this.implementationProvider=new Ht(this._score.bind(this)),this.documentSymbolProvider=new Ht(this._score.bind(this)),this.inlayHintsProvider=new Ht(this._score.bind(this)),this.colorProvider=new Ht(this._score.bind(this)),this.codeLensProvider=new Ht(this._score.bind(this)),this.documentFormattingEditProvider=new Ht(this._score.bind(this)),this.documentRangeFormattingEditProvider=new Ht(this._score.bind(this)),this.onTypeFormattingEditProvider=new Ht(this._score.bind(this)),this.signatureHelpProvider=new Ht(this._score.bind(this)),this.hoverProvider=new Ht(this._score.bind(this)),this.documentHighlightProvider=new Ht(this._score.bind(this)),this.selectionRangeProvider=new Ht(this._score.bind(this)),this.foldingRangeProvider=new Ht(this._score.bind(this)),this.linkProvider=new Ht(this._score.bind(this)),this.inlineCompletionsProvider=new Ht(this._score.bind(this)),this.completionProvider=new Ht(this._score.bind(this)),this.linkedEditingRangeProvider=new Ht(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new Ht(this._score.bind(this)),this.documentSemanticTokensProvider=new Ht(this._score.bind(this)),this.documentOnDropEditProvider=new Ht(this._score.bind(this)),this.documentPasteEditProvider=new Ht(this._score.bind(this))}_score(e){var t;return(t=this._notebookTypeResolver)===null||t===void 0?void 0:t.call(this,e)}}u(t6,"LanguageFeaturesService");nt(ue,t6,!0);class n6 extends Wi{constructor(e={}){const t=zt.as(kl.Configuration).getConfigurationProperties(),n=Object.keys(t),i=Object.create(null),s=[];for(const r in t){const a=e[r],l=a!==void 0?a:t[r].default;JD(i,r,l,c=>console.error(`Conflict in default settings: ${c}`))}for(const r of Object.keys(i))ab.test(r)&&s.push({identifiers:v5(r),keys:Object.keys(i[r]),contents:h5(i[r],a=>console.error(`Conflict in default settings file: ${a}`))});super(i,n,s)}}u(n6,"DefaultConfigurationModel");var td=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},_i=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},i6=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class s6{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new R}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}u(s6,"SimpleModel");let zk=u(class{constructor(e){this.modelService=e}createModelReference(e){const t=this.modelService.getModel(e);return t?Promise.resolve(new v4(new s6(t))):Promise.reject(new Error("Model not found"))}},"StandaloneTextModelService");zk=td([_i(0,Kt)],zk);class iv{show(){return iv.NULL_PROGRESS_RUNNER}showWhile(e,t){return i6(this,void 0,void 0,function*(){yield e})}}u(iv,"StandaloneEditorProgressService");iv.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};class o6{withProgress(e,t,n){return t({report:()=>{}})}}u(o6,"StandaloneProgressService");class r6{confirm(e){return this.doConfirm(e).then(t=>({confirmed:t,checkboxChecked:!1}))}doConfirm(e){let t=e.message;return e.detail&&(t=t+`

`+e.detail),Promise.resolve(window.confirm(t))}show(e,t,n,i){return Promise.resolve({choice:0})}}u(r6,"StandaloneDialogService");class sv{info(e){return this.notify({severity:Bt.Info,message:e})}warn(e){return this.notify({severity:Bt.Warning,message:e})}error(e){return this.notify({severity:Bt.Error,message:e})}notify(e){switch(e.severity){case Bt.Error:console.error(e.message);break;case Bt.Warning:console.warn(e.message);break;default:console.log(e.message);break}return sv.NO_OP}status(e,t){return U.None}}u(sv,"StandaloneNotificationService");sv.NO_OP=new c9;let Kk=u(class{constructor(e){this._onWillExecuteCommand=new R,this._onDidExecuteCommand=new R,this.onWillExecuteCommand=this._onWillExecuteCommand.event,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const n=Qe.getCommand(e);if(!n)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const i=this._instantiationService.invokeFunction.apply(this._instantiationService,[n.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(i)}catch(i){return Promise.reject(i)}}},"StandaloneCommandService");Kk=td([_i(0,Ne)],Kk);let Nf=u(class extends l8{constructor(e,t,n,i,s,r){super(e,t,n,i,s),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];const a=u(f=>{const p=new J;p.add(Y(f,le.KEY_DOWN,_=>{const v=new Pt(_);this._dispatch(v,v.target)&&(v.preventDefault(),v.stopPropagation())})),p.add(Y(f,le.KEY_UP,_=>{const v=new Pt(_);this._singleModifierDispatch(v,v.target)&&v.preventDefault()})),this._domNodeListeners.push(new a6(f,p))},"addContainer"),l=u(f=>{for(let p=0;p<this._domNodeListeners.length;p++){const _=this._domNodeListeners[p];_.domNode===f&&(this._domNodeListeners.splice(p,1),_.dispose())}},"removeContainer"),c=u(f=>{f.getOption(56)||a(f.getContainerDomNode())},"addCodeEditor"),d=u(f=>{f.getOption(56)||l(f.getContainerDomNode())},"removeCodeEditor");this._register(r.onCodeEditorAdd(c)),this._register(r.onCodeEditorRemove(d)),r.listCodeEditors().forEach(c);const h=u(f=>{a(f.getContainerDomNode())},"addDiffEditor"),g=u(f=>{l(f.getContainerDomNode())},"removeDiffEditor");this._register(r.onDiffEditorAdd(h)),this._register(r.onDiffEditorRemove(g)),r.listDiffEditors().forEach(h)}addDynamicKeybinding(e,t,n,i){return ur(Qe.registerCommand(e,n),this.addDynamicKeybindings([{keybinding:t,command:e,when:i}]))}addDynamicKeybindings(e){const t=e.map(n=>{var i,s;const r=zx(n.keybinding,Us);return{keybinding:(i=r?.parts)!==null&&i!==void 0?i:null,command:(s=n.command)!==null&&s!==void 0?s:null,commandArgs:n.commandArgs,when:n.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}});return this._dynamicKeybindings=this._dynamicKeybindings.concat(t),this.updateResolver(),He(()=>{for(let n=0;n<this._dynamicKeybindings.length;n++)if(this._dynamicKeybindings[n]===t[0]){this._dynamicKeybindings.splice(n,t.length),this.updateResolver();return}})}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(gs.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new Bg(e,t,n=>this._log(n))}return this._cachedResolver}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(e,t){const n=[];let i=0;for(const s of e){const r=s.when||void 0,a=s.keybinding;if(!a)n[i++]=new qE(void 0,s.command,s.commandArgs,r,t,null,!1);else{const l=Lf.resolveUserBinding(a,Us);for(const c of l)n[i++]=new qE(c,s.command,s.commandArgs,r,t,null,!1)}}return n}resolveKeyboardEvent(e){const t=new Ec(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode).toChord();return new Lf(t,Us)}},"StandaloneKeybindingService");Nf=td([_i(0,De),_i(1,hn),_i(2,Tr),_i(3,gn),_i(4,Ao),_i(5,dt)],Nf);class a6 extends U{constructor(e,t){super(),this.domNode=e,this._register(t)}}u(a6,"DomNodeListeners");function tF(o){return o&&typeof o=="object"&&(!o.overrideIdentifier||typeof o.overrideIdentifier=="string")&&(!o.resource||o.resource instanceof be)}u(tF,"isConfigurationOverrides");class iN{constructor(){this._onDidChangeConfiguration=new R,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configuration=new q_(new n6,new Wi,new Wi,new Wi)}getValue(e,t){const n=typeof e=="string"?e:void 0,i=tF(e)?e:tF(t)?t:{};return this._configuration.getValue(n,i,void 0)}updateValues(e){const t={data:this._configuration.toData()},n=[];for(const i of e){const[s,r]=i;this.getValue(s)!==r&&(this._configuration.updateValue(s,r),n.push(s))}if(n.length>0){const i=new a8({keys:n,overrides:[]},t,this._configuration);i.source=8,i.sourceConfig=null,this._onDidChangeConfiguration.fire(i)}return Promise.resolve()}updateValue(e,t,n,i){return this.updateValues([[e,t]])}inspect(e,t={}){return this._configuration.inspect(e,t,void 0)}}u(iN,"StandaloneConfigurationService");let jk=u(class{constructor(e){this.configurationService=e,this._onDidChangeConfiguration=new R,this.configurationService.onDidChangeConfiguration(t=>{this._onDidChangeConfiguration.fire({affectedKeys:t.affectedKeys,affectsConfiguration:(n,i)=>t.affectsConfiguration(i)})})}getValue(e,t,n){const s=(H.isIPosition(t)?t:null)?typeof n=="string"?n:void 0:typeof t=="string"?t:void 0;return typeof s>"u"?this.configurationService.getValue():this.configurationService.getValue(s)}},"StandaloneResourceConfigurationService");jk=td([_i(0,rt)],jk);let $k=u(class{constructor(e){this.configurationService=e}getEOL(e,t){const n=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return n&&typeof n=="string"&&n!=="auto"?n:hi||Xe?`
`:`\r
`}},"StandaloneResourcePropertiesService");$k=td([_i(0,rt)],$k);class l6{publicLog(e,t){return Promise.resolve(void 0)}publicLog2(e,t){return this.publicLog(e,t)}}u(l6,"StandaloneTelemetryService");class Pf{constructor(){const e=be.from({scheme:Pf.SCHEME,authority:"model",path:"/"});this.workspace={id:"4064f6ec-cb38-4ad0-af64-ee6467e63c82",folders:[new d8({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}getWorkspaceFolder(e){return e&&e.scheme===Pf.SCHEME?this.workspace.folders[0]:null}}u(Pf,"StandaloneWorkspaceContextService");Pf.SCHEME="inmemory";function Z1(o,e,t){if(!e||!(o instanceof iN))return;const n=[];Object.keys(e).forEach(i=>{Yte(i)&&n.push([`editor.${i}`,e[i]]),t&&Xte(i)&&n.push([`diffEditor.${i}`,e[i]])}),n.length>0&&o.updateValues(n)}u(Z1,"updateConfigurationService");let qk=u(class{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}apply(e,t){return i6(this,void 0,void 0,function*(){const n=new Map;for(const r of e){if(!(r instanceof _c))throw new Error("bad edit - only text edits are supported");const a=this._modelService.getModel(r.resource);if(!a)throw new Error("bad edit - model not found");if(typeof r.versionId=="number"&&a.getVersionId()!==r.versionId)throw new Error("bad state - model changed in the meantime");let l=n.get(a);l||(l=[],n.set(a,l)),l.push(Ot.replaceMove(L.lift(r.textEdit.range),r.textEdit.text))}let i=0,s=0;for(const[r,a]of n)r.pushStackElement(),r.pushEditOperations([],a,()=>[]),r.pushStackElement(),s+=1,i+=a.length;return{ariaSummary:$s(ek.bulkEditServiceSummary,i,s)}})}},"StandaloneBulkEditService");qk=td([_i(0,Kt)],qk);class c6{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}getUriBasenameLabel(e){return ro(e)}}u(c6,"StandaloneUriLabelService");let Yk=u(class extends tk{constructor(e,t){super(e),this._codeEditorService=t}showContextView(e,t,n){if(!t){const i=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();i&&(t=i.getContainerDomNode())}return super.showContextView(e,t,n)}},"StandaloneContextViewService");Yk=td([_i(0,up),_i(1,dt)],Yk);class d6{constructor(){this._neverEmitter=new R,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}}u(d6,"StandaloneWorkspaceTrustManagementService");class u6 extends Mf{constructor(){super()}}u(u6,"StandaloneLanguageService");class h6 extends nV{constructor(){super(new tV)}}u(h6,"StandaloneLogService");let Xk=u(class extends ok{constructor(e,t,n,i,s){super(e,t,n,i,s),this.configure({blockMouse:!1})}},"StandaloneContextMenuService");Xk=td([_i(0,Tr),_i(1,gn),_i(2,fh),_i(3,Cn),_i(4,wt)],Xk);nt(rt,iN);nt(rA,jk);nt(J5,$k);nt(Vb,Pf);nt(xf,c6);nt(Tr,l6);nt(j_,r6);nt(gn,sv);nt(ha,Oa);nt(Gt,u6);nt(Ps,KB);nt(Ao,h6);nt(Kt,G1);nt(gA,dk);nt(De,Wk);nt(K9,o6);nt(Qc,iv);nt(No,jB);nt(co,Bx);nt($_,qk);nt(u8,d6);nt(Ji,zk);nt(Dl,Rk);nt(fo,Lk);nt(hn,Kk);nt(Cn,Nf);nt(Pl,Nk);nt(fh,Yk);nt(uo,ck);nt(Nl,Vk);nt(Il,Xk);nt(ah,Fk);var Le;(function(o){const e=new z_;for(const[r,a]of O2())e.set(r,a);const t=new sS(e,!0);e.set(Ne,t);function n(r){const a=e.get(r);if(!a)throw new Error("Missing service "+r);return a instanceof Ko?t.invokeFunction(l=>l.get(r)):a}u(n,"get"),o.get=n;let i=!1;function s(r){if(i)return t;i=!0;for(const[a,l]of O2())e.get(a)||e.set(a,l);for(const a in r)if(r.hasOwnProperty(a)){const l=Je(a);e.get(l)instanceof Ko&&e.set(l,r[a])}return t}u(s,"initialize"),o.initialize=s})(Le||(Le={}));var sN=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Nt=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let gse=0,nF=!1;function fse(o){if(!o){if(nF)return;nF=!0}VX(o||document.body)}u(fse,"createAriaDomNode");let J1=u(class extends wf{constructor(e,t,n,i,s,r,a,l,c,d,h,g){const f=Object.assign({},t);f.ariaLabel=f.ariaLabel||F1.editorViewAccessibleLabel,f.ariaLabel=f.ariaLabel+";"+F1.accessibilityHelpMessage,super(e,f,{},n,i,s,r,l,c,d,h,g),a instanceof Nf?this._standaloneKeybindingService=a:this._standaloneKeybindingService=null,fse(f.ariaContainerElement)}addCommand(e,t,n){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;const i="DYNAMIC_"+ ++gse,s=oe.deserialize(n);return this._standaloneKeybindingService.addDynamicKeybinding(i,e,t,s),i}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),U.None;const t=e.id,n=e.label,i=oe.and(oe.equals("editorId",this.getId()),oe.deserialize(e.precondition)),s=e.keybindings,r=oe.and(i,oe.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,c=u((f,...p)=>Promise.resolve(e.run(this,...p)),"run"),d=new J,h=this.getId()+":"+t;if(d.add(Qe.registerCommand(h,c)),a){const f={command:{id:h,title:n},when:i,group:a,order:l};d.add(Qs.appendMenuItem(P.EditorContext,f))}if(Array.isArray(s))for(const f of s)d.add(this._standaloneKeybindingService.addDynamicKeybinding(h,f,c,r));const g=new KA(h,n,n,i,c,this._contextKeyService);return this._actions[t]=g,d.add(He(()=>{delete this._actions[t]})),d}_triggerCommand(e,t){if(this._codeEditorService instanceof D1)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}},"StandaloneCodeEditor");J1=sN([Nt(2,Ne),Nt(3,dt),Nt(4,hn),Nt(5,De),Nt(6,Cn),Nt(7,wt),Nt(8,gn),Nt(9,Dl),Nt(10,rn),Nt(11,ue)],J1);let Zk=u(class extends J1{constructor(e,t,n,i,s,r,a,l,c,d,h,g,f,p,_){const v=Object.assign({},t);Z1(d,v,!1);const C=l.registerEditorContainer(e);typeof v.theme=="string"&&l.setTheme(v.theme),typeof v.autoDetectHighContrast<"u"&&l.setAutoDetectHighContrast(Boolean(v.autoDetectHighContrast));const w=v.model;delete v.model,super(e,v,n,i,s,r,a,l,c,h,p,_),this._configurationService=d,this._standaloneThemeService=l,this._register(C);let y;if(typeof w>"u"){const S=f.getLanguageIdByMimeType(v.language)||v.language||Js;y=g6(g,f,v.value||"",S,void 0),this._ownsModel=!0}else y=w,this._ownsModel=!1;if(this._attachModel(y),y){const S={oldModelUrl:null,newModelUrl:y.uri};this._onDidChangeModel.fire(S)}}dispose(){super.dispose()}updateOptions(e){Z1(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(Boolean(e.autoDetectHighContrast)),super.updateOptions(e)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}},"StandaloneEditor");Zk=sN([Nt(2,Ne),Nt(3,dt),Nt(4,hn),Nt(5,De),Nt(6,Cn),Nt(7,Ps),Nt(8,gn),Nt(9,rt),Nt(10,Dl),Nt(11,Kt),Nt(12,Gt),Nt(13,rn),Nt(14,ue)],Zk);let Jk=u(class extends Fc{constructor(e,t,n,i,s,r,a,l,c,d,h,g){const f=Object.assign({},t);Z1(c,f,!0);const p=a.registerEditorContainer(e);typeof f.theme=="string"&&a.setTheme(f.theme),typeof f.autoDetectHighContrast<"u"&&a.setAutoDetectHighContrast(Boolean(f.autoDetectHighContrast)),super(e,f,{},g,s,i,n,r,a,l,d,h),this._configurationService=c,this._standaloneThemeService=a,this._register(p)}dispose(){super.dispose()}updateOptions(e){Z1(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(Boolean(e.autoDetectHighContrast)),super.updateOptions(e)}_createInnerEditor(e,t,n){return e.createInstance(J1,t,n)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,n){return this.getModifiedEditor().addCommand(e,t,n)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}},"StandaloneDiffEditor");Jk=sN([Nt(2,Ne),Nt(3,De),Nt(4,co),Nt(5,dt),Nt(6,Ps),Nt(7,gn),Nt(8,rt),Nt(9,Il),Nt(10,Qc),Nt(11,Nl)],Jk);function g6(o,e,t,n,i){if(t=t||"",!n){const s=t.indexOf(`
`);let r=t;return s!==-1&&(r=t.substring(0,s)),iF(o,t,e.createByFilepathOrFirstLine(i||null,r),i)}return iF(o,t,e.createById(n),i)}u(g6,"createTextModel");function iF(o,e,t,n){return o.createModel(e,t,n)}u(iF,"doCreateModel");function pse(o,e,t){return Le.initialize(t||{}).createInstance(Zk,o,e)}u(pse,"create");function mse(o){return Le.get(dt).onCodeEditorAdd(t=>{o(t)})}u(mse,"onDidCreateEditor");function bse(o){return Le.get(dt).onDiffEditorAdd(t=>{o(t)})}u(bse,"onDidCreateDiffEditor");function _se(){return Le.get(dt).listCodeEditors()}u(_se,"getEditors");function vse(){return Le.get(dt).listDiffEditors()}u(vse,"getDiffEditors");function Cse(o,e,t){return Le.initialize(t||{}).createInstance(Jk,o,e)}u(Cse,"createDiffEditor");function wse(o,e){return new X4(o,e)}u(wse,"createDiffNavigator");function yse(o){if(typeof o.id!="string"||typeof o.run!="function")throw new Error("Invalid command descriptor, `id` and `run` are required properties!");return Qe.registerCommand(o.id,o.run)}u(yse,"addCommand");function Sse(o){if(typeof o.id!="string"||typeof o.label!="string"||typeof o.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");const e=oe.deserialize(o.precondition),t=u((i,...s)=>Ln.runEditorCommand(i,s,e,(r,a,l)=>Promise.resolve(o.run(a,...l))),"run"),n=new J;if(n.add(Qe.registerCommand(o.id,t)),o.contextMenuGroupId){const i={command:{id:o.id,title:o.label},when:e,group:o.contextMenuGroupId,order:o.contextMenuOrder||0};n.add(Qs.appendMenuItem(P.EditorContext,i))}if(Array.isArray(o.keybindings)){const i=Le.get(Cn);if(!(i instanceof Nf))console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService");else{const s=oe.and(e,oe.deserialize(o.keybindingContext));n.add(i.addDynamicKeybindings(o.keybindings.map(r=>({keybinding:r,command:o.id,when:s}))))}}return n}u(Sse,"addEditorAction");function Tse(o){return f6([o])}u(Tse,"addKeybindingRule");function f6(o){const e=Le.get(Cn);return e instanceof Nf?e.addDynamicKeybindings(o.map(t=>({keybinding:t.keybinding,command:t.command,commandArgs:t.commandArgs,when:oe.deserialize(t.when)}))):(console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),U.None)}u(f6,"addKeybindingRules");function Lse(o,e,t){const n=Le.get(Gt),i=n.getLanguageIdByMimeType(e)||e;return g6(Le.get(Kt),n,o,i,t)}u(Lse,"createModel");function xse(o,e){const t=Le.get(Gt);Le.get(Kt).setMode(o,t.createById(e))}u(xse,"setModelLanguage");function Ese(o,e,t){o&&Le.get(ha).changeOne(e,o.uri,t)}u(Ese,"setModelMarkers");function kse(o){Le.get(ha).changeAll(o,[])}u(kse,"removeAllMarkers");function Mse(o){return Le.get(ha).read(o)}u(Mse,"getModelMarkers");function Dse(o){return Le.get(ha).onMarkerChanged(o)}u(Dse,"onDidChangeMarkers");function Ase(o){return Le.get(Kt).getModel(o)}u(Ase,"getModel");function Ise(){return Le.get(Kt).getModels()}u(Ise,"getModels");function Nse(o){return Le.get(Kt).onModelAdded(o)}u(Nse,"onDidCreateModel");function Pse(o){return Le.get(Kt).onModelRemoved(o)}u(Pse,"onWillDisposeModel");function Rse(o){return Le.get(Kt).onModelLanguageChanged(t=>{o({model:t.model,oldLanguage:t.oldLanguageId})})}u(Rse,"onDidChangeModelLanguage");function Fse(o){return MY(Le.get(Kt),Le.get(rn),o)}u(Fse,"createWebWorker");function Ose(o,e){const t=Le.get(Gt),n=Le.get(Ps);return n.registerEditorContainer(o),qw.colorizeElement(n,t,o,e)}u(Ose,"colorizeElement");function Vse(o,e,t){const n=Le.get(Gt);return Le.get(Ps).registerEditorContainer(document.body),qw.colorize(n,o,e,t)}u(Vse,"colorize");function Hse(o,e,t=4){return Le.get(Ps).registerEditorContainer(document.body),qw.colorizeModelLine(o,e,t)}u(Hse,"colorizeModelLine");function Bse(o){const e=Wt.get(o);return e||{getInitialState:()=>Qg,tokenize:(t,n,i)=>eA(o,i)}}u(Bse,"getSafeTokenizationSupport$1");function Wse(o,e){Wt.getOrCreate(e);const t=Bse(e),n=sa(o),i=[];let s=t.getInitialState();for(let r=0,a=n.length;r<a;r++){const l=n[r],c=t.tokenize(l,!0,s);i[r]=c.tokens,s=c.endState}return i}u(Wse,"tokenize");function Use(o,e){Le.get(Ps).defineTheme(o,e)}u(Use,"defineTheme");function Gse(o){Le.get(Ps).setTheme(o)}u(Gse,"setTheme");function zse(){yx.clearAllFontInfos()}u(zse,"remeasureFonts");function Kse(o,e){return Qe.registerCommand({id:o,handler:e})}u(Kse,"registerCommand$1");function jse(){return{create:pse,getEditors:_se,getDiffEditors:vse,onDidCreateEditor:mse,onDidCreateDiffEditor:bse,createDiffEditor:Cse,createDiffNavigator:wse,addCommand:yse,addEditorAction:Sse,addKeybindingRule:Tse,addKeybindingRules:f6,createModel:Lse,setModelLanguage:xse,setModelMarkers:Ese,getModelMarkers:Mse,removeAllMarkers:kse,onDidChangeMarkers:Dse,getModels:Ise,getModel:Ase,onDidCreateModel:Nse,onWillDisposeModel:Pse,onDidChangeModelLanguage:Rse,createWebWorker:Fse,colorizeElement:Ose,colorize:Vse,colorizeModelLine:Hse,tokenize:Wse,defineTheme:Use,setTheme:Gse,remeasureFonts:zse,registerCommand:Kse,AccessibilitySupport:RL,ContentWidgetPositionPreference:BL,CursorChangeReason:WL,DefaultEndOfLine:UL,EditorAutoIndentStrategy:zL,EditorOption:KL,EndOfLinePreference:jL,EndOfLineSequence:$L,MinimapPosition:tx,MouseTargetType:nx,OverlayWidgetPositionPreference:ix,OverviewRulerLane:sx,RenderLineNumbersType:rx,RenderMinimap:ax,ScrollbarVisibility:cx,ScrollType:lx,TextEditorCursorBlinkingStyle:fx,TextEditorCursorStyle:px,TrackedRangeStickiness:mx,WrappingIndent:bx,InjectedTextCursorStops:YL,PositionAffinity:ox,ConfigurationChangedEvent:ND,BareFontInfo:gc,FontInfo:e1,TextModelResolvedOptions:Pm,FindMatch:Xg,ApplyUpdateResult:wg,EditorType:C_,EditorOptions:Sr}}u(jse,"createMonacoEditorAPI");function $se(o,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!o(t))return!1;return!0}u($se,"isArrayOf");function CC(o,e){return typeof o=="boolean"?o:e}u(CC,"bool");function sF(o,e){return typeof o=="string"?o:e}u(sF,"string");function qse(o){const e={};for(const t of o)e[t]=!0;return e}u(qse,"arrayToHash");function oF(o,e=!1){e&&(o=o.map(function(n){return n.toLowerCase()}));const t=qse(o);return e?function(n){return t[n.toLowerCase()]!==void 0&&t.hasOwnProperty(n.toLowerCase())}:function(n){return t[n]!==void 0&&t.hasOwnProperty(n)}}u(oF,"createKeywordMatcher");function Qk(o,e){e=e.replace(/@@/g,"");let t=0,n;do n=!1,e=e.replace(/@(\w+)/g,function(s,r){n=!0;let a="";if(typeof o[r]=="string")a=o[r];else if(o[r]&&o[r]instanceof RegExp)a=o[r].source;else throw o[r]===void 0?xt(o,"language definition does not contain attribute '"+r+"', used at: "+e):xt(o,"attribute reference '"+r+"' must be a string, used at: "+e);return Xh(a)?"":"(?:"+a+")"}),t++;while(n&&t<5);e=e.replace(/\x01/g,"@");const i=(o.ignoreCase?"i":"")+(o.unicode?"u":"");return new RegExp(e,i)}u(Qk,"compileRegExp");function Yse(o,e,t,n){if(n<0)return o;if(n<e.length)return e[n];if(n>=100){n=n-100;const i=t.split(".");if(i.unshift(t),n<i.length)return i[n]}return null}u(Yse,"selectScrutinee");function Xse(o,e,t,n){let i=-1,s=t,r=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);r&&(r[3]&&(i=parseInt(r[3]),r[2]&&(i=i+100)),s=r[4]);let a="~",l=s;!s||s.length===0?(a="!=",l=""):/^\w*$/.test(l)?a="==":(r=s.match(/^(@|!@|~|!~|==|!=)(.*)$/),r&&(a=r[1],l=r[2]));let c;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(l)){const d=oF(l.split("|"),o.ignoreCase);c=u(function(h){return a==="~"?d(h):!d(h)},"tester")}else if(a==="@"||a==="!@"){const d=o[l];if(!d)throw xt(o,"the @ match target '"+l+"' is not defined, in rule: "+e);if(!$se(function(g){return typeof g=="string"},d))throw xt(o,"the @ match target '"+l+"' must be an array of strings, in rule: "+e);const h=oF(d,o.ignoreCase);c=u(function(g){return a==="@"?h(g):!h(g)},"tester")}else if(a==="~"||a==="!~")if(l.indexOf("$")<0){const d=Qk(o,"^"+l+"$");c=u(function(h){return a==="~"?d.test(h):!d.test(h)},"tester")}else c=u(function(d,h,g,f){return Qk(o,"^"+Ql(o,l,h,g,f)+"$").test(d)},"tester");else if(l.indexOf("$")<0){const d=fc(o,l);c=u(function(h){return a==="=="?h===d:h!==d},"tester")}else{const d=fc(o,l);c=u(function(h,g,f,p,_){const v=Ql(o,d,g,f,p);return a==="=="?h===v:h!==v},"tester")}return i===-1?{name:t,value:n,test:function(d,h,g,f){return c(d,d,h,g,f)}}:{name:t,value:n,test:function(d,h,g,f){const p=Yse(d,h,g,i);return c(p||"",d,h,g,f)}}}u(Xse,"createGuard");function eM(o,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw xt(o,"a 'token' attribute must be of type string, in rule: "+e);{const n={token:t.token};if(t.token.indexOf("$")>=0&&(n.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")n.bracket=1;else if(t.bracket==="@close")n.bracket=-1;else throw xt(o,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw xt(o,"the next state must be a string value in rule: "+e);{let i=t.next;if(!/^(@pop|@push|@popall)$/.test(i)&&(i[0]==="@"&&(i=i.substr(1)),i.indexOf("$")<0&&!WY(o,Ql(o,i,"",[],""))))throw xt(o,"the next state '"+t.next+"' is not defined in rule: "+e);n.next=i}}return typeof t.goBack=="number"&&(n.goBack=t.goBack),typeof t.switchTo=="string"&&(n.switchTo=t.switchTo),typeof t.log=="string"&&(n.log=t.log),typeof t.nextEmbedded=="string"&&(n.nextEmbedded=t.nextEmbedded,o.usesEmbedded=!0),n}}else if(Array.isArray(t)){const n=[];for(let i=0,s=t.length;i<s;i++)n[i]=eM(o,e,t[i]);return{group:n}}else if(t.cases){const n=[];for(const s in t.cases)if(t.cases.hasOwnProperty(s)){const r=eM(o,e,t.cases[s]);s==="@default"||s==="@"||s===""?n.push({test:void 0,value:r,name:s}):s==="@eos"?n.push({test:function(a,l,c,d){return d},value:r,name:s}):n.push(Xse(o,e,s,r))}const i=o.defaultToken;return{test:function(s,r,a,l){for(const c of n)if(!c.test||c.test(s,r,a,l))return c.value;return i}}}else throw xt(o,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}u(eM,"compileAction");class p6{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let n;if(typeof t=="string")n=t;else if(t instanceof RegExp)n=t.source;else throw xt(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=n.length>0&&n[0]==="^",this.name=this.name+": "+n,this.regex=Qk(e,"^(?:"+(this.matchOnlyAtLineStart?n.substr(1):n)+")")}setAction(e,t){this.action=eM(e,this.name,t)}}u(p6,"Rule");function m6(o,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");const t={};t.languageId=o,t.includeLF=CC(e.includeLF,!1),t.noThrow=!1,t.maxStack=100,t.start=typeof e.start=="string"?e.start:null,t.ignoreCase=CC(e.ignoreCase,!1),t.unicode=CC(e.unicode,!1),t.tokenPostfix=sF(e.tokenPostfix,"."+t.languageId),t.defaultToken=sF(e.defaultToken,"source"),t.usesEmbedded=!1;const n=e;n.languageId=o,n.includeLF=t.includeLF,n.ignoreCase=t.ignoreCase,n.unicode=t.unicode,n.noThrow=t.noThrow,n.usesEmbedded=t.usesEmbedded,n.stateNames=e.tokenizer,n.defaultToken=t.defaultToken;function i(r,a,l){for(const c of l){let d=c.include;if(d){if(typeof d!="string")throw xt(t,"an 'include' attribute must be a string at: "+r);if(d[0]==="@"&&(d=d.substr(1)),!e.tokenizer[d])throw xt(t,"include target '"+d+"' is not defined at: "+r);i(r+"."+d,a,e.tokenizer[d])}else{const h=new p6(r);if(Array.isArray(c)&&c.length>=1&&c.length<=3)if(h.setRegex(n,c[0]),c.length>=3)if(typeof c[1]=="string")h.setAction(n,{token:c[1],next:c[2]});else if(typeof c[1]=="object"){const g=c[1];g.next=c[2],h.setAction(n,g)}else throw xt(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+r);else h.setAction(n,c[1]);else{if(!c.regex)throw xt(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+r);c.name&&typeof c.name=="string"&&(h.name=c.name),c.matchOnlyAtStart&&(h.matchOnlyAtLineStart=CC(c.matchOnlyAtLineStart,!1)),h.setRegex(n,c.regex),h.setAction(n,c.action)}a.push(h)}}}if(u(i,"addRules"),!e.tokenizer||typeof e.tokenizer!="object")throw xt(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(const r in e.tokenizer)if(e.tokenizer.hasOwnProperty(r)){t.start||(t.start=r);const a=e.tokenizer[r];t.tokenizer[r]=new Array,i("tokenizer."+r,t.tokenizer[r],a)}if(t.usesEmbedded=n.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw xt(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];const s=[];for(const r of e.brackets){let a=r;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw xt(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")s.push({token:a.token+t.tokenPostfix,open:fc(t,a.open),close:fc(t,a.close)});else throw xt(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=s,t.noThrow=!0,t}u(m6,"compile");var Zse=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};function Jse(o){Zg.registerLanguage(o)}u(Jse,"register");function Qse(){let o=[];return o=o.concat(Zg.getLanguages()),o}u(Qse,"getLanguages");function eoe(o){return Le.get(Gt).languageIdCodec.encodeLanguageId(o)}u(eoe,"getEncodedLanguageId");function toe(o,e){const n=Le.get(Gt).onDidEncounterLanguage(i=>{i===o&&(n.dispose(),e())});return n}u(toe,"onLanguage");function noe(o,e){if(!Le.get(Gt).isRegisteredLanguageId(o))throw new Error(`Cannot set configuration for unknown language ${o}`);return Le.get(rn).register(o,e,100)}u(noe,"setLanguageConfiguration");class b6{constructor(e,t){this._languageId=e,this._actual=t}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,n){if(typeof this._actual.tokenize=="function")return Rf.adaptTokenize(this._languageId,this._actual,e,n);throw new Error("Not supported!")}tokenizeEncoded(e,t,n){const i=this._actual.tokenizeEncoded(e,n);return new b_(i.tokens,i.endState)}}u(b6,"EncodedTokenizationSupportAdapter");class Rf{constructor(e,t,n,i){this._languageId=e,this._actual=t,this._languageService=n,this._standaloneThemeService=i}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t){const n=[];let i=0;for(let s=0,r=e.length;s<r;s++){const a=e[s];let l=a.startIndex;s===0?l=0:l<i&&(l=i),n[s]=new eb(l,a.scopes,t),i=l}return n}static adaptTokenize(e,t,n,i){const s=t.tokenize(n,i),r=Rf._toClassicTokens(s.tokens,e);let a;return s.endState.equals(i)?a=i:a=s.endState,new Aw(r,a)}tokenize(e,t,n){return Rf.adaptTokenize(this._languageId,this._actual,e,n)}_toBinaryTokens(e,t){const n=e.encodeLanguageId(this._languageId),i=this._standaloneThemeService.getColorTheme().tokenTheme,s=[];let r=0,a=0;for(let c=0,d=t.length;c<d;c++){const h=t[c],g=i.match(n,h.scopes);if(r>0&&s[r-1]===g)continue;let f=h.startIndex;c===0?f=0:f<a&&(f=a),s[r++]=f,s[r++]=g,a=f}const l=new Uint32Array(r);for(let c=0;c<r;c++)l[c]=s[c];return l}tokenizeEncoded(e,t,n){const i=this._actual.tokenize(e,n),s=this._toBinaryTokens(this._languageService.languageIdCodec,i.tokens);let r;return i.endState.equals(n)?r=n:r=i.endState,new b_(s,r)}}u(Rf,"TokenizationSupportAdapter");function ioe(o){return typeof o.getInitialState=="function"}u(ioe,"isATokensProvider");function soe(o){return"tokenizeEncoded"in o}u(soe,"isEncodedTokensProvider");function _6(o){return o&&typeof o.then=="function"}u(_6,"isThenable");function ooe(o){const e=Le.get(Ps);if(o){const t=[null];for(let n=1,i=o.length;n<i;n++)t[n]=B.fromHex(o[n]);e.setColorMapOverride(t)}else e.setColorMapOverride(null)}u(ooe,"setColorMap");function v6(o,e){return soe(e)?new b6(o,e):new Rf(o,e,Le.get(Gt),Le.get(Ps))}u(v6,"createTokenizationSupportAdapter");function oN(o,e){const t={createTokenizationSupport:()=>Zse(this,void 0,void 0,function*(){const n=yield Promise.resolve(e.create());return n?ioe(n)?v6(o,n):new hb(Le.get(Gt),Le.get(Ps),o,m6(o,n),Le.get(rt)):null})};return Wt.registerFactory(o,t)}u(oN,"registerTokensProviderFactory");function roe(o,e){if(!Le.get(Gt).isRegisteredLanguageId(o))throw new Error(`Cannot set tokens provider for unknown language ${o}`);return _6(e)?oN(o,{create:()=>e}):Wt.register(o,v6(o,e))}u(roe,"setTokensProvider");function aoe(o,e){const t=u(n=>new hb(Le.get(Gt),Le.get(Ps),o,m6(o,n),Le.get(rt)),"create");return _6(e)?oN(o,{create:()=>e}):Wt.register(o,t(e))}u(aoe,"setMonarchTokensProvider");function loe(o,e){return Le.get(ue).referenceProvider.register(o,e)}u(loe,"registerReferenceProvider");function coe(o,e){return Le.get(ue).renameProvider.register(o,e)}u(coe,"registerRenameProvider");function doe(o,e){return Le.get(ue).signatureHelpProvider.register(o,e)}u(doe,"registerSignatureHelpProvider");function uoe(o,e){return Le.get(ue).hoverProvider.register(o,{provideHover:(n,i,s)=>{const r=n.getWordAtPosition(i);return Promise.resolve(e.provideHover(n,i,s)).then(a=>{if(a)return!a.range&&r&&(a.range=new L(i.lineNumber,r.startColumn,i.lineNumber,r.endColumn)),a.range||(a.range=new L(i.lineNumber,i.column,i.lineNumber,i.column)),a})}})}u(uoe,"registerHoverProvider");function hoe(o,e){return Le.get(ue).documentSymbolProvider.register(o,e)}u(hoe,"registerDocumentSymbolProvider");function goe(o,e){return Le.get(ue).documentHighlightProvider.register(o,e)}u(goe,"registerDocumentHighlightProvider");function foe(o,e){return Le.get(ue).linkedEditingRangeProvider.register(o,e)}u(foe,"registerLinkedEditingRangeProvider");function poe(o,e){return Le.get(ue).definitionProvider.register(o,e)}u(poe,"registerDefinitionProvider");function moe(o,e){return Le.get(ue).implementationProvider.register(o,e)}u(moe,"registerImplementationProvider");function boe(o,e){return Le.get(ue).typeDefinitionProvider.register(o,e)}u(boe,"registerTypeDefinitionProvider");function _oe(o,e){return Le.get(ue).codeLensProvider.register(o,e)}u(_oe,"registerCodeLensProvider");function voe(o,e,t){return Le.get(ue).codeActionProvider.register(o,{providedCodeActionKinds:t?.providedCodeActionKinds,documentation:t?.documentation,provideCodeActions:(i,s,r,a)=>{const c=Le.get(ha).read({resource:i.uri}).filter(d=>L.areIntersectingOrTouching(d,s));return e.provideCodeActions(i,s,{markers:c,only:r.only,trigger:r.trigger},a)},resolveCodeAction:e.resolveCodeAction})}u(voe,"registerCodeActionProvider");function Coe(o,e){return Le.get(ue).documentFormattingEditProvider.register(o,e)}u(Coe,"registerDocumentFormattingEditProvider");function woe(o,e){return Le.get(ue).documentRangeFormattingEditProvider.register(o,e)}u(woe,"registerDocumentRangeFormattingEditProvider");function yoe(o,e){return Le.get(ue).onTypeFormattingEditProvider.register(o,e)}u(yoe,"registerOnTypeFormattingEditProvider");function Soe(o,e){return Le.get(ue).linkProvider.register(o,e)}u(Soe,"registerLinkProvider");function Toe(o,e){return Le.get(ue).completionProvider.register(o,e)}u(Toe,"registerCompletionItemProvider");function Loe(o,e){return Le.get(ue).colorProvider.register(o,e)}u(Loe,"registerColorProvider");function xoe(o,e){return Le.get(ue).foldingRangeProvider.register(o,e)}u(xoe,"registerFoldingRangeProvider");function Eoe(o,e){return Le.get(ue).declarationProvider.register(o,e)}u(Eoe,"registerDeclarationProvider");function koe(o,e){return Le.get(ue).selectionRangeProvider.register(o,e)}u(koe,"registerSelectionRangeProvider");function Moe(o,e){return Le.get(ue).documentSemanticTokensProvider.register(o,e)}u(Moe,"registerDocumentSemanticTokensProvider");function Doe(o,e){return Le.get(ue).documentRangeSemanticTokensProvider.register(o,e)}u(Doe,"registerDocumentRangeSemanticTokensProvider");function Aoe(o,e){return Le.get(ue).inlineCompletionsProvider.register(o,e)}u(Aoe,"registerInlineCompletionsProvider");function Ioe(o,e){return Le.get(ue).inlayHintsProvider.register(o,e)}u(Ioe,"registerInlayHintsProvider");function Noe(){return{register:Jse,getLanguages:Qse,onLanguage:toe,getEncodedLanguageId:eoe,setLanguageConfiguration:noe,setColorMap:ooe,registerTokensProviderFactory:oN,setTokensProvider:roe,setMonarchTokensProvider:aoe,registerReferenceProvider:loe,registerRenameProvider:coe,registerCompletionItemProvider:Toe,registerSignatureHelpProvider:doe,registerHoverProvider:uoe,registerDocumentSymbolProvider:hoe,registerDocumentHighlightProvider:goe,registerLinkedEditingRangeProvider:foe,registerDefinitionProvider:poe,registerImplementationProvider:moe,registerTypeDefinitionProvider:boe,registerCodeLensProvider:_oe,registerCodeActionProvider:voe,registerDocumentFormattingEditProvider:Coe,registerDocumentRangeFormattingEditProvider:woe,registerOnTypeFormattingEditProvider:yoe,registerLinkProvider:Soe,registerColorProvider:Loe,registerFoldingRangeProvider:xoe,registerDeclarationProvider:Eoe,registerSelectionRangeProvider:koe,registerDocumentSemanticTokensProvider:Moe,registerDocumentRangeSemanticTokensProvider:Doe,registerInlineCompletionsProvider:Aoe,registerInlayHintsProvider:Ioe,DocumentHighlightKind:GL,CompletionItemKind:OL,CompletionItemTag:VL,CompletionItemInsertTextRule:Z0,SymbolKind:hx,SymbolTag:gx,IndentAction:qL,CompletionTriggerKind:HL,SignatureHelpTriggerKind:ux,InlayHintKind:XL,InlineCompletionTriggerKind:ZL,CodeActionTriggerType:FL,FoldingRangeKind:Mo}}u(Noe,"createMonacoLanguagesAPI");const rN=Je("IEditorCancelService"),C6=new ce("cancellableOperation",!1,m("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));nt(rN,class{constructor(){this._tokens=new WeakMap}add(o,e){let t=this._tokens.get(o);t||(t=o.invokeWithinContext(i=>{const s=C6.bindTo(i.get(De)),r=new vi;return{key:s,tokens:r}}),this._tokens.set(o,t));let n;return t.key.set(!0),n=t.tokens.push(e),()=>{n&&(n(),t.key.set(!t.tokens.isEmpty()),n=void 0)}}cancel(o){const e=this._tokens.get(o);if(!e)return;const t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},!0);class w6 extends ti{constructor(e,t){super(t),this.editor=e,this._unregister=e.invokeWithinContext(n=>n.get(rN).add(e,this))}dispose(){this._unregister(),super.dispose()}}u(w6,"EditorKeybindingCancellationTokenSource");te(new class extends Ln{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:C6})}runEditorCommand(o,e){o.get(rN).cancel(e)}});let Q1=u(class{constructor(e,t){if(this.flags=t,this.flags&1){const n=e.getModel();this.modelVersionId=n?$s("{0}#{1}",n.uri.toString(),n.getVersionId()):null}else this.modelVersionId=null;this.flags&4?this.position=e.getPosition():this.position=null,this.flags&2?this.selection=e.getSelection():this.selection=null,this.flags&8?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(e){if(!(e instanceof Q1))return!1;const t=e;return!(this.modelVersionId!==t.modelVersionId||this.scrollLeft!==t.scrollLeft||this.scrollTop!==t.scrollTop||!this.position&&t.position||this.position&&!t.position||this.position&&t.position&&!this.position.equals(t.position)||!this.selection&&t.selection||this.selection&&!t.selection||this.selection&&t.selection&&!this.selection.equalsRange(t.selection))}validate(e){return this._equals(new Q1(e,this.flags))}},"EditorState");class Hc extends w6{constructor(e,t,n,i){super(e,i),this._listener=new J,t&4&&this._listener.add(e.onDidChangeCursorPosition(s=>{(!n||!L.containsPosition(n,s.position))&&this.cancel()})),t&2&&this._listener.add(e.onDidChangeCursorSelection(s=>{(!n||!L.containsRange(n,s.selection))&&this.cancel()})),t&8&&this._listener.add(e.onDidScrollChange(s=>this.cancel())),t&1&&(this._listener.add(e.onDidChangeModel(s=>this.cancel())),this._listener.add(e.onDidChangeModelContent(s=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}}u(Hc,"EditorStateCancellationTokenSource");class oS extends ti{constructor(e,t){super(t),this._listener=e.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}}u(oS,"TextModelCancellationTokenSource");function yl(o){return o&&typeof o.getEditorType=="function"?o.getEditorType()===C_.ICodeEditor:!1}u(yl,"isCodeEditor");function y6(o){return o&&typeof o.getEditorType=="function"?o.getEditorType()===C_.IDiffEditor:!1}u(y6,"isDiffEditor");function S6(o){return yl(o)?o:y6(o)?o.getModifiedEditor():null}u(S6,"getCodeEditor");class Vu{static _handleEolEdits(e,t){let n;const i=[];for(const s of t)typeof s.eol=="number"&&(n=s.eol),s.range&&typeof s.text=="string"&&i.push(s);return typeof n=="number"&&e.hasModel()&&e.getModel().pushEOL(n),i}static _isFullModelReplaceEdit(e,t){if(!e.hasModel())return!1;const n=e.getModel(),i=n.validateRange(t.range);return n.getFullModelRange().equalsRange(i)}static execute(e,t,n){n&&e.pushUndoStop();const i=Vu._handleEolEdits(e,t);i.length===1&&Vu._isFullModelReplaceEdit(e,i[0])?e.executeEdits("formatEditsCommand",i.map(s=>Ot.replace(L.lift(s.range),s.text))):e.executeEdits("formatEditsCommand",i.map(s=>Ot.replaceMove(L.lift(s.range),s.text))),n&&e.pushUndoStop()}}u(Vu,"FormattingEdit");class C0{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}u(C0,"ExtensionIdentifier");var yr=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};function aN(o){if(o=o.filter(i=>i.range),!o.length)return;let{range:e}=o[0];for(let i=1;i<o.length;i++)e=L.plusRange(e,o[i].range);const{startLineNumber:t,endLineNumber:n}=e;t===n?o.length===1?Zn(m("hint11","Made 1 formatting edit on line {0}",t)):Zn(m("hintn1","Made {0} formatting edits on line {1}",o.length,t)):o.length===1?Zn(m("hint1n","Made 1 formatting edit between lines {0} and {1}",t,n)):Zn(m("hintnn","Made {0} formatting edits between lines {1} and {2}",o.length,t,n))}u(aN,"alertFormattingEdits");function T6(o,e,t){const n=[],i=new Set,s=o.ordered(t);for(const a of s)n.push(a),a.extensionId&&i.add(C0.toKey(a.extensionId));const r=e.ordered(t);for(const a of r){if(a.extensionId){if(i.has(C0.toKey(a.extensionId)))continue;i.add(C0.toKey(a.extensionId))}n.push({displayName:a.displayName,extensionId:a.extensionId,provideDocumentFormattingEdits(l,c,d){return a.provideDocumentRangeFormattingEdits(l,l.getFullModelRange(),c,d)}})}return n}u(T6,"getRealAndSyntheticDocumentFormattersOrdered");class Bc{static setFormatterSelector(e){return{dispose:Bc._selectors.unshift(e)}}static select(e,t,n){return yr(this,void 0,void 0,function*(){if(e.length===0)return;const i=je.first(Bc._selectors);if(i)return yield i(e,t,n)})}}u(Bc,"FormattingConflicts");Bc._selectors=new vi;function L6(o,e,t,n,i,s){return yr(this,void 0,void 0,function*(){const r=o.get(Ne),{documentRangeFormattingEditProvider:a}=o.get(ue),l=yl(e)?e.getModel():e,c=a.ordered(l),d=yield Bc.select(c,l,n);d&&(i.report(d),yield r.invokeFunction(Poe,d,e,t,s))})}u(L6,"formatDocumentRangesWithSelectedProvider");function Poe(o,e,t,n,i){return yr(this,void 0,void 0,function*(){const s=o.get(co);let r,a;yl(t)?(r=t.getModel(),a=new Hc(t,5,void 0,i)):(r=t,a=new oS(t,i));const l=[];let c=0;for(const p of AD(n).sort(L.compareRangesUsingStarts))c>0&&L.areIntersectingOrTouching(l[c-1],p)?l[c-1]=L.fromPositions(l[c-1].getStartPosition(),p.getEndPosition()):c=l.push(p);const d=u(p=>yr(this,void 0,void 0,function*(){return(yield e.provideDocumentRangeFormattingEdits(r,p,r.getFormattingOptions(),a.token))||[]}),"computeEdits"),h=u((p,_)=>{if(!p.length||!_.length)return!1;const v=p.reduce((C,w)=>L.plusRange(C,w.range),p[0].range);if(!_.some(C=>L.intersectRanges(v,C.range)))return!1;for(const C of p)for(const w of _)if(L.intersectRanges(C.range,w.range))return!0;return!1},"hasIntersectingEdit"),g=[],f=[];try{for(const p of l){if(a.token.isCancellationRequested)return!0;f.push(yield d(p))}for(let p=0;p<l.length;++p)for(let _=p+1;_<l.length;++_){if(a.token.isCancellationRequested)return!0;if(h(f[p],f[_])){const v=L.plusRange(l[p],l[_]),C=yield d(v);l.splice(_,1),l.splice(p,1),l.push(v),f.splice(_,1),f.splice(p,1),f.push(C),p=0,_=0}}for(const p of f){if(a.token.isCancellationRequested)return!0;const _=yield s.computeMoreMinimalEdits(r.uri,p);_&&g.push(..._)}}finally{a.dispose()}if(g.length===0)return!1;if(yl(t))Vu.execute(t,g,!0),aN(g),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1);else{const[{range:p}]=g,_=new re(p.startLineNumber,p.startColumn,p.endLineNumber,p.endColumn);r.pushEditOperations([_],g.map(v=>({text:v.text,range:L.lift(v.range),forceMoveMarkers:!0})),v=>{for(const{range:C}of v)if(L.areIntersectingOrTouching(C,_))return[new re(C.startLineNumber,C.startColumn,C.endLineNumber,C.endColumn)];return null})}return!0})}u(Poe,"formatDocumentRangesWithProvider");function Roe(o,e,t,n,i){return yr(this,void 0,void 0,function*(){const s=o.get(Ne),r=o.get(ue),a=yl(e)?e.getModel():e,l=T6(r.documentFormattingEditProvider,r.documentRangeFormattingEditProvider,a),c=yield Bc.select(l,a,t);c&&(n.report(c),yield s.invokeFunction(Foe,c,e,t,i))})}u(Roe,"formatDocumentWithSelectedProvider");function Foe(o,e,t,n,i){return yr(this,void 0,void 0,function*(){const s=o.get(co);let r,a;yl(t)?(r=t.getModel(),a=new Hc(t,5,void 0,i)):(r=t,a=new oS(t,i));let l;try{const c=yield e.provideDocumentFormattingEdits(r,r.getFormattingOptions(),a.token);if(l=yield s.computeMoreMinimalEdits(r.uri,c),a.token.isCancellationRequested)return!0}finally{a.dispose()}if(!l||l.length===0)return!1;if(yl(t))Vu.execute(t,l,n!==2),n!==2&&(aN(l),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1));else{const[{range:c}]=l,d=new re(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn);r.pushEditOperations([d],l.map(h=>({text:h.text,range:L.lift(h.range),forceMoveMarkers:!0})),h=>{for(const{range:g}of h)if(L.areIntersectingOrTouching(g,d))return[new re(g.startLineNumber,g.startColumn,g.endLineNumber,g.endColumn)];return null})}return!0})}u(Foe,"formatDocumentWithProvider");function Ooe(o,e,t,n,i,s){return yr(this,void 0,void 0,function*(){const r=e.documentRangeFormattingEditProvider.ordered(t);for(const a of r){const l=yield Promise.resolve(a.provideDocumentRangeFormattingEdits(t,n,i,s)).catch(Hn);if(ci(l))return yield o.computeMoreMinimalEdits(t.uri,l)}})}u(Ooe,"getDocumentRangeFormattingEditsUntilResult");function Voe(o,e,t,n,i){return yr(this,void 0,void 0,function*(){const s=T6(e.documentFormattingEditProvider,e.documentRangeFormattingEditProvider,t);for(const r of s){const a=yield Promise.resolve(r.provideDocumentFormattingEdits(t,n,i)).catch(Hn);if(ci(a))return yield o.computeMoreMinimalEdits(t.uri,a)}})}u(Voe,"getDocumentFormattingEditsUntilResult");function x6(o,e,t,n,i,s,r){const a=e.onTypeFormattingEditProvider.ordered(t);return a.length===0||a[0].autoFormatTriggerCharacters.indexOf(i)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(t,n,i,s,r)).catch(Hn).then(l=>o.computeMoreMinimalEdits(t.uri,l))}u(x6,"getOnTypeFormattingEdits");Qe.registerCommand("_executeFormatRangeProvider",function(o,...e){return yr(this,void 0,void 0,function*(){const[t,n,i]=e;bt(be.isUri(t)),bt(L.isIRange(n));const s=o.get(Ji),r=o.get(co),a=o.get(ue),l=yield s.createModelReference(t);try{return Ooe(r,a,l.object.textEditorModel,L.lift(n),i,Ge.None)}finally{l.dispose()}})});Qe.registerCommand("_executeFormatDocumentProvider",function(o,...e){return yr(this,void 0,void 0,function*(){const[t,n]=e;bt(be.isUri(t));const i=o.get(Ji),s=o.get(co),r=o.get(ue),a=yield i.createModelReference(t);try{return Voe(s,r,a.object.textEditorModel,n,Ge.None)}finally{a.dispose()}})});Qe.registerCommand("_executeFormatOnTypeProvider",function(o,...e){return yr(this,void 0,void 0,function*(){const[t,n,i,s]=e;bt(be.isUri(t)),bt(H.isIPosition(n)),bt(typeof i=="string");const r=o.get(Ji),a=o.get(co),l=o.get(ue),c=yield r.createModelReference(t);try{return x6(a,l,c.object.textEditorModel,H.lift(n),i,s,Ge.None)}finally{c.dispose()}})});var zT;Sr.wrappingIndent.defaultValue=0;Sr.glyphMargin.defaultValue=!1;Sr.autoIndent.defaultValue=3;Sr.overviewRulerLanes.defaultValue=2;Bc.setFormatterSelector((o,e,t)=>Promise.resolve(o[0]));const Ii=N4();Ii.editor=jse();Ii.languages=Noe();const Hoe=Ii.CancellationTokenSource,Boe=Ii.Emitter,Woe=Ii.KeyCode,Uoe=Ii.KeyMod,Goe=Ii.Position,zoe=Ii.Range,Koe=Ii.Selection,joe=Ii.SelectionDirection,$oe=Ii.MarkerSeverity,qoe=Ii.MarkerTag,ew=Ii.Uri,Yoe=Ii.Token,zg=Ii.editor,tg=Ii.languages;(!((zT=on.MonacoEnvironment)===null||zT===void 0)&&zT.globalAPI||typeof define=="function"&&define.amd)&&(self.monaco=Ii);typeof self.require<"u"&&typeof self.require.config=="function"&&self.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});const ov=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:Hoe,Emitter:Boe,KeyCode:Woe,KeyMod:Uoe,MarkerSeverity:$oe,MarkerTag:qoe,Position:Goe,Range:zoe,Selection:Koe,SelectionDirection:joe,Token:Yoe,Uri:ew,editor:zg,languages:tg},Symbol.toStringTag,{value:"Module"}));/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var Xoe=Object.defineProperty,Zoe=Object.getOwnPropertyDescriptor,Joe=Object.getOwnPropertyNames,Qoe=Object.prototype.hasOwnProperty,rF=u((o,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Joe(e))!Qoe.call(o,i)&&i!==t&&Xoe(o,i,{get:()=>e[i],enumerable:!(n=Zoe(e,i))||n.enumerable});return o},"__copyProps$4"),ere=u((o,e,t)=>(rF(o,e,"default"),t&&rF(t,e,"default")),"__reExport$4"),Lm={};ere(Lm,ov);var E6={},KT={},k6=u(class{static getOrCreate(o){return KT[o]||(KT[o]=new k6(o)),KT[o]}_languageId;_loadingTriggered;_lazyLoadPromise;_lazyLoadPromiseResolve;_lazyLoadPromiseReject;constructor(o){this._languageId=o,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((e,t)=>{this._lazyLoadPromiseResolve=e,this._lazyLoadPromiseReject=t})}load(){return this._loadingTriggered||(this._loadingTriggered=!0,E6[this._languageId].loader().then(o=>this._lazyLoadPromiseResolve(o),o=>this._lazyLoadPromiseReject(o))),this._lazyLoadPromise}},"LazyLanguageLoader");function me(o){const e=o.id;E6[e]=o,Lm.languages.register(o);const t=k6.getOrCreate(e);Lm.languages.registerTokensProviderFactory(e,{create:async()=>(await t.load()).language}),Lm.languages.onLanguage(e,async()=>{const n=await t.load();Lm.languages.setLanguageConfiguration(e,n.conf)})}u(me,"registerLanguage");me({id:"abap",extensions:[".abap"],aliases:["abap","ABAP"],loader:()=>ge(()=>import("./abap-b43a89e6.js"),[])});me({id:"apex",extensions:[".cls"],aliases:["Apex","apex"],mimetypes:["text/x-apex-source","text/x-apex"],loader:()=>ge(()=>import("./apex-0dbcbbd8.js"),[])});me({id:"azcli",extensions:[".azcli"],aliases:["Azure CLI","azcli"],loader:()=>ge(()=>import("./azcli-282bdb58.js"),[])});me({id:"bat",extensions:[".bat",".cmd"],aliases:["Batch","bat"],loader:()=>ge(()=>import("./bat-3e233203.js"),[])});me({id:"bicep",extensions:[".bicep"],aliases:["Bicep"],loader:()=>ge(()=>import("./bicep-3dc39703.js"),[])});me({id:"cameligo",extensions:[".mligo"],aliases:["Cameligo"],loader:()=>ge(()=>import("./cameligo-06e900e4.js"),[])});me({id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"],aliases:["clojure","Clojure"],loader:()=>ge(()=>import("./clojure-db811a57.js"),[])});me({id:"coffeescript",extensions:[".coffee"],aliases:["CoffeeScript","coffeescript","coffee"],mimetypes:["text/x-coffeescript","text/coffeescript"],loader:()=>ge(()=>import("./coffee-09967f6c.js"),[])});me({id:"c",extensions:[".c",".h"],aliases:["C","c"],loader:()=>ge(()=>import("./cpp-faa9e9b6.js"),[])});me({id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"],aliases:["C++","Cpp","cpp"],loader:()=>ge(()=>import("./cpp-faa9e9b6.js"),[])});me({id:"csharp",extensions:[".cs",".csx",".cake"],aliases:["C#","csharp"],loader:()=>ge(()=>import("./csharp-97f4fb7d.js"),[])});me({id:"csp",extensions:[],aliases:["CSP","csp"],loader:()=>ge(()=>import("./csp-a35669e2.js"),[])});me({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],loader:()=>ge(()=>import("./css-2476f175.js"),[])});me({id:"cypher",extensions:[".cypher",".cyp"],aliases:["Cypher","OpenCypher"],loader:()=>ge(()=>import("./cypher-303c3469.js"),[])});me({id:"dart",extensions:[".dart"],aliases:["Dart","dart"],mimetypes:["text/x-dart-source","text/x-dart"],loader:()=>ge(()=>import("./dart-49550748.js"),[])});me({id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"],aliases:["Dockerfile"],loader:()=>ge(()=>import("./dockerfile-f0d559c9.js"),[])});me({id:"ecl",extensions:[".ecl"],aliases:["ECL","Ecl","ecl"],loader:()=>ge(()=>import("./ecl-8f371079.js"),[])});me({id:"elixir",extensions:[".ex",".exs"],aliases:["Elixir","elixir","ex"],loader:()=>ge(()=>import("./elixir-8520cbc3.js"),[])});me({id:"flow9",extensions:[".flow"],aliases:["Flow9","Flow","flow9","flow"],loader:()=>ge(()=>import("./flow9-21ceb8bd.js"),[])});me({id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"],aliases:["F#","FSharp","fsharp"],loader:()=>ge(()=>import("./fsharp-2e782b00.js"),[])});me({id:"freemarker2",extensions:[".ftl",".ftlh",".ftlx"],aliases:["FreeMarker2","Apache FreeMarker2"],loader:()=>ge(()=>import("./freemarker2-b1de4109.js"),["assets/freemarker2-b1de4109.js","assets/ListItemText-8378536b.js","assets/ErrorPage-8328033b.js","assets/useControlled-3e967372.js","assets/PageNav-912c7d1d.js"]).then(o=>o.TagAutoInterpolationDollar)});me({id:"freemarker2.tag-angle.interpolation-dollar",aliases:["FreeMarker2 (Angle/Dollar)","Apache FreeMarker2 (Angle/Dollar)"],loader:()=>ge(()=>import("./freemarker2-b1de4109.js"),["assets/freemarker2-b1de4109.js","assets/ListItemText-8378536b.js","assets/ErrorPage-8328033b.js","assets/useControlled-3e967372.js","assets/PageNav-912c7d1d.js"]).then(o=>o.TagAngleInterpolationDollar)});me({id:"freemarker2.tag-bracket.interpolation-dollar",aliases:["FreeMarker2 (Bracket/Dollar)","Apache FreeMarker2 (Bracket/Dollar)"],loader:()=>ge(()=>import("./freemarker2-b1de4109.js"),["assets/freemarker2-b1de4109.js","assets/ListItemText-8378536b.js","assets/ErrorPage-8328033b.js","assets/useControlled-3e967372.js","assets/PageNav-912c7d1d.js"]).then(o=>o.TagBracketInterpolationDollar)});me({id:"freemarker2.tag-angle.interpolation-bracket",aliases:["FreeMarker2 (Angle/Bracket)","Apache FreeMarker2 (Angle/Bracket)"],loader:()=>ge(()=>import("./freemarker2-b1de4109.js"),["assets/freemarker2-b1de4109.js","assets/ListItemText-8378536b.js","assets/ErrorPage-8328033b.js","assets/useControlled-3e967372.js","assets/PageNav-912c7d1d.js"]).then(o=>o.TagAngleInterpolationBracket)});me({id:"freemarker2.tag-bracket.interpolation-bracket",aliases:["FreeMarker2 (Bracket/Bracket)","Apache FreeMarker2 (Bracket/Bracket)"],loader:()=>ge(()=>import("./freemarker2-b1de4109.js"),["assets/freemarker2-b1de4109.js","assets/ListItemText-8378536b.js","assets/ErrorPage-8328033b.js","assets/useControlled-3e967372.js","assets/PageNav-912c7d1d.js"]).then(o=>o.TagBracketInterpolationBracket)});me({id:"freemarker2.tag-auto.interpolation-dollar",aliases:["FreeMarker2 (Auto/Dollar)","Apache FreeMarker2 (Auto/Dollar)"],loader:()=>ge(()=>import("./freemarker2-b1de4109.js"),["assets/freemarker2-b1de4109.js","assets/ListItemText-8378536b.js","assets/ErrorPage-8328033b.js","assets/useControlled-3e967372.js","assets/PageNav-912c7d1d.js"]).then(o=>o.TagAutoInterpolationDollar)});me({id:"freemarker2.tag-auto.interpolation-bracket",aliases:["FreeMarker2 (Auto/Bracket)","Apache FreeMarker2 (Auto/Bracket)"],loader:()=>ge(()=>import("./freemarker2-b1de4109.js"),["assets/freemarker2-b1de4109.js","assets/ListItemText-8378536b.js","assets/ErrorPage-8328033b.js","assets/useControlled-3e967372.js","assets/PageNav-912c7d1d.js"]).then(o=>o.TagAutoInterpolationBracket)});me({id:"go",extensions:[".go"],aliases:["Go"],loader:()=>ge(()=>import("./go-606d7332.js"),[])});me({id:"graphql",extensions:[".graphql",".gql"],aliases:["GraphQL","graphql","gql"],mimetypes:["application/graphql"],loader:()=>ge(()=>import("./graphql-503141bc.js"),[])});me({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars","hbs"],mimetypes:["text/x-handlebars-template"],loader:()=>ge(()=>import("./handlebars-c3055275.js"),["assets/handlebars-c3055275.js","assets/ListItemText-8378536b.js","assets/ErrorPage-8328033b.js","assets/useControlled-3e967372.js","assets/PageNav-912c7d1d.js"])});me({id:"hcl",extensions:[".tf",".tfvars",".hcl"],aliases:["Terraform","tf","HCL","hcl"],loader:()=>ge(()=>import("./hcl-41af7310.js"),[])});me({id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],loader:()=>ge(()=>import("./html-acddeee4.js"),["assets/html-acddeee4.js","assets/ListItemText-8378536b.js","assets/ErrorPage-8328033b.js","assets/useControlled-3e967372.js","assets/PageNav-912c7d1d.js"])});me({id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"],aliases:["Ini","ini"],loader:()=>ge(()=>import("./ini-46e7a95b.js"),[])});me({id:"java",extensions:[".java",".jav"],aliases:["Java","java"],mimetypes:["text/x-java-source","text/x-java"],loader:()=>ge(()=>import("./java-79ea7274.js"),[])});me({id:"javascript",extensions:[".js",".es6",".jsx",".mjs",".cjs"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:()=>ge(()=>import("./javascript-6a102cc1.js"),["assets/javascript-6a102cc1.js","assets/typescript-d4d5410c.js","assets/ListItemText-8378536b.js","assets/ErrorPage-8328033b.js","assets/useControlled-3e967372.js","assets/PageNav-912c7d1d.js"])});me({id:"julia",extensions:[".jl"],aliases:["julia","Julia"],loader:()=>ge(()=>import("./julia-25a565bd.js"),[])});me({id:"kotlin",extensions:[".kt"],aliases:["Kotlin","kotlin"],mimetypes:["text/x-kotlin-source","text/x-kotlin"],loader:()=>ge(()=>import("./kotlin-cef1b1fd.js"),[])});me({id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],loader:()=>ge(()=>import("./less-909e640f.js"),[])});me({id:"lexon",extensions:[".lex"],aliases:["Lexon"],loader:()=>ge(()=>import("./lexon-8c13c279.js"),[])});me({id:"lua",extensions:[".lua"],aliases:["Lua","lua"],loader:()=>ge(()=>import("./lua-10f18aa7.js"),[])});me({id:"liquid",extensions:[".liquid",".html.liquid"],aliases:["Liquid","liquid"],mimetypes:["application/liquid"],loader:()=>ge(()=>import("./liquid-dfc6c832.js"),["assets/liquid-dfc6c832.js","assets/ListItemText-8378536b.js","assets/ErrorPage-8328033b.js","assets/useControlled-3e967372.js","assets/PageNav-912c7d1d.js"])});me({id:"m3",extensions:[".m3",".i3",".mg",".ig"],aliases:["Modula-3","Modula3","modula3","m3"],loader:()=>ge(()=>import("./m3-b84828cd.js"),[])});me({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],loader:()=>ge(()=>import("./markdown-727f1fa6.js"),[])});me({id:"mips",extensions:[".s"],aliases:["MIPS","MIPS-V"],mimetypes:["text/x-mips","text/mips","text/plaintext"],loader:()=>ge(()=>import("./mips-17479448.js"),[])});me({id:"msdax",extensions:[".dax",".msdax"],aliases:["DAX","MSDAX"],loader:()=>ge(()=>import("./msdax-2d903eee.js"),[])});me({id:"mysql",extensions:[],aliases:["MySQL","mysql"],loader:()=>ge(()=>import("./mysql-c74c16f3.js"),[])});me({id:"objective-c",extensions:[".m"],aliases:["Objective-C"],loader:()=>ge(()=>import("./objective-c-465e183d.js"),[])});me({id:"pascal",extensions:[".pas",".p",".pp"],aliases:["Pascal","pas"],mimetypes:["text/x-pascal-source","text/x-pascal"],loader:()=>ge(()=>import("./pascal-32b3f17b.js"),[])});me({id:"pascaligo",extensions:[".ligo"],aliases:["Pascaligo","ligo"],loader:()=>ge(()=>import("./pascaligo-54265dfb.js"),[])});me({id:"perl",extensions:[".pl"],aliases:["Perl","pl"],loader:()=>ge(()=>import("./perl-040d59d8.js"),[])});me({id:"pgsql",extensions:[],aliases:["PostgreSQL","postgres","pg","postgre"],loader:()=>ge(()=>import("./pgsql-cb78cfb3.js"),[])});me({id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"],aliases:["PHP","php"],mimetypes:["application/x-php"],loader:()=>ge(()=>import("./php-01af256a.js"),[])});me({id:"pla",extensions:[".pla"],loader:()=>ge(()=>import("./pla-c7898dec.js"),[])});me({id:"postiats",extensions:[".dats",".sats",".hats"],aliases:["ATS","ATS/Postiats"],loader:()=>ge(()=>import("./postiats-664fccce.js"),[])});me({id:"powerquery",extensions:[".pq",".pqm"],aliases:["PQ","M","Power Query","Power Query M"],loader:()=>ge(()=>import("./powerquery-3f2f8847.js"),[])});me({id:"powershell",extensions:[".ps1",".psm1",".psd1"],aliases:["PowerShell","powershell","ps","ps1"],loader:()=>ge(()=>import("./powershell-ff2186c8.js"),[])});me({id:"proto",extensions:[".proto"],aliases:["protobuf","Protocol Buffers"],loader:()=>ge(()=>import("./protobuf-ede8c39c.js"),[])});me({id:"pug",extensions:[".jade",".pug"],aliases:["Pug","Jade","jade"],loader:()=>ge(()=>import("./pug-d64d016c.js"),[])});me({id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",loader:()=>ge(()=>import("./python-2c50803f.js"),["assets/python-2c50803f.js","assets/ListItemText-8378536b.js","assets/ErrorPage-8328033b.js","assets/useControlled-3e967372.js","assets/PageNav-912c7d1d.js"])});me({id:"qsharp",extensions:[".qs"],aliases:["Q#","qsharp"],loader:()=>ge(()=>import("./qsharp-db4d2332.js"),[])});me({id:"r",extensions:[".r",".rhistory",".rmd",".rprofile",".rt"],aliases:["R","r"],loader:()=>ge(()=>import("./r-fcb36db0.js"),[])});me({id:"razor",extensions:[".cshtml"],aliases:["Razor","razor"],mimetypes:["text/x-cshtml"],loader:()=>ge(()=>import("./razor-9eca09f7.js"),["assets/razor-9eca09f7.js","assets/ListItemText-8378536b.js","assets/ErrorPage-8328033b.js","assets/useControlled-3e967372.js","assets/PageNav-912c7d1d.js"])});me({id:"redis",extensions:[".redis"],aliases:["redis"],loader:()=>ge(()=>import("./redis-c9bf3394.js"),[])});me({id:"redshift",extensions:[],aliases:["Redshift","redshift"],loader:()=>ge(()=>import("./redshift-8d0f2494.js"),[])});me({id:"restructuredtext",extensions:[".rst"],aliases:["reStructuredText","restructuredtext"],loader:()=>ge(()=>import("./restructuredtext-98785e74.js"),[])});me({id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"],aliases:["Ruby","rb"],loader:()=>ge(()=>import("./ruby-f75707b3.js"),[])});me({id:"rust",extensions:[".rs",".rlib"],aliases:["Rust","rust"],loader:()=>ge(()=>import("./rust-9b309104.js"),[])});me({id:"sb",extensions:[".sb"],aliases:["Small Basic","sb"],loader:()=>ge(()=>import("./sb-99792fa3.js"),[])});me({id:"scala",extensions:[".scala",".sc",".sbt"],aliases:["Scala","scala","SBT","Sbt","sbt","Dotty","dotty"],mimetypes:["text/x-scala-source","text/x-scala","text/x-sbt","text/x-dotty"],loader:()=>ge(()=>import("./scala-ec1f6546.js"),[])});me({id:"scheme",extensions:[".scm",".ss",".sch",".rkt"],aliases:["scheme","Scheme"],loader:()=>ge(()=>import("./scheme-2dfeec6d.js"),[])});me({id:"scss",extensions:[".scss"],aliases:["Sass","sass","scss"],mimetypes:["text/x-scss","text/scss"],loader:()=>ge(()=>import("./scss-1cfe6898.js"),[])});me({id:"shell",extensions:[".sh",".bash"],aliases:["Shell","sh"],loader:()=>ge(()=>import("./shell-09b1527a.js"),[])});me({id:"sol",extensions:[".sol"],aliases:["sol","solidity","Solidity"],loader:()=>ge(()=>import("./solidity-42cedeeb.js"),[])});me({id:"aes",extensions:[".aes"],aliases:["aes","sophia","Sophia"],loader:()=>ge(()=>import("./sophia-640bb318.js"),[])});me({id:"sparql",extensions:[".rq"],aliases:["sparql","SPARQL"],loader:()=>ge(()=>import("./sparql-1350b581.js"),[])});me({id:"sql",extensions:[".sql"],aliases:["SQL"],loader:()=>ge(()=>import("./sql-d6fbbba2.js"),[])});me({id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib"],aliases:["StructuredText","scl","stl"],loader:()=>ge(()=>import("./st-39d02679.js"),[])});me({id:"swift",aliases:["Swift","swift"],extensions:[".swift"],mimetypes:["text/swift"],loader:()=>ge(()=>import("./swift-deed2269.js"),[])});me({id:"systemverilog",extensions:[".sv",".svh"],aliases:["SV","sv","SystemVerilog","systemverilog"],loader:()=>ge(()=>import("./systemverilog-fe8f44a0.js"),[])});me({id:"verilog",extensions:[".v",".vh"],aliases:["V","v","Verilog","verilog"],loader:()=>ge(()=>import("./systemverilog-fe8f44a0.js"),[])});me({id:"tcl",extensions:[".tcl"],aliases:["tcl","Tcl","tcltk","TclTk","tcl/tk","Tcl/Tk"],loader:()=>ge(()=>import("./tcl-c3d9d7a8.js"),[])});me({id:"twig",extensions:[".twig"],aliases:["Twig","twig"],mimetypes:["text/x-twig"],loader:()=>ge(()=>import("./twig-6fc061e8.js"),[])});me({id:"typescript",extensions:[".ts",".tsx"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],loader:()=>ge(()=>import("./typescript-d4d5410c.js"),["assets/typescript-d4d5410c.js","assets/ListItemText-8378536b.js","assets/ErrorPage-8328033b.js","assets/useControlled-3e967372.js","assets/PageNav-912c7d1d.js"])});me({id:"vb",extensions:[".vb"],aliases:["Visual Basic","vb"],loader:()=>ge(()=>import("./vb-4f8c002b.js"),[])});me({id:"xml",extensions:[".xml",".dtd",".ascx",".csproj",".config",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xsl"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],loader:()=>ge(()=>import("./xml-c25babca.js"),["assets/xml-c25babca.js","assets/ListItemText-8378536b.js","assets/ErrorPage-8328033b.js","assets/useControlled-3e967372.js","assets/PageNav-912c7d1d.js"])});me({id:"yaml",extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml","text/x-yaml"],loader:()=>ge(()=>import("./yaml-3ca557a6.js"),["assets/yaml-3ca557a6.js","assets/ListItemText-8378536b.js","assets/ErrorPage-8328033b.js","assets/useControlled-3e967372.js","assets/PageNav-912c7d1d.js"])});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var tre=Object.defineProperty,nre=Object.getOwnPropertyDescriptor,ire=Object.getOwnPropertyNames,sre=Object.prototype.hasOwnProperty,aF=u((o,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ire(e))!sre.call(o,i)&&i!==t&&tre(o,i,{get:()=>e[i],enumerable:!(n=nre(e,i))||n.enumerable});return o},"__copyProps$3"),ore=u((o,e,t)=>(aF(o,e,"default"),t&&aF(t,e,"default")),"__reExport$3"),mp={};ore(mp,ov);var lN=u(class{_onDidChange=new mp.Emitter;_options;_modeConfiguration;_languageId;constructor(e,t,n){this._languageId=e,this.setOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this.options}get options(){return this._options}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setDiagnosticsOptions(e){this.setOptions(e)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},"LanguageServiceDefaultsImpl"),cN={validate:!0,lint:{compatibleVendorPrefixes:"ignore",vendorPrefix:"warning",duplicateProperties:"warning",emptyRules:"warning",importStatement:"ignore",boxModel:"ignore",universalSelector:"ignore",zeroUnits:"ignore",fontFaceProperties:"warning",hexColorLength:"error",argumentsInColorFunction:"error",unknownProperties:"warning",ieHack:"ignore",unknownVendorSpecificProperties:"ignore",propertyIgnoredDueToDisplay:"warning",important:"ignore",float:"ignore",idSelector:"ignore"},data:{useDefaultDataProvider:!0},format:{newlineBetweenSelectors:!0,newlineBetweenRules:!0,spaceAroundSelectorSeparator:!1,braceStyle:"collapse",maxPreserveNewLines:void 0,preserveNewLines:!0}},dN={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0,documentFormattingEdits:!0,documentRangeFormattingEdits:!0},M6=new lN("css",cN,dN),D6=new lN("scss",cN,dN),A6=new lN("less",cN,dN);mp.languages.css={cssDefaults:M6,lessDefaults:A6,scssDefaults:D6};function uN(){return ge(()=>import("./cssMode-d26268c8.js"),["assets/cssMode-d26268c8.js","assets/ListItemText-8378536b.js","assets/ErrorPage-8328033b.js","assets/useControlled-3e967372.js","assets/PageNav-912c7d1d.js"])}u(uN,"getMode$3");mp.languages.onLanguage("less",()=>{uN().then(o=>o.setupMode(A6))});mp.languages.onLanguage("scss",()=>{uN().then(o=>o.setupMode(D6))});mp.languages.onLanguage("css",()=>{uN().then(o=>o.setupMode(M6))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var rre=Object.defineProperty,are=Object.getOwnPropertyDescriptor,lre=Object.getOwnPropertyNames,cre=Object.prototype.hasOwnProperty,lF=u((o,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of lre(e))!cre.call(o,i)&&i!==t&&rre(o,i,{get:()=>e[i],enumerable:!(n=are(e,i))||n.enumerable});return o},"__copyProps$2"),dre=u((o,e,t)=>(lF(o,e,"default"),t&&lF(t,e,"default")),"__reExport$2"),rS={};dre(rS,ov);var ure=u(class{_onDidChange=new rS.Emitter;_options;_modeConfiguration;_languageId;constructor(e,t,n){this._languageId=e,this.setOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get options(){return this._options}get modeConfiguration(){return this._modeConfiguration}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},"LanguageServiceDefaultsImpl"),hre={tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:void 0,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},aS={format:hre,suggest:{},data:{useDefaultDataProvider:!0}};function lS(o){return{completionItems:!0,hovers:!0,documentSymbols:!0,links:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,selectionRanges:!0,diagnostics:o===jm,documentFormattingEdits:o===jm,documentRangeFormattingEdits:o===jm}}u(lS,"getConfigurationDefault");var jm="html",cF="handlebars",dF="razor",I6=cS(jm,aS,lS(jm)),gre=I6.defaults,N6=cS(cF,aS,lS(cF)),fre=N6.defaults,P6=cS(dF,aS,lS(dF)),pre=P6.defaults;rS.languages.html={htmlDefaults:gre,razorDefaults:pre,handlebarDefaults:fre,htmlLanguageService:I6,handlebarLanguageService:N6,razorLanguageService:P6,registerHTMLLanguageService:cS};function mre(){return ge(()=>import("./htmlMode-b1a93ae7.js"),["assets/htmlMode-b1a93ae7.js","assets/ListItemText-8378536b.js","assets/ErrorPage-8328033b.js","assets/useControlled-3e967372.js","assets/PageNav-912c7d1d.js"])}u(mre,"getMode$2");function cS(o,e=aS,t=lS(o)){const n=new ure(o,e,t);let i;const s=rS.languages.onLanguage(o,async()=>{i=(await mre()).setupMode(n)});return{defaults:n,dispose(){s.dispose(),i?.dispose(),i=void 0}}}u(cS,"registerHTMLLanguageService");/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var bre=Object.defineProperty,_re=Object.getOwnPropertyDescriptor,vre=Object.getOwnPropertyNames,Cre=Object.prototype.hasOwnProperty,uF=u((o,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of vre(e))!Cre.call(o,i)&&i!==t&&bre(o,i,{get:()=>e[i],enumerable:!(n=_re(e,i))||n.enumerable});return o},"__copyProps$1"),wre=u((o,e,t)=>(uF(o,e,"default"),t&&uF(t,e,"default")),"__reExport$1"),rv={};wre(rv,ov);var yre=u(class{_onDidChange=new rv.Emitter;_diagnosticsOptions;_modeConfiguration;_languageId;constructor(e,t,n){this._languageId=e,this.setDiagnosticsOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},"LanguageServiceDefaultsImpl"),Sre={validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},Tre={documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},R6=new yre("json",Sre,Tre);rv.languages.json={jsonDefaults:R6};function Lre(){return ge(()=>import("./jsonMode-33ac04a9.js"),["assets/jsonMode-33ac04a9.js","assets/ListItemText-8378536b.js","assets/ErrorPage-8328033b.js","assets/useControlled-3e967372.js","assets/PageNav-912c7d1d.js"])}u(Lre,"getMode$1");rv.languages.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]});rv.languages.onLanguage("json",()=>{Lre().then(o=>o.setupMode(R6))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var xre=Object.defineProperty,Ere=Object.getOwnPropertyDescriptor,kre=Object.getOwnPropertyNames,Mre=Object.prototype.hasOwnProperty,hF=u((o,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of kre(e))!Mre.call(o,i)&&i!==t&&xre(o,i,{get:()=>e[i],enumerable:!(n=Ere(e,i))||n.enumerable});return o},"__copyProps"),Dre=u((o,e,t)=>(hF(o,e,"default"),t&&hF(t,e,"default")),"__reExport"),Are="4.5.5",Ff={};Dre(Ff,ov);var F6=(o=>(o[o.None=0]="None",o[o.CommonJS=1]="CommonJS",o[o.AMD=2]="AMD",o[o.UMD=3]="UMD",o[o.System=4]="System",o[o.ES2015=5]="ES2015",o[o.ESNext=99]="ESNext",o))(F6||{}),O6=(o=>(o[o.None=0]="None",o[o.Preserve=1]="Preserve",o[o.React=2]="React",o[o.ReactNative=3]="ReactNative",o[o.ReactJSX=4]="ReactJSX",o[o.ReactJSXDev=5]="ReactJSXDev",o))(O6||{}),V6=(o=>(o[o.CarriageReturnLineFeed=0]="CarriageReturnLineFeed",o[o.LineFeed=1]="LineFeed",o))(V6||{}),H6=(o=>(o[o.ES3=0]="ES3",o[o.ES5=1]="ES5",o[o.ES2015=2]="ES2015",o[o.ES2016=3]="ES2016",o[o.ES2017=4]="ES2017",o[o.ES2018=5]="ES2018",o[o.ES2019=6]="ES2019",o[o.ES2020=7]="ES2020",o[o.ESNext=99]="ESNext",o[o.JSON=100]="JSON",o[o.Latest=99]="Latest",o))(H6||{}),B6=(o=>(o[o.Classic=1]="Classic",o[o.NodeJs=2]="NodeJs",o))(B6||{}),W6=u(class{_onDidChange=new Ff.Emitter;_onDidExtraLibsChange=new Ff.Emitter;_extraLibs;_removedExtraLibs;_eagerModelSync;_compilerOptions;_diagnosticsOptions;_workerOptions;_onDidExtraLibsChangeTimeout;_inlayHintsOptions;constructor(o,e,t,n){this._extraLibs=Object.create(null),this._removedExtraLibs=Object.create(null),this._eagerModelSync=!1,this.setCompilerOptions(o),this.setDiagnosticsOptions(e),this.setWorkerOptions(t),this.setInlayHintsOptions(n),this._onDidExtraLibsChangeTimeout=-1}get onDidChange(){return this._onDidChange.event}get onDidExtraLibsChange(){return this._onDidExtraLibsChange.event}get workerOptions(){return this._workerOptions}get inlayHintsOptions(){return this._inlayHintsOptions}getExtraLibs(){return this._extraLibs}addExtraLib(o,e){let t;if(typeof e>"u"?t=`ts:extralib-${Math.random().toString(36).substring(2,15)}`:t=e,this._extraLibs[t]&&this._extraLibs[t].content===o)return{dispose:()=>{}};let n=1;return this._removedExtraLibs[t]&&(n=this._removedExtraLibs[t]+1),this._extraLibs[t]&&(n=this._extraLibs[t].version+1),this._extraLibs[t]={content:o,version:n},this._fireOnDidExtraLibsChangeSoon(),{dispose:()=>{let i=this._extraLibs[t];i&&i.version===n&&(delete this._extraLibs[t],this._removedExtraLibs[t]=n,this._fireOnDidExtraLibsChangeSoon())}}}setExtraLibs(o){for(const e in this._extraLibs)this._removedExtraLibs[e]=this._extraLibs[e].version;if(this._extraLibs=Object.create(null),o&&o.length>0)for(const e of o){const t=e.filePath||`ts:extralib-${Math.random().toString(36).substring(2,15)}`,n=e.content;let i=1;this._removedExtraLibs[t]&&(i=this._removedExtraLibs[t]+1),this._extraLibs[t]={content:n,version:i}}this._fireOnDidExtraLibsChangeSoon()}_fireOnDidExtraLibsChangeSoon(){this._onDidExtraLibsChangeTimeout===-1&&(this._onDidExtraLibsChangeTimeout=window.setTimeout(()=>{this._onDidExtraLibsChangeTimeout=-1,this._onDidExtraLibsChange.fire(void 0)},0))}getCompilerOptions(){return this._compilerOptions}setCompilerOptions(o){this._compilerOptions=o||Object.create(null),this._onDidChange.fire(void 0)}getDiagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(o){this._diagnosticsOptions=o||Object.create(null),this._onDidChange.fire(void 0)}setWorkerOptions(o){this._workerOptions=o||Object.create(null),this._onDidChange.fire(void 0)}setInlayHintsOptions(o){this._inlayHintsOptions=o||Object.create(null),this._onDidChange.fire(void 0)}setMaximumWorkerIdleTime(o){}setEagerModelSync(o){this._eagerModelSync=o}getEagerModelSync(){return this._eagerModelSync}},"LanguageServiceDefaultsImpl"),Ire=Are,U6=new W6({allowNonTsExtensions:!0,target:99},{noSemanticValidation:!1,noSyntaxValidation:!1,onlyVisible:!1},{},{}),G6=new W6({allowNonTsExtensions:!0,allowJs:!0,target:99},{noSemanticValidation:!0,noSyntaxValidation:!1,onlyVisible:!1},{},{}),Nre=u(()=>dS().then(o=>o.getTypeScriptWorker()),"getTypeScriptWorker"),Pre=u(()=>dS().then(o=>o.getJavaScriptWorker()),"getJavaScriptWorker");Ff.languages.typescript={ModuleKind:F6,JsxEmit:O6,NewLineKind:V6,ScriptTarget:H6,ModuleResolutionKind:B6,typescriptVersion:Ire,typescriptDefaults:U6,javascriptDefaults:G6,getTypeScriptWorker:Nre,getJavaScriptWorker:Pre};function dS(){return ge(()=>import("./tsMode-9f2258f1.js"),["assets/tsMode-9f2258f1.js","assets/ListItemText-8378536b.js","assets/ErrorPage-8328033b.js","assets/useControlled-3e967372.js","assets/PageNav-912c7d1d.js"])}u(dS,"getMode");Ff.languages.onLanguage("typescript",()=>dS().then(o=>o.setupTypeScript(U6)));Ff.languages.onLanguage("javascript",()=>dS().then(o=>o.setupJavaScript(G6)));var Rre=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Fre=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},uS=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const hS=new ce("selectionAnchorSet",!1);let Sl=u(class z6{constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=hS.bindTo(t),this.modelChangeListener=e.onDidChangeModel(()=>this.selectionAnchorSetContextKey.reset())}static get(e){return e.getContribution(z6.ID)}setSelectionAnchor(){if(this.editor.hasModel()){const e=this.editor.getPosition();this.editor.changeDecorations(t=>{this.decorationId&&t.removeDecoration(this.decorationId),this.decorationId=t.addDecoration(re.fromPositions(e,e),{description:"selection-anchor",stickiness:1,hoverMessage:new Ei().appendText(m("selectionAnchor","Selection Anchor")),className:"selection-anchor"})}),this.selectionAnchorSetContextKey.set(!!this.decorationId),Zn(m("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){const t=this.editor.getPosition();this.editor.setSelection(re.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){if(this.decorationId){const e=this.decorationId;this.editor.changeDecorations(t=>{t.removeDecoration(e),this.decorationId=void 0}),this.selectionAnchorSetContextKey.set(!1)}}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}},"SelectionAnchorController");Sl.ID="editor.contrib.selectionAnchorController";Sl=Rre([Fre(1,De)],Sl);class K6 extends de{constructor(){super({id:"editor.action.setSelectionAnchor",label:m("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:A.editorTextFocus,primary:xn(2089,2080),weight:100}})}run(e,t){var n;return uS(this,void 0,void 0,function*(){(n=Sl.get(t))===null||n===void 0||n.setSelectionAnchor()})}}u(K6,"SetSelectionAnchor");class j6 extends de{constructor(){super({id:"editor.action.goToSelectionAnchor",label:m("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:hS})}run(e,t){var n;return uS(this,void 0,void 0,function*(){(n=Sl.get(t))===null||n===void 0||n.goToSelectionAnchor()})}}u(j6,"GoToSelectionAnchor");class $6 extends de{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:m("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:hS,kbOpts:{kbExpr:A.editorTextFocus,primary:xn(2089,2089),weight:100}})}run(e,t){var n;return uS(this,void 0,void 0,function*(){(n=Sl.get(t))===null||n===void 0||n.selectFromAnchorToCursor()})}}u($6,"SelectFromAnchorToCursor");class q6 extends de{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:m("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:hS,kbOpts:{kbExpr:A.editorTextFocus,primary:9,weight:100}})}run(e,t){var n;return uS(this,void 0,void 0,function*(){(n=Sl.get(t))===null||n===void 0||n.cancelSelectionAnchor()})}}u(q6,"CancelSelectionAnchor");it(Sl.ID,Sl);ie(K6);ie(j6);ie($6);ie(q6);const Ore=I("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hcDark:"#A0A0A0",hcLight:"#A0A0A0"},m("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class Y6 extends de{constructor(){super({id:"editor.action.jumpToBracket",label:m("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:A.editorTextFocus,primary:3160,weight:100}})}run(e,t){var n;(n=xo.get(t))===null||n===void 0||n.jumpToBracket()}}u(Y6,"JumpToBracketAction");class X6 extends de{constructor(){super({id:"editor.action.selectToBracket",label:m("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,description:{description:"Select to Bracket",args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,n){var i;let s=!0;n&&n.selectBrackets===!1&&(s=!1),(i=xo.get(t))===null||i===void 0||i.selectToBracket(s)}}u(X6,"SelectToBracketAction");class Z6{constructor(e,t,n){this.position=e,this.brackets=t,this.options=n}}u(Z6,"BracketsData");class xo extends U{constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=this._editor.createDecorationsCollection(),this._updateBracketsSoon=this._register(new pt(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(66),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition(t=>{this._matchBrackets!=="never"&&this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelContent(t=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModel(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelLanguageConfiguration(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(66)&&(this._matchBrackets=this._editor.getOption(66),this._decorations.clear(),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(e.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}static get(e){return e.getContribution(xo.ID)}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map(n=>{const i=n.getStartPosition(),s=e.bracketPairs.matchBracket(i);let r=null;if(s)s[0].containsPosition(i)&&!s[1].containsPosition(i)?r=s[1].getStartPosition():s[1].containsPosition(i)&&(r=s[0].getStartPosition());else{const a=e.bracketPairs.findEnclosingBrackets(i);if(a)r=a[1].getStartPosition();else{const l=e.bracketPairs.findNextBracket(i);l&&l.range&&(r=l.range.getStartPosition())}}return r?new re(r.lineNumber,r.column,r.lineNumber,r.column):new re(i.lineNumber,i.column,i.lineNumber,i.column)});this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),n=[];this._editor.getSelections().forEach(i=>{const s=i.getStartPosition();let r=t.bracketPairs.matchBracket(s);if(!r&&(r=t.bracketPairs.findEnclosingBrackets(s),!r)){const c=t.bracketPairs.findNextBracket(s);c&&c.range&&(r=t.bracketPairs.matchBracket(c.range.getStartPosition()))}let a=null,l=null;if(r){r.sort(L.compareRangesUsingStarts);const[c,d]=r;if(a=e?c.getStartPosition():c.getEndPosition(),l=e?d.getEndPosition():d.getStartPosition(),d.containsPosition(s)){const h=a;a=l,l=h}}a&&l&&n.push(new re(a.lineNumber,a.column,l.lineNumber,l.column))}),n.length>0&&(this._editor.setSelections(n),this._editor.revealRange(n[0]))}_updateBrackets(){if(this._matchBrackets==="never")return;this._recomputeBrackets();const e=[];let t=0;for(const n of this._lastBracketsData){const i=n.brackets;i&&(e[t++]={range:i[0],options:n.options},e[t++]={range:i[1],options:n.options})}this._decorations.set(e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus()){this._lastBracketsData=[],this._lastVersionId=0;return}const e=this._editor.getSelections();if(e.length>100){this._lastBracketsData=[],this._lastVersionId=0;return}const t=this._editor.getModel(),n=t.getVersionId();let i=[];this._lastVersionId===n&&(i=this._lastBracketsData);const s=[];let r=0;for(let h=0,g=e.length;h<g;h++){const f=e[h];f.isEmpty()&&(s[r++]=f.getStartPosition())}s.length>1&&s.sort(H.compare);const a=[];let l=0,c=0;const d=i.length;for(let h=0,g=s.length;h<g;h++){const f=s[h];for(;c<d&&i[c].position.isBefore(f);)c++;if(c<d&&i[c].position.equals(f))a[l++]=i[c];else{let p=t.bracketPairs.matchBracket(f,20),_=xo._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;!p&&this._matchBrackets==="always"&&(p=t.bracketPairs.findEnclosingBrackets(f,20),_=xo._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),a[l++]=new Z6(f,p,_)}}this._lastBracketsData=a,this._lastVersionId=n}}u(xo,"BracketMatchingController");xo.ID="editor.contrib.bracketMatchingController";xo._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=Ae.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:Zt(Ore),position:io.Center}});xo._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=Ae.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"});it(xo.ID,xo);ie(X6);ie(Y6);At((o,e)=>{const t=o.getColor(BJ);t&&e.addRule(`.monaco-editor .bracket-match { background-color: ${t}; }`);const n=o.getColor(OH);n&&e.addRule(`.monaco-editor .bracket-match { border: 1px solid ${n}; }`)});Qs.appendMenuItem(P.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:m({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});class J6{constructor(e,t){this._selection=e,this._isMovingLeft=t}getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const n=this._selection.startLineNumber,i=this._selection.startColumn,s=this._selection.endColumn;if(!(this._isMovingLeft&&i===1)&&!(!this._isMovingLeft&&s===e.getLineMaxColumn(n)))if(this._isMovingLeft){const r=new L(n,i-1,n,i),a=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new L(n,s,n,s),a)}else{const r=new L(n,s,n,s+1),a=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new L(n,i,n,i),a)}}computeCursorState(e,t){return this._isMovingLeft?new re(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new re(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}u(J6,"MoveCaretCommand");class hN extends de{constructor(e,t){super(t),this.left=e}run(e,t){if(!t.hasModel())return;const n=[],i=t.getSelections();for(const s of i)n.push(new J6(s,this.left));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}u(hN,"MoveCaretAction");class Q6 extends hN{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:m("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:A.writable})}}u(Q6,"MoveCaretLeftAction");class eW extends hN{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:m("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:A.writable})}}u(eW,"MoveCaretRightAction");ie(Q6);ie(eW);class tW extends de{constructor(){super({id:"editor.action.transposeLetters",label:m("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:A.writable,kbOpts:{kbExpr:A.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(e,t){if(!t.hasModel())return;const n=t.getModel(),i=[],s=t.getSelections();for(const r of s){if(!r.isEmpty())continue;const a=r.startLineNumber,l=r.startColumn,c=n.getLineMaxColumn(a);if(a===1&&(l===1||l===2&&c===2))continue;const d=l===c?r.getPosition():lt.rightPosition(n,r.getPosition().lineNumber,r.getPosition().column),h=lt.leftPosition(n,d),g=lt.leftPosition(n,h),f=n.getValueInRange(L.fromPositions(g,h)),p=n.getValueInRange(L.fromPositions(h,d)),_=L.fromPositions(g,d);i.push(new Un(_,p+f))}i.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop())}}u(tW,"TransposeLettersAction");ie(tW);var Vre=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const Hu="9_cutcopypaste",Hre=cr||document.queryCommandSupported("cut"),nW=cr||document.queryCommandSupported("copy"),Bre=typeof navigator.clipboard>"u"||Is?document.queryCommandSupported("paste"):!0;function gN(o){return o.register(),o}u(gN,"registerCommand");const Wre=Hre?gN(new lh({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:cr?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:P.MenubarEditMenu,group:"2_ccp",title:m({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:P.EditorContext,group:Hu,title:m("actions.clipboard.cutLabel","Cut"),when:A.writable,order:1},{menuId:P.CommandPalette,group:"",title:m("actions.clipboard.cutLabel","Cut"),order:1},{menuId:P.SimpleEditorContext,group:Hu,title:m("actions.clipboard.cutLabel","Cut"),when:A.writable,order:1}]})):void 0,Ure=nW?gN(new lh({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:cr?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:P.MenubarEditMenu,group:"2_ccp",title:m({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:P.EditorContext,group:Hu,title:m("actions.clipboard.copyLabel","Copy"),order:2},{menuId:P.CommandPalette,group:"",title:m("actions.clipboard.copyLabel","Copy"),order:1},{menuId:P.SimpleEditorContext,group:Hu,title:m("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;Qs.appendMenuItem(P.MenubarEditMenu,{submenu:P.MenubarCopy,title:{value:m("copy as","Copy As"),original:"Copy As"},group:"2_ccp",order:3});Qs.appendMenuItem(P.EditorContext,{submenu:P.EditorContextCopy,title:{value:m("copy as","Copy As"),original:"Copy As"},group:Hu,order:3});Qs.appendMenuItem(P.EditorContext,{submenu:P.EditorContextShare,title:{value:m("share","Share"),original:"Share"},group:"11_share",order:-1});const jT=Bre?gN(new lh({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:cr?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:P.MenubarEditMenu,group:"2_ccp",title:m({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:P.EditorContext,group:Hu,title:m("actions.clipboard.pasteLabel","Paste"),when:A.writable,order:4},{menuId:P.CommandPalette,group:"",title:m("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:P.SimpleEditorContext,group:Hu,title:m("actions.clipboard.pasteLabel","Paste"),when:A.writable,order:4}]})):void 0;class iW extends de{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:m("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:A.textInputFocus,primary:0,weight:100}})}run(e,t){!t.hasModel()||!t.getOption(33)&&t.getSelection().isEmpty()||(sE.forceCopyWithSyntaxHighlighting=!0,t.focus(),document.execCommand("copy"),sE.forceCopyWithSyntaxHighlighting=!1)}}u(iW,"ExecCommandCopyWithSyntaxHighlightingAction");function sW(o,e){o&&(o.addImplementation(1e4,"code-editor",(t,n)=>{const i=t.get(dt).getFocusedCodeEditor();if(i&&i.hasTextFocus()){const s=i.getOption(33),r=i.getSelection();return r&&r.isEmpty()&&!s||document.execCommand(e),!0}return!1}),o.addImplementation(0,"generic-dom",(t,n)=>(document.execCommand(e),!0)))}u(sW,"registerExecCommandImpl");sW(Wre,"cut");sW(Ure,"copy");jT&&(jT.addImplementation(1e4,"code-editor",(o,e)=>{const t=o.get(dt),n=o.get(Nl),i=t.getFocusedCodeEditor();return i&&i.hasTextFocus()?!document.execCommand("paste")&&Xc?(()=>Vre(void 0,void 0,void 0,function*(){const r=yield n.readText();if(r!==""){const a=cf.INSTANCE.get(r);let l=!1,c=null,d=null;a&&(l=i.getOption(33)&&!!a.isFromEmptySelection,c=typeof a.multicursorText<"u"?a.multicursorText:null,d=a.mode),i.trigger("keyboard","paste",{text:r,pasteOnNewLine:l,multicursorText:c,mode:d})}}))():!0:!1}),jT.addImplementation(0,"generic-dom",(o,e)=>(document.execCommand("paste"),!0)));nW&&ie(iW);class Ye{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+Ye.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(e){return new Ye(this.value+Ye.sep+e)}}u(Ye,"CodeActionKind");Ye.sep=".";Ye.None=new Ye("@@none@@");Ye.Empty=new Ye("");Ye.QuickFix=new Ye("quickfix");Ye.Refactor=new Ye("refactor");Ye.Source=new Ye("source");Ye.SourceOrganizeImports=Ye.Source.append("organizeImports");Ye.SourceFixAll=Ye.Source.append("fixAll");var Ci;(function(o){o.Refactor="refactor",o.RefactorPreview="refactor preview",o.Lightbulb="lightbulb",o.Default="other (default)",o.SourceAction="source action",o.QuickFix="quick fix action",o.FixAll="fix all",o.OrganizeImports="organize imports",o.AutoFix="auto fix",o.QuickFixHover="quick fix hover window",o.OnSave="save participants",o.ProblemsView="problems view"})(Ci||(Ci={}));function Gre(o,e){return!(o.include&&!o.include.intersects(e)||o.excludes&&o.excludes.some(t=>oW(e,t,o.include))||!o.includeSourceActions&&Ye.Source.contains(e))}u(Gre,"mayIncludeActionsOfKind");function zre(o,e){const t=e.kind?new Ye(e.kind):void 0;return!(o.include&&(!t||!o.include.contains(t))||o.excludes&&t&&o.excludes.some(n=>oW(t,n,o.include))||!o.includeSourceActions&&t&&Ye.Source.contains(t)||o.onlyIncludePreferredActions&&!e.isPreferred)}u(zre,"filtersAction");function oW(o,e,t){return!(!e.contains(o)||t&&e.contains(t))}u(oW,"excludesAction");class Jo{constructor(e,t,n){this.kind=e,this.apply=t,this.preferred=n}static fromUser(e,t){return!e||typeof e!="object"?new Jo(t.kind,t.apply,!1):new Jo(Jo.getKindFromUser(e,t.kind),Jo.getApplyFromUser(e,t.apply),Jo.getPreferredUser(e))}static getApplyFromUser(e,t){switch(typeof e.apply=="string"?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return typeof e.kind=="string"?new Ye(e.kind):t}static getPreferredUser(e){return typeof e.preferred=="boolean"?e.preferred:!1}}u(Jo,"CodeActionCommandArgs");var fN=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const rW="editor.action.codeAction",aW="editor.action.refactor",Kre="editor.action.refactor.preview",lW="editor.action.sourceAction",pN="editor.action.organizeImports",mN="editor.action.fixAll";class bN{constructor(e,t){this.action=e,this.provider=t}resolve(e){var t;return fN(this,void 0,void 0,function*(){if(!((t=this.provider)===null||t===void 0)&&t.resolveCodeAction&&!this.action.edit){let n;try{n=yield this.provider.resolveCodeAction(this.action,e)}catch(i){Hn(i)}n&&(this.action.edit=n.edit)}return this})}}u(bN,"CodeActionItem");class gS extends U{constructor(e,t,n){super(),this.documentation=t,this._register(n),this.allActions=[...e].sort(gS.codeActionsComparator),this.validActions=this.allActions.filter(({action:i})=>!i.disabled)}static codeActionsComparator({action:e},{action:t}){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:ci(e.diagnostics)?ci(t.diagnostics)?e.diagnostics[0].message.localeCompare(t.diagnostics[0].message):-1:ci(t.diagnostics)?1:0}get hasAutoFix(){return this.validActions.some(({action:e})=>!!e.kind&&Ye.QuickFix.contains(new Ye(e.kind))&&!!e.isPreferred)}}u(gS,"ManagedCodeActionSet");const gF={actions:[],documentation:void 0};function _N(o,e,t,n,i,s){var r;const a=n.filter||{},l={only:(r=a.include)===null||r===void 0?void 0:r.value,trigger:n.type},c=new oS(e,s),d=jre(o,e,a),h=new J,g=d.map(p=>fN(this,void 0,void 0,function*(){try{i.report(p);const _=yield p.provideCodeActions(e,t,l,c.token);if(_&&h.add(_),c.token.isCancellationRequested)return gF;const v=(_?.actions||[]).filter(w=>w&&zre(a,w)),C=$re(p,v,a.include);return{actions:v.map(w=>new bN(w,p)),documentation:C}}catch(_){if(ca(_))throw _;return Hn(_),gF}})),f=o.onDidChange(()=>{const p=o.all(e);Ds(p,d)||c.cancel()});return Promise.all(g).then(p=>{const _=p.map(C=>C.actions).flat(),v=p_(p.map(C=>C.documentation));return new gS(_,v,h)}).finally(()=>{f.dispose(),c.dispose()})}u(_N,"getCodeActions");function jre(o,e,t){return o.all(e).filter(n=>n.providedCodeActionKinds?n.providedCodeActionKinds.some(i=>Gre(t,new Ye(i))):!0)}u(jre,"getCodeActionProviders");function $re(o,e,t){if(!o.documentation)return;const n=o.documentation.map(i=>({kind:new Ye(i.kind),command:i.command}));if(t){let i;for(const s of n)s.kind.contains(t)&&(i?i.kind.contains(s.kind)&&(i=s):i=s);if(i)return i?.command}for(const i of e)if(i.kind){for(const s of n)if(s.kind.contains(new Ye(i.kind)))return s.command}}u($re,"getDocumentation");Qe.registerCommand("_executeCodeActionProvider",function(o,e,t,n,i){return fN(this,void 0,void 0,function*(){if(!(e instanceof be))throw dr();const{codeActionProvider:s}=o.get(ue),r=o.get(Kt).getModel(e);if(!r)throw dr();const a=re.isISelection(t)?re.liftSelection(t):L.isIRange(t)?r.validateRange(t):void 0;if(!a)throw dr();const l=typeof n=="string"?new Ye(n):void 0,c=yield _N(s,r,a,{type:1,triggerAction:Ci.Default,filter:{includeSourceActions:!0,include:l}},Jc.None,Ge.None),d=[],h=Math.min(c.validActions.length,typeof i=="number"?i:0);for(let g=0;g<h;g++)d.push(c.validActions[g].resolve(Ge.None));try{return yield Promise.all(d),c.validActions.map(g=>g.action)}finally{setTimeout(()=>c.dispose(),100)}})});var qre=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Yre=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let ds=u(class tM{constructor(e,t){this._messageWidget=new gi,this._messageListeners=new J,this._editor=e,this._visible=tM.MESSAGE_VISIBLE.bindTo(t)}static get(e){return e.getContribution(tM.ID)}dispose(){this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){Zn(e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._messageWidget.value=new fF(this._editor,t,e),this._messageListeners.add(this._editor.onDidBlurEditorText(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add(new hs(()=>this.closeMessage(),3e3));let n;this._messageListeners.add(this._editor.onMouseMove(i=>{i.target.position&&(n?n.containsPosition(i.target.position)||this.closeMessage():n=new L(t.lineNumber-3,1,i.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(fF.fadeOut(this._messageWidget.value))}},"MessageController");ds.ID="editor.contrib.messageController";ds.MESSAGE_VISIBLE=new ce("messageVisible",!1,m("messageVisible","Whether the editor is currently showing an inline message"));ds=qre([Yre(1,De)],ds);const Xre=Ln.bindToContribution(ds.get);te(new Xre({id:"leaveEditorMessage",precondition:ds.MESSAGE_VISIBLE,handler:o=>o.closeMessage(),kbOpts:{weight:100+30,primary:9}}));let fF=u(class{constructor(e,{lineNumber:t,column:n},i){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:n},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage"),this._domNode.style.marginLeft="-6px";const s=document.createElement("div");s.classList.add("anchor","top"),this._domNode.appendChild(s);const r=document.createElement("div");r.classList.add("message"),r.textContent=i,this._domNode.appendChild(r);const a=document.createElement("div");a.classList.add("anchor","below"),this._domNode.appendChild(a),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}static fadeOut(e){const t=u(()=>{e.dispose(),clearTimeout(n),e.getDomNode().removeEventListener("animationend",t)},"dispose"),n=setTimeout(t,110);return e.getDomNode().addEventListener("animationend",t),e.getDomNode().classList.add("fadeOut"),{dispose:t}}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2],positionAffinity:1}}afterRender(e){this._domNode.classList.toggle("below",e===2)}},"MessageWidget");it(ds.ID,ds);var cW=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},xa=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Zre=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const bp={Visible:new ce("CodeActionMenuVisible",!1,m("CodeActionMenuVisible","Whether the code action list widget is visible"))};class w0 extends Yi{constructor(e,t){super(e.command?e.command.id:e.title,Jre(e.title),void 0,!e.disabled,t),this.action=e}}u(w0,"CodeActionAction");function Jre(o){return o.replace(/\r\n|\r|\n/g," ")}u(Jre,"stripNewlines");const Qre="codeActionWidget",$T=26;let nM=u(class{constructor(e,t){this.acceptKeybindings=e,this.keybindingService=t}get templateId(){return Qre}renderTemplate(e){const t=Object.create(null);return t.disposables=[],t.root=e,t.text=document.createElement("span"),e.append(t.text),t}renderElement(e,t,n){const i=n,s=e.title,r=e.isEnabled,a=e.isSeparator,l=e.isDocumentation;i.text.textContent=s,r?i.root.classList.remove("option-disabled"):(i.root.classList.add("option-disabled"),i.root.style.backgroundColor="transparent !important"),a&&(i.root.classList.add("separator"),i.root.style.height="10px"),l||u(()=>{var d,h;const[g,f]=this.acceptKeybindings;i.root.title=m({key:"label",comment:['placeholders are keybindings, e.g "F2 to Refactor, Shift+F2 to Preview"']},"{0} to Refactor, {1} to Preview",(d=this.keybindingService.lookupKeybinding(g))===null||d===void 0?void 0:d.getLabel(),(h=this.keybindingService.lookupKeybinding(f))===null||h===void 0?void 0:h.getLabel())},"updateLabel")()}disposeTemplate(e){e.disposables=st(e.disposables)}},"CodeMenuRenderer");nM=cW([xa(1,Cn)],nM);let tw=u(class iM extends U{constructor(e,t,n,i,s,r,a,l,c,d){super(),this._editor=e,this._delegate=t,this._contextMenuService=n,this._languageFeaturesService=s,this._telemetryService=r,this._configurationService=l,this._contextViewService=c,this._contextKeyService=d,this._showingActions=this._register(new gi),this.codeActionList=this._register(new gi),this.options=[],this._visible=!1,this.viewItems=[],this.hasSeperator=!1,this._keybindingResolver=new av({getKeybindings:()=>i.getKeybindings()}),this._ctxMenuWidgetVisible=bp.Visible.bindTo(this._contextKeyService),this.listRenderer=new nM(["onEnterSelectCodeAction","onEnterSelectCodeActionWithPreview"],i)}get isVisible(){return this._visible}isCodeActionWidgetEnabled(e){return this._configurationService.getValue("editor.experimental.useCustomCodeActionMenu",{resource:e.uri})}_onListSelection(e){e.elements.length&&e.elements.forEach(t=>{t.isEnabled&&(t.action.run(),this.hideCodeActionWidget())})}_onListHover(e){var t,n,i,s;e.element?!((n=e.element)===null||n===void 0)&&n.isEnabled?((i=this.codeActionList.value)===null||i===void 0||i.setFocus([e.element.index]),this.focusedEnabledItem=this.viewItems.indexOf(e.element),this.currSelectedItem=e.element.index):(this.currSelectedItem=void 0,(s=this.codeActionList.value)===null||s===void 0||s.setFocus([e.element.index])):(this.currSelectedItem=void 0,(t=this.codeActionList.value)===null||t===void 0||t.setFocus([]))}renderCodeActionMenuList(e,t){var n;const i=new J,s=document.createElement("div"),r=document.createElement("div");this.block=e.appendChild(r),this.block.classList.add("context-view-block"),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",i.add(Y(this.block,le.MOUSE_DOWN,g=>g.stopPropagation())),s.id="codeActionMenuWidget",s.classList.add("codeActionMenuWidget"),e.appendChild(s),this.codeActionList.value=new Io("codeActionWidget",s,{getHeight(g){return g.isSeparator?10:$T},getTemplateId(g){return"codeActionWidget"}},[this.listRenderer],{keyboardSupport:!1}),i.add(this.codeActionList.value.onMouseOver(g=>this._onListHover(g))),i.add(this.codeActionList.value.onDidChangeFocus(g=>{var f;return(f=this.codeActionList.value)===null||f===void 0?void 0:f.domFocus()})),i.add(this.codeActionList.value.onDidChangeSelection(g=>this._onListSelection(g))),i.add(this._editor.onDidLayoutChange(g=>this.hideCodeActionWidget())),t.forEach((g,f)=>{const p=g.class==="separator";let _=!1;g instanceof w0&&(_=g.action.kind===iM.documentationID),p&&(this.hasSeperator=!0);const v={title:g.label,detail:g.tooltip,action:t[f],isEnabled:g.enabled,isSeparator:p,index:f,isDocumentation:_};g.enabled&&this.viewItems.push(v),this.options.push(v)}),this.codeActionList.value.splice(0,this.codeActionList.value.length,this.options);const a=this.hasSeperator?(t.length-1)*$T+10:t.length*$T;s.style.height=String(a)+"px",this.codeActionList.value.layout(a);const l=[];this.options.forEach((g,f)=>{var p,_;if(!this.codeActionList.value)return;const v=(_=document.getElementById((p=this.codeActionList.value)===null||p===void 0?void 0:p.getElementID(f)))===null||_===void 0?void 0:_.getElementsByTagName("span")[0].offsetWidth;l.push(Number(v))});const c=Math.max(...l);s.style.width=c+52+"px",(n=this.codeActionList.value)===null||n===void 0||n.layout(a,c),this.viewItems.length<1||this.viewItems.every(g=>g.isDocumentation)?this.currSelectedItem=void 0:(this.focusedEnabledItem=0,this.currSelectedItem=this.viewItems[0].index,this.codeActionList.value.setFocus([this.currSelectedItem])),this.codeActionList.value.domFocus();const d=yu(e),h=d.onDidBlur(()=>{this.hideCodeActionWidget()});return i.add(h),i.add(d),this._ctxMenuWidgetVisible.set(!0),i}focusPrevious(){var e;if(typeof this.focusedEnabledItem>"u")this.focusedEnabledItem=this.viewItems[0].index;else if(this.viewItems.length<1)return!1;const t=this.focusedEnabledItem;let n;do this.focusedEnabledItem=this.focusedEnabledItem-1,this.focusedEnabledItem<0&&(this.focusedEnabledItem=this.viewItems.length-1),n=this.viewItems[this.focusedEnabledItem],(e=this.codeActionList.value)===null||e===void 0||e.setFocus([n.index]),this.currSelectedItem=n.index;while(this.focusedEnabledItem!==t&&(!n.isEnabled||n.action.id===Jn.ID));return!0}focusNext(){var e;if(typeof this.focusedEnabledItem>"u")this.focusedEnabledItem=this.viewItems.length-1;else if(this.viewItems.length<1)return!1;const t=this.focusedEnabledItem;let n;do this.focusedEnabledItem=(this.focusedEnabledItem+1)%this.viewItems.length,n=this.viewItems[this.focusedEnabledItem],(e=this.codeActionList.value)===null||e===void 0||e.setFocus([n.index]),this.currSelectedItem=n.index;while(this.focusedEnabledItem!==t&&(!n.isEnabled||n.action.id===Jn.ID));return!0}navigateListWithKeysUp(){this.focusPrevious()}navigateListWithKeysDown(){this.focusNext()}onEnterSet(){var e;typeof this.currSelectedItem=="number"&&((e=this.codeActionList.value)===null||e===void 0||e.setSelection([this.currSelectedItem]))}dispose(){super.dispose()}hideCodeActionWidget(){this._ctxMenuWidgetVisible.reset(),this.options=[],this.viewItems=[],this.focusedEnabledItem=0,this.currSelectedItem=void 0,this.hasSeperator=!1,this._contextViewService.hideContextView({source:this})}codeActionTelemetry(e,t,n){this._telemetryService.publicLog2("codeAction.applyCodeAction",{codeActionFrom:e,validCodeActions:n.validActions.length,cancelled:t})}show(e,t,n,i){return Zre(this,void 0,void 0,function*(){const s=this._editor.getModel();if(!s)return;const r=i.includeDisabledActions?t.allActions:t.validActions;if(!r.length){this._visible=!1;return}if(!this._editor.getDomNode())throw this._visible=!1,f4();this._visible=!0,this._showingActions.value=t;const a=this.getMenuActions(e,r,t.documentation),l=H.isIPosition(n)?this._toCoords(n):n||{x:0,y:0},c=this._keybindingResolver.getResolver(),d=this._editor.getOption(117);this.isCodeActionWidgetEnabled(s)?this._contextViewService.showContextView({getAnchor:()=>l,render:h=>this.renderCodeActionMenuList(h,a),onHide:h=>{const g=i.fromLightbulb?Ci.Lightbulb:e.triggerAction;this.codeActionTelemetry(g,h,t),this._visible=!1,this._editor.focus()}},this._editor.getDomNode(),!1):this._contextMenuService.showContextMenu({domForShadowRoot:d?this._editor.getDomNode():void 0,getAnchor:()=>l,getActions:()=>a,onHide:h=>{const g=i.fromLightbulb?Ci.Lightbulb:e.triggerAction;this.codeActionTelemetry(g,h,t),this._visible=!1,this._editor.focus()},autoSelectFirstItem:!0,getKeyBinding:h=>h instanceof w0?c(h.action):void 0})})}getMenuActions(e,t,n){var i,s;const r=u(d=>new w0(d.action,()=>this._delegate.onSelectCodeAction(d,e)),"toCodeActionAction"),a=t.map(r),l=[...n],c=this._editor.getModel();if(c&&a.length)for(const d of this._languageFeaturesService.codeActionProvider.all(c))d._getAdditionalMenuItems&&l.push(...d._getAdditionalMenuItems({trigger:e.type,only:(s=(i=e.filter)===null||i===void 0?void 0:i.include)===null||s===void 0?void 0:s.value},t.map(h=>h.action)));return l.length&&a.push(new Jn,...l.map(d=>r(new bN({title:d.title,command:d,kind:iM.documentationID},void 0)))),a}_toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),n=li(this._editor.getDomNode()),i=n.left+t.left,s=n.top+t.top+t.height;return{x:i,y:s}}},"CodeActionMenu");tw.documentationID="_documentation";tw=cW([xa(2,Il),xa(3,Cn),xa(4,ue),xa(5,Tr),xa(6,wt),xa(7,rt),xa(8,fh),xa(9,De)],tw);class av{constructor(e){this._keybindingProvider=e}getResolver(){const e=new mu(()=>this._keybindingProvider.getKeybindings().filter(t=>av.codeActionCommands.indexOf(t.command)>=0).filter(t=>t.resolvedKeybinding).map(t=>{let n=t.commandArgs;return t.command===pN?n={kind:Ye.SourceOrganizeImports.value}:t.command===mN&&(n={kind:Ye.SourceFixAll.value}),Object.assign({resolvedKeybinding:t.resolvedKeybinding},Jo.fromUser(n,{kind:Ye.None,apply:"never"}))}));return t=>{if(t.kind){const n=this.bestKeybindingForCodeAction(t,e.getValue());return n?.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const n=new Ye(e.kind);return t.filter(i=>i.kind.contains(n)).filter(i=>i.preferred?e.isPreferred:!0).reduceRight((i,s)=>i?i.kind.contains(s.kind)?s:i:s,void 0)}}u(av,"CodeActionKeybindingResolver");av.codeActionCommands=[aW,rW,lW,pN,mN];var eae=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},tae=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},$m;(function(o){o.Hidden={type:0};class e{constructor(n,i,s,r){this.actions=n,this.trigger=i,this.editorPosition=s,this.widgetPosition=r,this.type=1}}u(e,"Showing"),o.Showing=e})($m||($m={}));let nw=u(class dW extends U{constructor(e,t,n,i){super(),this._editor=e,this._quickFixActionId=t,this._preferredFixActionId=n,this._keybindingService=i,this._onClick=this._register(new R),this.onClick=this._onClick.event,this._state=$m.Hidden,this._domNode=document.createElement("div"),this._domNode.className=b.lightBulb.classNames,this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(s=>{const r=this._editor.getModel();(this.state.type!==1||!r||this.state.editorPosition.lineNumber>=r.getLineCount())&&this.hide()})),gt.ignoreTarget(this._domNode),this._register(TX(this._domNode,s=>{if(this.state.type!==1)return;this._editor.focus(),s.preventDefault();const{top:r,height:a}=li(this._domNode),l=this._editor.getOption(61);let c=Math.floor(l/3);this.state.widgetPosition.position!==null&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(c+=l),this._onClick.fire({x:s.posx,y:r+a+c,actions:this.state.actions,trigger:this.state.trigger})})),this._register(Y(this._domNode,"mouseenter",s=>{(s.buttons&1)===1&&this.hide()})),this._register(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(59)&&!this._editor.getOption(59).enabled&&this.hide()})),this._updateLightBulbTitleAndIcon(),this._register(this._keybindingService.onDidUpdateKeybindings(this._updateLightBulbTitleAndIcon,this))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return this._state.type===1?this._state.widgetPosition:null}update(e,t,n){if(e.validActions.length<=0)return this.hide();const i=this._editor.getOptions();if(!i.get(59).enabled)return this.hide();const s=this._editor.getModel();if(!s)return this.hide();const{lineNumber:r,column:a}=s.validatePosition(n),l=s.getOptions().tabSize,c=i.get(46),d=s.getLineContent(r),h=py(d,l),g=c.spaceWidth*h>22,f=u(_=>_>2&&this._editor.getTopForLineNumber(_)===this._editor.getTopForLineNumber(_-1),"isFolded");let p=r;if(!g){if(r>1&&!f(r-1))p-=1;else if(!f(r+1))p+=1;else if(a*c.spaceWidth<22)return this.hide()}this.state=new $m.Showing(e,t,n,{position:{lineNumber:p,column:1},preference:dW._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state=$m.Hidden,this._editor.layoutContentWidget(this)}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(this.state.type===1&&this.state.actions.hasAutoFix){this._domNode.classList.remove(...b.lightBulb.classNamesArray),this._domNode.classList.add(...b.lightbulbAutofix.classNamesArray);const t=this._keybindingService.lookupKeybinding(this._preferredFixActionId);if(t){this.title=m("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",t.getLabel());return}}this._domNode.classList.remove(...b.lightbulbAutofix.classNamesArray),this._domNode.classList.add(...b.lightBulb.classNamesArray);const e=this._keybindingService.lookupKeybinding(this._quickFixActionId);e?this.title=m("codeActionWithKb","Show Code Actions ({0})",e.getLabel()):this.title=m("codeAction","Show Code Actions")}set title(e){this._domNode.title=e}},"LightBulbWidget");nw._posPref=[0];nw=eae([tae(3,Cn)],nw);At((o,e)=>{var t;const n=(t=o.getColor(Sn))===null||t===void 0?void 0:t.transparent(.7),i=o.getColor(IZ);i&&e.addRule(`
		.monaco-editor .contentWidgets ${b.lightBulb.cssSelector} {
			color: ${i};
			background-color: ${n};
		}`);const s=o.getColor(NZ);s&&e.addRule(`
		.monaco-editor .contentWidgets ${b.lightbulbAutofix.cssSelector} {
			color: ${s};
			background-color: ${n};
		}`)});var nae=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},iae=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},qT=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})},sae=globalThis&&globalThis.__classPrivateFieldSet||function(o,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?o!==e||!i:!e.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(o,t):i?i.value=t:e.set(o,t),t},oae=globalThis&&globalThis.__classPrivateFieldGet||function(o,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?o!==e||!n:!e.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(o):n?n.value:e.get(o)},y0;let sM=u(class extends U{constructor(e,t,n,i,s){super(),this._editor=e,this.delegate=i,this._activeCodeActions=this._register(new gi),this.previewOn=!1,y0.set(this,!1),this._codeActionWidget=new mu(()=>this._register(s.createInstance(tw,this._editor,{onSelectCodeAction:(r,a)=>qT(this,void 0,void 0,function*(){this.previewOn?this.delegate.applyCodeAction(r,!0,Boolean(this.previewOn)):this.delegate.applyCodeAction(r,!0,Boolean(a.preview)),this.previewOn=!1})}))),this._lightBulbWidget=new mu(()=>{const r=this._register(s.createInstance(nw,this._editor,t,n));return this._register(r.onClick(a=>this.showCodeActionList(a.trigger,a.actions,a,{includeDisabledActions:!1,fromLightbulb:!0}))),r})}dispose(){sae(this,y0,!0,"f"),super.dispose()}hideCodeActionWidget(){this._codeActionWidget.hasValue()&&this._codeActionWidget.getValue().hideCodeActionWidget()}onEnter(){this._codeActionWidget.hasValue()&&this._codeActionWidget.getValue().onEnterSet()}onPreviewEnter(){this.previewOn=!0,this.onEnter()}navigateList(e){this._codeActionWidget.hasValue()&&(e?this._codeActionWidget.getValue().navigateListWithKeysUp():this._codeActionWidget.getValue().navigateListWithKeysDown())}update(e){var t,n,i,s,r;return qT(this,void 0,void 0,function*(){if(e.type!==1){(t=this._lightBulbWidget.rawValue)===null||t===void 0||t.hide();return}let a;try{a=yield e.actions}catch(l){Ie(l);return}if(!oae(this,y0,"f"))if(this._lightBulbWidget.getValue().update(a,e.trigger,e.position),e.trigger.type===1){if(!((n=e.trigger.filter)===null||n===void 0)&&n.include){const c=this.tryGetValidActionToApply(e.trigger,a);if(c){try{this._lightBulbWidget.getValue().hide(),yield this.delegate.applyCodeAction(c,!1,!1)}finally{a.dispose()}return}if(e.trigger.context){const d=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,a);if(d&&d.action.disabled){(i=ds.get(this._editor))===null||i===void 0||i.showMessage(d.action.disabled,e.trigger.context.position),a.dispose();return}}}const l=!!(!((s=e.trigger.filter)===null||s===void 0)&&s.include);if(e.trigger.context&&(!a.allActions.length||!l&&!a.validActions.length)){(r=ds.get(this._editor))===null||r===void 0||r.showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=a,a.dispose();return}this._activeCodeActions.value=a,this._codeActionWidget.getValue().show(e.trigger,a,e.position,{includeDisabledActions:l,fromLightbulb:!1})}else this._codeActionWidget.getValue().isVisible?a.dispose():this._activeCodeActions.value=a})}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length&&(e.autoApply==="first"&&t.validActions.length===0||e.autoApply==="ifSingle"&&t.allActions.length===1))return t.allActions.find(({action:n})=>n.disabled)}tryGetValidActionToApply(e,t){if(t.validActions.length&&(e.autoApply==="first"&&t.validActions.length>0||e.autoApply==="ifSingle"&&t.validActions.length===1))return t.validActions[0]}showCodeActionList(e,t,n,i){return qT(this,void 0,void 0,function*(){this._codeActionWidget.getValue().show(e,t,n,i)})}},"CodeActionUi");y0=new WeakMap;sM=nae([iae(4,Ne)],sM);var YT=globalThis&&globalThis.__classPrivateFieldGet||function(o,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?o!==e||!n:!e.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(o):n?n.value:e.get(o)},rae=globalThis&&globalThis.__classPrivateFieldSet||function(o,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?o!==e||!i:!e.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(o,t):i?i.value=t:e.set(o,t),t},ng;const uW=new ce("supportedCodeAction","");class hW extends U{constructor(e,t,n,i=250){super(),this._editor=e,this._markerService=t,this._signalChange=n,this._delay=i,this._autoTriggerTimer=this._register(new hs),this._register(this._markerService.onMarkerChanged(s=>this._onMarkerChanges(s))),this._register(this._editor.onDidChangeCursorPosition(()=>this._onCursorChange()))}trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);return this._createEventAndSignalChange(e,t)}_onMarkerChanges(e){const t=this._editor.getModel();t&&e.some(n=>M7(n,t.uri))&&this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2,triggerAction:Ci.Default})},this._delay)}_onCursorChange(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2,triggerAction:Ci.Default})},this._delay)}_getRangeOfMarker(e){const t=this._editor.getModel();if(t)for(const n of this._markerService.read({resource:t.uri})){const i=t.validateRange(n);if(L.intersectRanges(i,e))return L.lift(i)}}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),n=this._editor.getSelection();if(n.isEmpty()&&e.type===2){const{lineNumber:i,column:s}=n.getPosition(),r=t.getLineContent(i);if(r.length===0)return;if(s===1){if(/\s/.test(r[0]))return}else if(s===t.getLineMaxColumn(i)){if(/\s/.test(r[r.length-1]))return}else if(/\s/.test(r[s-2])&&/\s/.test(r[s-1]))return}return n}_createEventAndSignalChange(e,t){const n=this._editor.getModel();if(!t||!n){this._signalChange(void 0);return}const i=this._getRangeOfMarker(t),s=i?i.getStartPosition():t.getStartPosition(),r={trigger:e,selection:t,position:s};return this._signalChange(r),r}}u(hW,"CodeActionOracle");var Ad;(function(o){o.Empty={type:0};class e{constructor(n,i,s,r){this.trigger=n,this.rangeOrSelection=i,this.position=s,this._cancellablePromise=r,this.type=1,this.actions=r.catch(a=>{if(ca(a))return aae;throw a})}cancel(){this._cancellablePromise.cancel()}}u(e,"Triggered"),o.Triggered=e})(Ad||(Ad={}));const aae={allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1};class gW extends U{constructor(e,t,n,i,s){super(),this._editor=e,this._registry=t,this._markerService=n,this._progressService=s,this._codeActionOracle=this._register(new gi),this._state=Ad.Empty,this._onDidChangeState=this._register(new R),this.onDidChangeState=this._onDidChangeState.event,ng.set(this,!1),this._supportedCodeActions=uW.bindTo(i),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(this._registry.onDidChange(()=>this._update())),this._update()}dispose(){YT(this,ng,"f")||(rae(this,ng,!0,"f"),super.dispose(),this.setState(Ad.Empty,!0))}_update(){if(YT(this,ng,"f"))return;this._codeActionOracle.value=void 0,this.setState(Ad.Empty);const e=this._editor.getModel();if(e&&this._registry.has(e)&&!this._editor.getOption(83)){const t=[];for(const n of this._registry.all(e))Array.isArray(n.providedCodeActionKinds)&&t.push(...n.providedCodeActionKinds);this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new hW(this._editor,this._markerService,n=>{var i;if(!n){this.setState(Ad.Empty);return}const s=On(r=>_N(this._registry,e,n.selection,n.trigger,Jc.None,r));n.trigger.type===1&&((i=this._progressService)===null||i===void 0||i.showWhile(s,250)),this.setState(new Ad.Triggered(n.trigger,n.selection,n.position,s))},void 0),this._codeActionOracle.value.trigger({type:2,triggerAction:Ci.Default})}else this._supportedCodeActions.reset()}trigger(e){var t;(t=this._codeActionOracle.value)===null||t===void 0||t.trigger(e)}setState(e,t){e!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=e,!t&&!YT(this,ng,"f")&&this._onDidChangeState.fire(e))}}u(gW,"CodeActionModel");ng=new WeakMap;var lae=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},jp=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},fW=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};function lv(o){return oe.regex(uW.keys()[0],new RegExp("(\\s|^)"+As(o.value)+"\\b"))}u(lv,"contextKeyForSupportedActions");function pW(o,e,t,n){const i=Jo.fromUser(e,{kind:Ye.Refactor,apply:"never"});return vh(o,typeof e?.kind=="string"?i.preferred?m("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",e.kind):m("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",e.kind):i.preferred?m("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):m("editor.action.refactor.noneMessage","No refactorings available"),{include:Ye.Refactor.contains(i.kind)?i.kind:Ye.None,onlyIncludePreferredActions:i.preferred},i.apply,t,n)}u(pW,"refactorTrigger");const fS={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:m("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:m("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[m("args.schema.apply.first","Always apply the first returned code action."),m("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),m("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:m("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};let Wc=u(class mW extends U{constructor(e,t,n,i,s,r){super(),this._instantiationService=s,this._editor=e,this._model=this._register(new gW(this._editor,r.codeActionProvider,t,n,i)),this._register(this._model.onDidChangeState(a=>this.update(a))),this._ui=new mu(()=>this._register(new sM(e,Ch.Id,_p.Id,{applyCodeAction:(a,l,c)=>fW(this,void 0,void 0,function*(){try{yield this._applyCodeAction(a,c)}finally{l&&this._trigger({type:2,triggerAction:Ci.QuickFix,filter:{}})}})},this._instantiationService)))}static get(e){return e.getContribution(mW.ID)}update(e){this._ui.getValue().update(e)}hideCodeActionMenu(){this._ui.hasValue()&&this._ui.getValue().hideCodeActionWidget()}navigateCodeActionList(e){this._ui.hasValue()&&this._ui.getValue().navigateList(e)}selectedOption(){this._ui.hasValue()&&this._ui.getValue().onEnter()}selectedOptionWithPreview(){this._ui.hasValue()&&this._ui.getValue().onPreviewEnter()}showCodeActions(e,t,n){return this._ui.getValue().showCodeActionList(e,t,n,{includeDisabledActions:!1,fromLightbulb:!1})}manualTriggerAtCurrentPosition(e,t,n,i,s){var r;if(!this._editor.hasModel())return;(r=ds.get(this._editor))===null||r===void 0||r.closeMessage();const a=this._editor.getPosition();this._trigger({type:1,triggerAction:t,filter:n,autoApply:i,context:{notAvailableMessage:e,position:a},preview:s})}_trigger(e){return this._model.trigger(e)}_applyCodeAction(e,t){return this._instantiationService.invokeFunction(cae,e,oM.FromCodeActions,{preview:t,editor:this._editor})}},"QuickFixController");Wc.ID="editor.contrib.quickFixController";Wc=lae([jp(1,ha),jp(2,De),jp(3,Qc),jp(4,Ne),jp(5,ue)],Wc);var oM;(function(o){o.OnSave="onSave",o.FromProblemsView="fromProblemsView",o.FromCodeActions="fromCodeActions"})(oM||(oM={}));function cae(o,e,t,n){return fW(this,void 0,void 0,function*(){const i=o.get($_),s=o.get(hn),r=o.get(Tr),a=o.get(gn);if(r.publicLog2("codeAction.applyCodeAction",{codeActionTitle:e.action.title,codeActionKind:e.action.kind,codeActionIsPreferred:!!e.action.isPreferred,reason:t}),yield e.resolve(Ge.None),e.action.edit&&(yield i.apply(ph.convert(e.action.edit),{editor:n?.editor,label:e.action.title,quotableLabel:e.action.title,code:"undoredo.codeAction",respectAutoSaveConfig:!0,showPreview:n?.preview})),e.action.command)try{yield s.executeCommand(e.action.command.id,...e.action.command.arguments||[])}catch(l){const c=dae(l);a.error(typeof c=="string"?c:m("applyCodeActionFailed","An unknown error occurred while applying the code action"))}})}u(cae,"applyCodeAction");function dae(o){return typeof o=="string"?o:o instanceof Error&&typeof o.message=="string"?o.message:void 0}u(dae,"asMessage");function vh(o,e,t,n,i=!1,s=Ci.Default){if(o.hasModel()){const r=Wc.get(o);r?.manualTriggerAtCurrentPosition(e,s,t,n,i)}}u(vh,"triggerCodeActionsForEditorSelection");class Ch extends de{constructor(){super({id:Ch.Id,label:m("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:oe.and(A.writable,A.hasCodeActionsProvider),kbOpts:{kbExpr:A.editorTextFocus,primary:2132,weight:100}})}run(e,t){return vh(t,m("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0,!1,Ci.QuickFix)}}u(Ch,"QuickFixAction");Ch.Id="editor.action.quickFix";class bW extends Ln{constructor(){super({id:rW,precondition:oe.and(A.writable,A.hasCodeActionsProvider),description:{description:"Trigger a code action",args:[{name:"args",schema:fS}]}})}runEditorCommand(e,t,n){const i=Jo.fromUser(n,{kind:Ye.Empty,apply:"ifSingle"});return vh(t,typeof n?.kind=="string"?i.preferred?m("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",n.kind):m("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",n.kind):i.preferred?m("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):m("editor.action.codeAction.noneMessage","No code actions available"),{include:i.kind,includeSourceActions:!0,onlyIncludePreferredActions:i.preferred},i.apply)}}u(bW,"CodeActionCommand");class _W extends de{constructor(){super({id:aW,label:m("refactor.label","Refactor..."),alias:"Refactor...",precondition:oe.and(A.writable,A.hasCodeActionsProvider),kbOpts:{kbExpr:A.editorTextFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:oe.and(A.writable,lv(Ye.Refactor))},description:{description:"Refactor...",args:[{name:"args",schema:fS}]}})}run(e,t,n){return pW(t,n,!1,Ci.Refactor)}}u(_W,"RefactorAction");class vW extends de{constructor(){super({id:Kre,label:m("refactor.preview.label","Refactor with Preview..."),alias:"Refactor Preview...",precondition:oe.and(A.writable,A.hasCodeActionsProvider),description:{description:"Refactor Preview...",args:[{name:"args",schema:fS}]}})}run(e,t,n){return pW(t,n,!0,Ci.RefactorPreview)}}u(vW,"RefactorPreview");class CW extends de{constructor(){super({id:lW,label:m("source.label","Source Action..."),alias:"Source Action...",precondition:oe.and(A.writable,A.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:oe.and(A.writable,lv(Ye.Source))},description:{description:"Source Action...",args:[{name:"args",schema:fS}]}})}run(e,t,n){const i=Jo.fromUser(n,{kind:Ye.Source,apply:"never"});return vh(t,typeof n?.kind=="string"?i.preferred?m("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",n.kind):m("editor.action.source.noneMessage.kind","No source actions for '{0}' available",n.kind):i.preferred?m("editor.action.source.noneMessage.preferred","No preferred source actions available"):m("editor.action.source.noneMessage","No source actions available"),{include:Ye.Source.contains(i.kind)?i.kind:Ye.None,includeSourceActions:!0,onlyIncludePreferredActions:i.preferred},i.apply,void 0,Ci.SourceAction)}}u(CW,"SourceAction");class wW extends de{constructor(){super({id:pN,label:m("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:oe.and(A.writable,lv(Ye.SourceOrganizeImports)),kbOpts:{kbExpr:A.editorTextFocus,primary:1581,weight:100}})}run(e,t){return vh(t,m("editor.action.organize.noneMessage","No organize imports action available"),{include:Ye.SourceOrganizeImports,includeSourceActions:!0},"ifSingle",void 0,Ci.OrganizeImports)}}u(wW,"OrganizeImportsAction");class yW extends de{constructor(){super({id:mN,label:m("fixAll.label","Fix All"),alias:"Fix All",precondition:oe.and(A.writable,lv(Ye.SourceFixAll))})}run(e,t){return vh(t,m("fixAll.noneMessage","No fix all action available"),{include:Ye.SourceFixAll,includeSourceActions:!0},"ifSingle",void 0,Ci.FixAll)}}u(yW,"FixAllAction");class _p extends de{constructor(){super({id:_p.Id,label:m("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:oe.and(A.writable,lv(Ye.QuickFix)),kbOpts:{kbExpr:A.editorTextFocus,primary:1620,mac:{primary:2644},weight:100}})}run(e,t){return vh(t,m("editor.action.autoFix.noneMessage","No auto fixes available"),{include:Ye.QuickFix,onlyIncludePreferredActions:!0},"ifSingle",void 0,Ci.AutoFix)}}u(_p,"AutoFixAction");_p.Id="editor.action.autoFix";const cv=Ln.bindToContribution(Wc.get),dv=100+90;te(new cv({id:"hideCodeActionMenuWidget",precondition:bp.Visible,handler(o){o.hideCodeActionMenu()},kbOpts:{weight:dv,primary:9,secondary:[1033]}}));te(new cv({id:"focusPreviousCodeAction",precondition:bp.Visible,handler(o){o.navigateCodeActionList(!0)},kbOpts:{weight:dv+1e5,primary:16,secondary:[2064]}}));te(new cv({id:"focusNextCodeAction",precondition:bp.Visible,handler(o){o.navigateCodeActionList(!1)},kbOpts:{weight:dv+1e5,primary:18,secondary:[2066]}}));te(new cv({id:"onEnterSelectCodeAction",precondition:bp.Visible,handler(o){o.selectedOption()},kbOpts:{weight:dv+1e5,primary:3,secondary:[1026]}}));te(new cv({id:"onEnterSelectCodeActionWithPreview",precondition:bp.Visible,handler(o){o.selectedOptionWithPreview()},kbOpts:{weight:dv+1e5,primary:2051}}));zt.as(kl.Configuration).registerConfiguration(Object.assign(Object.assign({},_I),{properties:{"editor.experimental.useCustomCodeActionMenu":{type:"boolean",tags:["experimental"],scope:5,description:m("codeActionWidget","Enabling this adjusts how the code action menu is rendered."),default:!1}}}));it(Wc.ID,Wc);ie(Ch);ie(_W);ie(vW);ie(CW);ie(wW);ie(_p);ie(yW);te(new bW);var pF=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class iw{constructor(){this.lenses=[],this._disposables=new J}dispose(){this._disposables.dispose()}get isDisposed(){return this._disposables.isDisposed}add(e,t){this._disposables.add(e);for(const n of e.lenses)this.lenses.push({symbol:n,provider:t})}}u(iw,"CodeLensModel");function SW(o,e,t){return pF(this,void 0,void 0,function*(){const n=o.ordered(e),i=new Map,s=new iw,r=n.map((a,l)=>pF(this,void 0,void 0,function*(){i.set(a,l);try{const c=yield Promise.resolve(a.provideCodeLenses(e,t));c&&s.add(c,a)}catch(c){Hn(c)}}));return yield Promise.all(r),s.lenses=s.lenses.sort((a,l)=>a.symbol.range.startLineNumber<l.symbol.range.startLineNumber?-1:a.symbol.range.startLineNumber>l.symbol.range.startLineNumber?1:i.get(a.provider)<i.get(l.provider)?-1:i.get(a.provider)>i.get(l.provider)?1:a.symbol.range.startColumn<l.symbol.range.startColumn?-1:a.symbol.range.startColumn>l.symbol.range.startColumn?1:0),s})}u(SW,"getCodeLensModel");Qe.registerCommand("_executeCodeLensProvider",function(o,...e){let[t,n]=e;bt(be.isUri(t)),bt(typeof n=="number"||!n);const{codeLensProvider:i}=o.get(ue),s=o.get(Kt).getModel(t);if(!s)throw dr();const r=[],a=new J;return SW(i,s,Ge.None).then(l=>{a.add(l);const c=[];for(const d of l.lenses)n==null||Boolean(d.symbol.command)?r.push(d.symbol):n-- >0&&d.provider.resolveCodeLens&&c.push(Promise.resolve(d.provider.resolveCodeLens(s,d.symbol,Ge.None)).then(h=>r.push(h||d.symbol)));return Promise.all(c)}).then(()=>r).finally(()=>{setTimeout(()=>a.dispose(),100)})});var uae=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},hae=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const TW=Je("ICodeLensCache");class rM{constructor(e,t){this.lineCount=e,this.data=t}}u(rM,"CacheItem");let aM=u(class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new Al(20,.75);const t="codelens/cache";lb(()=>e.remove(t,1));const n="codelens/cache2",i=e.get(n,1,"{}");this._deserialize(i),fl(e.onWillSaveState)(s=>{s.reason===Y1.SHUTDOWN&&e.store(n,this._serialize(),1,1)})}put(e,t){const n=t.lenses.map(r=>{var a;return{range:r.symbol.range,command:r.symbol.command&&{id:"",title:(a=r.symbol.command)===null||a===void 0?void 0:a.title}}}),i=new iw;i.add({lenses:n,dispose:()=>{}},this._fakeProvider);const s=new rM(e.getLineCount(),i);this._cache.set(e.uri.toString(),s)}get(e){const t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){const e=Object.create(null);for(const[t,n]of this._cache){const i=new Set;for(const s of n.data.lenses)i.add(s.symbol.range.startLineNumber);e[t]={lineCount:n.lineCount,lines:[...i.values()]}}return JSON.stringify(e)}_deserialize(e){try{const t=JSON.parse(e);for(const n in t){const i=t[n],s=[];for(const a of i.lines)s.push({range:new L(a,1,a,11)});const r=new iw;r.add({lenses:s,dispose(){}},this._fakeProvider),this._cache.set(n,new rM(i.lineCount,r))}}catch{}}},"CodeLensCache");aM=uae([hae(0,No)],aM);nt(TW,aM);class LW{constructor(e,t,n){this.afterColumn=1073741824,this.afterLineNumber=e,this.heightInPx=t,this._onHeight=n,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){this._lastHeight===void 0?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return this._lastHeight!==0&&this.domNode.hasAttribute("monaco-visible-view-zone")}}u(LW,"CodeLensViewZone");class uv{constructor(e,t,n){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id=`codelens.widget-${uv._idPool++}`,this.updatePosition(n),this._domNode=document.createElement("span"),this._domNode.className=`codelens-decoration ${t}`}withCommands(e,t){this._commands.clear();const n=[];let i=!1;for(let s=0;s<e.length;s++){const r=e[s];if(r&&(i=!0,r.command)){const a=ou(r.command.title.trim());r.command.id?(n.push(ee("a",{id:String(s),title:r.command.tooltip,role:"button"},...a)),this._commands.set(String(s),r.command)):n.push(ee("span",{title:r.command.tooltip},...a)),s+1<e.length&&n.push(ee("span",void 0," | "))}}i?(kc(this._domNode,...n),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):kc(this._domNode,ee("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){const t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}}u(uv,"CodeLensContentWidget");uv._idPool=0;class S0{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){const t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let n=0,i=t.length;n<i;n++)this._addDecorationsCallbacks[n](t[n])}}u(S0,"CodeLensHelper");class lM{constructor(e,t,n,i,s,r,a){this._isDisposed=!1,this._editor=t,this._className=n,this._data=e,this._decorationIds=[];let l;const c=[];this._data.forEach((d,h)=>{d.symbol.command&&c.push(d.symbol),i.addDecoration({range:d.symbol.range,options:Ae.EMPTY},g=>this._decorationIds[h]=g),l?l=L.plusRange(l,d.symbol.range):l=L.lift(d.symbol.range)}),this._viewZone=new LW(l.startLineNumber-1,r,a),this._viewZoneId=s.addZone(this._viewZone),c.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(c,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new uv(this._editor,this._className,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],t?.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some((e,t)=>{const n=this._editor.getModel().getDecorationRange(e),i=this._data[t].symbol;return!!(n&&L.isEmpty(i.range)===n.isEmpty())})}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach((n,i)=>{t.addDecoration({range:n.symbol.range,options:Ae.EMPTY},s=>this._decorationIds[i]=s)})}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){const n=e.getDecorationRange(this._decorationIds[t]);n&&(this._data[t].symbol.range=n)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){const n=e[t];if(n){const{symbol:i}=this._data[t];i.command=n.command||i.command}}}getCommand(e){var t;return(t=this._contentWidget)===null||t===void 0?void 0:t.getCommand(e)}getLineNumber(){const e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}}u(lM,"CodeLensWidget");var gae=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},$p=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},fae=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let Of=u(class{constructor(e,t,n,i,s,r){this._editor=e,this._languageFeaturesService=t,this._commandService=i,this._notificationService=s,this._codeLensCache=r,this._disposables=new J,this._localToDispose=new J,this._lenses=[],this._oldCodeLensModels=new J,this._provideCodeLensDebounce=n.for(t.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=n.for(t.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new pt(()=>this._resolveCodeLensesInViewport(),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeConfiguration(a=>{(a.hasChanged(46)||a.hasChanged(16)||a.hasChanged(15))&&this._updateLensStyle(),a.hasChanged(14)&&this._onModelChange()})),this._disposables.add(t.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._styleClassName="_"+nA(this._editor.getId()).toString(16),this._styleElement=oo(fb(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),(e=this._currentCodeLensModel)===null||e===void 0||e.dispose(),this._styleElement.remove()}_getLayoutInfo(){const e=Math.max(1.3,this._editor.getOption(61)/this._editor.getOption(48));let t=this._editor.getOption(16);return(!t||t<5)&&(t=this._editor.getOption(48)*.9|0),{fontSize:t,codeLensHeight:t*e|0}}_updateLensStyle(){const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),n=this._editor.getOption(15),i=this._editor.getOption(46),s=`--codelens-font-family${this._styleClassName}`,r=`--codelens-font-features${this._styleClassName}`;let a=`
		.monaco-editor .codelens-decoration.${this._styleClassName} { line-height: ${e}px; font-size: ${t}px; padding-right: ${Math.round(t*.5)}px; font-feature-settings: var(${r}) }
		.monaco-editor .codelens-decoration.${this._styleClassName} span.codicon { line-height: ${e}px; font-size: ${t}px; }
		`;n&&(a+=`.monaco-editor .codelens-decoration.${this._styleClassName} { font-family: var(${s}), ${rs.fontFamily}}`),this._styleElement.textContent=a,this._editor.getContainerDomNode().style.setProperty(s,n??"inherit"),this._editor.getContainerDomNode().style.setProperty(r,i.fontFeatureSettings),this._editor.changeViewZones(l=>{for(const c of this._lenses)c.updateHeight(e,l)})}_localDispose(){var e,t,n;(e=this._getCodeLensModelPromise)===null||e===void 0||e.cancel(),this._getCodeLensModelPromise=void 0,(t=this._resolveCodeLensesPromise)===null||t===void 0||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),(n=this._currentCodeLensModel)===null||n===void 0||n.dispose()}_onModelChange(){this._localDispose();const e=this._editor.getModel();if(!e||!this._editor.getOption(14))return;const t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!this._languageFeaturesService.codeLensProvider.has(e)){t&&this._localToDispose.add(vu(()=>{const i=this._codeLensCache.get(e);t===i&&(this._codeLensCache.delete(e),this._onModelChange())},30*1e3));return}for(const i of this._languageFeaturesService.codeLensProvider.all(e))if(typeof i.onDidChange=="function"){const s=i.onDidChange(()=>n.schedule());this._localToDispose.add(s)}const n=new pt(()=>{var i;const s=Date.now();(i=this._getCodeLensModelPromise)===null||i===void 0||i.cancel(),this._getCodeLensModelPromise=On(r=>SW(this._languageFeaturesService.codeLensProvider,e,r)),this._getCodeLensModelPromise.then(r=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=r,this._codeLensCache.put(e,r);const a=this._provideCodeLensDebounce.update(e,Date.now()-s);n.delay=a,this._renderCodeLensSymbols(r),this._resolveCodeLensesInViewportSoon()},Ie)},this._provideCodeLensDebounce.get(e));this._localToDispose.add(n),this._localToDispose.add(He(()=>this._resolveCodeLensesScheduler.cancel())),this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._editor.changeDecorations(i=>{this._editor.changeViewZones(s=>{const r=[];let a=-1;this._lenses.forEach(c=>{!c.isValid()||a===c.getLineNumber()?r.push(c):(c.update(s),a=c.getLineNumber())});const l=new S0;r.forEach(c=>{c.dispose(l,s),this._lenses.splice(this._lenses.indexOf(c),1)}),l.commit(i)})}),n.schedule()})),this._localToDispose.add(this._editor.onDidFocusEditorWidget(()=>{n.schedule()})),this._localToDispose.add(this._editor.onDidScrollChange(i=>{i.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(this._editor.onDidLayoutChange(()=>{this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(He(()=>{if(this._editor.getModel()){const i=wl.capture(this._editor);this._editor.changeDecorations(s=>{this._editor.changeViewZones(r=>{this._disposeAllLenses(s,r)})}),i.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)})),this._localToDispose.add(this._editor.onMouseDown(i=>{if(i.target.type!==9)return;let s=i.target.element;if(s?.tagName==="SPAN"&&(s=s.parentElement),s?.tagName==="A")for(const r of this._lenses){const a=r.getCommand(s);if(a){this._commandService.executeCommand(a.id,...a.arguments||[]).catch(l=>this._notificationService.error(l));break}}})),n.schedule()}_disposeAllLenses(e,t){const n=new S0;for(const i of this._lenses)i.dispose(n,t);e&&n.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;const t=this._editor.getModel().getLineCount(),n=[];let i;for(const a of e.lenses){const l=a.symbol.range.startLineNumber;l<1||l>t||(i&&i[i.length-1].symbol.range.startLineNumber===l?i.push(a):(i=[a],n.push(i)))}const s=wl.capture(this._editor),r=this._getLayoutInfo();this._editor.changeDecorations(a=>{this._editor.changeViewZones(l=>{const c=new S0;let d=0,h=0;for(;h<n.length&&d<this._lenses.length;){const g=n[h][0].symbol.range.startLineNumber,f=this._lenses[d].getLineNumber();f<g?(this._lenses[d].dispose(c,l),this._lenses.splice(d,1)):f===g?(this._lenses[d].updateCodeLensSymbols(n[h],c),h++,d++):(this._lenses.splice(d,0,new lM(n[h],this._editor,this._styleClassName,c,l,r.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),d++,h++)}for(;d<this._lenses.length;)this._lenses[d].dispose(c,l),this._lenses.splice(d,1);for(;h<n.length;)this._lenses.push(new lM(n[h],this._editor,this._styleClassName,c,l,r.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),h++;c.commit(a)})}),s.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var e;(e=this._resolveCodeLensesPromise)===null||e===void 0||e.cancel(),this._resolveCodeLensesPromise=void 0;const t=this._editor.getModel();if(!t)return;const n=[],i=[];if(this._lenses.forEach(a=>{const l=a.computeIfNecessary(t);l&&(n.push(l),i.push(a))}),n.length===0)return;const s=Date.now(),r=On(a=>{const l=n.map((c,d)=>{const h=new Array(c.length),g=c.map((f,p)=>!f.symbol.command&&typeof f.provider.resolveCodeLens=="function"?Promise.resolve(f.provider.resolveCodeLens(t,f.symbol,a)).then(_=>{h[p]=_},Hn):(h[p]=f.symbol,Promise.resolve(void 0)));return Promise.all(g).then(()=>{!a.isCancellationRequested&&!i[d].isDisposed()&&i[d].updateCommands(h)})});return Promise.all(l)});this._resolveCodeLensesPromise=r,this._resolveCodeLensesPromise.then(()=>{const a=this._resolveCodeLensesDebounce.update(t,Date.now()-s);this._resolveCodeLensesScheduler.delay=a,this._currentCodeLensModel&&this._codeLensCache.put(t,this._currentCodeLensModel),this._oldCodeLensModels.clear(),r===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)},a=>{Ie(a),r===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)})}getModel(){return this._currentCodeLensModel}},"CodeLensContribution");Of.ID="css.editor.codeLens";Of=gae([$p(1,ue),$p(2,ho),$p(3,hn),$p(4,gn),$p(5,TW)],Of);it(Of.ID,Of);ie(u(class extends de{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:A.hasCodeLensProvider,label:m("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}run(e,t){return fae(this,void 0,void 0,function*(){if(!t.hasModel())return;const n=e.get(Pl),i=e.get(hn),s=e.get(gn),r=t.getSelection().positionLineNumber,a=t.getContribution(Of.ID);if(!a)return;const l=a.getModel();if(!l)return;const c=[];for(const h of l.lenses)h.symbol.command&&h.symbol.range.startLineNumber===r&&c.push({label:h.symbol.command.title,command:h.symbol.command});if(c.length===0)return;const d=yield n.pick(c,{canPickMany:!1});if(d){if(l.isDisposed)return yield i.executeCommand(this.id);try{yield i.executeCommand(d.command.id,...d.command.arguments||[])}catch(h){s.error(h)}}})}},"ShowLensesInCurrentLine"));function pae(o,e,t){const n=[],s=o.ordered(e).reverse().map(r=>Promise.resolve(r.provideDocumentColors(e,t)).then(a=>{if(Array.isArray(a))for(const l of a)n.push({colorInfo:l,provider:r})}));return Promise.all(s).then(()=>n)}u(pae,"getColors");function mF(o,e,t,n){return Promise.resolve(t.provideColorPresentations(o,e,n))}u(mF,"getColorPresentations");Qe.registerCommand("_executeDocumentColorProvider",function(o,...e){const[t]=e;if(!(t instanceof be))throw dr();const{colorProvider:n}=o.get(ue),i=o.get(Kt).getModel(t);if(!i)throw dr();const s=[],a=n.ordered(i).reverse().map(l=>Promise.resolve(l.provideDocumentColors(i,Ge.None)).then(c=>{if(Array.isArray(c))for(const d of c)s.push({range:d.range,color:[d.color.red,d.color.green,d.color.blue,d.color.alpha]})}));return Promise.all(a).then(()=>s)});Qe.registerCommand("_executeColorPresentationProvider",function(o,...e){const[t,n]=e,{uri:i,range:s}=n;if(!(i instanceof be)||!Array.isArray(t)||t.length!==4||!L.isIRange(s))throw dr();const[r,a,l,c]=t,{colorProvider:d}=o.get(ue),h=o.get(Kt).getModel(i);if(!h)throw dr();const g={range:s,color:{red:r,green:a,blue:l,alpha:c}},f=[],_=d.ordered(h).reverse().map(v=>Promise.resolve(v.provideColorPresentations(h,g,Ge.None)).then(C=>{Array.isArray(C)&&f.push(...C)}));return Promise.all(_).then(()=>f)});var mae=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},XT=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},bae=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const xW=Object.create({}),_ae=500;let Bu=u(class EW extends U{constructor(e,t,n,i){super(),this._editor=e,this._configurationService=t,this._languageFeaturesService=n,this._localToDispose=this._register(new J),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=this._editor.createDecorationsCollection(),this._ruleFactory=new sp(this._editor),this._colorDecorationClassRefs=this._register(new J),this._debounceInformation=i.for(n.colorProvider,"Document Colors",{min:EW.RECOMPUTE_TIME}),this._register(e.onDidChangeModel(()=>{this._isEnabled=this.isEnabled(),this.onModelChanged()})),this._register(e.onDidChangeModelLanguage(()=>this.onModelChanged())),this._register(n.colorProvider.onDidChange(()=>this.onModelChanged())),this._register(e.onDidChangeConfiguration(()=>{const s=this._isEnabled;this._isEnabled=this.isEnabled(),s!==this._isEnabled&&(this._isEnabled?this.onModelChanged():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isEnabled=this.isEnabled(),this.onModelChanged()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageId(),n=this._configurationService.getValue(t);if(n&&typeof n=="object"){const i=n.colorDecorators;if(i&&i.enable!==void 0&&!i.enable)return i.enable}return this._editor.getOption(17)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}onModelChanged(){if(this.stop(),!this._isEnabled)return;const e=this._editor.getModel();!e||!this._languageFeaturesService.colorProvider.has(e)||(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new hs,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},this._debounceInformation.get(e)))})),this.beginCompute())}beginCompute(){this._computePromise=On(e=>bae(this,void 0,void 0,function*(){const t=this._editor.getModel();if(!t)return Promise.resolve([]);const n=new Ai(!1),i=yield pae(this._languageFeaturesService.colorProvider,t,e);return this._debounceInformation.update(t,n.elapsed()),i})),this._computePromise.then(e=>{this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null},Ie)}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map(n=>({range:{startLineNumber:n.colorInfo.range.startLineNumber,startColumn:n.colorInfo.range.startColumn,endLineNumber:n.colorInfo.range.endLineNumber,endColumn:n.colorInfo.range.endColumn},options:Ae.EMPTY}));this._editor.changeDecorations(n=>{this._decorationsIds=n.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach((i,s)=>this._colorDatas.set(i,e[s]))})}updateColorDecorators(e){this._colorDecorationClassRefs.clear();const t=[];for(let n=0;n<e.length&&t.length<_ae;n++){const{red:i,green:s,blue:r,alpha:a}=e[n].colorInfo.color,l=new $e(Math.round(i*255),Math.round(s*255),Math.round(r*255),a),c=`rgba(${l.r}, ${l.g}, ${l.b}, ${l.a})`,d=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:c}));t.push({range:{startLineNumber:e[n].colorInfo.range.startLineNumber,startColumn:e[n].colorInfo.range.startColumn,endLineNumber:e[n].colorInfo.range.endLineNumber,endColumn:e[n].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:Eq,inlineClassName:`${d.className} colorpicker-color-decoration`,inlineClassNameAffectsLetterSpacing:!0,attachedData:xW}}})}this._colorDecoratorIds.set(t)}removeAllDecorations(){this._editor.removeDecorations(this._decorationsIds),this._decorationsIds=[],this._colorDecoratorIds.clear(),this._colorDecorationClassRefs.clear()}getColorData(e){const t=this._editor.getModel();if(!t)return null;const n=t.getDecorationsInRange(L.fromPositions(e,e)).filter(i=>this._colorDatas.has(i.id));return n.length===0?null:this._colorDatas.get(n[0].id)}isColorDecoration(e){return this._colorDecoratorIds.has(e)}},"ColorDetector");Bu.ID="editor.contrib.colorDetector";Bu.RECOMPUTE_TIME=1e3;Bu=mae([XT(1,rt),XT(2,ue),XT(3,ho)],Bu);it(Bu.ID,Bu);class kW{constructor(e,t,n){this.presentationIndex=n,this._onColorFlushed=new R,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new R,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new R,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){for(let n=0;n<this.colorPresentations.length;n++)if(t.toLowerCase()===this.colorPresentations[n].label){this.presentationIndex=n,this._onDidChangePresentation.fire(this.presentation);break}}flushColor(){this._onColorFlushed.fire(this._color)}}u(kW,"ColorPickerModel");const lr=ee;class MW extends U{constructor(e,t,n){super(),this.model=t,this.domNode=lr(".colorpicker-header"),q(e,this.domNode),this.pickedColorNode=q(this.domNode,lr(".picked-color"));const i=m("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this.pickedColorNode.setAttribute("title",i);const s=q(this.domNode,lr(".original-color"));s.style.backgroundColor=B.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=n.getColorTheme().getColor(xu)||B.white,this._register(At((r,a)=>{this.backgroundColor=r.getColor(xu)||B.white})),this._register(Y(this.pickedColorNode,le.CLICK,()=>this.model.selectNextColorPresentation())),this._register(Y(s,le.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this.pickedColorNode.style.backgroundColor=B.Format.CSS.format(t.color)||"",this.pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter()),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){this.pickedColorNode.style.backgroundColor=B.Format.CSS.format(e)||"",this.pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this.pickedColorNode.textContent=this.model.presentation?this.model.presentation.label:"",this.pickedColorNode.prepend(lr(".codicon.codicon-color-mode"))}}u(MW,"ColorPickerHeader");class DW extends U{constructor(e,t,n){super(),this.model=t,this.pixelRatio=n,this.domNode=lr(".colorpicker-body"),q(e,this.domNode),this.saturationBox=new AW(this.domNode,this.model,this.pixelRatio),this._register(this.saturationBox),this._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this.saturationBox.onColorFlushed(this.flushColor,this)),this.opacityStrip=new IW(this.domNode,this.model),this._register(this.opacityStrip),this._register(this.opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this.opacityStrip.onColorFlushed(this.flushColor,this)),this.hueStrip=new NW(this.domNode,this.model),this._register(this.hueStrip),this._register(this.hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this.hueStrip.onColorFlushed(this.flushColor,this))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){const n=this.model.color.hsva;this.model.color=new B(new or(n.h,e,t,n.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new B(new or(t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,n=(1-e)*360;this.model.color=new B(new or(n===360?0:n,t.s,t.v,t.a))}layout(){this.saturationBox.layout(),this.opacityStrip.layout(),this.hueStrip.layout()}}u(DW,"ColorPickerBody");class AW extends U{constructor(e,t,n){super(),this.model=t,this.pixelRatio=n,this._onDidChange=new R,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new R,this.onColorFlushed=this._onColorFlushed.event,this.domNode=lr(".saturation-wrap"),q(e,this.domNode),this.canvas=document.createElement("canvas"),this.canvas.className="saturation-box",q(this.domNode,this.canvas),this.selection=lr(".saturation-selection"),q(this.domNode,this.selection),this.layout(),this._register(Y(this.domNode,le.POINTER_DOWN,i=>this.onPointerDown(i))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;this.monitor=this._register(new ch);const t=li(this.domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.pointerId,e.buttons,i=>this.onDidChangePosition(i.pageX-t.left,i.pageY-t.top),()=>null);const n=Y(document,le.POINTER_UP,()=>{this._onColorFlushed.fire(),n.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(e,t){const n=Math.max(0,Math.min(1,e/this.width)),i=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(n,i),this._onDidChange.fire({s:n,v:i})}layout(){this.width=this.domNode.offsetWidth,this.height=this.domNode.offsetHeight,this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new B(new or(e.h,1,1,1)),n=this.canvas.getContext("2d"),i=n.createLinearGradient(0,0,this.canvas.width,0);i.addColorStop(0,"rgba(255, 255, 255, 1)"),i.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),i.addColorStop(1,"rgba(255, 255, 255, 0)");const s=n.createLinearGradient(0,0,0,this.canvas.height);s.addColorStop(0,"rgba(0, 0, 0, 0)"),s.addColorStop(1,"rgba(0, 0, 0, 1)"),n.rect(0,0,this.canvas.width,this.canvas.height),n.fillStyle=B.Format.CSS.format(t),n.fill(),n.fillStyle=i,n.fill(),n.fillStyle=s,n.fill()}paintSelection(e,t){this.selection.style.left=`${e*this.width}px`,this.selection.style.top=`${this.height-t*this.height}px`}onDidChangeColor(){this.monitor&&this.monitor.isMonitoring()||this.paint()}}u(AW,"SaturationBox");class vN extends U{constructor(e,t){super(),this.model=t,this._onDidChange=new R,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new R,this.onColorFlushed=this._onColorFlushed.event,this.domNode=q(e,lr(".strip")),this.overlay=q(this.domNode,lr(".overlay")),this.slider=q(this.domNode,lr(".slider")),this.slider.style.top="0px",this._register(Y(this.domNode,le.POINTER_DOWN,n=>this.onPointerDown(n))),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._register(new ch),n=li(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.pointerId,e.buttons,s=>this.onDidChangeTop(s.pageY-n.top),()=>null);const i=Y(document,le.POINTER_UP,()=>{this._onColorFlushed.fire(),i.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=`${(1-e)*this.height}px`}}u(vN,"Strip");class IW extends vN{constructor(e,t){super(e,t),this.domNode.classList.add("opacity-strip"),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){const{r:t,g:n,b:i}=e.rgba,s=new B(new $e(t,n,i,1)),r=new B(new $e(t,n,i,0));this.overlay.style.background=`linear-gradient(to bottom, ${s} 0%, ${r} 100%)`}getValue(e){return e.hsva.a}}u(IW,"OpacityStrip");class NW extends vN{constructor(e,t){super(e,t),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}}u(NW,"HueStrip");class PW extends lo{constructor(e,t,n,i){super(),this.model=t,this.pixelRatio=n,this._register(Yg.onDidChange(()=>this.layout()));const s=lr(".colorpicker-widget");e.appendChild(s);const r=new MW(s,this.model,i);this.body=new DW(s,this.model,this.pixelRatio),this._register(r),this._register(this.body)}layout(){this.body.layout()}}u(PW,"ColorPickerWidget");var vae=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Cae=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},bF=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class RW{constructor(e,t,n,i){this.owner=e,this.range=t,this.model=n,this.provider=i,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}u(RW,"ColorHover");let cM=u(class{constructor(e,t){this._editor=e,this._themeService=t,this.hoverOrdinal=1}computeSync(e,t){return[]}computeAsync(e,t,n){return nn.fromPromise(this._computeAsync(e,t,n))}_computeAsync(e,t,n){return bF(this,void 0,void 0,function*(){if(!this._editor.hasModel())return[];const i=Bu.get(this._editor);if(!i)return[];for(const s of t){if(!i.isColorDecoration(s))continue;const r=i.getColorData(s.range.getStartPosition());if(r)return[yield this._createColorHover(this._editor.getModel(),r.colorInfo,r.provider)]}return[]})}_createColorHover(e,t,n){return bF(this,void 0,void 0,function*(){const i=e.getValueInRange(t.range),{red:s,green:r,blue:a,alpha:l}=t.color,c=new $e(Math.round(s*255),Math.round(r*255),Math.round(a*255),l),d=new B(c),h=yield mF(e,t,n,Ge.None),g=new kW(d,[],0);return g.colorPresentations=h||[],g.guessColorPresentation(d,i),new RW(this,L.lift(t.range),g,n)})}renderHoverParts(e,t){if(t.length===0||!this._editor.hasModel())return U.None;const n=new J,i=t[0],s=this._editor.getModel(),r=i.model,a=n.add(new PW(e.fragment,r,this._editor.getOption(131),this._themeService));e.setColorPicker(a);let l=new L(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn);const c=u(()=>{let h,g;if(r.presentation.textEdit){h=[r.presentation.textEdit],g=new L(r.presentation.textEdit.range.startLineNumber,r.presentation.textEdit.range.startColumn,r.presentation.textEdit.range.endLineNumber,r.presentation.textEdit.range.endColumn);const f=this._editor.getModel()._setTrackedRange(null,g,3);this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",h),g=this._editor.getModel()._getTrackedRange(f)||g}else h=[{range:l,text:r.presentation.label,forceMoveMarkers:!1}],g=l.setEndPosition(l.endLineNumber,l.startColumn+r.presentation.label.length),this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",h);r.presentation.additionalTextEdits&&(h=[...r.presentation.additionalTextEdits],this._editor.executeEdits("colorpicker",h),e.hide()),this._editor.pushUndoStop(),l=g},"updateEditorModel"),d=u(h=>mF(s,{range:l,color:{red:h.rgba.r/255,green:h.rgba.g/255,blue:h.rgba.b/255,alpha:h.rgba.a}},i.provider,Ge.None).then(g=>{r.colorPresentations=g||[]}),"updateColorPresentations");return n.add(r.onColorFlushed(h=>{d(h).then(c)})),n.add(r.onDidChangeColor(d)),n}},"ColorHoverParticipant");cM=vae([Cae(1,wt)],cM);function dM(o,e){return!!o[e]}u(dM,"hasModifier");class T0{constructor(e,t){this.target=e.target,this.hasTriggerModifier=dM(e.event,t.triggerModifier),this.hasSideBySideModifier=dM(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}u(T0,"ClickLinkMouseEvent");class uM{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=dM(e,t.triggerModifier)}}u(uM,"ClickLinkKeyboardEvent");class xm{constructor(e,t,n,i){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=n,this.triggerSideBySideModifier=i}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}u(xm,"ClickLinkOptions");function _F(o){return o==="altKey"?Xe?new xm(57,"metaKey",6,"altKey"):new xm(5,"ctrlKey",6,"altKey"):Xe?new xm(6,"altKey",57,"metaKey"):new xm(6,"altKey",5,"ctrlKey")}u(_F,"createOptions");class pS extends U{constructor(e){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new R),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new R),this.onExecute=this._onExecute.event,this._onCancel=this._register(new R),this.onCancel=this._onCancel.event,this._editor=e,this._opts=_F(this._editor.getOption(72)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(t=>{if(t.hasChanged(72)){const n=_F(this._editor.getOption(72));if(this._opts.equals(n))return;this._opts=n,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(t=>this._onEditorMouseMove(new T0(t,this._opts)))),this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(new T0(t,this._opts)))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(new T0(t,this._opts)))),this._register(this._editor.onKeyDown(t=>this._onEditorKeyDown(new uM(t,this._opts)))),this._register(this._editor.onKeyUp(t=>this._onEditorKeyUp(new uM(t,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(t=>this._onDidChangeCursorSelection(t))),this._register(this._editor.onDidChangeModel(t=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(t=>{(t.scrollTopChanged||t.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=e.target.position?e.target.position.lineNumber:0}_onEditorMouseUp(e){const t=e.target.position?e.target.position.lineNumber:0;this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}u(pS,"ClickLinkGesture");var wae=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Sa=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let Wu=u(class extends wf{constructor(e,t,n,i,s,r,a,l,c,d,h,g){super(e,Object.assign(Object.assign({},n.getRawOptions()),{overflowWidgetsDomNode:n.getOverflowWidgetsDomNode()}),{},i,s,r,a,l,c,d,h,g),this._parentEditor=n,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(n.onDidChangeConfiguration(f=>this._onParentConfigurationChanged(f)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){la(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}},"EmbeddedCodeEditorWidget");Wu=wae([Sa(3,Ne),Sa(4,dt),Sa(5,hn),Sa(6,De),Sa(7,wt),Sa(8,gn),Sa(9,Dl),Sa(10,rn),Sa(11,ue)],Wu);const vF=new B(new $e(0,122,204)),yae={showArrow:!0,showFrame:!0,className:"",frameColor:vF,arrowColor:vF,keepEditorSelection:!1},Sae="vs.editor.contrib.zoneWidget";class FW{constructor(e,t,n,i,s,r){this.id="",this.domNode=e,this.afterLineNumber=t,this.afterColumn=n,this.heightInLines=i,this._onDomNodeTop=s,this._onComputedHeight=r}onDomNodeTop(e){this._onDomNodeTop(e)}onComputedHeight(e){this._onComputedHeight(e)}}u(FW,"ViewZoneDelegate");class OW{constructor(e,t){this._id=e,this._domNode=t}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}}u(OW,"OverlayWidgetDelegate");class hv{constructor(e){this._editor=e,this._ruleName=hv._IdGenerator.nextId(),this._decorations=this._editor.createDecorationsCollection(),this._color=null,this._height=-1}dispose(){this.hide(),lP(this._ruleName)}set color(e){this._color!==e&&(this._color=e,this._updateStyle())}set height(e){this._height!==e&&(this._height=e,this._updateStyle())}_updateStyle(){lP(this._ruleName),$x(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px; margin-left: -${this._height}px; `)}show(e){e.column===1&&(e={lineNumber:e.lineNumber,column:2}),this._decorations.set([{range:L.fromPositions(e),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._decorations.clear()}}u(hv,"Arrow");hv._IdGenerator=new By(".arrow-decoration-");class VW{constructor(e,t={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._viewZone=null,this._disposables=new J,this.container=null,this._isShowing=!1,this.editor=e,this._positionMarkerId=this.editor.createDecorationsCollection(),this.options=Pa(t),la(this.options,yae,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange(n=>{const i=this._getWidth(n);this.domNode.style.width=i+"px",this.domNode.style.left=this._getLeft(n)+"px",this._onWidth(i)}))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._viewZone=null}),this._positionMarkerId.clear(),this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new hv(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){const e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){const e=this.options.arrowColor.toString();this._arrow.color=e}}_getWidth(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}_getLeft(e){return e.minimap.minimapWidth>0&&e.minimap.minimapLeft===0?e.minimap.minimapWidth:0}_onViewZoneTop(e){this.domNode.style.top=e+"px"}_onViewZoneHeight(e){if(this.domNode.style.height=`${e}px`,this.container){const t=e-this._decoratingElementsHeight();this.container.style.height=`${t}px`;const n=this.editor.getLayoutInfo();this._doLayout(t,this._getWidth(n))}this._resizeSash&&this._resizeSash.layout()}get position(){const e=this._positionMarkerId.getRange(0);if(e)return e.getStartPosition()}show(e,t){const n=L.isIRange(e)?L.lift(e):L.fromPositions(e);this._isShowing=!0,this._showImpl(n,t),this._isShowing=!1,this._positionMarkerId.set([{range:n,options:Ae.EMPTY}])}hide(){this._viewZone&&(this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._arrow&&this._arrow.hide()}_decoratingElementsHeight(){const e=this.editor.getOption(61);let t=0;if(this.options.showArrow){const n=Math.round(e/3);t+=2*n}if(this.options.showFrame){const n=Math.round(e/9);t+=2*n}return t}_showImpl(e,t){const n=e.getStartPosition(),i=this.editor.getLayoutInfo(),s=this._getWidth(i);this.domNode.style.width=`${s}px`,this.domNode.style.left=this._getLeft(i)+"px";const r=document.createElement("div");r.style.overflow="hidden";const a=this.editor.getOption(61),l=Math.max(12,this.editor.getLayoutInfo().height/a*.8);t=Math.min(t,l);let c=0,d=0;if(this._arrow&&this.options.showArrow&&(c=Math.round(a/3),this._arrow.height=c,this._arrow.show(n)),this.options.showFrame&&(d=Math.round(a/9)),this.editor.changeViewZones(f=>{this._viewZone&&f.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new FW(r,n.lineNumber,n.column,t,p=>this._onViewZoneTop(p),p=>this._onViewZoneHeight(p)),this._viewZone.id=f.addZone(this._viewZone),this._overlayWidget=new OW(Sae+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)}),this.container&&this.options.showFrame){const f=this.options.frameWidth?this.options.frameWidth:d;this.container.style.borderTopWidth=f+"px",this.container.style.borderBottomWidth=f+"px"}const h=t*a-this._decoratingElementsHeight();this.container&&(this.container.style.top=c+"px",this.container.style.height=h+"px",this.container.style.overflow="hidden"),this._doLayout(h,s),this.options.keepEditorSelection||this.editor.setSelection(e);const g=this.editor.getModel();if(g){const f=e.endLineNumber+1;f<=g.getLineCount()?this.revealLine(f,!1):this.revealLine(g.getLineCount(),!0)}}revealLine(e,t){t?this.editor.revealLineInCenter(e,0):this.editor.revealLine(e,0)}setCssClass(e,t){this.container&&(t&&this.container.classList.remove(t),this.container.classList.add(e))}_onWidth(e){}_doLayout(e,t){}_relayout(e){this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones(t=>{this._viewZone&&(this._viewZone.heightInLines=e,t.layoutZone(this._viewZone.id))})}_initSash(){if(this._resizeSash)return;this._resizeSash=this._disposables.add(new Yn(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.state=0);let e;this._disposables.add(this._resizeSash.onDidStart(t=>{this._viewZone&&(e={startY:t.startY,heightInLines:this._viewZone.heightInLines})})),this._disposables.add(this._resizeSash.onDidEnd(()=>{e=void 0})),this._disposables.add(this._resizeSash.onDidChange(t=>{if(e){const n=(t.currentY-e.startY)/this.editor.getOption(61),i=n<0?Math.ceil(n):Math.floor(n),s=e.heightInLines+i;s>5&&s<35&&this._relayout(s)}}))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){const e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}}u(VW,"ZoneWidget");class HW extends Tu{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new R),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=q(e,ee(".monaco-dropdown")),this._label=q(this._element,ee(".dropdown-label"));let n=t.labelRenderer;n||(n=u(s=>(s.textContent=t.label||"",null),"labelRenderer"));for(const s of[le.CLICK,le.MOUSE_DOWN,Mt.Tap])this._register(Y(this.element,s,r=>ft.stop(r,!0)));for(const s of[le.MOUSE_DOWN,Mt.Tap])this._register(Y(this._label,s,r=>{r instanceof MouseEvent&&(r.detail>1||r.button!==0)||(this.visible?this.hide():this.show())}));this._register(Y(this._label,le.KEY_UP,s=>{const r=new Pt(s);(r.equals(3)||r.equals(10))&&(ft.stop(s,!0),this.visible?this.hide():this.show())}));const i=n(this._label);i&&this._register(i),this._register(gt.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}u(HW,"BaseDropdown");class BW extends HW{constructor(e,t){super(e,t),this._actions=[],this._contextMenuProvider=t.contextMenuProvider,this.actions=t.actions||[],this.actionProvider=t.actionProvider,this.menuClassName=t.menuClassName||"",this.menuAsChild=!!t.menuAsChild}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this.actionProvider?this.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:e=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this.menuClassName,onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this.menuAsChild?this.element:void 0})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}u(BW,"DropdownMenu");class CN extends $o{constructor(e,t,n,i=Object.create(null)){super(null,e,i),this.actionItem=null,this._onDidChangeVisibility=this._register(new R),this.menuActionsOrProvider=t,this.contextMenuProvider=n,this.options=i,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=u(s=>{this.element=q(s,ee("a.action-label"));let r=[];return typeof this.options.classNames=="string"?r=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(r=this.options.classNames),r.find(a=>a==="icon")||r.push("codicon"),this.element.classList.add(...r),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this.element.title=this._action.label||"",this.element.ariaLabel=this._action.label||"",null},"labelRenderer"),n=Array.isArray(this.menuActionsOrProvider),i={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:n?this.menuActionsOrProvider:void 0,actionProvider:n?void 0:this.menuActionsOrProvider};if(this.dropdownMenu=this._register(new BW(e,i)),this._register(this.dropdownMenu.onDidChangeVisibility(s=>{var r;(r=this.element)===null||r===void 0||r.setAttribute("aria-expanded",`${s}`),this._onDidChangeVisibility.fire(s)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const s=this;this.dropdownMenu.menuOptions=Object.assign(Object.assign({},this.dropdownMenu.menuOptions),{get anchorAlignment(){return s.options.anchorAlignmentProvider()}})}this.updateTooltip(),this.updateEnabled()}getTooltip(){let e=null;return this.getAction().tooltip?e=this.getAction().tooltip:this.getAction().label&&(e=this.getAction().label),e??void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}updateEnabled(){var e,t;const n=!this.getAction().enabled;(e=this.actionItem)===null||e===void 0||e.classList.toggle("disabled",n),(t=this.element)===null||t===void 0||t.classList.toggle("disabled",n)}}u(CN,"DropdownMenuActionViewItem");var wN=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Ws=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},WW=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};function Tae(o,e,t,n,i,s,r){const a=o.getActions(e);return xae(a,t,!1,typeof n=="string"?c=>c===n:n,i,s,r),Lae(a)}u(Tae,"createAndFillInActionBarActions");function Lae(o){const e=new J;for(const[,t]of o)for(const n of t)e.add(n);return e}u(Lae,"asDisposable");function xae(o,e,t,n=a=>a==="navigation",i=Number.MAX_SAFE_INTEGER,s=()=>!1,r=!1){let a,l;Array.isArray(e)?(a=e,l=e):(a=e.primary,l=e.secondary);const c=new Set;for(const[d,h]of o){let g;n(d)?(g=a,g.length>0&&r&&g.push(new Jn)):(g=l,g.length>0&&g.push(new Jn));for(let f of h){t&&(f=f instanceof Dc&&f.alt?f.alt:f);const p=g.push(f);f instanceof sf&&c.add({group:d,action:f,index:p-1})}}for(const{group:d,action:h,index:g}of c){const f=n(d)?a:l,p=h.actions;(p.length<=1||f.length+p.length-2<=i)&&s(h,d,f.length)&&f.splice(g,1,...p)}if(a!==l&&a.length>i){const d=a.splice(i,a.length-i);l.unshift(...d,new Jn)}}u(xae,"fillInActions");let Vf=u(class extends Tf{constructor(e,t,n,i,s,r,a){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t?.draggable,keybinding:t?.keybinding,hoverDelegate:t?.hoverDelegate}),this._keybindingService=n,this._notificationService=i,this._contextKeyService=s,this._themeService=r,this._contextMenuService=a,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new gi),this._altKey=ja.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}onClick(e){return WW(this,void 0,void 0,function*(){e.preventDefault(),e.stopPropagation();try{yield this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}})}render(e){super.render(e),e.classList.add("menu-entry"),this._updateItemClass(this._menuItemAction.item);let t=!1,n=this._altKey.keyStatus.altKey||(ei||hi)&&this._altKey.keyStatus.shiftKey;const i=u(()=>{var s;const r=t&&n&&!!(!((s=this._commandAction.alt)===null||s===void 0)&&s.enabled);r!==this._wantsAltCommand&&(this._wantsAltCommand=r,this.updateLabel(),this.updateTooltip(),this.updateClass())},"updateAltState");this._menuItemAction.alt&&this._register(this._altKey.event(s=>{n=s.altKey||(ei||hi)&&s.shiftKey,i()})),this._register(Y(e,"mouseleave",s=>{t=!1,i()})),this._register(Y(e,"mouseenter",s=>{t=!0,i()}))}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){var e;const t=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),n=t&&t.getLabel(),i=this._commandAction.tooltip||this._commandAction.label;let s=n?m("titleAndKb","{0} ({1})",i,n):i;if(!this._wantsAltCommand&&(!((e=this._menuItemAction.alt)===null||e===void 0)&&e.enabled)){const r=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,a=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),l=a&&a.getLabel(),c=l?m("titleAndKb","{0} ({1})",r,l):r;s=m("titleAndKbAndAlt",`{0}
[{1}] {2}`,s,vI.modifierLabels[Us].altKey,c)}return s}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){var t;this._itemClassDispose.value=void 0;const{element:n,label:i}=this;if(!n||!i)return;const s=this._commandAction.checked&&(!((t=e.toggled)===null||t===void 0)&&t.icon)?e.toggled.icon:e.icon;if(s)if(ct.isThemeIcon(s)){const r=ct.asClassNameArray(s);i.classList.add(...r),this._itemClassDispose.value=He(()=>{i.classList.remove(...r)})}else i.style.backgroundImage=vb(this._themeService.getColorTheme().type)?Su(s.dark):Su(s.light),i.classList.add("icon"),this._itemClassDispose.value=ur(He(()=>{i.style.backgroundImage="",i.classList.remove("icon")}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}},"MenuEntryActionViewItem");Vf=wN([Ws(2,Cn),Ws(3,gn),Ws(4,De),Ws(5,wt),Ws(6,Il)],Vf);let hM=u(class extends CN{constructor(e,t,n,i){var s,r;const a=Object.assign({},t??Object.create(null),{menuAsChild:(s=t?.menuAsChild)!==null&&s!==void 0?s:!1,classNames:(r=t?.classNames)!==null&&r!==void 0?r:ct.isThemeIcon(e.item.icon)?ct.asClassName(e.item.icon):void 0});super(e,{getActions:()=>e.actions},n,a),this._contextMenuService=n,this._themeService=i}render(e){super.render(e),bt(this.element),e.classList.add("menu-entry");const t=this._action,{icon:n}=t.item;if(n&&!ct.isThemeIcon(n)){this.element.classList.add("icon");const i=u(()=>{this.element&&(this.element.style.backgroundImage=vb(this._themeService.getColorTheme().type)?Su(n.dark):Su(n.light))},"setBackgroundImage");i(),this._register(this._themeService.onDidColorThemeChange(()=>{i()}))}}},"SubmenuEntryActionViewItem");hM=wN([Ws(2,Il),Ws(3,wt)],hM);let gM=u(class extends $o{constructor(e,t,n,i,s,r,a,l){var c,d,h;super(null,e),this._keybindingService=n,this._notificationService=i,this._contextMenuService=s,this._menuService=r,this._instaService=a,this._storageService=l,this._container=null,this._options=t,this._storageKey=`${e.item.submenu.id}_lastActionId`;let g;const f=l.get(this._storageKey,1);f&&(g=e.actions.find(_=>f===_.id)),g||(g=e.actions[0]),this._defaultAction=this._instaService.createInstance(Vf,g,{keybinding:this._getDefaultActionKeybindingLabel(g)});const p=Object.assign({},t??Object.create(null),{menuAsChild:(c=t?.menuAsChild)!==null&&c!==void 0?c:!0,classNames:(d=t?.classNames)!==null&&d!==void 0?d:["codicon","codicon-chevron-down"],actionRunner:(h=t?.actionRunner)!==null&&h!==void 0?h:new Tu});this._dropdown=new CN(e,e.actions,this._contextMenuService,p),this._dropdown.actionRunner.onDidRun(_=>{_.action instanceof Dc&&this.update(_.action)})}update(e){this._storageService.store(this._storageKey,e.id,1,0),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(Vf,e,{keybinding:this._getDefaultActionKeybindingLabel(e)}),this._defaultAction.actionRunner=new class extends Tu{runAction(t,n){return WW(this,void 0,void 0,function*(){yield t.run(void 0)})}},this._container&&this._defaultAction.render(NX(this._container,ee(".action-container")))}_getDefaultActionKeybindingLabel(e){var t;let n;if(!((t=this._options)===null||t===void 0)&&t.renderKeybindingWithDefaultActionLabel){const i=this._keybindingService.lookupKeybinding(e.id);i&&(n=`(${i.getLabel()})`)}return n}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=ee(".action-container");this._defaultAction.render(q(this._container,t)),this._register(Y(t,le.KEY_DOWN,i=>{const s=new Pt(i);s.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),s.stopPropagation())}));const n=ee(".dropdown-action-container");this._dropdown.render(q(this._container,n)),this._register(Y(n,le.KEY_DOWN,i=>{var s;const r=new Pt(i);r.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(s=this._defaultAction.element)===null||s===void 0||s.focus(),r.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}},"DropdownWithDefaultActionViewItem");gM=wN([Ws(2,Cn),Ws(3,gn),Ws(4,Il),Ws(5,ah),Ws(6,Ne),Ws(7,No)],gM);function Eae(o,e,t){return e instanceof Dc?o.createInstance(Vf,e,t):e instanceof Qw?e.item.rememberDefaultAction?o.createInstance(gM,e,t):o.createInstance(hM,e,t):void 0}u(Eae,"createActionViewItem");var UW=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},GW=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const zW=Je("IPeekViewService");nt(zW,class{constructor(){this._widgets=new Map}addExclusiveWidget(o,e){const t=this._widgets.get(o);t&&(t.listener.dispose(),t.widget.dispose());const n=u(()=>{const i=this._widgets.get(o);i&&i.widget===e&&(i.listener.dispose(),this._widgets.delete(o))},"remove");this._widgets.set(o,{widget:e,listener:e.onDidClose(n)})}});var Zi;(function(o){o.inPeekEditor=new ce("inReferenceSearchEditor",!0,m("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),o.notInPeekEditor=o.inPeekEditor.toNegated()})(Zi||(Zi={}));let $b=u(class{constructor(e,t){e instanceof Wu&&Zi.inPeekEditor.bindTo(t)}dispose(){}},"PeekContextController");$b.ID="editor.contrib.referenceController";$b=UW([GW(1,De)],$b);it($b.ID,$b);function kae(o){const e=o.get(dt).getFocusedCodeEditor();return e instanceof Wu?e.getParentEditor():e}u(kae,"getOuterEditor");const Mae={headerBackgroundColor:B.white,primaryHeadingColor:B.fromHex("#333333"),secondaryHeadingColor:B.fromHex("#6c6c6cb3")};let sw=u(class extends VW{constructor(e,t,n){super(e,t),this.instantiationService=n,this._onDidClose=new R,this.onDidClose=this._onDidClose.event,la(this.options,Mae,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){const t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();const e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=ee(".head"),this._bodyElement=ee(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){const n=ee(".peekview-title");this.options.supportOnTitleClick&&(n.classList.add("clickable"),Dn(n,"click",r=>this._onTitleClick(r))),q(this._headElement,n),this._fillTitleIcon(n),this._primaryHeading=ee("span.filename"),this._secondaryHeading=ee("span.dirname"),this._metaHeading=ee("span.meta"),q(n,this._primaryHeading,this._secondaryHeading,this._metaHeading);const i=ee(".peekview-actions");q(this._headElement,i);const s=this._getActionBarOptions();this._actionbarWidget=new Cr(i,s),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new Yi("peekview.close",m("label.close","Close"),b.close.classNames,!0,()=>(this.dispose(),Promise.resolve())),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:Eae.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:Tn(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,Ss(this._metaHeading)):Ui(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0){this.dispose();return}const n=Math.ceil(this.editor.getOption(61)*1.2),i=Math.round(e-(n+2));this._doLayoutHead(n,t),this._doLayoutBody(i,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height=`${e}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height=`${e}px`)}},"PeekViewWidget");sw=UW([GW(2,Ne)],sw);const Dae=I("peekViewTitle.background",{dark:pe($i,.1),light:pe($i,.1),hcDark:null,hcLight:null},m("peekViewTitleBackground","Background color of the peek view title area.")),KW=I("peekViewTitleLabel.foreground",{dark:B.white,light:B.black,hcDark:B.white,hcLight:Es},m("peekViewTitleForeground","Color of the peek view title.")),jW=I("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hcDark:"#FFFFFF99",hcLight:"#292929"},m("peekViewTitleInfoForeground","Color of the peek view title info.")),Aae=I("peekView.border",{dark:$i,light:$i,hcDark:Be,hcLight:Be},m("peekViewBorder","Color of the peek view borders and arrow.")),Iae=I("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hcDark:B.black,hcLight:B.white},m("peekViewResultsBackground","Background color of the peek view result list."));I("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hcDark:B.white,hcLight:Es},m("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list."));I("peekViewResult.fileForeground",{dark:B.white,light:"#1E1E1E",hcDark:B.white,hcLight:Es},m("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list."));I("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hcDark:null,hcLight:null},m("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list."));I("peekViewResult.selectionForeground",{dark:B.white,light:"#6C6C6C",hcDark:B.white,hcLight:Es},m("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list."));const wC=I("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hcDark:B.black,hcLight:B.white},m("peekViewEditorBackground","Background color of the peek view editor."));I("peekViewEditorGutter.background",{dark:wC,light:wC,hcDark:wC,hcLight:wC},m("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor."));I("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hcDark:null,hcLight:null},m("peekViewResultsMatchHighlight","Match highlight color in the peek view result list."));I("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hcDark:null,hcLight:null},m("peekViewEditorMatchHighlight","Match highlight color in the peek view editor."));I("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hcDark:Vt,hcLight:Vt},m("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."));var Nae=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class Tl{constructor(e,t,n,i){this.isProviderFirst=e,this.parent=t,this.link=n,this._rangeCallback=i,this.id=I8.nextId()}get uri(){return this.link.uri}get range(){var e,t;return(t=(e=this._range)!==null&&e!==void 0?e:this.link.targetSelectionRange)!==null&&t!==void 0?t:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;const t=(e=this.parent.getPreview(this))===null||e===void 0?void 0:e.preview(this.range);return t?m({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",ro(this.uri),this.range.startLineNumber,this.range.startColumn,t.value):m("aria.oneReference","symbol in {0} on line {1} at column {2}",ro(this.uri),this.range.startLineNumber,this.range.startColumn)}}u(Tl,"OneReference");class $W{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){const n=this._modelReference.object.textEditorModel;if(!n)return;const{startLineNumber:i,startColumn:s,endLineNumber:r,endColumn:a}=e,l=n.getWordUntilPosition({lineNumber:i,column:s-t}),c=new L(i,l.startColumn,i,s),d=new L(r,a,r,1073741824),h=n.getValueInRange(c).replace(/^\s+/,""),g=n.getValueInRange(e),f=n.getValueInRange(d).replace(/\s+$/,"");return{value:h+g+f,highlight:{start:h.length,end:h.length+g.length}}}}u($W,"FilePreview");class Hf{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new ai}dispose(){st(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return e===1?m("aria.fileReferences.1","1 symbol in {0}, full path {1}",ro(this.uri),this.uri.fsPath):m("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,ro(this.uri),this.uri.fsPath)}resolve(e){return Nae(this,void 0,void 0,function*(){if(this._previews.size!==0)return this;for(const t of this.children)if(!this._previews.has(t.uri))try{const n=yield e.createModelReference(t.uri);this._previews.set(t.uri,new $W(n))}catch(n){Ie(n)}return this})}}u(Hf,"FileReferences");class Xi{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new R,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[n]=e;e.sort(Xi._compareReferences);let i;for(const s of e)if((!i||!Dt.isEqual(i.uri,s.uri,!0))&&(i=new Hf(this,s.uri),this.groups.push(i)),i.children.length===0||Xi._compareReferences(s,i.children[i.children.length-1])!==0){const r=new Tl(n===s,i,s,a=>this._onDidChangeReferenceRange.fire(a));this.references.push(r),i.children.push(r)}}dispose(){st(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new Xi(this._links,this._title)}get title(){return this._title}get isEmpty(){return this.groups.length===0}get ariaMessage(){return this.isEmpty?m("aria.result.0","No results found"):this.references.length===1?m("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?m("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):m("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){const{parent:n}=e;let i=n.children.indexOf(e);const s=n.children.length,r=n.parent.groups.length;return r===1||t&&i+1<s||!t&&i>0?(t?i=(i+1)%s:i=(i+s-1)%s,n.children[i]):(i=n.parent.groups.indexOf(n),t?(i=(i+1)%r,n.parent.groups[i].children[0]):(i=(i+r-1)%r,n.parent.groups[i].children[n.parent.groups[i].children.length-1]))}nearestReference(e,t){const n=this.references.map((i,s)=>({idx:s,prefixLen:bu(i.uri.toString(),e.toString()),offsetDist:Math.abs(i.range.startLineNumber-t.lineNumber)*100+Math.abs(i.range.startColumn-t.column)})).sort((i,s)=>i.prefixLen>s.prefixLen?-1:i.prefixLen<s.prefixLen?1:i.offsetDist<s.offsetDist?-1:i.offsetDist>s.offsetDist?1:0)[0];if(n)return this.references[n.idx]}referenceAt(e,t){for(const n of this.references)if(n.uri.toString()===e.toString()&&L.containsPosition(n.range,t))return n}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return Dt.compare(e.uri,t.uri)||L.compareRangesUsingStarts(e.range,t.range)}}u(Xi,"ReferencesModel");var mS=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},qb=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let fM=u(class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof Xi||e instanceof Hf}getChildren(e){if(e instanceof Xi)return e.groups;if(e instanceof Hf)return e.resolve(this._resolverService).then(t=>t.children);throw new Error("bad tree")}},"DataSource");fM=mS([qb(0,Ji)],fM);class qW{getHeight(){return 23}getTemplateId(e){return e instanceof Hf?Yb.id:vp.id}}u(qW,"Delegate");let pM=u(class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof Tl){const n=(t=e.parent.getPreview(e))===null||t===void 0?void 0:t.preview(e.range);if(n)return n.value}return ro(e.uri)}},"StringRepresentationProvider");pM=mS([qb(0,Cn)],pM);class YW{getId(e){return e instanceof Tl?e.id:e.uri}}u(YW,"IdentityProvider");let mM=u(class extends U{constructor(e,t,n){super(),this._labelService=t;const i=document.createElement("div");i.classList.add("reference-file"),this.file=this._register(new Gb(i,{supportHighlights:!0})),this.badge=new z1(q(i,ee(".count"))),this._register(Mne(this.badge,n)),e.appendChild(i)}set(e,t){const n=Ly(e.uri);this.file.setLabel(this._labelService.getUriBasenameLabel(e.uri),this._labelService.getUriLabel(n,{relative:!0}),{title:this._labelService.getUriLabel(e.uri),matches:t});const i=e.children.length;this.badge.setCount(i),i>1?this.badge.setTitleFormat(m("referencesCount","{0} references",i)):this.badge.setTitleFormat(m("referenceCount","{0} reference",i))}},"FileReferencesTemplate");mM=mS([qb(1,xf),qb(2,wt)],mM);let Yb=u(class XW{constructor(e){this._instantiationService=e,this.templateId=XW.id}renderTemplate(e){return this._instantiationService.createInstance(mM,e)}renderElement(e,t,n){n.set(e.element,Fy(e.filterData))}disposeTemplate(e){e.dispose()}},"FileReferencesRenderer");Yb.id="FileReferencesRenderer";Yb=mS([qb(0,Ne)],Yb);class ZW{constructor(e){this.label=new Vc(e)}set(e,t){var n;const i=(n=e.parent.getPreview(e))===null||n===void 0?void 0:n.preview(e.range);if(!i||!i.value)this.label.set(`${ro(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`);else{const{value:s,highlight:r}=i;t&&!fr.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(s,Fy(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(s,[r]))}}}u(ZW,"OneReferenceTemplate");class vp{constructor(){this.templateId=vp.id}renderTemplate(e){return new ZW(e)}renderElement(e,t,n){n.set(e.element,e.filterData)}disposeTemplate(){}}u(vp,"OneReferenceRenderer");vp.id="OneReferenceRenderer";class JW{getWidgetAriaLabel(){return m("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}u(JW,"AccessibilityProvider");var Pae=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Ta=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},CF=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class gv{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new J,this._callOnModelChange=new J,this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(e){for(const t of this._model.references)if(t.uri.toString()===e.uri.toString()){this._addDecorations(t.parent);return}}}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));const t=[],n=[];for(let i=0,s=e.children.length;i<s;i++){const r=e.children[i];this._decorationIgnoreSet.has(r.id)||r.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:r.range,options:gv.DecorationOptions}),n.push(i))}this._editor.changeDecorations(i=>{const s=i.deltaDecorations([],t);for(let r=0;r<s.length;r++)this._decorations.set(s[r],e.children[n[r]])})}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(t){for(const[n,i]of this._decorations){const s=t.getDecorationRange(n);if(!s)continue;let r=!1;if(!L.equalsRange(s,i.range)){if(L.spansMultipleLines(s))r=!0;else{const a=i.range.endColumn-i.range.startColumn,l=s.endColumn-s.startColumn;a!==l&&(r=!0)}r?(this._decorationIgnoreSet.add(i.id),e.push(n)):i.range=s}}for(let n=0,i=e.length;n<i;n++)this._decorations.delete(e[n]);this._editor.removeDecorations(e)}}removeDecorations(){this._editor.removeDecorations([...this._decorations.keys()]),this._decorations.clear()}}u(gv,"DecorationsManager");gv.DecorationOptions=Ae.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});class QW{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,n;try{const i=JSON.parse(e);t=i.ratio,n=i.heightInLines}catch{}return{ratio:t||.7,heightInLines:n||18}}}u(QW,"LayoutData");class eU extends kk{}u(eU,"ReferencesTree");let bM=u(class extends sw{constructor(e,t,n,i,s,r,a,l,c,d,h,g){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},r),this._defaultTreeKeyboardSupport=t,this.layoutData=n,this._textModelResolverService=s,this._instantiationService=r,this._peekViewService=a,this._uriLabel=l,this._undoRedoService=c,this._keybindingService=d,this._languageService=h,this._languageConfigurationService=g,this._disposeOnNewModel=new J,this._callOnDispose=new J,this._onDidSelectReference=new R,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new Ct(0,0),this._applyTheme(i.getColorTheme()),this._callOnDispose.add(i.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),st(this._preview),st(this._previewNotAvailableMessage),st(this._tree),st(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(Aae)||B.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(Dae)||B.transparent,primaryHeadingColor:e.getColor(KW),secondaryHeadingColor:e.getColor(jW)})}show(e){super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=q(e,ee("div.messages")),Ui(this._messageContainer),this._splitView=new PI(e,{orientation:1}),this._previewContainer=q(e,ee("div.preview.inline"));const t={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(Wu,this._previewContainer,t,this.editor),Ui(this._previewContainer),this._previewNotAvailableMessage=new Cl(m("missingPreviewMessage","no preview available"),Js,Cl.DEFAULT_CREATION_OPTIONS,null,this._undoRedoService,this._languageService,this._languageConfigurationService),this._treeContainer=q(e,ee("div.ref-tree.inline"));const n={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new JW,keyboardNavigationLabelProvider:this._instantiationService.createInstance(pM),identityProvider:new YW,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:Iae}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(Dn(this._treeContainer,"keydown",s=>{s.equals(9)&&(this._keybindingService.dispatchEvent(s,s.target),s.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(eU,"ReferencesWidget",this._treeContainer,new qW,[this._instantiationService.createInstance(Yb),this._instantiationService.createInstance(vp)],this._instantiationService.createInstance(fM),n),this._splitView.addView({onDidChange:fe.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:s=>{this._preview.layout({height:this._dim.height,width:s})}},j1.Distribute),this._splitView.addView({onDidChange:fe.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:s=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${s}px`,this._tree.layout(this._dim.height,s)}},j1.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));const i=u((s,r)=>{s instanceof Tl&&(r==="show"&&this._revealReference(s,!1),this._onDidSelectReference.fire({element:s,kind:r,source:"tree"}))},"onEvent");this._tree.onDidOpen(s=>{s.sideBySide?i(s.element,"side"):s.editorOptions.pinned?i(s.element,"goto"):i(s.element,"show")}),Ui(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new Ct(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then(()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))})}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=m("noResults","No results"),Ss(this._messageContainer),Promise.resolve(void 0)):(Ui(this._messageContainer),this._decorationsManager=new gv(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(e=>this._tree.rerender(e))),this._disposeOnNewModel.add(this._preview.onMouseDown(e=>{const{event:t,target:n}=e;if(t.detail!==2)return;const i=this._getFocusedReference();i&&this._onDidSelectReference.fire({element:{uri:i.uri,range:n.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),Ss(this._treeContainer),Ss(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();if(e instanceof Tl)return e;if(e instanceof Hf&&e.children.length>0)return e.children[0]}revealReference(e){return CF(this,void 0,void 0,function*(){yield this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})})}_revealReference(e,t){return CF(this,void 0,void 0,function*(){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==Pe.inMemory?this.setTitle(eee(e.uri),this._uriLabel.getUriLabel(Ly(e.uri))):this.setTitle(m("peekView.alternateTitle","References"));const n=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent?this._tree.reveal(e):(t&&this._tree.reveal(e.parent),yield this._tree.expand(e.parent),this._tree.reveal(e));const i=yield n;if(!this._model){i.dispose();return}st(this._previewModelReference);const s=i.object;if(s){const r=this._preview.getModel()===s.textEditorModel?0:1,a=L.lift(e.range).collapseToStart();this._previewModelReference=i,this._preview.setModel(s.textEditorModel),this._preview.setSelection(a),this._preview.revealRangeInCenter(a,r)}else this._preview.setModel(this._previewNotAvailableMessage),i.dispose()})}},"ReferenceWidget");bM=Pae([Ta(3,wt),Ta(4,Ji),Ta(5,Ne),Ta(6,zW),Ta(7,xf),Ta(8,ky),Ta(9,Cn),Ta(10,Gt),Ta(11,rn)],bM);var Rae=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Bh=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},wF=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const wh=new ce("referenceSearchVisible",!1,m("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));let Uc=u(class _M{constructor(e,t,n,i,s,r,a,l){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=i,this._notificationService=s,this._instantiationService=r,this._storageService=a,this._configurationService=l,this._disposables=new J,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=wh.bindTo(n)}static get(e){return e.getContribution(_M.ID)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),(e=this._widget)===null||e===void 0||e.dispose(),(t=this._model)===null||t===void 0||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,n){let i;if(this._widget&&(i=this._widget.position),this.closeWidget(),i&&e.containsPosition(i))return;this._peekMode=n,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));const s="peekViewLayout",r=QW.fromJSON(this._storageService.get(s,0,"{}"));this._widget=this._instantiationService.createInstance(bM,this._editor,this._defaultTreeKeyboardSupport,r),this._widget.setTitle(m("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget&&(this._storageService.store(s,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(l=>{const{element:c,kind:d}=l;if(c)switch(d){case"open":(l.source!=="editor"||!this._configurationService.getValue("editor.stablePeek"))&&this.openReference(c,!1,!1);break;case"side":this.openReference(c,!0,!1);break;case"goto":n?this._gotoReference(c):this.openReference(c,!1,!0);break}}));const a=++this._requestIdPool;t.then(l=>{var c;if(a!==this._requestIdPool||!this._widget){l.dispose();return}return(c=this._model)===null||c===void 0||c.dispose(),this._model=l,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(m("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));const d=this._editor.getModel().uri,h=new H(e.startLineNumber,e.startColumn),g=this._model.nearestReference(d,h);if(g)return this._widget.setSelection(g).then(()=>{this._widget&&this._editor.getOption(79)==="editor"&&this._widget.focusOnPreviewEditor()})}})},l=>{this._notificationService.error(l)})}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}goToNextOrPreviousReference(e){return wF(this,void 0,void 0,function*(){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const n=this._model.nearestReference(this._editor.getModel().uri,t);if(!n)return;const i=this._model.nextOrPreviousReference(n,e),s=this._editor.hasTextFocus(),r=this._widget.isPreviewEditorFocused();yield this._widget.setSelection(i),yield this._gotoReference(i),s?this._editor.focus():this._widget&&r&&this._widget.focusOnPreviewEditor()})}revealReference(e){return wF(this,void 0,void 0,function*(){!this._editor.hasModel()||!this._model||!this._widget||(yield this._widget.revealReference(e))})}closeWidget(e=!0){var t,n;(t=this._widget)===null||t===void 0||t.dispose(),(n=this._model)===null||n===void 0||n.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(e){this._widget&&this._widget.hide(),this._ignoreModelChangeEvent=!0;const t=L.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:t,selectionSource:"code.jump"}},this._editor).then(n=>{var i;if(this._ignoreModelChangeEvent=!1,!n||!this._widget){this.closeWidget();return}if(this._editor===n)this._widget.show(t),this._widget.focusOnReferenceTree();else{const s=_M.get(n),r=this._model.clone();this.closeWidget(),n.focus(),s?.toggleWidget(t,On(a=>Promise.resolve(r)),(i=this._peekMode)!==null&&i!==void 0?i:!1)}},n=>{this._ignoreModelChangeEvent=!1,Ie(n)})}openReference(e,t,n){t||this.closeWidget();const{uri:i,range:s}=e;this._editorService.openCodeEditor({resource:i,options:{selection:s,selectionSource:"code.jump",pinned:n}},this._editor,t)}},"ReferencesController");Uc.ID="editor.contrib.referencesController";Uc=Rae([Bh(2,De),Bh(3,dt),Bh(4,gn),Bh(5,Ne),Bh(6,No),Bh(7,rt)],Uc);function yh(o,e){const t=kae(o);if(!t)return;const n=Uc.get(t);n&&e(n)}u(yh,"withController");gs.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:xn(2089,60),when:oe.or(wh,Zi.inPeekEditor),handler(o){yh(o,e=>{e.changeFocusBetweenPreviewAndReferences()})}});gs.registerCommandAndKeybindingRule({id:"goToNextReference",weight:100-10,primary:62,secondary:[70],when:oe.or(wh,Zi.inPeekEditor),handler(o){yh(o,e=>{e.goToNextOrPreviousReference(!0)})}});gs.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:100-10,primary:1086,secondary:[1094],when:oe.or(wh,Zi.inPeekEditor),handler(o){yh(o,e=>{e.goToNextOrPreviousReference(!1)})}});Qe.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference");Qe.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference");Qe.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch");Qe.registerCommand("closeReferenceSearch",o=>yh(o,e=>e.closeWidget()));gs.registerKeybindingRule({id:"closeReferenceSearch",weight:100-101,primary:9,secondary:[1033],when:oe.and(Zi.inPeekEditor,oe.not("config.editor.stablePeek"))});gs.registerKeybindingRule({id:"closeReferenceSearch",weight:200+50,primary:9,secondary:[1033],when:oe.and(wh,oe.not("config.editor.stablePeek"))});gs.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:oe.and(wh,NB,jI.negate(),$I.negate()),handler(o){var e;const n=(e=o.get(fo).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof Tl&&yh(o,i=>i.revealReference(n[0]))}});gs.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:oe.and(wh,NB,jI.negate(),$I.negate()),handler(o){var e;const n=(e=o.get(fo).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof Tl&&yh(o,i=>i.openReference(n[0],!0,!0))}});Qe.registerCommand("openReference",o=>{var e;const n=(e=o.get(fo).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof Tl&&yh(o,i=>i.openReference(n[0],!1,!0))});var tU=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Em=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const yN=new ce("hasSymbols",!1,m("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),bS=Je("ISymbolNavigationService");let vM=u(class{constructor(e,t,n,i){this._editorService=t,this._notificationService=n,this._keybindingService=i,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=yN.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),(e=this._currentState)===null||e===void 0||e.dispose(),(t=this._currentMessage)===null||t===void 0||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1){this.reset();return}this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const n=new CM(this._editorService),i=n.onDidChange(s=>{if(this._ignoreEditorChange)return;const r=this._editorService.getActiveCodeEditor();if(!r)return;const a=r.getModel(),l=r.getPosition();if(!a||!l)return;let c=!1,d=!1;for(const h of t.references)if(M7(h.uri,a.uri))c=!0,d=d||L.containsPosition(h.range,l);else if(c)break;(!c||!d)&&this.reset()});this._currentState=ur(n,i)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:L.collapseToStart(t.range),selectionRevealType:3}},e).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var e;(e=this._currentMessage)===null||e===void 0||e.dispose();const t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),n=t?m("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):m("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(n)}},"SymbolNavigationService");vM=tU([Em(0,De),Em(1,dt),Em(2,gn),Em(3,Cn)],vM);nt(bS,vM,!0);te(new class extends Ln{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:yN,kbOpts:{weight:100,primary:70}})}runEditorCommand(o,e){return o.get(bS).revealNext(e)}});gs.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:yN,primary:9,handler(o){o.get(bS).reset()}});let CM=u(class{constructor(e){this._listener=new Map,this._disposables=new J,this._onDidChange=new R,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),st(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,ur(e.onDidChangeCursorPosition(t=>this._onDidChange.fire({editor:e})),e.onDidChangeModelContent(t=>this._onDidChange.fire({editor:e}))))}_onDidRemoveEditor(e){var t;(t=this._listener.get(e))===null||t===void 0||t.dispose(),this._listener.delete(e)}},"EditorState");CM=tU([Em(0,dt)],CM);var nU=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};function fv(o,e,t,n){const s=t.ordered(o).map(r=>Promise.resolve(n(r,o,e)).then(void 0,a=>{Hn(a)}));return Promise.all(s).then(r=>{const a=[];for(const l of r)Array.isArray(l)?a.push(...l):l&&a.push(l);return a})}u(fv,"getLocationLinks");function SN(o,e,t,n){return fv(e,t,o,(i,s,r)=>i.provideDefinition(s,r,n))}u(SN,"getDefinitionsAtPosition");function iU(o,e,t,n){return fv(e,t,o,(i,s,r)=>i.provideDeclaration(s,r,n))}u(iU,"getDeclarationsAtPosition");function sU(o,e,t,n){return fv(e,t,o,(i,s,r)=>i.provideImplementation(s,r,n))}u(sU,"getImplementationsAtPosition");function oU(o,e,t,n){return fv(e,t,o,(i,s,r)=>i.provideTypeDefinition(s,r,n))}u(oU,"getTypeDefinitionsAtPosition");function _S(o,e,t,n,i){return fv(e,t,o,(s,r,a)=>nU(this,void 0,void 0,function*(){const l=yield s.provideReferences(r,a,{includeDeclaration:!0},i);if(!n||!l||l.length!==2)return l;const c=yield s.provideReferences(r,a,{includeDeclaration:!1},i);return c&&c.length===1?c:l}))}u(_S,"getReferencesAtPosition");function pv(o){return nU(this,void 0,void 0,function*(){const e=yield o(),t=new Xi(e,""),n=t.references.map(i=>i.link);return t.dispose(),n})}u(pv,"_sortedAndDeduped");ua("_executeDefinitionProvider",(o,e,t)=>{const n=o.get(ue),i=SN(n.definitionProvider,e,t,Ge.None);return pv(()=>i)});ua("_executeTypeDefinitionProvider",(o,e,t)=>{const n=o.get(ue),i=oU(n.typeDefinitionProvider,e,t,Ge.None);return pv(()=>i)});ua("_executeDeclarationProvider",(o,e,t)=>{const n=o.get(ue),i=iU(n.declarationProvider,e,t,Ge.None);return pv(()=>i)});ua("_executeReferenceProvider",(o,e,t)=>{const n=o.get(ue),i=_S(n.referenceProvider,e,t,!1,Ge.None);return pv(()=>i)});ua("_executeImplementationProvider",(o,e,t)=>{const n=o.get(ue),i=sU(n.implementationProvider,e,t,Ge.None);return pv(()=>i)});var Eo=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})},ZT,JT,QT,eL,tL,nL,iL,sL;Qs.appendMenuItem(P.EditorContext,{submenu:P.EditorContextPeek,title:m("peek.submenu","Peek"),group:"navigation",order:100});const rU=new Set;function xr(o){const e=new o;return $V(e),rU.add(e.id),e}u(xr,"registerGoToAction");class Bf{constructor(e,t){this.model=e,this.position=t}static is(e){return!e||typeof e!="object"?!1:!!(e instanceof Bf||H.isIPosition(e.position)&&e.model)}}u(Bf,"SymbolNavigationAnchor");class to extends de{constructor(e,t){super(t),this.configuration=e}run(e,t,n){if(!t.hasModel())return Promise.resolve(void 0);const i=e.get(gn),s=e.get(dt),r=e.get(Qc),a=e.get(bS),l=e.get(ue),c=t.getModel(),d=t.getPosition(),h=Bf.is(n)?n:new Bf(c,d),g=new Hc(t,5),f=tA(this._getLocationModel(l,h.model,h.position,g.token),g.token).then(p=>Eo(this,void 0,void 0,function*(){var _;if(!p||g.token.isCancellationRequested)return;Zn(p.ariaMessage);let v;if(p.referenceAt(c.uri,d)){const w=this._getAlternativeCommand(t);!to._activeAlternativeCommands.has(w)&&rU.has(w)&&(v=t.getAction(w))}const C=p.references.length;if(C===0){if(!this.configuration.muteMessage){const w=c.getWordAtPosition(d);(_=ds.get(t))===null||_===void 0||_.showMessage(this._getNoResultFoundMessage(w),d)}}else if(C===1&&v)to._activeAlternativeCommands.add(this.id),v.run().finally(()=>{to._activeAlternativeCommands.delete(this.id)});else return this._onResult(s,a,t,p)}),p=>{i.error(p)}).finally(()=>{g.dispose()});return r.showWhile(f,250),f}_onResult(e,t,n,i){return Eo(this,void 0,void 0,function*(){const s=this._getGoToPreference(n);if(!(n instanceof Wu)&&(this.configuration.openInPeek||s==="peek"&&i.references.length>1))this._openInPeek(n,i);else{const r=i.firstReference(),a=i.references.length>1&&s==="gotoAndPeek",l=yield this._openReference(n,e,r,this.configuration.openToSide,!a);a&&l?this._openInPeek(l,i):i.dispose(),s==="goto"&&t.put(r)}})}_openReference(e,t,n,i,s){return Eo(this,void 0,void 0,function*(){let r;if(uq(n)&&(r=n.targetSelectionRange),r||(r=n.range),!r)return;const a=yield t.openCodeEditor({resource:n.uri,options:{selection:L.collapseToStart(r),selectionRevealType:3,selectionSource:"code.jump"}},e,i);if(a){if(s){const l=a.getModel(),c=a.createDecorationsCollection([{range:r,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{a.getModel()===l&&c.clear()},350)}return a}})}_openInPeek(e,t){const n=Uc.get(e);n&&e.hasModel()?n.toggleWidget(e.getSelection(),On(i=>Promise.resolve(t)),this.configuration.openInPeek):t.dispose()}}u(to,"SymbolNavigationAction");to._activeAlternativeCommands=new Set;class Cp extends to{_getLocationModel(e,t,n,i){return Eo(this,void 0,void 0,function*(){return new Xi(yield SN(e.definitionProvider,t,n,i),m("def.title","Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?m("noResultWord","No definition found for '{0}'",e.word):m("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(53).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(53).multipleDefinitions}}u(Cp,"DefinitionAction");const aU=Xc&&!YD()?2118:70;xr((ZT=u(class wM extends Cp{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:wM.id,label:m("actions.goToDecl.label","Go to Definition"),alias:"Go to Definition",precondition:oe.and(A.hasDefinitionProvider,A.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:A.editorTextFocus,primary:aU,weight:100},contextMenuOpts:{group:"navigation",order:1.1}}),Qe.registerCommandAlias("editor.action.goToDeclaration",wM.id)}},"GoToDefinitionAction"),ZT.id="editor.action.revealDefinition",ZT));xr((JT=u(class yM extends Cp{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:yM.id,label:m("actions.goToDeclToSide.label","Open Definition to the Side"),alias:"Open Definition to the Side",precondition:oe.and(A.hasDefinitionProvider,A.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:A.editorTextFocus,primary:xn(2089,aU),weight:100}}),Qe.registerCommandAlias("editor.action.openDeclarationToTheSide",yM.id)}},"OpenDefinitionToSideAction"),JT.id="editor.action.revealDefinitionAside",JT));xr((QT=u(class SM extends Cp{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:SM.id,label:m("actions.previewDecl.label","Peek Definition"),alias:"Peek Definition",precondition:oe.and(A.hasDefinitionProvider,Zi.notInPeekEditor,A.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:A.editorTextFocus,primary:582,linux:{primary:3140},weight:100},contextMenuOpts:{menuId:P.EditorContextPeek,group:"peek",order:2}}),Qe.registerCommandAlias("editor.action.previewDeclaration",SM.id)}},"PeekDefinitionAction"),QT.id="editor.action.peekDefinition",QT));class TN extends to{_getLocationModel(e,t,n,i){return Eo(this,void 0,void 0,function*(){return new Xi(yield iU(e.declarationProvider,t,n,i),m("decl.title","Declarations"))})}_getNoResultFoundMessage(e){return e&&e.word?m("decl.noResultWord","No declaration found for '{0}'",e.word):m("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(53).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(53).multipleDeclarations}}u(TN,"DeclarationAction");xr((eL=u(class lU extends TN{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:lU.id,label:m("actions.goToDeclaration.label","Go to Declaration"),alias:"Go to Declaration",precondition:oe.and(A.hasDeclarationProvider,A.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{group:"navigation",order:1.3}})}_getNoResultFoundMessage(e){return e&&e.word?m("decl.noResultWord","No declaration found for '{0}'",e.word):m("decl.generic.noResults","No declaration found")}},"GoToDeclarationAction"),eL.id="editor.action.revealDeclaration",eL));xr(u(class extends TN{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",label:m("actions.peekDecl.label","Peek Declaration"),alias:"Peek Declaration",precondition:oe.and(A.hasDeclarationProvider,Zi.notInPeekEditor,A.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:P.EditorContextPeek,group:"peek",order:3}})}},"PeekDeclarationAction"));class LN extends to{_getLocationModel(e,t,n,i){return Eo(this,void 0,void 0,function*(){return new Xi(yield oU(e.typeDefinitionProvider,t,n,i),m("typedef.title","Type Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?m("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):m("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(53).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(53).multipleTypeDefinitions}}u(LN,"TypeDefinitionAction");xr((tL=u(class cU extends LN{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:cU.ID,label:m("actions.goToTypeDefinition.label","Go to Type Definition"),alias:"Go to Type Definition",precondition:oe.and(A.hasTypeDefinitionProvider,A.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:A.editorTextFocus,primary:0,weight:100},contextMenuOpts:{group:"navigation",order:1.4}})}},"GoToTypeDefinitionAction"),tL.ID="editor.action.goToTypeDefinition",tL));xr((nL=u(class dU extends LN{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:dU.ID,label:m("actions.peekTypeDefinition.label","Peek Type Definition"),alias:"Peek Type Definition",precondition:oe.and(A.hasTypeDefinitionProvider,Zi.notInPeekEditor,A.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:P.EditorContextPeek,group:"peek",order:4}})}},"PeekTypeDefinitionAction"),nL.ID="editor.action.peekTypeDefinition",nL));class xN extends to{_getLocationModel(e,t,n,i){return Eo(this,void 0,void 0,function*(){return new Xi(yield sU(e.implementationProvider,t,n,i),m("impl.title","Implementations"))})}_getNoResultFoundMessage(e){return e&&e.word?m("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):m("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(53).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(53).multipleImplementations}}u(xN,"ImplementationAction");xr((iL=u(class uU extends xN{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:uU.ID,label:m("actions.goToImplementation.label","Go to Implementations"),alias:"Go to Implementations",precondition:oe.and(A.hasImplementationProvider,A.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:A.editorTextFocus,primary:2118,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}},"GoToImplementationAction"),iL.ID="editor.action.goToImplementation",iL));xr((sL=u(class hU extends xN{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:hU.ID,label:m("actions.peekImplementation.label","Peek Implementations"),alias:"Peek Implementations",precondition:oe.and(A.hasImplementationProvider,Zi.notInPeekEditor,A.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:A.editorTextFocus,primary:3142,weight:100},contextMenuOpts:{menuId:P.EditorContextPeek,group:"peek",order:5}})}},"PeekImplementationAction"),sL.ID="editor.action.peekImplementation",sL));class EN extends to{_getNoResultFoundMessage(e){return e?m("references.no","No references found for '{0}'",e.word):m("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(53).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(53).multipleReferences}}u(EN,"ReferencesAction");xr(u(class extends EN{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",label:m("goToReferences.label","Go to References"),alias:"Go to References",precondition:oe.and(A.hasReferenceProvider,Zi.notInPeekEditor,A.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:A.editorTextFocus,primary:1094,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}_getLocationModel(e,t,n,i){return Eo(this,void 0,void 0,function*(){return new Xi(yield _S(e.referenceProvider,t,n,!0,i),m("ref.title","References"))})}},"GoToReferencesAction"));xr(u(class extends EN{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",label:m("references.action.label","Peek References"),alias:"Peek References",precondition:oe.and(A.hasReferenceProvider,Zi.notInPeekEditor,A.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:P.EditorContextPeek,group:"peek",order:6}})}_getLocationModel(e,t,n,i){return Eo(this,void 0,void 0,function*(){return new Xi(yield _S(e.referenceProvider,t,n,!1,i),m("ref.title","References"))})}},"PeekReferencesAction"));class gU extends to{constructor(e,t,n){super(e,{id:"editor.action.goToLocation",label:m("label.generic","Go to Any Symbol"),alias:"Go to Any Symbol",precondition:oe.and(Zi.notInPeekEditor,A.isInWalkThroughSnippet.toNegated())}),this._references=t,this._gotoMultipleBehaviour=n}_getLocationModel(e,t,n,i){return Eo(this,void 0,void 0,function*(){return new Xi(this._references,m("generic.title","Locations"))})}_getNoResultFoundMessage(e){return e&&m("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){var t;return(t=this._gotoMultipleBehaviour)!==null&&t!==void 0?t:e.getOption(53).multipleReferences}_getAlternativeCommand(){return""}}u(gU,"GenericGoToLocationAction");Qe.registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:be},{name:"position",description:"The position at which to start",constraint:H.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:(o,e,t,n,i,s,r)=>Eo(void 0,void 0,void 0,function*(){bt(be.isUri(e)),bt(H.isIPosition(t)),bt(Array.isArray(n)),bt(typeof i>"u"||typeof i=="string"),bt(typeof r>"u"||typeof r=="boolean");const a=o.get(dt),l=yield a.openCodeEditor({resource:e},a.getFocusedCodeEditor());if(yl(l))return l.setPosition(t),l.revealPositionInCenterIfOutsideViewport(t,0),l.invokeWithinContext(c=>{const d=new class extends gU{_getNoResultFoundMessage(h){return s||super._getNoResultFoundMessage(h)}}({muteMessage:!Boolean(s),openInPeek:Boolean(r),openToSide:!1},n,i);c.get(Ne).invokeFunction(d.run.bind(d),l)})})});Qe.registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:be},{name:"position",description:"The position at which to start",constraint:H.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:(o,e,t,n,i)=>Eo(void 0,void 0,void 0,function*(){o.get(hn).executeCommand("editor.action.goToLocations",e,t,n,i,void 0,!0)})});Qe.registerCommand({id:"editor.action.findReferences",handler:(o,e,t)=>{bt(be.isUri(e)),bt(H.isIPosition(t));const n=o.get(ue),i=o.get(dt);return i.openCodeEditor({resource:e},i.getFocusedCodeEditor()).then(s=>{if(!yl(s)||!s.hasModel())return;const r=Uc.get(s);if(!r)return;const a=On(c=>_S(n.referenceProvider,s.getModel(),H.lift(t),!1,c).then(d=>new Xi(d,m("ref.title","References")))),l=new L(t.lineNumber,t.column,t.lineNumber,t.column);return Promise.resolve(r.toggleWidget(l,a,!1))})}});Qe.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations");Qs.appendMenuItems([{id:P.MenubarGoMenu,item:{command:{id:"editor.action.revealDefinition",title:m({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},group:"4_symbol_nav",order:2}},{id:P.MenubarGoMenu,item:{command:{id:"editor.action.revealDeclaration",title:m({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},group:"4_symbol_nav",order:3}},{id:P.MenubarGoMenu,item:{command:{id:"editor.action.goToTypeDefinition",title:m({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},group:"4_symbol_nav",order:3}},{id:P.MenubarGoMenu,item:{command:{id:"editor.action.goToImplementation",title:m({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},group:"4_symbol_nav",order:4}},{id:P.MenubarGoMenu,item:{command:{id:"editor.action.goToReferences",title:m({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},group:"4_symbol_nav",order:5}}]);var Fae=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},oL=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let Uu=u(class L0{constructor(e,t,n,i){this.textModelResolverService=t,this.languageService=n,this.languageFeaturesService=i,this.toUnhook=new J,this.toUnhookForKeyboard=new J,this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e,this.linkDecorations=this.editor.createDecorationsCollection();const s=new pS(e);this.toUnhook.add(s),this.toUnhook.add(s.onMouseMoveOrRelevantKeyDown(([r,a])=>{this.startFindDefinitionFromMouse(r,Gi(a))})),this.toUnhook.add(s.onExecute(r=>{this.isEnabled(r)&&this.gotoDefinition(r.target.position,r.hasSideBySideModifier).then(()=>{this.removeLinkDecorations()},a=>{this.removeLinkDecorations(),Ie(a)})})),this.toUnhook.add(s.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(e){return e.getContribution(L0.ID)}startFindDefinitionFromCursor(e){return this.startFindDefinition(e).then(()=>{this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(t=>{t&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))})}startFindDefinitionFromMouse(e,t){if(e.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t)){this.currentWordAtPosition=null,this.removeLinkDecorations();return}const n=e.target.position;this.startFindDefinition(n)}startFindDefinition(e){var t;this.toUnhookForKeyboard.clear();const n=e?(t=this.editor.getModel())===null||t===void 0?void 0:t.getWordAtPosition(e):null;if(!n)return this.currentWordAtPosition=null,this.removeLinkDecorations(),Promise.resolve(0);if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===n.startColumn&&this.currentWordAtPosition.endColumn===n.endColumn&&this.currentWordAtPosition.word===n.word)return Promise.resolve(0);this.currentWordAtPosition=n;const i=new Q1(this.editor,15);return this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=On(s=>this.findDefinition(e,s)),this.previousPromise.then(s=>{if(!s||!s.length||!i.validate(this.editor)){this.removeLinkDecorations();return}if(s.length>1)this.addDecoration(new L(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn),new Ei().appendText(m("multipleResults","Click to show {0} definitions.",s.length)));else{const r=s[0];if(!r.uri)return;this.textModelResolverService.createModelReference(r.uri).then(a=>{if(!a.object||!a.object.textEditorModel){a.dispose();return}const{object:{textEditorModel:l}}=a,{startLineNumber:c}=r.range;if(c<1||c>l.getLineCount()){a.dispose();return}const d=this.getPreviewValue(l,c,r);let h;r.originSelectionRange?h=L.lift(r.originSelectionRange):h=new L(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn);const g=this.languageService.guessLanguageIdByFilepathOrFirstLine(l.uri);this.addDecoration(h,new Ei().appendCodeblock(g||"",d)),a.dispose()})}}).then(void 0,Ie)}getPreviewValue(e,t,n){let i=n.range;return i.endLineNumber-i.startLineNumber>=L0.MAX_SOURCE_PREVIEW_LINES&&(i=this.getPreviewRangeBasedOnIndentation(e,t)),this.stripIndentationFromPreviewRange(e,t,i)}stripIndentationFromPreviewRange(e,t,n){let s=e.getLineFirstNonWhitespaceColumn(t);for(let a=t+1;a<n.endLineNumber;a++){const l=e.getLineFirstNonWhitespaceColumn(a);s=Math.min(s,l)}return e.getValueInRange(n).replace(new RegExp(`^\\s{${s-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(e,t){const n=e.getLineFirstNonWhitespaceColumn(t),i=Math.min(e.getLineCount(),t+L0.MAX_SOURCE_PREVIEW_LINES);let s=t+1;for(;s<i;s++){const r=e.getLineFirstNonWhitespaceColumn(s);if(n===r)break}return new L(t,1,s+1,1)}addDecoration(e,t){const n={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations.set([n])}removeLinkDecorations(){this.linkDecorations.clear()}isEnabled(e,t){return this.editor.hasModel()&&e.isNoneOrSingleMouseDown&&e.target.type===6&&(e.hasTriggerModifier||(t?t.keyCodeIsTriggerKey:!1))&&this.languageFeaturesService.definitionProvider.has(this.editor.getModel())}findDefinition(e,t){const n=this.editor.getModel();return n?SN(this.languageFeaturesService.definitionProvider,n,e,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(n=>{const i=!t&&this.editor.getOption(80)&&!this.isInPeekEditor(n);return new Cp({openToSide:t,openInPeek:i,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0}).run(n,this.editor)})}isInPeekEditor(e){const t=e.get(De);return Zi.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose()}},"GotoDefinitionAtPositionEditorContribution");Uu.ID="editor.contrib.gotodefinitionatposition";Uu.MAX_SOURCE_PREVIEW_LINES=8;Uu=Fae([oL(1,Ji),oL(2,Gt),oL(3,ue)],Uu);it(Uu.ID,Uu);At((o,e)=>{const t=o.getColor(DA);t&&e.addRule(`.monaco-editor .goto-definition-link { color: ${t} !important; }`)});const yC=ee;class kN extends U{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new lp(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}}u(kN,"HoverWidget");class vS extends U{constructor(e,t,n){super(),this.actionContainer=q(e,yC("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=q(this.actionContainer,yC("a.action")),this.action.setAttribute("role","button"),t.iconClass&&q(this.action,yC(`span.icon.${t.iconClass}`));const i=q(this.action,yC("span"));i.textContent=n?`${t.label} (${n})`:t.label,this._register(Y(this.actionContainer,le.CLICK,s=>{s.stopPropagation(),s.preventDefault(),t.run(this.actionContainer)})),this._register(Y(this.actionContainer,le.KEY_UP,s=>{new Pt(s).equals(3)&&(s.stopPropagation(),s.preventDefault(),t.run(this.actionContainer))})),this.setEnabled(!0)}static render(e,t,n){return new vS(e,t,n)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}u(vS,"HoverAction");var Oae=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})},Vae=globalThis&&globalThis.__asyncValues||function(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=o[Symbol.asyncIterator],t;return e?e.call(o):(o=typeof __values=="function"?__values(o):o[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=o[s]&&function(r){return new Promise(function(a,l){r=o[s](r),i(a,l,r.done,r.value)})}}function i(s,r,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},r)}};class fU{constructor(e,t,n){this.value=e,this.isComplete=t,this.hasLoadingMessage=n}}u(fU,"HoverResult");class MN extends U{constructor(e,t){super(),this._editor=e,this._computer=t,this._onResult=this._register(new R),this.onResult=this._onResult.event,this._firstWaitScheduler=this._register(new pt(()=>this._triggerAsyncComputation(),0)),this._secondWaitScheduler=this._register(new pt(()=>this._triggerSyncComputation(),0)),this._loadingMessageScheduler=this._register(new pt(()=>this._triggerLoadingMessage(),0)),this._state=0,this._asyncIterable=null,this._asyncIterableDone=!1,this._result=[]}dispose(){this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),super.dispose()}get _hoverTime(){return this._editor.getOption(55).delay}get _firstWaitTime(){return this._hoverTime/2}get _secondWaitTime(){return this._hoverTime-this._firstWaitTime}get _loadingMessageTime(){return 3*this._hoverTime}_setState(e,t=!0){this._state=e,t&&this._fireResult()}_triggerAsyncComputation(){this._setState(2),this._secondWaitScheduler.schedule(this._secondWaitTime),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=aY(e=>this._computer.computeAsync(e)),Oae(this,void 0,void 0,function*(){var e,t;try{try{for(var n=Vae(this._asyncIterable),i;i=yield n.next(),!i.done;){const s=i.value;s&&(this._result.push(s),this._fireResult())}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=n.return)&&(yield t.call(n))}finally{if(e)throw e.error}}this._asyncIterableDone=!0,(this._state===3||this._state===4)&&this._setState(0)}catch(s){Ie(s)}})):this._asyncIterableDone=!0}_triggerSyncComputation(){this._computer.computeSync&&(this._result=this._result.concat(this._computer.computeSync())),this._setState(this._asyncIterableDone?0:3)}_triggerLoadingMessage(){this._state===3&&this._setState(4)}_fireResult(){if(this._state===1||this._state===2)return;const e=this._state===0,t=this._state===4;this._onResult.fire(new fU(this._result.slice(0),e,t))}start(e){if(e===0)this._state===0&&(this._setState(1),this._firstWaitScheduler.schedule(this._firstWaitTime),this._loadingMessageScheduler.schedule(this._loadingMessageTime));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._result=[],this._setState(0,!1)}}u(MN,"HoverOperation");class x0{constructor(e,t){this.priority=e,this.range=t,this.type=1}equals(e){return e.type===1&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return e.type===1&&t.lineNumber===this.range.startLineNumber}}u(x0,"HoverRangeAnchor");class qm{constructor(e,t,n){this.priority=e,this.owner=t,this.range=n,this.type=2}equals(e){return e.type===2&&this.owner===e.owner}canAdoptVisibleHover(e,t){return e.type===2&&this.owner===e.owner}}u(qm,"HoverForeignElementAnchor");const Sh=new(u(class{constructor(){this._participants=[]}register(e){this._participants.push(e)}getAll(){return this._participants}},"HoverParticipantRegistry"));class Bs{constructor(){this.value="",this.pos=0}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};const e=this.pos;let t=0,n=this.value.charCodeAt(e),i;if(i=Bs._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(Bs.isDigitCharacter(n)){i=8;do t+=1,n=this.value.charCodeAt(e+t);while(Bs.isDigitCharacter(n));return this.pos+=t,{type:i,pos:e,len:t}}if(Bs.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++t);while(Bs.isVariableCharacter(n)||Bs.isDigitCharacter(n));return this.pos+=t,{type:i,pos:e,len:t}}i=10;do t+=1,n=this.value.charCodeAt(e+t);while(!isNaN(n)&&typeof Bs._table[n]>"u"&&!Bs.isDigitCharacter(n)&&!Bs.isVariableCharacter(n));return this.pos+=t,{type:i,pos:e,len:t}}}u(Bs,"Scanner");Bs._table={[36]:0,[58]:1,[44]:2,[123]:3,[125]:4,[92]:5,[47]:6,[124]:7,[43]:11,[45]:12,[63]:13};class Th{constructor(){this._children=[]}appendChild(e){return e instanceof ki&&this._children[this._children.length-1]instanceof ki?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){const{parent:n}=e,i=n.children.indexOf(e),s=n.children.slice(0);s.splice(i,1,...t),n._children=s,u(function r(a,l){for(const c of a)c.parent=l,r(c.children,c)},"_fixParent")(t,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof wp)return e;e=e.parent}}toString(){return this.children.reduce((e,t)=>e+t.toString(),"")}len(){return 0}}u(Th,"Marker");class ki extends Th{constructor(e){super(),this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new ki(this.value)}}u(ki,"Text");class DN extends Th{}u(DN,"TransformableMarker");class js extends DN{constructor(e){super(),this.index=e}static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof Lh?this._children[0]:void 0}clone(){const e=new js(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}u(js,"Placeholder");class Lh extends Th{constructor(){super(...arguments),this.options=[]}appendChild(e){return e instanceof ki&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){const e=new Lh;return this.options.forEach(e.appendChild,e),e}}u(Lh,"Choice");class CS extends Th{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(e){const t=this;let n=!1,i=e.replace(this.regexp,function(){return n=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))});return!n&&this._children.some(s=>s instanceof _o&&Boolean(s.elseValue))&&(i=this._replace([])),i}_replace(e){let t="";for(const n of this._children)if(n instanceof _o){let i=e[n.index]||"";i=n.resolve(i),t+=i}else t+=n.toString();return t}toString(){return""}clone(){const e=new CS;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(t=>t.clone()),e}}u(CS,"Transform");class _o extends Th{constructor(e,t,n,i){super(),this.index=e,this.shorthandName=t,this.ifValue=n,this.elseValue=i}resolve(e){return this.shorthandName==="upcase"?e?e.toLocaleUpperCase():"":this.shorthandName==="downcase"?e?e.toLocaleLowerCase():"":this.shorthandName==="capitalize"?e?e[0].toLocaleUpperCase()+e.substr(1):"":this.shorthandName==="pascalcase"?e?this._toPascalCase(e):"":this.shorthandName==="camelcase"?e?this._toCamelCase(e):"":Boolean(e)&&typeof this.ifValue=="string"?this.ifValue:!Boolean(e)&&typeof this.elseValue=="string"?this.elseValue:e||""}_toPascalCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map(n=>n.charAt(0).toUpperCase()+n.substr(1)).join(""):e}_toCamelCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map((n,i)=>i===0?n.charAt(0).toLowerCase()+n.substr(1):n.charAt(0).toUpperCase()+n.substr(1)).join(""):e}clone(){return new _o(this.index,this.shorthandName,this.ifValue,this.elseValue)}}u(_o,"FormatString");class Wf extends DN{constructor(e){super(),this.name=e}resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),t!==void 0?(this._children=[new ki(t)],!0):!1}clone(){const e=new Wf(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}u(Wf,"Variable");function yF(o,e){const t=[...o];for(;t.length>0;){const n=t.shift();if(!e(n))break;t.unshift(...n.children)}}u(yF,"walk");class wp extends Th{get placeholderInfo(){if(!this._placeholders){const e=[];let t;this.walk(function(n){return n instanceof js&&(e.push(n),t=!t||t.index<n.index?n:t),!0}),this._placeholders={all:e,last:t}}return this._placeholders}get placeholders(){const{all:e}=this.placeholderInfo;return e}offset(e){let t=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(t+=i.len(),!0)),n?t:-1}fullLen(e){let t=0;return yF([e],n=>(t+=n.len(),!0)),t}enclosingPlaceholders(e){const t=[];let{parent:n}=e;for(;n;)n instanceof js&&t.push(n),n=n.parent;return t}resolveVariables(e){return this.walk(t=>(t instanceof Wf&&t.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){const e=new wp;return this._children=this.children.map(t=>t.clone()),e}walk(e){yF(this.children,e)}}u(wp,"TextmateSnippet");class Ll{constructor(){this._scanner=new Bs,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,n){const i=new wp;return this.parseFragment(e,i),this.ensureFinalTabstop(i,n??!1,t??!1),i}parseFragment(e,t){const n=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););const i=new Map,s=[];t.walk(r=>(r instanceof js&&(r.isFinalTabstop?i.set(0,void 0):!i.has(r.index)&&r.children.length>0?i.set(r.index,r.children):s.push(r)),!0));for(const r of s){const a=i.get(r.index);if(a){const l=new js(r.index);l.transform=r.transform;for(const c of a)l.appendChild(c.clone());t.replace(r,[l])}}return t.children.slice(n)}ensureFinalTabstop(e,t,n){(t||n&&e.placeholders.length>0)&&(e.placeholders.find(s=>s.index===0)||e.appendChild(new js(0)))}_accept(e,t){if(e===void 0||this._token.type===e){const n=t?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){const t=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){const i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}const n=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return(t=this._accept(5,!0))?(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new ki(t)),!0):!1}_parseTabstopOrVariableName(e){let t;const n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new js(Number(t)):new Wf(t)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let t;const n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);const s=new js(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(s),!0;if(!this._parse(s))return e.appendChild(new ki("${"+t+":")),s.children.forEach(e.appendChild,e),!0}else if(s.index>0&&this._accept(7)){const r=new Lh;for(;;){if(this._parseChoiceElement(r)){if(this._accept(2))continue;if(this._accept(7)&&(s.appendChild(r),this._accept(4)))return e.appendChild(s),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(s)?(e.appendChild(s),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(s),!0):this._backTo(n)}_parseChoiceElement(e){const t=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(t),!1;n.push(i)}return n.length===0?(this._backTo(t),!1):(e.appendChild(new ki(n.join(""))),!0)}_parseComplexVariable(e){let t;const n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);const s=new Wf(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(s),!0;if(!this._parse(s))return e.appendChild(new ki("${"+t+":")),s.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(s)?(e.appendChild(s),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(s),!0):this._backTo(n)}_parseTransform(e){const t=new CS;let n="",i="";for(;!this._accept(6);){let s;if(s=this._accept(5,!0)){s=this._accept(6,!0)||s,n+=s;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let s;if(s=this._accept(5,!0)){s=this._accept(5,!0)||this._accept(6,!0)||s,t.appendChild(new ki(s));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(n,i)}catch{return!1}return e.transform=t,!0}_parseFormatString(e){const t=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);const i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new _o(Number(i))),!0;if(!this._accept(1))return this._backTo(t),!1}else return e.appendChild(new _o(Number(i))),!0;else return this._backTo(t),!1;if(this._accept(6)){const s=this._accept(9,!0);return!s||!this._accept(4)?(this._backTo(t),!1):(e.appendChild(new _o(Number(i),s)),!0)}else if(this._accept(11)){const s=this._until(4);if(s)return e.appendChild(new _o(Number(i),void 0,s,void 0)),!0}else if(this._accept(12)){const s=this._until(4);if(s)return e.appendChild(new _o(Number(i),void 0,void 0,s)),!0}else if(this._accept(13)){const s=this._until(1);if(s){const r=this._until(4);if(r)return e.appendChild(new _o(Number(i),void 0,s,r)),!0}}else{const s=this._until(4);if(s)return e.appendChild(new _o(Number(i),void 0,void 0,s)),!0}return this._backTo(t),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new ki(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}}u(Ll,"SnippetParser");const Hae=m("defaultLabel","input"),Bae=m("label.preserveCaseToggle","Preserve Case");class pU extends pp{constructor(e){super({icon:b.preserveCase,title:Bae+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}u(pU,"PreserveCaseToggle");class mU extends lo{constructor(e,t,n,i){super(),this._showOptionButtons=n,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new R),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new R),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new R),this._onInput=this._register(new R),this._onKeyUp=this._register(new R),this._onPreserveCaseKeyDown=this._register(new R),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=t,this.placeholder=i.placeholder||"",this.validation=i.validation,this.label=i.label||Hae,this.inputActiveOptionBorder=i.inputActiveOptionBorder,this.inputActiveOptionForeground=i.inputActiveOptionForeground,this.inputActiveOptionBackground=i.inputActiveOptionBackground,this.inputBackground=i.inputBackground,this.inputForeground=i.inputForeground,this.inputBorder=i.inputBorder,this.inputValidationInfoBorder=i.inputValidationInfoBorder,this.inputValidationInfoBackground=i.inputValidationInfoBackground,this.inputValidationInfoForeground=i.inputValidationInfoForeground,this.inputValidationWarningBorder=i.inputValidationWarningBorder,this.inputValidationWarningBackground=i.inputValidationWarningBackground,this.inputValidationWarningForeground=i.inputValidationWarningForeground,this.inputValidationErrorBorder=i.inputValidationErrorBorder,this.inputValidationErrorBackground=i.inputValidationErrorBackground,this.inputValidationErrorForeground=i.inputValidationErrorForeground;const s=i.appendPreserveCaseLabel||"",r=i.history||[],a=!!i.flexibleHeight,l=!!i.flexibleWidth,c=i.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new MI(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:r,showHistoryHint:i.showHistoryHint,flexibleHeight:a,flexibleWidth:l,flexibleMaxHeight:c})),this.preserveCase=this._register(new pU({appendTitle:s,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.preserveCase.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(g=>{this._onPreserveCaseKeyDown.fire(g)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;const d=[this.preserveCase.domNode];this.onkeydown(this.domNode,g=>{if(g.equals(15)||g.equals(17)||g.equals(9)){const f=d.indexOf(document.activeElement);if(f>=0){let p=-1;g.equals(17)?p=(f+1)%d.length:g.equals(15)&&(f===0?p=d.length-1:p=f-1),g.equals(9)?(d[f].blur(),this.inputBox.focus()):p>=0&&d[p].focus(),ft.stop(g,!0)}}});const h=document.createElement("div");h.className="controls",h.style.display=this._showOptionButtons?"block":"none",h.appendChild(this.preserveCase.domNode),this.domNode.appendChild(h),e?.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,g=>this._onKeyDown.fire(g)),this.onkeyup(this.inputBox.inputElement,g=>this._onKeyUp.fire(g)),this.oninput(this.inputBox.inputElement,g=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,g=>this._onMouseDown.fire(g))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(e){e?this.enable():this.disable()}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.preserveCase.style(e);const t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}validate(){this.inputBox&&this.inputBox.validate()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.inputBox.width=e,this.domNode.style.width=e+"px"}dispose(){super.dispose()}}u(mU,"ReplaceInput");var bU=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},_U=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const AN=new ce("suggestWidgetVisible",!1,m("suggestWidgetVisible","Whether suggestion are visible")),IN="historyNavigationWidgetFocus",vU="historyNavigationForwardsEnabled",CU="historyNavigationBackwardsEnabled";let cu;const SC=[];function wU(o,e){if(SC.includes(e))throw new Error("Cannot register the same widget multiple times");SC.push(e);const t=new J,n=t.add(o.createScoped(e.element)),i=new ce(IN,!1).bindTo(n),s=new ce(vU,!0).bindTo(n),r=new ce(CU,!0).bindTo(n),a=u(()=>{i.set(!0),cu=e},"onDidFocus"),l=u(()=>{i.set(!1),cu===e&&(cu=void 0)},"onDidBlur");return e.element===document.activeElement&&a(),t.add(e.onDidFocus(()=>a())),t.add(e.onDidBlur(()=>l())),t.add(He(()=>{SC.splice(SC.indexOf(e),1),l()})),{scopedContextKeyService:n,historyNavigationForwardsEnablement:s,historyNavigationBackwardsEnablement:r,dispose(){t.dispose()}}}u(wU,"registerAndCreateHistoryNavigationContext");let TM=u(class extends hB{constructor(e,t,n,i,s=!1){super(e,t,s,n),this._register(wU(i,this.inputBox))}},"ContextScopedFindInput");TM=bU([_U(3,De)],TM);let LM=u(class extends mU{constructor(e,t,n,i,s=!1){super(e,t,s,n),this._register(wU(i,this.inputBox))}},"ContextScopedReplaceInput");LM=bU([_U(3,De)],LM);gs.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:oe.and(oe.has(IN),oe.equals(CU,!0),AN.isEqualTo(!1)),primary:16,secondary:[528],handler:o=>{cu&&cu.showPreviousValue()}});gs.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:oe.and(oe.has(IN),oe.equals(vU,!0),AN.isEqualTo(!1)),primary:18,secondary:[530],handler:o=>{cu&&cu.showNextValue()}});var Ym=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const qe={Visible:AN,HasFocusedSuggestion:new ce("suggestWidgetHasFocusedSuggestion",!1,m("suggestWidgetHasSelection","Whether any suggestion is focused")),DetailsVisible:new ce("suggestWidgetDetailsVisible",!1,m("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new ce("suggestWidgetMultipleSuggestions",!1,m("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new ce("suggestionMakesTextEdit",!0,m("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new ce("acceptSuggestionOnEnter",!0,m("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new ce("suggestionHasInsertAndReplaceRange",!1,m("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new ce("suggestionInsertMode",void 0,{type:"string",description:m("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new ce("suggestionCanResolve",!1,m("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},Cc=new P("suggestWidgetStatusBar");class yU{constructor(e,t,n,i){this.position=e,this.completion=t,this.container=n,this.provider=i,this.isInvalid=!1,this.score=fr.Default,this.distance=0,this.textLabel=typeof t.label=="string"?t.label:t.label.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase(),this.extensionId=t.extensionId,L.isIRange(t.range)?(this.editStart=new H(t.range.startLineNumber,t.range.startColumn),this.editInsertEnd=new H(t.range.endLineNumber,t.range.endColumn),this.editReplaceEnd=new H(t.range.endLineNumber,t.range.endColumn),this.isInvalid=this.isInvalid||L.spansMultipleLines(t.range)||t.range.startLineNumber!==e.lineNumber):(this.editStart=new H(t.range.insert.startLineNumber,t.range.insert.startColumn),this.editInsertEnd=new H(t.range.insert.endLineNumber,t.range.insert.endColumn),this.editReplaceEnd=new H(t.range.replace.endLineNumber,t.range.replace.endColumn),this.isInvalid=this.isInvalid||L.spansMultipleLines(t.range.insert)||L.spansMultipleLines(t.range.replace)||t.range.insert.startLineNumber!==e.lineNumber||t.range.replace.startLineNumber!==e.lineNumber||t.range.insert.startColumn!==t.range.replace.startColumn),typeof i.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._isResolved=!0)}get isResolved(){return!!this._isResolved}resolve(e){return Ym(this,void 0,void 0,function*(){if(!this._resolveCache){const t=e.onCancellationRequested(()=>{this._resolveCache=void 0,this._isResolved=!1});this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then(n=>{Object.assign(this.completion,n),this._isResolved=!0,t.dispose()},n=>{ca(n)&&(this._resolveCache=void 0,this._isResolved=!1)})}return this._resolveCache})}}u(yU,"CompletionItem");class Uf{constructor(e=2,t=new Set,n=new Set,i=!0){this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=n,this.showDeprecated=i}}u(Uf,"CompletionOptions");Uf.default=new Uf;let Wae;function Uae(){return Wae}u(Uae,"getSnippetSuggestSupport");class SU{constructor(e,t,n,i){this.items=e,this.needsClipboard=t,this.durations=n,this.disposable=i}}u(SU,"CompletionItemModel");function NN(o,e,t,n=Uf.default,i={triggerKind:0},s=Ge.None){return Ym(this,void 0,void 0,function*(){const r=new Ai(!0);t=t.clone();const a=e.getWordAtPosition(t),l=a?new L(t.lineNumber,a.startColumn,t.lineNumber,a.endColumn):L.fromPositions(t),c={replace:l,insert:l.setEndPosition(t.lineNumber,t.column)},d=[],h=new J,g=[];let f=!1;const p=u((v,C,w)=>{var y,S,E;let k=!1;if(!C)return k;for(const T of C.suggestions)if(!n.kindFilter.has(T.kind)){if(!n.showDeprecated&&(!((y=T?.tags)===null||y===void 0)&&y.includes(1)))continue;T.range||(T.range=c),T.sortText||(T.sortText=typeof T.label=="string"?T.label:T.label.label),!f&&T.insertTextRules&&T.insertTextRules&4&&(f=Ll.guessNeedsClipboard(T.insertText)),d.push(new yU(t,T,C,v)),k=!0}return RD(C)&&h.add(C),g.push({providerName:(S=v._debugDisplayName)!==null&&S!==void 0?S:"unknown_provider",elapsedProvider:(E=C.duration)!==null&&E!==void 0?E:-1,elapsedOverall:w.elapsed()}),k},"onCompletionList"),_=(()=>Ym(this,void 0,void 0,function*(){}))();for(const v of o.orderedGroups(e)){let C=!1;if(yield Promise.all(v.map(w=>Ym(this,void 0,void 0,function*(){if(!(n.providerFilter.size>0&&!n.providerFilter.has(w)))try{const y=new Ai(!0),S=yield w.provideCompletionItems(e,t,i,s);C=p(w,S,y)||C}catch(y){Hn(y)}}))),C||s.isCancellationRequested)break}return yield _,s.isCancellationRequested?(h.dispose(),Promise.reject(new El)):new SU(d.sort(TU(n.snippetSortOrder)),f,{entries:g,elapsed:r.elapsed()},h)})}u(NN,"provideSuggestionItems");function PN(o,e){if(o.sortTextLow&&e.sortTextLow){if(o.sortTextLow<e.sortTextLow)return-1;if(o.sortTextLow>e.sortTextLow)return 1}return o.textLabel<e.textLabel?-1:o.textLabel>e.textLabel?1:o.completion.kind-e.completion.kind}u(PN,"defaultComparator");function Gae(o,e){if(o.completion.kind!==e.completion.kind){if(o.completion.kind===27)return-1;if(e.completion.kind===27)return 1}return PN(o,e)}u(Gae,"snippetUpComparator");function zae(o,e){if(o.completion.kind!==e.completion.kind){if(o.completion.kind===27)return 1;if(e.completion.kind===27)return-1}return PN(o,e)}u(zae,"snippetDownComparator");const wS=new Map;wS.set(0,Gae);wS.set(2,zae);wS.set(1,PN);function TU(o){return wS.get(o)}u(TU,"getSuggestionComparator");Qe.registerCommand("_executeCompletionItemProvider",(o,...e)=>Ym(void 0,void 0,void 0,function*(){const[t,n,i,s]=e;bt(be.isUri(t)),bt(H.isIPosition(n)),bt(typeof i=="string"||!i),bt(typeof s=="number"||!s);const{completionProvider:r}=o.get(ue),a=yield o.get(Ji).createModelReference(t);try{const l={incomplete:!1,suggestions:[]},c=[],d=yield NN(r,a.object.textEditorModel,H.lift(n),void 0,{triggerCharacter:i,triggerKind:i?1:0});for(const h of d.items)c.length<(s??0)&&c.push(h.resolve(Ge.None)),l.incomplete=l.incomplete||h.container.incomplete,l.suggestions.push(h.completion);try{return yield Promise.all(c),l}finally{setTimeout(()=>d.disposable.dispose(),100)}}finally{a.dispose()}}));function Kae(o,e){var t;(t=o.getContribution("editor.contrib.suggestController"))===null||t===void 0||t.triggerSuggest(new Set().add(e),void 0,!0)}u(Kae,"showSimpleSuggestions");class jd{static isAllOff(e){return e.other==="off"&&e.comments==="off"&&e.strings==="off"}static isAllOn(e){return e.other==="on"&&e.comments==="on"&&e.strings==="on"}static valueFor(e,t){switch(t){case 1:return e.comments;case 2:return e.strings;default:return e.other}}}u(jd,"QuickSuggestionsOptions");var RN=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ow=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const SF=ee;let rw=u(class xM extends U{constructor(e,t,n){super(),this._editor=e,this._instantiationService=t,this._keybindingService=n,this._widget=this._register(this._instantiationService.createInstance(du,this._editor)),this._isChangingDecorations=!1,this._messages=[],this._messagesAreComplete=!1,this._participants=[];for(const i of Sh.getAll())this._participants.push(this._instantiationService.createInstance(i,this._editor));this._participants.sort((i,s)=>i.hoverOrdinal-s.hoverOrdinal),this._computer=new Xb(this._editor,this._participants),this._hoverOperation=this._register(new MN(this._editor,this._computer)),this._register(this._hoverOperation.onResult(i=>{this._withResult(i.value,i.isComplete,i.hasLoadingMessage)})),this._register(this._editor.onDidChangeModelDecorations(()=>{this._isChangingDecorations||this._onModelDecorationsChanged()})),this._register(Dn(this._widget.getDomNode(),"keydown",i=>{i.equals(9)&&this.hide()})),this._register(Wt.onDidChange(()=>{this._widget.position&&this._computer.anchor&&this._messages.length>0&&(this._widget.clear(),this._renderMessages(this._computer.anchor,this._messages))}))}_onModelDecorationsChanged(){this._widget.position&&(this._hoverOperation.cancel(),this._widget.isColorPickerVisible||this._hoverOperation.start(0))}maybeShowAt(e){const t=[];for(const i of this._participants)if(i.suggestHoverAnchor){const s=i.suggestHoverAnchor(e);s&&t.push(s)}const n=e.target;if(n.type===6&&t.push(new x0(0,n.range)),n.type===7){const i=this._editor.getOption(46).typicalHalfwidthCharacterWidth/2;!n.detail.isAfterLines&&typeof n.detail.horizontalDistanceToText=="number"&&n.detail.horizontalDistanceToText<i&&t.push(new x0(0,n.range))}return t.length===0?!1:(t.sort((i,s)=>s.priority-i.priority),this._startShowingAt(t[0],0,!1),!0)}startShowingAtRange(e,t,n){this._startShowingAt(new x0(0,e),t,n)}_startShowingAt(e,t,n){if(!(this._computer.anchor&&this._computer.anchor.equals(e))){if(this._hoverOperation.cancel(),this._widget.position)if(!this._computer.anchor||!e.canAdoptVisibleHover(this._computer.anchor,this._widget.position))this.hide();else{const i=this._messages.filter(s=>s.isValidForHoverAnchor(e));if(i.length===0)this.hide();else{if(i.length===this._messages.length&&this._messagesAreComplete)return;this._renderMessages(e,i)}}this._computer.anchor=e,this._computer.shouldFocus=n,this._hoverOperation.start(t)}}hide(){this._computer.anchor=null,this._hoverOperation.cancel(),this._widget.hide()}isColorPickerVisible(){return this._widget.isColorPickerVisible}containsNode(e){return this._widget.getDomNode().contains(e)}_addLoadingMessage(e){if(this._computer.anchor){for(const t of this._participants)if(t.createLoadingMessage){const n=t.createLoadingMessage(this._computer.anchor);if(n)return e.slice(0).concat([n])}}return e}_withResult(e,t,n){this._messages=n?this._addLoadingMessage(e):e,this._messagesAreComplete=t,this._computer.anchor&&this._messages.length>0?this._renderMessages(this._computer.anchor,this._messages):t&&this.hide()}_renderMessages(e,t){const{showAtPosition:n,showAtRange:i,highlightRange:s}=xM.computeHoverRanges(e.range,t),r=new J,a=r.add(new EM(this._keybindingService)),l=document.createDocumentFragment();let c=null;const d={fragment:l,statusBar:a,setColorPicker:h=>c=h,onContentsChanged:()=>this._widget.onContentsChanged(),hide:()=>this.hide()};for(const h of this._participants){const g=t.filter(f=>f.owner===h);g.length>0&&r.add(h.renderHoverParts(d,g))}if(a.hasContent&&l.appendChild(a.hoverElement),l.hasChildNodes()){if(s){const h=this._editor.createDecorationsCollection();try{this._isChangingDecorations=!0,h.set([{range:s,options:xM._DECORATION_OPTIONS}])}finally{this._isChangingDecorations=!1}r.add(He(()=>{try{this._isChangingDecorations=!0,h.clear()}finally{this._isChangingDecorations=!1}}))}this._widget.showAt(l,new LU(c,n,i,this._editor.getOption(55).above,this._computer.shouldFocus,r))}else r.dispose()}static computeHoverRanges(e,t){const n=e.startLineNumber;let i=e.startColumn,s=e.endColumn,r=t[0].range,a=null;for(const l of t)r=L.plusRange(r,l.range),l.range.startLineNumber===n&&l.range.endLineNumber===n&&(i=Math.min(i,l.range.startColumn),s=Math.max(s,l.range.endColumn)),l.forceShowAtRange&&(a=l.range);return{showAtPosition:a?a.getStartPosition():new H(e.startLineNumber,i),showAtRange:a||new L(n,i,n,s),highlightRange:r}}},"ContentHoverController");rw._DECORATION_OPTIONS=Ae.register({description:"content-hover-highlight",className:"hoverHighlight"});rw=RN([ow(1,Ne),ow(2,Cn)],rw);class LU{constructor(e,t,n,i,s,r){this.colorPicker=e,this.showAtPosition=t,this.showAtRange=n,this.preferAbove=i,this.stoleFocus=s,this.disposables=r}}u(LU,"ContentHoverVisibleData");let du=u(class xU extends U{constructor(e,t){super(),this._editor=e,this._contextKeyService=t,this.allowEditorOverflow=!0,this._hoverVisibleKey=A.hoverVisible.bindTo(this._contextKeyService),this._hover=this._register(new kN),this._visibleData=null,this._register(this._editor.onDidLayoutChange(()=>this._layout())),this._register(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(46)&&this._updateFont()})),this._setVisibleData(null),this._layout(),this._editor.addContentWidget(this)}get position(){var e,t;return(t=(e=this._visibleData)===null||e===void 0?void 0:e.showAtPosition)!==null&&t!==void 0?t:null}get isColorPickerVisible(){var e;return Boolean((e=this._visibleData)===null||e===void 0?void 0:e.colorPicker)}dispose(){this._editor.removeContentWidget(this),this._visibleData&&this._visibleData.disposables.dispose(),super.dispose()}getId(){return xU.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){if(!this._visibleData)return null;let e=this._visibleData.preferAbove;return!e&&this._contextKeyService.getContextKeyValue(qe.Visible.key)&&(e=!0),{position:this._visibleData.showAtPosition,range:this._visibleData.showAtRange,preference:e?[1,2]:[2,1]}}_setVisibleData(e){this._visibleData&&this._visibleData.disposables.dispose(),this._visibleData=e,this._hoverVisibleKey.set(!!this._visibleData),this._hover.containerDomNode.classList.toggle("hidden",!this._visibleData)}_layout(){const e=Math.max(this._editor.getLayoutInfo().height/4,250),{fontSize:t,lineHeight:n}=this._editor.getOption(46);this._hover.contentsDomNode.style.fontSize=`${t}px`,this._hover.contentsDomNode.style.lineHeight=`${n/t}`,this._hover.contentsDomNode.style.maxHeight=`${e}px`,this._hover.contentsDomNode.style.maxWidth=`${Math.max(this._editor.getLayoutInfo().width*.66,500)}px`}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}showAt(e,t){this._setVisibleData(t),this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._hover.contentsDomNode.style.paddingBottom="",this._updateFont(),this.onContentsChanged(),this._editor.render(),this.onContentsChanged(),t.stoleFocus&&this._hover.containerDomNode.focus(),t.colorPicker&&t.colorPicker.layout()}hide(){if(this._visibleData){const e=this._visibleData.stoleFocus;this._setVisibleData(null),this._editor.layoutContentWidget(this),e&&this._editor.focus()}}onContentsChanged(){this._editor.layoutContentWidget(this),this._hover.onContentsChanged();const e=this._hover.scrollbar.getScrollDimensions();if(e.scrollWidth>e.width){const n=`${this._hover.scrollbar.options.horizontalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingBottom!==n&&(this._hover.contentsDomNode.style.paddingBottom=n,this._editor.layoutContentWidget(this),this._hover.onContentsChanged())}}clear(){this._hover.contentsDomNode.textContent=""}},"ContentHoverWidget");du.ID="editor.contrib.contentHoverWidget";du=RN([ow(1,De)],du);let EM=u(class extends U{constructor(e){super(),this._keybindingService=e,this._hasContent=!1,this.hoverElement=SF("div.hover-row.status-bar"),this.actionsElement=q(this.hoverElement,SF("div.actions"))}get hasContent(){return this._hasContent}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),n=t?t.getLabel():null;return this._hasContent=!0,this._register(vS.render(this.actionsElement,e,n))}append(e){const t=q(this.actionsElement,e);return this._hasContent=!0,t}},"EditorHoverStatusBar");EM=RN([ow(0,Cn)],EM);class Xb{constructor(e,t){this._editor=e,this._participants=t,this._anchor=null,this._shouldFocus=!1}get anchor(){return this._anchor}set anchor(e){this._anchor=e}get shouldFocus(){return this._shouldFocus}set shouldFocus(e){this._shouldFocus=e}static _getLineDecorations(e,t){if(t.type!==1)return[];const n=e.getModel(),i=t.range.startLineNumber;if(i>n.getLineCount())return[];const s=n.getLineMaxColumn(i);return e.getLineDecorations(i).filter(r=>{if(r.options.isWholeLine)return!0;const a=r.range.startLineNumber===i?r.range.startColumn:1,l=r.range.endLineNumber===i?r.range.endColumn:s;if(r.options.showIfCollapsed){if(a>t.range.startColumn+1||t.range.endColumn-1>l)return!1}else if(a>t.range.startColumn||t.range.endColumn>l)return!1;return!0})}computeAsync(e){const t=this._anchor;if(!this._editor.hasModel()||!t)return nn.EMPTY;const n=Xb._getLineDecorations(this._editor,t);return nn.merge(this._participants.map(i=>i.computeAsync?i.computeAsync(t,n,e):nn.EMPTY))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=Xb._getLineDecorations(this._editor,this._anchor);let t=[];for(const n of this._participants)t=t.concat(n.computeSync(this._anchor,e));return p_(t)}}u(Xb,"ContentHoverComputer");let EU={};(function(){function o(e,t){t(EU)}u(o,"define"),o.amd=!0,function(e,t){typeof exports=="object"&&typeof module<"u"?t(exports):typeof o=="function"&&o.amd?o(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.marked={}))}(this,function(e){function t(X,z){for(var K=0;K<z.length;K++){var D=z[K];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(X,D.key,D)}}u(t,"_defineProperties");function n(X,z,K){return z&&t(X.prototype,z),K&&t(X,K),Object.defineProperty(X,"prototype",{writable:!1}),X}u(n,"_createClass");function i(X,z){if(X){if(typeof X=="string")return s(X,z);var K=Object.prototype.toString.call(X).slice(8,-1);if(K==="Object"&&X.constructor&&(K=X.constructor.name),K==="Map"||K==="Set")return Array.from(X);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return s(X,z)}}u(i,"_unsupportedIterableToArray");function s(X,z){(z==null||z>X.length)&&(z=X.length);for(var K=0,D=new Array(z);K<z;K++)D[K]=X[K];return D}u(s,"_arrayLikeToArray");function r(X,z){var K=typeof Symbol<"u"&&X[Symbol.iterator]||X["@@iterator"];if(K)return(K=K.call(X)).next.bind(K);if(Array.isArray(X)||(K=i(X))||z&&X&&typeof X.length=="number"){K&&(X=K);var D=0;return function(){return D>=X.length?{done:!0}:{done:!1,value:X[D++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}u(r,"_createForOfIteratorHelperLoose");function a(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}u(a,"getDefaults"),e.defaults=a();function l(X){e.defaults=X}u(l,"changeDefaults");var c=/[&<>"']/,d=/[&<>"']/g,h=/[<>"']|&(?!#?\w+;)/,g=/[<>"']|&(?!#?\w+;)/g,f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},p=u(function(z){return f[z]},"getEscapeReplacement");function _(X,z){if(z){if(c.test(X))return X.replace(d,p)}else if(h.test(X))return X.replace(g,p);return X}u(_,"escape");var v=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function C(X){return X.replace(v,function(z,K){return K=K.toLowerCase(),K==="colon"?":":K.charAt(0)==="#"?K.charAt(1)==="x"?String.fromCharCode(parseInt(K.substring(2),16)):String.fromCharCode(+K.substring(1)):""})}u(C,"unescape");var w=/(^|[^\[])\^/g;function y(X,z){X=typeof X=="string"?X:X.source,z=z||"";var K={replace:u(function(N,W){return W=W.source||W,W=W.replace(w,"$1"),X=X.replace(N,W),K},"replace"),getRegex:u(function(){return new RegExp(X,z)},"getRegex")};return K}u(y,"edit");var S=/[^\w:]/g,E=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function k(X,z,K){if(X){var D;try{D=decodeURIComponent(C(K)).replace(S,"").toLowerCase()}catch{return null}if(D.indexOf("javascript:")===0||D.indexOf("vbscript:")===0||D.indexOf("data:")===0)return null}z&&!E.test(K)&&(K=V(z,K));try{K=encodeURI(K).replace(/%25/g,"%")}catch{return null}return K}u(k,"cleanUrl");var T={},x=/^[^:]+:\/*[^/]*$/,M=/^([^:]+:)[\s\S]*$/,F=/^([^:]+:\/*[^/]*)[\s\S]*$/;function V(X,z){T[" "+X]||(x.test(X)?T[" "+X]=X+"/":T[" "+X]=he(X,"/",!0)),X=T[" "+X];var K=X.indexOf(":")===-1;return z.substring(0,2)==="//"?K?z:X.replace(M,"$1")+z:z.charAt(0)==="/"?K?z:X.replace(F,"$1")+z:X+z}u(V,"resolveUrl");var G={exec:u(function(){},"noopTest")};function j(X){for(var z=1,K,D;z<arguments.length;z++){K=arguments[z];for(D in K)Object.prototype.hasOwnProperty.call(K,D)&&(X[D]=K[D])}return X}u(j,"merge");function ae(X,z){var K=X.replace(/\|/g,function(W,O,Z){for(var se=!1,xe=O;--xe>=0&&Z[xe]==="\\";)se=!se;return se?"|":" |"}),D=K.split(/ \|/),N=0;if(D[0].trim()||D.shift(),D.length>0&&!D[D.length-1].trim()&&D.pop(),D.length>z)D.splice(z);else for(;D.length<z;)D.push("");for(;N<D.length;N++)D[N]=D[N].trim().replace(/\\\|/g,"|");return D}u(ae,"splitCells");function he(X,z,K){var D=X.length;if(D===0)return"";for(var N=0;N<D;){var W=X.charAt(D-N-1);if(W===z&&!K)N++;else if(W!==z&&K)N++;else break}return X.slice(0,D-N)}u(he,"rtrim");function Se(X,z){if(X.indexOf(z[1])===-1)return-1;for(var K=X.length,D=0,N=0;N<K;N++)if(X[N]==="\\")N++;else if(X[N]===z[0])D++;else if(X[N]===z[1]&&(D--,D<0))return N;return-1}u(Se,"findClosingBracket");function Te(X){X&&X.sanitize&&!X.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}u(Te,"checkSanitizeDeprecation");function ke(X,z){if(z<1)return"";for(var K="";z>1;)z&1&&(K+=X),z>>=1,X+=X;return K+X}u(ke,"repeatString");function Ue(X,z,K,D){var N=z.href,W=z.title?_(z.title):null,O=X[1].replace(/\\([\[\]])/g,"$1");if(X[0].charAt(0)!=="!"){D.state.inLink=!0;var Z={type:"link",raw:K,href:N,title:W,text:O,tokens:D.inlineTokens(O,[])};return D.state.inLink=!1,Z}return{type:"image",raw:K,href:N,title:W,text:_(O)}}u(Ue,"outputLink");function Rt(X,z){var K=X.match(/^(\s+)(?:```)/);if(K===null)return z;var D=K[1];return z.split(`
`).map(function(N){var W=N.match(/^\s+/);if(W===null)return N;var O=W[0];return O.length>=D.length?N.slice(D.length):N}).join(`
`)}u(Rt,"indentCodeCompensation");var Tt=function(){function X(K){this.options=K||e.defaults}u(X,"Tokenizer");var z=X.prototype;return z.space=u(function(D){var N=this.rules.block.newline.exec(D);if(N&&N[0].length>0)return{type:"space",raw:N[0]}},"space"),z.code=u(function(D){var N=this.rules.block.code.exec(D);if(N){var W=N[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:N[0],codeBlockStyle:"indented",text:this.options.pedantic?W:he(W,`
`)}}},"code"),z.fences=u(function(D){var N=this.rules.block.fences.exec(D);if(N){var W=N[0],O=Rt(W,N[3]||"");return{type:"code",raw:W,lang:N[2]?N[2].trim():N[2],text:O}}},"fences"),z.heading=u(function(D){var N=this.rules.block.heading.exec(D);if(N){var W=N[2].trim();if(/#$/.test(W)){var O=he(W,"#");(this.options.pedantic||!O||/ $/.test(O))&&(W=O.trim())}var Z={type:"heading",raw:N[0],depth:N[1].length,text:W,tokens:[]};return this.lexer.inline(Z.text,Z.tokens),Z}},"heading"),z.hr=u(function(D){var N=this.rules.block.hr.exec(D);if(N)return{type:"hr",raw:N[0]}},"hr"),z.blockquote=u(function(D){var N=this.rules.block.blockquote.exec(D);if(N){var W=N[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:N[0],tokens:this.lexer.blockTokens(W,[]),text:W}}},"blockquote"),z.list=u(function(D){var N=this.rules.block.list.exec(D);if(N){var W,O,Z,se,xe,we,We,Ve,yt,ut,Ee,wn,Qt=N[1].trim(),Rs=Qt.length>1,qt={type:"list",raw:"",ordered:Rs,start:Rs?+Qt.slice(0,-1):"",loose:!1,items:[]};Qt=Rs?"\\d{1,9}\\"+Qt.slice(-1):"\\"+Qt,this.options.pedantic&&(Qt=Rs?Qt:"[*+-]");for(var Wn=new RegExp("^( {0,3}"+Qt+")((?:[	 ][^\\n]*)?(?:\\n|$))");D&&(wn=!1,!(!(N=Wn.exec(D))||this.rules.block.hr.test(D)));){if(W=N[0],D=D.substring(W.length),Ve=N[2].split(`
`,1)[0],yt=D.split(`
`,1)[0],this.options.pedantic?(se=2,Ee=Ve.trimLeft()):(se=N[2].search(/[^ ]/),se=se>4?1:se,Ee=Ve.slice(se),se+=N[1].length),we=!1,!Ve&&/^ *$/.test(yt)&&(W+=yt+`
`,D=D.substring(yt.length+1),wn=!0),!wn)for(var sd=new RegExp("^ {0,"+Math.min(3,se-1)+"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))"),ms=new RegExp("^ {0,"+Math.min(3,se-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)");D&&(ut=D.split(`
`,1)[0],Ve=ut,this.options.pedantic&&(Ve=Ve.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(sd.test(Ve)||ms.test(D)));){if(Ve.search(/[^ ]/)>=se||!Ve.trim())Ee+=`
`+Ve.slice(se);else if(!we)Ee+=`
`+Ve;else break;!we&&!Ve.trim()&&(we=!0),W+=ut+`
`,D=D.substring(ut.length+1)}qt.loose||(We?qt.loose=!0:/\n *\n *$/.test(W)&&(We=!0)),this.options.gfm&&(O=/^\[[ xX]\] /.exec(Ee),O&&(Z=O[0]!=="[ ] ",Ee=Ee.replace(/^\[[ xX]\] +/,""))),qt.items.push({type:"list_item",raw:W,task:!!O,checked:Z,loose:!1,text:Ee}),qt.raw+=W}qt.items[qt.items.length-1].raw=W.trimRight(),qt.items[qt.items.length-1].text=Ee.trimRight(),qt.raw=qt.raw.trimRight();var Mr=qt.items.length;for(xe=0;xe<Mr;xe++){this.lexer.state.top=!1,qt.items[xe].tokens=this.lexer.blockTokens(qt.items[xe].text,[]);var pa=qt.items[xe].tokens.filter(function(Bl){return Bl.type==="space"}),od=pa.every(function(Bl){for(var rd=Bl.raw.split(""),po=0,Fv=r(rd),Dp;!(Dp=Fv()).done;){var Ov=Dp.value;if(Ov===`
`&&(po+=1),po>1)return!0}return!1});!qt.loose&&pa.length&&od&&(qt.loose=!0,qt.items[xe].loose=!0)}return qt}},"list"),z.html=u(function(D){var N=this.rules.block.html.exec(D);if(N){var W={type:"html",raw:N[0],pre:!this.options.sanitizer&&(N[1]==="pre"||N[1]==="script"||N[1]==="style"),text:N[0]};return this.options.sanitize&&(W.type="paragraph",W.text=this.options.sanitizer?this.options.sanitizer(N[0]):_(N[0]),W.tokens=[],this.lexer.inline(W.text,W.tokens)),W}},"html"),z.def=u(function(D){var N=this.rules.block.def.exec(D);if(N){N[3]&&(N[3]=N[3].substring(1,N[3].length-1));var W=N[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:W,raw:N[0],href:N[2],title:N[3]}}},"def"),z.table=u(function(D){var N=this.rules.block.table.exec(D);if(N){var W={type:"table",header:ae(N[1]).map(function(We){return{text:We}}),align:N[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:N[3]&&N[3].trim()?N[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(W.header.length===W.align.length){W.raw=N[0];var O=W.align.length,Z,se,xe,we;for(Z=0;Z<O;Z++)/^ *-+: *$/.test(W.align[Z])?W.align[Z]="right":/^ *:-+: *$/.test(W.align[Z])?W.align[Z]="center":/^ *:-+ *$/.test(W.align[Z])?W.align[Z]="left":W.align[Z]=null;for(O=W.rows.length,Z=0;Z<O;Z++)W.rows[Z]=ae(W.rows[Z],W.header.length).map(function(We){return{text:We}});for(O=W.header.length,se=0;se<O;se++)W.header[se].tokens=[],this.lexer.inline(W.header[se].text,W.header[se].tokens);for(O=W.rows.length,se=0;se<O;se++)for(we=W.rows[se],xe=0;xe<we.length;xe++)we[xe].tokens=[],this.lexer.inline(we[xe].text,we[xe].tokens);return W}}},"table"),z.lheading=u(function(D){var N=this.rules.block.lheading.exec(D);if(N){var W={type:"heading",raw:N[0],depth:N[2].charAt(0)==="="?1:2,text:N[1],tokens:[]};return this.lexer.inline(W.text,W.tokens),W}},"lheading"),z.paragraph=u(function(D){var N=this.rules.block.paragraph.exec(D);if(N){var W={type:"paragraph",raw:N[0],text:N[1].charAt(N[1].length-1)===`
`?N[1].slice(0,-1):N[1],tokens:[]};return this.lexer.inline(W.text,W.tokens),W}},"paragraph"),z.text=u(function(D){var N=this.rules.block.text.exec(D);if(N){var W={type:"text",raw:N[0],text:N[0],tokens:[]};return this.lexer.inline(W.text,W.tokens),W}},"text"),z.escape=u(function(D){var N=this.rules.inline.escape.exec(D);if(N)return{type:"escape",raw:N[0],text:_(N[1])}},"escape$1"),z.tag=u(function(D){var N=this.rules.inline.tag.exec(D);if(N)return!this.lexer.state.inLink&&/^<a /i.test(N[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(N[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(N[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(N[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:N[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(N[0]):_(N[0]):N[0]}},"tag"),z.link=u(function(D){var N=this.rules.inline.link.exec(D);if(N){var W=N[2].trim();if(!this.options.pedantic&&/^</.test(W)){if(!/>$/.test(W))return;var O=he(W.slice(0,-1),"\\");if((W.length-O.length)%2===0)return}else{var Z=Se(N[2],"()");if(Z>-1){var se=N[0].indexOf("!")===0?5:4,xe=se+N[1].length+Z;N[2]=N[2].substring(0,Z),N[0]=N[0].substring(0,xe).trim(),N[3]=""}}var we=N[2],We="";if(this.options.pedantic){var Ve=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(we);Ve&&(we=Ve[1],We=Ve[3])}else We=N[3]?N[3].slice(1,-1):"";return we=we.trim(),/^</.test(we)&&(this.options.pedantic&&!/>$/.test(W)?we=we.slice(1):we=we.slice(1,-1)),Ue(N,{href:we&&we.replace(this.rules.inline._escapes,"$1"),title:We&&We.replace(this.rules.inline._escapes,"$1")},N[0],this.lexer)}},"link"),z.reflink=u(function(D,N){var W;if((W=this.rules.inline.reflink.exec(D))||(W=this.rules.inline.nolink.exec(D))){var O=(W[2]||W[1]).replace(/\s+/g," ");if(O=N[O.toLowerCase()],!O||!O.href){var Z=W[0].charAt(0);return{type:"text",raw:Z,text:Z}}return Ue(W,O,W[0],this.lexer)}},"reflink"),z.emStrong=u(function(D,N,W){W===void 0&&(W="");var O=this.rules.inline.emStrong.lDelim.exec(D);if(O&&!(O[3]&&W.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var Z=O[1]||O[2]||"";if(!Z||Z&&(W===""||this.rules.inline.punctuation.exec(W))){var se=O[0].length-1,xe,we,We=se,Ve=0,yt=O[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(yt.lastIndex=0,N=N.slice(-1*D.length+se);(O=yt.exec(N))!=null;)if(xe=O[1]||O[2]||O[3]||O[4]||O[5]||O[6],!!xe){if(we=xe.length,O[3]||O[4]){We+=we;continue}else if((O[5]||O[6])&&se%3&&!((se+we)%3)){Ve+=we;continue}if(We-=we,!(We>0)){if(we=Math.min(we,we+We+Ve),Math.min(se,we)%2){var ut=D.slice(1,se+O.index+we);return{type:"em",raw:D.slice(0,se+O.index+we+1),text:ut,tokens:this.lexer.inlineTokens(ut,[])}}var Ee=D.slice(2,se+O.index+we-1);return{type:"strong",raw:D.slice(0,se+O.index+we+1),text:Ee,tokens:this.lexer.inlineTokens(Ee,[])}}}}}},"emStrong"),z.codespan=u(function(D){var N=this.rules.inline.code.exec(D);if(N){var W=N[2].replace(/\n/g," "),O=/[^ ]/.test(W),Z=/^ /.test(W)&&/ $/.test(W);return O&&Z&&(W=W.substring(1,W.length-1)),W=_(W,!0),{type:"codespan",raw:N[0],text:W}}},"codespan"),z.br=u(function(D){var N=this.rules.inline.br.exec(D);if(N)return{type:"br",raw:N[0]}},"br"),z.del=u(function(D){var N=this.rules.inline.del.exec(D);if(N)return{type:"del",raw:N[0],text:N[2],tokens:this.lexer.inlineTokens(N[2],[])}},"del"),z.autolink=u(function(D,N){var W=this.rules.inline.autolink.exec(D);if(W){var O,Z;return W[2]==="@"?(O=_(this.options.mangle?N(W[1]):W[1]),Z="mailto:"+O):(O=_(W[1]),Z=O),{type:"link",raw:W[0],text:O,href:Z,tokens:[{type:"text",raw:O,text:O}]}}},"autolink"),z.url=u(function(D,N){var W;if(W=this.rules.inline.url.exec(D)){var O,Z;if(W[2]==="@")O=_(this.options.mangle?N(W[0]):W[0]),Z="mailto:"+O;else{var se;do se=W[0],W[0]=this.rules.inline._backpedal.exec(W[0])[0];while(se!==W[0]);O=_(W[0]),W[1]==="www."?Z="http://"+O:Z=O}return{type:"link",raw:W[0],text:O,href:Z,tokens:[{type:"text",raw:O,text:O}]}}},"url"),z.inlineText=u(function(D,N){var W=this.rules.inline.text.exec(D);if(W){var O;return this.lexer.state.inRawBlock?O=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(W[0]):_(W[0]):W[0]:O=_(this.options.smartypants?N(W[0]):W[0]),{type:"text",raw:W[0],text:O}}},"inlineText"),X}(),Ce={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:G,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};Ce._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Ce._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,Ce.def=y(Ce.def).replace("label",Ce._label).replace("title",Ce._title).getRegex(),Ce.bullet=/(?:[*+-]|\d{1,9}[.)])/,Ce.listItemStart=y(/^( *)(bull) */).replace("bull",Ce.bullet).getRegex(),Ce.list=y(Ce.list).replace(/bull/g,Ce.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Ce.def.source+")").getRegex(),Ce._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Ce._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Ce.html=y(Ce.html,"i").replace("comment",Ce._comment).replace("tag",Ce._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Ce.paragraph=y(Ce._paragraph).replace("hr",Ce.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ce._tag).getRegex(),Ce.blockquote=y(Ce.blockquote).replace("paragraph",Ce.paragraph).getRegex(),Ce.normal=j({},Ce),Ce.gfm=j({},Ce.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),Ce.gfm.table=y(Ce.gfm.table).replace("hr",Ce.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ce._tag).getRegex(),Ce.gfm.paragraph=y(Ce._paragraph).replace("hr",Ce.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Ce.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ce._tag).getRegex(),Ce.pedantic=j({},Ce.normal,{html:y(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ce._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:G,paragraph:y(Ce.normal._paragraph).replace("hr",Ce.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Ce.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var _e={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:G,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:G,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};_e._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",_e.punctuation=y(_e.punctuation).replace(/punctuation/g,_e._punctuation).getRegex(),_e.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,_e.escapedEmSt=/\\\*|\\_/g,_e._comment=y(Ce._comment).replace("(?:-->|$)","-->").getRegex(),_e.emStrong.lDelim=y(_e.emStrong.lDelim).replace(/punct/g,_e._punctuation).getRegex(),_e.emStrong.rDelimAst=y(_e.emStrong.rDelimAst,"g").replace(/punct/g,_e._punctuation).getRegex(),_e.emStrong.rDelimUnd=y(_e.emStrong.rDelimUnd,"g").replace(/punct/g,_e._punctuation).getRegex(),_e._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,_e._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,_e._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,_e.autolink=y(_e.autolink).replace("scheme",_e._scheme).replace("email",_e._email).getRegex(),_e._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,_e.tag=y(_e.tag).replace("comment",_e._comment).replace("attribute",_e._attribute).getRegex(),_e._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,_e._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,_e._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,_e.link=y(_e.link).replace("label",_e._label).replace("href",_e._href).replace("title",_e._title).getRegex(),_e.reflink=y(_e.reflink).replace("label",_e._label).replace("ref",Ce._label).getRegex(),_e.nolink=y(_e.nolink).replace("ref",Ce._label).getRegex(),_e.reflinkSearch=y(_e.reflinkSearch,"g").replace("reflink",_e.reflink).replace("nolink",_e.nolink).getRegex(),_e.normal=j({},_e),_e.pedantic=j({},_e.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:y(/^!?\[(label)\]\((.*?)\)/).replace("label",_e._label).getRegex(),reflink:y(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",_e._label).getRegex()}),_e.gfm=j({},_e.normal,{escape:y(_e.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),_e.gfm.url=y(_e.gfm.url,"i").replace("email",_e.gfm._extended_email).getRegex(),_e.breaks=j({},_e.gfm,{br:y(_e.br).replace("{2,}","*").getRegex(),text:y(_e.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function It(X){return X.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}u(It,"smartypants");function Bn(X){var z="",K,D,N=X.length;for(K=0;K<N;K++)D=X.charCodeAt(K),Math.random()>.5&&(D="x"+D.toString(16)),z+="&#"+D+";";return z}u(Bn,"mangle");var Ni=function(){function X(K){this.tokens=[],this.tokens.links=Object.create(null),this.options=K||e.defaults,this.options.tokenizer=this.options.tokenizer||new Tt,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var D={block:Ce.normal,inline:_e.normal};this.options.pedantic?(D.block=Ce.pedantic,D.inline=_e.pedantic):this.options.gfm&&(D.block=Ce.gfm,this.options.breaks?D.inline=_e.breaks:D.inline=_e.gfm),this.tokenizer.rules=D}u(X,"Lexer"),X.lex=u(function(D,N){var W=new X(N);return W.lex(D)},"lex"),X.lexInline=u(function(D,N){var W=new X(N);return W.inlineTokens(D)},"lexInline");var z=X.prototype;return z.lex=u(function(D){D=D.replace(/\r\n|\r/g,`
`),this.blockTokens(D,this.tokens);for(var N;N=this.inlineQueue.shift();)this.inlineTokens(N.src,N.tokens);return this.tokens},"lex"),z.blockTokens=u(function(D,N){var W=this;N===void 0&&(N=[]),this.options.pedantic?D=D.replace(/\t/g,"    ").replace(/^ +$/gm,""):D=D.replace(/^( *)(\t+)/gm,function(We,Ve,yt){return Ve+"    ".repeat(yt.length)});for(var O,Z,se,xe;D;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(We){return(O=We.call({lexer:W},D,N))?(D=D.substring(O.raw.length),N.push(O),!0):!1}))){if(O=this.tokenizer.space(D)){D=D.substring(O.raw.length),O.raw.length===1&&N.length>0?N[N.length-1].raw+=`
`:N.push(O);continue}if(O=this.tokenizer.code(D)){D=D.substring(O.raw.length),Z=N[N.length-1],Z&&(Z.type==="paragraph"||Z.type==="text")?(Z.raw+=`
`+O.raw,Z.text+=`
`+O.text,this.inlineQueue[this.inlineQueue.length-1].src=Z.text):N.push(O);continue}if(O=this.tokenizer.fences(D)){D=D.substring(O.raw.length),N.push(O);continue}if(O=this.tokenizer.heading(D)){D=D.substring(O.raw.length),N.push(O);continue}if(O=this.tokenizer.hr(D)){D=D.substring(O.raw.length),N.push(O);continue}if(O=this.tokenizer.blockquote(D)){D=D.substring(O.raw.length),N.push(O);continue}if(O=this.tokenizer.list(D)){D=D.substring(O.raw.length),N.push(O);continue}if(O=this.tokenizer.html(D)){D=D.substring(O.raw.length),N.push(O);continue}if(O=this.tokenizer.def(D)){D=D.substring(O.raw.length),Z=N[N.length-1],Z&&(Z.type==="paragraph"||Z.type==="text")?(Z.raw+=`
`+O.raw,Z.text+=`
`+O.raw,this.inlineQueue[this.inlineQueue.length-1].src=Z.text):this.tokens.links[O.tag]||(this.tokens.links[O.tag]={href:O.href,title:O.title});continue}if(O=this.tokenizer.table(D)){D=D.substring(O.raw.length),N.push(O);continue}if(O=this.tokenizer.lheading(D)){D=D.substring(O.raw.length),N.push(O);continue}if(se=D,this.options.extensions&&this.options.extensions.startBlock&&function(){var We=1/0,Ve=D.slice(1),yt=void 0;W.options.extensions.startBlock.forEach(function(ut){yt=ut.call({lexer:this},Ve),typeof yt=="number"&&yt>=0&&(We=Math.min(We,yt))}),We<1/0&&We>=0&&(se=D.substring(0,We+1))}(),this.state.top&&(O=this.tokenizer.paragraph(se))){Z=N[N.length-1],xe&&Z.type==="paragraph"?(Z.raw+=`
`+O.raw,Z.text+=`
`+O.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=Z.text):N.push(O),xe=se.length!==D.length,D=D.substring(O.raw.length);continue}if(O=this.tokenizer.text(D)){D=D.substring(O.raw.length),Z=N[N.length-1],Z&&Z.type==="text"?(Z.raw+=`
`+O.raw,Z.text+=`
`+O.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=Z.text):N.push(O);continue}if(D){var we="Infinite loop on byte: "+D.charCodeAt(0);if(this.options.silent){console.error(we);break}else throw new Error(we)}}return this.state.top=!0,N},"blockTokens"),z.inline=u(function(D,N){this.inlineQueue.push({src:D,tokens:N})},"inline"),z.inlineTokens=u(function(D,N){var W=this;N===void 0&&(N=[]);var O,Z,se,xe=D,we,We,Ve;if(this.tokens.links){var yt=Object.keys(this.tokens.links);if(yt.length>0)for(;(we=this.tokenizer.rules.inline.reflinkSearch.exec(xe))!=null;)yt.includes(we[0].slice(we[0].lastIndexOf("[")+1,-1))&&(xe=xe.slice(0,we.index)+"["+ke("a",we[0].length-2)+"]"+xe.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(we=this.tokenizer.rules.inline.blockSkip.exec(xe))!=null;)xe=xe.slice(0,we.index)+"["+ke("a",we[0].length-2)+"]"+xe.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(we=this.tokenizer.rules.inline.escapedEmSt.exec(xe))!=null;)xe=xe.slice(0,we.index)+"++"+xe.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;D;)if(We||(Ve=""),We=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(Ee){return(O=Ee.call({lexer:W},D,N))?(D=D.substring(O.raw.length),N.push(O),!0):!1}))){if(O=this.tokenizer.escape(D)){D=D.substring(O.raw.length),N.push(O);continue}if(O=this.tokenizer.tag(D)){D=D.substring(O.raw.length),Z=N[N.length-1],Z&&O.type==="text"&&Z.type==="text"?(Z.raw+=O.raw,Z.text+=O.text):N.push(O);continue}if(O=this.tokenizer.link(D)){D=D.substring(O.raw.length),N.push(O);continue}if(O=this.tokenizer.reflink(D,this.tokens.links)){D=D.substring(O.raw.length),Z=N[N.length-1],Z&&O.type==="text"&&Z.type==="text"?(Z.raw+=O.raw,Z.text+=O.text):N.push(O);continue}if(O=this.tokenizer.emStrong(D,xe,Ve)){D=D.substring(O.raw.length),N.push(O);continue}if(O=this.tokenizer.codespan(D)){D=D.substring(O.raw.length),N.push(O);continue}if(O=this.tokenizer.br(D)){D=D.substring(O.raw.length),N.push(O);continue}if(O=this.tokenizer.del(D)){D=D.substring(O.raw.length),N.push(O);continue}if(O=this.tokenizer.autolink(D,Bn)){D=D.substring(O.raw.length),N.push(O);continue}if(!this.state.inLink&&(O=this.tokenizer.url(D,Bn))){D=D.substring(O.raw.length),N.push(O);continue}if(se=D,this.options.extensions&&this.options.extensions.startInline&&function(){var Ee=1/0,wn=D.slice(1),Qt=void 0;W.options.extensions.startInline.forEach(function(Rs){Qt=Rs.call({lexer:this},wn),typeof Qt=="number"&&Qt>=0&&(Ee=Math.min(Ee,Qt))}),Ee<1/0&&Ee>=0&&(se=D.substring(0,Ee+1))}(),O=this.tokenizer.inlineText(se,It)){D=D.substring(O.raw.length),O.raw.slice(-1)!=="_"&&(Ve=O.raw.slice(-1)),We=!0,Z=N[N.length-1],Z&&Z.type==="text"?(Z.raw+=O.raw,Z.text+=O.text):N.push(O);continue}if(D){var ut="Infinite loop on byte: "+D.charCodeAt(0);if(this.options.silent){console.error(ut);break}else throw new Error(ut)}}return N},"inlineTokens"),n(X,null,[{key:"rules",get:u(function(){return{block:Ce,inline:_e}},"get")}]),X}(),Po=function(){function X(K){this.options=K||e.defaults}u(X,"Renderer");var z=X.prototype;return z.code=u(function(D,N,W){var O=(N||"").match(/\S*/)[0];if(this.options.highlight){var Z=this.options.highlight(D,O);Z!=null&&Z!==D&&(W=!0,D=Z)}return D=D.replace(/\n$/,"")+`
`,O?'<pre><code class="'+this.options.langPrefix+_(O,!0)+'">'+(W?D:_(D,!0))+`</code></pre>
`:"<pre><code>"+(W?D:_(D,!0))+`</code></pre>
`},"code"),z.blockquote=u(function(D){return`<blockquote>
`+D+`</blockquote>
`},"blockquote"),z.html=u(function(D){return D},"html"),z.heading=u(function(D,N,W,O){if(this.options.headerIds){var Z=this.options.headerPrefix+O.slug(W);return"<h"+N+' id="'+Z+'">'+D+"</h"+N+`>
`}return"<h"+N+">"+D+"</h"+N+`>
`},"heading"),z.hr=u(function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},"hr"),z.list=u(function(D,N,W){var O=N?"ol":"ul",Z=N&&W!==1?' start="'+W+'"':"";return"<"+O+Z+`>
`+D+"</"+O+`>
`},"list"),z.listitem=u(function(D){return"<li>"+D+`</li>
`},"listitem"),z.checkbox=u(function(D){return"<input "+(D?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},"checkbox"),z.paragraph=u(function(D){return"<p>"+D+`</p>
`},"paragraph"),z.table=u(function(D,N){return N&&(N="<tbody>"+N+"</tbody>"),`<table>
<thead>
`+D+`</thead>
`+N+`</table>
`},"table"),z.tablerow=u(function(D){return`<tr>
`+D+`</tr>
`},"tablerow"),z.tablecell=u(function(D,N){var W=N.header?"th":"td",O=N.align?"<"+W+' align="'+N.align+'">':"<"+W+">";return O+D+("</"+W+`>
`)},"tablecell"),z.strong=u(function(D){return"<strong>"+D+"</strong>"},"strong"),z.em=u(function(D){return"<em>"+D+"</em>"},"em"),z.codespan=u(function(D){return"<code>"+D+"</code>"},"codespan"),z.br=u(function(){return this.options.xhtml?"<br/>":"<br>"},"br"),z.del=u(function(D){return"<del>"+D+"</del>"},"del"),z.link=u(function(D,N,W){if(D=k(this.options.sanitize,this.options.baseUrl,D),D===null)return W;var O='<a href="'+_(D)+'"';return N&&(O+=' title="'+N+'"'),O+=">"+W+"</a>",O},"link"),z.image=u(function(D,N,W){if(D=k(this.options.sanitize,this.options.baseUrl,D),D===null)return W;var O='<img src="'+D+'" alt="'+W+'"';return N&&(O+=' title="'+N+'"'),O+=this.options.xhtml?"/>":">",O},"image"),z.text=u(function(D){return D},"text"),X}(),fa=function(){function X(){}u(X,"TextRenderer");var z=X.prototype;return z.strong=u(function(D){return D},"strong"),z.em=u(function(D){return D},"em"),z.codespan=u(function(D){return D},"codespan"),z.del=u(function(D){return D},"del"),z.html=u(function(D){return D},"html"),z.text=u(function(D){return D},"text"),z.link=u(function(D,N,W){return""+W},"link"),z.image=u(function(D,N,W){return""+W},"image"),z.br=u(function(){return""},"br"),X}(),Ro=function(){function X(){this.seen={}}u(X,"Slugger");var z=X.prototype;return z.serialize=u(function(D){return D.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},"serialize"),z.getNextSafeSlug=u(function(D,N){var W=D,O=0;if(this.seen.hasOwnProperty(W)){O=this.seen[D];do O++,W=D+"-"+O;while(this.seen.hasOwnProperty(W))}return N||(this.seen[D]=O,this.seen[W]=0),W},"getNextSafeSlug"),z.slug=u(function(D,N){N===void 0&&(N={});var W=this.serialize(D);return this.getNextSafeSlug(W,N.dryrun)},"slug"),X}(),kr=function(){function X(K){this.options=K||e.defaults,this.options.renderer=this.options.renderer||new Po,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new fa,this.slugger=new Ro}u(X,"Parser"),X.parse=u(function(D,N){var W=new X(N);return W.parse(D)},"parse"),X.parseInline=u(function(D,N){var W=new X(N);return W.parseInline(D)},"parseInline");var z=X.prototype;return z.parse=u(function(D,N){N===void 0&&(N=!0);var W="",O,Z,se,xe,we,We,Ve,yt,ut,Ee,wn,Qt,Rs,qt,Wn,sd,ms,Mr,pa,od=D.length;for(O=0;O<od;O++){if(Ee=D[O],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Ee.type]&&(pa=this.options.extensions.renderers[Ee.type].call({parser:this},Ee),pa!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(Ee.type))){W+=pa||"";continue}switch(Ee.type){case"space":continue;case"hr":{W+=this.renderer.hr();continue}case"heading":{W+=this.renderer.heading(this.parseInline(Ee.tokens),Ee.depth,C(this.parseInline(Ee.tokens,this.textRenderer)),this.slugger);continue}case"code":{W+=this.renderer.code(Ee.text,Ee.lang,Ee.escaped);continue}case"table":{for(yt="",Ve="",xe=Ee.header.length,Z=0;Z<xe;Z++)Ve+=this.renderer.tablecell(this.parseInline(Ee.header[Z].tokens),{header:!0,align:Ee.align[Z]});for(yt+=this.renderer.tablerow(Ve),ut="",xe=Ee.rows.length,Z=0;Z<xe;Z++){for(We=Ee.rows[Z],Ve="",we=We.length,se=0;se<we;se++)Ve+=this.renderer.tablecell(this.parseInline(We[se].tokens),{header:!1,align:Ee.align[se]});ut+=this.renderer.tablerow(Ve)}W+=this.renderer.table(yt,ut);continue}case"blockquote":{ut=this.parse(Ee.tokens),W+=this.renderer.blockquote(ut);continue}case"list":{for(wn=Ee.ordered,Qt=Ee.start,Rs=Ee.loose,xe=Ee.items.length,ut="",Z=0;Z<xe;Z++)Wn=Ee.items[Z],sd=Wn.checked,ms=Wn.task,qt="",Wn.task&&(Mr=this.renderer.checkbox(sd),Rs?Wn.tokens.length>0&&Wn.tokens[0].type==="paragraph"?(Wn.tokens[0].text=Mr+" "+Wn.tokens[0].text,Wn.tokens[0].tokens&&Wn.tokens[0].tokens.length>0&&Wn.tokens[0].tokens[0].type==="text"&&(Wn.tokens[0].tokens[0].text=Mr+" "+Wn.tokens[0].tokens[0].text)):Wn.tokens.unshift({type:"text",text:Mr}):qt+=Mr),qt+=this.parse(Wn.tokens,Rs),ut+=this.renderer.listitem(qt,ms,sd);W+=this.renderer.list(ut,wn,Qt);continue}case"html":{W+=this.renderer.html(Ee.text);continue}case"paragraph":{W+=this.renderer.paragraph(this.parseInline(Ee.tokens));continue}case"text":{for(ut=Ee.tokens?this.parseInline(Ee.tokens):Ee.text;O+1<od&&D[O+1].type==="text";)Ee=D[++O],ut+=`
`+(Ee.tokens?this.parseInline(Ee.tokens):Ee.text);W+=N?this.renderer.paragraph(ut):ut;continue}default:{var Bl='Token with "'+Ee.type+'" type was not found.';if(this.options.silent){console.error(Bl);return}else throw new Error(Bl)}}}return W},"parse"),z.parseInline=u(function(D,N){N=N||this.renderer;var W="",O,Z,se,xe=D.length;for(O=0;O<xe;O++){if(Z=D[O],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Z.type]&&(se=this.options.extensions.renderers[Z.type].call({parser:this},Z),se!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(Z.type))){W+=se||"";continue}switch(Z.type){case"escape":{W+=N.text(Z.text);break}case"html":{W+=N.html(Z.text);break}case"link":{W+=N.link(Z.href,Z.title,this.parseInline(Z.tokens,N));break}case"image":{W+=N.image(Z.href,Z.title,Z.text);break}case"strong":{W+=N.strong(this.parseInline(Z.tokens,N));break}case"em":{W+=N.em(this.parseInline(Z.tokens,N));break}case"codespan":{W+=N.codespan(Z.text);break}case"br":{W+=N.br();break}case"del":{W+=N.del(this.parseInline(Z.tokens,N));break}case"text":{W+=N.text(Z.text);break}default:{var we='Token with "'+Z.type+'" type was not found.';if(this.options.silent){console.error(we);return}else throw new Error(we)}}}return W},"parseInline"),X}();function Oe(X,z,K){if(typeof X>"u"||X===null)throw new Error("marked(): input parameter is undefined or null");if(typeof X!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(X)+", string expected");if(typeof z=="function"&&(K=z,z=null),z=j({},Oe.defaults,z||{}),Te(z),K){var D=z.highlight,N;try{N=Ni.lex(X,z)}catch(se){return K(se)}var W=u(function(xe){var we;if(!xe)try{z.walkTokens&&Oe.walkTokens(N,z.walkTokens),we=kr.parse(N,z)}catch(We){xe=We}return z.highlight=D,xe?K(xe):K(null,we)},"done");if(!D||D.length<3||(delete z.highlight,!N.length))return W();var O=0;Oe.walkTokens(N,function(se){se.type==="code"&&(O++,setTimeout(function(){D(se.text,se.lang,function(xe,we){if(xe)return W(xe);we!=null&&we!==se.text&&(se.text=we,se.escaped=!0),O--,O===0&&W()})},0))}),O===0&&W();return}try{var Z=Ni.lex(X,z);return z.walkTokens&&Oe.walkTokens(Z,z.walkTokens),kr.parse(Z,z)}catch(se){if(se.message+=`
Please report this to https://github.com/markedjs/marked.`,z.silent)return"<p>An error occurred:</p><pre>"+_(se.message+"",!0)+"</pre>";throw se}}u(Oe,"marked"),Oe.options=Oe.setOptions=function(X){return j(Oe.defaults,X),l(Oe.defaults),Oe},Oe.getDefaults=a,Oe.defaults=e.defaults,Oe.use=function(){for(var X=arguments.length,z=new Array(X),K=0;K<X;K++)z[K]=arguments[K];var D=j.apply(void 0,[{}].concat(z)),N=Oe.defaults.extensions||{renderers:{},childTokens:{}},W;z.forEach(function(O){if(O.extensions&&(W=!0,O.extensions.forEach(function(se){if(!se.name)throw new Error("extension name required");if(se.renderer){var xe=N.renderers?N.renderers[se.name]:null;xe?N.renderers[se.name]=function(){for(var we=arguments.length,We=new Array(we),Ve=0;Ve<we;Ve++)We[Ve]=arguments[Ve];var yt=se.renderer.apply(this,We);return yt===!1&&(yt=xe.apply(this,We)),yt}:N.renderers[se.name]=se.renderer}if(se.tokenizer){if(!se.level||se.level!=="block"&&se.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");N[se.level]?N[se.level].unshift(se.tokenizer):N[se.level]=[se.tokenizer],se.start&&(se.level==="block"?N.startBlock?N.startBlock.push(se.start):N.startBlock=[se.start]:se.level==="inline"&&(N.startInline?N.startInline.push(se.start):N.startInline=[se.start]))}se.childTokens&&(N.childTokens[se.name]=se.childTokens)})),O.renderer&&function(){var se=Oe.defaults.renderer||new Po,xe=u(function(Ve){var yt=se[Ve];se[Ve]=function(){for(var ut=arguments.length,Ee=new Array(ut),wn=0;wn<ut;wn++)Ee[wn]=arguments[wn];var Qt=O.renderer[Ve].apply(se,Ee);return Qt===!1&&(Qt=yt.apply(se,Ee)),Qt}},"_loop");for(var we in O.renderer)xe(we);D.renderer=se}(),O.tokenizer&&function(){var se=Oe.defaults.tokenizer||new Tt,xe=u(function(Ve){var yt=se[Ve];se[Ve]=function(){for(var ut=arguments.length,Ee=new Array(ut),wn=0;wn<ut;wn++)Ee[wn]=arguments[wn];var Qt=O.tokenizer[Ve].apply(se,Ee);return Qt===!1&&(Qt=yt.apply(se,Ee)),Qt}},"_loop2");for(var we in O.tokenizer)xe(we);D.tokenizer=se}(),O.walkTokens){var Z=Oe.defaults.walkTokens;D.walkTokens=function(se){O.walkTokens.call(this,se),Z&&Z.call(this,se)}}W&&(D.extensions=N),Oe.setOptions(D)})},Oe.walkTokens=function(X,z){for(var K=u(function(){var O=N.value;switch(z.call(Oe,O),O.type){case"table":{for(var Z=r(O.header),se;!(se=Z()).done;){var xe=se.value;Oe.walkTokens(xe.tokens,z)}for(var we=r(O.rows),We;!(We=we()).done;)for(var Ve=We.value,yt=r(Ve),ut;!(ut=yt()).done;){var Ee=ut.value;Oe.walkTokens(Ee.tokens,z)}break}case"list":{Oe.walkTokens(O.items,z);break}default:Oe.defaults.extensions&&Oe.defaults.extensions.childTokens&&Oe.defaults.extensions.childTokens[O.type]?Oe.defaults.extensions.childTokens[O.type].forEach(function(wn){Oe.walkTokens(O[wn],z)}):O.tokens&&Oe.walkTokens(O.tokens,z)}},"_loop3"),D=r(X),N;!(N=D()).done;)K()},Oe.parseInline=function(X,z){if(typeof X>"u"||X===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof X!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(X)+", string expected");z=j({},Oe.defaults,z||{}),Te(z);try{var K=Ni.lexInline(X,z);return z.walkTokens&&Oe.walkTokens(K,z.walkTokens),kr.parseInline(K,z)}catch(D){if(D.message+=`
Please report this to https://github.com/markedjs/marked.`,z.silent)return"<p>An error occurred:</p><pre>"+_(D.message+"",!0)+"</pre>";throw D}},Oe.Parser=kr,Oe.parser=kr.parse,Oe.Renderer=Po,Oe.TextRenderer=fa,Oe.Lexer=Ni,Oe.lexer=Ni.lex,Oe.Tokenizer=Tt,Oe.Slugger=Ro,Oe.parse=Oe;var Vl=Oe.options,kp=Oe.setOptions,Mp=Oe.use,Hl=Oe.walkTokens,Ah=Oe.parseInline,Pv=Oe,Ih=kr.parse,Rv=Ni.lex;e.Lexer=Ni,e.Parser=kr,e.Renderer=Po,e.Slugger=Ro,e.TextRenderer=fa,e.Tokenizer=Tt,e.getDefaults=a,e.lexer=Rv,e.marked=Oe,e.options=Vl,e.parse=Pv,e.parseInline=Ah,e.parser=Ih,e.setOptions=kp,e.use=Mp,e.walkTokens=Hl,Object.defineProperty(e,"__esModule",{value:!0})})})();var TF=EU||exports;function jae(o,e={},t={}){var n;const i=new J;let s=!1;const r=EI(e),a=u(function(_){let v;try{v=H1(decodeURIComponent(_))}catch{}return v?(v=FO(v,C=>{if(o.uris&&o.uris[C])return be.revive(o.uris[C])}),encodeURIComponent(JSON.stringify(v))):_},"_uriMassage"),l=u(function(_,v){const C=o.uris&&o.uris[_];let w=be.revive(C);return v?_.startsWith(Pe.data+":")?_:(w||(w=be.parse(_)),EV.asBrowserUri(w).toString(!0)):!w||be.parse(_).toString()===w.toString()?_:(w.query&&(w=w.with({query:a(w.query)})),w.toString())},"_href"),c=new TF.Renderer;c.image=(_,v,C)=>{let w=[],y=[];return _&&({href:_,dimensions:w}=wte(_),y.push(`src="${cC(_)}"`)),C&&y.push(`alt="${cC(C)}"`),v&&y.push(`title="${cC(v)}"`),w.length&&(y=y.concat(w)),"<img "+y.join(" ")+">"},c.link=(_,v,C)=>typeof _!="string"?"":(_===C&&(C=MT(C)),v=typeof v=="string"?cC(MT(v)):"",_=MT(_),_=_.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${_}" title="${v||_}">${C}</a>`),c.paragraph=_=>`<p>${_}</p>`;const d=[];if(e.codeBlockRenderer&&(c.code=(_,v)=>{const C=I8.nextId(),w=e.codeBlockRenderer(v??"",_);return d.push(w.then(y=>[C,y])),`<div class="code" data-code="${C}">${HD(_)}</div>`}),e.actionHandler){const _=e.actionHandler.disposables.add(new _t(r,"click")),v=e.actionHandler.disposables.add(new _t(r,"auxclick"));e.actionHandler.disposables.add(fe.any(_.event,v.event)(C=>{const w=new sr(C);if(!w.leftButton&&!w.middleButton)return;let y=w.target;if(!(y.tagName!=="A"&&(y=y.parentElement,!y||y.tagName!=="A")))try{let S=y.dataset.href;S&&(o.baseUri&&(S=rL(be.from(o.baseUri),S)),e.actionHandler.callback(S,w))}catch(S){Ie(S)}finally{w.preventDefault()}}))}o.supportHtml||(t.sanitizer=_=>(o.isTrusted?_.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?_:"",t.sanitize=!0,t.silent=!0),t.renderer=c;let h=(n=o.value)!==null&&n!==void 0?n:"";h.length>1e5&&(h=`${h.substr(0,1e5)}…`),o.supportThemeIcons&&(h=bte(h));let g=TF.parse(h,t);o.supportThemeIcons&&(g=ou(g).map(v=>typeof v=="string"?v:v.outerHTML).join(""));const p=new DOMParser().parseFromString(LF(o,g),"text/html");if(p.body.querySelectorAll("img").forEach(_=>{const v=_.getAttribute("src");if(v){let C=v;try{o.baseUri&&(C=rL(be.from(o.baseUri),C))}catch{}_.src=l(C,!0)}}),p.body.querySelectorAll("a").forEach(_=>{const v=_.getAttribute("href");if(_.setAttribute("href",""),!v||/^data:|javascript:/i.test(v)||/^command:/i.test(v)&&!o.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(v))_.replaceWith(..._.childNodes);else{let C=l(v,!1);o.baseUri&&(C=rL(be.from(o.baseUri),v)),_.dataset.href=C}}),r.innerHTML=LF(o,p.body.innerHTML),d.length>0&&Promise.all(d).then(_=>{var v,C;if(s)return;const w=new Map(_),y=r.querySelectorAll("div[data-code]");for(const S of y){const E=w.get((v=S.dataset.code)!==null&&v!==void 0?v:"");E&&kc(S,E)}(C=e.asyncRenderCallback)===null||C===void 0||C.call(e)}),e.asyncRenderCallback)for(const _ of r.getElementsByTagName("img")){const v=i.add(Y(_,"load",()=>{v.dispose(),e.asyncRenderCallback()}))}return{element:r,dispose:()=>{s=!0,i.dispose()}}}u(jae,"renderMarkdown");function rL(o,e){return/^\w[\w\d+.-]*:/.test(e)?e:o.path.endsWith("/")?FP(o,e).toString():FP(Ly(o),e).toString()}u(rL,"resolveWithBaseUri");function LF(o,e){const{config:t,allowedSchemes:n}=$ae(o);SV("uponSanitizeAttribute",(s,r)=>{if(r.attrName==="style"||r.attrName==="class"){if(s.tagName==="SPAN"){if(r.attrName==="style"){r.keepAttr=/^(color\:#[0-9a-fA-F]+;)?(background-color\:#[0-9a-fA-F]+;)?$/.test(r.attrValue);return}else if(r.attrName==="class"){r.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(r.attrValue);return}}r.keepAttr=!1;return}});const i=OX(n);try{return wX(e,Object.assign(Object.assign({},t),{RETURN_TRUSTED_TYPE:!0}))}finally{TV("uponSanitizeAttribute"),i.dispose()}}u(LF,"sanitizeRenderedMarkdown");function $ae(o){const e=[Pe.http,Pe.https,Pe.mailto,Pe.data,Pe.file,Pe.vscodeFileResource,Pe.vscodeRemote,Pe.vscodeRemoteResource];return o.isTrusted&&e.push(Pe.command),{config:{ALLOWED_TAGS:["ul","li","p","b","i","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"],ALLOWED_ATTR:["href","data-href","target","title","src","alt","class","style","data-code","width","height","align"],ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}u($ae,"getSanitizerOptions");var qae=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},xF=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Yae=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})},aL;let xl=u(class kU{constructor(e,t,n){this._options=e,this._languageService=t,this._openerService=n,this._onDidRenderAsync=new R,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,n){if(!e)return{element:document.createElement("span"),dispose:()=>{}};const i=new J;return{element:i.add(jae(e,Object.assign(Object.assign({},this._getRenderOptions(e,i)),t),n)).element,dispose:()=>i.dispose()}}_getRenderOptions(e,t){return{codeBlockRenderer:(n,i)=>Yae(this,void 0,void 0,function*(){var s,r,a;let l;n?l=this._languageService.getLanguageIdByLanguageName(n):this._options.editor&&(l=(s=this._options.editor.getModel())===null||s===void 0?void 0:s.getLanguageId()),l||(l=Js);const c=yield kee(this._languageService,i,l),d=document.createElement("span");if(d.innerHTML=(a=(r=kU._ttpTokenizer)===null||r===void 0?void 0:r.createHTML(c))!==null&&a!==void 0?a:c,this._options.editor){const h=this._options.editor.getOption(46);di(d,h)}else this._options.codeBlockFontFamily&&(d.style.fontFamily=this._options.codeBlockFontFamily);return this._options.codeBlockFontSize!==void 0&&(d.style.fontSize=this._options.codeBlockFontSize),d}),asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:n=>this._openerService.open(n,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:e.isTrusted}).catch(Ie),disposables:t}}}},"MarkdownRenderer");xl._ttpTokenizer=(aL=window.trustedTypes)===null||aL===void 0?void 0:aL.createPolicy("tokenizeToString",{createHTML(o){return o}});xl=qae([xF(1,Gt),xF(2,uo)],xl);const EF=ee;class uu extends U{constructor(e,t,n=Kte){super(),this._renderDisposeables=this._register(new J),this._editor=e,this._isVisible=!1,this._messages=[],this._hover=this._register(new kN),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new xl({editor:this._editor},t,n)),this._computer=new MU(this._editor),this._hoverOperation=this._register(new MN(this._editor,this._computer)),this._register(this._hoverOperation.onResult(i=>{this._withResult(i.value)})),this._register(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged())),this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(46)&&this._updateFont()})),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return uu.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._hoverOperation.start(0))}startShowingAt(e){this._computer.lineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._computer.lineNumber=e,this._hoverOperation.start(0))}hide(){this._computer.lineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._computer.lineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const n=document.createDocumentFragment();for(const i of t){const s=EF("div.hover-row.markdown-hover"),r=q(s,EF("div.hover-contents")),a=this._renderDisposeables.add(this._markdownRenderer.render(i.value));r.appendChild(a.element),n.appendChild(s)}this._updateContents(n),this._showAt(e)}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const t=this._editor.getLayoutInfo(),n=this._editor.getTopForLineNumber(e),i=this._editor.getScrollTop(),s=this._editor.getOption(61),r=this._hover.containerDomNode.clientHeight,a=n-i-(r-s)/2;this._hover.containerDomNode.style.left=`${t.glyphMarginLeft+t.glyphMarginWidth}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(a),0)}px`}}u(uu,"MarginHoverWidget");uu.ID="editor.contrib.modesGlyphHoverWidget";class MU{constructor(e){this._editor=e,this._lineNumber=-1}get lineNumber(){return this._lineNumber}set lineNumber(e){this._lineNumber=e}computeSync(){const e=u(i=>({value:i}),"toHoverMessage"),t=this._editor.getLineDecorations(this._lineNumber),n=[];if(!t)return n;for(const i of t){if(!i.options.glyphMarginClassName)continue;const s=i.options.glyphMarginHoverMessage;!s||Sf(s)||n.push(...AD(s).map(e))}return n}}u(MU,"MarginHoverComputer");var Xae=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class DU{constructor(e,t,n){this.provider=e,this.hover=t,this.ordinal=n}}u(DU,"HoverProviderResult");function Zae(o,e,t,n,i){return Xae(this,void 0,void 0,function*(){try{const s=yield Promise.resolve(o.provideHover(t,n,i));if(s&&Qae(s))return new DU(o,s,e)}catch(s){Hn(s)}})}u(Zae,"executeProvider");function FN(o,e,t,n){const s=o.ordered(e).map((r,a)=>Zae(r,a,e,t,n));return nn.fromPromises(s).coalesce()}u(FN,"getHover");function Jae(o,e,t,n){return FN(o,e,t,n).map(i=>i.hover).toPromise()}u(Jae,"getHoverPromise");ua("_executeHoverProvider",(o,e,t)=>{const n=o.get(ue);return Jae(n.hoverProvider,e,t,Ge.None)});function Qae(o){const e=typeof o.range<"u",t=typeof o.contents<"u"&&o.contents&&o.contents.length>0;return e&&t}u(Qae,"isValid");var ele=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},TC=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const kF=ee;class Qo{constructor(e,t,n,i){this.owner=e,this.range=t,this.contents=n,this.ordinal=i}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}u(Qo,"MarkdownHover");let aw=u(class{constructor(e,t,n,i,s){this._editor=e,this._languageService=t,this._openerService=n,this._configurationService=i,this._languageFeaturesService=s,this.hoverOrdinal=2}createLoadingMessage(e){return new Qo(this,e.range,[new Ei().appendText(m("modesContentHover.loading","Loading..."))],2e3)}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),i=e.range.startLineNumber,s=n.getLineMaxColumn(i),r=[];let a=1e3;const l=n.getLineLength(i),c=n.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),d=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:c});typeof d=="number"&&l>=d&&r.push(new Qo(this,e.range,[{value:m("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],a++));for(const h of t){const g=h.range.startLineNumber===i?h.range.startColumn:1,f=h.range.endLineNumber===i?h.range.endColumn:s,p=h.options.hoverMessage;if(!p||Sf(p))continue;const _=new L(e.range.startLineNumber,g,e.range.startLineNumber,f);r.push(new Qo(this,_,AD(p),a++))}return r}computeAsync(e,t,n){if(!this._editor.hasModel()||e.type!==1)return nn.EMPTY;const i=this._editor.getModel();if(!this._languageFeaturesService.hoverProvider.has(i))return nn.EMPTY;const s=new H(e.range.startLineNumber,e.range.startColumn);return FN(this._languageFeaturesService.hoverProvider,i,s,n).filter(r=>!Sf(r.hover.contents)).map(r=>{const a=r.hover.range?L.lift(r.hover.range):e.range;return new Qo(this,a,r.hover.contents,r.ordinal)})}renderHoverParts(e,t){return AU(e,t,this._editor,this._languageService,this._openerService)}},"MarkdownHoverParticipant");aw=ele([TC(1,Gt),TC(2,uo),TC(3,rt),TC(4,ue)],aw);function AU(o,e,t,n,i){e.sort((r,a)=>r.ordinal-a.ordinal);const s=new J;for(const r of e)for(const a of r.contents){if(Sf(a))continue;const l=kF("div.hover-row.markdown-hover"),c=q(l,kF("div.hover-contents")),d=s.add(new xl({editor:t},n,i));s.add(d.onDidRenderAsync(()=>{c.className="hover-contents code-hover-contents",o.onContentsChanged()}));const h=s.add(d.render(a));c.appendChild(h.element),o.fragment.appendChild(l)}return s}u(AU,"renderMarkdownHovers");var IU=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},lw=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};class kM{constructor(e,t,n){this.marker=e,this.index=t,this.total=n}}u(kM,"MarkerCoordinate");let MM=u(class{constructor(e,t,n){this._markerService=t,this._configService=n,this._onDidChange=new R,this.onDidChange=this._onDidChange.event,this._dispoables=new J,this._markers=[],this._nextIdx=-1,be.isUri(e)?this._resourceFilter=a=>a.toString()===e.toString():e&&(this._resourceFilter=e);const i=this._configService.getValue("problems.sortOrder"),s=u((a,l)=>{let c=ib(a.resource.toString(),l.resource.toString());return c===0&&(i==="position"?c=L.compareRangesUsingStarts(a,l)||Ut.compare(a.severity,l.severity):c=Ut.compare(a.severity,l.severity)||L.compareRangesUsingStarts(a,l)),c},"compareMarker"),r=u(()=>{this._markers=this._markerService.read({resource:be.isUri(e)?e:void 0,severities:Ut.Error|Ut.Warning|Ut.Info}),typeof e=="function"&&(this._markers=this._markers.filter(a=>this._resourceFilter(a.resource))),this._markers.sort(s)},"updateMarker");r(),this._dispoables.add(t.onMarkerChanged(a=>{(!this._resourceFilter||a.some(l=>this._resourceFilter(l)))&&(r(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e?!0:!this._resourceFilter||!e?!1:this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new kM(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,n){let i=!1,s=this._markers.findIndex(r=>r.resource.toString()===e.uri.toString());s<0&&(s=DD(this._markers,{resource:e.uri},(r,a)=>ib(r.resource.toString(),a.resource.toString())),s<0&&(s=~s));for(let r=s;r<this._markers.length;r++){let a=L.lift(this._markers[r]);if(a.isEmpty()){const l=e.getWordAtPosition(a.getStartPosition());l&&(a=new L(a.startLineNumber,l.startColumn,a.startLineNumber,l.endColumn))}if(t&&(a.containsPosition(t)||t.isBeforeOrEqual(a.getStartPosition()))){this._nextIdx=r,i=!0;break}if(this._markers[r].resource.toString()!==e.uri.toString())break}i||(this._nextIdx=n?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,n){if(this._markers.length===0)return!1;const i=this._nextIdx;return this._nextIdx===-1?this._initIdx(t,n,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),i!==this._nextIdx}find(e,t){let n=this._markers.findIndex(i=>i.resource.toString()===e.toString());if(!(n<0)){for(;n<this._markers.length;n++)if(L.containsPosition(this._markers[n],t))return new kM(this._markers[n],n+1,this._markers.length)}}},"MarkerList");MM=IU([lw(1,ha),lw(2,rt)],MM);const NU=Je("IMarkerNavigationService");let DM=u(class{constructor(e,t){this._markerService=e,this._configService=t,this._provider=new vi}getMarkerList(e){for(const t of this._provider){const n=t.getMarkerList(e);if(n)return n}return new MM(e,this._markerService,this._configService)}},"MarkerNavigationService");DM=IU([lw(0,ha),lw(1,rt)],DM);nt(NU,DM,!0);var AM;(function(o){function e(t){switch(t){case Bt.Ignore:return"severity-ignore "+b.info.classNames;case Bt.Info:return b.info.classNames;case Bt.Warning:return b.warning.classNames;case Bt.Error:return b.error.classNames;default:return""}}u(e,"className"),o.className=e})(AM||(AM={}));At((o,e)=>{const t=o.getColor(SJ);if(t){const s=b.error.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${s},
			.markers-panel .marker-icon${s},
			.text-search-provider-messages .providerMessage ${s},
			.extensions-viewlet > .extensions ${s} {
				color: ${t};
			}
		`)}const n=o.getColor(TJ);if(n){const s=b.warning.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${s},
			.markers-panel .marker-icon${s},
			.extensions-viewlet > .extensions ${s},
			.extension-editor ${s},
			.text-search-provider-messages .providerMessage ${s},
			.preferences-editor ${s} {
				color: ${n};
			}
		`)}const i=o.getColor(LJ);if(i){const s=b.info.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${s},
			.markers-panel .marker-icon${s},
			.extensions-viewlet > .extensions ${s},
			.text-search-provider-messages .providerMessage ${s},
			.extension-editor ${s} {
				color: ${i};
			}
		`)}});var tle=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Wh=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};class PU{constructor(e,t,n,i,s){this._openerService=i,this._labelService=s,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new J,this._editor=t;const r=document.createElement("div");r.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),r.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),r.appendChild(this._relatedBlock),this._disposables.add(Dn(this._relatedBlock,"click",a=>{a.preventDefault();const l=this._relatedDiagnostics.get(a.target);l&&n(l)})),this._scrollable=new BA(r,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(a=>{r.style.left=`-${a.scrollLeft}px`,r.style.top=`-${a.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){st(this._disposables)}update(e){const{source:t,message:n,relatedInformation:i,code:s}=e;let r=(t?.length||0)+2;s&&(typeof s=="string"?r+=s.length:r+=s.value.length);const a=sa(n);this._lines=a.length,this._longestLineLength=0;for(const g of a)this._longestLineLength=Math.max(g.length+r,this._longestLineLength);Tn(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let l=this._messageBlock;for(const g of a)l=document.createElement("div"),l.innerText=g,g===""&&(l.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(l);if(t||s){const g=document.createElement("span");if(g.classList.add("details"),l.appendChild(g),t){const f=document.createElement("span");f.innerText=t,f.classList.add("source"),g.appendChild(f)}if(s)if(typeof s=="string"){const f=document.createElement("span");f.innerText=`(${s})`,f.classList.add("code"),g.appendChild(f)}else{this._codeLink=ee("a.code-link"),this._codeLink.setAttribute("href",`${s.target.toString()}`),this._codeLink.onclick=p=>{this._openerService.open(s.target,{allowCommands:!0}),p.preventDefault(),p.stopPropagation()};const f=q(this._codeLink,ee("span"));f.innerText=s.value,g.appendChild(this._codeLink)}}if(Tn(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),ci(i)){const g=this._relatedBlock.appendChild(document.createElement("div"));g.style.paddingTop=`${Math.floor(this._editor.getOption(61)*.66)}px`,this._lines+=1;for(const f of i){const p=document.createElement("div"),_=document.createElement("a");_.classList.add("filename"),_.innerText=`${this._labelService.getUriBasenameLabel(f.resource)}(${f.startLineNumber}, ${f.startColumn}): `,_.title=this._labelService.getUriLabel(f.resource),this._relatedDiagnostics.set(_,f);const v=document.createElement("span");v.innerText=f.message,p.appendChild(_),p.appendChild(v),this._lines+=1,g.appendChild(p)}}const c=this._editor.getOption(46),d=Math.ceil(c.typicalFullwidthCharacterWidth*this._longestLineLength*.75),h=c.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:d,scrollHeight:h})}layout(e,t){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${t}px`,this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case Ut.Error:t=m("Error","Error");break;case Ut.Warning:t=m("Warning","Warning");break;case Ut.Info:t=m("Info","Info");break;case Ut.Hint:t=m("Hint","Hint");break}let n=m("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const i=this._editor.getModel();return i&&e.startLineNumber<=i.getLineCount()&&e.startLineNumber>=1&&(n=`${i.getLineContent(e.startLineNumber)}, ${n}`),n}}u(PU,"MessageWidget");let Gf=u(class RU extends sw{constructor(e,t,n,i,s,r,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},s),this._themeService=t,this._openerService=n,this._menuService=i,this._contextKeyService=r,this._labelService=a,this._callOnDispose=new J,this._onDidSelectRelatedInformation=new R,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=Ut.Warning,this._backgroundColor=B.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(ole);let t=IM,n=nle;this._severity===Ut.Warning?(t=E0,n=ile):this._severity===Ut.Info&&(t=NM,n=sle);const i=e.getColor(t),s=e.getColor(n);this.style({arrowColor:i,frameColor:i,headerBackgroundColor:s,primaryHeadingColor:e.getColor(KW),secondaryHeadingColor:e.getColor(jW)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(e){super._fillHead(e),this._disposables.add(this._actionbarWidget.actionRunner.onBeforeRun(i=>this.editor.focus()));const t=[],n=this._menuService.createMenu(RU.TitleMenu,this._contextKeyService);Tae(n,void 0,t),this._actionbarWidget.push(t,{label:!1,icon:!0,index:0}),n.dispose()}_fillTitleIcon(e){this._icon=q(e,ee(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new PU(this._container,this.editor,t=>this._onDidSelectRelatedInformation.fire(t),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,n){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());const i=L.lift(e),s=this.editor.getPosition(),r=s&&i.containsPosition(s)?s:i.getStartPosition();super.show(r,this.computeRequiredHeight());const a=this.editor.getModel();if(a){const l=n>1?m("problems","{0} of {1} problems",t,n):m("change","{0} of {1} problem",t,n);this.setTitle(ro(a.uri),l)}this._icon.className=`codicon ${AM.className(Ut.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(r,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}},"MarkerNavigationWidget");Gf.TitleMenu=new P("gotoErrorTitleMenu");Gf=tle([Wh(1,wt),Wh(2,uo),Wh(3,ah),Wh(4,Ne),Wh(5,De),Wh(6,xf)],Gf);const MF=yb($r,iH),DF=yb(xs,of),AF=yb($i,g1),IM=I("editorMarkerNavigationError.background",{dark:MF,light:MF,hcDark:Be,hcLight:Be},m("editorMarkerNavigationError","Editor marker navigation widget error color.")),nle=I("editorMarkerNavigationError.headerBackground",{dark:pe(IM,.1),light:pe(IM,.1),hcDark:null,hcLight:null},m("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),E0=I("editorMarkerNavigationWarning.background",{dark:DF,light:DF,hcDark:Be,hcLight:Be},m("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),ile=I("editorMarkerNavigationWarning.headerBackground",{dark:pe(E0,.1),light:pe(E0,.1),hcDark:"#0C141F",hcLight:pe(E0,.2)},m("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),NM=I("editorMarkerNavigationInfo.background",{dark:AF,light:AF,hcDark:Be,hcLight:Be},m("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),sle=I("editorMarkerNavigationInfo.headerBackground",{dark:pe(NM,.1),light:pe(NM,.1),hcDark:null,hcLight:null},m("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),ole=I("editorMarkerNavigation.background",{dark:Sn,light:Sn,hcDark:Sn,hcLight:Sn},m("editorMarkerNavigationBackground","Editor marker navigation widget background."));var rle=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},LC=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},FU=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let Gc=u(class k0{constructor(e,t,n,i,s){this._markerNavigationService=t,this._contextKeyService=n,this._editorService=i,this._instantiationService=s,this._sessionDispoables=new J,this._editor=e,this._widgetVisible=HU.bindTo(this._contextKeyService)}static get(e){return e.getContribution(k0.ID)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(Gf,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(n=>{var i,s,r;(!(!((i=this._model)===null||i===void 0)&&i.selected)||!L.containsPosition((s=this._model)===null||s===void 0?void 0:s.selected.marker,n.position))&&((r=this._model)===null||r===void 0||r.resetIndex())})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;const n=this._model.find(this._editor.getModel().uri,this._widget.position);n?this._widget.updateMarker(n.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(n=>{this._editorService.openCodeEditor({resource:n.resource,options:{pinned:!0,revealIfOpened:!0,selection:L.lift(n).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new H(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}nagivate(e,t){var n,i;return FU(this,void 0,void 0,function*(){if(this._editor.hasModel()){const s=this._getOrCreateModel(t?void 0:this._editor.getModel().uri);if(s.move(e,this._editor.getModel(),this._editor.getPosition()),!s.selected)return;if(s.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const r=yield this._editorService.openCodeEditor({resource:s.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:s.selected.marker}},this._editor);r&&((n=k0.get(r))===null||n===void 0||n.close(),(i=k0.get(r))===null||i===void 0||i.nagivate(e,t))}else this._widget.showAtMarker(s.selected.marker,s.selected.index,s.selected.total)}})}},"MarkerController");Gc.ID="editor.contrib.markerController";Gc=rle([LC(1,NU),LC(2,De),LC(3,dt),LC(4,Ne)],Gc);class mv extends de{constructor(e,t,n){super(n),this._next=e,this._multiFile=t}run(e,t){var n;return FU(this,void 0,void 0,function*(){t.hasModel()&&((n=Gc.get(t))===null||n===void 0||n.nagivate(this._next,this._multiFile))})}}u(mv,"MarkerNavigationAction");class dl extends mv{constructor(){super(!0,!1,{id:dl.ID,label:dl.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:578,weight:100},menuOpts:{menuId:Gf.TitleMenu,title:dl.LABEL,icon:vn("marker-navigation-next",b.arrowDown,m("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}}u(dl,"NextMarkerAction");dl.ID="editor.action.marker.next";dl.LABEL=m("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");class wc extends mv{constructor(){super(!1,!1,{id:wc.ID,label:wc.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:1602,weight:100},menuOpts:{menuId:Gf.TitleMenu,title:wc.LABEL,icon:vn("marker-navigation-previous",b.arrowUp,m("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}}u(wc,"PrevMarkerAction");wc.ID="editor.action.marker.prev";wc.LABEL=m("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");class OU extends mv{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:m("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:66,weight:100},menuOpts:{menuId:P.MenubarGoMenu,title:m({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}u(OU,"NextMarkerInFilesAction");class VU extends mv{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:m("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:1090,weight:100},menuOpts:{menuId:P.MenubarGoMenu,title:m({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}}u(VU,"PrevMarkerInFilesAction");it(Gc.ID,Gc);ie(dl);ie(wc);ie(OU);ie(VU);const HU=new ce("markersNavigationVisible",!1),ale=Ln.bindToContribution(Gc.get);te(new ale({id:"closeMarkersNavigation",precondition:HU,handler:o=>o.close(),kbOpts:{weight:100+50,kbExpr:A.focus,primary:9,secondary:[1033]}}));var lle=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},lL=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const mo=ee;class BU{constructor(e,t,n){this.owner=e,this.range=t,this.marker=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}u(BU,"MarkerHover");const IF={type:1,filter:{include:Ye.QuickFix},triggerAction:Ci.QuickFixHover};let PM=u(class{constructor(e,t,n,i){this._editor=e,this._markerDecorationsService=t,this._openerService=n,this._languageFeaturesService=i,this.hoverOrdinal=5,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),i=e.range.startLineNumber,s=n.getLineMaxColumn(i),r=[];for(const a of t){const l=a.range.startLineNumber===i?a.range.startColumn:1,c=a.range.endLineNumber===i?a.range.endColumn:s,d=this._markerDecorationsService.getMarker(n.uri,a);if(!d)continue;const h=new L(e.range.startLineNumber,l,e.range.startLineNumber,c);r.push(new BU(this,h,d))}return r}renderHoverParts(e,t){if(!t.length)return U.None;const n=new J;t.forEach(s=>e.fragment.appendChild(this.renderMarkerHover(s,n)));const i=t.length===1?t[0]:t.sort((s,r)=>Ut.compare(s.marker.severity,r.marker.severity))[0];return this.renderMarkerStatusbar(e,i,n),n}renderMarkerHover(e,t){const n=mo("div.hover-row"),i=q(n,mo("div.marker.hover-contents")),{source:s,message:r,code:a,relatedInformation:l}=e.marker;this._editor.applyFontInfo(i);const c=q(i,mo("span"));if(c.style.whiteSpace="pre-wrap",c.innerText=r,s||a)if(a&&typeof a!="string"){const d=mo("span");if(s){const p=q(d,mo("span"));p.innerText=s}const h=q(d,mo("a.code-link"));h.setAttribute("href",a.target.toString()),t.add(Y(h,"click",p=>{this._openerService.open(a.target,{allowCommands:!0}),p.preventDefault(),p.stopPropagation()}));const g=q(h,mo("span"));g.innerText=a.value;const f=q(i,d);f.style.opacity="0.6",f.style.paddingLeft="6px"}else{const d=q(i,mo("span"));d.style.opacity="0.6",d.style.paddingLeft="6px",d.innerText=s&&a?`${s}(${a})`:s||`(${a})`}if(ci(l))for(const{message:d,resource:h,startLineNumber:g,startColumn:f}of l){const p=q(i,mo("div"));p.style.marginTop="8px";const _=q(p,mo("a"));_.innerText=`${ro(h)}(${g}, ${f}): `,_.style.cursor="pointer",t.add(Y(_,"click",C=>{C.stopPropagation(),C.preventDefault(),this._openerService&&this._openerService.open(h,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:g,startColumn:f}}}).catch(Ie)}));const v=q(p,mo("span"));v.innerText=d,this._editor.applyFontInfo(v)}return n}renderMarkerStatusbar(e,t,n){if((t.marker.severity===Ut.Error||t.marker.severity===Ut.Warning||t.marker.severity===Ut.Info)&&e.statusBar.addAction({label:m("view problem","View Problem"),commandId:dl.ID,run:()=>{var i;e.hide(),(i=Gc.get(this._editor))===null||i===void 0||i.showAtMarker(t.marker),this._editor.focus()}}),!this._editor.getOption(83)){const i=e.statusBar.append(mo("div"));this.recentMarkerCodeActionsInfo&&(U1.makeKey(this.recentMarkerCodeActionsInfo.marker)===U1.makeKey(t.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(i.textContent=m("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const s=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?U.None:n.add(vu(()=>i.textContent=m("checkingForQuickFixes","Checking for quick fixes..."),200));i.textContent||(i.textContent=String.fromCharCode(160));const r=this.getCodeActions(t.marker);n.add(He(()=>r.cancel())),r.then(a=>{if(s.dispose(),this.recentMarkerCodeActionsInfo={marker:t.marker,hasCodeActions:a.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions){a.dispose(),i.textContent=m("noQuickFixes","No quick fixes available");return}i.style.display="none";let l=!1;n.add(He(()=>{l||a.dispose()})),e.statusBar.addAction({label:m("quick fixes","Quick Fix..."),commandId:Ch.Id,run:c=>{l=!0;const d=Wc.get(this._editor),h=li(c);e.hide(),d?.showCodeActions(IF,a,{x:h.left+6,y:h.top+h.height+6,width:h.width,height:h.height})}})},Ie)}}getCodeActions(e){return On(t=>_N(this._languageFeaturesService.codeActionProvider,this._editor.getModel(),new L(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),IF,Jc.None,t))}},"MarkerHoverParticipant");PM=lle([lL(1,gA),lL(2,uo),lL(3,ue)],PM);At((o,e)=>{const t=o.getColor(ty);t&&e.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${t}; }`);const n=o.getColor(ny);n&&e.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${n}; }`)});var cle=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},xC=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let zc=u(class WU{constructor(e,t,n,i,s){this._editor=e,this._instantiationService=t,this._openerService=n,this._languageService=i,this._toUnhook=new J,this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration(r=>{r.hasChanged(55)&&(this._unhookEvents(),this._hookEvents())})}static get(e){return e.getContribution(WU.ID)}_hookEvents(){const e=u(()=>this._hideWidgets(),"hideWidgetsEventHandler"),t=this._editor.getOption(55);this._isHoverEnabled=t.enabled,this._isHoverSticky=t.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown(n=>this._onEditorMouseDown(n))),this._toUnhook.add(this._editor.onMouseUp(n=>this._onEditorMouseUp(n))),this._toUnhook.add(this._editor.onMouseMove(n=>this._onEditorMouseMove(n))),this._toUnhook.add(this._editor.onKeyDown(n=>this._onKeyDown(n)))):(this._toUnhook.add(this._editor.onMouseMove(n=>this._onEditorMouseMove(n))),this._toUnhook.add(this._editor.onKeyDown(n=>this._onKeyDown(n)))),this._toUnhook.add(this._editor.onMouseLeave(n=>this._onEditorMouseLeave(n))),this._toUnhook.add(this._editor.onDidChangeModel(e)),this._toUnhook.add(this._editor.onDidScrollChange(n=>this._onEditorScrollChanged(n)))}_unhookEvents(){this._toUnhook.clear()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._isMouseDown=!0;const t=e.target;if(t.type===9&&t.detail===du.ID){this._hoverClicked=!0;return}t.type===12&&t.detail===uu.ID||(t.type!==12&&(this._hoverClicked=!1),this._hideWidgets())}_onEditorMouseUp(e){this._isMouseDown=!1}_onEditorMouseLeave(e){var t;const n=e.event.browserEvent.relatedTarget;!((t=this._contentWidget)===null||t===void 0)&&t.containsNode(n)||this._hideWidgets()}_onEditorMouseMove(e){var t,n,i,s,r;const a=e.target;if(this._isMouseDown&&this._hoverClicked||this._isHoverSticky&&a.type===9&&a.detail===du.ID||this._isHoverSticky&&!(!((n=(t=e.event.browserEvent.view)===null||t===void 0?void 0:t.getSelection())===null||n===void 0)&&n.isCollapsed)||!this._isHoverSticky&&a.type===9&&a.detail===du.ID&&(!((i=this._contentWidget)===null||i===void 0)&&i.isColorPickerVisible())||this._isHoverSticky&&a.type===12&&a.detail===uu.ID)return;if(!this._isHoverEnabled){this._hideWidgets();return}if(this._getOrCreateContentWidget().maybeShowAt(e)){(s=this._glyphWidget)===null||s===void 0||s.hide();return}if(a.type===2&&a.position){(r=this._contentWidget)===null||r===void 0||r.hide(),this._glyphWidget||(this._glyphWidget=new uu(this._editor,this._languageService,this._openerService)),this._glyphWidget.startShowingAt(a.position.lineNumber);return}this._hideWidgets()}_onKeyDown(e){e.keyCode!==5&&e.keyCode!==6&&e.keyCode!==57&&e.keyCode!==4&&this._hideWidgets()}_hideWidgets(){var e,t,n;this._isMouseDown&&this._hoverClicked&&(!((e=this._contentWidget)===null||e===void 0)&&e.isColorPickerVisible())||(this._hoverClicked=!1,(t=this._glyphWidget)===null||t===void 0||t.hide(),(n=this._contentWidget)===null||n===void 0||n.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(rw,this._editor)),this._contentWidget}isColorPickerVisible(){var e;return((e=this._contentWidget)===null||e===void 0?void 0:e.isColorPickerVisible())||!1}showContentHover(e,t,n){this._getOrCreateContentWidget().startShowingAtRange(e,t,n)}dispose(){var e,t;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),(e=this._glyphWidget)===null||e===void 0||e.dispose(),(t=this._contentWidget)===null||t===void 0||t.dispose()}},"ModesHoverController");zc.ID="editor.contrib.hover";zc=cle([xC(1,Ne),xC(2,uo),xC(3,Gt),xC(4,De)],zc);class UU extends de{constructor(){super({id:"editor.action.showHover",label:m({key:"showHover",comment:["Label for action that will trigger the showing of a hover in the editor.","This allows for users to show the hover without using the mouse."]},"Show Hover"),alias:"Show Hover",precondition:void 0,kbOpts:{kbExpr:A.editorTextFocus,primary:xn(2089,2087),weight:100}})}run(e,t){if(!t.hasModel())return;const n=zc.get(t);if(!n)return;const i=t.getPosition(),s=new L(i.lineNumber,i.column,i.lineNumber,i.column),r=t.getOption(2)===2;n.showContentHover(s,1,r)}}u(UU,"ShowHoverAction");class GU extends de{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:m({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(e,t){const n=zc.get(t);if(!n)return;const i=t.getPosition();if(!i)return;const s=new L(i.lineNumber,i.column,i.lineNumber,i.column),r=Uu.get(t);if(!r)return;r.startFindDefinitionFromCursor(i).then(()=>{n.showContentHover(s,1,!0)})}}u(GU,"ShowDefinitionPreviewHoverAction");it(zc.ID,zc);ie(UU);ie(GU);Sh.register(aw);Sh.register(PM);At((o,e)=>{const t=o.getColor(xZ);t&&e.addRule(`.monaco-editor .hoverHighlight { background-color: ${t}; }`);const n=o.getColor(xu);n&&e.addRule(`.monaco-editor .monaco-hover { background-color: ${n}; }`);const i=o.getColor(MA);i&&(e.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${i}; }`),e.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${i.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${i.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${i.transparent(.5)}; }`));const s=o.getColor(ty);s&&e.addRule(`.monaco-editor .monaco-hover a { color: ${s}; }`);const r=o.getColor(ny);r&&e.addRule(`.monaco-editor .monaco-hover a:hover { color: ${r}; }`);const a=o.getColor(kA);a&&e.addRule(`.monaco-editor .monaco-hover { color: ${a}; }`);const l=o.getColor(EZ);l&&e.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${l}; }`);const c=o.getColor(nH);c&&e.addRule(`.monaco-editor .monaco-hover code { background-color: ${c}; }`)});class cw extends U{constructor(e){super(),this._editor=e,this._register(e.onMouseDown(t=>this.onMouseDown(t)))}dispose(){super.dispose()}onMouseDown(e){const t=e.target;if(t.type!==6||!t.detail.injectedText||t.detail.injectedText.options.attachedData!==xW||!t.range)return;const n=this._editor.getContribution(zc.ID);if(n&&!n.isColorPickerVisible()){const i=new L(t.range.startLineNumber,t.range.startColumn+1,t.range.endLineNumber,t.range.endColumn+1);n.showContentHover(i,1,!1)}}}u(cw,"ColorContribution");cw.ID="editor.contrib.colorContribution";it(cw.ID,cw);Sh.register(cM);var zU=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};function ON(o){return{asString:()=>zU(this,void 0,void 0,function*(){return o}),asFile:()=>{},value:typeof o=="string"?o:void 0}}u(ON,"createStringDataTransferItem");function dle(o,e,t){return{asString:()=>zU(this,void 0,void 0,function*(){return""}),asFile:()=>({name:o,uri:e,data:t}),value:void 0}}u(dle,"createFileDataTransferItem");class VN{constructor(){this._entries=new Map}get size(){return this._entries.size}has(e){return this._entries.has(this.toKey(e))}get(e){var t;return(t=this._entries.get(this.toKey(e)))===null||t===void 0?void 0:t[0]}append(e,t){const n=this._entries.get(e);n?n.push(t):this._entries.set(this.toKey(e),[t])}replace(e,t){this._entries.set(this.toKey(e),[t])}delete(e){this._entries.delete(this.toKey(e))}*entries(){for(const[e,t]of this._entries.entries())for(const n of t)yield[e,n]}values(){return Array.from(this._entries.values()).flat()}forEach(e){for(const[t,n]of this.entries())e(n,t)}toKey(e){return e.toLowerCase()}}u(VN,"VSDataTransfer");const KU=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let o;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?o=crypto.getRandomValues.bind(crypto):o=u(function(n){for(let i=0;i<n.length;i++)n[i]=Math.floor(Math.random()*256);return n},"getRandomValues");const e=new Uint8Array(16),t=[];for(let n=0;n<256;n++)t.push(n.toString(16).padStart(2,"0"));return u(function(){o(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let i=0,s="";return s+=t[e[i++]],s+=t[e[i++]],s+=t[e[i++]],s+=t[e[i++]],s+="-",s+=t[e[i++]],s+=t[e[i++]],s+="-",s+=t[e[i++]],s+=t[e[i++]],s+="-",s+=t[e[i++]],s+=t[e[i++]],s+="-",s+=t[e[i++]],s+=t[e[i++]],s+=t[e[i++]],s+=t[e[i++]],s+=t[e[i++]],s+=t[e[i++]],s},"generateUuid")}(),dw={EDITORS:"CodeEditors",FILES:"CodeFiles"};function ule(o){var e;const t=[];if(o.dataTransfer&&o.dataTransfer.types.length>0){const n=o.dataTransfer.getData(dw.EDITORS);if(n)try{t.push(...H1(n))}catch{}else try{const r=o.dataTransfer.getData(K_.RESOURCES);t.push(...hle(r))}catch{}if(!((e=o.dataTransfer)===null||e===void 0)&&e.files)for(let r=0;r<o.dataTransfer.files.length;r++){const a=o.dataTransfer.files[r];if(a&&a.path)try{t.push({resource:be.file(a.path),isExternal:!0,allowWorkspaceOpen:!0})}catch{}}const i=o.dataTransfer.getData(dw.FILES);if(i)try{const r=JSON.parse(i);for(const a of r)t.push({resource:be.file(a),isExternal:!0,allowWorkspaceOpen:!0})}catch{}const s=zt.as($U.DragAndDropContribution).getAll();for(const r of s){const a=o.dataTransfer.getData(r.dataFormatKey);if(a)try{t.push(...r.getEditorInputs(a))}catch{}}}return t}u(ule,"extractEditorsDropData");function hle(o){const e=[];if(o){const t=JSON.parse(o);for(const n of t)if(n.indexOf(":")>0){const{selection:i,uri:s}=s8(be.parse(n));e.push({resource:s,options:{selection:i}})}}return e}u(hle,"createDraggedEditorInputFromRawResourcesData");class jU{constructor(){this._contributions=new Map}getAll(){return this._contributions.values()}}u(jU,"DragAndDropContributionRegistry");const $U={DragAndDropContribution:"workbench.contributions.dragAndDrop"};zt.add($U.DragAndDropContribution,new jU);var gle=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};function RM(o){const e=new VN;for(const t of o.items){const n=t.type;if(t.kind==="string"){const i=new Promise(s=>t.getAsString(s));e.append(n,ON(i))}else if(t.kind==="file"){const i=t.getAsFile();i&&e.append(n,fle(i))}}return e}u(RM,"toVSDataTransfer");function fle(o){const e=o.path?be.parse(o.path):void 0;return dle(o.name,e,()=>gle(this,void 0,void 0,function*(){return new Uint8Array(yield o.arrayBuffer())}))}u(fle,"createFileDataTransferItemFromFile");const ple=Object.freeze([dw.EDITORS,dw.FILES,K_.RESOURCES]);function mle(o,e,t=!1){var n;if(e.dataTransfer&&(t||!o.has(zi.uriList))){const i=ule(e).filter(s=>s.resource).map(s=>s.resource.toString());for(const s of(n=e.dataTransfer)===null||n===void 0?void 0:n.items){const r=s.getAsFile();r&&i.push(r.path?be.file(r.path).toString():r.name)}i.length&&o.replace(zi.uriList,ON(HN.create(i)))}for(const i of ple)o.delete(i)}u(mle,"addExternalEditorsDropData");const HN=Object.freeze({create:o=>gl(o.map(e=>e.toString())).join(`\r
`),parse:o=>o.split(`\r
`).filter(e=>!e.startsWith("#"))});function NF(o,e=ei){return QQ(o,e)?o.charAt(0).toUpperCase()+o.slice(1):o}u(NF,"normalizeDriveLetter");var ble=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},_le=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};class FM{constructor(e){this._delegates=e}resolve(e){for(const t of this._delegates){const n=t.resolve(e);if(n!==void 0)return n}}}u(FM,"CompositeSnippetVariableResolver");class OM{constructor(e,t,n,i){this._model=e,this._selection=t,this._selectionIdx=n,this._overtypingCapturer=i}resolve(e){const{name:t}=e;if(t==="SELECTION"||t==="TM_SELECTED_TEXT"){let n=this._model.getValueInRange(this._selection)||void 0,i=this._selection.startLineNumber!==this._selection.endLineNumber;if(!n&&this._overtypingCapturer){const s=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);s&&(n=s.value,i=s.multiline)}if(n&&i&&e.snippet){const s=this._model.getLineContent(this._selection.startLineNumber),r=vt(s,0,this._selection.startColumn-1);let a=r;e.snippet.walk(c=>c===e?!1:(c instanceof ki&&(a=vt(sa(c.value).pop())),!0));const l=bu(a,r);n=n.replace(/(\r\n|\r|\n)(.*)/g,(c,d,h)=>`${d}${a.substr(l)}${h}`)}return n}else{if(t==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(t==="TM_CURRENT_WORD"){const n=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return n&&n.word||void 0}else{if(t==="TM_LINE_INDEX")return String(this._selection.positionLineNumber-1);if(t==="TM_LINE_NUMBER")return String(this._selection.positionLineNumber);if(t==="CURSOR_INDEX")return String(this._selectionIdx);if(t==="CURSOR_NUMBER")return String(this._selectionIdx+1)}}}}u(OM,"SelectionBasedVariableResolver");class VM{constructor(e,t){this._labelService=e,this._model=t}resolve(e){const{name:t}=e;if(t==="TM_FILENAME")return Yd(this._model.uri.fsPath);if(t==="TM_FILENAME_BASE"){const n=Yd(this._model.uri.fsPath),i=n.lastIndexOf(".");return i<=0?n:n.slice(0,i)}else{if(t==="TM_DIRECTORY")return k4(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel(Ly(this._model.uri));if(t==="TM_FILEPATH")return this._labelService.getUriLabel(this._model.uri);if(t==="RELATIVE_FILEPATH")return this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0})}}}u(VM,"ModelBasedVariableResolver");class HM{constructor(e,t,n,i){this._readClipboardText=e,this._selectionIdx=t,this._selectionCount=n,this._spread=i}resolve(e){if(e.name!=="CLIPBOARD")return;const t=this._readClipboardText();if(t){if(this._spread){const n=t.split(/\r\n|\n|\r/).filter(i=>!F4(i));if(n.length===this._selectionCount)return n[this._selectionIdx]}return t}}}u(HM,"ClipboardBasedVariableResolver");let uw=u(class{constructor(e,t,n){this._model=e,this._selection=t,this._languageConfigurationService=n}resolve(e){const{name:t}=e,n=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),i=this._languageConfigurationService.getLanguageConfiguration(n).comments;if(i){if(t==="LINE_COMMENT")return i.lineCommentToken||void 0;if(t==="BLOCK_COMMENT_START")return i.blockCommentStartToken||void 0;if(t==="BLOCK_COMMENT_END")return i.blockCommentEndToken||void 0}}},"CommentBasedVariableResolver");uw=ble([_le(2,rn)],uw);class To{constructor(){this._date=new Date}resolve(e){const{name:t}=e;if(t==="CURRENT_YEAR")return String(this._date.getFullYear());if(t==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(t==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(t==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(t==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(t==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(t==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(t==="CURRENT_DAY_NAME")return To.dayNames[this._date.getDay()];if(t==="CURRENT_DAY_NAME_SHORT")return To.dayNamesShort[this._date.getDay()];if(t==="CURRENT_MONTH_NAME")return To.monthNames[this._date.getMonth()];if(t==="CURRENT_MONTH_NAME_SHORT")return To.monthNamesShort[this._date.getMonth()];if(t==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3))}}u(To,"TimeBasedVariableResolver");To.dayNames=[m("Sunday","Sunday"),m("Monday","Monday"),m("Tuesday","Tuesday"),m("Wednesday","Wednesday"),m("Thursday","Thursday"),m("Friday","Friday"),m("Saturday","Saturday")];To.dayNamesShort=[m("SundayShort","Sun"),m("MondayShort","Mon"),m("TuesdayShort","Tue"),m("WednesdayShort","Wed"),m("ThursdayShort","Thu"),m("FridayShort","Fri"),m("SaturdayShort","Sat")];To.monthNames=[m("January","January"),m("February","February"),m("March","March"),m("April","April"),m("May","May"),m("June","June"),m("July","July"),m("August","August"),m("September","September"),m("October","October"),m("November","November"),m("December","December")];To.monthNamesShort=[m("JanuaryShort","Jan"),m("FebruaryShort","Feb"),m("MarchShort","Mar"),m("AprilShort","Apr"),m("MayShort","May"),m("JuneShort","Jun"),m("JulyShort","Jul"),m("AugustShort","Aug"),m("SeptemberShort","Sep"),m("OctoberShort","Oct"),m("NovemberShort","Nov"),m("DecemberShort","Dec")];class BM{constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;const t=nne(this._workspaceService.getWorkspace());if(t){if(e.name==="WORKSPACE_NAME")return this._resolveWorkspaceName(t);if(e.name==="WORKSPACE_FOLDER")return this._resoveWorkspacePath(t)}}_resolveWorkspaceName(e){if(vR(e))return Yd(e.uri.path);let t=Yd(e.configPath.path);return t.endsWith(XE)&&(t=t.substr(0,t.length-XE.length-1)),t}_resoveWorkspacePath(e){if(vR(e))return NF(e.uri.fsPath);const t=Yd(e.configPath.path);let n=e.configPath.fsPath;return n.endsWith(t)&&(n=n.substr(0,n.length-t.length-1)),n?NF(n):"/"}}u(BM,"WorkspaceBasedVariableResolver");class WM{resolve(e){const{name:t}=e;if(t==="RANDOM")return Math.random().toString().slice(-6);if(t==="RANDOM_HEX")return Math.random().toString(16).slice(-6);if(t==="UUID")return KU()}}u(WM,"RandomBasedVariableResolver");var vle=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Cle=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};class ws{constructor(e,t,n){this._editor=e,this._snippet=t,this._snippetLineLeadingWhitespace=n,this._offset=-1,this._nestingLevel=1,this._placeholderGroups=y2(t.placeholders,js.compareByIndex),this._placeholderGroupsIdx=-1}initialize(e){this._offset=e.newPosition}dispose(){this._placeholderDecorations&&this._editor.removeDecorations([...this._placeholderDecorations.values()]),this._placeholderGroups.length=0}_initDecorations(){if(this._offset===-1)throw new Error("Snippet not initialized!");if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;const e=this._editor.getModel();this._editor.changeDecorations(t=>{for(const n of this._snippet.placeholders){const i=this._snippet.offset(n),s=this._snippet.fullLen(n),r=L.fromPositions(e.getPositionAt(this._offset+i),e.getPositionAt(this._offset+i+s)),a=n.isFinalTabstop?ws._decor.inactiveFinal:ws._decor.inactive,l=t.addDecoration(r,a);this._placeholderDecorations.set(n,l)}})}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){const i=[];for(const s of this._placeholderGroups[this._placeholderGroupsIdx])if(s.transform){const r=this._placeholderDecorations.get(s),a=this._editor.getModel().getDecorationRange(r),l=this._editor.getModel().getValueInRange(a),c=s.transform.resolve(l).split(/\r\n|\r|\n/);for(let d=1;d<c.length;d++)c[d]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+c[d]);i.push(Ot.replace(a,c.join(this._editor.getModel().getEOL())))}i.length>0&&this._editor.executeEdits("snippet.placeholderTransform",i)}let t=!1;e===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,t=!0):e===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,t=!0);const n=this._editor.getModel().changeDecorations(i=>{const s=new Set,r=[];for(const a of this._placeholderGroups[this._placeholderGroupsIdx]){const l=this._placeholderDecorations.get(a),c=this._editor.getModel().getDecorationRange(l);r.push(new re(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn)),t=t&&this._hasPlaceholderBeenCollapsed(a),i.changeDecorationOptions(l,a.isFinalTabstop?ws._decor.activeFinal:ws._decor.active),s.add(a);for(const d of this._snippet.enclosingPlaceholders(a)){const h=this._placeholderDecorations.get(d);i.changeDecorationOptions(h,d.isFinalTabstop?ws._decor.activeFinal:ws._decor.active),s.add(d)}}for(const[a,l]of this._placeholderDecorations)s.has(a)||i.changeDecorationOptions(l,a.isFinalTabstop?ws._decor.inactiveFinal:ws._decor.inactive);return r});return t?this.move(e):n??[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof js){const n=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(n).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}get isTrivialSnippet(){return this._snippet.placeholders.length===0||this._snippet.placeholders.length===1&&this._snippet.placeholders[0].isFinalTabstop}computePossibleSelections(){const e=new Map;for(const t of this._placeholderGroups){let n;for(const i of t){if(i.isFinalTabstop)break;n||(n=[],e.set(i.index,n));const s=this._placeholderDecorations.get(i),r=this._editor.getModel().getDecorationRange(s);if(!r){e.delete(i.index);break}n.push(r)}}return e}get activeChoice(){if(!this._placeholderDecorations)return;const e=this._placeholderGroups[this._placeholderGroupsIdx][0];if(!e?.choice)return;const t=this._placeholderDecorations.get(e);if(!t)return;const n=this._editor.getModel().getDecorationRange(t);if(n)return{range:n,choice:e.choice}}get hasChoice(){let e=!1;return this._snippet.walk(t=>(e=t instanceof Lh,!e)),e}merge(e){const t=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(n=>{for(const i of this._placeholderGroups[this._placeholderGroupsIdx]){const s=e.shift();console.assert(s._offset!==-1),console.assert(!s._placeholderDecorations);const r=s._snippet.placeholderInfo.last.index;for(const l of s._snippet.placeholderInfo.all)l.isFinalTabstop?l.index=i.index+(r+1)/this._nestingLevel:l.index=i.index+l.index/this._nestingLevel;this._snippet.replace(i,s._snippet.children);const a=this._placeholderDecorations.get(i);n.removeDecoration(a),this._placeholderDecorations.delete(i);for(const l of s._snippet.placeholders){const c=s._snippet.offset(l),d=s._snippet.fullLen(l),h=L.fromPositions(t.getPositionAt(s._offset+c),t.getPositionAt(s._offset+c+d)),g=n.addDecoration(h,ws._decor.inactive);this._placeholderDecorations.set(l,g)}}this._placeholderGroups=y2(this._snippet.placeholders,js.compareByIndex)})}}u(ws,"OneSnippet");ws._decor={active:Ae.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:Ae.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:Ae.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:Ae.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};const PF={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let hw=u(class Ea{constructor(e,t,n=PF,i){this._editor=e,this._template=t,this._options=n,this._languageConfigurationService=i,this._templateMerges=[],this._snippets=[]}static adjustWhitespace(e,t,n,i,s){const r=e.getLineContent(t.lineNumber),a=vt(r,0,t.column-1);let l;return n.walk(c=>{if(!(c instanceof ki)||c.parent instanceof Lh)return!0;const d=c.value.split(/\r\n|\r|\n/);if(i){const g=n.offset(c);if(g===0)d[0]=e.normalizeIndentation(d[0]);else{l=l??n.toString();const f=l.charCodeAt(g-1);(f===10||f===13)&&(d[0]=e.normalizeIndentation(a+d[0]))}for(let f=1;f<d.length;f++)d[f]=e.normalizeIndentation(a+d[f])}const h=d.join(e.getEOL());return h!==c.value&&(c.parent.replace(c,[new ki(h)]),l=void 0),!0}),a}static adjustSelection(e,t,n,i){if(n!==0||i!==0){const{positionLineNumber:s,positionColumn:r}=t,a=r-n,l=r+i,c=e.validateRange({startLineNumber:s,startColumn:a,endLineNumber:s,endColumn:l});t=re.createWithDirection(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn,t.getDirection())}return t}static createEditsAndSnippetsFromSelections(e,t,n,i,s,r,a,l,c){const d=[],h=[];if(!e.hasModel())return{edits:d,snippets:h};const g=e.getModel(),f=e.invokeWithinContext(S=>S.get(Vb)),p=e.invokeWithinContext(S=>new VM(S.get(xf),g)),_=u(()=>a,"readClipboardText"),v=g.getValueInRange(Ea.adjustSelection(g,e.getSelection(),n,0)),C=g.getValueInRange(Ea.adjustSelection(g,e.getSelection(),0,i)),w=g.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber),y=e.getSelections().map((S,E)=>({selection:S,idx:E})).sort((S,E)=>L.compareRangesUsingStarts(S.selection,E.selection));for(const{selection:S,idx:E}of y){let k=Ea.adjustSelection(g,S,n,0),T=Ea.adjustSelection(g,S,0,i);v!==g.getValueInRange(k)&&(k=S),C!==g.getValueInRange(T)&&(T=S);const x=S.setStartPosition(k.startLineNumber,k.startColumn).setEndPosition(T.endLineNumber,T.endColumn),M=new Ll().parse(t,!0,s),F=x.getStartPosition(),V=Ea.adjustWhitespace(g,F,M,r||E>0&&w!==g.getLineFirstNonWhitespaceColumn(S.positionLineNumber),!0);M.resolveVariables(new FM([p,new HM(_,E,y.length,e.getOption(73)==="spread"),new OM(g,S,E,l),new uw(g,S,c),new To,new BM(f),new WM])),d[E]=Ot.replace(x,M.toString()),d[E].identifier={major:E,minor:0},d[E]._isTracked=!0,h[E]=new ws(e,M,V)}return{edits:d,snippets:h}}static createEditsAndSnippetsFromEdits(e,t,n,i,s,r,a){if(!e.hasModel()||t.length===0)return{edits:[],snippets:[]};const l=[],c=e.getModel(),d=new Ll,h=new wp,g=new FM([e.invokeWithinContext(p=>new VM(p.get(xf),c)),new HM(()=>s,0,e.getSelections().length,e.getOption(73)==="spread"),new OM(c,e.getSelection(),0,r),new uw(c,e.getSelection(),a),new To,new BM(e.invokeWithinContext(p=>p.get(Vb))),new WM]);t=t.sort((p,_)=>L.compareRangesUsingStarts(p.range,_.range));let f=0;for(let p=0;p<t.length;p++){const{range:_,template:v}=t[p];if(p>0){const S=t[p-1].range,E=L.fromPositions(S.getEndPosition(),_.getStartPosition()),k=new ki(c.getValueInRange(E));h.appendChild(k),f+=k.value.length}d.parseFragment(v,h),h.resolveVariables(g);const C=h.toString(),w=C.slice(f);f=C.length;const y=Ot.replace(_,w);y.identifier={major:p,minor:0},y._isTracked=!0,l.push(y)}return d.ensureFinalTabstop(h,n,!0),{edits:l,snippets:[new ws(e,h,"")]}}dispose(){st(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;const{edits:e,snippets:t}=typeof this._template=="string"?Ea.createEditsAndSnippetsFromSelections(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService):Ea.createEditsAndSnippetsFromEdits(this._editor,this._template,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService);this._snippets=t,this._editor.executeEdits("snippet",e,n=>{const i=n.filter(s=>!!s.identifier);for(let s=0;s<t.length;s++)t[s].initialize(i[s].textChange);return this._snippets[0].hasPlaceholder?this._move(!0):i.map(s=>re.fromPositions(s.range.getEndPosition()))}),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,t=PF){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);const{edits:n,snippets:i}=Ea.createEditsAndSnippetsFromSelections(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText,t.overtypingCapturer,this._languageConfigurationService);this._editor.executeEdits("snippet",n,s=>{const r=s.filter(l=>!!l.identifier);for(let l=0;l<i.length;l++)i[l].initialize(r[l].textChange);const a=i[0].isTrivialSnippet;if(!a){for(const l of this._snippets)l.merge(i);console.assert(i.length===0)}return this._snippets[0].hasPlaceholder&&!a?this._move(void 0):r.map(l=>re.fromPositions(l.range.getEndPosition()))})}next(){const e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){const e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){const t=[];for(const n of this._snippets){const i=n.move(e);t.push(...i)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get hasChoice(){return this._snippets[0].hasChoice}get activeChoice(){return this._snippets[0].activeChoice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;const e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;const t=new Map;for(const n of this._snippets){const i=n.computePossibleSelections();if(t.size===0)for(const[s,r]of i){r.sort(L.compareRangesUsingStarts);for(const a of e)if(r[0].containsRange(a)){t.set(s,[]);break}}if(t.size===0)return!1;t.forEach((s,r)=>{s.push(...i.get(r))})}e.sort(L.compareRangesUsingStarts);for(const[n,i]of t){if(i.length!==e.length){t.delete(n);continue}i.sort(L.compareRangesUsingStarts);for(let s=0;s<i.length;s++)if(!i[s].containsRange(e[s])){t.delete(n);continue}}return t.size>0}},"SnippetSession");hw=vle([Cle(3,rn)],hw);var wle=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},EC=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const kC={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let Vn=u(class km{constructor(e,t,n,i,s){this._editor=e,this._logService=t,this._languageFeaturesService=n,this._languageConfigurationService=s,this._snippetListener=new J,this._modelVersionId=-1,this._inSnippet=km.InSnippetMode.bindTo(i),this._hasNextTabstop=km.HasNextTabstop.bindTo(i),this._hasPrevTabstop=km.HasPrevTabstop.bindTo(i)}static get(e){return e.getContribution(km.ID)}dispose(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),(e=this._session)===null||e===void 0||e.dispose(),this._snippetListener.dispose()}apply(e,t){try{this._doInsert(e,typeof t>"u"?kC:Object.assign(Object.assign({},kC),t))}catch(n){this.cancel(),this._logService.error(n),this._logService.error("snippet_error"),this._logService.error("insert_edits=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}insert(e,t){try{this._doInsert(e,typeof t>"u"?kC:Object.assign(Object.assign({},kC),t))}catch(n){this.cancel(),this._logService.error(n),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,t){var n;if(this._editor.hasModel()){if(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session&&typeof e!="string"&&this.cancel(),this._session?(bt(typeof e=="string"),this._session.merge(e,t)):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new hw(this._editor,e,t,this._languageConfigurationService),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),!((n=this._session)===null||n===void 0)&&n.hasChoice){this._choiceCompletionItemProvider={provideCompletionItems:(s,r)=>{if(!this._session||s!==this._editor.getModel()||!H.equals(this._editor.getPosition(),r))return;const{activeChoice:a}=this._session;if(!a||a.choice.options.length===0)return;const l=s.getValueInRange(a.range),c=Boolean(a.choice.options.find(h=>h.value===l)),d=[];for(let h=0;h<a.choice.options.length;h++){const g=a.choice.options[h];d.push({kind:13,label:g.value,insertText:g.value,sortText:"a".repeat(h+1),range:a.range,filterText:c?`${l}_${g.value}`:void 0,command:{id:"jumpToNextSnippetPlaceholder",title:m("next","Go to next placeholder...")}})}return{suggestions:d}}};const i=this._languageFeaturesService.completionProvider.register({language:this._editor.getModel().getLanguageId(),pattern:this._editor.getModel().uri.fsPath,scheme:this._editor.getModel().uri.scheme},this._choiceCompletionItemProvider);this._snippetListener.add(i)}this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(i=>i.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState()))}}_updateState(){if(!(!this._session||!this._editor.hasModel())){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this._editor.getModel().pushStackElement(),this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}const{activeChoice:e}=this._session;if(!e||!this._choiceCompletionItemProvider){this._currentChoice=void 0;return}this._currentChoice!==e.choice&&(this._currentChoice=e.choice,queueMicrotask(()=>{Kae(this._editor,this._choiceCompletionItemProvider)}))}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){var t;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),this._currentChoice=void 0,(t=this._session)===null||t===void 0||t.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){this._session&&this._session.prev(),this._updateState()}next(){this._session&&this._session.next(),this._updateState()}isInSnippet(){return Boolean(this._inSnippet.get())}},"SnippetController2");Vn.ID="snippetController2";Vn.InSnippetMode=new ce("inSnippetMode",!1,m("inSnippetMode","Whether the editor in current in snippet mode"));Vn.HasNextTabstop=new ce("hasNextTabstop",!1,m("hasNextTabstop","Whether there is a next tab stop when in snippet mode"));Vn.HasPrevTabstop=new ce("hasPrevTabstop",!1,m("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode"));Vn=wle([EC(1,Ao),EC(2,ue),EC(3,De),EC(4,rn)],Vn);it(Vn.ID,Vn);const yS=Ln.bindToContribution(Vn.get);te(new yS({id:"jumpToNextSnippetPlaceholder",precondition:oe.and(Vn.InSnippetMode,Vn.HasNextTabstop),handler:o=>o.next(),kbOpts:{weight:100+30,kbExpr:A.editorTextFocus,primary:2}}));te(new yS({id:"jumpToPrevSnippetPlaceholder",precondition:oe.and(Vn.InSnippetMode,Vn.HasPrevTabstop),handler:o=>o.prev(),kbOpts:{weight:100+30,kbExpr:A.editorTextFocus,primary:1026}}));te(new yS({id:"leaveSnippet",precondition:Vn.InSnippetMode,handler:o=>o.cancel(!0),kbOpts:{weight:100+30,kbExpr:A.editorTextFocus,primary:9,secondary:[1033]}}));te(new yS({id:"acceptSnippet",precondition:Vn.InSnippetMode,handler:o=>o.finish()}));function qU(o,e,t){const n=Vn.get(o);return n?(o.focus(),n.apply(t.map(i=>({range:re.liftSelection(i),template:e}))),n.isInSnippet()):!1}u(qU,"performSnippetEdit");var yle=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},MC=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},RF=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const cL="application/vnd.code.copyMetadata";let Zb=u(class extends U{constructor(e,t,n,i,s){super(),this._bulkEditService=t,this._clipboardService=n,this._configurationService=i,this._languageFeaturesService=s,this._editor=e;const r=e.getContainerDomNode();this._register(Y(r,"copy",a=>this.handleCopy(a))),this._register(Y(r,"cut",a=>this.handleCopy(a))),this._register(Y(r,"paste",a=>this.handlePaste(a),!0))}arePasteActionsEnabled(e){return this._configurationService.getValue("editor.experimental.pasteActions.enabled",{resource:e.uri})}handleCopy(e){var t;if(!e.clipboardData||!this._editor.hasTextFocus())return;const n=this._editor.getModel(),i=this._editor.getSelections();if(!n||!i?.length||!this.arePasteActionsEnabled(n))return;const s=[...i],r=i[0],a=r.isEmpty();if(a){if(!this._editor.getOption(33))return;s[0]=new L(r.startLineNumber,0,r.startLineNumber,n.getLineLength(r.startLineNumber))}const l=this._languageFeaturesService.documentPasteEditProvider.ordered(n).filter(g=>!!g.prepareDocumentPaste);if(!l.length){this.setCopyMetadata(e.clipboardData,{wasFromEmptySelection:a});return}const c=RM(e.clipboardData),d=KU();this.setCopyMetadata(e.clipboardData,{id:d,wasFromEmptySelection:a});const h=On(g=>RF(this,void 0,void 0,function*(){const f=yield Promise.all(l.map(p=>p.prepareDocumentPaste(n,s,c,g)));for(const p of f)p?.forEach((_,v)=>{c.replace(v,_)});return c}));(t=this._currentClipboardItem)===null||t===void 0||t.dataTransferPromise.cancel(),this._currentClipboardItem={handle:d,dataTransferPromise:h}}setCopyMetadata(e,t){e.setData(cL,JSON.stringify(t))}handlePaste(e){var t,n,i;return RF(this,void 0,void 0,function*(){if(!e.clipboardData||!this._editor.hasTextFocus())return;const s=this._editor.getSelections();if(!s?.length||!this._editor.hasModel())return;const r=this._editor.getModel();if(!this.arePasteActionsEnabled(r))return;let a;const l=(t=e.clipboardData)===null||t===void 0?void 0:t.getData(cL);l&&typeof l=="string"&&(a=JSON.parse(l));const c=this._languageFeaturesService.documentPasteEditProvider.ordered(r);if(!c.length)return;e.preventDefault(),e.stopImmediatePropagation();const d=r.getVersionId(),h=new Hc(this._editor,3);try{const g=RM(e.clipboardData);if(a?.id&&((n=this._currentClipboardItem)===null||n===void 0?void 0:n.handle)===a.id&&(yield this._currentClipboardItem.dataTransferPromise).forEach((v,C)=>{g.replace(C,v)}),!g.has(zi.uriList)){const _=yield this._clipboardService.readResources();_.length&&g.append(zi.uriList,ON(HN.create(_)))}g.delete(cL);for(const _ of c){if(!_.pasteMimeTypes.some(C=>C.toLowerCase()===K_.FILES.toLowerCase()?[...g.values()].some(w=>w.asFile()):g.has(C)))continue;const v=yield _.provideDocumentPasteEdits(r,s,g,h.token);if(d!==r.getVersionId())return;if(v){qU(this._editor,typeof v.insertText=="string"?Ll.escape(v.insertText):v.insertText.snippet,s),v.additionalEdit&&(yield this._bulkEditService.apply(ph.convert(v.additionalEdit),{editor:this._editor}));return}}const f=(i=g.get(zi.text))!==null&&i!==void 0?i:g.get("text");if(!f)return;const p=yield f.asString();if(d!==r.getVersionId())return;this._editor.trigger("keyboard","paste",{text:p,pasteOnNewLine:a?.wasFromEmptySelection,multicursorText:null})}finally{h.dispose()}})}},"CopyPasteController");Zb.ID="editor.contrib.copyPasteActionController";Zb=yle([MC(1,$_),MC(2,Nl),MC(3,rt),MC(4,ue)],Zb);it(Zb.ID,Zb);zt.as(kl.Configuration).registerConfiguration(Object.assign(Object.assign({},_I),{properties:{"editor.experimental.pasteActions.enabled":{type:"boolean",scope:5,description:m("pasteActions","Enable/disable running edits from extensions on paste."),default:!1}}}));class il{constructor(e,t,n){this.languageConfigurationService=n,this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,n){if(n<0)return!1;const i=t.length,s=e.length;if(n+i>s)return!1;for(let r=0;r<i;r++){const a=e.charCodeAt(n+r),l=t.charCodeAt(r);if(a!==l&&!(a>=65&&a<=90&&a+32===l)&&!(l>=65&&l<=90&&l+32===a))return!1}return!0}_createOperationsForBlockComment(e,t,n,i,s,r){const a=e.startLineNumber,l=e.startColumn,c=e.endLineNumber,d=e.endColumn,h=s.getLineContent(a),g=s.getLineContent(c);let f=h.lastIndexOf(t,l-1+t.length),p=g.indexOf(n,d-1-n.length);if(f!==-1&&p!==-1)if(a===c)h.substring(f+t.length,p).indexOf(n)>=0&&(f=-1,p=-1);else{const v=h.substring(f+t.length),C=g.substring(0,p);(v.indexOf(n)>=0||C.indexOf(n)>=0)&&(f=-1,p=-1)}let _;f!==-1&&p!==-1?(i&&f+t.length<h.length&&h.charCodeAt(f+t.length)===32&&(t=t+" "),i&&p>0&&g.charCodeAt(p-1)===32&&(n=" "+n,p-=1),_=il._createRemoveBlockCommentOperations(new L(a,f+t.length+1,c,p+1),t,n)):(_=il._createAddBlockCommentOperations(e,t,n,this._insertSpace),this._usedEndToken=_.length===1?n:null);for(const v of _)r.addTrackedEditOperation(v.range,v.text)}static _createRemoveBlockCommentOperations(e,t,n){const i=[];return L.isEmpty(e)?i.push(Ot.delete(new L(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+n.length))):(i.push(Ot.delete(new L(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),i.push(Ot.delete(new L(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+n.length)))),i}static _createAddBlockCommentOperations(e,t,n,i){const s=[];return L.isEmpty(e)?s.push(Ot.replace(new L(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+n)):(s.push(Ot.insert(new H(e.startLineNumber,e.startColumn),t+(i?" ":""))),s.push(Ot.insert(new H(e.endLineNumber,e.endColumn),(i?" ":"")+n))),s}getEditOperations(e,t){const n=this._selection.startLineNumber,i=this._selection.startColumn;e.tokenization.tokenizeIfCheap(n);const s=e.getLanguageIdAtPosition(n,i),r=this.languageConfigurationService.getLanguageConfiguration(s).comments;!r||!r.blockCommentStartToken||!r.blockCommentEndToken||this._createOperationsForBlockComment(this._selection,r.blockCommentStartToken,r.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){const n=t.getInverseEditOperations();if(n.length===2){const i=n[0],s=n[1];return new re(i.range.endLineNumber,i.range.endColumn,s.range.startLineNumber,s.range.startColumn)}else{const i=n[0].range,s=this._usedEndToken?-this._usedEndToken.length-1:0;return new re(i.endLineNumber,i.endColumn+s,i.endLineNumber,i.endColumn+s)}}}u(il,"BlockCommentCommand");class Vr{constructor(e,t,n,i,s,r,a){this.languageConfigurationService=e,this._selection=t,this._tabSize=n,this._type=i,this._insertSpace=s,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=r,this._ignoreFirstLine=a||!1}static _gatherPreflightCommentStrings(e,t,n,i){e.tokenization.tokenizeIfCheap(t);const s=e.getLanguageIdAtPosition(t,1),r=i.getLanguageConfiguration(s).comments,a=r?r.lineCommentToken:null;if(!a)return null;const l=[];for(let c=0,d=n-t+1;c<d;c++)l[c]={ignore:!1,commentStr:a,commentStrOffset:0,commentStrLength:a.length};return l}static _analyzeLines(e,t,n,i,s,r,a,l){let c=!0,d;e===0?d=!0:e===1?d=!1:d=!0;for(let h=0,g=i.length;h<g;h++){const f=i[h],p=s+h;if(p===s&&a){f.ignore=!0;continue}const _=n.getLineContent(p),v=Di(_);if(v===-1){f.ignore=r,f.commentStrOffset=_.length;continue}if(c=!1,f.ignore=!1,f.commentStrOffset=v,d&&!il._haystackHasNeedleAtOffset(_,f.commentStr,v)&&(e===0?d=!1:e===1||(f.ignore=!0)),d&&t){const C=v+f.commentStrLength;C<_.length&&_.charCodeAt(C)===32&&(f.commentStrLength+=1)}}if(e===0&&c){d=!1;for(let h=0,g=i.length;h<g;h++)i[h].ignore=!1}return{supported:!0,shouldRemoveComments:d,lines:i}}static _gatherPreflightData(e,t,n,i,s,r,a,l){const c=Vr._gatherPreflightCommentStrings(n,i,s,l);return c===null?{supported:!1}:Vr._analyzeLines(e,t,n,c,i,r,a,l)}_executeLineComments(e,t,n,i){let s;n.shouldRemoveComments?s=Vr._createRemoveLineCommentsOperations(n.lines,i.startLineNumber):(Vr._normalizeInsertionPoint(e,n.lines,i.startLineNumber,this._tabSize),s=this._createAddLineCommentsOperations(n.lines,i.startLineNumber));const r=new H(i.positionLineNumber,i.positionColumn);for(let a=0,l=s.length;a<l;a++)t.addEditOperation(s[a].range,s[a].text),L.isEmpty(s[a].range)&&L.getStartPosition(s[a].range).equals(r)&&e.getLineContent(r.lineNumber).length+1===r.column&&(this._deltaColumn=(s[a].text||"").length);this._selectionId=t.trackSelection(i)}_attemptRemoveBlockComment(e,t,n,i){let s=t.startLineNumber,r=t.endLineNumber;const a=i.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn);let l=e.getLineContent(s).lastIndexOf(n,a-1),c=e.getLineContent(r).indexOf(i,t.endColumn-1-n.length);return l!==-1&&c===-1&&(c=e.getLineContent(s).indexOf(i,l+n.length),r=s),l===-1&&c!==-1&&(l=e.getLineContent(r).lastIndexOf(n,c),s=r),t.isEmpty()&&(l===-1||c===-1)&&(l=e.getLineContent(s).indexOf(n),l!==-1&&(c=e.getLineContent(s).indexOf(i,l+n.length))),l!==-1&&e.getLineContent(s).charCodeAt(l+n.length)===32&&(n+=" "),c!==-1&&e.getLineContent(r).charCodeAt(c-1)===32&&(i=" "+i,c-=1),l!==-1&&c!==-1?il._createRemoveBlockCommentOperations(new L(s,l+n.length+1,r,c+1),n,i):null}_executeBlockComment(e,t,n){e.tokenization.tokenizeIfCheap(n.startLineNumber);const i=e.getLanguageIdAtPosition(n.startLineNumber,1),s=this.languageConfigurationService.getLanguageConfiguration(i).comments;if(!s||!s.blockCommentStartToken||!s.blockCommentEndToken)return;const r=s.blockCommentStartToken,a=s.blockCommentEndToken;let l=this._attemptRemoveBlockComment(e,n,r,a);if(!l){if(n.isEmpty()){const c=e.getLineContent(n.startLineNumber);let d=Di(c);d===-1&&(d=c.length),l=il._createAddBlockCommentOperations(new L(n.startLineNumber,d+1,n.startLineNumber,c.length+1),r,a,this._insertSpace)}else l=il._createAddBlockCommentOperations(new L(n.startLineNumber,e.getLineFirstNonWhitespaceColumn(n.startLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),r,a,this._insertSpace);l.length===1&&(this._deltaColumn=r.length+1)}this._selectionId=t.trackSelection(n);for(const c of l)t.addEditOperation(c.range,c.text)}getEditOperations(e,t){let n=this._selection;if(this._moveEndPositionDown=!1,n.startLineNumber===n.endLineNumber&&this._ignoreFirstLine){t.addEditOperation(new L(n.startLineNumber,e.getLineMaxColumn(n.startLineNumber),n.startLineNumber+1,1),n.startLineNumber===e.getLineCount()?"":`
`),this._selectionId=t.trackSelection(n);return}n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._moveEndPositionDown=!0,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));const i=Vr._gatherPreflightData(this._type,this._insertSpace,e,n.startLineNumber,n.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return i.supported?this._executeLineComments(e,t,i,n):this._executeBlockComment(e,t,n)}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),new re(n.selectionStartLineNumber,n.selectionStartColumn+this._deltaColumn,n.positionLineNumber,n.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){const n=[];for(let i=0,s=e.length;i<s;i++){const r=e[i];r.ignore||n.push(Ot.delete(new L(t+i,r.commentStrOffset+1,t+i,r.commentStrOffset+r.commentStrLength+1)))}return n}_createAddLineCommentsOperations(e,t){const n=[],i=this._insertSpace?" ":"";for(let s=0,r=e.length;s<r;s++){const a=e[s];a.ignore||n.push(Ot.insert(new H(t+s,a.commentStrOffset+1),a.commentStr+i))}return n}static nextVisibleColumn(e,t,n,i){return n?e+(t-e%t):e+i}static _normalizeInsertionPoint(e,t,n,i){let s=1073741824,r,a;for(let l=0,c=t.length;l<c;l++){if(t[l].ignore)continue;const d=e.getLineContent(n+l);let h=0;for(let g=0,f=t[l].commentStrOffset;h<s&&g<f;g++)h=Vr.nextVisibleColumn(h,i,d.charCodeAt(g)===9,1);h<s&&(s=h)}s=Math.floor(s/i)*i;for(let l=0,c=t.length;l<c;l++){if(t[l].ignore)continue;const d=e.getLineContent(n+l);let h=0;for(r=0,a=t[l].commentStrOffset;h<s&&r<a;r++)h=Vr.nextVisibleColumn(h,i,d.charCodeAt(r)===9,1);h>s?t[l].commentStrOffset=r-1:t[l].commentStrOffset=r}}}u(Vr,"LineCommentCommand");class SS extends de{constructor(e,t){super(t),this._type=e}run(e,t){const n=e.get(rn);if(!t.hasModel())return;const i=t.getModel(),s=[],r=i.getOptions(),a=t.getOption(19),l=t.getSelections().map((d,h)=>({selection:d,index:h,ignoreFirstLine:!1}));l.sort((d,h)=>L.compareRangesUsingStarts(d.selection,h.selection));let c=l[0];for(let d=1;d<l.length;d++){const h=l[d];c.selection.endLineNumber===h.selection.startLineNumber&&(c.index<h.index?h.ignoreFirstLine=!0:(c.ignoreFirstLine=!0,c=h))}for(const d of l)s.push(new Vr(n,d.selection,r.tabSize,this._type,a.insertSpace,a.ignoreEmptyLines,d.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}u(SS,"CommentLineAction");class YU extends SS{constructor(){super(0,{id:"editor.action.commentLine",label:m("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:2133,weight:100},menuOpts:{menuId:P.MenubarEditMenu,group:"5_insert",title:m({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}u(YU,"ToggleCommentLineAction");class XU extends SS{constructor(){super(1,{id:"editor.action.addCommentLine",label:m("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:xn(2089,2081),weight:100}})}}u(XU,"AddLineCommentAction");class ZU extends SS{constructor(){super(2,{id:"editor.action.removeCommentLine",label:m("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:xn(2089,2099),weight:100}})}}u(ZU,"RemoveLineCommentAction");class JU extends de{constructor(){super({id:"editor.action.blockComment",label:m("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:P.MenubarEditMenu,group:"5_insert",title:m({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){const n=e.get(rn);if(!t.hasModel())return;const i=t.getOption(19),s=[],r=t.getSelections();for(const a of r)s.push(new il(a,i.insertSpace,n));t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}u(JU,"BlockCommentAction");ie(YU);ie(XU);ie(ZU);ie(JU);var Sle=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Uh=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let zf=u(class QU{constructor(e,t,n,i,s,r,a){this._contextMenuService=t,this._contextViewService=n,this._contextKeyService=i,this._keybindingService=s,this._menuService=r,this._configurationService=a,this._toDispose=new J,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu(l=>this._onContextMenu(l))),this._toDispose.add(this._editor.onMouseWheel(l=>{if(this._contextMenuIsBeingShownCount>0){const c=this._contextViewService.getContextViewElement(),d=l.srcElement;d.shadowRoot&&wu(c)===d.shadowRoot||this._contextViewService.hideContextView()}})),this._toDispose.add(this._editor.onKeyDown(l=>{this._editor.getOption(20)&&l.keyCode===58&&(l.preventDefault(),l.stopPropagation(),this.showContextMenu())}))}static get(e){return e.getContribution(QU.ID)}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(20)){this._editor.focus(),e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position);return}if(e.target.type===12||e.target.type===6&&e.target.detail.injectedText)return;if(e.event.preventDefault(),e.event.stopPropagation(),e.target.type===11)return this._showScrollbarContextMenu({x:e.event.posx-1,width:2,y:e.event.posy-1,height:2});if(e.target.type!==6&&e.target.type!==7&&e.target.type!==1)return;if(this._editor.focus(),e.target.position){let n=!1;for(const i of this._editor.getSelections())if(i.containsPosition(e.target.position)){n=!0;break}n||this._editor.setPosition(e.target.position)}let t=null;e.target.type!==1&&(t={x:e.event.posx-1,width:2,y:e.event.posy-1,height:2}),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(20)||!this._editor.hasModel())return;const t=this._getMenuActions(this._editor.getModel(),this._editor.isSimpleWidget?P.SimpleEditorContext:P.EditorContext);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){const n=[],i=this._menuService.createMenu(t,this._contextKeyService),s=i.getActions({arg:e.uri});i.dispose();for(const r of s){const[,a]=r;let l=0;for(const c of a)if(c instanceof Qw){const d=this._getMenuActions(e,c.item.submenu);d.length>0&&(n.push(new sf(c.id,c.label,d)),l++)}else n.push(c),l++;l&&n.push(new Jn)}return n.length&&n.pop(),n}_doShowContextMenu(e,t=null){if(!this._editor.hasModel())return;const n=this._editor.getOption(55);if(this._editor.updateOptions({hover:{enabled:!1}}),!t){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const s=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),r=li(this._editor.getDomNode()),a=r.left+s.left,l=r.top+s.top+s.height;t={x:a,y:l}}const i=this._editor.getOption(117)&&!na;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:i?this._editor.getDomNode():void 0,getAnchor:()=>t,getActions:()=>e,getActionViewItem:s=>{const r=this._keybindingFor(s);if(r)return new Tf(s,s,{label:!0,keybinding:r.getLabel(),isMenu:!0});const a=s;return typeof a.getActionViewItem=="function"?a.getActionViewItem():new Tf(s,s,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:s=>this._keybindingFor(s),onHide:s=>{this._contextMenuIsBeingShownCount--,this._editor.focus(),this._editor.updateOptions({hover:n})}})}_showScrollbarContextMenu(e){if(!this._editor.hasModel())return;const t=this._editor.getOption(67);let n=0;const i=u(c=>({id:`menu-action-${++n}`,label:c.label,tooltip:"",class:void 0,enabled:typeof c.enabled>"u"?!0:c.enabled,checked:c.checked,run:c.run,dispose:()=>null}),"createAction"),s=u((c,d)=>new sf(`menu-action-${++n}`,c,d,void 0),"createSubmenuAction"),r=u((c,d,h,g,f)=>{if(!d)return i({label:c,enabled:d,run:()=>{}});const p=u(v=>()=>{this._configurationService.updateValue(h,v)},"createRunner"),_=[];for(const v of f)_.push(i({label:v.label,checked:g===v.value,run:p(v.value)}));return s(c,_)},"createEnumAction"),a=[];a.push(i({label:m("context.minimap.minimap","Minimap"),checked:t.enabled,run:()=>{this._configurationService.updateValue("editor.minimap.enabled",!t.enabled)}})),a.push(new Jn),a.push(i({label:m("context.minimap.renderCharacters","Render Characters"),enabled:t.enabled,checked:t.renderCharacters,run:()=>{this._configurationService.updateValue("editor.minimap.renderCharacters",!t.renderCharacters)}})),a.push(r(m("context.minimap.size","Vertical size"),t.enabled,"editor.minimap.size",t.size,[{label:m("context.minimap.size.proportional","Proportional"),value:"proportional"},{label:m("context.minimap.size.fill","Fill"),value:"fill"},{label:m("context.minimap.size.fit","Fit"),value:"fit"}])),a.push(r(m("context.minimap.slider","Slider"),t.enabled,"editor.minimap.showSlider",t.showSlider,[{label:m("context.minimap.slider.mouseover","Mouse Over"),value:"mouseover"},{label:m("context.minimap.slider.always","Always"),value:"always"}]));const l=this._editor.getOption(117)&&!na;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:l?this._editor.getDomNode():void 0,getAnchor:()=>e,getActions:()=>a,onHide:c=>{this._contextMenuIsBeingShownCount--,this._editor.focus()}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}},"ContextMenuController");zf.ID="editor.contrib.contextmenu";zf=Sle([Uh(1,Il),Uh(2,fh),Uh(3,De),Uh(4,Cn),Uh(5,ah),Uh(6,rt)],zf);class eG extends de{constructor(){super({id:"editor.action.showContextMenu",label:m("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:A.textInputFocus,primary:1092,weight:100}})}run(e,t){var n;(n=zf.get(t))===null||n===void 0||n.showContextMenu()}}u(eG,"ShowContextMenu");it(zf.ID,zf);ie(eG);class M0{constructor(e){this.selections=e}equals(e){const t=this.selections.length,n=e.selections.length;if(t!==n)return!1;for(let i=0;i<t;i++)if(!this.selections[i].equalsSelection(e.selections[i]))return!1;return!0}}u(M0,"CursorState");class D0{constructor(e,t,n){this.cursorState=e,this.scrollTop=t,this.scrollLeft=n}}u(D0,"StackElement");class Kc extends U{constructor(e){super(),this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeModelContent(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeCursorSelection(t=>{if(this._isCursorUndoRedo||!t.oldSelections||t.oldModelVersionId!==t.modelVersionId)return;const n=new M0(t.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(n)||(this._undoStack.push(new D0(n,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())}))}static get(e){return e.getContribution(Kc.ID)}cursorUndo(){!this._editor.hasModel()||this._undoStack.length===0||(this._redoStack.push(new D0(new M0(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){!this._editor.hasModel()||this._redoStack.length===0||(this._undoStack.push(new D0(new M0(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}}u(Kc,"CursorUndoRedoController");Kc.ID="editor.contrib.cursorUndoRedoController";class tG extends de{constructor(){super({id:"cursorUndo",label:m("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:A.textInputFocus,primary:2099,weight:100}})}run(e,t,n){var i;(i=Kc.get(t))===null||i===void 0||i.cursorUndo()}}u(tG,"CursorUndo");class nG extends de{constructor(){super({id:"cursorRedo",label:m("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,t,n){var i;(i=Kc.get(t))===null||i===void 0||i.cursorRedo()}}u(nG,"CursorRedo");it(Kc.ID,Kc);ie(tG);ie(nG);class iG{constructor(e,t,n){this.selection=e,this.targetPosition=t,this.copy=n,this.targetSelection=null}getEditOperations(e,t){const n=e.getValueInRange(this.selection);if(this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new L(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),n),this.selection.containsPosition(this.targetPosition)&&!(this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition)))){this.targetSelection=this.selection;return}if(this.copy){this.targetSelection=new re(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber>this.selection.endLineNumber){this.targetSelection=new re(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber<this.selection.endLineNumber){this.targetSelection=new re(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new re(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column-this.selection.endColumn+this.selection.startColumn:this.targetPosition.column-this.selection.endColumn+this.selection.startColumn,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new re(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn)}computeCursorState(e,t){return this.targetSelection}}u(iG,"DragAndDropCommand");function Gh(o){return Xe?o.altKey:o.ctrlKey}u(Gh,"hasTriggerModifier");class ea extends U{constructor(e){super(),this._editor=e,this._dndDecorationIds=this._editor.createDecorationsCollection(),this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(t))),this._register(this._editor.onMouseDrag(t=>this._onEditorMouseDrag(t))),this._register(this._editor.onMouseDrop(t=>this._onEditorMouseDrop(t))),this._register(this._editor.onMouseDropCanceled(()=>this._onEditorMouseDropCanceled())),this._register(this._editor.onKeyDown(t=>this.onEditorKeyDown(t))),this._register(this._editor.onKeyUp(t=>this.onEditorKeyUp(t))),this._register(this._editor.onDidBlurEditorWidget(()=>this.onEditorBlur())),this._register(this._editor.onDidBlurEditorText(()=>this.onEditorBlur())),this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){!this._editor.getOption(31)||this._editor.getOption(18)||(Gh(e)&&(this._modifierPressed=!0),this._mouseDown&&Gh(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){!this._editor.getOption(31)||this._editor.getOption(18)||(Gh(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===ea.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(e){const t=e.target;if(this._dragSelection===null){const i=(this._editor.getSelections()||[]).filter(s=>t.position&&s.containsPosition(t.position));if(i.length===1)this._dragSelection=i[0];else return}Gh(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){const t=new H(e.target.position.lineNumber,e.target.position.column);if(this._dragSelection===null){let n=null;if(e.event.shiftKey){const i=this._editor.getSelection();if(i){const{selectionStartLineNumber:s,selectionStartColumn:r}=i;n=[new re(s,r,t.lineNumber,t.column)]}}else n=(this._editor.getSelections()||[]).map(i=>i.containsPosition(t)?new re(t.lineNumber,t.column,t.lineNumber,t.column):i);this._editor.setSelections(n||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(Gh(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(ea.ID,new iG(this._dragSelection,t,Gh(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(e){this._dndDecorationIds.set([{range:new L(e.lineNumber,e.column,e.lineNumber,e.column),options:ea._DECORATION_OPTIONS}]),this._editor.revealPosition(e,1)}_removeDecoration(){this._dndDecorationIds.clear()}_hitContent(e){return e.type===6||e.type===7}_hitMargin(e){return e.type===2||e.type===3||e.type===4}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}}u(ea,"DragAndDropController");ea.ID="editor.contrib.dragAndDrop";ea.TRIGGER_KEY_VALUE=Xe?6:5;ea._DECORATION_OPTIONS=Ae.register({description:"dnd-target",className:"dnd-target"});it(ea.ID,ea);var sG=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Mm=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},A0=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let Jb=u(class extends U{constructor(e,t,n,i,s){super(),this._bulkEditService=t,this._languageFeaturesService=n,this._progressService=i,this._register(e.onDropIntoEditor(r=>this.onDropIntoEditor(e,r.position,r.event))),this._languageFeaturesService.documentOnDropEditProvider.register("*",new UM(s))}onDropIntoEditor(e,t,n){return A0(this,void 0,void 0,function*(){if(!n.dataTransfer||!e.hasModel())return;const i=e.getModel(),s=i.getVersionId(),r=yield this.extractDataTransferData(n);if(r.size===0||e.getModel().getVersionId()!==s)return;const a=new Hc(e,1);try{const l=this._languageFeaturesService.documentOnDropEditProvider.ordered(i),c=yield this._progressService.withProgress({location:15,delay:750,title:m("dropProgressTitle","Running drop handlers..."),cancellable:!0},()=>tA((()=>A0(this,void 0,void 0,function*(){for(const d of l){const h=yield d.provideDocumentOnDropEdits(i,t,r,a.token);if(a.token.isCancellationRequested)return;if(h)return h}}))(),a.token),()=>{a.cancel()});if(a.token.isCancellationRequested||e.getModel().getVersionId()!==s)return;if(c){const d=new L(t.lineNumber,t.column,t.lineNumber,t.column);qU(e,typeof c.insertText=="string"?Ll.escape(c.insertText):c.insertText.snippet,[re.fromRange(d,0)]),c.additionalEdit&&(yield this._bulkEditService.apply(ph.convert(c.additionalEdit),{editor:e}));return}}finally{a.dispose()}})}extractDataTransferData(e){return A0(this,void 0,void 0,function*(){if(!e.dataTransfer)return new VN;const t=RM(e.dataTransfer);return mle(t,e),t})}},"DropIntoEditorController");Jb.ID="editor.contrib.dropIntoEditorController";Jb=sG([Mm(1,$_),Mm(2,ue),Mm(3,K9),Mm(4,Vb)],Jb);let UM=u(class{constructor(e){this._workspaceContextService=e}provideDocumentOnDropEdits(e,t,n,i){var s;return A0(this,void 0,void 0,function*(){const r=n.get(zi.uriList);if(r){const l=yield r.asString(),c=this.getUriListInsertText(l);if(c)return{insertText:c}}const a=(s=n.get("text"))!==null&&s!==void 0?s:n.get(zi.text);if(a)return{insertText:yield a.asString()}})}getUriListInsertText(e){const t=[];for(const n of HN.parse(e))try{t.push(be.parse(n))}catch{}if(t.length)return t.map(n=>{const i=this._workspaceContextService.getWorkspaceFolder(n);if(i){const s=see(i.uri,n);if(s)return s}return n.fsPath}).join(" ")}},"DefaultOnDropProvider");UM=sG([Mm(0,Vb)],UM);it(Jb.ID,Jb);class si{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.removeDecorations(this._allDecorations()),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const e=this._findScopeDecorationIds.map(t=>this._editor.getModel().getDecorationRange(t)).filter(t=>!!t);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){const t=this._decorations.indexOf(e);return t>=0?t+1:1}getCurrentMatchesPosition(e){const t=this._editor.getModel().getDecorationsInRange(e);for(const n of t){const i=n.options;if(i===si._FIND_MATCH_DECORATION||i===si._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(n.id)}return 0}setCurrentFindMatch(e){let t=null,n=0;if(e)for(let i=0,s=this._decorations.length;i<s;i++){const r=this._editor.getModel().getDecorationRange(this._decorations[i]);if(e.equalsRange(r)){t=this._decorations[i],n=i+1;break}}return(this._highlightedDecorationId!==null||t!==null)&&this._editor.changeDecorations(i=>{if(this._highlightedDecorationId!==null&&(i.changeDecorationOptions(this._highlightedDecorationId,si._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),t!==null&&(this._highlightedDecorationId=t,i.changeDecorationOptions(this._highlightedDecorationId,si._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(i.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),t!==null){let s=this._editor.getModel().getDecorationRange(t);if(s.startLineNumber!==s.endLineNumber&&s.endColumn===1){const r=s.endLineNumber-1,a=this._editor.getModel().getLineMaxColumn(r);s=new L(s.startLineNumber,s.startColumn,r,a)}this._rangeHighlightDecorationId=i.addDecoration(s,si._RANGE_HIGHLIGHT_DECORATION)}}),n}set(e,t){this._editor.changeDecorations(n=>{let i=si._FIND_MATCH_DECORATION;const s=[];if(e.length>1e3){i=si._FIND_MATCH_NO_OVERVIEW_DECORATION;const a=this._editor.getModel().getLineCount(),c=this._editor.getLayoutInfo().height/a,d=Math.max(2,Math.ceil(3/c));let h=e[0].range.startLineNumber,g=e[0].range.endLineNumber;for(let f=1,p=e.length;f<p;f++){const _=e[f].range;g+d>=_.startLineNumber?_.endLineNumber>g&&(g=_.endLineNumber):(s.push({range:new L(h,1,g,1),options:si._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),h=_.startLineNumber,g=_.endLineNumber)}s.push({range:new L(h,1,g,1),options:si._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}const r=new Array(e.length);for(let a=0,l=e.length;a<l;a++)r[a]={range:e[a].range,options:i};this._decorations=n.deltaDecorations(this._decorations,r),this._overviewRulerApproximateDecorations=n.deltaDecorations(this._overviewRulerApproximateDecorations,s),this._rangeHighlightDecorationId&&(n.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(a=>n.removeDecoration(a)),this._findScopeDecorationIds=[]),t?.length&&(this._findScopeDecorationIds=t.map(a=>n.addDecoration(a,si._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(this._decorations.length===0)return null;for(let t=this._decorations.length-1;t>=0;t--){const n=this._decorations[t],i=this._editor.getModel().getDecorationRange(n);if(!(!i||i.endLineNumber>e.lineNumber)){if(i.endLineNumber<e.lineNumber)return i;if(!(i.endColumn>e.column))return i}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(this._decorations.length===0)return null;for(let t=0,n=this._decorations.length;t<n;t++){const i=this._decorations[t],s=this._editor.getModel().getDecorationRange(i);if(!(!s||s.startLineNumber<e.lineNumber)){if(s.startLineNumber>e.lineNumber)return s;if(!(s.startColumn<e.column))return s}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}}u(si,"FindDecorations");si._CURRENT_FIND_MATCH_DECORATION=Ae.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:Zt(AA),position:io.Center},minimap:{color:Zt(gg),position:Zs.Inline}});si._FIND_MATCH_DECORATION=Ae.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:Zt(AA),position:io.Center},minimap:{color:Zt(gg),position:Zs.Inline}});si._FIND_MATCH_NO_OVERVIEW_DECORATION=Ae.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0});si._FIND_MATCH_ONLY_OVERVIEW_DECORATION=Ae.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:Zt(AA),position:io.Center}});si._RANGE_HIGHLIGHT_DECORATION=Ae.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0});si._FIND_SCOPE_DECORATION=Ae.register({description:"find-scope",className:"findScope",isWholeLine:!0});class oG{constructor(e,t,n){this._editorSelection=e,this._ranges=t,this._replaceStrings=n,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){const n=[];for(let r=0;r<this._ranges.length;r++)n.push({range:this._ranges[r],text:this._replaceStrings[r]});n.sort((r,a)=>L.compareRangesUsingStarts(r.range,a.range));const i=[];let s=n[0];for(let r=1;r<n.length;r++)s.range.endLineNumber===n[r].range.startLineNumber&&s.range.endColumn===n[r].range.startColumn?(s.range=s.range.plusRange(n[r].range),s.text=s.text+n[r].text):(i.push(s),s=n[r]);i.push(s);for(const r of i)t.addEditOperation(r.range,r.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}u(oG,"ReplaceAllCommand");function rG(o,e){if(o&&o[0]!==""){const t=FF(o,e,"-"),n=FF(o,e,"_");return t&&!n?OF(o,e,"-"):!t&&n?OF(o,e,"_"):o[0].toUpperCase()===o[0]?e.toUpperCase():o[0].toLowerCase()===o[0]?e.toLowerCase():yq(o[0][0])&&e.length>0?e[0].toUpperCase()+e.substr(1):o[0][0].toUpperCase()!==o[0][0]&&e.length>0?e[0].toLowerCase()+e.substr(1):e}else return e}u(rG,"buildReplaceStringWithCasePreserved");function FF(o,e,t){return o[0].indexOf(t)!==-1&&e.indexOf(t)!==-1&&o[0].split(t).length===e.split(t).length}u(FF,"validateSpecificSpecialCharacter");function OF(o,e,t){const n=e.split(t),i=o[0].split(t);let s="";return n.forEach((r,a)=>{s+=rG([i[a]],r)+t}),s.slice(0,-1)}u(OF,"buildReplaceStringForSpecificSpecialCharacter");class GM{constructor(e){this.staticValue=e,this.kind=0}}u(GM,"StaticValueReplacePattern");class aG{constructor(e){this.pieces=e,this.kind=1}}u(aG,"DynamicPiecesReplacePattern");class Gu{constructor(e){!e||e.length===0?this._state=new GM(""):e.length===1&&e[0].staticValue!==null?this._state=new GM(e[0].staticValue):this._state=new aG(e)}static fromStaticValue(e){return new Gu([yc.staticValue(e)])}get hasReplacementPatterns(){return this._state.kind===1}buildReplaceString(e,t){if(this._state.kind===0)return t?rG(e,this._state.staticValue):this._state.staticValue;let n="";for(let i=0,s=this._state.pieces.length;i<s;i++){const r=this._state.pieces[i];if(r.staticValue!==null){n+=r.staticValue;continue}let a=Gu._substitute(r.matchIndex,e);if(r.caseOps!==null&&r.caseOps.length>0){const l=[],c=r.caseOps.length;let d=0;for(let h=0,g=a.length;h<g;h++){if(d>=c){l.push(a.slice(h));break}switch(r.caseOps[d]){case"U":l.push(a[h].toUpperCase());break;case"u":l.push(a[h].toUpperCase()),d++;break;case"L":l.push(a[h].toLowerCase());break;case"l":l.push(a[h].toLowerCase()),d++;break;default:l.push(a[h])}}a=l.join("")}n+=a}return n}static _substitute(e,t){if(t===null)return"";if(e===0)return t[0];let n="";for(;e>0;){if(e<t.length)return(t[e]||"")+n;n=String(e%10)+n,e=Math.floor(e/10)}return"$"+n}}u(Gu,"ReplacePattern");class yc{constructor(e,t,n){this.staticValue=e,this.matchIndex=t,!n||n.length===0?this.caseOps=null:this.caseOps=n.slice(0)}static staticValue(e){return new yc(e,-1,null)}static caseOps(e,t){return new yc(null,e,t)}}u(yc,"ReplacePiece");class lG{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){e.length!==0&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,n){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=yc.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=yc.caseOps(e,n),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=yc.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new Gu(this._result)}}u(lG,"ReplacePieceBuilder");function Tle(o){if(!o||o.length===0)return new Gu(null);const e=[],t=new lG(o);for(let n=0,i=o.length;n<i;n++){const s=o.charCodeAt(n);if(s===92){if(n++,n>=i)break;const r=o.charCodeAt(n);switch(r){case 92:t.emitUnchanged(n-1),t.emitStatic("\\",n+1);break;case 110:t.emitUnchanged(n-1),t.emitStatic(`
`,n+1);break;case 116:t.emitUnchanged(n-1),t.emitStatic("	",n+1);break;case 117:case 85:case 108:case 76:t.emitUnchanged(n-1),t.emitStatic("",n+1),e.push(String.fromCharCode(r));break}continue}if(s===36){if(n++,n>=i)break;const r=o.charCodeAt(n);if(r===36){t.emitUnchanged(n-1),t.emitStatic("$",n+1);continue}if(r===48||r===38){t.emitUnchanged(n-1),t.emitMatchIndex(0,n+1,e),e.length=0;continue}if(49<=r&&r<=57){let a=r-48;if(n+1<i){const l=o.charCodeAt(n+1);if(48<=l&&l<=57){n++,a=a*10+(l-48),t.emitUnchanged(n-2),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}t.emitUnchanged(n-1),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}}return t.finalize()}u(Tle,"parseReplaceString");const nd=new ce("findWidgetVisible",!1);nd.toNegated();const TS=new ce("findInputFocussed",!1),BN=new ce("replaceInputFocussed",!1),DC={primary:545,mac:{primary:2593}},AC={primary:565,mac:{primary:2613}},IC={primary:560,mac:{primary:2608}},NC={primary:554,mac:{primary:2602}},PC={primary:558,mac:{primary:2606}},kt={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",StartFindWithArgs:"editor.actions.findWithArgs",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},dc=19999,Lle=240;class Kg{constructor(e,t){this._toDispose=new J,this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new hs,this._decorations=new si(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new pt(()=>this.research(!1),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(n=>{(n.reason===3||n.reason===5||n.reason===6)&&this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(n=>{this._ignoreModelContentChanged||(n.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(n=>this._onStateChanged(n))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,st(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){this._isDisposed||this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},Lle)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let n=null;typeof t<"u"?t!==null&&(Array.isArray(t)?n=t:n=[t]):n=this._decorations.getFindScopes(),n!==null&&(n=n.map(a=>{if(a.startLineNumber!==a.endLineNumber){let l=a.endLineNumber;return a.endColumn===1&&(l=l-1),new L(a.startLineNumber,1,l,this._editor.getModel().getLineMaxColumn(l))}return a}));const i=this._findMatches(n,!1,dc);this._decorations.set(i,n);const s=this._editor.getSelection();let r=this._decorations.getCurrentMatchesPosition(s);if(r===0&&i.length>0){const a=EO(i.map(l=>l.range),l=>L.compareRangesUsingStarts(l,s)>=0);r=a>0?a-1+1:r}this._state.changeMatchInfo(r,this._decorations.getCount(),void 0),e&&this._editor.getOption(37).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){const e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){const t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){const t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:n,column:i}=e;const s=this._editor.getModel();return t||i===1?(n===1?n=s.getLineCount():n--,i=s.getLineMaxColumn(n)):i--,new H(n,i)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){const d=this._decorations.matchAfterPosition(e);d&&this._setCurrentFindMatch(d);return}if(this._decorations.getCount()<dc){let d=this._decorations.matchBeforePosition(e);d&&d.isEmpty()&&d.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),d=this._decorations.matchBeforePosition(e)),d&&this._setCurrentFindMatch(d);return}if(this._cannotFind())return;const n=this._decorations.getFindScope(),i=Kg._getSearchRange(this._editor.getModel(),n);i.getEndPosition().isBefore(e)&&(e=i.getEndPosition()),e.isBefore(i.getStartPosition())&&(e=i.getEndPosition());const{lineNumber:s,column:r}=e,a=this._editor.getModel();let l=new H(s,r),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(119):null,!1);if(c&&c.range.isEmpty()&&c.range.getStartPosition().equals(l)&&(l=this._prevSearchPosition(l),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(119):null,!1)),!!c){if(!t&&!i.containsRange(c.range))return this._moveToPrevMatch(c.range.getStartPosition(),!0);this._setCurrentFindMatch(c.range)}}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){const t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:n,column:i}=e;const s=this._editor.getModel();return t||i===s.getLineMaxColumn(n)?(n===s.getLineCount()?n=1:n++,i=1):i++,new H(n,i)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){const n=this._decorations.matchBeforePosition(e);n&&this._setCurrentFindMatch(n);return}if(this._decorations.getCount()<dc){let n=this._decorations.matchAfterPosition(e);n&&n.isEmpty()&&n.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),n=this._decorations.matchAfterPosition(e)),n&&this._setCurrentFindMatch(n);return}const t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,n,i=!1){if(this._cannotFind())return null;const s=this._decorations.getFindScope(),r=Kg._getSearchRange(this._editor.getModel(),s);r.getEndPosition().isBefore(e)&&(e=r.getStartPosition()),e.isBefore(r.getStartPosition())&&(e=r.getStartPosition());const{lineNumber:a,column:l}=e,c=this._editor.getModel();let d=new H(a,l),h=c.findNextMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(119):null,t);return n&&h&&h.range.isEmpty()&&h.range.getStartPosition().equals(d)&&(d=this._nextSearchPosition(d),h=c.findNextMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(119):null,t)),h?!i&&!r.containsRange(h.range)?this._getNextMatch(h.range.getEndPosition(),t,n,!0):h:null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_getReplacePattern(){return this._state.isRegex?Tle(this._state.replaceString):Gu.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;const e=this._getReplacePattern(),t=this._editor.getSelection(),n=this._getNextMatch(t.getStartPosition(),!0,!1);if(n)if(t.equalsRange(n.range)){const i=e.buildReplaceString(n.matches,this._state.preserveCase),s=new Un(t,i);this._executeEditorCommand("replace",s),this._decorations.setStartPosition(new H(t.startLineNumber,t.startColumn+i.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(n.range)}_findMatches(e,t,n){const i=(e||[null]).map(s=>Kg._getSearchRange(this._editor.getModel(),s));return this._editor.getModel().findMatches(this._state.searchString,i,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(119):null,t,n)}replaceAll(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();e===null&&this._state.matchesCount>=dc?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){const t=new Zl(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(119):null).parseSearchRequest();if(!t)return;let n=t.regex;if(!n.multiline){let h="mu";n.ignoreCase&&(h+="i"),n.global&&(h+="g"),n=new RegExp(n.source,h)}const i=this._editor.getModel(),s=i.getValue(1),r=i.getFullModelRange(),a=this._getReplacePattern();let l;const c=this._state.preserveCase;a.hasReplacementPatterns||c?l=s.replace(n,function(){return a.buildReplaceString(arguments,c)}):l=s.replace(n,a.buildReplaceString(null,c));const d=new dy(r,l,this._editor.getSelection());this._executeEditorCommand("replaceAll",d)}_regularReplaceAll(e){const t=this._getReplacePattern(),n=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),i=[];for(let r=0,a=n.length;r<a;r++)i[r]=t.buildReplaceString(n[r].matches,this._state.preserveCase);const s=new oG(this._editor.getSelection(),n.map(r=>r.range),i);this._executeEditorCommand("replaceAll",s)}selectAllMatches(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();let n=this._findMatches(e,!1,1073741824).map(s=>new re(s.range.startLineNumber,s.range.startColumn,s.range.endLineNumber,s.range.endColumn));const i=this._editor.getSelection();for(let s=0,r=n.length;s<r;s++)if(n[s].equalsRange(i)){n=[i].concat(n.slice(0,s)).concat(n.slice(s+1));break}this._editor.setSelections(n)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}u(Kg,"FindModelBoundToEditorModel");class bv extends lo{constructor(e,t,n,i){super(),this._hideSoon=this._register(new pt(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=n,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const s=i.getColorTheme().getColor(d1),r=i.getColorTheme().getColor(h1),a=i.getColorTheme().getColor(u1);this.caseSensitive=this._register(new RI({appendTitle:this._keybindingLabelFor(kt.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,inputActiveOptionBorder:s,inputActiveOptionForeground:r,inputActiveOptionBackground:a})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new FI({appendTitle:this._keybindingLabelFor(kt.ToggleWholeWordCommand),isChecked:this._state.wholeWord,inputActiveOptionBorder:s,inputActiveOptionForeground:r,inputActiveOptionBackground:a})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new OI({appendTitle:this._keybindingLabelFor(kt.ToggleRegexCommand),isChecked:this._state.isRegex,inputActiveOptionBorder:s,inputActiveOptionForeground:r,inputActiveOptionBackground:a})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(l=>{let c=!1;l.isRegex&&(this.regex.checked=this._state.isRegex,c=!0),l.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,c=!0),l.matchCase&&(this.caseSensitive.checked=this._state.matchCase,c=!0),!this._state.isRevealed&&c&&this._revealTemporarily()})),this._register(Y(this._domNode,le.MOUSE_LEAVE,l=>this._onMouseLeave())),this._register(Y(this._domNode,"mouseover",l=>this._onMouseOver())),this._applyTheme(i.getColorTheme()),this._register(i.onDidColorThemeChange(this._applyTheme.bind(this)))}_keybindingLabelFor(e){const t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return bv.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseLeave(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}_applyTheme(e){const t={inputActiveOptionBorder:e.getColor(d1),inputActiveOptionForeground:e.getColor(h1),inputActiveOptionBackground:e.getColor(u1)};this.caseSensitive.style(t),this.wholeWords.style(t),this.regex.style(t)}}u(bv,"FindOptionsWidget");bv.ID="editor.contrib.findOptionsWidget";At((o,e)=>{const t=o.getColor(dn);t&&e.addRule(`.monaco-editor .findOptionsWidget { background-color: ${t}; }`);const n=o.getColor(ar);n&&e.addRule(`.monaco-editor .findOptionsWidget { color: ${n}; }`);const i=o.getColor(rr);i&&e.addRule(`.monaco-editor .findOptionsWidget { box-shadow: 0 0 8px 2px ${i}; }`);const s=o.getColor(Be);s&&e.addRule(`.monaco-editor .findOptionsWidget { border: 2px solid ${s}; }`)});function RC(o,e){return o===1?!0:o===2?!1:e}u(RC,"effectiveOptionValue");class cG extends U{constructor(){super(),this._onFindReplaceStateChange=this._register(new R),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0,this._isSearching=!1,this._filters=null}get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return RC(this._isRegexOverride,this._isRegex)}get wholeWord(){return RC(this._wholeWordOverride,this._wholeWord)}get matchCase(){return RC(this._matchCaseOverride,this._matchCase)}get preserveCase(){return RC(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}changeMatchInfo(e,t,n){const i={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let s=!1;t===0&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,i.matchesPosition=!0,s=!0),this._matchesCount!==t&&(this._matchesCount=t,i.matchesCount=!0,s=!0),typeof n<"u"&&(L.equalsRange(this._currentMatch,n)||(this._currentMatch=n,i.currentMatch=!0,s=!0)),s&&this._onFindReplaceStateChange.fire(i)}change(e,t,n=!0){var i;const s={moveCursor:t,updateHistory:n,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let r=!1;const a=this.isRegex,l=this.wholeWord,c=this.matchCase,d=this.preserveCase;typeof e.searchString<"u"&&this._searchString!==e.searchString&&(this._searchString=e.searchString,s.searchString=!0,r=!0),typeof e.replaceString<"u"&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,s.replaceString=!0,r=!0),typeof e.isRevealed<"u"&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,s.isRevealed=!0,r=!0),typeof e.isReplaceRevealed<"u"&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,s.isReplaceRevealed=!0,r=!0),typeof e.isRegex<"u"&&(this._isRegex=e.isRegex),typeof e.wholeWord<"u"&&(this._wholeWord=e.wholeWord),typeof e.matchCase<"u"&&(this._matchCase=e.matchCase),typeof e.preserveCase<"u"&&(this._preserveCase=e.preserveCase),typeof e.searchScope<"u"&&(!((i=e.searchScope)===null||i===void 0)&&i.every(h=>{var g;return(g=this._searchScope)===null||g===void 0?void 0:g.some(f=>!L.equalsRange(f,h))})||(this._searchScope=e.searchScope,s.searchScope=!0,r=!0)),typeof e.loop<"u"&&this._loop!==e.loop&&(this._loop=e.loop,s.loop=!0,r=!0),typeof e.isSearching<"u"&&this._isSearching!==e.isSearching&&(this._isSearching=e.isSearching,s.isSearching=!0,r=!0),typeof e.filters<"u"&&(this._filters?this._filters.update(e.filters):this._filters=e.filters,s.filters=!0,r=!0),this._isRegexOverride=typeof e.isRegexOverride<"u"?e.isRegexOverride:0,this._wholeWordOverride=typeof e.wholeWordOverride<"u"?e.wholeWordOverride:0,this._matchCaseOverride=typeof e.matchCaseOverride<"u"?e.matchCaseOverride:0,this._preserveCaseOverride=typeof e.preserveCaseOverride<"u"?e.preserveCaseOverride:0,a!==this.isRegex&&(r=!0,s.isRegex=!0),l!==this.wholeWord&&(r=!0,s.wholeWord=!0),c!==this.matchCase&&(r=!0,s.matchCase=!0),d!==this.preserveCase&&(r=!0,s.preserveCase=!0),r&&this._onFindReplaceStateChange.fire(s)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=dc}}u(cG,"FindReplaceState");function VF(o){var e,t;return((e=o.lookupKeybinding("history.showPrevious"))===null||e===void 0?void 0:e.getElectronAccelerator())==="Up"&&((t=o.lookupKeybinding("history.showNext"))===null||t===void 0?void 0:t.getElectronAccelerator())==="Down"}u(VF,"showHistoryKeybindingHint");var xle=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const Ele=vn("find-selection",b.selection,m("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),HF=vn("find-collapsed",b.chevronRight,m("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),BF=vn("find-expanded",b.chevronDown,m("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),kle=vn("find-replace",b.replace,m("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),Mle=vn("find-replace-all",b.replaceAll,m("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),Dle=vn("find-previous-match",b.arrowUp,m("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),Ale=vn("find-next-match",b.arrowDown,m("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),Ile=m("label.find","Find"),Nle=m("placeholder.find","Find"),Ple=m("label.previousMatchButton","Previous Match"),Rle=m("label.nextMatchButton","Next Match"),Fle=m("label.toggleSelectionFind","Find in Selection"),Ole=m("label.closeButton","Close"),Vle=m("label.replace","Replace"),Hle=m("placeholder.replace","Replace"),Ble=m("label.replaceButton","Replace"),Wle=m("label.replaceAllButton","Replace All"),Ule=m("label.toggleReplaceButton","Toggle Replace"),Gle=m("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",dc),zle=m("label.matchesLocation","{0} of {1}"),WF=m("label.noResults","No results"),Nr=419,Kle=275,jle=Kle-54;let qp=69;const $le=33,UF="ctrlEnterReplaceAll.windows.donotask",GF=Xe?256:2048;class I0{constructor(e){this.afterLineNumber=e,this.heightInPx=$le,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}u(I0,"FindWidgetViewZone");function zF(o,e,t){const n=!!e.match(/\n/);if(t&&n&&t.selectionStart>0){o.stopPropagation();return}}u(zF,"stopPropagationForMultiLineUpwards");function KF(o,e,t){const n=!!e.match(/\n/);if(t&&n&&t.selectionEnd<t.value.length){o.stopPropagation();return}}u(KF,"stopPropagationForMultiLineDownwards");class _v extends lo{constructor(e,t,n,i,s,r,a,l,c){super(),this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=n,this._contextViewProvider=i,this._keybindingService=s,this._contextKeyService=r,this._storageService=l,this._notificationService=c,this._ctrlEnterReplaceAllWarningPrompted=!!l.getBoolean(UF,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new pr(500),this._register(He(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(d=>this._onStateChanged(d))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(d=>{if(d.hasChanged(83)&&(this._codeEditor.getOption(83)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),d.hasChanged(133)&&this._tryUpdateWidgetWidth(),d.hasChanged(2)&&this.updateAccessibilitySupport(),d.hasChanged(37)){const h=this._codeEditor.getOption(37).addExtraSpaceOnTop;h&&!this._viewZone&&(this._viewZone=new I0(0),this._showViewZone()),!h&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(()=>xle(this,void 0,void 0,function*(){if(this._isVisible){const d=yield this._controller.getGlobalBufferTerm();d&&d!==this._state.searchString&&(this._state.change({searchString:d},!1),this._findInput.select())}}))),this._findInputFocused=TS.bindTo(r),this._findFocusTracker=this._register(yu(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=BN.bindTo(r),this._replaceFocusTracker=this._register(yu(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(37).addExtraSpaceOnTop&&(this._viewZone=new I0(0)),this._applyTheme(a.getColorTheme()),this._register(a.onDidColorThemeChange(this._applyTheme.bind(this))),this._register(this._codeEditor.onDidChangeModel(()=>{this._isVisible&&(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(d=>{if(d.scrollTopChanged){this._layoutViewZone();return}setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return _v.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?!this._codeEditor.getOption(83)&&!this._isReplaceVisible&&(this._isReplaceVisible=!0,this._replaceInput.width=bo(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){const t=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,Ie)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){this._matchesCount.style.minWidth=qp+"px",this._state.matchesCount>=dc?this._matchesCount.title=Gle:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild);let e;if(this._state.matchesCount>0){let t=String(this._state.matchesCount);this._state.matchesCount>=dc&&(t+="+");let n=String(this._state.matchesPosition);n==="0"&&(n="?"),e=$s(zle,n,t)}else e=WF;this._matchesCount.appendChild(document.createTextNode(e)),Zn(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),qp=Math.max(qp,this._matchesCount.clientWidth)}_getAriaLabel(e,t,n){if(e===WF)return n===""?m("ariaSearchNoResultEmpty","{0} found",e):m("ariaSearchNoResult","{0} found for '{1}'",e,n);if(t){const i=m("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,n,t.startLineNumber+":"+t.startColumn),s=this._codeEditor.getModel();return s&&t.startLineNumber<=s.getLineCount()&&t.startLineNumber>=1?`${s.getLineContent(t.startLineNumber)}, ${i}`:i}return m("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,n)}_updateToggleSelectionFindButton(){const e=this._codeEditor.getSelection(),t=e?e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn:!1,n=this._toggleSelectionFind.checked;this._isVisible&&(n||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);const e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);const n=!this._codeEditor.getOption(83);this._toggleReplaceBtn.setEnabled(this._isVisible&&n)}_reveal(){if(this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(37).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":{const n=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=n;break}}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(37).seedSearchStringFromSelection&&e){const n=this._codeEditor.getDomNode();if(n){const i=li(n),s=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),r=i.left+(s?s.left:0),a=s?s.top:0;if(this._viewZone&&a<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);const l=DV(this._domNode).left;r>l&&(t=!1);const c=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition());i.left+(c?c.left:0)>l&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach(t=>{clearTimeout(t)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){if(!this._codeEditor.getOption(37).addExtraSpaceOnTop){this._removeViewZone();return}if(!this._isVisible)return;const n=this._viewZone;this._viewZoneId!==void 0||!n||this._codeEditor.changeViewZones(i=>{n.heightInPx=this._getHeight(),this._viewZoneId=i.addZone(n),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+n.heightInPx)})}_showViewZone(e=!0){if(!this._isVisible||!this._codeEditor.getOption(37).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new I0(0));const n=this._viewZone;this._codeEditor.changeViewZones(i=>{if(this._viewZoneId!==void 0){const s=this._getHeight();if(s===n.heightInPx)return;const r=s-n.heightInPx;n.heightInPx=s,i.layoutZone(this._viewZoneId),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+r);return}else{let s=this._getHeight();if(s-=this._codeEditor.getOption(77).top,s<=0)return;n.heightInPx=s,this._viewZoneId=i.addZone(n),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+s)}})}_removeViewZone(){this._codeEditor.changeViewZones(e=>{this._viewZoneId!==void 0&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_applyTheme(e){const t={inputActiveOptionBorder:e.getColor(d1),inputActiveOptionBackground:e.getColor(u1),inputActiveOptionForeground:e.getColor(h1),inputBackground:e.getColor(iy),inputForeground:e.getColor(sy),inputBorder:e.getColor(oy),inputValidationInfoBackground:e.getColor(bA),inputValidationInfoForeground:e.getColor(_A),inputValidationInfoBorder:e.getColor(vA),inputValidationWarningBackground:e.getColor(CA),inputValidationWarningForeground:e.getColor(wA),inputValidationWarningBorder:e.getColor(yA),inputValidationErrorBackground:e.getColor(SA),inputValidationErrorForeground:e.getColor(TA),inputValidationErrorBorder:e.getColor(LA)};this._findInput.style(t),this._replaceInput.style(t),this._toggleSelectionFind.style(t)}_tryUpdateWidgetWidth(){if(!this._isVisible||!uA(this._domNode))return;const e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0){this._domNode.classList.add("hiddenEditor");return}else this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const n=e.width,i=e.minimap.minimapWidth;let s=!1,r=!1,a=!1;if(this._resized&&bo(this._domNode)>Nr){this._domNode.style.maxWidth=`${n-28-i-15}px`,this._replaceInput.width=bo(this._findInput.domNode);return}if(Nr+28+i>=n&&(r=!0),Nr+28+i-qp>=n&&(a=!0),Nr+28+i-qp>=n+50&&(s=!0),this._domNode.classList.toggle("collapsed-find-widget",s),this._domNode.classList.toggle("narrow-find-widget",a),this._domNode.classList.toggle("reduced-find-widget",r),!a&&!s&&(this._domNode.style.maxWidth=`${n-28-i-15}px`),this._resized){this._findInput.inputBox.layout();const l=this._findInput.inputBox.element.clientWidth;l>0&&(this._replaceInput.width=l)}else this._isReplaceVisible&&(this._replaceInput.width=bo(this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){const e=this._getHeight();return this._cachedHeight!==null&&this._cachedHeight===e?!1:(this._cachedHeight=e,this._domNode.style.height=`${e}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){const e=this._codeEditor.getSelections();e.map(t=>{t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));const n=this._state.currentMatch;return t.startLineNumber!==t.endLineNumber&&!L.equalsRange(t,n)?t:null}).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){if(e.equals(GF|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{this._findInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return zF(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"));if(e.equals(18))return KF(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"))}_onReplaceInputKeyDown(e){if(e.equals(GF|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{ei&&cr&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(m("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(UF,!0,0,0)),this._replaceInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(1026)){this._findInput.focus(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return zF(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"));if(e.equals(18))return KF(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"))}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){const t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}_buildDomNode(){this._findInput=this._register(new TM(null,this._contextViewProvider,{width:jle,label:Ile,placeholder:Nle,appendCaseSensitiveLabel:this._keybindingLabelFor(kt.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(kt.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(kt.ToggleRegexCommand),validation:l=>{if(l.length===0||!this._findInput.getRegex())return null;try{return new RegExp(l,"gu"),null}catch(c){return{content:c.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>VF(this._keybindingService)},this._contextKeyService,!0)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(l=>this._onFindInputKeyDown(l))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(l=>{l.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),l.preventDefault())})),this._register(this._findInput.onRegexKeyDown(l=>{l.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),l.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(l=>{this._tryUpdateHeight()&&this._showViewZone()})),hi&&this._register(this._findInput.onMouseDown(l=>this._onFindInputMouseDown(l))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new yd({label:Ple+this._keybindingLabelFor(kt.PreviousMatchFindAction),icon:Dle,onTrigger:()=>{this._codeEditor.getAction(kt.PreviousMatchFindAction).run().then(void 0,Ie)}})),this._nextBtn=this._register(new yd({label:Rle+this._keybindingLabelFor(kt.NextMatchFindAction),icon:Ale,onTrigger:()=>{this._codeEditor.getAction(kt.NextMatchFindAction).run().then(void 0,Ie)}}));const n=document.createElement("div");n.className="find-part",n.appendChild(this._findInput.domNode);const i=document.createElement("div");i.className="find-actions",n.appendChild(i),i.appendChild(this._matchesCount),i.appendChild(this._prevBtn.domNode),i.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new pp({icon:Ele,title:Fle+this._keybindingLabelFor(kt.ToggleSearchScopeCommand),isChecked:!1})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){const l=this._codeEditor.getSelections();l.map(c=>(c.endColumn===1&&c.endLineNumber>c.startLineNumber&&(c=c.setEndPosition(c.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(c.endLineNumber-1))),c.isEmpty()?null:c)).filter(c=>!!c),l.length&&this._state.change({searchScope:l},!0)}}else this._state.change({searchScope:null},!0)})),i.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new yd({label:Ole+this._keybindingLabelFor(kt.CloseFindWidgetCommand),icon:B9,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:l=>{l.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),l.preventDefault())}})),i.appendChild(this._closeBtn.domNode),this._replaceInput=this._register(new LM(null,void 0,{label:Vle,placeholder:Hle,appendPreserveCaseLabel:this._keybindingLabelFor(kt.TogglePreserveCaseCommand),history:[],flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>VF(this._keybindingService)},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(l=>this._onReplaceInputKeyDown(l))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(l=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(l=>{l.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),l.preventDefault())})),this._replaceBtn=this._register(new yd({label:Ble+this._keybindingLabelFor(kt.ReplaceOneAction),icon:kle,onTrigger:()=>{this._controller.replace()},onKeyDown:l=>{l.equals(1026)&&(this._closeBtn.focus(),l.preventDefault())}})),this._replaceAllBtn=this._register(new yd({label:Wle+this._keybindingLabelFor(kt.ReplaceAllAction),icon:Mle,onTrigger:()=>{this._controller.replaceAll()}}));const s=document.createElement("div");s.className="replace-part",s.appendChild(this._replaceInput.domNode);const r=document.createElement("div");r.className="replace-actions",s.appendChild(r),r.appendChild(this._replaceBtn.domNode),r.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new yd({label:Ule,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=bo(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.style.width=`${Nr}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(n),this._domNode.appendChild(s),this._resizeSash=new Yn(this._domNode,this,{orientation:0,size:2}),this._resized=!1;let a=Nr;this._register(this._resizeSash.onDidStart(()=>{a=bo(this._domNode)})),this._register(this._resizeSash.onDidChange(l=>{this._resized=!0;const c=a+l.startX-l.currentX;if(c<Nr)return;const d=parseFloat(Yw(this._domNode).maxWidth)||0;c>d||(this._domNode.style.width=`${c}px`,this._isReplaceVisible&&(this._replaceInput.width=bo(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{const l=bo(this._domNode);if(l<Nr)return;let c=Nr;if(!this._resized||l===Nr){const d=this._codeEditor.getLayoutInfo();c=d.width-28-d.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${c}px`,this._isReplaceVisible&&(this._replaceInput.width=bo(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){const e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(e!==2)}}u(_v,"FindWidget");_v.ID="editor.contrib.findWidget";class yd extends lo{constructor(e){super(),this._opts=e;let t="button";this._opts.className&&(t=t+" "+this._opts.className),this._opts.icon&&(t=t+" "+ct.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.title=this._opts.label,this._domNode.tabIndex=0,this._domNode.className=t,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this.onclick(this._domNode,n=>{this._opts.onTrigger(),n.preventDefault()}),this.onkeydown(this._domNode,n=>{var i,s;if(n.equals(10)||n.equals(3)){this._opts.onTrigger(),n.preventDefault();return}(s=(i=this._opts).onKeyDown)===null||s===void 0||s.call(i,n)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...ct.asClassNameArray(HF)),this._domNode.classList.add(...ct.asClassNameArray(BF))):(this._domNode.classList.remove(...ct.asClassNameArray(BF)),this._domNode.classList.add(...ct.asClassNameArray(HF)))}}u(yd,"SimpleButton");At((o,e)=>{const t=u((p,_)=>{_&&e.addRule(`.monaco-editor ${p} { background-color: ${_}; }`)},"addBackgroundColorRule");t(".findMatch",o.getColor(Za)),t(".currentFindMatch",o.getColor(yZ)),t(".findScope",o.getColor(SZ));const n=o.getColor(dn);t(".find-widget",n);const i=o.getColor(rr);i&&e.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${i}; }`);const s=o.getColor(Ud);s&&e.addRule(`.monaco-editor .findMatch { border: 1px ${ui(o.type)?"dotted":"solid"} ${s}; box-sizing: border-box; }`);const r=o.getColor(TZ);r&&e.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${r}; padding: 1px; box-sizing: border-box; }`);const a=o.getColor(LZ);a&&e.addRule(`.monaco-editor .findScope { border: 1px ${ui(o.type)?"dashed":"solid"} ${a}; }`);const l=o.getColor(Be);l&&e.addRule(`.monaco-editor .find-widget { border: 1px solid ${l}; }`);const c=o.getColor(ar);c&&e.addRule(`.monaco-editor .find-widget { color: ${c}; }`);const d=o.getColor(iZ);d&&e.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${d}; }`);const h=o.getColor(uZ);if(h)e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${h}; }`);else{const p=o.getColor(Ya);p&&e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${p}; }`)}const g=o.getColor(tE);g&&e.addRule(`
		.monaco-editor .find-widget .button:not(.disabled):hover,
		.monaco-editor .find-widget .codicon-find-selection:hover {
			background-color: ${g} !important;
		}
	`);const f=o.getColor(Ys);f&&e.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${f}; }`)});var dG=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Hr=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},zu=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const qle=524288;function zM(o,e="single",t=!1){if(!o.hasModel())return null;const n=o.getSelection();if(e==="single"&&n.startLineNumber===n.endLineNumber||e==="multiple"){if(n.isEmpty()){const i=o.getConfiguredWordAtPosition(n.getStartPosition());if(i&&t===!1)return i.word}else if(o.getModel().getValueLengthInRange(n)<qle)return o.getModel().getValueInRange(n)}return null}u(zM,"getSelectionSearchString");let us=u(class uG extends U{constructor(e,t,n,i){super(),this._editor=e,this._findWidgetVisible=nd.bindTo(t),this._contextKeyService=t,this._storageService=n,this._clipboardService=i,this._updateHistoryDelayer=new pr(500),this._state=this._register(new cG),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(s=>this._onStateChanged(s))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{const s=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),s&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(37).loop})}))}get editor(){return this._editor}static get(e){return e.getContribution(uG.ID)}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,0),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,0),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,0),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,0)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!TS.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){const e=this._editor.getSelections();e.map(t=>(t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t)).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=As(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}_start(e,t){return zu(this,void 0,void 0,function*(){if(this.disposeModel(),!this._editor.hasModel())return;const n=Object.assign(Object.assign({},t),{isRevealed:!0});if(e.seedSearchStringFromSelection==="single"){const i=zM(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);i&&(this._state.isRegex?n.searchString=As(i):n.searchString=i)}else if(e.seedSearchStringFromSelection==="multiple"&&!e.updateSearchScope){const i=zM(this._editor,e.seedSearchStringFromSelection);i&&(n.searchString=i)}if(!n.searchString&&e.seedSearchStringFromGlobalClipboard){const i=yield this.getGlobalBufferTerm();if(!this._editor.hasModel())return;i&&(n.searchString=i)}if(e.forceRevealReplace||n.isReplaceRevealed?n.isReplaceRevealed=!0:this._findWidgetVisible.get()||(n.isReplaceRevealed=!1),e.updateSearchScope){const i=this._editor.getSelections();i.some(s=>!s.isEmpty())&&(n.searchScope=i)}n.loop=e.loop,this._state.change(n,!1),this._model||(this._model=new Kg(this._editor,this._state))})}start(e,t){return this._start(e,t)}moveToNextMatch(){return this._model?(this._model.moveToNextMatch(),!0):!1}moveToPrevMatch(){return this._model?(this._model.moveToPrevMatch(),!0):!1}replace(){return this._model?(this._model.replace(),!0):!1}replaceAll(){return this._model?(this._model.replaceAll(),!0):!1}selectAllMatches(){return this._model?(this._model.selectAllMatches(),this._editor.focus(),!0):!1}getGlobalBufferTerm(){return zu(this,void 0,void 0,function*(){return this._editor.getOption(37).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""})}setGlobalBufferTerm(e){this._editor.getOption(37).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}},"CommonFindController");us.ID="editor.contrib.findController";us=dG([Hr(1,De),Hr(2,No),Hr(3,Nl)],us);let KM=u(class extends us{constructor(e,t,n,i,s,r,a,l){super(e,n,a,l),this._contextViewService=t,this._keybindingService=i,this._themeService=s,this._notificationService=r,this._widget=null,this._findOptionsWidget=null}_start(e,t){const n=Object.create(null,{_start:{get:()=>super._start}});return zu(this,void 0,void 0,function*(){this._widget||this._createFindWidget();const i=this._editor.getSelection();let s=!1;switch(this._editor.getOption(37).autoFindInSelection){case"always":s=!0;break;case"never":s=!1;break;case"multiline":{s=!!i&&i.startLineNumber!==i.endLineNumber;break}}e.updateSearchScope=e.updateSearchScope||s,yield n._start.call(this,e,t),this._widget&&(e.shouldFocus===2?this._widget.focusReplaceInput():e.shouldFocus===1&&this._widget.focusFindInput())})}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new _v(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new bv(this._editor,this._state,this._keybindingService,this._themeService))}},"FindController");KM=dG([Hr(1,fh),Hr(2,De),Hr(3,Cn),Hr(4,wt),Hr(5,gn),Hr(6,No),Hr(7,Nl)],KM);const Yle=jV(new pA({id:kt.StartFindAction,label:m("startFindAction","Find"),alias:"Find",precondition:oe.or(A.focus,oe.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:P.MenubarEditMenu,group:"3_find",title:m({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));Yle.addImplementation(0,(o,e,t)=>{const n=us.get(e);return n?n.start({forceRevealReplace:!1,seedSearchStringFromSelection:e.getOption(37).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(37).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(37).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(37).loop}):!1});const Xle={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},regex:{type:"boolean"},regexOverride:{type:"number",description:m("actions.find.isRegexOverride",`Overrides "Use Regular Expression" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},wholeWord:{type:"boolean"},wholeWordOverride:{type:"number",description:m("actions.find.wholeWordOverride",`Overrides "Match Whole Word" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},matchCase:{type:"boolean"},matchCaseOverride:{type:"number",description:m("actions.find.matchCaseOverride",`Overrides "Math Case" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},preserveCase:{type:"boolean"},preserveCaseOverride:{type:"number",description:m("actions.find.preserveCaseOverride",`Overrides "Preserve Case" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},findInSelection:{type:"boolean"}}}}]};class hG extends de{constructor(){super({id:kt.StartFindWithArgs,label:m("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},description:Xle})}run(e,t,n){return zu(this,void 0,void 0,function*(){const i=us.get(t);if(i){const s=n?{searchString:n.searchString,replaceString:n.replaceString,isReplaceRevealed:n.replaceString!==void 0,isRegex:n.isRegex,wholeWord:n.matchWholeWord,matchCase:n.isCaseSensitive,preserveCase:n.preserveCase}:{};yield i.start({forceRevealReplace:!1,seedSearchStringFromSelection:i.getState().searchString.length===0&&t.getOption(37).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(37).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:n?.findInSelection||!1,loop:t.getOption(37).loop},s),i.setGlobalBufferTerm(i.getState().searchString)}})}}u(hG,"StartFindWithArgsAction");class gG extends de{constructor(){super({id:kt.StartFindWithSelection,label:m("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}run(e,t){return zu(this,void 0,void 0,function*(){const n=us.get(t);n&&(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(37).loop}),n.setGlobalBufferTerm(n.getState().searchString))})}}u(gG,"StartFindWithSelectionAction");class WN extends de{run(e,t){return zu(this,void 0,void 0,function*(){const n=us.get(t);n&&!this._run(n)&&(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:n.getState().searchString.length===0&&t.getOption(37).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(37).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(37).loop}),this._run(n))})}}u(WN,"MatchFindAction");class fG extends WN{constructor(){super({id:kt.NextMatchFindAction,label:m("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:A.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:oe.and(A.focus,TS),primary:3,weight:100}]})}_run(e){return e.moveToNextMatch()?(e.editor.pushUndoStop(),!0):!1}}u(fG,"NextMatchFindAction");class pG extends WN{constructor(){super({id:kt.PreviousMatchFindAction,label:m("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:A.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:oe.and(A.focus,TS),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}}u(pG,"PreviousMatchFindAction");class UN extends de{run(e,t){return zu(this,void 0,void 0,function*(){const n=us.get(t);if(!n)return;const i=t.getOption(37).seedSearchStringFromSelection==="selection";let s=null;t.getOption(37).seedSearchStringFromSelection!=="never"&&(s=zM(t,"single",i)),s&&n.setSearchString(s),this._run(n)||(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:t.getOption(37).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:i,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(37).loop}),this._run(n))})}}u(UN,"SelectionMatchFindAction");class mG extends UN{constructor(){super({id:kt.NextSelectionMatchFindAction,label:m("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}}u(mG,"NextSelectionMatchFindAction");class bG extends UN{constructor(){super({id:kt.PreviousSelectionMatchFindAction,label:m("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}}u(bG,"PreviousSelectionMatchFindAction");const Zle=jV(new pA({id:kt.StartFindReplaceAction,label:m("startReplace","Replace"),alias:"Replace",precondition:oe.or(A.focus,oe.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:P.MenubarEditMenu,group:"3_find",title:m({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));Zle.addImplementation(0,(o,e,t)=>{if(!e.hasModel()||e.getOption(83))return!1;const n=us.get(e);if(!n)return!1;const i=e.getSelection(),s=n.isFindInputFocused(),r=!i.isEmpty()&&i.startLineNumber===i.endLineNumber&&e.getOption(37).seedSearchStringFromSelection!=="never"&&!s,a=s||r?2:1;return n.start({forceRevealReplace:!0,seedSearchStringFromSelection:r?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(37).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(37).seedSearchStringFromSelection!=="never",shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(37).loop})});it(us.ID,KM);ie(hG);ie(gG);ie(fG);ie(pG);ie(mG);ie(bG);const Er=Ln.bindToContribution(us.get);te(new Er({id:kt.CloseFindWidgetCommand,precondition:nd,handler:o=>o.closeFindWidget(),kbOpts:{weight:100+5,kbExpr:oe.and(A.focus,oe.not("isComposing")),primary:9,secondary:[1033]}}));te(new Er({id:kt.ToggleCaseSensitiveCommand,precondition:void 0,handler:o=>o.toggleCaseSensitive(),kbOpts:{weight:100+5,kbExpr:A.focus,primary:DC.primary,mac:DC.mac,win:DC.win,linux:DC.linux}}));te(new Er({id:kt.ToggleWholeWordCommand,precondition:void 0,handler:o=>o.toggleWholeWords(),kbOpts:{weight:100+5,kbExpr:A.focus,primary:AC.primary,mac:AC.mac,win:AC.win,linux:AC.linux}}));te(new Er({id:kt.ToggleRegexCommand,precondition:void 0,handler:o=>o.toggleRegex(),kbOpts:{weight:100+5,kbExpr:A.focus,primary:IC.primary,mac:IC.mac,win:IC.win,linux:IC.linux}}));te(new Er({id:kt.ToggleSearchScopeCommand,precondition:void 0,handler:o=>o.toggleSearchScope(),kbOpts:{weight:100+5,kbExpr:A.focus,primary:NC.primary,mac:NC.mac,win:NC.win,linux:NC.linux}}));te(new Er({id:kt.TogglePreserveCaseCommand,precondition:void 0,handler:o=>o.togglePreserveCase(),kbOpts:{weight:100+5,kbExpr:A.focus,primary:PC.primary,mac:PC.mac,win:PC.win,linux:PC.linux}}));te(new Er({id:kt.ReplaceOneAction,precondition:nd,handler:o=>o.replace(),kbOpts:{weight:100+5,kbExpr:A.focus,primary:3094}}));te(new Er({id:kt.ReplaceOneAction,precondition:nd,handler:o=>o.replace(),kbOpts:{weight:100+5,kbExpr:oe.and(A.focus,BN),primary:3}}));te(new Er({id:kt.ReplaceAllAction,precondition:nd,handler:o=>o.replaceAll(),kbOpts:{weight:100+5,kbExpr:A.focus,primary:2563}}));te(new Er({id:kt.ReplaceAllAction,precondition:nd,handler:o=>o.replaceAll(),kbOpts:{weight:100+5,kbExpr:oe.and(A.focus,BN),primary:void 0,mac:{primary:2051}}}));te(new Er({id:kt.SelectAllMatchesAction,precondition:nd,handler:o=>o.selectAllMatches(),kbOpts:{weight:100+5,kbExpr:A.focus,primary:515}}));const jF=65535,Go=16777215,$F=4278190080;class N0{constructor(e){const t=Math.ceil(e/32);this._states=new Uint32Array(t)}get(e){const t=e/32|0,n=e%32;return(this._states[t]&1<<n)!==0}set(e,t){const n=e/32|0,i=e%32,s=this._states[n];t?this._states[n]=s|1<<i:this._states[n]=s&~(1<<i)}}u(N0,"BitField");class ns{constructor(e,t,n){if(this.sourceAbbr={[0]:" ",[1]:"u",[2]:"r"},e.length!==t.length||e.length>jF)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new N0(e.length),this._userDefinedStates=new N0(e.length),this._recoveredStates=new N0(e.length),this._types=n,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;const e=[],t=u((n,i)=>{const s=e[e.length-1];return this.getStartLineNumber(s)<=n&&this.getEndLineNumber(s)>=i},"isInsideLast");for(let n=0,i=this._startIndexes.length;n<i;n++){const s=this._startIndexes[n],r=this._endIndexes[n];if(s>Go||r>Go)throw new Error("startLineNumber or endLineNumber must not exceed "+Go);for(;e.length>0&&!t(s,r);)e.pop();const a=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=s+((a&255)<<24),this._endIndexes[n]=r+((a&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&Go}getEndLineNumber(e){return this._endIndexes[e]&Go}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){return this._collapseStates.get(e)}setCollapsed(e,t){this._collapseStates.set(e,t)}isUserDefined(e){return this._userDefinedStates.get(e)}setUserDefined(e,t){return this._userDefinedStates.set(e,t)}isRecovered(e){return this._recoveredStates.get(e)}setRecovered(e,t){return this._recoveredStates.set(e,t)}getSource(e){return this.isUserDefined(e)?1:this.isRecovered(e)?2:0}setSource(e,t){t===1?(this.setUserDefined(e,!0),this.setRecovered(e,!1)):t===2?(this.setUserDefined(e,!1),this.setRecovered(e,!0)):(this.setUserDefined(e,!1),this.setRecovered(e,!1))}setCollapsedAllOfType(e,t){let n=!1;if(this._types)for(let i=0;i<this._types.length;i++)this._types[i]===e&&(this.setCollapsed(i,t),n=!0);return n}toRegion(e){return new _G(this,e)}getParentIndex(e){this.ensureParentIndices();const t=((this._startIndexes[e]&$F)>>>24)+((this._endIndexes[e]&$F)>>>16);return t===jF?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,n=this._startIndexes.length;if(n===0)return-1;for(;t<n;){const i=Math.floor((t+n)/2);e<this.getStartLineNumber(i)?n=i:t=i+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);t!==-1;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){const e=[];for(let t=0;t<this.length;t++)e[t]=`[${this.sourceAbbr[this.getSource(t)]}${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}toFoldRange(e){return{startLineNumber:this._startIndexes[e]&Go,endLineNumber:this._endIndexes[e]&Go,type:this._types?this._types[e]:void 0,isCollapsed:this.isCollapsed(e),source:this.getSource(e)}}static fromFoldRanges(e){const t=e.length,n=new Uint32Array(t),i=new Uint32Array(t);let s=[],r=!1;for(let l=0;l<t;l++){const c=e[l];n[l]=c.startLineNumber,i[l]=c.endLineNumber,s.push(c.type),c.type&&(r=!0)}r||(s=void 0);const a=new ns(n,i,s);for(let l=0;l<t;l++)e[l].isCollapsed&&a.setCollapsed(l,!0),a.setSource(l,e[l].source);return a}static sanitizeAndMerge(e,t,n){n=n??Number.MAX_VALUE;const i=u((_,v)=>Array.isArray(_)?C=>C<v?_[C]:void 0:C=>C<v?_.toFoldRange(C):void 0,"getIndexedFunction"),s=i(e,e.length),r=i(t,t.length);let a=0,l=0,c=s(0),d=r(0);const h=[];let g,f=0;const p=[];for(;c||d;){let _;if(d&&(!c||c.startLineNumber>=d.startLineNumber))c&&c.startLineNumber===d.startLineNumber?(d.source===1?_=d:(_=c,_.isCollapsed=d.isCollapsed&&c.endLineNumber===d.endLineNumber,_.source=0),c=s(++a)):(_=d,d.isCollapsed&&d.source===0&&(_.source=2)),d=r(++l);else{let v=l,C=d;for(;;){if(!C||C.startLineNumber>c.endLineNumber){_=c;break}if(C.source===1&&C.endLineNumber>c.endLineNumber)break;C=r(++v)}c=s(++a)}if(_){for(;g&&g.endLineNumber<_.startLineNumber;)g=h.pop();_.endLineNumber>_.startLineNumber&&_.startLineNumber>f&&_.endLineNumber<=n&&(!g||g.endLineNumber>=_.endLineNumber)&&(p.push(_),f=_.startLineNumber,g&&h.push(g),g=_)}}return p}}u(ns,"FoldingRegions");class _G{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}u(_G,"FoldingRegion");class vG{constructor(e,t){this._updateEventEmitter=new R,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new ns(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[]}get regions(){return this._regions}get textModel(){return this._textModel}toggleCollapseState(e){if(!e.length)return;e=e.sort((n,i)=>n.regionIndex-i.regionIndex);const t={};this._decorationProvider.changeDecorations(n=>{let i=0,s=-1,r=-1;const a=u(l=>{for(;i<l;){const c=this._regions.getEndLineNumber(i),d=this._regions.isCollapsed(i);if(c<=s){const h=this.regions.getSource(i)!==0;n.changeDecorationOptions(this._editorDecorationIds[i],this._decorationProvider.getDecorationOption(d,c<=r,h))}d&&c>r&&(r=c),i++}},"updateDecorationsUntil");for(const l of e){const c=l.regionIndex,d=this._editorDecorationIds[c];if(d&&!t[d]){t[d]=!0,a(c);const h=!this._regions.isCollapsed(c);this._regions.setCollapsed(c,h),s=Math.max(s,this._regions.getEndLineNumber(c))}}a(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}removeManualRanges(e){const t=new Array,n=u(i=>{for(const s of e)if(!(s.startLineNumber>i.endLineNumber||i.startLineNumber>s.endLineNumber))return!0;return!1},"intersects");for(let i=0;i<this._regions.length;i++){const s=this._regions.toFoldRange(i);(s.source===0||!n(s))&&t.push(s)}this.updatePost(ns.fromFoldRanges(t))}update(e,t=[]){const n=this._currentFoldedOrManualRanges(t),i=ns.sanitizeAndMerge(e,n,this._textModel.getLineCount());this.updatePost(ns.fromFoldRanges(i))}updatePost(e){const t=[];let n=-1;for(let i=0,s=e.length;i<s;i++){const r=e.getStartLineNumber(i),a=e.getEndLineNumber(i),l=e.isCollapsed(i),c=e.getSource(i)!==0,d={startLineNumber:r,startColumn:this._textModel.getLineMaxColumn(r),endLineNumber:a,endColumn:this._textModel.getLineMaxColumn(a)+1};t.push({range:d,options:this._decorationProvider.getDecorationOption(l,a<=n,c)}),l&&a>n&&(n=a)}this._decorationProvider.changeDecorations(i=>this._editorDecorationIds=i.deltaDecorations(this._editorDecorationIds,t)),this._regions=e,this._updateEventEmitter.fire({model:this})}_currentFoldedOrManualRanges(e=[]){const t=u((i,s)=>{for(const r of e)if(i<r&&r<=s)return!0;return!1},"isBlocked"),n=[];for(let i=0,s=this._regions.length;i<s;i++){let r=this.regions.isCollapsed(i);const a=this.regions.getSource(i);if(r||a!==0){const l=this._regions.toFoldRange(i),c=this._textModel.getDecorationRange(this._editorDecorationIds[i]);c&&(r&&(t(c.startLineNumber,c.endLineNumber)||c.endLineNumber-c.startLineNumber!==l.endLineNumber-l.startLineNumber)&&(r=!1),n.push({startLineNumber:c.startLineNumber,endLineNumber:c.endLineNumber,type:l.type,isCollapsed:r,source:a}))}}return n}getMemento(){const e=this._currentFoldedOrManualRanges(),t=[];for(let n=0,i=e.length;n<i;n++){const s=e[n],r=this._getLinesChecksum(s.startLineNumber+1,s.endLineNumber);t.push({startLineNumber:s.startLineNumber,endLineNumber:s.endLineNumber,isCollapsed:s.isCollapsed,source:s.source,checksum:r})}return t.length>0?t:void 0}applyMemento(e){var t,n;if(!Array.isArray(e))return;const i=[],s=this._textModel.getLineCount();for(const a of e){if(a.startLineNumber>=a.endLineNumber||a.startLineNumber<1||a.endLineNumber>s)continue;const l=this._getLinesChecksum(a.startLineNumber+1,a.endLineNumber);(!a.checksum||l===a.checksum)&&i.push({startLineNumber:a.startLineNumber,endLineNumber:a.endLineNumber,type:void 0,isCollapsed:(t=a.isCollapsed)!==null&&t!==void 0?t:!0,source:(n=a.source)!==null&&n!==void 0?n:0})}const r=ns.sanitizeAndMerge(this._regions,i,s);this.updatePost(ns.fromFoldRanges(r))}_getLinesChecksum(e,t){return nA(this._textModel.getLineContent(e)+this._textModel.getLineContent(t))%1e6}dispose(){this._decorationProvider.removeDecorations(this._editorDecorationIds)}getAllRegionsAtLine(e,t){const n=[];if(this._regions){let i=this._regions.findRange(e),s=1;for(;i>=0;){const r=this._regions.toRegion(i);(!t||t(r,s))&&n.push(r),s++,i=r.parentIndex}}return n}getRegionAtLine(e){if(this._regions){const t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){const n=[],i=e?e.regionIndex+1:0,s=e?e.endLineNumber:Number.MAX_VALUE;if(t&&t.length===2){const r=[];for(let a=i,l=this._regions.length;a<l;a++){const c=this._regions.toRegion(a);if(this._regions.getStartLineNumber(a)<s){for(;r.length>0&&!c.containedBy(r[r.length-1]);)r.pop();r.push(c),t(c,r.length)&&n.push(c)}else break}}else for(let r=i,a=this._regions.length;r<a;r++){const l=this._regions.toRegion(r);if(this._regions.getStartLineNumber(r)<s)(!t||t(l))&&n.push(l);else break}return n}}u(vG,"FoldingModel");function Jle(o,e,t){const n=[];for(const i of t){const s=o.getRegionAtLine(i);if(s){const r=!s.isCollapsed;if(n.push(s),e>1){const a=o.getRegionsInside(s,(l,c)=>l.isCollapsed!==r&&c<e);n.push(...a)}}}o.toggleCollapseState(n)}u(Jle,"toggleCollapseState");function yp(o,e,t=Number.MAX_VALUE,n){const i=[];if(n&&n.length>0)for(const s of n){const r=o.getRegionAtLine(s);if(r&&(r.isCollapsed!==e&&i.push(r),t>1)){const a=o.getRegionsInside(r,(l,c)=>l.isCollapsed!==e&&c<t);i.push(...a)}}else{const s=o.getRegionsInside(null,(r,a)=>r.isCollapsed!==e&&a<t);i.push(...s)}o.toggleCollapseState(i)}u(yp,"setCollapseStateLevelsDown");function CG(o,e,t,n){const i=[];for(const s of n){const r=o.getAllRegionsAtLine(s,(a,l)=>a.isCollapsed!==e&&l<=t);i.push(...r)}o.toggleCollapseState(i)}u(CG,"setCollapseStateLevelsUp");function Qle(o,e,t){const n=[];for(const i of t){const s=o.getAllRegionsAtLine(i,r=>r.isCollapsed!==e);s.length>0&&n.push(s[0])}o.toggleCollapseState(n)}u(Qle,"setCollapseStateUp");function ece(o,e,t,n){const i=u((r,a)=>a===e&&r.isCollapsed!==t&&!n.some(l=>r.containsLine(l)),"filter"),s=o.getRegionsInside(null,i);o.toggleCollapseState(s)}u(ece,"setCollapseStateAtLevel");function wG(o,e,t){const n=[];for(const r of t){const a=o.getAllRegionsAtLine(r,void 0);a.length>0&&n.push(a[0])}const i=u(r=>n.every(a=>!a.containedBy(r)&&!r.containedBy(a))&&r.isCollapsed!==e,"filter"),s=o.getRegionsInside(null,i);o.toggleCollapseState(s)}u(wG,"setCollapseStateForRest");function GN(o,e,t){const n=o.textModel,i=o.regions,s=[];for(let r=i.length-1;r>=0;r--)if(t!==i.isCollapsed(r)){const a=i.getStartLineNumber(r);e.test(n.getLineContent(a))&&s.push(i.toRegion(r))}o.toggleCollapseState(s)}u(GN,"setCollapseStateForMatchingLines");function zN(o,e,t){const n=o.regions,i=[];for(let s=n.length-1;s>=0;s--)t!==n.isCollapsed(s)&&e===n.getType(s)&&i.push(n.toRegion(s));o.toggleCollapseState(i)}u(zN,"setCollapseStateForType");function tce(o,e){let t=null;const n=e.getRegionAtLine(o);if(n!==null&&(t=n.startLineNumber,o===t)){const i=n.parentIndex;i!==-1?t=e.regions.getStartLineNumber(i):t=null}return t}u(tce,"getParentFoldLine");function nce(o,e){let t=e.getRegionAtLine(o);if(t!==null&&t.startLineNumber===o){if(o!==t.startLineNumber)return t.startLineNumber;{const n=t.parentIndex;let i=0;for(n!==-1&&(i=e.regions.getStartLineNumber(t.parentIndex));t!==null;)if(t.regionIndex>0){if(t=e.regions.toRegion(t.regionIndex-1),t.startLineNumber<=i)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}}else if(e.regions.length>0)for(t=e.regions.toRegion(e.regions.length-1);t!==null;){if(t.startLineNumber<o)return t.startLineNumber;t.regionIndex>0?t=e.regions.toRegion(t.regionIndex-1):t=null}return null}u(nce,"getPreviousFoldLine");function ice(o,e){let t=e.getRegionAtLine(o);if(t!==null&&t.startLineNumber===o){const n=t.parentIndex;let i=0;if(n!==-1)i=e.regions.getEndLineNumber(t.parentIndex);else{if(e.regions.length===0)return null;i=e.regions.getEndLineNumber(e.regions.length-1)}for(;t!==null;)if(t.regionIndex<e.regions.length){if(t=e.regions.toRegion(t.regionIndex+1),t.startLineNumber>=i)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}else if(e.regions.length>0)for(t=e.regions.toRegion(0);t!==null;){if(t.startLineNumber>o)return t.startLineNumber;t.regionIndex<e.regions.length?t=e.regions.toRegion(t.regionIndex+1):t=null}return null}u(ice,"getNextFoldLine");class yG{constructor(e){this._updateEventEmitter=new R,this._hasLineChanges=!1,this._foldingModel=e,this._foldingModelListener=e.onDidChange(t=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}notifyChangeModelContent(e){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=e.changes.some(t=>t.range.endLineNumber!==t.range.startLineNumber||Du(t.text)[0]!==0))}updateHiddenRanges(){let e=!1;const t=[];let n=0,i=0,s=Number.MAX_VALUE,r=-1;const a=this._foldingModel.regions;for(;n<a.length;n++){if(!a.isCollapsed(n))continue;const l=a.getStartLineNumber(n)+1,c=a.getEndLineNumber(n);s<=l&&c<=r||(!e&&i<this._hiddenRanges.length&&this._hiddenRanges[i].startLineNumber===l&&this._hiddenRanges[i].endLineNumber===c?(t.push(this._hiddenRanges[i]),i++):(e=!0,t.push(new L(l,1,c,1))),s=l,r=c)}(this._hasLineChanges||e||i<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyHiddenRanges(e){this._hiddenRanges=e,this._hasLineChanges=!1,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return qF(this._hiddenRanges,e)!==null}adjustSelections(e){let t=!1;const n=this._foldingModel.textModel;let i=null;const s=u(r=>((!i||!sce(r,i))&&(i=qF(this._hiddenRanges,r)),i?i.startLineNumber-1:null),"adjustLine");for(let r=0,a=e.length;r<a;r++){let l=e[r];const c=s(l.startLineNumber);c&&(l=l.setStartPosition(c,n.getLineMaxColumn(c)),t=!0);const d=s(l.endLineNumber);d&&(l=l.setEndPosition(d,n.getLineMaxColumn(d)),t=!0),e[r]=l}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}u(yG,"HiddenRangeModel");function sce(o,e){return o>=e.startLineNumber&&o<=e.endLineNumber}u(sce,"isInside");function qF(o,e){const t=EO(o,n=>e<n.startLineNumber)-1;return t>=0&&o[t].endLineNumber>=e?o[t]:null}u(qF,"findRange");const oce=5e3,rce="indent";class SG{constructor(e,t,n){this.editorModel=e,this.languageConfigurationService=t,this.maxFoldingRegions=n,this.id=rce}dispose(){}compute(e,t){const n=this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules,i=n&&!!n.offSide,s=n&&n.markers;return Promise.resolve(lce(this.editorModel,i,s,this.maxFoldingRegions,t))}}u(SG,"IndentRangeProvider");let ace=u(class{constructor(e,t){this._notifyTooManyRegions=t,this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,n){if(e>Go||t>Go)return;const i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=t,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(e){var t;if(this._length<=this._foldingRangesLimit){const n=new Uint32Array(this._length),i=new Uint32Array(this._length);for(let s=this._length-1,r=0;s>=0;s--,r++)n[r]=this._startIndexes[s],i[r]=this._endIndexes[s];return new ns(n,i)}else{(t=this._notifyTooManyRegions)===null||t===void 0||t.call(this,this._foldingRangesLimit);let n=0,i=this._indentOccurrences.length;for(let l=0;l<this._indentOccurrences.length;l++){const c=this._indentOccurrences[l];if(c){if(c+n>this._foldingRangesLimit){i=l;break}n+=c}}const s=e.getOptions().tabSize,r=new Uint32Array(this._foldingRangesLimit),a=new Uint32Array(this._foldingRangesLimit);for(let l=this._length-1,c=0;l>=0;l--){const d=this._startIndexes[l],h=e.getLineContent(d),g=py(h,s);(g<i||g===i&&n++<this._foldingRangesLimit)&&(r[c]=d,a[c]=this._endIndexes[l],c++)}return new ns(r,a)}}},"RangesCollector");function lce(o,e,t,n,i){const s=o.getOptions().tabSize;n=n??oce;const r=new ace(n,i);let a;t&&(a=new RegExp(`(${t.start.source})|(?:${t.end.source})`));const l=[],c=o.getLineCount()+1;l.push({indent:-1,endAbove:c,line:c});for(let d=o.getLineCount();d>0;d--){const h=o.getLineContent(d),g=py(h,s);let f=l[l.length-1];if(g===-1){e&&(f.endAbove=d);continue}let p;if(a&&(p=h.match(a)))if(p[1]){let _=l.length-1;for(;_>0&&l[_].indent!==-2;)_--;if(_>0){l.length=_+1,f=l[_],r.insertFirst(d,f.line,g),f.line=d,f.indent=g,f.endAbove=d;continue}}else{l.push({indent:-2,endAbove:d,line:d});continue}if(f.indent>g){do l.pop(),f=l[l.length-1];while(f.indent>g);const _=f.endAbove-1;_-d>=1&&r.insertFirst(d,_,g)}f.indent===g?f.endAbove=d:l.push({indent:g,endAbove:d,line:d})}return r.toIndentRanges(o)}u(lce,"computeRanges");const vv=vn("folding-expanded",b.chevronDown,m("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),LS=vn("folding-collapsed",b.chevronRight,m("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin.")),TG=vn("folding-manual-collapsed",LS,m("foldingManualCollapedIcon","Icon for manually collapsed ranges in the editor glyph margin.")),KN=vn("folding-manual-expanded",vv,m("foldingManualExpandedIcon","Icon for manually expanded ranges in the editor glyph margin."));class Kn{constructor(e){this.editor=e,this.showFoldingControls="mouseover",this.showFoldingHighlights=!0}getDecorationOption(e,t,n){return t||this.showFoldingControls==="never"?Kn.HIDDEN_RANGE_DECORATION:e?n?this.showFoldingHighlights?Kn.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:Kn.MANUALLY_COLLAPSED_VISUAL_DECORATION:this.showFoldingHighlights?Kn.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:Kn.COLLAPSED_VISUAL_DECORATION:this.showFoldingControls==="mouseover"?n?Kn.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION:Kn.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:n?Kn.MANUALLY_EXPANDED_VISUAL_DECORATION:Kn.EXPANDED_VISUAL_DECORATION}changeDecorations(e){return this.editor.changeDecorations(e)}removeDecorations(e){this.editor.removeDecorations(e)}}u(Kn,"FoldingDecorationProvider");Kn.COLLAPSED_VISUAL_DECORATION=Ae.register({description:"folding-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:ct.asClassName(LS)});Kn.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=Ae.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",isWholeLine:!0,firstLineDecorationClassName:ct.asClassName(LS)});Kn.MANUALLY_COLLAPSED_VISUAL_DECORATION=Ae.register({description:"folding-manually-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+ct.asClassName(vv)});Kn.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=Ae.register({description:"folding-manually-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",isWholeLine:!0,firstLineDecorationClassName:ct.asClassName(TG)});Kn.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=Ae.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:ct.asClassName(vv)});Kn.EXPANDED_VISUAL_DECORATION=Ae.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+ct.asClassName(vv)});Kn.MANUALLY_EXPANDED_VISUAL_DECORATION=Ae.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+ct.asClassName(KN)});Kn.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION=Ae.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:ct.asClassName(KN)});Kn.HIDDEN_RANGE_DECORATION=Ae.register({description:"folding-hidden-range-decoration",stickiness:1});const cce={},dce="syntax";class LG{constructor(e,t,n,i){this.editorModel=e,this.providers=t,this.limit=i,this.id=dce;for(const s of t)typeof s.onDidChange=="function"&&(this.disposables||(this.disposables=new J),this.disposables.add(s.onDidChange(n)))}compute(e,t){return uce(this.providers,this.editorModel,e).then(n=>n?hce(n,this.limit,t):null)}dispose(){var e;(e=this.disposables)===null||e===void 0||e.dispose()}}u(LG,"SyntaxRangeProvider");function uce(o,e,t){let n=null;const i=o.map((s,r)=>Promise.resolve(s.provideFoldingRanges(e,cce,t)).then(a=>{if(!t.isCancellationRequested&&Array.isArray(a)){Array.isArray(n)||(n=[]);const l=e.getLineCount();for(const c of a)c.start>0&&c.end>c.start&&c.end<=l&&n.push({start:c.start,end:c.end,rank:r,kind:c.kind})}},Hn));return Promise.all(i).then(s=>n)}u(uce,"collectSyntaxRanges");class xG{constructor(e,t){this._notifyTooManyRegions=t,this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,n,i){if(e>Go||t>Go)return;const s=this._length;this._startIndexes[s]=e,this._endIndexes[s]=t,this._nestingLevels[s]=i,this._types[s]=n,this._length++,i<30&&(this._nestingLevelCounts[i]=(this._nestingLevelCounts[i]||0)+1)}toIndentRanges(){var e;if(this._length<=this._foldingRangesLimit){const t=new Uint32Array(this._length),n=new Uint32Array(this._length);for(let i=0;i<this._length;i++)t[i]=this._startIndexes[i],n[i]=this._endIndexes[i];return new ns(t,n,this._types)}else{(e=this._notifyTooManyRegions)===null||e===void 0||e.call(this,this._foldingRangesLimit);let t=0,n=this._nestingLevelCounts.length;for(let a=0;a<this._nestingLevelCounts.length;a++){const l=this._nestingLevelCounts[a];if(l){if(l+t>this._foldingRangesLimit){n=a;break}t+=l}}const i=new Uint32Array(this._foldingRangesLimit),s=new Uint32Array(this._foldingRangesLimit),r=[];for(let a=0,l=0;a<this._length;a++){const c=this._nestingLevels[a];(c<n||c===n&&t++<this._foldingRangesLimit)&&(i[l]=this._startIndexes[a],s[l]=this._endIndexes[a],r[l]=this._types[a],l++)}return new ns(i,s,r)}}}u(xG,"RangesCollector");function hce(o,e,t){const n=o.sort((a,l)=>{let c=a.start-l.start;return c===0&&(c=a.rank-l.rank),c}),i=new xG(e,t);let s;const r=[];for(const a of n)if(!s)s=a,i.add(a.start,a.end,a.kind&&a.kind.value,r.length);else if(a.start>s.start)if(a.end<=s.end)r.push(s),s=a,i.add(a.start,a.end,a.kind&&a.kind.value,r.length);else{if(a.start>s.end){do s=r.pop();while(s&&a.start>s.end);s&&r.push(s),s=a}i.add(a.start,a.end,a.kind&&a.kind.value,r.length)}return i.toIndentRanges()}u(hce,"sanitizeRanges");var gce=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Yp=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const pi=new ce("foldingEnabled",!1);let Kf=u(class EG extends U{constructor(e,t,n,i,s,r){super(),this.contextKeyService=t,this.languageConfigurationService=n,this.languageFeaturesService=r,this._tooManyRegionsNotified=!1,this.localToDispose=this._register(new J),this.editor=e;const a=this.editor.getOptions();this._isEnabled=a.get(39),this._useFoldingProviders=a.get(40)!=="indentation",this._unfoldOnClickAfterEndOfLine=a.get(44),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=a.get(42),this._maxFoldingRegions=a.get(43),this.updateDebounceInfo=s.for(r.foldingRangeProvider,"Folding",{min:200}),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new Kn(e),this.foldingDecorationProvider.showFoldingControls=a.get(101),this.foldingDecorationProvider.showFoldingHighlights=a.get(41),this.foldingEnabled=pi.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._notifyTooManyRegions=l=>{this._tooManyRegionsNotified||(i.notify({severity:Bt.Warning,sticky:!0,message:m("maximum fold ranges",`The number of foldable regions is limited to a maximum of {0}. Increase configuration option ['Folding Maximum Regions'](command:workbench.action.openSettings?["editor.foldingMaximumRegions"]) to enable more.`,l)}),this._tooManyRegionsNotified=!0)},this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(l=>{if(l.hasChanged(39)&&(this._isEnabled=this.editor.getOptions().get(39),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),l.hasChanged(43)&&(this._maxFoldingRegions=this.editor.getOptions().get(43),this._tooManyRegionsNotified=!1,this.onModelChanged()),l.hasChanged(101)||l.hasChanged(41)){const c=this.editor.getOptions();this.foldingDecorationProvider.showFoldingControls=c.get(101),this.foldingDecorationProvider.showFoldingHighlights=c.get(41),this.triggerFoldingModelChanged()}l.hasChanged(40)&&(this._useFoldingProviders=this.editor.getOptions().get(40)!=="indentation",this.onFoldingStrategyChanged()),l.hasChanged(44)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(44)),l.hasChanged(42)&&(this._foldingImportsByDefault=this.editor.getOptions().get(42))})),this.onModelChanged()}static get(e){return e.getContribution(EG.ID)}saveViewState(){const e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){const t=this.foldingModel.getMemento(),n=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:n,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){const t=this.editor.getModel();if(!(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel)&&!(!e||e.lineCount!==t.getLineCount())&&(this._currentModelHasFoldedImports=!!e.foldedImports,e.collapsedRegions&&e.collapsedRegions.length>0&&this.foldingModel)){this._restoringViewState=!0;try{this.foldingModel.applyMemento(e.collapsedRegions)}finally{this._restoringViewState=!1}}}onModelChanged(){this.localToDispose.clear();const e=this.editor.getModel();!this._isEnabled||!e||e.isTooLargeForTokenization()||(this._currentModelHasFoldedImports=!1,this.foldingModel=new vG(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new yG(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(t=>this.onHiddenRangesChanges(t))),this.updateScheduler=new pr(this.updateDebounceInfo.get(e)),this.cursorChangedScheduler=new pt(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(t=>this.onDidChangeModelContent(t))),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(t=>this.onEditorMouseDown(t))),this.localToDispose.add(this.editor.onMouseUp(t=>this.onEditorMouseUp(t))),this.localToDispose.add({dispose:()=>{this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.updateScheduler&&this.updateScheduler.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;if(this.rangeProvider=new SG(e,this.languageConfigurationService,this._maxFoldingRegions),this._useFoldingProviders&&this.foldingModel){const t=this.languageFeaturesService.foldingRangeProvider.ordered(this.foldingModel.textModel);t.length>0&&(this.rangeProvider=new LG(e,t,()=>this.triggerFoldingModelChanged(),this._maxFoldingRegions))}return this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(e){var t;(t=this.hiddenRangeModel)===null||t===void 0||t.notifyChangeModelContent(e),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{const e=this.foldingModel;if(!e)return null;const t=new Ai(!0),n=this.getRangeProvider(e.textModel),i=this.foldingRegionPromise=On(s=>n.compute(s,this._notifyTooManyRegions));return i.then(s=>{if(s&&i===this.foldingRegionPromise){let r;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const d=s.setCollapsedAllOfType(Mo.Imports.value,!0);d&&(r=wl.capture(this.editor),this._currentModelHasFoldedImports=d)}const a=this.editor.getSelections(),l=a?a.map(d=>d.startLineNumber):[];e.update(s,l),r?.restore(this.editor);const c=this.updateDebounceInfo.update(e.textModel,t.elapsed());this.updateScheduler&&(this.updateScheduler.defaultDelay=c)}return e})}).then(void 0,e=>(Ie(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){const t=this.editor.getSelections();t&&this.hiddenRangeModel.adjustSelections(t)&&this.editor.setSelections(t)}this.editor.setHiddenAreas(e)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();e&&e.then(t=>{if(t){const n=this.editor.getSelections();if(n&&n.length>0){const i=[];for(const s of n){const r=s.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(r)&&i.push(...t.getAllRegionsAtLine(r,a=>a.isCollapsed&&r>a.startLineNumber))}i.length&&(t.toggleCollapseState(i),this.reveal(n[0].getPosition()))}}}).then(void 0,Ie)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range||!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let n=!1;switch(e.target.type){case 4:{const i=e.target.detail,s=e.target.element.offsetLeft;if(i.offsetX-s<5)return;n=!0;break}case 7:{if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!e.target.detail.isAfterLines)break;return}case 6:{if(this.hiddenRangeModel.hasRanges()){const i=this.editor.getModel();if(i&&t.startColumn===i.getLineMaxColumn(t.startLineNumber))break}return}default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:n}}onEditorMouseUp(e){const t=this.foldingModel;if(!t||!this.mouseDownInfo||!e.target)return;const n=this.mouseDownInfo.lineNumber,i=this.mouseDownInfo.iconClicked,s=e.target.range;if(!s||s.startLineNumber!==n)return;if(i){if(e.target.type!==4)return}else{const a=this.editor.getModel();if(!a||s.startColumn!==a.getLineMaxColumn(n))return}const r=t.getRegionAtLine(n);if(r&&r.startLineNumber===n){const a=r.isCollapsed;if(i||a){const l=e.event.altKey;let c=[];if(l){const d=u(g=>!g.containedBy(r)&&!r.containedBy(g),"filter"),h=t.getRegionsInside(null,d);for(const g of h)g.isCollapsed&&c.push(g);c.length===0&&(c=h)}else{const d=e.event.middleButton||e.event.shiftKey;if(d)for(const h of t.getRegionsInside(r))h.isCollapsed===a&&c.push(h);(a||!d||c.length===0)&&c.push(r)}t.toggleCollapseState(c),this.reveal({lineNumber:n,column:1})}}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}},"FoldingController");Kf.ID="editor.contrib.folding";Kf=gce([Yp(1,De),Yp(2,rn),Yp(3,gn),Yp(4,ho),Yp(5,ue)],Kf);class mi extends de{runEditorCommand(e,t,n){const i=e.get(rn),s=Kf.get(t);if(!s)return;const r=s.getFoldingModel();if(r)return this.reportTelemetry(e,t),r.then(a=>{if(a){this.invoke(s,a,t,n,i);const l=t.getSelection();l&&s.reveal(l.getStartPosition())}})}getSelectedLines(e){const t=e.getSelections();return t?t.map(n=>n.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(n=>n+1):this.getSelectedLines(t)}run(e,t){}}u(mi,"FoldingAction");function kG(o){if(!ss(o)){if(!Ki(o))return!1;const e=o;if(!ss(e.levels)&&!Sc(e.levels)||!ss(e.direction)&&!qi(e.direction)||!ss(e.selectionLines)&&(!NO(e.selectionLines)||!e.selectionLines.every(Sc)))return!1}return!0}u(kG,"foldingArgumentsConstraint");class MG extends mi{constructor(){super({id:"editor.unfold",label:m("unfoldAction.label","Unfold"),alias:"Unfold",precondition:pi,kbOpts:{kbExpr:A.editorTextFocus,primary:3161,mac:{primary:2649},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:kG,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,i){const s=i&&i.levels||1,r=this.getLineNumbers(i,n);i&&i.direction==="up"?CG(t,!1,s,r):yp(t,!1,s,r)}}u(MG,"UnfoldAction");class DG extends mi{constructor(){super({id:"editor.unfoldRecursively",label:m("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:pi,kbOpts:{kbExpr:A.editorTextFocus,primary:xn(2089,2137),weight:100}})}invoke(e,t,n,i){yp(t,!1,Number.MAX_VALUE,this.getSelectedLines(n))}}u(DG,"UnFoldRecursivelyAction");class AG extends mi{constructor(){super({id:"editor.fold",label:m("foldAction.label","Fold"),alias:"Fold",precondition:pi,kbOpts:{kbExpr:A.editorTextFocus,primary:3159,mac:{primary:2647},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:kG,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,i){const s=this.getLineNumbers(i,n),r=i&&i.levels,a=i&&i.direction;typeof r!="number"&&typeof a!="string"?Qle(t,!0,s):a==="up"?CG(t,!0,r||1,s):yp(t,!0,r||1,s)}}u(AG,"FoldAction");class IG extends mi{constructor(){super({id:"editor.toggleFold",label:m("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:pi,kbOpts:{kbExpr:A.editorTextFocus,primary:xn(2089,2090),weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);Jle(t,1,i)}}u(IG,"ToggleFoldAction");class NG extends mi{constructor(){super({id:"editor.foldRecursively",label:m("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:pi,kbOpts:{kbExpr:A.editorTextFocus,primary:xn(2089,2135),weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);yp(t,!0,Number.MAX_VALUE,i)}}u(NG,"FoldRecursivelyAction");class PG extends mi{constructor(){super({id:"editor.foldAllBlockComments",label:m("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:pi,kbOpts:{kbExpr:A.editorTextFocus,primary:xn(2089,2133),weight:100}})}invoke(e,t,n,i,s){if(t.regions.hasTypes())zN(t,Mo.Comment.value,!0);else{const r=n.getModel();if(!r)return;const a=s.getLanguageConfiguration(r.getLanguageId()).comments;if(a&&a.blockCommentStartToken){const l=new RegExp("^\\s*"+As(a.blockCommentStartToken));GN(t,l,!0)}}}}u(PG,"FoldAllBlockCommentsAction");class RG extends mi{constructor(){super({id:"editor.foldAllMarkerRegions",label:m("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:pi,kbOpts:{kbExpr:A.editorTextFocus,primary:xn(2089,2077),weight:100}})}invoke(e,t,n,i,s){if(t.regions.hasTypes())zN(t,Mo.Region.value,!0);else{const r=n.getModel();if(!r)return;const a=s.getLanguageConfiguration(r.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){const l=new RegExp(a.markers.start);GN(t,l,!0)}}}}u(RG,"FoldAllRegionsAction");class FG extends mi{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:m("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:pi,kbOpts:{kbExpr:A.editorTextFocus,primary:xn(2089,2078),weight:100}})}invoke(e,t,n,i,s){if(t.regions.hasTypes())zN(t,Mo.Region.value,!1);else{const r=n.getModel();if(!r)return;const a=s.getLanguageConfiguration(r.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){const l=new RegExp(a.markers.start);GN(t,l,!1)}}}}u(FG,"UnfoldAllRegionsAction");class OG extends mi{constructor(){super({id:"editor.foldAllExcept",label:m("foldAllExcept.label","Fold All Regions Except Selected"),alias:"Fold All Regions Except Selected",precondition:pi,kbOpts:{kbExpr:A.editorTextFocus,primary:xn(2089,2131),weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);wG(t,!0,i)}}u(OG,"FoldAllRegionsExceptAction");class VG extends mi{constructor(){super({id:"editor.unfoldAllExcept",label:m("unfoldAllExcept.label","Unfold All Regions Except Selected"),alias:"Unfold All Regions Except Selected",precondition:pi,kbOpts:{kbExpr:A.editorTextFocus,primary:xn(2089,2129),weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);wG(t,!1,i)}}u(VG,"UnfoldAllRegionsExceptAction");class HG extends mi{constructor(){super({id:"editor.foldAll",label:m("foldAllAction.label","Fold All"),alias:"Fold All",precondition:pi,kbOpts:{kbExpr:A.editorTextFocus,primary:xn(2089,2069),weight:100}})}invoke(e,t,n){yp(t,!0)}}u(HG,"FoldAllAction");class BG extends mi{constructor(){super({id:"editor.unfoldAll",label:m("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:pi,kbOpts:{kbExpr:A.editorTextFocus,primary:xn(2089,2088),weight:100}})}invoke(e,t,n){yp(t,!1)}}u(BG,"UnfoldAllAction");class jc extends mi{getFoldingLevel(){return parseInt(this.id.substr(jc.ID_PREFIX.length))}invoke(e,t,n){ece(t,this.getFoldingLevel(),!0,this.getSelectedLines(n))}}u(jc,"FoldLevelAction");jc.ID_PREFIX="editor.foldLevel";jc.ID=o=>jc.ID_PREFIX+o;class WG extends mi{constructor(){super({id:"editor.gotoParentFold",label:m("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:pi,kbOpts:{kbExpr:A.editorTextFocus,weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);if(i.length>0){const s=tce(i[0],t);s!==null&&n.setSelection({startLineNumber:s,startColumn:1,endLineNumber:s,endColumn:1})}}}u(WG,"GotoParentFoldAction");class UG extends mi{constructor(){super({id:"editor.gotoPreviousFold",label:m("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:pi,kbOpts:{kbExpr:A.editorTextFocus,weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);if(i.length>0){const s=nce(i[0],t);s!==null&&n.setSelection({startLineNumber:s,startColumn:1,endLineNumber:s,endColumn:1})}}}u(UG,"GotoPreviousFoldAction");class GG extends mi{constructor(){super({id:"editor.gotoNextFold",label:m("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:pi,kbOpts:{kbExpr:A.editorTextFocus,weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);if(i.length>0){const s=ice(i[0],t);s!==null&&n.setSelection({startLineNumber:s,startColumn:1,endLineNumber:s,endColumn:1})}}}u(GG,"GotoNextFoldAction");class zG extends mi{constructor(){super({id:"editor.createFoldingRangeFromSelection",label:m("createManualFoldRange.label","Create Manual Folding Range from Selection"),alias:"Create Folding Range from Selection",precondition:pi,kbOpts:{kbExpr:A.editorTextFocus,primary:xn(2089,2130),weight:100}})}invoke(e,t,n){var i;const s=[],r=n.getSelections();if(r){for(const a of r){let l=a.endLineNumber;a.endColumn===1&&--l,l>a.startLineNumber&&(s.push({startLineNumber:a.startLineNumber,endLineNumber:l,type:void 0,isCollapsed:!0,source:1}),n.setSelection({startLineNumber:a.startLineNumber,startColumn:1,endLineNumber:a.startLineNumber,endColumn:1}))}if(s.length>0){s.sort((l,c)=>l.startLineNumber-c.startLineNumber);const a=ns.sanitizeAndMerge(t.regions,s,(i=n.getModel())===null||i===void 0?void 0:i.getLineCount());t.updatePost(ns.fromFoldRanges(a))}}}}u(zG,"FoldRangeFromSelectionAction");class KG extends mi{constructor(){super({id:"editor.removeManualFoldingRanges",label:m("removeManualFoldingRanges.label","Remove Manual Folding Ranges"),alias:"Remove Manual Folding Ranges",precondition:pi,kbOpts:{kbExpr:A.editorTextFocus,primary:xn(2089,2132),weight:100}})}invoke(e,t,n){const i=n.getSelections();if(i){const s=[];for(const r of i){const{startLineNumber:a,endLineNumber:l}=r;s.push(l>=a?{startLineNumber:a,endLineNumber:l}:{endLineNumber:l,startLineNumber:a})}t.removeManualRanges(s),e.triggerFoldingModelChanged()}}}u(KG,"RemoveFoldRangeFromSelectionAction");it(Kf.ID,Kf);ie(MG);ie(DG);ie(AG);ie(NG);ie(HG);ie(BG);ie(PG);ie(RG);ie(FG);ie(OG);ie(VG);ie(IG);ie(WG);ie(UG);ie(GG);ie(zG);ie(KG);for(let o=1;o<=7;o++)$V(new jc({id:jc.ID(o),label:m("foldLevelAction.label","Fold Level {0}",o),alias:`Fold Level ${o}`,precondition:pi,kbOpts:{kbExpr:A.editorTextFocus,primary:xn(2089,2048|21+o),weight:100}}));const fce=I("editor.foldBackground",{light:pe(Xa,.3),dark:pe(Xa,.3),hcDark:null,hcLight:null},m("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0),pce=I("editorGutter.foldingControlForeground",{dark:$v,light:$v,hcDark:$v,hcLight:$v},m("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));At((o,e)=>{const t=o.getColor(fce);t&&e.addRule(`.monaco-editor .folded-background { background-color: ${t}; }`);const n=o.getColor(pce);n&&e.addRule(`
		.monaco-editor .cldr${ct.asCSSSelector(vv)},
		.monaco-editor .cldr${ct.asCSSSelector(LS)},
		.monaco-editor .cldr${ct.asCSSSelector(KN)},
		.monaco-editor .cldr${ct.asCSSSelector(TG)} {
			color: ${n} !important;
		}
		`)});class jG extends de{constructor(){super({id:"editor.action.fontZoomIn",label:m("EditorFontZoomIn.label","Editor Font Zoom In"),alias:"Editor Font Zoom In",precondition:void 0})}run(e,t){ml.setZoomLevel(ml.getZoomLevel()+1)}}u(jG,"EditorFontZoomIn");class $G extends de{constructor(){super({id:"editor.action.fontZoomOut",label:m("EditorFontZoomOut.label","Editor Font Zoom Out"),alias:"Editor Font Zoom Out",precondition:void 0})}run(e,t){ml.setZoomLevel(ml.getZoomLevel()-1)}}u($G,"EditorFontZoomOut");class qG extends de{constructor(){super({id:"editor.action.fontZoomReset",label:m("EditorFontZoomReset.label","Editor Font Zoom Reset"),alias:"Editor Font Zoom Reset",precondition:void 0})}run(e,t){ml.setZoomLevel(0)}}u(qG,"EditorFontZoomReset");ie(jG);ie($G);ie(qG);var YG=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},gw=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},jN=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let Qb=u(class{constructor(e,t,n){this._editor=e,this._languageFeaturesService=t,this._workerService=n,this._disposables=new J,this._sessionDisposables=new J,this._disposables.add(t.onTypeFormattingEditProvider.onDidChange(this._update,this)),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(i=>{i.hasChanged(51)&&this._update()}))}dispose(){this._disposables.dispose(),this._sessionDisposables.dispose()}_update(){if(this._sessionDisposables.clear(),!this._editor.getOption(51)||!this._editor.hasModel())return;const e=this._editor.getModel(),[t]=this._languageFeaturesService.onTypeFormattingEditProvider.ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;const n=new Rd;for(const i of t.autoFormatTriggerCharacters)n.add(i.charCodeAt(0));this._sessionDisposables.add(this._editor.onDidType(i=>{const s=i.charCodeAt(i.length-1);n.has(s)&&this._trigger(String.fromCharCode(s))}))}_trigger(e){if(!this._editor.hasModel()||this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;const t=this._editor.getModel(),n=this._editor.getPosition(),i=new ti,s=this._editor.onDidChangeModelContent(r=>{if(r.isFlush){i.cancel(),s.dispose();return}for(let a=0,l=r.changes.length;a<l;a++)if(r.changes[a].range.endLineNumber<=n.lineNumber){i.cancel(),s.dispose();return}});x6(this._workerService,this._languageFeaturesService,t,n,e,t.getFormattingOptions(),i.token).then(r=>{i.token.isCancellationRequested||ci(r)&&(Vu.execute(this._editor,r,!0),aN(r))}).finally(()=>{s.dispose()})}},"FormatOnType");Qb.ID="editor.contrib.autoFormat";Qb=YG([gw(1,ue),gw(2,co)],Qb);let e_=u(class{constructor(e,t,n){this.editor=e,this._languageFeaturesService=t,this._instantiationService=n,this._callOnDispose=new J,this._callOnModel=new J,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(t.documentRangeFormattingEditProvider.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(50)&&this.editor.hasModel()&&this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste(({range:e})=>this._trigger(e)))}_trigger(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(L6,this.editor,e,2,Jc.None,Ge.None).catch(Ie))}},"FormatOnPaste");e_.ID="editor.contrib.formatOnPaste";e_=YG([gw(1,ue),gw(2,Ne)],e_);class XG extends de{constructor(){super({id:"editor.action.formatDocument",label:m("formatDocument.label","Format Document"),alias:"Format Document",precondition:oe.and(A.notInCompositeEditor,A.writable,A.hasDocumentFormattingProvider),kbOpts:{kbExpr:A.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}run(e,t){return jN(this,void 0,void 0,function*(){if(t.hasModel()){const n=e.get(Ne);yield e.get(Qc).showWhile(n.invokeFunction(Roe,t,1,Jc.None,Ge.None),250)}})}}u(XG,"FormatDocumentAction");class ZG extends de{constructor(){super({id:"editor.action.formatSelection",label:m("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:oe.and(A.writable,A.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:A.editorTextFocus,primary:xn(2089,2084),weight:100},contextMenuOpts:{when:A.hasNonEmptySelection,group:"1_modification",order:1.31}})}run(e,t){return jN(this,void 0,void 0,function*(){if(!t.hasModel())return;const n=e.get(Ne),i=t.getModel(),s=t.getSelections().map(a=>a.isEmpty()?new L(a.startLineNumber,1,a.startLineNumber,i.getLineMaxColumn(a.startLineNumber)):a);yield e.get(Qc).showWhile(n.invokeFunction(L6,t,s,1,Jc.None,Ge.None),250)})}}u(ZG,"FormatSelectionAction");it(Qb.ID,Qb);it(e_.ID,e_);ie(XG);ie(ZG);Qe.registerCommand("editor.action.format",o=>jN(void 0,void 0,void 0,function*(){const e=o.get(dt).getFocusedCodeEditor();if(!e||!e.hasModel())return;const t=o.get(hn);e.getSelection().isEmpty()?yield t.executeCommand("editor.action.formatDocument"):yield t.executeCommand("editor.action.formatSelection")}));var mce=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},dL=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},bce=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class $d{remove(){var e;(e=this.parent)===null||e===void 0||e.children.delete(this.id)}static findId(e,t){let n;typeof e=="string"?n=`${t.id}/${e}`:(n=`${t.id}/${e.name}`,t.children.get(n)!==void 0&&(n=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let i=n;for(let s=0;t.children.get(i)!==void 0;s++)i=`${n}_${s}`;return i}static empty(e){return e.children.size===0}}u($d,"TreeElement");class t_ extends $d{constructor(e,t,n){super(),this.id=e,this.parent=t,this.symbol=n,this.children=new Map}}u(t_,"OutlineElement");class JG extends $d{constructor(e,t,n,i){super(),this.id=e,this.parent=t,this.label=n,this.order=i,this.children=new Map}}u(JG,"OutlineGroup");class Gr extends $d{constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}static create(e,t,n){const i=new ti(n),s=new Gr(t.uri),r=e.ordered(t),a=r.map((c,d)=>{var h;const g=$d.findId(`provider_${d}`,s),f=new JG(g,s,(h=c.displayName)!==null&&h!==void 0?h:"Unknown Outline Provider",d);return Promise.resolve(c.provideDocumentSymbols(t,i.token)).then(p=>{for(const _ of p||[])Gr._makeOutlineElement(_,f);return f},p=>(Hn(p),f)).then(p=>{$d.empty(p)?p.remove():s._groups.set(g,p)})}),l=e.onDidChange(()=>{const c=e.ordered(t);Ds(c,r)||i.cancel()});return Promise.all(a).then(()=>i.token.isCancellationRequested&&!n.isCancellationRequested?Gr.create(e,t,n):s._compact()).finally(()=>{l.dispose()})}static _makeOutlineElement(e,t){const n=$d.findId(e,t),i=new t_(n,t,e);if(e.children)for(const s of e.children)Gr._makeOutlineElement(s,i);t.children.set(i.id,i)}_compact(){let e=0;for(const[t,n]of this._groups)n.children.size===0?this._groups.delete(t):e+=1;if(e!==1)this.children=this._groups;else{const t=je.first(this._groups.values());for(const[,n]of t.children)n.parent=this,this.children.set(n.id,n)}return this}getTopLevelSymbols(){const e=[];for(const t of this.children.values())t instanceof t_?e.push(t.symbol):e.push(...je.map(t.children.values(),n=>n.symbol));return e.sort((t,n)=>L.compareRangesUsingStarts(t.range,n.range))}asListOfDocumentSymbols(){const e=this.getTopLevelSymbols(),t=[];return Gr._flattenDocumentSymbols(t,e,""),t.sort((n,i)=>H.compare(L.getStartPosition(n.range),L.getStartPosition(i.range))||H.compare(L.getEndPosition(i.range),L.getEndPosition(n.range)))}static _flattenDocumentSymbols(e,t,n){for(const i of t)e.push({kind:i.kind,tags:i.tags,name:i.name,detail:i.detail,containerName:i.containerName||n,range:i.range,selectionRange:i.selectionRange,children:void 0}),i.children&&Gr._flattenDocumentSymbols(e,i.children,i.name)}}u(Gr,"OutlineModel");const xS=Je("IOutlineModelService");let jM=u(class{constructor(e,t,n){this._languageFeaturesService=e,this._disposables=new J,this._cache=new Al(10,.7),this._debounceInformation=t.for(e.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(n.onModelRemoved(i=>{this._cache.delete(i.id)}))}dispose(){this._disposables.dispose()}getOrCreate(e,t){return bce(this,void 0,void 0,function*(){const n=this._languageFeaturesService.documentSymbolProvider,i=n.ordered(e);let s=this._cache.get(e.id);if(!s||s.versionId!==e.getVersionId()||!Ds(s.provider,i)){const a=new ti;s={versionId:e.getVersionId(),provider:i,promiseCnt:0,source:a,promise:Gr.create(n,e,a.token),model:void 0},this._cache.set(e.id,s);const l=Date.now();s.promise.then(c=>{s.model=c,this._debounceInformation.update(e,Date.now()-l)}).catch(c=>{this._cache.delete(e.id)})}if(s.model)return s.model;s.promiseCnt+=1;const r=t.onCancellationRequested(()=>{--s.promiseCnt===0&&(s.source.cancel(),this._cache.delete(e.id))});try{return yield s.promise}finally{r.dispose()}})}},"OutlineModelService");jM=mce([dL(0,ue),dL(1,ho),dL(2,Kt)],jM);nt(xS,jM,!0);var _ce=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};Qe.registerCommand("_executeDocumentSymbolProvider",function(o,...e){return _ce(this,void 0,void 0,function*(){const[t]=e;bt(be.isUri(t));const n=o.get(xS),s=yield o.get(Ji).createModelReference(t);try{return(yield n.getOrCreate(s.object.textEditorModel,Ge.None)).getTopLevelSymbols()}finally{s.dispose()}})});const fw="editor.action.inlineSuggest.commit";function vce(o,e){return{object:o,dispose:()=>e?.dispose()}}u(vce,"createDisposableRef");function Cce(o,e){const t=new QG(o),n=e.map(i=>{const s=L.lift(i.range);return{startOffset:t.getOffset(s.getStartPosition()),endOffset:t.getOffset(s.getEndPosition()),text:i.text}});n.sort((i,s)=>s.startOffset-i.startOffset);for(const i of n)o=o.substring(0,i.startOffset)+i.text+o.substring(i.endOffset);return o}u(Cce,"applyEdits");class QG{constructor(e){this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}}u(QG,"PositionOffsetTransformer");const wce=[];function yce(){return wce}u(yce,"getReadonlyEmptyArray");class $N{constructor(e,t,n=0){this.lineNumber=e,this.parts=t,this.additionalReservedLineCount=n}renderForScreenReader(e){if(this.parts.length===0)return"";const t=this.parts[this.parts.length-1],n=e.substr(0,t.column-1);return Cce(n,this.parts.map(s=>({range:{startLineNumber:1,endLineNumber:1,startColumn:s.column,endColumn:s.column},text:s.lines.join(`
`)}))).substring(this.parts[0].column-1)}isEmpty(){return this.parts.every(e=>e.lines.length===0)}}u($N,"GhostText");class pw{constructor(e,t,n){this.column=e,this.lines=t,this.preview=n}}u(pw,"GhostTextPart");class qN{constructor(e,t,n,i,s=0){this.lineNumber=e,this.columnStart=t,this.length=n,this.newLines=i,this.additionalReservedLineCount=s,this.parts=[new pw(this.columnStart+this.length,this.newLines,!1)]}renderForScreenReader(e){return this.newLines.join(`
`)}}u(qN,"GhostTextReplacement");class YN extends U{constructor(e){super(),this.editor=e,this._expanded=void 0,this.onDidChangeEmitter=new R,this.onDidChange=this.onDidChangeEmitter.event,this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(108)&&this._expanded===void 0&&this.onDidChangeEmitter.fire()}))}setExpanded(e){this._expanded=!0,this.onDidChangeEmitter.fire()}}u(YN,"BaseGhostTextWidgetModel");function mw(o,e){if(!e)return e;const t=o.getValueInRange(e.range),n=bu(t,e.insertText),i=o.getOffsetAt(e.range.getStartPosition())+n,s=o.getPositionAt(i),r=t.substr(n),a=sb(r,e.insertText),l=o.getPositionAt(Math.max(i,o.getOffsetAt(e.range.getEndPosition())-a));return{range:L.fromPositions(s,l),insertText:e.insertText.substr(n,e.insertText.length-n-a),snippetInfo:e.snippetInfo,filterText:e.filterText,additionalTextEdits:e.additionalTextEdits}}u(mw,"minimizeInlineCompletion");function Sce(o,e){return o===e?!0:!o||!e?!1:o.range.equalsRange(e.range)&&o.insertText===e.insertText&&o.command===e.command}u(Sce,"normalizedInlineCompletionsEquals");function ez(o,e,t,n,i=0){if(o.range.startLineNumber!==o.range.endLineNumber)return;const s=e.getLineContent(o.range.startLineNumber),r=vt(s).length;if(o.range.startColumn-1<=r){const f=vt(o.insertText).length,p=s.substring(o.range.startColumn-1,r),_=L.fromPositions(o.range.getStartPosition().delta(0,p.length),o.range.getEndPosition()),v=o.insertText.startsWith(p)?o.insertText.substring(p.length):o.insertText.substring(f);o={range:_,insertText:v,command:o.command,snippetInfo:void 0,filterText:o.filterText,additionalTextEdits:o.additionalTextEdits}}const l=e.getValueInRange(o.range),c=Tce(l,o.insertText);if(!c)return;const d=o.range.startLineNumber,h=new Array;if(t==="prefix"){const f=c.filter(p=>p.originalLength===0);if(f.length>1||f.length===1&&f[0].originalStart!==l.length)return}const g=o.insertText.length-i;for(const f of c){const p=o.range.startColumn+f.originalStart+f.originalLength;if(t==="subwordSmart"&&n&&n.lineNumber===o.range.startLineNumber&&p<n.column||f.originalLength>0)return;if(f.modifiedLength===0)continue;const _=f.modifiedStart+f.modifiedLength,v=Math.max(f.modifiedStart,Math.min(_,g)),C=o.insertText.substring(f.modifiedStart,v),w=o.insertText.substring(v,Math.max(f.modifiedStart,_));if(C.length>0){const y=sa(C);h.push(new pw(p,y,!1))}if(w.length>0){const y=sa(w);h.push(new pw(p,y,!0))}}return new $N(d,h,0)}u(ez,"inlineCompletionToGhostText");let Pr;function Tce(o,e){if(Pr?.originalValue===o&&Pr?.newValue===e)return Pr?.changes;{let t=XF(o,e,!0);if(t){const n=YF(t);if(n>0){const i=XF(o,e,!1);i&&YF(i)<n&&(t=i)}}return Pr={originalValue:o,newValue:e,changes:t},t}}u(Tce,"cachingDiff");function YF(o){let e=0;for(const t of o)e+=Math.max(t.originalLength-t.modifiedLength,0);return e}u(YF,"deletedCharacters");function XF(o,e,t){if(o.length>5e3||e.length>5e3)return;function n(c){let d=0;for(let h=0,g=c.length;h<g;h++){const f=c.charCodeAt(h);f>d&&(d=f)}return d}u(n,"getMaxCharCode");const i=Math.max(n(o),n(e));function s(c){if(c<0)throw new Error("unexpected");return i+c+1}u(s,"getUniqueCharCode");function r(c){let d=0,h=0;const g=new Int32Array(c.length);for(let f=0,p=c.length;f<p;f++)if(t&&c[f]==="("){const _=h*100+d;g[f]=s(2*_),d++}else if(t&&c[f]===")"){d=Math.max(d-1,0);const _=h*100+d;g[f]=s(2*_+1),d===0&&h++}else g[f]=c.charCodeAt(f);return g}u(r,"getElements");const a=r(o),l=r(e);return new Yo({getElements:()=>a},{getElements:()=>l}).ComputeDiff(!1).changes}u(XF,"smartDiff");function Lce(o,e){const t=new jA,n=new qA(t,c=>e.getLanguageConfiguration(c)),i=new $A(new tz([o]),n),s=vE(i,[],void 0,!0);let r="";const a=o.getLineContent();function l(c,d){if(c.kind===2)if(l(c.openingBracket,d),d=Jt(d,c.openingBracket.length),c.child&&(l(c.child,d),d=Jt(d,c.child.length)),c.closingBracket)l(c.closingBracket,d),d=Jt(d,c.closingBracket.length);else{const g=n.getSingleLanguageBracketTokens(c.openingBracket.languageId).findClosingTokenText(c.openingBracket.bracketIds);r+=g}else if(c.kind!==3){if(c.kind===0||c.kind===1)r+=a.substring(d,Jt(d,c.length));else if(c.kind===4)for(const h of c.children)l(h,d),d=Jt(d,h.length)}}return u(l,"processNode"),l(s,So),r}u(Lce,"fixBracketsInLine");class tz{constructor(e){this.lines=e,this.tokenization={getLineTokens:t=>this.lines[t-1]}}getLineCount(){return this.lines.length}getLineLength(e){return this.lines[e-1].getLineContent().length}}u(tz,"StaticTokenizerSource");var xce=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Xp=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Va=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let $M=u(class extends U{constructor(e,t,n,i,s,r,a){super(),this.editor=e,this.cache=t,this.commandService=n,this.languageConfigurationService=i,this.languageFeaturesService=s,this.debounceService=r,this.onDidChangeEmitter=new R,this.onDidChange=this.onDidChangeEmitter.event,this.completionSession=this._register(new gi),this.active=!1,this.disposed=!1,this.debounceValue=this.debounceService.for(this.languageFeaturesService.inlineCompletionsProvider,"InlineCompletionsDebounce",{min:50,max:50}),this._register(n.onDidExecuteCommand(l=>{new Set([Ig.Tab.id,Ig.DeleteLeft.id,Ig.DeleteRight.id,fw,"acceptSelectedSuggestion"]).has(l.commandId)&&e.hasTextFocus()&&this.handleUserInput()})),this._register(this.editor.onDidType(l=>{this.handleUserInput()})),this._register(this.editor.onDidChangeCursorPosition(l=>{(l.reason===3||this.session&&!this.session.isValid)&&this.hide()})),this._register(He(()=>{this.disposed=!0})),this._register(this.editor.onDidBlurEditorWidget(()=>{a.getValue("editor.inlineSuggest.hideOnBlur")||this.hide()}))}handleUserInput(){this.session&&!this.session.isValid&&this.hide(),setTimeout(()=>{this.disposed||this.startSessionIfTriggered()},0)}get session(){return this.completionSession.value}get ghostText(){var e;return(e=this.session)===null||e===void 0?void 0:e.ghostText}get minReservedLineCount(){return this.session?this.session.minReservedLineCount:0}setExpanded(e){var t;(t=this.session)===null||t===void 0||t.setExpanded(e)}setActive(e){var t;this.active=e,e&&((t=this.session)===null||t===void 0||t.scheduleAutomaticUpdate())}startSessionIfTriggered(){this.editor.getOption(57).enabled&&(this.session&&this.session.isValid||this.trigger(Gs.Automatic))}trigger(e){if(this.completionSession.value){e===Gs.Explicit&&this.completionSession.value.ensureUpdateWithExplicitContext();return}this.completionSession.value=new nz(this.editor,this.editor.getPosition(),()=>this.active,this.commandService,this.cache,e,this.languageConfigurationService,this.languageFeaturesService.inlineCompletionsProvider,this.debounceValue),this.completionSession.value.takeOwnership(this.completionSession.value.onDidChange(()=>{this.onDidChangeEmitter.fire()}))}hide(){this.completionSession.clear(),this.onDidChangeEmitter.fire()}commitCurrentSuggestion(){var e;(e=this.session)===null||e===void 0||e.commitCurrentCompletion()}showNext(){var e;(e=this.session)===null||e===void 0||e.showNextInlineCompletion()}showPrevious(){var e;(e=this.session)===null||e===void 0||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return Va(this,void 0,void 0,function*(){const t=yield(e=this.session)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}},"InlineCompletionsModel");$M=xce([Xp(2,hn),Xp(3,rn),Xp(4,ue),Xp(5,ho),Xp(6,rt)],$M);class nz extends YN{constructor(e,t,n,i,s,r,a,l,c){super(e),this.triggerPosition=t,this.shouldUpdate=n,this.commandService=i,this.cache=s,this.initialTriggerKind=r,this.languageConfigurationService=a,this.registry=l,this.debounce=c,this.minReservedLineCount=0,this.updateOperation=this._register(new gi),this.updateSoon=this._register(new pt(()=>{const h=this.initialTriggerKind;return this.initialTriggerKind=Gs.Automatic,this.update(h)},50)),this.filteredCompletions=[],this.currentlySelectedCompletionId=void 0;let d;this._register(this.onDidChange(()=>{var h;const g=this.currentCompletion;if(g&&g.sourceInlineCompletion!==d){d=g.sourceInlineCompletion;const f=g.sourceProvider;(h=f.handleItemDidShow)===null||h===void 0||h.call(f,g.sourceInlineCompletions,d)}})),this._register(He(()=>{this.cache.clear()})),this._register(this.editor.onDidChangeCursorPosition(h=>{var g;h.reason!==3&&((g=this.cache.value)===null||g===void 0||g.updateRanges(),this.cache.value&&(this.updateFilteredInlineCompletions(),this.onDidChangeEmitter.fire()))})),this._register(this.editor.onDidChangeModelContent(h=>{var g;(g=this.cache.value)===null||g===void 0||g.updateRanges(),this.updateFilteredInlineCompletions(),this.scheduleAutomaticUpdate()})),this._register(this.registry.onDidChange(()=>{this.updateSoon.schedule(this.debounce.get(this.editor.getModel()))})),this.scheduleAutomaticUpdate()}updateFilteredInlineCompletions(){if(!this.cache.value){this.filteredCompletions=[];return}const e=this.editor.getModel(),t=e.validatePosition(this.editor.getPosition());this.filteredCompletions=this.cache.value.completions.filter(n=>{const i=e.getValueInRange(n.synchronizedRange).toLowerCase(),s=n.inlineCompletion.filterText.toLowerCase(),r=e.getLineIndentColumn(n.synchronizedRange.startLineNumber),a=Math.max(0,t.column-n.synchronizedRange.startColumn);let l=s.substring(0,a),c=s.substring(a),d=i.substring(0,a),h=i.substring(a);return n.synchronizedRange.startColumn<=r&&(d=d.trimStart(),d.length===0&&(h=h.trimStart()),l=l.trimStart(),l.length===0&&(c=c.trimStart())),l.startsWith(d)&&T9(h,c)})}fixAndGetIndexOfCurrentSelection(){if(!this.currentlySelectedCompletionId||!this.cache.value||this.cache.value.completions.length===0)return 0;const e=this.filteredCompletions.findIndex(t=>t.semanticId===this.currentlySelectedCompletionId);return e===-1?(this.currentlySelectedCompletionId=void 0,0):e}get currentCachedCompletion(){if(this.cache.value)return this.filteredCompletions[this.fixAndGetIndexOfCurrentSelection()]}showNextInlineCompletion(){return Va(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();const e=this.filteredCompletions||[];if(e.length>0){const t=(this.fixAndGetIndexOfCurrentSelection()+1)%e.length;this.currentlySelectedCompletionId=e[t].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}showPreviousInlineCompletion(){return Va(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();const e=this.filteredCompletions||[];if(e.length>0){const t=(this.fixAndGetIndexOfCurrentSelection()+e.length-1)%e.length;this.currentlySelectedCompletionId=e[t].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}ensureUpdateWithExplicitContext(){var e;return Va(this,void 0,void 0,function*(){this.updateOperation.value?this.updateOperation.value.triggerKind===Gs.Explicit?yield this.updateOperation.value.promise:yield this.update(Gs.Explicit):((e=this.cache.value)===null||e===void 0?void 0:e.triggerKind)!==Gs.Explicit&&(yield this.update(Gs.Explicit))})}hasMultipleInlineCompletions(){var e;return Va(this,void 0,void 0,function*(){return yield this.ensureUpdateWithExplicitContext(),(((e=this.cache.value)===null||e===void 0?void 0:e.completions.length)||0)>1})}get ghostText(){const e=this.currentCompletion;if(!e)return;const t=this.editor.getPosition();if(e.range.getEndPosition().isBefore(t))return;const n=this.editor.getOptions().get(57).mode,i=ez(e,this.editor.getModel(),n,t);return i?i.isEmpty()?void 0:i:new qN(e.range.startLineNumber,e.range.startColumn,e.range.endColumn-e.range.startColumn,e.insertText.split(`
`),0)}get currentCompletion(){const e=this.currentCachedCompletion;if(e)return e.toLiveInlineCompletion()}get isValid(){return this.editor.getPosition().lineNumber===this.triggerPosition.lineNumber}scheduleAutomaticUpdate(){this.updateOperation.clear(),this.updateSoon.schedule(this.debounce.get(this.editor.getModel()))}update(e){return Va(this,void 0,void 0,function*(){if(!this.shouldUpdate())return;const t=this.editor.getPosition(),n=new Date,i=On(r=>Va(this,void 0,void 0,function*(){let a;try{a=yield oz(this.registry,t,this.editor.getModel(),{triggerKind:e,selectedSuggestionInfo:void 0},r,this.languageConfigurationService);const l=new Date;this.debounce.update(this.editor.getModel(),l.getTime()-n.getTime())}catch(l){Ie(l);return}r.isCancellationRequested||(this.cache.setValue(this.editor,a,e),this.updateFilteredInlineCompletions(),this.onDidChangeEmitter.fire())})),s=new XN(i,e);this.updateOperation.value=s,yield i,this.updateOperation.value===s&&this.updateOperation.clear()})}takeOwnership(e){this._register(e)}commitCurrentCompletion(){if(!this.ghostText)return;const t=this.currentCompletion;t&&this.commit(t)}commit(e){var t;const n=this.cache.clearAndLeak();e.snippetInfo?(this.editor.executeEdits("inlineSuggestion.accept",[Ot.replaceMove(e.range,""),...e.additionalTextEdits]),this.editor.setPosition(e.snippetInfo.range.getStartPosition()),(t=Vn.get(this.editor))===null||t===void 0||t.insert(e.snippetInfo.snippet)):this.editor.executeEdits("inlineSuggestion.accept",[Ot.replaceMove(e.range,e.insertText),...e.additionalTextEdits]),e.command?this.commandService.executeCommand(e.command.id,...e.command.arguments||[]).finally(()=>{n?.dispose()}).then(void 0,Hn):n?.dispose(),this.onDidChangeEmitter.fire()}get commands(){var e;return[...new Set(((e=this.cache.value)===null||e===void 0?void 0:e.completions.map(n=>n.inlineCompletion.sourceInlineCompletions))||[])].flatMap(n=>n.commands||[])}}u(nz,"InlineCompletionsSession");class XN{constructor(e,t){this.promise=e,this.triggerKind=t}dispose(){this.promise.cancel()}}u(XN,"UpdateOperation");class iz extends U{constructor(e,t,n,i){super(),this.editor=t,this.onChange=n,this.triggerKind=i,this.isDisposing=!1;const s=t.changeDecorations(r=>r.deltaDecorations([],e.items.map(a=>({range:a.range,options:{description:"inline-completion-tracking-range"}}))));this._register(He(()=>{this.isDisposing=!0,t.removeDecorations(s)})),this.completions=e.items.map((r,a)=>new sz(r,s[a])),this._register(t.onDidChangeModelContent(()=>{this.updateRanges()})),this._register(e)}updateRanges(){if(this.isDisposing)return;let e=!1;const t=this.editor.getModel();for(const n of this.completions){const i=t.getDecorationRange(n.decorationId);if(!i){Ie(new Error("Decoration has no range"));continue}n.synchronizedRange.equalsRange(i)||(e=!0,n.synchronizedRange=i)}e&&this.onChange()}}u(iz,"SynchronizedInlineCompletionsCache");class sz{constructor(e,t){this.inlineCompletion=e,this.decorationId=t,this.semanticId=JSON.stringify({text:this.inlineCompletion.insertText,abbreviation:this.inlineCompletion.filterText,startLine:this.inlineCompletion.range.startLineNumber,startColumn:this.inlineCompletion.range.startColumn,command:this.inlineCompletion.command}),this.synchronizedRange=e.range}toLiveInlineCompletion(){return{insertText:this.inlineCompletion.insertText,range:this.synchronizedRange,command:this.inlineCompletion.command,sourceProvider:this.inlineCompletion.sourceProvider,sourceInlineCompletions:this.inlineCompletion.sourceInlineCompletions,sourceInlineCompletion:this.inlineCompletion.sourceInlineCompletion,snippetInfo:this.inlineCompletion.snippetInfo,filterText:this.inlineCompletion.filterText,additionalTextEdits:this.inlineCompletion.additionalTextEdits}}}u(sz,"CachedInlineCompletion");function oz(o,e,t,n,i=Ge.None,s){return Va(this,void 0,void 0,function*(){const r=Ece(e,t),a=o.all(t),l=yield Promise.all(a.map(d=>Va(this,void 0,void 0,function*(){const h=yield Promise.resolve(d.provideInlineCompletions(t,e,n,i)).catch(Hn);return{completions:h,provider:d,dispose:()=>{h&&d.freeInlineCompletions(h)}}}))),c=new Map;for(const d of l){const h=d.completions;if(h)for(const g of h.items){let f=g.range?L.lift(g.range):r;if(f.startLineNumber!==f.endLineNumber)continue;let p,_;if(typeof g.insertText=="string"){if(p=g.insertText,s&&g.completeBracketPairs){p=kce(p,f.getStartPosition(),t,s);const C=p.length-g.insertText.length;C!==0&&(f=new L(f.startLineNumber,f.startColumn,f.endLineNumber,f.endColumn+C))}_=void 0}else"snippet"in g.insertText?(p=new Ll().parse(g.insertText.snippet).toString(),_={snippet:g.insertText.snippet,range:f}):Lw(g.insertText);const v={insertText:p,snippetInfo:_,range:f,command:g.command,sourceProvider:d.provider,sourceInlineCompletions:h,sourceInlineCompletion:g,filterText:g.filterText||p,additionalTextEdits:g.additionalTextEdits||yce()};c.set(JSON.stringify({insertText:p,range:g.range}),v)}}return{items:[...c.values()],dispose:()=>{for(const d of l)d.dispose()}}})}u(oz,"provideInlineCompletions");function Ece(o,e){const t=e.getWordAtPosition(o),n=e.getLineMaxColumn(o.lineNumber);return t?new L(o.lineNumber,t.startColumn,o.lineNumber,n):L.fromPositions(o,o.with(void 0,n))}u(Ece,"getDefaultRange");function kce(o,e,t,n){const s=t.getLineContent(e.lineNumber).substring(0,e.column-1)+o,r=t.tokenization.tokenizeLineWithEdit(e,s.length-(e.column-1),o),a=r?.sliceAndInflate(e.column-1,s.length,0);return a?Lce(a,n):o}u(kce,"closeBrackets");var Mce=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ZF=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};class ES{constructor(e){this.name=e}select(e,t,n){if(n.length===0)return 0;const i=n[0].score[0];for(let s=0;s<n.length;s++){const{score:r,completion:a}=n[s];if(r[0]!==i)break;if(a.preselect)return s}return 0}}u(ES,"Memory");class ZN extends ES{constructor(){super("first")}memorize(e,t,n){}toJSON(){}fromJSON(){}}u(ZN,"NoMemory");class rz extends ES{constructor(){super("recentlyUsed"),this._cache=new Al(300,.66),this._seq=0}memorize(e,t,n){const i=`${e.getLanguageId()}/${n.textLabel}`;this._cache.set(i,{touch:this._seq++,type:n.completion.kind,insertText:n.completion.insertText})}select(e,t,n){if(n.length===0)return 0;const i=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(i))return super.select(e,t,n);const s=n[0].score[0];let r=-1,a=-1,l=-1;for(let c=0;c<n.length&&n[c].score[0]===s;c++){const d=`${e.getLanguageId()}/${n[c].textLabel}`,h=this._cache.peek(d);if(h&&h.touch>l&&h.type===n[c].completion.kind&&h.insertText===n[c].completion.insertText&&(l=h.touch,a=c),n[c].completion.preselect&&r===-1)return r=c}return a!==-1?a:r!==-1?r:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();const t=0;for(const[n,i]of e)i.touch=t,i.type=typeof i.type=="number"?i.type:tb.fromString(i.type),this._cache.set(n,i);this._seq=this._cache.size}}u(rz,"LRUMemory");class az extends ES{constructor(){super("recentlyUsedByPrefix"),this._trie=iu.forStrings(),this._seq=0}memorize(e,t,n){const{word:i}=e.getWordUntilPosition(t),s=`${e.getLanguageId()}/${i}`;this._trie.set(s,{type:n.completion.kind,insertText:n.completion.insertText,touch:this._seq++})}select(e,t,n){const{word:i}=e.getWordUntilPosition(t);if(!i)return super.select(e,t,n);const s=`${e.getLanguageId()}/${i}`;let r=this._trie.get(s);if(r||(r=this._trie.findSubstr(s)),r)for(let a=0;a<n.length;a++){const{kind:l,insertText:c}=n[a].completion;if(l===r.type&&c===r.insertText)return a}return super.select(e,t,n)}toJSON(){const e=[];return this._trie.forEach((t,n)=>e.push([n,t])),e.sort((t,n)=>-(t[1].touch-n[1].touch)).forEach((t,n)=>t[1].touch=n),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(const[t,n]of e)n.type=typeof n.type=="number"?n.type:tb.fromString(n.type),this._trie.set(t,n)}}}u(az,"PrefixMemory");let n_=u(class P0{constructor(e,t){this._storageService=e,this._configService=t,this._disposables=new J,this._persistSoon=new pt(()=>this._saveState(),500),this._disposables.add(e.onWillSaveState(n=>{n.reason===Y1.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,n){this._withStrategy(e,t).memorize(e,t,n),this._persistSoon.schedule()}select(e,t,n){return this._withStrategy(e,t).select(e,t,n)}_withStrategy(e,t){var n;const i=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(t.lineNumber,t.column),resource:e.uri});if(((n=this._strategy)===null||n===void 0?void 0:n.name)!==i){this._saveState();const s=P0._strategyCtors.get(i)||ZN;this._strategy=new s;try{const a=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,l=this._storageService.get(`${P0._storagePrefix}/${i}`,a);l&&this._strategy.fromJSON(JSON.parse(l))}catch{}}return this._strategy}_saveState(){if(this._strategy){const t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,n=JSON.stringify(this._strategy);this._storageService.store(`${P0._storagePrefix}/${this._strategy.name}`,n,t,1)}}},"SuggestMemoryService");n_._strategyCtors=new Map([["recentlyUsedByPrefix",az],["recentlyUsed",rz],["first",ZN]]);n_._storagePrefix="suggest/memories";n_=Mce([ZF(0,No),ZF(1,rt)],n_);const kS=Je("ISuggestMemories");nt(kS,n_,!0);var Dce=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Ace=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let i_=u(class lz{constructor(e,t){this._editor=e,this._enabled=!1,this._ckAtEnd=lz.AtEnd.bindTo(t),this._configListener=this._editor.onDidChangeConfiguration(n=>n.hasChanged(113)&&this._update()),this._update()}dispose(){var e;this._configListener.dispose(),(e=this._selectionListener)===null||e===void 0||e.dispose(),this._ckAtEnd.reset()}_update(){const e=this._editor.getOption(113)==="on";if(this._enabled!==e)if(this._enabled=e,this._enabled){const t=u(()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}const n=this._editor.getModel(),i=this._editor.getSelection(),s=n.getWordAtPosition(i.getStartPosition());if(!s){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(s.endColumn===i.getStartPosition().column)},"checkForWordEnd");this._selectionListener=this._editor.onDidChangeCursorSelection(t),t()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}},"WordContextKey");i_.AtEnd=new ce("atEndOfWord",!1);i_=Dce([Ace(1,De)],i_);var Ice=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Nce=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let Ku=u(class R0{constructor(e,t){this._editor=e,this._index=0,this._ckOtherSuggestions=R0.OtherSuggestions.bindTo(t)}dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),(e=this._listener)===null||e===void 0||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:e,index:t},n){if(e.items.length===0){this.reset();return}if(R0._moveIndex(!0,e,t)===t){this.reset();return}this._acceptNext=n,this._model=e,this._index=t,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex(e,t,n){let i=n;for(;i=(i+t.items.length+(e?1:-1))%t.items.length,!(i===n||!t.items[i].completion.additionalTextEdits););return i}next(){this._move(!0)}prev(){this._move(!1)}_move(e){if(this._model)try{this._ignore=!0,this._index=R0._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}},"SuggestAlternatives");Ku.OtherSuggestions=new ce("hasOtherSuggestions",!1);Ku=Ice([Nce(1,De)],Ku);class cz{constructor(e,t,n){this._disposables=new J,this._disposables.add(t.onDidShow(()=>this._onItem(t.getFocusedItem()))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType(i=>{if(this._active&&!t.isFrozen()){const s=i.charCodeAt(i.length-1);this._active.acceptCharacters.has(s)&&e.getOption(0)&&n(this._active.item)}}))}_onItem(e){if(!e||!ci(e.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===e.item)return;const t=new Rd;for(const n of e.item.completion.commitCharacters)n.length>0&&t.add(n.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}u(cz,"CommitCharacterController");var Pce=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class es{provideSelectionRanges(e,t){return Pce(this,void 0,void 0,function*(){const n=[];for(const i of t){const s=[];n.push(s);const r=new Map;yield new Promise(a=>es._bracketsRightYield(a,0,e,i,r)),yield new Promise(a=>es._bracketsLeftYield(a,0,e,i,r,s))}return n})}static _bracketsRightYield(e,t,n,i,s){const r=new Map,a=Date.now();for(;;){if(t>=es._maxRounds){e();break}if(!i){e();break}const l=n.bracketPairs.findNextBracket(i);if(!l){e();break}if(Date.now()-a>es._maxDuration){setTimeout(()=>es._bracketsRightYield(e,t+1,n,i,s));break}if(l.bracketInfo.isOpeningBracket){const d=l.bracketInfo.bracketText,h=r.has(d)?r.get(d):0;r.set(d,h+1)}else{const d=l.bracketInfo.getClosedBrackets()[0].bracketText;let h=r.has(d)?r.get(d):0;if(h-=1,r.set(d,Math.max(0,h)),h<0){let g=s.get(d);g||(g=new vi,s.set(d,g)),g.push(l.range)}}i=l.range.getEndPosition()}}static _bracketsLeftYield(e,t,n,i,s,r){const a=new Map,l=Date.now();for(;;){if(t>=es._maxRounds&&s.size===0){e();break}if(!i){e();break}const c=n.bracketPairs.findPrevBracket(i);if(!c){e();break}if(Date.now()-l>es._maxDuration){setTimeout(()=>es._bracketsLeftYield(e,t+1,n,i,s,r));break}if(c.bracketInfo.isOpeningBracket){const h=c.bracketInfo.bracketText;let g=a.has(h)?a.get(h):0;if(g-=1,a.set(h,Math.max(0,g)),g<0){const f=s.get(h);if(f){const p=f.shift();f.size===0&&s.delete(h);const _=L.fromPositions(c.range.getEndPosition(),p.getStartPosition()),v=L.fromPositions(c.range.getStartPosition(),p.getEndPosition());r.push({range:_}),r.push({range:v}),es._addBracketLeading(n,v,r)}}}else{const h=c.bracketInfo.getClosedBrackets()[0].bracketText,g=a.has(h)?a.get(h):0;a.set(h,g+1)}i=c.range.getStartPosition()}}static _addBracketLeading(e,t,n){if(t.startLineNumber===t.endLineNumber)return;const i=t.startLineNumber,s=e.getLineFirstNonWhitespaceColumn(i);s!==0&&s!==t.startColumn&&(n.push({range:L.fromPositions(new H(i,s),t.getEndPosition())}),n.push({range:L.fromPositions(new H(i,1),t.getEndPosition())}));const r=i-1;if(r>0){const a=e.getLineFirstNonWhitespaceColumn(r);a===t.startColumn&&a!==e.getLineLastNonWhitespaceColumn(r)&&(n.push({range:L.fromPositions(new H(r,a),t.getEndPosition())}),n.push({range:L.fromPositions(new H(r,1),t.getEndPosition())}))}}}u(es,"BracketSelectionRangeProvider");es._maxDuration=30;es._maxRounds=2;var Rce=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class Co{static create(e,t){return Rce(this,void 0,void 0,function*(){if(!t.getOption(108).localityBonus||!t.hasModel())return Co.None;const n=t.getModel(),i=t.getPosition();if(!e.canComputeWordRanges(n.uri))return Co.None;const[s]=yield new es().provideSelectionRanges(n,[i]);if(s.length===0)return Co.None;const r=yield e.computeWordRanges(n.uri,s[0].range);if(!r)return Co.None;const a=n.getWordUntilPosition(i);return delete r[a.word],new class extends Co{distance(l,c){if(!i.equals(t.getPosition()))return 0;if(c.kind===17)return 2<<20;const d=typeof c.label=="string"?c.label:c.label.label,h=r[d];if(kO(h))return 2<<20;const g=DD(h,L.fromPositions(l),L.compareRangesUsingStarts),f=g>=0?h[g]:h[Math.max(0,~g-1)];let p=s.length;for(const _ of s){if(!L.containsRange(_.range,f))break;p-=1}return p}}})}}u(Co,"WordDistance");Co.None=new class extends Co{distance(){return 0}};let JF=u(class{constructor(e,t){this.leadingLineContent=e,this.characterCountDelta=t}},"LineContext");class Ga{constructor(e,t,n,i,s,r,a=Oy.default,l=void 0){this.clipboardText=l,this._snippetCompareFn=Ga._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=i,this._options=s,this._refilterKind=1,this._lineContext=n,this._fuzzyScoreOptions=a,r==="top"?this._snippetCompareFn=Ga._compareCompletionItemsSnippetsUp:r==="bottom"&&(this._snippetCompareFn=Ga._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){(this._lineContext.leadingLineContent!==e.leadingLineContent||this._lineContext.characterCountDelta!==e.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}get allProvider(){return this._ensureCachedState(),this._providerInfo.keys()}get incomplete(){this._ensureCachedState();const e=new Set;for(const[t,n]of this._providerInfo)n&&e.add(t);return e}adopt(e){const t=[];for(let n=0;n<this._items.length;)e.has(this._items[n].provider)?n++:(t.push(this._items[n]),this._items[n]=this._items[this._items.length-1],this._items.pop());return this._refilterKind=1,t}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._providerInfo=new Map;const e=[],{leadingLineContent:t,characterCountDelta:n}=this._lineContext;let i="",s="";const r=this._refilterKind===1?this._items:this._filteredItems,a=[],l=!this._options.filterGraceful||r.length>2e3?yf:dte;for(let c=0;c<r.length;c++){const d=r[c];if(d.isInvalid)continue;this._providerInfo.set(d.provider,Boolean(d.container.incomplete));const h=d.position.column-d.editStart.column,g=h+n-(d.position.column-this._column);if(i.length!==g&&(i=g===0?"":t.slice(-g),s=i.toLowerCase()),d.word=i,g===0)d.score=fr.Default;else{let f=0;for(;f<h;){const p=i.charCodeAt(f);if(p===32||p===9)f+=1;else break}if(f>=g)d.score=fr.Default;else if(typeof d.completion.filterText=="string"){const p=l(i,s,f,d.completion.filterText,d.filterTextLow,0,this._fuzzyScoreOptions);if(!p)continue;vx(d.completion.filterText,d.textLabel)===0?d.score=p:(d.score=rte(i,s,f,d.textLabel,d.labelLow,0),d.score[0]=p[0])}else{const p=l(i,s,f,d.textLabel,d.labelLow,0,this._fuzzyScoreOptions);if(!p)continue;d.score=p}}d.idx=c,d.distance=this._wordDistance.distance(d.position,d.completion),a.push(d),e.push(d.textLabel.length)}this._filteredItems=a.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?SL(e.length-.85,e,(c,d)=>c-d):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return 1;if(t.completion.kind===27)return-1}return Ga._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return-1;if(t.completion.kind===27)return 1}return Ga._compareCompletionItems(e,t)}}u(Ga,"CompletionModel");var Fce=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},hd=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Oce=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class Sd{constructor(e,t,n,i,s){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.auto=n,this.shy=i,this.noSelect=s}static shouldAutoTrigger(e){if(!e.hasModel())return!1;const t=e.getModel(),n=e.getPosition();t.tokenization.tokenizeIfCheap(n.lineNumber);const i=t.getWordAtPosition(n);return!(!i||i.endColumn!==n.column||!isNaN(Number(i.word)))}}u(Sd,"LineContext");function Vce(o,e,t){if(!Boolean(e.getContextKeyValue("inlineSuggestionVisible")))return!0;const n=t.getValue("editor.inlineSuggest.allowQuickSuggestions");return n!==void 0?Boolean(n):!1}u(Vce,"canShowQuickSuggest");function Hce(o,e,t){if(!Boolean(e.getContextKeyValue("inlineSuggestionVisible")))return!0;const n=t.getValue("editor.inlineSuggest.allowSuggestOnTriggerCharacters");return n!==void 0?Boolean(n):!1}u(Hce,"canShowSuggestOnTriggerCharacters");let qM=u(class dz{constructor(e,t,n,i,s,r,a,l){this._editor=e,this._editorWorkerService=t,this._clipboardService=n,this._telemetryService=i,this._logService=s,this._contextKeyService=r,this._configurationService=a,this._languageFeaturesService=l,this._toDispose=new J,this._triggerCharacterListener=new J,this._triggerQuickSuggest=new hs,this._state=0,this._completionDisposables=new J,this._onDidCancel=new R,this._onDidTrigger=new R,this._onDidSuggest=new R,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new re(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters()})),this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()}));let c=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{c=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{c=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(d=>{c||this._onCursorChange(d)})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{c||this._refilterCompletionItems()})),this._updateTriggerCharacters()}dispose(){st(this._triggerCharacterListener),st([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(83)||!this._editor.hasModel()||!this._editor.getOption(111))return;const e=new Map;for(const n of this._languageFeaturesService.completionProvider.all(this._editor.getModel()))for(const i of n.triggerCharacters||[]){let s=e.get(i);s||(s=new Set,s.add(Uae()),e.set(i,s)),s.add(n)}const t=u(n=>{if(!Hce(this._editor,this._contextKeyService,this._configurationService)||Sd.shouldAutoTrigger(this._editor))return;if(!n){const r=this._editor.getPosition();n=this._editor.getModel().getLineContent(r.lineNumber).substr(0,r.column-1)}let i="";_u(n.charCodeAt(n.length-1))?kn(n.charCodeAt(n.length-2))&&(i=n.substr(n.length-2)):i=n.charAt(n.length-1);const s=e.get(i);if(s){const r=this._completionModel?{items:this._completionModel.adopt(s),clipboardText:this._completionModel.clipboardText}:void 0;this.trigger({auto:!0,shy:!1,noSelect:!1,triggerCharacter:i},Boolean(this._completionModel),s,r)}},"checkTriggerCharacter");this._triggerCharacterListener.add(this._editor.onDidType(t)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(()=>t()))}get state(){return this._state}cancel(e=!1){var t;this._state!==0&&(this._triggerQuickSuggest.cancel(),(t=this._requestToken)===null||t===void 0||t.cancel(),this._requestToken=void 0,this._state=0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._state!==0&&(!this._editor.hasModel()||!this._languageFeaturesService.completionProvider.has(this._editor.getModel())?this.cancel():this.trigger({auto:this._state===2,shy:!1,noSelect:!1},!0))}_onCursorChange(e){if(!this._editor.hasModel())return;const t=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||e.reason!==0&&e.reason!==3||e.source!=="keyboard"&&e.source!=="deleteLeft"){this.cancel();return}this._state===0&&e.reason===0?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._state!==0&&e.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._state===0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){var e;jd.isAllOff(this._editor.getOption(81))||this._editor.getOption(108).snippetsPreventQuickSuggestions&&(!((e=Vn.get(this._editor))===null||e===void 0)&&e.isInSnippet())||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._state!==0||!Sd.shouldAutoTrigger(this._editor)||!this._editor.hasModel()||!this._editor.hasWidgetFocus())return;const t=this._editor.getModel(),n=this._editor.getPosition(),i=this._editor.getOption(81);if(!jd.isAllOff(i)){if(!jd.isAllOn(i)){t.tokenization.tokenizeIfCheap(n.lineNumber);const s=t.tokenization.getLineTokens(n.lineNumber),r=s.getStandardTokenType(s.findTokenIndexAtOffset(Math.max(n.column-1-1,0)));if(jd.valueFor(i,r)!=="on")return}Vce(this._editor,this._contextKeyService,this._configurationService)&&this._languageFeaturesService.completionProvider.has(t)&&this.trigger({auto:!0,shy:!1,noSelect:!1})}},this._editor.getOption(82)))}_refilterCompletionItems(){Promise.resolve().then(()=>{if(this._state===0||!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getPosition(),n=new Sd(e,t,this._state===2,!1,!1);this._onNewContext(n)})}trigger(e,t=!1,n,i,s){var r;if(!this._editor.hasModel())return;const a=this._editor.getModel(),l=e.auto,c=new Sd(a,this._editor.getPosition(),l,e.shy,e.noSelect);this.cancel(t),this._state=l?2:1,this._onDidTrigger.fire({auto:l,shy:e.shy,position:this._editor.getPosition()}),this._context=c;let d={triggerKind:(r=e.triggerKind)!==null&&r!==void 0?r:0};e.triggerCharacter&&(d={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new ti;const h=this._editor.getOption(103);let g=1;switch(h){case"top":g=0;break;case"bottom":g=2;break}const{itemKind:f,showDeprecated:p}=dz._createSuggestFilter(this._editor),_=new Uf(g,s?new Set:f,n,p),v=Co.create(this._editorWorkerService,this._editor),C=NN(this._languageFeaturesService.completionProvider,a,this._editor.getPosition(),_,d,this._requestToken.token);Promise.all([C,v]).then(([w,y])=>Oce(this,void 0,void 0,function*(){var S;if((S=this._requestToken)===null||S===void 0||S.dispose(),!this._editor.hasModel())return;let E=i?.clipboardText;if(!E&&w.needsClipboard&&(E=yield this._clipboardService.readText()),this._state===0)return;const k=this._editor.getModel();let T=w.items;if(i){const M=TU(g);T=T.concat(i.items).sort(M)}const x=new Sd(k,this._editor.getPosition(),l,e.shy,e.noSelect);this._completionModel=new Ga(T,this._context.column,{leadingLineContent:x.leadingLineContent,characterCountDelta:x.column-this._context.column},y,this._editor.getOption(108),this._editor.getOption(103),void 0,E),this._completionDisposables.add(w.disposable),this._onNewContext(x),this._reportDurationsTelemetry(w.durations)})).catch(Ie)}_reportDurationsTelemetry(e){this._telemetryGate++%230===0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)})}static _createSuggestFilter(e){const t=new Set;e.getOption(103)==="none"&&t.add(27);const i=e.getOption(108);return i.showMethods||t.add(0),i.showFunctions||t.add(1),i.showConstructors||t.add(2),i.showFields||t.add(3),i.showVariables||t.add(4),i.showClasses||t.add(5),i.showStructs||t.add(6),i.showInterfaces||t.add(7),i.showModules||t.add(8),i.showProperties||t.add(9),i.showEvents||t.add(10),i.showOperators||t.add(11),i.showUnits||t.add(12),i.showValues||t.add(13),i.showConstants||t.add(14),i.showEnums||t.add(15),i.showEnumMembers||t.add(16),i.showKeywords||t.add(17),i.showWords||t.add(18),i.showColors||t.add(19),i.showFiles||t.add(20),i.showReferences||t.add(21),i.showColors||t.add(22),i.showFolders||t.add(23),i.showTypeParameters||t.add(24),i.showSnippets||t.add(27),i.showUsers||t.add(25),i.showIssues||t.add(26),{itemKind:t,showDeprecated:i.showDeprecated}}_onNewContext(e){if(this._context){if(e.lineNumber!==this._context.lineNumber){this.cancel();return}if(vt(e.leadingLineContent)!==vt(this._context.leadingLineContent)){this.cancel();return}if(e.column<this._context.column){e.leadingWord.word?this.trigger({auto:this._context.auto,shy:!1,noSelect:!1},!0):this.cancel();return}if(this._completionModel){if(e.leadingWord.word.length!==0&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){const t=new Set(this._languageFeaturesService.completionProvider.all(this._editor.getModel()));for(const i of this._completionModel.allProvider)t.delete(i);const n=this._completionModel.adopt(new Set);this.trigger({auto:this._context.auto,shy:!1,noSelect:!1},!0,t,{items:n,clipboardText:this._completionModel.clipboardText});return}if(e.column>this._context.column&&this._completionModel.incomplete.size>0&&e.leadingWord.word.length!==0){const{incomplete:t}=this._completionModel,n=this._completionModel.adopt(t);this.trigger({auto:this._state===2,shy:!1,noSelect:!1,triggerKind:2},!0,t,{items:n,clipboardText:this._completionModel.clipboardText})}else{const t=this._completionModel.lineContext;let n=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},this._completionModel.items.length===0){if(Sd.shouldAutoTrigger(this._editor)&&this._context.leadingWord.endColumn<e.leadingWord.startColumn){this.trigger({auto:this._context.auto,shy:!1,noSelect:!1},!0);return}if(this._context.auto){this.cancel();return}else if(this._completionModel.lineContext=t,n=this._completionModel.items.length>0,n&&e.leadingWord.word.length===0){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,auto:this._context.auto,shy:this._context.shy,noSelect:this._context.noSelect,isFrozen:n})}}}}},"SuggestModel");qM=Fce([hd(1,co),hd(2,Nl),hd(3,Tr),hd(4,Ao),hd(5,De),hd(6,rt),hd(7,ue)],qM);class Cv{constructor(e,t){this._disposables=new J,this._lastOvertyped=[],this._empty=!0,this._disposables.add(e.onWillType(()=>{if(!this._empty||!e.hasModel())return;const n=e.getSelections(),i=n.length;let s=!1;for(let a=0;a<i;a++)if(!n[a].isEmpty()){s=!0;break}if(!s)return;this._lastOvertyped=[];const r=e.getModel();for(let a=0;a<i;a++){const l=n[a];if(r.getValueLengthInRange(l)>Cv._maxSelectionLength)return;this._lastOvertyped[a]={value:r.getValueInRange(l),multiline:l.startLineNumber!==l.endLineNumber}}this._empty=!1})),this._disposables.add(t.onDidCancel(n=>{!this._empty&&!n.retrigger&&(this._empty=!0)}))}getLastOvertypedInfo(e){if(!this._empty&&e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}}u(Cv,"OvertypingCapturer");Cv._maxSelectionLength=51200;var Bce=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},uL=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};class MS extends Vf{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();this.label&&(this.label.textContent=m("ddd","{0} ({1})",this._action.label,MS.symbolPrintEnter(e)))}static symbolPrintEnter(e){var t;return(t=e.getLabel())===null||t===void 0?void 0:t.replace(/\benter\b/gi,"⏎")}}u(MS,"StatusBarViewItem");let YM=u(class{constructor(e,t,n,i){this._menuService=n,this._contextKeyService=i,this._menuDisposables=new J,this.element=q(e,ee(".suggest-status-bar"));const s=u(r=>r instanceof Dc?t.createInstance(MS,r,void 0):void 0,"actionViewItemProvider");this._leftActions=new Cr(this.element,{actionViewItemProvider:s}),this._rightActions=new Cr(this.element,{actionViewItemProvider:s}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this.element.remove()}show(){const e=this._menuService.createMenu(Cc,this._contextKeyService),t=u(()=>{const n=[],i=[];for(const[s,r]of e.getActions())s==="left"?n.push(...r):i.push(...r);this._leftActions.clear(),this._leftActions.push(n),this._rightActions.clear(),this._rightActions.push(i)},"renderMenu");this._menuDisposables.add(e.onDidChange(()=>t())),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}},"SuggestWidgetStatus");YM=Bce([uL(1,Ne),uL(2,ah),uL(3,De)],YM);const Wce=I("symbolIcon.arrayForeground",{dark:Q,light:Q,hcDark:Q,hcLight:Q},m("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Uce=I("symbolIcon.booleanForeground",{dark:Q,light:Q,hcDark:Q,hcLight:Q},m("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Gce=I("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},m("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),zce=I("symbolIcon.colorForeground",{dark:Q,light:Q,hcDark:Q,hcLight:Q},m("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Kce=I("symbolIcon.constantForeground",{dark:Q,light:Q,hcDark:Q,hcLight:Q},m("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),jce=I("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},m("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),$ce=I("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},m("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),qce=I("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},m("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Yce=I("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},m("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Xce=I("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},m("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Zce=I("symbolIcon.fileForeground",{dark:Q,light:Q,hcDark:Q,hcLight:Q},m("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jce=I("symbolIcon.folderForeground",{dark:Q,light:Q,hcDark:Q,hcLight:Q},m("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Qce=I("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},m("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),ede=I("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},m("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),tde=I("symbolIcon.keyForeground",{dark:Q,light:Q,hcDark:Q,hcLight:Q},m("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),nde=I("symbolIcon.keywordForeground",{dark:Q,light:Q,hcDark:Q,hcLight:Q},m("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),ide=I("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},m("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),sde=I("symbolIcon.moduleForeground",{dark:Q,light:Q,hcDark:Q,hcLight:Q},m("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),ode=I("symbolIcon.namespaceForeground",{dark:Q,light:Q,hcDark:Q,hcLight:Q},m("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),rde=I("symbolIcon.nullForeground",{dark:Q,light:Q,hcDark:Q,hcLight:Q},m("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),ade=I("symbolIcon.numberForeground",{dark:Q,light:Q,hcDark:Q,hcLight:Q},m("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),lde=I("symbolIcon.objectForeground",{dark:Q,light:Q,hcDark:Q,hcLight:Q},m("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),cde=I("symbolIcon.operatorForeground",{dark:Q,light:Q,hcDark:Q,hcLight:Q},m("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),dde=I("symbolIcon.packageForeground",{dark:Q,light:Q,hcDark:Q,hcLight:Q},m("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),ude=I("symbolIcon.propertyForeground",{dark:Q,light:Q,hcDark:Q,hcLight:Q},m("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),hde=I("symbolIcon.referenceForeground",{dark:Q,light:Q,hcDark:Q,hcLight:Q},m("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),gde=I("symbolIcon.snippetForeground",{dark:Q,light:Q,hcDark:Q,hcLight:Q},m("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),fde=I("symbolIcon.stringForeground",{dark:Q,light:Q,hcDark:Q,hcLight:Q},m("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),pde=I("symbolIcon.structForeground",{dark:Q,light:Q,hcDark:Q,hcLight:Q},m("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),mde=I("symbolIcon.textForeground",{dark:Q,light:Q,hcDark:Q,hcLight:Q},m("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),bde=I("symbolIcon.typeParameterForeground",{dark:Q,light:Q,hcDark:Q,hcLight:Q},m("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),_de=I("symbolIcon.unitForeground",{dark:Q,light:Q,hcDark:Q,hcLight:Q},m("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),vde=I("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},m("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));At((o,e)=>{const t=o.getColor(Wce);t&&e.addRule(`${b.symbolArray.cssSelector} { color: ${t}; }`);const n=o.getColor(Uce);n&&e.addRule(`${b.symbolBoolean.cssSelector} { color: ${n}; }`);const i=o.getColor(Gce);i&&e.addRule(`${b.symbolClass.cssSelector} { color: ${i}; }`);const s=o.getColor(ide);s&&e.addRule(`${b.symbolMethod.cssSelector} { color: ${s}; }`);const r=o.getColor(zce);r&&e.addRule(`${b.symbolColor.cssSelector} { color: ${r}; }`);const a=o.getColor(Kce);a&&e.addRule(`${b.symbolConstant.cssSelector} { color: ${a}; }`);const l=o.getColor(jce);l&&e.addRule(`${b.symbolConstructor.cssSelector} { color: ${l}; }`);const c=o.getColor($ce);c&&e.addRule(`
			${b.symbolValue.cssSelector},${b.symbolEnum.cssSelector} { color: ${c}; }`);const d=o.getColor(qce);d&&e.addRule(`${b.symbolEnumMember.cssSelector} { color: ${d}; }`);const h=o.getColor(Yce);h&&e.addRule(`${b.symbolEvent.cssSelector} { color: ${h}; }`);const g=o.getColor(Xce);g&&e.addRule(`${b.symbolField.cssSelector} { color: ${g}; }`);const f=o.getColor(Zce);f&&e.addRule(`${b.symbolFile.cssSelector} { color: ${f}; }`);const p=o.getColor(Jce);p&&e.addRule(`${b.symbolFolder.cssSelector} { color: ${p}; }`);const _=o.getColor(Qce);_&&e.addRule(`${b.symbolFunction.cssSelector} { color: ${_}; }`);const v=o.getColor(ede);v&&e.addRule(`${b.symbolInterface.cssSelector} { color: ${v}; }`);const C=o.getColor(tde);C&&e.addRule(`${b.symbolKey.cssSelector} { color: ${C}; }`);const w=o.getColor(nde);w&&e.addRule(`${b.symbolKeyword.cssSelector} { color: ${w}; }`);const y=o.getColor(sde);y&&e.addRule(`${b.symbolModule.cssSelector} { color: ${y}; }`);const S=o.getColor(ode);S&&e.addRule(`${b.symbolNamespace.cssSelector} { color: ${S}; }`);const E=o.getColor(rde);E&&e.addRule(`${b.symbolNull.cssSelector} { color: ${E}; }`);const k=o.getColor(ade);k&&e.addRule(`${b.symbolNumber.cssSelector} { color: ${k}; }`);const T=o.getColor(lde);T&&e.addRule(`${b.symbolObject.cssSelector} { color: ${T}; }`);const x=o.getColor(cde);x&&e.addRule(`${b.symbolOperator.cssSelector} { color: ${x}; }`);const M=o.getColor(dde);M&&e.addRule(`${b.symbolPackage.cssSelector} { color: ${M}; }`);const F=o.getColor(ude);F&&e.addRule(`${b.symbolProperty.cssSelector} { color: ${F}; }`);const V=o.getColor(hde);V&&e.addRule(`${b.symbolReference.cssSelector} { color: ${V}; }`);const G=o.getColor(gde);G&&e.addRule(`${b.symbolSnippet.cssSelector} { color: ${G}; }`);const j=o.getColor(fde);j&&e.addRule(`${b.symbolString.cssSelector} { color: ${j}; }`);const ae=o.getColor(pde);ae&&e.addRule(`${b.symbolStruct.cssSelector} { color: ${ae}; }`);const he=o.getColor(mde);he&&e.addRule(`${b.symbolText.cssSelector} { color: ${he}; }`);const Se=o.getColor(bde);Se&&e.addRule(`${b.symbolTypeParameter.cssSelector} { color: ${Se}; }`);const Te=o.getColor(_de);Te&&e.addRule(`${b.symbolUnit.cssSelector} { color: ${Te}; }`);const ke=o.getColor(vde);ke&&e.addRule(`${b.symbolVariable.cssSelector} { color: ${ke}; }`)});class JN{constructor(){this._onDidWillResize=new R,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new R,this.onDidResize=this._onDidResize.event,this._sashListener=new J,this._size=new Ct(0,0),this._minSize=new Ct(0,0),this._maxSize=new Ct(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new Yn(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new Yn(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new Yn(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:L1.North}),this._southSash=new Yn(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:L1.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let e,t=0,n=0;this._sashListener.add(fe.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{e===void 0&&(this._onDidWillResize.fire(),e=this._size,t=0,n=0)})),this._sashListener.add(fe.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{e!==void 0&&(e=void 0,t=0,n=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(i=>{e&&(n=i.currentX-i.startX,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(i=>{e&&(n=-(i.currentX-i.startX),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(i=>{e&&(t=-(i.currentY-i.startY),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(i=>{e&&(t=i.currentY-i.startY,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(fe.any(this._eastSash.onDidReset,this._westSash.onDidReset)(i=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(fe.any(this._northSash.onDidReset,this._southSash.onDidReset)(i=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,t,n,i){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=n?3:0,this._westSash.state=i?3:0}layout(e=this.size.height,t=this.size.width){const{height:n,width:i}=this._minSize,{height:s,width:r}=this._maxSize;e=Math.max(n,Math.min(s,e)),t=Math.max(i,Math.min(r,t));const a=new Ct(t,e);Ct.equals(a,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=a,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}}u(JN,"ResizableHTMLElement");var Cde=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},wde=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};function QN(o){return!!o&&Boolean(o.completion.documentation||o.completion.detail&&o.completion.detail!==o.completion.label)}u(QN,"canExpandCompletionItem");let XM=u(class{constructor(e,t){this._editor=e,this._onDidClose=new R,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new R,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new J,this._renderDisposeable=new J,this._borderWidth=1,this._size=new Ct(330,0),this.domNode=ee(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=t.createInstance(xl,{editor:e}),this._body=ee(".body"),this._scrollbar=new lp(this._body,{alwaysConsumeMouseWheel:!0}),q(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=q(this._body,ee(".header")),this._close=q(this._header,ee("span"+b.close.cssSelector)),this._close.title=m("details.close","Close"),this._type=q(this._header,ee("p.type")),this._docs=q(this._body,ee("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(46)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){const e=this._editor.getOptions(),t=e.get(46),n=t.getMassagedFontFamily(),i=e.get(109)||t.fontSize,s=e.get(110)||t.lineHeight,r=t.fontWeight,a=`${i}px`,l=`${s}px`;this.domNode.style.fontSize=a,this.domNode.style.lineHeight=`${s/i}`,this.domNode.style.fontWeight=r,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=n,this._close.style.height=l,this._close.style.width=l}getLayoutInfo(){const e=this._editor.getOption(110)||this._editor.getOption(46).lineHeight,t=this._borderWidth,n=t*2;return{lineHeight:e,borderWidth:t,borderHeight:n,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=m("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,this.getLayoutInfo().lineHeight*2),this._onDidChangeContents.fire(this)}renderItem(e,t){var n,i;this._renderDisposeable.clear();let{detail:s,documentation:r}=e.completion;if(t){let a="";a+=`score: ${e.score[0]}
`,a+=`prefix: ${(n=e.word)!==null&&n!==void 0?n:"(no prefix)"}
`,a+=`word: ${e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel}
`,a+=`distance: ${e.distance} (localityBonus-setting)
`,a+=`index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||"label"}
`,a+=`commit_chars: ${(i=e.completion.commitCharacters)===null||i===void 0?void 0:i.join("")}
`,r=new Ei().appendCodeblock("empty",a),s=`Provider: ${e.provider._debugDisplayName}`}if(!t&&!QN(e)){this.clearContents();return}if(this.domNode.classList.remove("no-docs","no-type"),s){const a=s.length>1e5?`${s.substr(0,1e5)}…`:s;this._type.textContent=a,this._type.title=a,Ss(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gmi.test(a))}else Tn(this._type),this._type.title="",Ui(this._type),this.domNode.classList.add("no-type");if(Tn(this._docs),typeof r=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=r;else if(r){this._docs.classList.add("markdown-docs"),Tn(this._docs);const a=this._markdownRenderer.render(r);this._docs.appendChild(a.element),this._renderDisposeable.add(a),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=a=>{a.preventDefault(),a.stopPropagation()},this._close.onclick=a=>{a.preventDefault(),a.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get size(){return this._size}layout(e,t){const n=new Ct(e,t);Ct.equals(n,this._size)||(this._size=n,EX(this.domNode,e,t)),this._scrollbar.scanDomNode()}scrollDown(e=8){this._body.scrollTop+=e}scrollUp(e=8){this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}},"SuggestDetailsWidget");XM=Cde([wde(1,Ne)],XM);class uz{constructor(e,t){this.widget=e,this._editor=t,this._disposables=new J,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new JN,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let n,i,s=0,r=0;this._disposables.add(this._resizable.onDidWillResize(()=>{n=this._topLeft,i=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(a=>{if(n&&i){this.widget.layout(a.dimension.width,a.dimension.height);let l=!1;a.west&&(r=i.width-a.dimension.width,l=!0),a.north&&(s=i.height-a.dimension.height,l=!0),l&&this._applyTopLeft({top:n.top+s,left:n.left+r})}a.done&&(n=void 0,i=void 0,s=0,r=0,this._userSize=a.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{var a;this._anchorBox&&this._placeAtAnchor(this._anchorBox,(a=this._userSize)!==null&&a!==void 0?a:this.widget.size,this._preferAlignAtTop)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return null}show(){this._added||(this._editor.addOverlayWidget(this),this.getDomNode().style.position="fixed",this._added=!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e,t){var n;const i=e.getBoundingClientRect();this._anchorBox=i,this._preferAlignAtTop=t,this._placeAtAnchor(this._anchorBox,(n=this._userSize)!==null&&n!==void 0?n:this.widget.size,t)}_placeAtAnchor(e,t,n){var i;const s=Xw(document.body),r=this.widget.getLayoutInfo(),a=new Ct(220,2*r.lineHeight),l=e.top,c=function(){const y=s.width-(e.left+e.width+r.borderWidth+r.horizontalPadding),S=-r.borderWidth+e.left+e.width,E=new Ct(y,s.height-e.top-r.borderHeight-r.verticalPadding),k=E.with(void 0,e.top+e.height-r.borderHeight-r.verticalPadding);return{top:l,left:S,fit:y-t.width,maxSizeTop:E,maxSizeBottom:k,minSize:a.with(Math.min(y,a.width))}}(),d=function(){const y=e.left-r.borderWidth-r.horizontalPadding,S=Math.max(r.horizontalPadding,e.left-t.width-r.borderWidth),E=new Ct(y,s.height-e.top-r.borderHeight-r.verticalPadding),k=E.with(void 0,e.top+e.height-r.borderHeight-r.verticalPadding);return{top:l,left:S,fit:y-t.width,maxSizeTop:E,maxSizeBottom:k,minSize:a.with(Math.min(y,a.width))}}(),h=function(){const y=e.left,S=-r.borderWidth+e.top+e.height,E=new Ct(e.width-r.borderHeight,s.height-e.top-e.height-r.verticalPadding);return{top:S,left:y,fit:E.height-t.height,maxSizeBottom:E,maxSizeTop:E,minSize:a.with(E.width)}}(),g=[c,d,h],f=(i=g.find(y=>y.fit>=0))!==null&&i!==void 0?i:g.sort((y,S)=>S.fit-y.fit)[0],p=e.top+e.height-r.borderHeight;let _,v=t.height;const C=Math.max(f.maxSizeTop.height,f.maxSizeBottom.height);v>C&&(v=C);let w;n?v<=f.maxSizeTop.height?(_=!0,w=f.maxSizeTop):(_=!1,w=f.maxSizeBottom):v<=f.maxSizeBottom.height?(_=!1,w=f.maxSizeBottom):(_=!0,w=f.maxSizeTop),this._applyTopLeft({left:f.left,top:_?f.top:p-v}),this.getDomNode().style.position="fixed",this._resizable.enableSashes(!_,f===c,_,f!==c),this._resizable.minSize=f.minSize,this._resizable.maxSize=w,this._resizable.layout(v,Math.min(w.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this.getDomNode().style.left=`${this._topLeft.left}px`,this.getDomNode().style.top=`${this._topLeft.top}px`}}u(uz,"SuggestDetailsOverlay");var sl;(function(o){o[o.FILE=0]="FILE",o[o.FOLDER=1]="FOLDER",o[o.ROOT_FOLDER=2]="ROOT_FOLDER"})(sl||(sl={}));const yde=/(?:\/|^)(?:([^\/]+)\/)?([^\/]+)$/;function FC(o,e,t,n){const i=n===sl.ROOT_FOLDER?["rootfolder-icon"]:n===sl.FOLDER?["folder-icon"]:["file-icon"];if(t){let s;if(t.scheme===Pe.data)s=Nc.parseMetaData(t).get(Nc.META_DATA_LABEL);else{const r=t.path.match(yde);r?(s=OC(r[2].toLowerCase()),r[1]&&i.push(`${OC(r[1].toLowerCase())}-name-dir-icon`)):s=OC(t.authority.toLowerCase())}if(n===sl.FOLDER)i.push(`${s}-name-folder-icon`);else{if(s){if(i.push(`${s}-name-file-icon`),i.push("name-file-icon"),s.length<=255){const a=s.split(".");for(let l=1;l<a.length;l++)i.push(`${a.slice(l).join(".")}-ext-file-icon`)}i.push("ext-file-icon")}const r=Sde(o,e,t);r&&i.push(`${OC(r)}-lang-file-icon`)}}return i}u(FC,"getIconClasses");function Sde(o,e,t){if(!t)return null;let n=null;if(t.scheme===Pe.data){const s=Nc.parseMetaData(t).get(Nc.META_DATA_MIME);s&&(n=e.getLanguageIdByMimeType(s))}else{const i=o.getModel(t);i&&(n=i.getLanguageId())}return n&&n!==Js?n:e.guessLanguageIdByFilepathOrFirstLine(t)}u(Sde,"detectLanguageId");function OC(o){return o.replace(/[\11\12\14\15\40]/g,"/")}u(OC,"cssEscape");var Tde=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},hL=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Zp;function hz(o){return`suggest-aria-id:${o}`}u(hz,"getAriaId");const Lde=vn("suggest-more-info",b.chevronRight,m("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),xde=new(Zp=u(class F0{extract(e,t){if(e.textLabel.match(F0._regexStrict))return t[0]=e.textLabel,!0;if(e.completion.detail&&e.completion.detail.match(F0._regexStrict))return t[0]=e.completion.detail,!0;if(typeof e.completion.documentation=="string"){const n=F0._regexRelaxed.exec(e.completion.documentation);if(n&&(n.index===0||n.index+n[0].length===e.completion.documentation.length))return t[0]=n[0],!0}return!1}},"ColorExtractor"),Zp._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,Zp._regexStrict=new RegExp(`^${Zp._regexRelaxed.source}$`,"i"),Zp);let ZM=u(class{constructor(e,t,n,i){this._editor=e,this._modelService=t,this._languageService=n,this._themeService=i,this._onDidToggleDetails=new R,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){const t=Object.create(null);t.disposables=new J,t.root=e,t.root.classList.add("show-file-icons"),t.icon=q(e,ee(".icon")),t.colorspan=q(t.icon,ee("span.colorspan"));const n=q(e,ee(".contents")),i=q(n,ee(".main"));t.iconContainer=q(i,ee(".icon-label.codicon")),t.left=q(i,ee("span.left")),t.right=q(i,ee("span.right")),t.iconLabel=new Gb(t.left,{supportHighlights:!0,supportIcons:!0}),t.disposables.add(t.iconLabel),t.parametersLabel=q(t.left,ee("span.signature-label")),t.qualifierLabel=q(t.left,ee("span.qualifier-label")),t.detailsLabel=q(t.right,ee("span.details-label")),t.readMore=q(t.right,ee("span.readMore"+ct.asCSSSelector(Lde))),t.readMore.title=m("readMore","Read More");const s=u(()=>{const r=this._editor.getOptions(),a=r.get(46),l=a.getMassagedFontFamily(),c=a.fontFeatureSettings,d=r.get(109)||a.fontSize,h=r.get(110)||a.lineHeight,g=a.fontWeight,f=a.letterSpacing,p=`${d}px`,_=`${h}px`,v=`${f}px`;t.root.style.fontSize=p,t.root.style.fontWeight=g,t.root.style.letterSpacing=v,i.style.fontFamily=l,i.style.fontFeatureSettings=c,i.style.lineHeight=_,t.icon.style.height=_,t.icon.style.width=_,t.readMore.style.height=_,t.readMore.style.width=_},"configureFont");return s(),t.disposables.add(this._editor.onDidChangeConfiguration(r=>{(r.hasChanged(46)||r.hasChanged(109)||r.hasChanged(110))&&s()})),t}renderElement(e,t,n){const{completion:i}=e;n.root.id=hz(t),n.colorspan.style.backgroundColor="";const s={labelEscapeNewLines:!0,matches:Fy(e.score)},r=[];if(i.kind===19&&xde.extract(e,r))n.icon.className="icon customcolor",n.iconContainer.className="icon hide",n.colorspan.style.backgroundColor=r[0];else if(i.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){n.icon.className="icon hide",n.iconContainer.className="icon hide";const a=FC(this._modelService,this._languageService,be.from({scheme:"fake",path:e.textLabel}),sl.FILE),l=FC(this._modelService,this._languageService,be.from({scheme:"fake",path:i.detail}),sl.FILE);s.extraClasses=a.length>l.length?a:l}else i.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(n.icon.className="icon hide",n.iconContainer.className="icon hide",s.extraClasses=[FC(this._modelService,this._languageService,be.from({scheme:"fake",path:e.textLabel}),sl.FOLDER),FC(this._modelService,this._languageService,be.from({scheme:"fake",path:i.detail}),sl.FOLDER)].flat()):(n.icon.className="icon hide",n.iconContainer.className="",n.iconContainer.classList.add("suggest-icon",...Mi.asClassNameArray(tb.toIcon(i.kind))));i.tags&&i.tags.indexOf(1)>=0&&(s.extraClasses=(s.extraClasses||[]).concat(["deprecated"]),s.matches=[]),n.iconLabel.setLabel(e.textLabel,void 0,s),typeof i.label=="string"?(n.parametersLabel.textContent="",n.detailsLabel.textContent=gL(i.detail||""),n.root.classList.add("string-label")):(n.parametersLabel.textContent=gL(i.label.detail||""),n.detailsLabel.textContent=gL(i.label.description||""),n.root.classList.remove("string-label")),this._editor.getOption(108).showInlineDetails?Ss(n.detailsLabel):Ui(n.detailsLabel),QN(e)?(n.right.classList.add("can-expand-details"),Ss(n.readMore),n.readMore.onmousedown=a=>{a.stopPropagation(),a.preventDefault()},n.readMore.onclick=a=>{a.stopPropagation(),a.preventDefault(),this._onDidToggleDetails.fire()}):(n.right.classList.remove("can-expand-details"),Ui(n.readMore),n.readMore.onmousedown=null,n.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}},"ItemRenderer");ZM=Tde([hL(1,Kt),hL(2,Gt),hL(3,wt)],ZM);function gL(o){return o.replace(/\r\n|\r|\n/g,"")}u(gL,"stripNewLines");var Ede=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},VC=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},kde=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};I("editorSuggestWidget.background",{dark:dn,light:dn,hcDark:dn,hcLight:dn},m("editorSuggestWidgetBackground","Background color of the suggest widget."));I("editorSuggestWidget.border",{dark:Ya,light:Ya,hcDark:Ya,hcLight:Ya},m("editorSuggestWidgetBorder","Border color of the suggest widget."));const HC=I("editorSuggestWidget.foreground",{dark:Es,light:Es,hcDark:Es,hcLight:Es},m("editorSuggestWidgetForeground","Foreground color of the suggest widget."));I("editorSuggestWidget.selectedForeground",{dark:am,light:am,hcDark:am,hcLight:am},m("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget."));I("editorSuggestWidget.selectedIconForeground",{dark:lm,light:lm,hcDark:lm,hcLight:lm},m("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget."));const Mde=I("editorSuggestWidget.selectedBackground",{dark:cm,light:cm,hcDark:cm,hcLight:cm},m("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget."));I("editorSuggestWidget.highlightForeground",{dark:wo,light:wo,hcDark:wo,hcLight:wo},m("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget."));I("editorSuggestWidget.focusHighlightForeground",{dark:Yv,light:Yv,hcDark:Yv,hcLight:Yv},m("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused."));I("editorSuggestWidgetStatus.foreground",{dark:pe(HC,.5),light:pe(HC,.5),hcDark:pe(HC,.5),hcLight:pe(HC,.5)},m("editorSuggestWidgetStatusForeground","Foreground color of the suggest widget status."));class gz{constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof Wu}`}restore(){var e;const t=(e=this._service.get(this._key,0))!==null&&e!==void 0?e:"";try{const n=JSON.parse(t);if(Ct.is(n))return Ct.lift(n)}catch{}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}}u(gz,"PersistedWidgetSize");let s_=u(class JM{constructor(e,t,n,i,s){this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new hs,this._disposables=new J,this._onDidSelect=new R,this._onDidFocus=new R,this._onDidHide=new R,this._onDidShow=new R,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new R,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new JN,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new fz(this,e),this._persistedSize=new gz(t,e);class r{constructor(f,p,_=!1,v=!1){this.persistedSize=f,this.currentSize=p,this.persistHeight=_,this.persistWidth=v}}u(r,"ResizeState");let a;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),a=new r(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(g=>{var f,p,_,v;if(this._resize(g.dimension.width,g.dimension.height),a&&(a.persistHeight=a.persistHeight||!!g.north||!!g.south,a.persistWidth=a.persistWidth||!!g.east||!!g.west),!!g.done){if(a){const{itemHeight:C,defaultSize:w}=this.getLayoutInfo(),y=Math.round(C/2);let{width:S,height:E}=this.element.size;(!a.persistHeight||Math.abs(a.currentSize.height-E)<=y)&&(E=(p=(f=a.persistedSize)===null||f===void 0?void 0:f.height)!==null&&p!==void 0?p:w.height),(!a.persistWidth||Math.abs(a.currentSize.width-S)<=y)&&(S=(v=(_=a.persistedSize)===null||_===void 0?void 0:_.width)!==null&&v!==void 0?v:w.width),this._persistedSize.store(new Ct(S,E))}this._contentWidget.unlockPreference(),a=void 0}})),this._messageElement=q(this.element.domNode,ee(".message")),this._listElement=q(this.element.domNode,ee(".tree"));const l=s.createInstance(XM,this.editor);l.onDidClose(this.toggleDetails,this,this._disposables),this._details=new uz(l,this.editor);const c=u(()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(108).showIcons),"applyIconStyle");c();const d=s.createInstance(ZM,this.editor);this._disposables.add(d),this._disposables.add(d.onDidToggleDetails(()=>this.toggleDetails())),this._list=new Io("SuggestWidget",this._listElement,{getHeight:g=>this.getLayoutInfo().itemHeight,getTemplateId:g=>"suggestion"},[d],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,multipleSelectionSupport:!1,accessibilityProvider:{getRole:()=>"option",getWidgetAriaLabel:()=>m("suggest","Suggest"),getWidgetRole:()=>"listbox",getAriaLabel:g=>{let f=g.textLabel;if(typeof g.completion.label!="string"){const{detail:C,description:w}=g.completion.label;C&&w?f=m("label.full","{0}{1}, {2}",f,C,w):C?f=m("label.detail","{0}{1}",f,C):w&&(f=m("label.desc","{0}, {1}",f,w))}if(!g.isResolved||!this._isDetailsVisible())return f;const{documentation:p,detail:_}=g.completion,v=$s("{0}{1}",_||"",p?typeof p=="string"?p:p.value:"");return m("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",f,v)}}}),this._status=s.createInstance(YM,this.element.domNode);const h=u(()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(108).showStatusBar),"applyStatusBarStyle");h(),this._disposables.add(Nu(this._list,i,{listInactiveFocusBackground:Mde,listInactiveFocusOutline:Vt})),this._disposables.add(i.onDidColorThemeChange(g=>this._onThemeChange(g))),this._onThemeChange(i.getColorTheme()),this._disposables.add(this._list.onMouseDown(g=>this._onListMouseDownOrTap(g))),this._disposables.add(this._list.onTap(g=>this._onListMouseDownOrTap(g))),this._disposables.add(this._list.onDidChangeSelection(g=>this._onListSelection(g))),this._disposables.add(this._list.onDidChangeFocus(g=>this._onListFocus(g))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(g=>{g.hasChanged(108)&&(h(),c())})),this._ctxSuggestWidgetVisible=qe.Visible.bindTo(n),this._ctxSuggestWidgetDetailsVisible=qe.DetailsVisible.bindTo(n),this._ctxSuggestWidgetMultipleSuggestions=qe.MultipleSuggestions.bindTo(n),this._ctxSuggestWidgetHasFocusedSuggestion=qe.HasFocusedSuggestion.bindTo(n),this._disposables.add(Dn(this._details.widget.domNode,"keydown",g=>{this._onDetailsKeydown.fire(g)})),this._disposables.add(this.editor.onMouseDown(g=>this._onEditorMouseDown(g)))}dispose(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(e){typeof e.element>"u"||typeof e.index>"u"||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){const n=this._completionModel;n&&(this._onDidSelect.fire({item:e,index:t,model:n}),this.editor.focus())}_onThemeChange(e){this._details.widget.borderWidth=ui(e.type)?2:1}_onListFocus(e){var t;if(this._ignoreFocusEvents)return;if(!e.elements.length){this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0}),this._ctxSuggestWidgetHasFocusedSuggestion.set(!1);return}if(!this._completionModel)return;this._ctxSuggestWidgetHasFocusedSuggestion.set(!0);const n=e.elements[0],i=e.indexes[0];n!==this._focusedItem&&((t=this._currentSuggestionDetails)===null||t===void 0||t.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=n,this._list.reveal(i),this._currentSuggestionDetails=On(s=>kde(this,void 0,void 0,function*(){const r=vu(()=>{this._isDetailsVisible()&&this.showDetails(!0)},250),a=s.onCancellationRequested(()=>r.dispose()),l=yield n.resolve(s);return r.dispose(),a.dispose(),l})),this._currentSuggestionDetails.then(()=>{i>=this._list.length||n!==this._list.element(i)||(this._ignoreFocusEvents=!0,this._list.splice(i,1,[n]),this._list.setFocus([i]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:hz(i)}))}).catch(Ie)),this._onDidFocus.fire({item:n,index:i,model:this._completionModel})}_setState(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle("frozen",e===4),this.element.domNode.classList.remove("message"),e){case 0:Ui(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._ctxSuggestWidgetHasFocusedSuggestion.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=JM.LOADING_MESSAGE,Ui(this._listElement,this._status.element),Ss(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=JM.NO_SUGGESTIONS_MESSAGE,Ui(this._listElement,this._status.element),Ss(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 3:Ui(this._messageElement),Ss(this._listElement,this._status.element),this._show();break;case 4:Ui(this._messageElement),Ss(this._listElement,this._status.element),this._show();break;case 5:Ui(this._messageElement),Ss(this._listElement,this._status.element),this._details.show(),this._show();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(e,t){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=vu(()=>this._setState(1),t)))}showSuggestions(e,t,n,i){var s,r;if(this._contentWidget.setPosition(this.editor.getPosition()),(s=this._loadingTimeout)===null||s===void 0||s.dispose(),(r=this._currentSuggestionDetails)===null||r===void 0||r.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),n&&this._state!==2&&this._state!==0){this._setState(4);return}const a=this._completionModel.items.length,l=a===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(a>1),l){this._setState(i?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._list.splice(0,this._list.length,this._completionModel.items),this._setState(n?4:3),t>=0&&(this._list.reveal(t,0),this._list.setFocus([t])),this._layout(this.element.size),this._details.widget.domNode.classList.remove("focused")}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):this._state===3&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}toggleDetails(){this._isDetailsVisible()?(this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):(QN(this._list.getFocusedElements()[0])||this._explainMode)&&(this._state===3||this._state===5||this._state===4)&&(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._positionDetails(),this.editor.focus(),this.element.domNode.classList.add("shows-details")}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var e;(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();const t=this._persistedSize.restore(),n=Math.ceil(this.getLayoutInfo().itemHeight*4.3);t&&t.height<n&&this._persistedSize.store(t.with(void 0,n))}isFrozen(){return this._state===4}_afterRender(e){if(e===null){this._isDetailsVisible()&&this._details.hide();return}this._state===2||this._state===1||(this._isDetailsVisible()&&this._details.show(),this._positionDetails())}_layout(e){var t,n,i;if(!this.editor.hasModel()||!this.editor.getDomNode())return;const s=Xw(document.body),r=this.getLayoutInfo();e||(e=r.defaultSize);let a=e.height,l=e.width;if(this._status.element.style.lineHeight=`${r.itemHeight}px`,this._state===2||this._state===1)a=r.itemHeight+r.borderHeight,l=r.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new Ct(l,a),this._contentWidget.setPreference(2);else{const c=s.width-r.borderHeight-2*r.horizontalPadding;l>c&&(l=c);const d=this._completionModel?this._completionModel.stats.pLabelLen*r.typicalHalfwidthCharacterWidth:l,h=r.statusBarHeight+this._list.contentHeight+r.borderHeight,g=r.itemHeight+r.statusBarHeight,f=li(this.editor.getDomNode()),p=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),_=f.top+p.top+p.height,v=Math.min(s.height-_-r.verticalPadding,h),C=f.top+p.top-r.verticalPadding,w=Math.min(C,h);let y=Math.min(Math.max(w,v)+r.borderHeight,h);a===((t=this._cappedHeight)===null||t===void 0?void 0:t.capped)&&(a=this._cappedHeight.wanted),a<g&&(a=g),a>y&&(a=y);const S=150;a>v||this._forceRenderingAbove&&C>S?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),y=w):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),y=v),this.element.preferredSize=new Ct(d,r.defaultSize.height),this.element.maxSize=new Ct(c,y),this.element.minSize=new Ct(220,g),this._cappedHeight=a===h?{wanted:(i=(n=this._cappedHeight)===null||n===void 0?void 0:n.wanted)!==null&&i!==void 0?i:e.height,capped:a}:void 0}this._resize(l,a)}_resize(e,t){const{width:n,height:i}=this.element.maxSize;e=Math.min(n,e),t=Math.min(i,t);const{statusBarHeight:s}=this.getLayoutInfo();this._list.layout(t-s,e),this._listElement.style.height=`${t-s}px`,this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){var e;this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,((e=this._contentWidget.getPosition())===null||e===void 0?void 0:e.preference[0])===2)}getLayoutInfo(){const e=this.editor.getOption(46),t=ts(this.editor.getOption(110)||e.lineHeight,8,1e3),n=!this.editor.getOption(108).showStatusBar||this._state===2||this._state===1?0:t,i=this._details.widget.borderWidth,s=2*i;return{itemHeight:t,statusBarHeight:n,borderWidth:i,borderHeight:s,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new Ct(430,n+12*t+s)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}},"SuggestWidget");s_.LOADING_MESSAGE=m("suggestWidget.loading","Loading...");s_.NO_SUGGESTIONS_MESSAGE=m("suggestWidget.noSuggestions","No suggestions.");s_=Ede([VC(1,No),VC(2,De),VC(3,wt),VC(4,Ne)],s_);class fz{constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return this._hidden||!this._position||!this._preference?null:{position:this._position,preference:[this._preference]}}beforeRender(){const{height:e,width:t}=this._widget.element.size,{borderWidth:n,horizontalPadding:i}=this._widget.getLayoutInfo();return new Ct(t+2*n+i,e+2*n)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}}u(fz,"SuggestContentWidget");var Dde=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},zh=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};class pz{constructor(e,t){if(this._model=e,this._position=t,e.getLineMaxColumn(t.lineNumber)!==t.column){const i=e.getOffsetAt(t),s=e.getPositionAt(i+1);this._marker=e.deltaDecorations([],[{range:L.fromPositions(t,s),options:{description:"suggest-line-suffix",stickiness:1}}])}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.deltaDecorations(this._marker,[])}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){const t=this._model.getDecorationRange(this._marker[0]);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}else return this._model.getLineMaxColumn(e.lineNumber)-e.column}}u(pz,"LineSuffix");let Lo=u(class mz{constructor(e,t,n,i,s,r,a){this._memoryService=t,this._commandService=n,this._contextKeyService=i,this._instantiationService=s,this._logService=r,this._telemetryService=a,this._lineSuffix=new gi,this._toDispose=new J,this._selectors=new bz(h=>h.priority),this._telemetryGate=0,this.editor=e,this.model=s.createInstance(qM,this.editor);const l=qe.InsertMode.bindTo(i);l.set(e.getOption(108).insertMode),this.model.onDidTrigger(()=>l.set(e.getOption(108).insertMode)),this.widget=this._toDispose.add(new ol(()=>{const h=this._instantiationService.createInstance(s_,this.editor);this._toDispose.add(h),this._toDispose.add(h.onDidSelect(v=>this._insertSuggestion(v,0),this));const g=new cz(this.editor,h,v=>this._insertSuggestion(v,2));this._toDispose.add(g),this._toDispose.add(this.model.onDidSuggest(v=>{v.completionModel.items.length===0&&g.reset()}));const f=qe.MakesTextEdit.bindTo(this._contextKeyService),p=qe.HasInsertAndReplaceRange.bindTo(this._contextKeyService),_=qe.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add(He(()=>{f.reset(),p.reset(),_.reset()})),this._toDispose.add(h.onDidFocus(({item:v})=>{const C=this.editor.getPosition(),w=v.editStart.column,y=C.column;let S=!0;this.editor.getOption(1)==="smart"&&this.model.state===2&&!v.completion.additionalTextEdits&&!(v.completion.insertTextRules&4)&&y-w===v.completion.insertText.length&&(S=this.editor.getModel().getValueInRange({startLineNumber:C.lineNumber,startColumn:w,endLineNumber:C.lineNumber,endColumn:y})!==v.completion.insertText),f.set(S),p.set(!H.equals(v.editInsertEnd,v.editReplaceEnd)),_.set(Boolean(v.provider.resolveCompletionItem)||Boolean(v.completion.documentation)||v.completion.detail!==v.completion.label)})),this._toDispose.add(h.onDetailsKeyDown(v=>{if(v.toKeybinding().equals(new Ec(!0,!1,!1,!1,33))||Xe&&v.toKeybinding().equals(new Ec(!1,!1,!1,!0,33))){v.stopPropagation();return}v.toKeybinding().isModifierKey()||this.editor.focus()})),h})),this._overtypingCapturer=this._toDispose.add(new ol(()=>this._toDispose.add(new Cv(this.editor,this.model)))),this._alternatives=this._toDispose.add(new ol(()=>this._toDispose.add(new Ku(this.editor,this._contextKeyService)))),this._toDispose.add(s.createInstance(i_,e)),this._toDispose.add(this.model.onDidTrigger(h=>{this.widget.value.showTriggered(h.auto,h.shy?250:50),this._lineSuffix.value=new pz(this.editor.getModel(),h.position)})),this._toDispose.add(this.model.onDidSuggest(h=>{if(h.shy)return;let g=-1;if(!h.noSelect){for(const f of this._selectors.itemsOrderedByPriorityDesc)if(g=f.select(this.editor.getModel(),this.editor.getPosition(),h.completionModel.items),g!==-1)break;g===-1&&(g=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),h.completionModel.items))}this.widget.value.showSuggestions(h.completionModel,g,h.isFrozen,h.auto)})),this._toDispose.add(this.model.onDidCancel(h=>{h.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{this.model.cancel(),this.model.clear()}));const c=qe.AcceptSuggestionsOnEnter.bindTo(i),d=u(()=>{const h=this.editor.getOption(1);c.set(h==="on"||h==="smart")},"updateFromConfig");this._toDispose.add(this.editor.onDidChangeConfiguration(()=>d())),d()}static get(e){return e.getContribution(mz.ID)}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose()}_insertSuggestion(e,t){if(!e||!e.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;const n=Vn.get(this.editor);if(!n)return;const i=this.editor.getModel(),s=i.getAlternativeVersionId(),{item:r}=e,a=[],l=new ti;t&1||this.editor.pushUndoStop();const c=this.getOverwriteInfo(r,Boolean(t&8));if(this._memoryService.memorize(i,this.editor.getPosition(),r),Array.isArray(r.completion.additionalTextEdits)){const h=wl.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",r.completion.additionalTextEdits.map(g=>Ot.replaceMove(L.lift(g.range),g.text))),h.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!r.isResolved){const h=new Ai(!0);let g;const f=i.onDidChangeContent(C=>{if(C.isFlush){l.cancel(),f.dispose();return}for(const w of C.changes){const y=L.getEndPosition(w.range);(!g||H.isBefore(y,g))&&(g=y)}}),p=t;t|=2;let _=!1;const v=this.editor.onWillType(()=>{v.dispose(),_=!0,p&2||this.editor.pushUndoStop()});a.push(r.resolve(l.token).then(()=>{if(!r.completion.additionalTextEdits||l.token.isCancellationRequested||g&&r.completion.additionalTextEdits.some(w=>H.isBefore(g,L.getStartPosition(w.range))))return!1;_&&this.editor.pushUndoStop();const C=wl.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",r.completion.additionalTextEdits.map(w=>Ot.replaceMove(L.lift(w.range),w.text))),C.restoreRelativeVerticalPositionOfCursor(this.editor),(_||!(p&2))&&this.editor.pushUndoStop(),!0}).then(C=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",h.elapsed(),C),f.dispose(),v.dispose()}))}let{insertText:d}=r.completion;r.completion.insertTextRules&4||(d=Ll.escape(d)),n.insert(d,{overwriteBefore:c.overwriteBefore,overwriteAfter:c.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(r.completion.insertTextRules&1),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),t&2||this.editor.pushUndoStop(),r.completion.command?r.completion.command.id===Sp.id?this.model.trigger({auto:!0,shy:!1,noSelect:!1},!0):(a.push(this._commandService.executeCommand(r.completion.command.id,...r.completion.command.arguments?[...r.completion.command.arguments]:[]).catch(Ie)),this.model.cancel()):this.model.cancel(),t&4&&this._alternatives.value.set(e,h=>{for(l.cancel();i.canUndo();){s!==i.getAlternativeVersionId()&&i.undo(),this._insertSuggestion(h,3|(t&8?8:0));break}}),this._alertCompletionItem(r),Promise.all(a).finally(()=>{this._reportSuggestionAcceptedTelemetry(r,i,e),this.model.clear(),l.dispose()})}_reportSuggestionAcceptedTelemetry(e,t,n){var i;if(this._telemetryGate++%100!==0)return;const s=e.extensionId?e.extensionId.value:((i=n.item.provider._debugDisplayName)!==null&&i!==void 0?i:"unknown").split("(",1)[0].toLowerCase();this._telemetryService.publicLog2("suggest.acceptedSuggestion",{providerId:s,kind:e.completion.kind,basenameHash:nA(ro(t.uri)).toString(16),languageId:t.getLanguageId(),fileExtension:tee(t.uri)})}getOverwriteInfo(e,t){bt(this.editor.hasModel());let n=this.editor.getOption(108).insertMode==="replace";t&&(n=!n);const i=e.position.column-e.editStart.column,s=(n?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column,r=this.editor.getPosition().column-e.position.column,a=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:i+r,overwriteAfter:s+a}}_alertCompletionItem(e){if(ci(e.completion.additionalTextEdits)){const t=m("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);Zn(t)}}triggerSuggest(e,t,n,i){this.editor.hasModel()&&(this.model.trigger({auto:t??!1,shy:!1,noSelect:i??!1},!1,e,void 0,n),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;const t=this.editor.getPosition(),n=u(()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},"fallback"),i=u(s=>{if(s.completion.insertTextRules&4||s.completion.additionalTextEdits)return!0;const r=this.editor.getPosition(),a=s.editStart.column,l=r.column;return l-a!==s.completion.insertText.length?!0:this.editor.getModel().getValueInRange({startLineNumber:r.lineNumber,startColumn:a,endLineNumber:r.lineNumber,endColumn:l})!==s.completion.insertText},"makesTextEdit");fe.once(this.model.onDidTrigger)(s=>{const r=[];fe.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{st(r),n()},void 0,r),this.model.onDidSuggest(({completionModel:a})=>{if(st(r),a.items.length===0){n();return}const l=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),a.items),c=a.items[l];if(!i(c)){n();return}this.editor.pushUndoStop(),this._insertSuggestion({index:l,item:c,model:a},7)},void 0,r)}),this.model.trigger({auto:!1,shy:!0,noSelect:!1}),this.editor.revealPosition(t,0),this.editor.focus()}acceptSelectedSuggestion(e,t){const n=this.widget.value.getFocusedItem();let i=0;e&&(i|=4),t&&(i|=8),this._insertSuggestion(n,i)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}registerSelector(e){return this._selectors.register(e)}},"SuggestController");Lo.ID="editor.contrib.suggestController";Lo=Dde([zh(1,kS),zh(2,hn),zh(3,De),zh(4,Ne),zh(5,Ao),zh(6,Tr)],Lo);class bz{constructor(e){this.prioritySelector=e,this._items=new Array}register(e){if(this._items.indexOf(e)!==-1)throw new Error("Value is already registered");return this._items.push(e),this._items.sort((t,n)=>this.prioritySelector(n)-this.prioritySelector(t)),{dispose:()=>{const t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}}get itemsOrderedByPriorityDesc(){return this._items}}u(bz,"PriorityRegistry");class Sp extends de{constructor(){super({id:Sp.id,label:m("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:oe.and(A.writable,A.hasCompletionItemProvider),kbOpts:{kbExpr:A.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,t,n){const i=Lo.get(t);if(!i)return;let s,r;n&&typeof n=="object"&&(n.auto===!0&&(s=!0),n.noSelection===!0&&(r=!0)),i.triggerSuggest(void 0,s,void 0,r)}}u(Sp,"TriggerSuggestAction");Sp.id="editor.action.triggerSuggest";it(Lo.ID,Lo);ie(Sp);const ao=100+90,ps=Ln.bindToContribution(Lo.get);te(new ps({id:"acceptSelectedSuggestion",precondition:oe.and(qe.Visible,qe.HasFocusedSuggestion),handler(o){o.acceptSelectedSuggestion(!0,!1)},kbOpts:[{primary:2,kbExpr:oe.and(qe.Visible,A.textInputFocus),weight:ao},{primary:3,kbExpr:oe.and(qe.Visible,A.textInputFocus,qe.AcceptSuggestionsOnEnter,qe.MakesTextEdit),weight:ao}],menuOpts:[{menuId:Cc,title:m("accept.insert","Insert"),group:"left",order:1,when:qe.HasInsertAndReplaceRange.toNegated()},{menuId:Cc,title:m("accept.insert","Insert"),group:"left",order:1,when:oe.and(qe.HasInsertAndReplaceRange,qe.InsertMode.isEqualTo("insert"))},{menuId:Cc,title:m("accept.replace","Replace"),group:"left",order:1,when:oe.and(qe.HasInsertAndReplaceRange,qe.InsertMode.isEqualTo("replace"))}]}));te(new ps({id:"acceptAlternativeSelectedSuggestion",precondition:oe.and(qe.Visible,A.textInputFocus,qe.HasFocusedSuggestion),kbOpts:{weight:ao,kbExpr:A.textInputFocus,primary:1027,secondary:[1026]},handler(o){o.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:Cc,group:"left",order:2,when:oe.and(qe.HasInsertAndReplaceRange,qe.InsertMode.isEqualTo("insert")),title:m("accept.replace","Replace")},{menuId:Cc,group:"left",order:2,when:oe.and(qe.HasInsertAndReplaceRange,qe.InsertMode.isEqualTo("replace")),title:m("accept.insert","Insert")}]}));Qe.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion");te(new ps({id:"hideSuggestWidget",precondition:qe.Visible,handler:o=>o.cancelSuggestWidget(),kbOpts:{weight:ao,kbExpr:A.textInputFocus,primary:9,secondary:[1033]}}));te(new ps({id:"selectNextSuggestion",precondition:oe.and(qe.Visible,qe.MultipleSuggestions),handler:o=>o.selectNextSuggestion(),kbOpts:{weight:ao,kbExpr:A.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}}));te(new ps({id:"selectNextPageSuggestion",precondition:oe.and(qe.Visible,qe.MultipleSuggestions),handler:o=>o.selectNextPageSuggestion(),kbOpts:{weight:ao,kbExpr:A.textInputFocus,primary:12,secondary:[2060]}}));te(new ps({id:"selectLastSuggestion",precondition:oe.and(qe.Visible,qe.MultipleSuggestions),handler:o=>o.selectLastSuggestion()}));te(new ps({id:"selectPrevSuggestion",precondition:oe.and(qe.Visible,qe.MultipleSuggestions),handler:o=>o.selectPrevSuggestion(),kbOpts:{weight:ao,kbExpr:A.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}}));te(new ps({id:"selectPrevPageSuggestion",precondition:oe.and(qe.Visible,qe.MultipleSuggestions),handler:o=>o.selectPrevPageSuggestion(),kbOpts:{weight:ao,kbExpr:A.textInputFocus,primary:11,secondary:[2059]}}));te(new ps({id:"selectFirstSuggestion",precondition:oe.and(qe.Visible,qe.MultipleSuggestions),handler:o=>o.selectFirstSuggestion()}));te(new ps({id:"toggleSuggestionDetails",precondition:qe.Visible,handler:o=>o.toggleSuggestionDetails(),kbOpts:{weight:ao,kbExpr:A.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:Cc,group:"right",order:1,when:oe.and(qe.DetailsVisible,qe.CanResolve),title:m("detail.more","show less")},{menuId:Cc,group:"right",order:1,when:oe.and(qe.DetailsVisible.toNegated(),qe.CanResolve),title:m("detail.less","show more")}]}));te(new ps({id:"toggleExplainMode",precondition:qe.Visible,handler:o=>o.toggleExplainMode(),kbOpts:{weight:100,primary:2133}}));te(new ps({id:"toggleSuggestionFocus",precondition:qe.Visible,handler:o=>o.toggleSuggestionFocus(),kbOpts:{weight:ao,kbExpr:A.textInputFocus,primary:2570,mac:{primary:778}}}));te(new ps({id:"insertBestCompletion",precondition:oe.and(A.textInputFocus,oe.equals("config.editor.tabCompletion","on"),i_.AtEnd,qe.Visible.toNegated(),Ku.OtherSuggestions.toNegated(),Vn.InSnippetMode.toNegated()),handler:(o,e)=>{o.triggerSuggestAndAcceptBest(Ki(e)?Object.assign({fallback:"tab"},e):{fallback:"tab"})},kbOpts:{weight:ao,primary:2}}));te(new ps({id:"insertNextSuggestion",precondition:oe.and(A.textInputFocus,oe.equals("config.editor.tabCompletion","on"),Ku.OtherSuggestions,qe.Visible.toNegated(),Vn.InSnippetMode.toNegated()),handler:o=>o.acceptNextSuggestion(),kbOpts:{weight:ao,kbExpr:A.textInputFocus,primary:2}}));te(new ps({id:"insertPrevSuggestion",precondition:oe.and(A.textInputFocus,oe.equals("config.editor.tabCompletion","on"),Ku.OtherSuggestions,qe.Visible.toNegated(),Vn.InSnippetMode.toNegated()),handler:o=>o.acceptPrevSuggestion(),kbOpts:{weight:ao,kbExpr:A.textInputFocus,primary:1026}}));ie(class extends de{constructor(){super({id:"editor.action.resetSuggestSize",label:m("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(o,e){var t;(t=Lo.get(e))===null||t===void 0||t.resetWidgetSize()}});class _z extends U{constructor(e,t){super(),this.editor=e,this.suggestControllerPreselector=t,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this.onDidChangeEmitter=new R,this.onDidChange=this.onDidChangeEmitter.event,this.setInactiveDelayed=this._register(new pt(()=>{this.isSuggestWidgetVisible||this._isActive&&(this._isActive=!1,this.onDidChangeEmitter.fire())},100)),this._register(e.onKeyDown(i=>{i.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(e.onKeyUp(i=>{i.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));const n=Lo.get(this.editor);if(n){this._register(n.registerSelector({priority:100,select:(r,a,l)=>{const c=this.editor.getModel(),d=mw(c,this.suggestControllerPreselector());if(!d)return-1;const h=H.lift(a),g=l.map((p,_)=>{const v=QF(n,h,p,this.isShiftKeyPressed),C=mw(c,v?.normalizedInlineCompletion);if(!C)return;const w=Ade(d.range,C.range)&&d.insertText.startsWith(C.insertText);return{index:_,valid:w,prefixLength:C.insertText.length,suggestItem:p}}).filter(p=>p&&p.valid),f=AO(g,Am(p=>p.prefixLength,L$));return f?f.index:-1}}));let i=!1;const s=u(()=>{i||(i=!0,this._register(n.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(n.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.setInactiveDelayed.schedule(),this.update(this._isActive)})),this._register(n.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))},"bindToSuggestWidget");this._register(fe.once(n.model.onDidTrigger)(r=>{s()}))}this.update(this._isActive)}get state(){if(this._isActive)return{selectedItem:this._currentSuggestItemInfo}}update(e){const t=this.getSuggestItemInfo();let n=!1;Ide(this._currentSuggestItemInfo,t)||(this._currentSuggestItemInfo=t,n=!0),this._isActive!==e&&(this._isActive=e,n=!0),n&&this.onDidChangeEmitter.fire()}getSuggestItemInfo(){const e=Lo.get(this.editor);if(!e||!this.isSuggestWidgetVisible)return;const t=e.widget.value.getFocusedItem();if(t)return QF(e,this.editor.getPosition(),t.item,this.isShiftKeyPressed)}stopForceRenderingAbove(){const e=Lo.get(this.editor);e&&e.stopForceRenderingAbove()}forceRenderingAbove(){const e=Lo.get(this.editor);e&&e.forceRenderingAbove()}}u(_z,"SuggestWidgetInlineCompletionProvider");function Ade(o,e){return e.startLineNumber===o.startLineNumber&&e.startColumn===o.startColumn&&(e.endLineNumber<o.endLineNumber||e.endLineNumber===o.endLineNumber&&e.endColumn<=o.endColumn)}u(Ade,"rangeStartsWith");function Ide(o,e){return o===e?!0:!o||!e?!1:o.completionItemKind===e.completionItemKind&&o.isSnippetText===e.isSnippetText&&Sce(o.normalizedInlineCompletion,e.normalizedInlineCompletion)}u(Ide,"suggestItemInfoEquals");function QF(o,e,t,n){if(Array.isArray(t.completion.additionalTextEdits)&&t.completion.additionalTextEdits.length>0)return{completionItemKind:t.completion.kind,isSnippetText:!1,normalizedInlineCompletion:{range:L.fromPositions(e,e),insertText:"",filterText:"",snippetInfo:void 0,additionalTextEdits:[]}};let{insertText:i}=t.completion,s=!1;if(t.completion.insertTextRules&4){const a=new Ll().parse(i),l=o.editor.getModel();if(a.children.length>100)return;hw.adjustWhitespace(l,e,a,!0,!0),i=a.toString(),s=!0}const r=o.getOverwriteInfo(t,n);return{isSnippetText:s,completionItemKind:t.completion.kind,normalizedInlineCompletion:{insertText:i,filterText:i,range:L.fromPositions(e.delta(0,-r.overwriteBefore),e.delta(0,Math.max(r.overwriteAfter,0))),snippetInfo:void 0,additionalTextEdits:[]}}}u(QF,"suggestionToSuggestItemInfo");var Nde=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Pde=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},eO=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let QM=u(class extends YN{constructor(e,t,n){super(e),this.cache=t,this.languageFeaturesService=n,this.suggestionInlineCompletionSource=this._register(new _z(this.editor,()=>{var i,s;return(s=(i=this.cache.value)===null||i===void 0?void 0:i.completions[0])===null||s===void 0?void 0:s.toLiveInlineCompletion()})),this.updateOperation=this._register(new gi),this.updateCacheSoon=this._register(new pt(()=>this.updateCache(),50)),this.minReservedLineCount=0,this._register(this.suggestionInlineCompletionSource.onDidChange(()=>{if(!this.editor.hasModel())return;this.updateCacheSoon.schedule(),this.suggestionInlineCompletionSource.state||(this.minReservedLineCount=0);const s=this.ghostText;s&&(this.minReservedLineCount=Math.max(this.minReservedLineCount,Rde(s.parts.map(r=>r.lines.length-1)))),this.minReservedLineCount>=1?this.suggestionInlineCompletionSource.forceRenderingAbove():this.suggestionInlineCompletionSource.stopForceRenderingAbove(),this.onDidChangeEmitter.fire()})),this._register(this.cache.onDidChange(()=>{this.onDidChangeEmitter.fire()})),this._register(this.editor.onDidChangeCursorPosition(i=>{this.minReservedLineCount=0,this.updateCacheSoon.schedule(),this.onDidChangeEmitter.fire()})),this._register(He(()=>this.suggestionInlineCompletionSource.stopForceRenderingAbove()))}get isActive(){return this.suggestionInlineCompletionSource.state!==void 0}isSuggestionPreviewEnabled(){return this.editor.getOption(108).preview}updateCache(){return eO(this,void 0,void 0,function*(){const e=this.suggestionInlineCompletionSource.state;if(!e||!e.selectedItem)return;const t={text:e.selectedItem.normalizedInlineCompletion.insertText,range:e.selectedItem.normalizedInlineCompletion.range,isSnippetText:e.selectedItem.isSnippetText,completionKind:e.selectedItem.completionItemKind},n=this.editor.getPosition();if(e.selectedItem.isSnippetText||e.selectedItem.completionItemKind===27||e.selectedItem.completionItemKind===20||e.selectedItem.completionItemKind===23){this.cache.clear();return}const i=On(r=>eO(this,void 0,void 0,function*(){let a;try{a=yield oz(this.languageFeaturesService.inlineCompletionsProvider,n,this.editor.getModel(),{triggerKind:Gs.Automatic,selectedSuggestionInfo:t},r)}catch(l){Ie(l);return}if(r.isCancellationRequested){a.dispose();return}this.cache.setValue(this.editor,a,Gs.Automatic),this.onDidChangeEmitter.fire()})),s=new XN(i,Gs.Automatic);this.updateOperation.value=s,yield i,this.updateOperation.value===s&&this.updateOperation.clear()})}get ghostText(){var e,t,n;const i=this.isSuggestionPreviewEnabled(),s=this.editor.getModel(),r=mw(s,(t=(e=this.cache.value)===null||e===void 0?void 0:e.completions[0])===null||t===void 0?void 0:t.toLiveInlineCompletion()),a=this.suggestionInlineCompletionSource.state,l=mw(s,(n=a?.selectedItem)===null||n===void 0?void 0:n.normalizedInlineCompletion),c=r&&l&&r.insertText.startsWith(l.insertText)&&r.range.equalsRange(l.range);if(!i&&!c)return;const d=c?r:l||r,h=c?d.insertText.length-l.insertText.length:0;return this.toGhostText(d,h)}toGhostText(e,t){const n=this.editor.getOptions().get(108).previewMode;return e?ez(e,this.editor.getModel(),n,this.editor.getPosition(),t)||new $N(e.range.endLineNumber,[],this.minReservedLineCount):void 0}},"SuggestWidgetPreviewModel");QM=Nde([Pde(2,ue)],QM);function Rde(o){return o.reduce((e,t)=>e+t,0)}u(Rde,"sum");var Fde=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Ode=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Vde=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class vz extends U{constructor(){super(...arguments),this.onDidChangeEmitter=new R,this.onDidChange=this.onDidChangeEmitter.event,this.hasCachedGhostText=!1,this.currentModelRef=this._register(new gi)}get targetModel(){var e;return(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object}setTargetModel(e){var t;((t=this.currentModelRef.value)===null||t===void 0?void 0:t.object)!==e&&(this.currentModelRef.clear(),this.currentModelRef.value=e?vce(e,e.onDidChange(()=>{this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire()})):void 0,this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire())}get ghostText(){var e,t;return this.hasCachedGhostText||(this.cachedGhostText=(t=(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object)===null||t===void 0?void 0:t.ghostText,this.hasCachedGhostText=!0),this.cachedGhostText}setExpanded(e){var t;(t=this.targetModel)===null||t===void 0||t.setExpanded(e)}get minReservedLineCount(){return this.targetModel?this.targetModel.minReservedLineCount:0}}u(vz,"DelegatingModel");let eD=u(class extends vz{constructor(e,t){super(),this.editor=e,this.instantiationService=t,this.sharedCache=this._register(new Cz),this.suggestWidgetAdapterModel=this._register(this.instantiationService.createInstance(QM,this.editor,this.sharedCache)),this.inlineCompletionsModel=this._register(this.instantiationService.createInstance($M,this.editor,this.sharedCache)),this._register(this.suggestWidgetAdapterModel.onDidChange(()=>{this.updateModel()})),this.updateModel()}get activeInlineCompletionsModel(){if(this.targetModel===this.inlineCompletionsModel)return this.inlineCompletionsModel}updateModel(){this.setTargetModel(this.suggestWidgetAdapterModel.isActive?this.suggestWidgetAdapterModel:this.inlineCompletionsModel),this.inlineCompletionsModel.setActive(this.targetModel===this.inlineCompletionsModel)}shouldShowHoverAt(e){var t;const n=(t=this.activeInlineCompletionsModel)===null||t===void 0?void 0:t.ghostText;return n?n.parts.some(i=>e.containsPosition(new H(n.lineNumber,i.column))):!1}triggerInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.trigger(Gs.Explicit)}commitInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.commitCurrentSuggestion()}hideInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.hide()}showNextInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.showNext()}showPreviousInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.showPrevious()}hasMultipleInlineCompletions(){var e;return Vde(this,void 0,void 0,function*(){const t=yield(e=this.activeInlineCompletionsModel)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}},"GhostTextModel");eD=Fde([Ode(1,Ne)],eD);class Cz extends U{constructor(){super(...arguments),this.onDidChangeEmitter=new R,this.onDidChange=this.onDidChangeEmitter.event,this.cache=this._register(new gi)}get value(){return this.cache.value}setValue(e,t,n){this.cache.value=new iz(t,e,()=>this.onDidChangeEmitter.fire(),n)}clearAndLeak(){return this.cache.clearAndLeak()}clear(){this.cache.clear()}}u(Cz,"SharedInlineCompletionCache");var Hde=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},tO=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},fL;const nO=(fL=window.trustedTypes)===null||fL===void 0?void 0:fL.createPolicy("editorGhostText",{createHTML:o=>o});let tD=u(class extends U{constructor(e,t,n,i){super(),this.editor=e,this.model=t,this.instantiationService=n,this.languageService=i,this.disposed=!1,this.partsWidget=this._register(this.instantiationService.createInstance(yz,this.editor)),this.additionalLinesWidget=this._register(new Sz(this.editor,this.languageService.languageIdCodec)),this.viewMoreContentWidget=void 0,this.replacementDecoration=this._register(new wz(this.editor)),this._register(this.editor.onDidChangeConfiguration(s=>{(s.hasChanged(29)||s.hasChanged(107)||s.hasChanged(90)||s.hasChanged(85)||s.hasChanged(47)||s.hasChanged(46)||s.hasChanged(61))&&this.update()})),this._register(He(()=>{var s;this.disposed=!0,this.update(),(s=this.viewMoreContentWidget)===null||s===void 0||s.dispose(),this.viewMoreContentWidget=void 0})),this._register(t.onDidChange(()=>{this.update()})),this.update()}shouldShowHoverAtViewZone(e){return this.additionalLinesWidget.viewZoneId===e}update(){var e;const t=this.model.ghostText;if(!this.editor.hasModel()||!t||this.disposed){this.partsWidget.clear(),this.additionalLinesWidget.clear(),this.replacementDecoration.clear();return}const n=new Array,i=new Array;function s(c,d){if(i.length>0){const h=i[i.length-1];d&&h.decorations.push(new ji(h.content.length+1,h.content.length+1+c[0].length,d,0)),h.content+=c[0],c=c.slice(1)}for(const h of c)i.push({content:h,decorations:d?[new ji(1,h.length+1,d,0)]:[]})}u(s,"addToAdditionalLines"),t instanceof qN?this.replacementDecoration.setDecorations([{range:new L(t.lineNumber,t.columnStart,t.lineNumber,t.columnStart+t.length),options:{inlineClassName:"inline-completion-text-to-replace",description:"GhostTextReplacement"}}]):this.replacementDecoration.setDecorations([]);const r=this.editor.getModel().getLineContent(t.lineNumber);let a,l=0;for(const c of t.parts){let d=c.lines;a===void 0?(n.push({column:c.column,text:d[0],preview:c.preview}),d=d.slice(1)):s([r.substring(l,c.column-1)],void 0),d.length>0&&(s(d,"ghost-text"),a===void 0&&c.column<=r.length&&(a=c.column)),l=c.column-1}a!==void 0&&s([r.substring(l)],void 0),this.partsWidget.setParts(t.lineNumber,n,a!==void 0?{column:a,length:r.length+1-a}:void 0),this.additionalLinesWidget.updateLines(t.lineNumber,i,t.additionalReservedLineCount),(e=this.viewMoreContentWidget)===null||e===void 0||e.dispose(),this.viewMoreContentWidget=void 0}renderViewMoreLines(e,t,n){const i=this.editor.getOption(46),s=document.createElement("div");s.className="suggest-preview-additional-widget",di(s,i);const r=document.createElement("span");r.className="content-spacer",r.append(t),s.append(r);const a=document.createElement("span");a.className="content-newline suggest-preview-text",a.append("⏎  "),s.append(a);const l=new J,c=document.createElement("div");return c.className="button suggest-preview-text",c.append(`+${n} lines…`),l.add(Dn(c,"mousedown",d=>{var h;(h=this.model)===null||h===void 0||h.setExpanded(!0),d.preventDefault(),this.editor.focus()})),s.append(c),new Tz(this.editor,e,s,l)}},"GhostTextWidget");tD=Hde([tO(2,Ne),tO(3,Gt)],tD);class wz{constructor(e){this.editor=e,this.decorationIds=[]}setDecorations(e){this.editor.changeDecorations(t=>{this.decorationIds=t.deltaDecorations(this.decorationIds,e)})}clear(){this.setDecorations([])}dispose(){this.clear()}}u(wz,"DisposableDecorations");class yz{constructor(e){this.editor=e,this.decorationIds=[]}dispose(){this.clear()}clear(){this.editor.changeDecorations(e=>{this.decorationIds=e.deltaDecorations(this.decorationIds,[])})}setParts(e,t,n){if(!this.editor.getModel())return;const s=new Array;n&&s.push({range:L.fromPositions(new H(e,n.column),new H(e,n.column+n.length)),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}}),this.editor.changeDecorations(r=>{this.decorationIds=r.deltaDecorations(this.decorationIds,t.map(a=>({range:L.fromPositions(new H(e,a.column)),options:{description:"ghost-text",after:{content:a.text,inlineClassName:a.preview?"ghost-text-decoration-preview":"ghost-text-decoration",cursorStops:nr.Left},showIfCollapsed:!0}})).concat(s))})}}u(yz,"DecorationsWidget");class Sz{constructor(e,t){this.editor=e,this.languageIdCodec=t,this._viewZoneId=void 0}get viewZoneId(){return this._viewZoneId}dispose(){this.clear()}clear(){this.editor.changeViewZones(e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)})}updateLines(e,t,n){const i=this.editor.getModel();if(!i)return;const{tabSize:s}=i.getOptions();this.editor.changeViewZones(r=>{this._viewZoneId&&(r.removeZone(this._viewZoneId),this._viewZoneId=void 0);const a=Math.max(t.length,n);if(a>0){const l=document.createElement("div");Bde(l,s,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=r.addZone({afterLineNumber:e,heightInLines:a,domNode:l,afterColumnAffinity:1})}})}}u(Sz,"AdditionalLinesWidget");function Bde(o,e,t,n,i){const s=n.get(29),r=n.get(107),a="none",l=n.get(85),c=n.get(47),d=n.get(46),h=n.get(61),g=Lc(1e4);g.appendASCIIString('<div class="suggest-preview-text">');for(let _=0,v=t.length;_<v;_++){const C=t[_],w=C.content;g.appendASCIIString('<div class="view-line'),g.appendASCIIString('" style="top:'),g.appendASCIIString(String(_*h)),g.appendASCIIString('px;width:1000000px;">');const y=Pw(w),S=qg(w),E=yn.createEmpty(w,i);L_(new Ml(d.isMonospace&&!s,d.canUseHalfwidthRightwardsArrow,w,!1,y,S,0,E,C.decorations,e,0,d.spaceWidth,d.middotWidth,d.wsmiddotWidth,r,a,l,c!==is.OFF,null),g),g.appendASCIIString("</div>")}g.appendASCIIString("</div>"),di(o,d);const f=g.build(),p=nO?nO.createHTML(f):f;o.innerHTML=p}u(Bde,"renderLines");class Tz extends U{constructor(e,t,n,i){super(),this.editor=e,this.position=t,this.domNode=n,this.allowEditorOverflow=!1,this.suppressMouseDown=!1,this._register(i),this._register(He(()=>{this.editor.removeContentWidget(this)})),this.editor.addContentWidget(this)}getId(){return"editor.widget.viewMoreLinesWidget"}getDomNode(){return this.domNode}getPosition(){return{position:this.position,preference:[0]}}}u(Tz,"ViewMoreLinesContentWidget");At((o,e)=>{const t=o.getColor($J);t&&(e.addRule(`.monaco-editor .ghost-text-decoration { color: ${t.toString()} !important; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { color: ${t.toString()} !important; }`),e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { color: ${t.toString()} !important; }`));const n=o.getColor(qJ);n&&(e.addRule(`.monaco-editor .ghost-text-decoration { background-color: ${n.toString()}; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { background-color: ${n.toString()}; }`),e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { background-color: ${n.toString()}; }`));const i=o.getColor(jJ);i&&(e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { border: 1px solid ${i}; }`),e.addRule(`.monaco-editor .ghost-text-decoration { border: 1px solid ${i}; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { border: 1px solid ${i}; }`))});var Lz=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},nD=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},DS=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let Fn=u(class xz extends U{constructor(e,t){super(),this.editor=e,this.instantiationService=t,this.triggeredExplicitly=!1,this.activeController=this._register(new gi),this.activeModelDidChangeEmitter=this._register(new R),this._register(this.editor.onDidChangeModel(()=>{this.updateModelController()})),this._register(this.editor.onDidChangeConfiguration(n=>{n.hasChanged(108)&&this.updateModelController(),n.hasChanged(57)&&this.updateModelController()})),this.updateModelController()}static get(e){return e.getContribution(xz.ID)}get activeModel(){var e;return(e=this.activeController.value)===null||e===void 0?void 0:e.model}updateModelController(){const e=this.editor.getOption(108),t=this.editor.getOption(57);this.activeController.value=void 0,this.activeController.value=this.editor.hasModel()&&(e.preview||t.enabled||this.triggeredExplicitly)?this.instantiationService.createInstance(iD,this.editor):void 0,this.activeModelDidChangeEmitter.fire()}shouldShowHoverAt(e){var t;return((t=this.activeModel)===null||t===void 0?void 0:t.shouldShowHoverAt(e))||!1}shouldShowHoverAtViewZone(e){var t,n;return((n=(t=this.activeController.value)===null||t===void 0?void 0:t.widget)===null||n===void 0?void 0:n.shouldShowHoverAtViewZone(e))||!1}trigger(){var e;this.triggeredExplicitly=!0,this.activeController.value||this.updateModelController(),(e=this.activeModel)===null||e===void 0||e.triggerInlineCompletion()}commit(){var e;(e=this.activeModel)===null||e===void 0||e.commitInlineCompletion()}hide(){var e;(e=this.activeModel)===null||e===void 0||e.hideInlineCompletion()}showNextInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showNextInlineCompletion()}showPreviousInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return DS(this,void 0,void 0,function*(){const t=yield(e=this.activeModel)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}},"GhostTextController");Fn.inlineSuggestionVisible=new ce("inlineSuggestionVisible",!1,m("inlineSuggestionVisible","Whether an inline suggestion is visible"));Fn.inlineSuggestionHasIndentation=new ce("inlineSuggestionHasIndentation",!1,m("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace"));Fn.inlineSuggestionHasIndentationLessThanTabSize=new ce("inlineSuggestionHasIndentationLessThanTabSize",!0,m("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab"));Fn.ID="editor.contrib.ghostTextController";Fn=Lz([nD(1,Ne)],Fn);class Ez{constructor(e){this.contextKeyService=e,this.inlineCompletionVisible=Fn.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=Fn.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=Fn.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService)}}u(Ez,"GhostTextContextKeys");let iD=u(class extends U{constructor(e,t,n){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=n,this.contextKeys=new Ez(this.contextKeyService),this.model=this._register(this.instantiationService.createInstance(eD,this.editor)),this.widget=this._register(this.instantiationService.createInstance(tD,this.editor,this.model)),this._register(He(()=>{this.contextKeys.inlineCompletionVisible.set(!1),this.contextKeys.inlineCompletionSuggestsIndentation.set(!1),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(!0)})),this._register(this.model.onDidChange(()=>{this.updateContextKeys()})),this.updateContextKeys()}updateContextKeys(){var e;this.contextKeys.inlineCompletionVisible.set(((e=this.model.activeInlineCompletionsModel)===null||e===void 0?void 0:e.ghostText)!==void 0);let t=!1,n=!0;const i=this.model.inlineCompletionsModel.ghostText;if(this.model.activeInlineCompletionsModel&&i&&i.parts.length>0){const{column:s,lines:r}=i.parts[0],a=r[0],l=this.editor.getModel().getLineIndentColumn(i.lineNumber);if(s<=l){let d=Di(a);d===-1&&(d=a.length-1),t=d>0;const h=this.editor.getModel().getOptions().tabSize;n=mn.visibleColumnFromColumn(a,d+1,h)<h}}this.contextKeys.inlineCompletionSuggestsIndentation.set(t),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(n)}},"ActiveGhostTextController");iD=Lz([nD(1,Ne),nD(2,De)],iD);class ju extends de{constructor(){super({id:ju.ID,label:m("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:oe.and(A.writable,Fn.inlineSuggestionVisible),kbOpts:{weight:100,primary:601}})}run(e,t){return DS(this,void 0,void 0,function*(){const n=Fn.get(t);n&&(n.showNextInlineCompletion(),t.focus())})}}u(ju,"ShowNextInlineSuggestionAction");ju.ID="editor.action.inlineSuggest.showNext";class $u extends de{constructor(){super({id:$u.ID,label:m("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:oe.and(A.writable,Fn.inlineSuggestionVisible),kbOpts:{weight:100,primary:599}})}run(e,t){return DS(this,void 0,void 0,function*(){const n=Fn.get(t);n&&(n.showPreviousInlineCompletion(),t.focus())})}}u($u,"ShowPreviousInlineSuggestionAction");$u.ID="editor.action.inlineSuggest.showPrevious";class kz extends de{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:m("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:A.writable})}run(e,t){return DS(this,void 0,void 0,function*(){const n=Fn.get(t);n&&n.trigger()})}}u(kz,"TriggerInlineSuggestionAction");var Wde=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Kh=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};class Mz{constructor(e,t,n){this.owner=e,this.range=t,this.controller=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}hasMultipleSuggestions(){return this.controller.hasMultipleInlineCompletions()}get commands(){var e,t,n;return((n=(t=(e=this.controller.activeModel)===null||e===void 0?void 0:e.activeInlineCompletionsModel)===null||t===void 0?void 0:t.completionSession.value)===null||n===void 0?void 0:n.commands)||[]}}u(Mz,"InlineCompletionsHover");let sD=u(class{constructor(e,t,n,i,s,r,a){this._editor=e,this._commandService=t,this._menuService=n,this._contextKeyService=i,this._languageService=s,this._openerService=r,this.accessibilityService=a,this.hoverOrdinal=3}suggestHoverAnchor(e){const t=Fn.get(this._editor);if(!t)return null;const n=e.target;if(n.type===8){const i=n.detail;if(t.shouldShowHoverAtViewZone(i.viewZoneId))return new qm(1e3,this,L.fromPositions(i.positionBefore||i.position,i.positionBefore||i.position))}return n.type===7&&t.shouldShowHoverAt(n.range)?new qm(1e3,this,n.range):n.type===6&&n.detail.mightBeForeignElement&&t.shouldShowHoverAt(n.range)?new qm(1e3,this,n.range):null}computeSync(e,t){const n=Fn.get(this._editor);return n&&n.shouldShowHoverAt(e.range)?[new Mz(this,e.range,n)]:[]}renderHoverParts(e,t){const n=new J,i=t[0];this.accessibilityService.isScreenReaderOptimized()&&this.renderScreenReaderText(e,i,n);const s=n.add(this._menuService.createMenu(P.InlineCompletionsActions,this._contextKeyService)),r=e.statusBar.addAction({label:m("showNextInlineSuggestion","Next"),commandId:ju.ID,run:()=>this._commandService.executeCommand(ju.ID)}),a=e.statusBar.addAction({label:m("showPreviousInlineSuggestion","Previous"),commandId:$u.ID,run:()=>this._commandService.executeCommand($u.ID)});e.statusBar.addAction({label:m("acceptInlineSuggestion","Accept"),commandId:fw,run:()=>this._commandService.executeCommand(fw)});const l=[r,a];for(const c of l)c.setEnabled(!1);i.hasMultipleSuggestions().then(c=>{for(const d of l)d.setEnabled(c)});for(const c of i.commands)e.statusBar.addAction({label:c.title,commandId:c.id,run:()=>this._commandService.executeCommand(c.id,...c.arguments||[])});for(const[c,d]of s.getActions())for(const h of d)h instanceof Dc&&e.statusBar.addAction({label:h.label,commandId:h.item.id,run:()=>this._commandService.executeCommand(h.item.id)});return n}renderScreenReaderText(e,t,n){var i,s;const r=ee,a=r("div.hover-row.markdown-hover"),l=q(a,r("div.hover-contents")),c=n.add(new xl({editor:this._editor},this._languageService,this._openerService)),d=u(g=>{n.add(c.onDidRenderAsync(()=>{l.className="hover-contents code-hover-contents",e.onContentsChanged()}));const f=m("inlineSuggestionFollows","Suggestion:"),p=n.add(c.render(new Ei().appendText(f).appendCodeblock("text",g)));l.replaceChildren(p.element)},"render"),h=(s=(i=t.controller.activeModel)===null||i===void 0?void 0:i.inlineCompletionsModel)===null||s===void 0?void 0:s.ghostText;if(h){const g=this._editor.getModel().getLineContent(h.lineNumber);d(h.renderForScreenReader(g))}e.fragment.appendChild(a)}},"InlineCompletionsHoverParticipant");sD=Wde([Kh(1,hn),Kh(2,ah),Kh(3,De),Kh(4,Gt),Kh(5,uo),Kh(6,Dl)],sD);it(Fn.ID,Fn);ie(kz);ie(ju);ie($u);Sh.register(sD);const Dz=Ln.bindToContribution(Fn.get),oD=new Dz({id:fw,precondition:Fn.inlineSuggestionVisible,handler(o){o.commit(),o.editor.focus()}});te(oD);gs.registerKeybindingRule({primary:2,weight:200,id:oD.id,when:oe.and(oD.precondition,A.tabMovesFocus.toNegated(),Fn.inlineSuggestionHasIndentationLessThanTabSize)});te(new Dz({id:"editor.action.inlineSuggest.hide",precondition:Fn.inlineSuggestionVisible,kbOpts:{weight:100,primary:9},handler(o){o.hide()}}));function Qi(o,e){let t=0;for(let n=0;n<o.length;n++)o.charAt(n)==="	"?t+=e:t++;return t}u(Qi,"getSpaceCnt");function Xm(o,e,t){o=o<0?0:o;let n="";if(!t){const i=Math.floor(o/e);o=o%e;for(let s=0;s<i;s++)n+="	"}for(let i=0;i<o;i++)n+=" ";return n}u(Xm,"generateIndent");var Ude=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Gde=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};function Az(o,e,t,n,i){if(o.getLineCount()===1&&o.getLineMaxColumn(1)===1)return[];const s=e.getLanguageConfiguration(o.getLanguageId()).indentationRules;if(!s)return[];for(n=Math.min(n,o.getLineCount());t<=n&&s.unIndentedLinePattern;){const v=o.getLineContent(t);if(!s.unIndentedLinePattern.test(v))break;t++}if(t>n-1)return[];const{tabSize:r,indentSize:a,insertSpaces:l}=o.getOptions(),c=u((v,C)=>(C=C||1,zs.shiftIndent(v,v.length+C,r,a,l)),"shiftIndent"),d=u((v,C)=>(C=C||1,zs.unshiftIndent(v,v.length+C,r,a,l)),"unshiftIndent"),h=[];let g;const f=o.getLineContent(t);let p=f;if(i!=null){g=i;const v=vt(f);p=g+f.substring(v.length),s.decreaseIndentPattern&&s.decreaseIndentPattern.test(p)&&(g=d(g),p=g+f.substring(v.length)),f!==p&&h.push(Ot.replaceMove(new re(t,1,t,v.length+1),m1(g,a,l)))}else g=vt(f);let _=g;s.increaseIndentPattern&&s.increaseIndentPattern.test(p)?(_=c(_),g=c(g)):s.indentNextLinePattern&&s.indentNextLinePattern.test(p)&&(_=c(_)),t++;for(let v=t;v<=n;v++){const C=o.getLineContent(v),w=vt(C),y=_+C.substring(w.length);s.decreaseIndentPattern&&s.decreaseIndentPattern.test(y)&&(_=d(_),g=d(g)),w!==_&&h.push(Ot.replaceMove(new re(v,1,v,w.length+1),m1(_,a,l))),!(s.unIndentedLinePattern&&s.unIndentedLinePattern.test(C))&&(s.increaseIndentPattern&&s.increaseIndentPattern.test(y)?(g=c(g),_=g):s.indentNextLinePattern&&s.indentNextLinePattern.test(y)?_=c(_):_=g)}return h}u(Az,"getReindentEditOperations");class wv extends de{constructor(){super({id:wv.ID,label:m("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:A.writable})}run(e,t){const n=t.getModel();if(!n)return;const i=n.getOptions(),s=t.getSelection();if(!s)return;const r=new Fz(s,i.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop(),n.updateOptions({insertSpaces:!0})}}u(wv,"IndentationToSpacesAction");wv.ID="editor.action.indentationToSpaces";class yv extends de{constructor(){super({id:yv.ID,label:m("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:A.writable})}run(e,t){const n=t.getModel();if(!n)return;const i=n.getOptions(),s=t.getSelection();if(!s)return;const r=new Oz(s,i.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop(),n.updateOptions({insertSpaces:!1})}}u(yv,"IndentationToTabsAction");yv.ID="editor.action.indentationToTabs";class e2 extends de{constructor(e,t){super(t),this.insertSpaces=e}run(e,t){const n=e.get(Pl),i=e.get(Kt),s=t.getModel();if(!s)return;const r=i.getCreationOptions(s.getLanguageId(),s.uri,s.isForSimpleWidget),a=[1,2,3,4,5,6,7,8].map(c=>({id:c.toString(),label:c.toString(),description:c===r.tabSize?m("configuredTabSize","Configured Tab Size"):void 0})),l=Math.min(s.getOptions().tabSize-1,7);setTimeout(()=>{n.pick(a,{placeHolder:m({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:a[l]}).then(c=>{c&&s&&!s.isDisposed()&&s.updateOptions({tabSize:parseInt(c.label,10),insertSpaces:this.insertSpaces})})},50)}}u(e2,"ChangeIndentationSizeAction");class Sv extends e2{constructor(){super(!1,{id:Sv.ID,label:m("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0})}}u(Sv,"IndentUsingTabs");Sv.ID="editor.action.indentUsingTabs";class Tv extends e2{constructor(){super(!0,{id:Tv.ID,label:m("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0})}}u(Tv,"IndentUsingSpaces");Tv.ID="editor.action.indentUsingSpaces";class Lv extends de{constructor(){super({id:Lv.ID,label:m("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0})}run(e,t){const n=e.get(Kt),i=t.getModel();if(!i)return;const s=n.getCreationOptions(i.getLanguageId(),i.uri,i.isForSimpleWidget);i.detectIndentation(s.insertSpaces,s.tabSize)}}u(Lv,"DetectIndentation");Lv.ID="editor.action.detectIndentation";class Iz extends de{constructor(){super({id:"editor.action.reindentlines",label:m("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:A.writable})}run(e,t){const n=e.get(rn),i=t.getModel();if(!i)return;const s=Az(i,n,1,i.getLineCount());s.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,s),t.pushUndoStop())}}u(Iz,"ReindentLinesAction");class Nz extends de{constructor(){super({id:"editor.action.reindentselectedlines",label:m("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:A.writable})}run(e,t){const n=e.get(rn),i=t.getModel();if(!i)return;const s=t.getSelections();if(s===null)return;const r=[];for(const a of s){let l=a.startLineNumber,c=a.endLineNumber;if(l!==c&&a.endColumn===1&&c--,l===1){if(l===c)continue}else l--;const d=Az(i,n,l,c);r.push(...d)}r.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop())}}u(Nz,"ReindentSelectedLinesAction");class Pz{constructor(e,t){this._initialSelection=t,this._edits=[],this._selectionId=null;for(const n of e)n.range&&typeof n.text=="string"&&this._edits.push(n)}getEditOperations(e,t){for(const i of this._edits)t.addEditOperation(L.lift(i.range),i.text);let n=!1;Array.isArray(this._edits)&&this._edits.length===1&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),n||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}u(Pz,"AutoIndentOnPasteCommand");let o_=u(class{constructor(e,t){this.editor=e,this._languageConfigurationService=t,this.callOnDispose=new J,this.callOnModel=new J,this.callOnDispose.add(e.onDidChangeConfiguration(()=>this.update())),this.callOnDispose.add(e.onDidChangeModel(()=>this.update())),this.callOnDispose.add(e.onDidChangeModelLanguage(()=>this.update()))}update(){this.callOnModel.clear(),!(this.editor.getOption(9)<4||this.editor.getOption(50))&&this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste(({range:e})=>{this.trigger(e)}))}trigger(e){const t=this.editor.getSelections();if(t===null||t.length>1)return;const n=this.editor.getModel();if(!n||!n.tokenization.isCheapToTokenize(e.getStartPosition().lineNumber))return;const i=this.editor.getOption(9),{tabSize:s,indentSize:r,insertSpaces:a}=n.getOptions(),l=[],c={shiftIndent:f=>zs.shiftIndent(f,f.length+1,s,r,a),unshiftIndent:f=>zs.unshiftIndent(f,f.length+1,s,r,a)};let d=e.startLineNumber;for(;d<=e.endLineNumber;){if(this.shouldIgnoreLine(n,d)){d++;continue}break}if(d>e.endLineNumber)return;let h=n.getLineContent(d);if(!/\S/.test(h.substring(0,e.startColumn-1))){const f=Fm(i,n,n.getLanguageId(),d,c,this._languageConfigurationService);if(f!==null){const p=vt(h),_=Qi(f,s),v=Qi(p,s);if(_!==v){const C=Xm(_,s,a);l.push({range:new L(d,1,d,p.length+1),text:C}),h=C+h.substr(p.length)}else{const C=ZH(n,d,this._languageConfigurationService);if(C===0||C===8)return}}}const g=d;for(;d<e.endLineNumber;){if(!/\S/.test(n.getLineContent(d+1))){d++;continue}break}if(d!==e.endLineNumber){const p=Fm(i,{tokenization:{getLineTokens:_=>n.tokenization.getLineTokens(_),getLanguageId:()=>n.getLanguageId(),getLanguageIdAtPosition:(_,v)=>n.getLanguageIdAtPosition(_,v)},getLineContent:_=>_===g?h:n.getLineContent(_)},n.getLanguageId(),d+1,c,this._languageConfigurationService);if(p!==null){const _=Qi(p,s),v=Qi(vt(n.getLineContent(d+1)),s);if(_!==v){const C=_-v;for(let w=d+1;w<=e.endLineNumber;w++){const y=n.getLineContent(w),S=vt(y),k=Qi(S,s)+C,T=Xm(k,s,a);T!==S&&l.push({range:new L(w,1,w,S.length+1),text:T})}}}}if(l.length>0){this.editor.pushUndoStop();const f=new Pz(l,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",f),this.editor.pushUndoStop()}}shouldIgnoreLine(e,t){e.tokenization.forceTokenization(t);const n=e.getLineFirstNonWhitespaceColumn(t);if(n===0)return!0;const i=e.tokenization.getLineTokens(t);if(i.getCount()>0){const s=i.findTokenIndexAtOffset(n);if(s>=0&&i.getStandardTokenType(s)===1)return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}},"AutoIndentOnPaste");o_.ID="editor.contrib.autoIndentOnPaste";o_=Ude([Gde(1,rn)],o_);function Rz(o,e,t,n){if(o.getLineCount()===1&&o.getLineMaxColumn(1)===1)return;let i="";for(let r=0;r<t;r++)i+=" ";const s=new RegExp(i,"gi");for(let r=1,a=o.getLineCount();r<=a;r++){let l=o.getLineFirstNonWhitespaceColumn(r);if(l===0&&(l=o.getLineMaxColumn(r)),l===1)continue;const c=new L(r,1,r,l),d=o.getValueInRange(c),h=n?d.replace(/\t/ig,i):d.replace(s,"	");e.addEditOperation(c,h)}}u(Rz,"getIndentationEditOperations");class Fz{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),Rz(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}u(Fz,"IndentationToSpacesCommand");class Oz{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),Rz(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}u(Oz,"IndentationToTabsCommand");it(o_.ID,o_);ie(wv);ie(yv);ie(Sv);ie(Tv);ie(Lv);ie(Iz);ie(Nz);var bw=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class t2{constructor(e,t){this.range=e,this.direction=t}}u(t2,"InlayHintAnchor");class AS{constructor(e,t,n){this.hint=e,this.anchor=t,this.provider=n,this._isResolved=!1}with(e){const t=new AS(this.hint,e.anchor,this.provider);return t._isResolved=this._isResolved,t._currentResolve=this._currentResolve,t}resolve(e){return bw(this,void 0,void 0,function*(){if(typeof this.provider.resolveInlayHint=="function"){if(this._currentResolve)return yield this._currentResolve,e.isCancellationRequested?void 0:this.resolve(e);this._isResolved||(this._currentResolve=this._doResolve(e).finally(()=>this._currentResolve=void 0)),yield this._currentResolve}})}_doResolve(e){var t,n;return bw(this,void 0,void 0,function*(){try{const i=yield Promise.resolve(this.provider.resolveInlayHint(this.hint,e));this.hint.tooltip=(t=i?.tooltip)!==null&&t!==void 0?t:this.hint.tooltip,this.hint.label=(n=i?.label)!==null&&n!==void 0?n:this.hint.label,this._isResolved=!0}catch(i){Hn(i),this._isResolved=!1}})}}u(AS,"InlayHintItem");class jf{constructor(e,t,n){this._disposables=new J,this.ranges=e,this.provider=new Set;const i=[];for(const[s,r]of t){this._disposables.add(s),this.provider.add(r);for(const a of s.hints){const l=n.validatePosition(a.position);let c="before";const d=jf._getRangeAtPosition(n,l);let h;d.getStartPosition().isBefore(l)?(h=L.fromPositions(d.getStartPosition(),l),c="after"):(h=L.fromPositions(l,d.getEndPosition()),c="before"),i.push(new AS(a,new t2(h,c),r))}}this.items=i.sort((s,r)=>H.compare(s.hint.position,r.hint.position))}static create(e,t,n,i){return bw(this,void 0,void 0,function*(){const s=[],r=e.ordered(t).reverse().map(a=>n.map(l=>bw(this,void 0,void 0,function*(){try{const c=yield a.provideInlayHints(t,l,i);c?.hints.length&&s.push([c,a])}catch(c){Hn(c)}})));if(yield Promise.all(r.flat()),i.isCancellationRequested||t.isDisposed())throw new El;return new jf(n,s,t)})}dispose(){this._disposables.dispose()}static _getRangeAtPosition(e,t){const n=t.lineNumber,i=e.getWordAtPosition(t);if(i)return new L(n,i.startColumn,n,i.endColumn);e.tokenization.tokenizeIfCheap(n);const s=e.tokenization.getLineTokens(n),r=t.column-1,a=s.findTokenIndexAtOffset(r);let l=s.getStartOffset(a),c=s.getEndOffset(a);return c-l===1&&(l===r&&a>1?(l=s.getStartOffset(a-1),c=s.getEndOffset(a-1)):c===r&&a<s.getCount()-1&&(l=s.getStartOffset(a+1),c=s.getEndOffset(a+1))),new L(n,l+1,n,c+1)}}u(jf,"InlayHintsFragments");function zde(o){return be.from({scheme:Pe.command,path:o.id,query:o.arguments&&encodeURIComponent(JSON.stringify(o.arguments))}).toString()}u(zde,"asCommandLink");var Zm=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};function Kde(o,e,t,n){var i;return Zm(this,void 0,void 0,function*(){const s=o.get(Ji),r=o.get(Il),a=o.get(hn),l=o.get(Ne),c=o.get(gn);if(yield n.item.resolve(Ge.None),!n.part.location)return;const d=n.part.location,h=[],g=new Set(Qs.getMenuItems(P.EditorContext).map(p=>ag(p)?p.command.id:""));for(const p of Zd.getEditorActions())p instanceof to&&g.has(p.id)&&h.push(new Yi(p.id,p.label,void 0,!0,()=>Zm(this,void 0,void 0,function*(){const _=yield s.createModelReference(d.uri);try{yield l.invokeFunction(p.run.bind(p),e,new Bf(_.object.textEditorModel,L.getStartPosition(d.range)))}finally{_.dispose()}})));if(n.part.command){const{command:p}=n.part;h.push(new Jn),h.push(new Yi(p.id,p.title,void 0,!0,()=>Zm(this,void 0,void 0,function*(){var _;try{yield a.executeCommand(p.id,...(_=p.arguments)!==null&&_!==void 0?_:[])}catch(v){c.notify({severity:l9.Error,source:n.item.provider.displayName,message:v})}})))}const f=e.getOption(117);r.showContextMenu({domForShadowRoot:f&&(i=e.getDomNode())!==null&&i!==void 0?i:void 0,getAnchor:()=>{const p=li(t);return{x:p.left,y:p.top+p.height+8}},getActions:()=>h,onHide:()=>{e.focus()},autoSelectFirstItem:!0})})}u(Kde,"showGoToContextMenu");function jde(o,e,t,n){return Zm(this,void 0,void 0,function*(){const s=yield o.get(Ji).createModelReference(n.uri);yield t.invokeWithinContext(r=>Zm(this,void 0,void 0,function*(){const a=e.hasSideBySideModifier,l=r.get(De),c=Zi.inPeekEditor.getValue(l),d=!a&&t.getOption(80)&&!c;return new Cp({openToSide:a,openInPeek:d,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0}).run(r,t,{model:s.object.textEditorModel,position:L.getStartPosition(n.range)})})),s.dispose()})}u(jde,"goToDefinitionWithLocation");var $de=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},jh=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},ig=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class r_{constructor(){this._entries=new Al(50)}get(e){const t=r_._key(e);return this._entries.get(t)}set(e,t){const n=r_._key(e);this._entries.set(n,t)}static _key(e){return`${e.uri.toString()}/${e.getVersionId()}`}}u(r_,"InlayHintsCache");const Vz=Je("IInlayHintsCache");nt(Vz,r_,!0);class _w{constructor(e,t){this.item=e,this.index=t}get part(){const e=this.item.hint.label;return typeof e=="string"?{label:e}:e[this.index]}}u(_w,"RenderedInlayHintLabelPart");class Hz{constructor(e,t){this.part=e,this.hasTriggerModifier=t}}u(Hz,"ActiveInlayHintInfo");let qu=u(class rD{constructor(e,t,n,i,s,r,a){this._editor=e,this._languageFeaturesService=t,this._inlayHintsCache=i,this._commandService=s,this._notificationService=r,this._instaService=a,this._disposables=new J,this._sessionDisposables=new J,this._decorationsMetadata=new Map,this._ruleFactory=new sp(this._editor),this._activeRenderMode=0,this._debounceInfo=n.for(t.inlayHintsProvider,"InlayHint",{min:25}),this._disposables.add(t.inlayHintsProvider.onDidChange(()=>this._update())),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(l=>{l.hasChanged(129)&&this._update()})),this._update()}static get(e){var t;return(t=e.getContribution(rD.ID))!==null&&t!==void 0?t:void 0}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){this._sessionDisposables.clear(),this._removeAllDecorations();const e=this._editor.getOption(129);if(e.enabled==="off")return;const t=this._editor.getModel();if(!t||!this._languageFeaturesService.inlayHintsProvider.has(t))return;const n=this._inlayHintsCache.get(t);n&&this._updateHintsDecorators([t.getFullModelRange()],n),this._sessionDisposables.add(He(()=>{t.isDisposed()||this._cacheHintsForFastRestore(t)}));let i;const s=new Set,r=new pt(()=>ig(this,void 0,void 0,function*(){const a=Date.now();i?.dispose(!0),i=new ti;const l=t.onWillDispose(()=>i?.cancel());try{const c=i.token,d=yield jf.create(this._languageFeaturesService.inlayHintsProvider,t,this._getHintsRanges(),c);if(r.delay=this._debounceInfo.update(t,Date.now()-a),c.isCancellationRequested){d.dispose();return}for(const h of d.provider)typeof h.onDidChangeInlayHints=="function"&&!s.has(h)&&(s.add(h),this._sessionDisposables.add(h.onDidChangeInlayHints(()=>{r.isScheduled()||r.schedule()})));this._sessionDisposables.add(d),this._updateHintsDecorators(d.ranges,d.items),this._cacheHintsForFastRestore(t)}catch(c){Ie(c)}finally{i.dispose(),l.dispose()}}),this._debounceInfo.get(t));if(this._sessionDisposables.add(r),this._sessionDisposables.add(He(()=>i?.dispose(!0))),r.schedule(0),this._sessionDisposables.add(this._editor.onDidScrollChange(a=>{(a.scrollTopChanged||!r.isScheduled())&&r.schedule()})),this._sessionDisposables.add(this._editor.onDidChangeModelContent(a=>{const l=Math.max(r.delay,1250);r.schedule(l)})),e.enabled==="on")this._activeRenderMode=0;else{let a,l;e.enabled==="onUnlessPressed"?(a=0,l=1):(a=1,l=0),this._activeRenderMode=a,this._sessionDisposables.add(ja.getInstance().event(c=>{if(!this._editor.hasModel())return;const d=c.altKey&&c.ctrlKey?l:a;if(d!==this._activeRenderMode){this._activeRenderMode=d;const h=this._editor.getModel(),g=this._copyInlayHintsWithCurrentAnchor(h);this._updateHintsDecorators([h.getFullModelRange()],g),r.schedule(0)}}))}this._sessionDisposables.add(this._installDblClickGesture(()=>r.schedule(0))),this._sessionDisposables.add(this._installLinkGesture()),this._sessionDisposables.add(this._installContextMenu())}_installLinkGesture(){const e=new J,t=e.add(new pS(this._editor)),n=new J;return e.add(n),e.add(t.onMouseMoveOrRelevantKeyDown(i=>{const[s]=i,r=this._getInlayHintLabelPart(s),a=this._editor.getModel();if(!r||!a){n.clear();return}const l=new ti;n.add(He(()=>l.dispose(!0))),r.item.resolve(l.token),this._activeInlayHintPart=r.part.command||r.part.location?new Hz(r,s.hasTriggerModifier):void 0;const c=r.item.hint.position.lineNumber,d=new L(c,1,c,a.getLineMaxColumn(c)),h=this._getInlineHintsForRange(d);this._updateHintsDecorators([d],h),n.add(He(()=>{this._activeInlayHintPart=void 0,this._updateHintsDecorators([d],h)}))})),e.add(t.onCancel(()=>n.clear())),e.add(t.onExecute(i=>ig(this,void 0,void 0,function*(){const s=this._getInlayHintLabelPart(i);if(s){const r=s.part;r.location?this._instaService.invokeFunction(jde,i,this._editor,r.location):PL.is(r.command)&&(yield this._invokeCommand(r.command,s.item))}}))),e}_getInlineHintsForRange(e){const t=new Set;for(const n of this._decorationsMetadata.values())e.containsRange(n.item.anchor.range)&&t.add(n.item);return Array.from(t)}_installDblClickGesture(e){return this._editor.onMouseUp(t=>ig(this,void 0,void 0,function*(){if(t.event.detail!==2)return;const n=this._getInlayHintLabelPart(t);if(n&&(t.event.preventDefault(),yield n.item.resolve(Ge.None),ci(n.item.hint.textEdits))){const i=n.item.hint.textEdits.map(s=>Ot.replace(L.lift(s.range),s.text));this._editor.executeEdits("inlayHint.default",i),e()}}))}_installContextMenu(){return this._editor.onContextMenu(e=>ig(this,void 0,void 0,function*(){if(!(e.event.target instanceof HTMLElement))return;const t=this._getInlayHintLabelPart(e);t&&(yield this._instaService.invokeFunction(Kde,this._editor,e.event.target,t))}))}_getInlayHintLabelPart(e){var t;if(e.target.type!==6)return;const n=(t=e.target.detail.injectedText)===null||t===void 0?void 0:t.options;if(n instanceof Rc&&n?.attachedData instanceof _w)return n.attachedData}_invokeCommand(e,t){var n;return ig(this,void 0,void 0,function*(){try{yield this._commandService.executeCommand(e.id,...(n=e.arguments)!==null&&n!==void 0?n:[])}catch(i){this._notificationService.notify({severity:l9.Error,source:t.provider.displayName,message:i})}})}_cacheHintsForFastRestore(e){const t=this._copyInlayHintsWithCurrentAnchor(e);this._inlayHintsCache.set(e,t)}_copyInlayHintsWithCurrentAnchor(e){const t=new Map;for(const[n,i]of this._decorationsMetadata){if(t.has(i.item))continue;const s=e.getDecorationRange(n);if(s){const r=new t2(s,i.item.anchor.direction),a=i.item.with({anchor:r});t.set(i.item,a)}}return Array.from(t.values())}_getHintsRanges(){const t=this._editor.getModel(),n=this._editor.getVisibleRangesPlusViewportAboveBelow(),i=[];for(const s of n.sort(L.compareRangesUsingStarts)){const r=t.validateRange(new L(s.startLineNumber-30,s.startColumn,s.endLineNumber+30,s.endColumn));i.length===0||!L.areIntersectingOrTouching(i[i.length-1],r)?i.push(r):i[i.length-1]=L.plusRange(i[i.length-1],r)}return i}_updateHintsDecorators(e,t){var n,i;const s=[],r=u((p,_,v,C,w)=>{const y={content:v,inlineClassNameAffectsLetterSpacing:!0,inlineClassName:_.className,cursorStops:C,attachedData:w};s.push({item:p,classNameRef:_,decoration:{range:p.anchor.range,options:{description:"InlayHint",showIfCollapsed:p.anchor.range.isEmpty(),collapseOnReplaceEdit:!p.anchor.range.isEmpty(),stickiness:0,[p.anchor.direction]:this._activeRenderMode===0?y:void 0}}})},"addInjectedText"),a=u((p,_)=>{const v=this._ruleFactory.createClassNameRef({width:`${l/3|0}px`,display:"inline-block"});r(p,v," ",_?nr.Right:nr.None)},"addInjectedWhitespace"),{fontSize:l,fontFamily:c,padding:d,isUniform:h}=this._getLayoutInfo(),g="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(g,c);for(const p of t){p.hint.paddingLeft&&a(p,!1);const _=typeof p.hint.label=="string"?[{label:p.hint.label}]:p.hint.label;for(let v=0;v<_.length;v++){const C=_[v],w=v===0,y=v===_.length-1,S={fontSize:`${l}px`,fontFamily:`var(${g}), ${rs.fontFamily}`,verticalAlign:h?"baseline":"middle"};ci(p.hint.textEdits)&&(S.cursor="default"),this._fillInColors(S,p.hint),(C.command||C.location)&&((n=this._activeInlayHintPart)===null||n===void 0?void 0:n.part.item)===p&&this._activeInlayHintPart.part.index===v&&(S.textDecoration="underline",this._activeInlayHintPart.hasTriggerModifier&&(S.color=Zt(DA),S.cursor="pointer")),d&&(w&&y?(S.padding=`1px ${Math.max(1,l/4)|0}px`,S.borderRadius=`${l/4|0}px`):w?(S.padding=`1px 0 1px ${Math.max(1,l/4)|0}px`,S.borderRadius=`${l/4|0}px 0 0 ${l/4|0}px`):y?(S.padding=`1px ${Math.max(1,l/4)|0}px 1px 0`,S.borderRadius=`0 ${l/4|0}px ${l/4|0}px 0`):S.padding="1px 0 1px 0"),r(p,this._ruleFactory.createClassNameRef(S),qde(C.label),y&&!p.hint.paddingRight?nr.Right:nr.None,new _w(p,v))}if(p.hint.paddingRight&&a(p,!0),s.length>rD._MAX_DECORATORS)break}const f=[];for(const p of e)for(const{id:_}of(i=this._editor.getDecorationsInRange(p))!==null&&i!==void 0?i:[]){const v=this._decorationsMetadata.get(_);v&&(f.push(_),v.classNameRef.dispose(),this._decorationsMetadata.delete(_))}this._editor.changeDecorations(p=>{const _=p.deltaDecorations(f,s.map(v=>v.decoration));for(let v=0;v<_.length;v++){const C=s[v];this._decorationsMetadata.set(_[v],C)}})}_fillInColors(e,t){t.kind===X0.Parameter?(e.backgroundColor=Zt(AZ),e.color=Zt(DZ)):t.kind===X0.Type?(e.backgroundColor=Zt(MZ),e.color=Zt(kZ)):(e.backgroundColor=Zt(Qa),e.color=Zt(Ja))}_getLayoutInfo(){const e=this._editor.getOption(129),t=e.padding,n=this._editor.getOption(48),i=this._editor.getOption(45);let s=e.fontSize;(!s||s<5||s>n)&&(s=n);const r=e.fontFamily||i;return{fontSize:s,fontFamily:r,padding:t,isUniform:!t&&r===i&&s===n}}_removeAllDecorations(){this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));for(const e of this._decorationsMetadata.values())e.classNameRef.dispose();this._decorationsMetadata.clear()}},"InlayHintsController");qu.ID="editor.contrib.InlayHints";qu._MAX_DECORATORS=1500;qu=$de([jh(1,ue),jh(2,ho),jh(3,Vz),jh(4,hn),jh(5,gn),jh(6,Ne)],qu);function qde(o){const e=" ";return o.replace(/[ \t]/g,e)}u(qde,"fixSpace");Qe.registerCommand("_executeInlayHintProvider",(o,...e)=>ig(void 0,void 0,void 0,function*(){const[t,n]=e;bt(be.isUri(t)),bt(L.isIRange(n));const{inlayHintsProvider:i}=o.get(ue),s=yield o.get(Ji).createModelReference(t);try{const r=yield jf.create(i,s.object.textEditorModel,[L.lift(n)],Ge.None),a=r.items.map(l=>l.hint);return setTimeout(()=>r.dispose(),0),a}finally{s.dispose()}}));var Yde=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Jp=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},iO=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})},Xde=globalThis&&globalThis.__asyncValues||function(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=o[Symbol.asyncIterator],t;return e?e.call(o):(o=typeof __values=="function"?__values(o):o[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=o[s]&&function(r){return new Promise(function(a,l){r=o[s](r),i(a,l,r.done,r.value)})}}function i(s,r,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},r)}};class aD extends qm{constructor(e,t){super(10,t,e.item.anchor.range),this.part=e}}u(aD,"InlayHintsHoverAnchor");let lD=u(class extends aw{constructor(e,t,n,i,s,r){super(e,t,n,i,r),this._resolverService=s,this.hoverOrdinal=6}suggestHoverAnchor(e){var t;if(!qu.get(this._editor)||e.target.type!==6)return null;const i=(t=e.target.detail.injectedText)===null||t===void 0?void 0:t.options;return i instanceof Rc&&i.attachedData instanceof _w?new aD(i.attachedData,this):null}computeSync(){return[]}computeAsync(e,t,n){return e instanceof aD?new nn(i=>iO(this,void 0,void 0,function*(){var s,r;const{part:a}=e;if(yield a.item.resolve(n),n.isCancellationRequested)return;let l;typeof a.item.hint.tooltip=="string"?l=new Ei().appendText(a.item.hint.tooltip):a.item.hint.tooltip&&(l=a.item.hint.tooltip),l&&i.emitOne(new Qo(this,e.range,[l],0)),ci(a.item.hint.textEdits)&&i.emitOne(new Qo(this,e.range,[new Ei().appendText(m("hint.dbl","Double click to insert"))],10001));let c;if(typeof a.part.tooltip=="string"?c=new Ei().appendText(a.part.tooltip):a.part.tooltip&&(c=a.part.tooltip),c&&i.emitOne(new Qo(this,e.range,[c],1)),a.part.location||a.part.command){let f;const _=this._editor.getOption(72)==="altKey"?Xe?m("links.navigate.kb.meta.mac","cmd + click"):m("links.navigate.kb.meta","ctrl + click"):Xe?m("links.navigate.kb.alt.mac","option + click"):m("links.navigate.kb.alt","alt + click");a.part.location&&a.part.command?f=new Ei().appendText(m("hint.defAndCommand","Go to Definition ({0}), right click for more",_)):a.part.location?f=new Ei().appendText(m("hint.def","Go to Definition ({0})",_)):a.part.command&&(f=new Ei(`[${m("hint.cmd","Execute Command")}](${zde(a.part.command)} "${a.part.command.title}") (${_})`,{isTrusted:!0})),f&&i.emitOne(new Qo(this,e.range,[f],1e4))}const d=yield this._resolveInlayHintLabelPartHover(a,n);try{for(var h=Xde(d),g;g=yield h.next(),!g.done;){const f=g.value;i.emitOne(f)}}catch(f){s={error:f}}finally{try{g&&!g.done&&(r=h.return)&&(yield r.call(h))}finally{if(s)throw s.error}}})):nn.EMPTY}_resolveInlayHintLabelPartHover(e,t){return iO(this,void 0,void 0,function*(){if(!e.part.location)return nn.EMPTY;const{uri:n,range:i}=e.part.location,s=yield this._resolverService.createModelReference(n);try{const r=s.object.textEditorModel;return this._languageFeaturesService.hoverProvider.has(r)?FN(this._languageFeaturesService.hoverProvider,r,new H(i.startLineNumber,i.startColumn),t).filter(a=>!Sf(a.hover.contents)).map(a=>new Qo(this,e.item.anchor.range,a.hover.contents,2+a.ordinal)):nn.EMPTY}finally{s.dispose()}})}},"InlayHintsHover");lD=Yde([Jp(1,Gt),Jp(2,uo),Jp(3,rt),Jp(4,Ji),Jp(5,ue)],lD);it(qu.ID,qu);Sh.register(lD);class Bz{constructor(e,t,n){this._editRange=e,this._originalSelection=t,this._text=n}getEditOperations(e,t){t.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new re(i.endLineNumber,Math.min(this._originalSelection.positionColumn,i.endColumn),i.endLineNumber,Math.min(this._originalSelection.positionColumn,i.endColumn)):new re(i.endLineNumber,i.endColumn-this._text.length,i.endLineNumber,i.endColumn)}}u(Bz,"InPlaceReplaceCommand");var Zde=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Jde=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let $c=u(class cD{constructor(e,t){this.editor=e,this.editorWorkerService=t,this.decorations=this.editor.createDecorationsCollection()}static get(e){return e.getContribution(cD.ID)}dispose(){}run(e,t){this.currentRequest&&this.currentRequest.cancel();const n=this.editor.getSelection(),i=this.editor.getModel();if(!i||!n)return;let s=n;if(s.startLineNumber!==s.endLineNumber)return;const r=new Q1(this.editor,5),a=i.uri;return this.editorWorkerService.canNavigateValueSet(a)?(this.currentRequest=On(l=>this.editorWorkerService.navigateValueSet(a,s,t)),this.currentRequest.then(l=>{if(!l||!l.range||!l.value||!r.validate(this.editor))return;const c=L.lift(l.range);let d=l.range;const h=l.value.length-(s.endColumn-s.startColumn);d={startLineNumber:d.startLineNumber,startColumn:d.startColumn,endLineNumber:d.endLineNumber,endColumn:d.startColumn+l.value.length},h>1&&(s=new re(s.startLineNumber,s.startColumn,s.endLineNumber,s.endColumn+h-1));const g=new Bz(c,s,l.value);this.editor.pushUndoStop(),this.editor.executeCommand(e,g),this.editor.pushUndoStop(),this.decorations.set([{range:d,options:cD.DECORATION}]),this.decorationRemover&&this.decorationRemover.cancel(),this.decorationRemover=xc(350),this.decorationRemover.then(()=>this.decorations.clear()).catch(Ie)}).catch(Ie)):Promise.resolve(void 0)}},"InPlaceReplaceController");$c.ID="editor.contrib.inPlaceReplaceController";$c.DECORATION=Ae.register({description:"in-place-replace",className:"valueSetReplacement"});$c=Zde([Jde(1,co)],$c);class Wz extends de{constructor(){super({id:"editor.action.inPlaceReplace.up",label:m("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:3154,weight:100}})}run(e,t){const n=$c.get(t);return n?n.run(this.id,!0):Promise.resolve(void 0)}}u(Wz,"InPlaceReplaceUp");class Uz extends de{constructor(){super({id:"editor.action.inPlaceReplace.down",label:m("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:3156,weight:100}})}run(e,t){const n=$c.get(t);return n?n.run(this.id,!1):Promise.resolve(void 0)}}u(Uz,"InPlaceReplaceDown");it($c.ID,$c);ie(Wz);ie(Uz);At((o,e)=>{const t=o.getColor(OH);t&&e.addRule(`.monaco-editor.vs .valueSetReplacement { outline: solid 2px ${t}; }`)});class Gz extends de{constructor(){super({id:"expandLineSelection",label:m("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:A.textInputFocus,primary:2090}})}run(e,t,n){if(n=n||{},!t.hasModel())return;const i=t._getViewModel();i.model.pushStackElement(),i.setCursorStates(n.source,3,In.expandLineSelection(i,i.getCursorStates())),i.revealPrimaryCursor(n.source,!0)}}u(Gz,"ExpandLineSelectionAction");ie(Gz);class zz{constructor(e,t){this._selection=e,this._cursors=t,this._selectionId=null}getEditOperations(e,t){const n=Qde(e,this._cursors);for(let i=0,s=n.length;i<s;i++){const r=n[i];t.addEditOperation(r.range,r.text)}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}u(zz,"TrimTrailingWhitespaceCommand");function Qde(o,e){e.sort((r,a)=>r.lineNumber===a.lineNumber?r.column-a.column:r.lineNumber-a.lineNumber);for(let r=e.length-2;r>=0;r--)e[r].lineNumber===e[r+1].lineNumber&&e.splice(r,1);const t=[];let n=0,i=0;const s=e.length;for(let r=1,a=o.getLineCount();r<=a;r++){const l=o.getLineContent(r),c=l.length+1;let d=0;if(i<s&&e[i].lineNumber===r&&(d=e[i].column,i++,d===c)||l.length===0)continue;const h=Jr(l);let g=0;if(h===-1)g=1;else if(h!==l.length-1)g=h+2;else continue;g=Math.max(d,g),t[n++]=Ot.delete(new L(r,g,r,c))}return t}u(Qde,"trimTrailingWhitespace");class n2{constructor(e,t,n){this._selection=e,this._isCopyingDown=t,this._noop=n||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,t){let n=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._endLineNumberDelta=1,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));const i=[];for(let r=n.startLineNumber;r<=n.endLineNumber;r++)i.push(e.getLineContent(r));const s=i.join(`
`);s===""&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new L(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber+1,1),n.endLineNumber===e.getLineCount()?"":`
`):this._isCopyingDown?t.addEditOperation(new L(n.startLineNumber,1,n.startLineNumber,1),s+`
`):t.addEditOperation(new L(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),`
`+s),this._selectionId=t.trackSelection(n),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);if(this._startLineNumberDelta!==0||this._endLineNumberDelta!==0){let i=n.startLineNumber,s=n.startColumn,r=n.endLineNumber,a=n.endColumn;this._startLineNumberDelta!==0&&(i=i+this._startLineNumberDelta,s=1),this._endLineNumberDelta!==0&&(r=r+this._endLineNumberDelta,a=1),n=re.createWithDirection(i,s,r,a,this._selectionDirection)}return n}}u(n2,"CopyLinesCommand");var eue=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},tue=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let dD=u(class{constructor(e,t,n,i){this._languageConfigurationService=i,this._selection=e,this._isMovingDown=t,this._autoIndent=n,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(e,t){const n=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===n){this._selectionId=t.trackSelection(this._selection);return}if(!this._isMovingDown&&this._selection.startLineNumber===1){this._selectionId=t.trackSelection(this._selection);return}this._moveEndPositionDown=!1;let i=this._selection;i.startLineNumber<i.endLineNumber&&i.endColumn===1&&(this._moveEndPositionDown=!0,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));const{tabSize:s,indentSize:r,insertSpaces:a}=e.getOptions(),l=this.buildIndentConverter(s,r,a),c={tokenization:{getLineTokens:d=>e.tokenization.getLineTokens(d),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(d,h)=>e.getLanguageIdAtPosition(d,h)},getLineContent:null};if(i.startLineNumber===i.endLineNumber&&e.getLineMaxColumn(i.startLineNumber)===1){const d=i.startLineNumber,h=this._isMovingDown?d+1:d-1;e.getLineMaxColumn(h)===1?t.addEditOperation(new L(1,1,1,1),null):(t.addEditOperation(new L(d,1,d,1),e.getLineContent(h)),t.addEditOperation(new L(h,1,h,e.getLineMaxColumn(h)),null)),i=new re(h,1,h,1)}else{let d,h;if(this._isMovingDown){d=i.endLineNumber+1,h=e.getLineContent(d),t.addEditOperation(new L(d-1,e.getLineMaxColumn(d-1),d,e.getLineMaxColumn(d)),null);let g=h;if(this.shouldAutoIndent(e,i)){const f=this.matchEnterRule(e,l,s,d,i.startLineNumber-1);if(f!==null){const _=vt(e.getLineContent(d)),v=f+Qi(_,s);g=Xm(v,s,a)+this.trimLeft(h)}else{c.getLineContent=v=>v===i.startLineNumber?e.getLineContent(d):e.getLineContent(v);const _=Fm(this._autoIndent,c,e.getLanguageIdAtPosition(d,1),i.startLineNumber,l,this._languageConfigurationService);if(_!==null){const v=vt(e.getLineContent(d)),C=Qi(_,s),w=Qi(v,s);C!==w&&(g=Xm(C,s,a)+this.trimLeft(h))}}t.addEditOperation(new L(i.startLineNumber,1,i.startLineNumber,1),g+`
`);const p=this.matchEnterRuleMovingDown(e,l,s,i.startLineNumber,d,g);if(p!==null)p!==0&&this.getIndentEditsOfMovingBlock(e,t,i,s,a,p);else{c.getLineContent=v=>v===i.startLineNumber?g:v>=i.startLineNumber+1&&v<=i.endLineNumber+1?e.getLineContent(v-1):e.getLineContent(v);const _=Fm(this._autoIndent,c,e.getLanguageIdAtPosition(d,1),i.startLineNumber+1,l,this._languageConfigurationService);if(_!==null){const v=vt(e.getLineContent(i.startLineNumber)),C=Qi(_,s),w=Qi(v,s);if(C!==w){const y=C-w;this.getIndentEditsOfMovingBlock(e,t,i,s,a,y)}}}}else t.addEditOperation(new L(i.startLineNumber,1,i.startLineNumber,1),g+`
`)}else if(d=i.startLineNumber-1,h=e.getLineContent(d),t.addEditOperation(new L(d,1,d+1,1),null),t.addEditOperation(new L(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),`
`+h),this.shouldAutoIndent(e,i)){c.getLineContent=f=>f===d?e.getLineContent(i.startLineNumber):e.getLineContent(f);const g=this.matchEnterRule(e,l,s,i.startLineNumber,i.startLineNumber-2);if(g!==null)g!==0&&this.getIndentEditsOfMovingBlock(e,t,i,s,a,g);else{const f=Fm(this._autoIndent,c,e.getLanguageIdAtPosition(i.startLineNumber,1),d,l,this._languageConfigurationService);if(f!==null){const p=vt(e.getLineContent(i.startLineNumber)),_=Qi(f,s),v=Qi(p,s);if(_!==v){const C=_-v;this.getIndentEditsOfMovingBlock(e,t,i,s,a,C)}}}}}this._selectionId=t.trackSelection(i)}buildIndentConverter(e,t,n){return{shiftIndent:i=>zs.shiftIndent(i,i.length+1,e,t,n),unshiftIndent:i=>zs.unshiftIndent(i,i.length+1,e,t,n)}}parseEnterResult(e,t,n,i,s){if(s){let r=s.indentation;s.indentAction===cn.None||s.indentAction===cn.Indent?r=s.indentation+s.appendText:s.indentAction===cn.IndentOutdent?r=s.indentation:s.indentAction===cn.Outdent&&(r=t.unshiftIndent(s.indentation)+s.appendText);const a=e.getLineContent(i);if(this.trimLeft(a).indexOf(this.trimLeft(r))>=0){const l=vt(e.getLineContent(i));let c=vt(r);const d=ZH(e,i,this._languageConfigurationService);d!==null&&d&2&&(c=t.unshiftIndent(c));const h=Qi(c,n),g=Qi(l,n);return h-g}}return null}matchEnterRuleMovingDown(e,t,n,i,s,r){if(Jr(r)>=0){const a=e.getLineMaxColumn(s),l=Ag(this._autoIndent,e,new L(s,a,s,a),this._languageConfigurationService);return this.parseEnterResult(e,t,n,i,l)}else{let a=i-1;for(;a>=1;){const d=e.getLineContent(a);if(Jr(d)>=0)break;a--}if(a<1||i>e.getLineCount())return null;const l=e.getLineMaxColumn(a),c=Ag(this._autoIndent,e,new L(a,l,a,l),this._languageConfigurationService);return this.parseEnterResult(e,t,n,i,c)}}matchEnterRule(e,t,n,i,s,r){let a=s;for(;a>=1;){let d;if(a===s&&r!==void 0?d=r:d=e.getLineContent(a),Jr(d)>=0)break;a--}if(a<1||i>e.getLineCount())return null;const l=e.getLineMaxColumn(a),c=Ag(this._autoIndent,e,new L(a,l,a,l),this._languageConfigurationService);return this.parseEnterResult(e,t,n,i,c)}trimLeft(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,t){if(this._autoIndent<4||!e.tokenization.isCheapToTokenize(t.startLineNumber))return!1;const n=e.getLanguageIdAtPosition(t.startLineNumber,1),i=e.getLanguageIdAtPosition(t.endLineNumber,1);return!(n!==i||this._languageConfigurationService.getLanguageConfiguration(n).indentRulesSupport===null)}getIndentEditsOfMovingBlock(e,t,n,i,s,r){for(let a=n.startLineNumber;a<=n.endLineNumber;a++){const l=e.getLineContent(a),c=vt(l),h=Qi(c,i)+r,g=Xm(h,i,s);g!==c&&(t.addEditOperation(new L(a,1,a,c.length+1),g),a===n.endLineNumber&&n.endColumn<=c.length+1&&g===""&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&n.startLineNumber<n.endLineNumber&&(n=n.setEndPosition(n.endLineNumber,2)),n}},"MoveLinesCommand");dD=eue([tue(3,rn)],dD);class ul{constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}static getCollator(){return ul._COLLATOR||(ul._COLLATOR=new Intl.Collator),ul._COLLATOR}getEditOperations(e,t){const n=nue(e,this.selection,this.descending);n&&t.addEditOperation(n.range,n.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,n){if(e===null)return!1;const i=Kz(e,t,n);if(!i)return!1;for(let s=0,r=i.before.length;s<r;s++)if(i.before[s]!==i.after[s])return!0;return!1}}u(ul,"SortLinesCommand");ul._COLLATOR=null;function Kz(o,e,t){const n=e.startLineNumber;let i=e.endLineNumber;if(e.endColumn===1&&i--,n>=i)return null;const s=[];for(let a=n;a<=i;a++)s.push(o.getLineContent(a));let r=s.slice(0);return r.sort(ul.getCollator().compare),t===!0&&(r=r.reverse()),{startLineNumber:n,endLineNumber:i,before:s,after:r}}u(Kz,"getSortData");function nue(o,e,t){const n=Kz(o,e,t);return n?Ot.replace(new L(n.startLineNumber,1,n.endLineNumber,o.getLineMaxColumn(n.endLineNumber)),n.after.join(`
`)):null}u(nue,"sortLines");class i2 extends de{constructor(e,t){super(t),this.down=e}run(e,t){if(!t.hasModel())return;const n=t.getSelections().map((r,a)=>({selection:r,index:a,ignore:!1}));n.sort((r,a)=>L.compareRangesUsingStarts(r.selection,a.selection));let i=n[0];for(let r=1;r<n.length;r++){const a=n[r];i.selection.endLineNumber===a.selection.startLineNumber&&(i.index<a.index?a.ignore=!0:(i.ignore=!0,i=a))}const s=[];for(const r of n)s.push(new n2(r.selection,this.down,r.ignore));t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}u(i2,"AbstractCopyLinesAction");class jz extends i2{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:m("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:P.MenubarSelectionMenu,group:"2_line",title:m({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}}u(jz,"CopyLinesUpAction");class $z extends i2{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:m("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:P.MenubarSelectionMenu,group:"2_line",title:m({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}}u($z,"CopyLinesDownAction");class qz extends de{constructor(){super({id:"editor.action.duplicateSelection",label:m("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:A.writable,menuOpts:{menuId:P.MenubarSelectionMenu,group:"2_line",title:m({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(e,t,n){if(!t.hasModel())return;const i=[],s=t.getSelections(),r=t.getModel();for(const a of s)if(a.isEmpty())i.push(new n2(a,!0));else{const l=new re(a.endLineNumber,a.endColumn,a.endLineNumber,a.endColumn);i.push(new qH(l,r.getValueInRange(a)))}t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}u(qz,"DuplicateSelectionAction");class s2 extends de{constructor(e,t){super(t),this.down=e}run(e,t){const n=e.get(rn),i=[],s=t.getSelections()||[],r=t.getOption(9);for(const a of s)i.push(new dD(a,this.down,r,n));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}u(s2,"AbstractMoveLinesAction");class Yz extends s2{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:m("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:P.MenubarSelectionMenu,group:"2_line",title:m({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}}u(Yz,"MoveLinesUpAction");class Xz extends s2{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:m("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:P.MenubarSelectionMenu,group:"2_line",title:m({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}}u(Xz,"MoveLinesDownAction");class o2 extends de{constructor(e,t){super(t),this.descending=e}run(e,t){const n=t.getSelections()||[];for(const s of n)if(!ul.canRun(t.getModel(),s,this.descending))return;const i=[];for(let s=0,r=n.length;s<r;s++)i[s]=new ul(n[s],this.descending);t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}u(o2,"AbstractSortLinesAction");class Zz extends o2{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:m("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:A.writable})}}u(Zz,"SortLinesAscendingAction");class Jz extends o2{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:m("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:A.writable})}}u(Jz,"SortLinesDescendingAction");class Qz extends de{constructor(){super({id:"editor.action.removeDuplicateLines",label:m("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:A.writable})}run(e,t){if(!t.hasModel())return;const n=t.getModel();if(n.getLineCount()===1&&n.getLineMaxColumn(1)===1)return;const i=[],s=[];let r=0;for(const a of t.getSelections()){const l=new Set,c=[];for(let f=a.startLineNumber;f<=a.endLineNumber;f++){const p=n.getLineContent(f);l.has(p)||(c.push(p),l.add(p))}const d=new re(a.startLineNumber,1,a.endLineNumber,n.getLineMaxColumn(a.endLineNumber)),h=a.startLineNumber-r,g=new re(h,1,h+c.length-1,c[c.length-1].length);i.push(Ot.replace(d,c.join(`
`))),s.push(g),r+=a.endLineNumber-a.startLineNumber+1-c.length}t.pushUndoStop(),t.executeEdits(this.id,i,s),t.pushUndoStop()}}u(Qz,"DeleteDuplicateLinesAction");class xv extends de{constructor(){super({id:xv.ID,label:m("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:xn(2089,2102),weight:100}})}run(e,t,n){let i=[];n.reason==="auto-save"&&(i=(t.getSelections()||[]).map(a=>new H(a.positionLineNumber,a.positionColumn)));const s=t.getSelection();if(s===null)return;const r=new zz(s,i);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop()}}u(xv,"TrimTrailingWhitespaceAction");xv.ID="editor.action.trimTrailingWhitespace";class eK extends de{constructor(){super({id:"editor.action.deleteLines",label:m("lines.delete","Delete Line"),alias:"Delete Line",precondition:A.writable,kbOpts:{kbExpr:A.textInputFocus,primary:3113,weight:100}})}run(e,t){if(!t.hasModel())return;const n=this._getLinesToRemove(t),i=t.getModel();if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return;let s=0;const r=[],a=[];for(let l=0,c=n.length;l<c;l++){const d=n[l];let h=d.startLineNumber,g=d.endLineNumber,f=1,p=i.getLineMaxColumn(g);g<i.getLineCount()?(g+=1,p=1):h>1&&(h-=1,f=i.getLineMaxColumn(h)),r.push(Ot.replace(new re(h,f,g,p),"")),a.push(new re(h-s,d.positionColumn,h-s,d.positionColumn)),s+=d.endLineNumber-d.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,r,a),t.pushUndoStop()}_getLinesToRemove(e){const t=e.getSelections().map(s=>{let r=s.endLineNumber;return s.startLineNumber<s.endLineNumber&&s.endColumn===1&&(r-=1),{startLineNumber:s.startLineNumber,selectionStartColumn:s.selectionStartColumn,endLineNumber:r,positionColumn:s.positionColumn}});t.sort((s,r)=>s.startLineNumber===r.startLineNumber?s.endLineNumber-r.endLineNumber:s.startLineNumber-r.startLineNumber);const n=[];let i=t[0];for(let s=1;s<t.length;s++)i.endLineNumber+1>=t[s].startLineNumber?i.endLineNumber=t[s].endLineNumber:(n.push(i),i=t[s]);return n.push(i),n}}u(eK,"DeleteLinesAction");class tK extends de{constructor(){super({id:"editor.action.indentLines",label:m("lines.indent","Indent Line"),alias:"Indent Line",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:2137,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,Ft.indent(n.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}}u(tK,"IndentLinesAction");class nK extends de{constructor(){super({id:"editor.action.outdentLines",label:m("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:2135,weight:100}})}run(e,t){Ig.Outdent.runEditorCommand(e,t,null)}}u(nK,"OutdentLinesAction");class iK extends de{constructor(){super({id:"editor.action.insertLineBefore",label:m("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:3075,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,Ft.lineInsertBefore(n.cursorConfig,t.getModel(),t.getSelections())))}}u(iK,"InsertLineBeforeAction");class sK extends de{constructor(){super({id:"editor.action.insertLineAfter",label:m("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:2051,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,Ft.lineInsertAfter(n.cursorConfig,t.getModel(),t.getSelections())))}}u(sK,"InsertLineAfterAction");class r2 extends de{run(e,t){if(!t.hasModel())return;const n=t.getSelection(),i=this._getRangesToDelete(t),s=[];for(let l=0,c=i.length-1;l<c;l++){const d=i[l],h=i[l+1];L.intersectRanges(d,h)===null?s.push(d):i[l+1]=L.plusRange(d,h)}s.push(i[i.length-1]);const r=this._getEndCursorState(n,s),a=s.map(l=>Ot.replace(l,""));t.pushUndoStop(),t.executeEdits(this.id,a,r),t.pushUndoStop()}}u(r2,"AbstractDeleteAllToBoundaryAction");class oK extends r2{constructor(){super({id:"deleteAllLeft",label:m("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:A.writable,kbOpts:{kbExpr:A.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(e,t){let n=null;const i=[];let s=0;return t.forEach(r=>{let a;if(r.endColumn===1&&s>0){const l=r.startLineNumber-s;a=new re(l,r.startColumn,l,r.startColumn)}else a=new re(r.startLineNumber,r.startColumn,r.startLineNumber,r.startColumn);s+=r.endLineNumber-r.startLineNumber,r.intersectRanges(e)?n=a:i.push(a)}),n&&i.unshift(n),i}_getRangesToDelete(e){const t=e.getSelections();if(t===null)return[];let n=t;const i=e.getModel();return i===null?[]:(n.sort(L.compareRangesUsingStarts),n=n.map(s=>{if(s.isEmpty())if(s.startColumn===1){const r=Math.max(1,s.startLineNumber-1),a=s.startLineNumber===1?1:i.getLineContent(r).length+1;return new L(r,a,s.startLineNumber,1)}else return new L(s.startLineNumber,1,s.startLineNumber,s.startColumn);else return new L(s.startLineNumber,1,s.endLineNumber,s.endColumn)}),n)}}u(oK,"DeleteAllLeftAction");class rK extends r2{constructor(){super({id:"deleteAllRight",label:m("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:A.writable,kbOpts:{kbExpr:A.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(e,t){let n=null;const i=[];for(let s=0,r=t.length,a=0;s<r;s++){const l=t[s],c=new re(l.startLineNumber-a,l.startColumn,l.startLineNumber-a,l.startColumn);l.intersectRanges(e)?n=c:i.push(c)}return n&&i.unshift(n),i}_getRangesToDelete(e){const t=e.getModel();if(t===null)return[];const n=e.getSelections();if(n===null)return[];const i=n.map(s=>{if(s.isEmpty()){const r=t.getLineMaxColumn(s.startLineNumber);return s.startColumn===r?new L(s.startLineNumber,s.startColumn,s.startLineNumber+1,1):new L(s.startLineNumber,s.startColumn,s.startLineNumber,r)}return s});return i.sort(L.compareRangesUsingStarts),i}}u(rK,"DeleteAllRightAction");class aK extends de{constructor(){super({id:"editor.action.joinLines",label:m("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(e,t){const n=t.getSelections();if(n===null)return;let i=t.getSelection();if(i===null)return;n.sort(L.compareRangesUsingStarts);const s=[],r=n.reduce((g,f)=>g.isEmpty()?g.endLineNumber===f.startLineNumber?(i.equalsSelection(g)&&(i=f),f):f.startLineNumber>g.endLineNumber+1?(s.push(g),f):new re(g.startLineNumber,g.startColumn,f.endLineNumber,f.endColumn):f.startLineNumber>g.endLineNumber?(s.push(g),f):new re(g.startLineNumber,g.startColumn,f.endLineNumber,f.endColumn));s.push(r);const a=t.getModel();if(a===null)return;const l=[],c=[];let d=i,h=0;for(let g=0,f=s.length;g<f;g++){const p=s[g],_=p.startLineNumber,v=1;let C=0,w,y;const S=a.getLineContent(p.endLineNumber).length-p.endColumn;if(p.isEmpty()||p.startLineNumber===p.endLineNumber){const T=p.getStartPosition();T.lineNumber<a.getLineCount()?(w=_+1,y=a.getLineMaxColumn(w)):(w=T.lineNumber,y=a.getLineMaxColumn(T.lineNumber))}else w=p.endLineNumber,y=a.getLineMaxColumn(w);let E=a.getLineContent(_);for(let T=_+1;T<=w;T++){const x=a.getLineContent(T),M=a.getLineFirstNonWhitespaceColumn(T);if(M>=1){let F=!0;E===""&&(F=!1),F&&(E.charAt(E.length-1)===" "||E.charAt(E.length-1)==="	")&&(F=!1,E=E.replace(/[\s\uFEFF\xA0]+$/g," "));const V=x.substr(M-1);E+=(F?" ":"")+V,F?C=V.length+1:C=V.length}else C=0}const k=new L(_,v,w,y);if(!k.isEmpty()){let T;p.isEmpty()?(l.push(Ot.replace(k,E)),T=new re(k.startLineNumber-h,E.length-C+1,_-h,E.length-C+1)):p.startLineNumber===p.endLineNumber?(l.push(Ot.replace(k,E)),T=new re(p.startLineNumber-h,p.startColumn,p.endLineNumber-h,p.endColumn)):(l.push(Ot.replace(k,E)),T=new re(p.startLineNumber-h,p.startColumn,p.startLineNumber-h,E.length-S)),L.intersectRanges(k,i)!==null?d=T:c.push(T)}h+=k.endLineNumber-k.startLineNumber}c.unshift(d),t.pushUndoStop(),t.executeEdits(this.id,l,c),t.pushUndoStop()}}u(aK,"JoinLinesAction");class lK extends de{constructor(){super({id:"editor.action.transpose",label:m("editor.transpose","Transpose characters around the cursor"),alias:"Transpose characters around the cursor",precondition:A.writable})}run(e,t){const n=t.getSelections();if(n===null)return;const i=t.getModel();if(i===null)return;const s=[];for(let r=0,a=n.length;r<a;r++){const l=n[r];if(!l.isEmpty())continue;const c=l.getStartPosition(),d=i.getLineMaxColumn(c.lineNumber);if(c.column>=d){if(c.lineNumber===i.getLineCount())continue;const h=new L(c.lineNumber,Math.max(1,c.column-1),c.lineNumber+1,1),g=i.getValueInRange(h).split("").reverse().join("");s.push(new Un(new re(c.lineNumber,Math.max(1,c.column-1),c.lineNumber+1,1),g))}else{const h=new L(c.lineNumber,Math.max(1,c.column-1),c.lineNumber,c.column+1),g=i.getValueInRange(h).split("").reverse().join("");s.push(new dy(h,g,new re(c.lineNumber,c.column+1,c.lineNumber,c.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}u(lK,"TransposeAction");class Tp extends de{run(e,t){const n=t.getSelections();if(n===null)return;const i=t.getModel();if(i===null)return;const s=t.getOption(119),r=[];for(const a of n)if(a.isEmpty()){const l=a.getStartPosition(),c=t.getConfiguredWordAtPosition(l);if(!c)continue;const d=new L(l.lineNumber,c.startColumn,l.lineNumber,c.endColumn),h=i.getValueInRange(d);r.push(Ot.replace(d,this._modifyText(h,s)))}else{const l=i.getValueInRange(a);r.push(Ot.replace(a,this._modifyText(l,s)))}t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop()}}u(Tp,"AbstractCaseAction");class cK extends Tp{constructor(){super({id:"editor.action.transformToUppercase",label:m("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:A.writable})}_modifyText(e,t){return e.toLocaleUpperCase()}}u(cK,"UpperCaseAction");class dK extends Tp{constructor(){super({id:"editor.action.transformToLowercase",label:m("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:A.writable})}_modifyText(e,t){return e.toLocaleLowerCase()}}u(dK,"LowerCaseAction");class xh{constructor(e,t){this._pattern=e,this._flags=t,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch{}}return this._actual}isSupported(){return this.get()!==null}}u(xh,"BackwardsCompatibleRegExp");class $f extends Tp{constructor(){super({id:"editor.action.transformToTitlecase",label:m("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:A.writable})}_modifyText(e,t){const n=$f.titleBoundary.get();return n?e.toLocaleLowerCase().replace(n,i=>i.toLocaleUpperCase()):e}}u($f,"TitleCaseAction");$f.titleBoundary=new xh("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");class hl extends Tp{constructor(){super({id:"editor.action.transformToSnakecase",label:m("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:A.writable})}_modifyText(e,t){const n=hl.caseBoundary.get(),i=hl.singleLetters.get();return!n||!i?e:e.replace(n,"$1_$2").replace(i,"$1_$2$3").toLocaleLowerCase()}}u(hl,"SnakeCaseAction");hl.caseBoundary=new xh("(\\p{Ll})(\\p{Lu})","gmu");hl.singleLetters=new xh("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");class ta extends Tp{constructor(){super({id:"editor.action.transformToKebabcase",label:m("editor.transformToKebabcase","Transform to Kebab Case"),alias:"Transform to Kebab Case",precondition:A.writable})}static isSupported(){return[this.caseBoundary,this.singleLetters,this.underscoreBoundary].every(t=>t.isSupported())}_modifyText(e,t){const n=ta.caseBoundary.get(),i=ta.singleLetters.get(),s=ta.underscoreBoundary.get();return!n||!i||!s?e:e.replace(s,"$1-$3").replace(n,"$1-$2").replace(i,"$1-$2").toLocaleLowerCase()}}u(ta,"KebabCaseAction");ta.caseBoundary=new xh("(\\p{Ll})(\\p{Lu})","gmu");ta.singleLetters=new xh("(\\p{Lu}|\\p{N})(\\p{Lu}\\p{Ll})","gmu");ta.underscoreBoundary=new xh("(\\S)(_)(\\S)","gm");ie(jz);ie($z);ie(qz);ie(Yz);ie(Xz);ie(Zz);ie(Jz);ie(Qz);ie(xv);ie(eK);ie(tK);ie(nK);ie(iK);ie(sK);ie(oK);ie(rK);ie(aK);ie(lK);ie(cK);ie(dK);hl.caseBoundary.isSupported()&&hl.singleLetters.isSupported()&&ie(hl);$f.titleBoundary.isSupported()&&ie($f);ta.isSupported()&&ie(ta);var iue=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},BC=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},uD=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const uK=new ce("LinkedEditingInputVisible",!1),hK="linked-editing-decoration";let qc=u(class hD extends U{constructor(e,t,n,i,s){super(),this.languageConfigurationService=i,this._syncRangesToken=0,this._localToDispose=this._register(new J),this._editor=e,this._providers=n.linkedEditingRangeProvider,this._enabled=!1,this._visibleContextKey=uK.bindTo(t),this._debounceInformation=s.for(this._providers,"Linked Editing",{min:200}),this._currentDecorations=this._editor.createDecorationsCollection(),this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new J),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequest=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel(()=>this.reinitialize(!0))),this._register(this._editor.onDidChangeConfiguration(r=>{(r.hasChanged(64)||r.hasChanged(84))&&this.reinitialize(!1)})),this._register(this._providers.onDidChange(()=>this.reinitialize(!1))),this._register(this._editor.onDidChangeModelLanguage(()=>this.reinitialize(!0))),this.reinitialize(!0)}static get(e){return e.getContribution(hD.ID)}reinitialize(e){const t=this._editor.getModel(),n=t!==null&&(this._editor.getOption(64)||this._editor.getOption(84))&&this._providers.has(t);if(n===this._enabled&&!e||(this._enabled=n,this.clearRanges(),this._localToDispose.clear(),!n||t===null))return;this._localToDispose.add(fe.runAndSubscribe(t.onDidChangeLanguageConfiguration,()=>{this._languageWordPattern=this.languageConfigurationService.getLanguageConfiguration(t.getLanguageId()).getWordDefinition()}));const i=new pr(this._debounceInformation.get(t)),s=u(()=>{var l;this._rangeUpdateTriggerPromise=i.trigger(()=>this.updateRanges(),(l=this._debounceDuration)!==null&&l!==void 0?l:this._debounceInformation.get(t))},"triggerRangeUpdate"),r=new pr(0),a=u(l=>{this._rangeSyncTriggerPromise=r.trigger(()=>this._syncRanges(l))},"triggerRangeSync");this._localToDispose.add(this._editor.onDidChangeCursorPosition(()=>{s()})),this._localToDispose.add(this._editor.onDidChangeModelContent(l=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){const c=this._currentDecorations.getRange(0);if(c&&l.changes.every(d=>c.intersectRanges(d.range))){a(this._syncRangesToken);return}}s()})),this._localToDispose.add({dispose:()=>{i.dispose(),r.dispose()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._syncRangesToken||this._currentDecorations.length===0)return;const t=this._editor.getModel(),n=this._currentDecorations.getRange(0);if(!n||n.startLineNumber!==n.endLineNumber)return this.clearRanges();const i=t.getValueInRange(n);if(this._currentWordPattern){const r=i.match(this._currentWordPattern);if((r?r[0].length:0)!==i.length)return this.clearRanges()}const s=[];for(let r=1,a=this._currentDecorations.length;r<a;r++){const l=this._currentDecorations.getRange(r);if(l)if(l.startLineNumber!==l.endLineNumber)s.push({range:l,text:i});else{let c=t.getValueInRange(l),d=i,h=l.startColumn,g=l.endColumn;const f=bu(c,d);h+=f,c=c.substr(f),d=d.substr(f);const p=sb(c,d);g-=p,c=c.substr(0,c.length-p),d=d.substr(0,d.length-p),(h!==g||d.length!==0)&&s.push({range:new L(l.startLineNumber,h,l.endLineNumber,g),text:d})}}if(s.length!==0)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;const r=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",s),this._editor._getViewModel().setPrevEditOperationType(r)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations.clear(),this._currentRequest&&(this._currentRequest.cancel(),this._currentRequest=null,this._currentRequestPosition=null)}updateRanges(e=!1){return uD(this,void 0,void 0,function*(){if(!this._editor.hasModel()){this.clearRanges();return}const t=this._editor.getPosition();if(!this._enabled&&!e||this._editor.getSelections().length>1){this.clearRanges();return}const n=this._editor.getModel(),i=n.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===i){if(t.equals(this._currentRequestPosition))return;if(this._currentDecorations.length>0){const r=this._currentDecorations.getRange(0);if(r&&r.containsPosition(t))return}}this._currentRequestPosition=t,this._currentRequestModelVersion=i;const s=On(r=>uD(this,void 0,void 0,function*(){try{const a=new Ai(!1),l=yield fK(this._providers,n,t,r);if(this._debounceInformation.update(n,a.elapsed()),s!==this._currentRequest||(this._currentRequest=null,i!==n.getVersionId()))return;let c=[];l?.ranges&&(c=l.ranges),this._currentWordPattern=l?.wordPattern||this._languageWordPattern;let d=!1;for(let g=0,f=c.length;g<f;g++)if(L.containsPosition(c[g],t)){if(d=!0,g!==0){const p=c[g];c.splice(g,1),c.unshift(p)}break}if(!d){this.clearRanges();return}const h=c.map(g=>({range:g,options:hD.DECORATION}));this._visibleContextKey.set(!0),this._currentDecorations.set(h),this._syncRangesToken++}catch(a){ca(a)||Ie(a),(this._currentRequest===s||!this._currentRequest)&&this.clearRanges()}}));return this._currentRequest=s,s})}},"LinkedEditingContribution");qc.ID="editor.contrib.linkedEditing";qc.DECORATION=Ae.register({description:"linked-editing",stickiness:0,className:hK});qc=iue([BC(1,De),BC(2,ue),BC(3,rn),BC(4,ho)],qc);class gK extends de{constructor(){super({id:"editor.action.linkedEditing",label:m("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:oe.and(A.writable,A.hasRenameProvider),kbOpts:{kbExpr:A.editorTextFocus,primary:3132,weight:100}})}runCommand(e,t){const n=e.get(dt),[i,s]=Array.isArray(t)&&t||[void 0,void 0];return be.isUri(i)&&H.isIPosition(s)?n.openCodeEditor({resource:i},n.getActiveCodeEditor()).then(r=>{r&&(r.setPosition(s),r.invokeWithinContext(a=>(this.reportTelemetry(a,r),this.run(a,r))))},Ie):super.runCommand(e,t)}run(e,t){const n=qc.get(t);return n?Promise.resolve(n.updateRanges(!0)):Promise.resolve()}}u(gK,"LinkedEditingAction");const sue=Ln.bindToContribution(qc.get);te(new sue({id:"cancelLinkedEditingInput",precondition:uK,handler:o=>o.clearRanges(),kbOpts:{kbExpr:A.editorTextFocus,weight:100+99,primary:9,secondary:[1033]}}));function fK(o,e,t,n){const i=o.ordered(e);return A5(i.map(s=>()=>uD(this,void 0,void 0,function*(){try{return yield s.provideLinkedEditingRanges(e,t,n)}catch(r){Hn(r);return}})),s=>!!s&&ci(s?.ranges))}u(fK,"getLinkedEditingRanges");const oue=I("editor.linkedEditingBackground",{dark:B.fromHex("#f00").transparent(.3),light:B.fromHex("#f00").transparent(.3),hcDark:B.fromHex("#f00").transparent(.3),hcLight:B.white},m("editorLinkedEditingBackground","Background color when the editor auto renames on type."));At((o,e)=>{const t=o.getColor(oue);t&&e.addRule(`.monaco-editor .${hK} { background: ${t}; border-left-color: ${t}; }`)});ua("_executeLinkedEditingProvider",(o,e,t)=>{const{linkedEditingRangeProvider:n}=o.get(ue);return fK(n,e,t,Ge.None)});it(qc.ID,qc);ie(gK);var pK=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let rue=u(class{constructor(e,t){this._link=e,this._provider=t}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}resolve(e){return pK(this,void 0,void 0,function*(){return this._link.url?this._link.url:typeof this._provider.resolveLink=="function"?Promise.resolve(this._provider.resolveLink(this._link,e)).then(t=>(this._link=t||this._link,this._link.url?this.resolve(e):Promise.reject(new Error("missing")))):Promise.reject(new Error("missing"))})}},"Link");class a_{constructor(e){this._disposables=new J;let t=[];for(const[n,i]of e){const s=n.links.map(r=>new rue(r,i));t=a_._union(t,s),RD(n)&&this._disposables.add(n)}this.links=t}dispose(){this._disposables.dispose(),this.links.length=0}static _union(e,t){const n=[];let i,s,r,a;for(i=0,r=0,s=e.length,a=t.length;i<s&&r<a;){const l=e[i],c=t[r];if(L.areIntersectingOrTouching(l.range,c.range)){i++;continue}L.compareRangesUsingStarts(l.range,c.range)<0?(n.push(l),i++):(n.push(c),r++)}for(;i<s;i++)n.push(e[i]);for(;r<a;r++)n.push(t[r]);return n}}u(a_,"LinksList");function mK(o,e,t){const n=[],i=o.ordered(e).reverse().map((s,r)=>Promise.resolve(s.provideLinks(e,t)).then(a=>{a&&(n[r]=[a,s])},Hn));return Promise.all(i).then(()=>{const s=new a_(p_(n));return t.isCancellationRequested?(s.dispose(),new a_([])):s})}u(mK,"getLinks");Qe.registerCommand("_executeLinkProvider",(o,...e)=>pK(void 0,void 0,void 0,function*(){let[t,n]=e;bt(t instanceof be),typeof n!="number"&&(n=0);const{linkProvider:i}=o.get(ue),s=o.get(Kt).getModel(t);if(!s)return[];const r=yield mK(i,s,Ge.None);if(!r)return[];for(let l=0;l<Math.min(n,r.links.length);l++)yield r.links[l].resolve(Ge.None);const a=r.links.slice(0);return r.dispose(),a}));var aue=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},WC=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},lue=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let qf=u(class bK extends U{constructor(e,t,n,i,s){super(),this.editor=e,this.openerService=t,this.notificationService=n,this.languageFeaturesService=i,this.providers=this.languageFeaturesService.linkProvider,this.debounceInformation=s.for(this.providers,"Links",{min:1e3,max:4e3}),this.computeLinks=this._register(new pt(()=>this.computeLinksNow(),1e3)),this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null;const r=this._register(new pS(e));this._register(r.onMouseMoveOrRelevantKeyDown(([a,l])=>{this._onEditorMouseMove(a,l)})),this._register(r.onExecute(a=>{this.onEditorMouseUp(a)})),this._register(r.onCancel(a=>{this.cleanUpActiveLinkDecoration()})),this._register(e.onDidChangeConfiguration(a=>{a.hasChanged(65)&&(this.updateDecorations([]),this.stop(),this.computeLinks.schedule(0))})),this._register(e.onDidChangeModelContent(a=>{this.editor.hasModel()&&this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()))})),this._register(e.onDidChangeModel(a=>{this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.computeLinks.schedule(0)})),this._register(e.onDidChangeModelLanguage(a=>{this.stop(),this.computeLinks.schedule(0)})),this._register(this.providers.onDidChange(a=>{this.stop(),this.computeLinks.schedule(0)})),this.computeLinks.schedule(0)}static get(e){return e.getContribution(bK.ID)}computeLinksNow(){return lue(this,void 0,void 0,function*(){if(!this.editor.hasModel()||!this.editor.getOption(65))return;const e=this.editor.getModel();if(this.providers.has(e)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=On(t=>mK(this.providers,e,t));try{const t=new Ai(!1);if(this.activeLinksList=yield this.computePromise,this.debounceInformation.update(e,t.elapsed()),e.isDisposed())return;this.updateDecorations(this.activeLinksList.links)}catch(t){Ie(t)}finally{this.computePromise=null}}})}updateDecorations(e){const t=this.editor.getOption(72)==="altKey",n=[],i=Object.keys(this.currentOccurrences);for(const r of i){const a=this.currentOccurrences[r];n.push(a.decorationId)}const s=[];if(e)for(const r of e)s.push(hu.decoration(r,t));this.editor.changeDecorations(r=>{const a=r.deltaDecorations(n,s);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let l=0,c=a.length;l<c;l++){const d=new hu(e[l],a[l]);this.currentOccurrences[d.decorationId]=d}})}_onEditorMouseMove(e,t){const n=this.editor.getOption(72)==="altKey";if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();const i=this.getLinkOccurrence(e.target.position);i&&this.editor.changeDecorations(s=>{i.activate(s,n),this.activeLinkDecorationId=i.decorationId})}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){const e=this.editor.getOption(72)==="altKey";if(this.activeLinkDecorationId){const t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations(n=>{t.deactivate(n,e)}),this.activeLinkDecorationId=null}}onEditorMouseUp(e){if(!this.isEnabled(e))return;const t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}openLinkOccurrence(e,t,n=!1){if(!this.openerService)return;const{link:i}=e;i.resolve(Ge.None).then(s=>{if(typeof s=="string"&&this.editor.hasModel()){const r=this.editor.getModel().uri;if(r.scheme===Pe.file&&s.startsWith(`${Pe.file}:`)){const a=be.parse(s);if(a.scheme===Pe.file){const l=Fr(a);let c=null;l.startsWith("/./")?c=`.${l.substr(1)}`:l.startsWith("//./")&&(c=`.${l.substr(2)}`),c&&(s=nee(r,c))}}}return this.openerService.open(s,{openToSide:t,fromUserGesture:n,allowContributedOpeners:!0,allowCommands:!0,fromWorkspace:!0})},s=>{const r=s instanceof Error?s.message:s;r==="invalid"?this.notificationService.warn(m("invalid.url","Failed to open this link because it is not well-formed: {0}",i.url.toString())):r==="missing"?this.notificationService.warn(m("missing.url","Failed to open this link because its target is missing.")):Ie(s)})}getLinkOccurrence(e){if(!this.editor.hasModel()||!e)return null;const t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);for(const n of t){const i=this.currentOccurrences[n.id];if(i)return i}return null}isEnabled(e,t){return Boolean(e.target.type===6&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}stop(){var e;this.computeLinks.cancel(),this.activeLinksList&&((e=this.activeLinksList)===null||e===void 0||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop()}},"LinkDetector");qf.ID="editor.linkDetector";qf=aue([WC(1,uo),WC(2,gn),WC(3,ue),WC(4,ho)],qf);const sO={general:Ae.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:Ae.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})};class hu{constructor(e,t){this.link=e,this.decorationId=t}static decoration(e,t){return{range:e.range,options:hu._getOptions(e,t,!1)}}static _getOptions(e,t,n){const i=Object.assign({},n?sO.active:sO.general);return i.hoverMessage=cue(e,t),i}activate(e,t){e.changeDecorationOptions(this.decorationId,hu._getOptions(this.link,t,!0))}deactivate(e,t){e.changeDecorationOptions(this.decorationId,hu._getOptions(this.link,t,!1))}}u(hu,"LinkOccurrence");function cue(o,e){const t=o.url&&/^command:/i.test(o.url.toString()),n=o.tooltip?o.tooltip:t?m("links.navigate.executeCmd","Execute command"):m("links.navigate.follow","Follow link"),i=e?Xe?m("links.navigate.kb.meta.mac","cmd + click"):m("links.navigate.kb.meta","ctrl + click"):Xe?m("links.navigate.kb.alt.mac","option + click"):m("links.navigate.kb.alt","alt + click");if(o.url){let s="";if(/^command:/i.test(o.url.toString())){const a=o.url.toString().match(/^command:([^?#]+)/);if(a){const l=a[1];s=m("tooltip.explanation","Execute command {0}",l)}}return new Ei("",!0).appendLink(o.url.toString(!0).replace(/ /g,"%20"),n,s).appendMarkdown(` (${i})`)}else return new Ei().appendText(`${n} (${i})`)}u(cue,"getHoverMessage");class _K extends de{constructor(){super({id:"editor.action.openLink",label:m("label","Open Link"),alias:"Open Link",precondition:void 0})}run(e,t){const n=qf.get(t);if(!n||!t.hasModel())return;const i=t.getSelections();for(const s of i){const r=n.getLinkOccurrence(s.getEndPosition());r&&n.openLinkOccurrence(r,!1)}}}u(_K,"OpenLinkAction");it(qf.ID,qf);ie(_K);At((o,e)=>{const t=o.getColor(DA);t&&e.addRule(`.monaco-editor .detected-link-active { color: ${t} !important; }`)});var due=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},uue=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};function id(o,e){const t=e.filter(n=>!o.find(i=>i.equals(n)));if(t.length>=1){const n=t.map(s=>`line ${s.viewState.position.lineNumber} column ${s.viewState.position.column}`).join(", "),i=t.length===1?m("cursorAdded","Cursor added: {0}",n):m("cursorsAdded","Cursors added: {0}",n);o1(i)}}u(id,"announceCursorChange");class vK extends de{constructor(){super({id:"editor.action.insertCursorAbove",label:m("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:A.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:P.MenubarSelectionMenu,group:"3_multi",title:m({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,n){if(!t.hasModel())return;let i=!0;n&&n.logicalLine===!1&&(i=!1);const s=t._getViewModel();if(s.cursorConfig.readOnly)return;s.model.pushStackElement();const r=s.getCursorStates();s.setCursorStates(n.source,3,In.addCursorUp(s,r,i)),s.revealTopMostCursor(n.source),id(r,s.getCursorStates())}}u(vK,"InsertCursorAbove");class CK extends de{constructor(){super({id:"editor.action.insertCursorBelow",label:m("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:A.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:P.MenubarSelectionMenu,group:"3_multi",title:m({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,n){if(!t.hasModel())return;let i=!0;n&&n.logicalLine===!1&&(i=!1);const s=t._getViewModel();if(s.cursorConfig.readOnly)return;s.model.pushStackElement();const r=s.getCursorStates();s.setCursorStates(n.source,3,In.addCursorDown(s,r,i)),s.revealBottomMostCursor(n.source),id(r,s.getCursorStates())}}u(CK,"InsertCursorBelow");class wK extends de{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:m("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:A.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:P.MenubarSelectionMenu,group:"3_multi",title:m({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,n){if(!e.isEmpty()){for(let i=e.startLineNumber;i<e.endLineNumber;i++){const s=t.getLineMaxColumn(i);n.push(new re(i,s,i,s))}e.endColumn>1&&n.push(new re(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;const n=t.getModel(),i=t.getSelections(),s=t._getViewModel(),r=s.getCursorStates(),a=[];i.forEach(l=>this.getCursorsForSelection(l,n,a)),a.length>0&&t.setSelections(a),id(r,s.getCursorStates())}}u(wK,"InsertCursorAtEndOfEachLineSelected");class yK extends de{constructor(){super({id:"editor.action.addCursorsToBottom",label:m("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getSelections(),i=t.getModel().getLineCount(),s=[];for(let l=n[0].startLineNumber;l<=i;l++)s.push(new re(l,n[0].startColumn,l,n[0].endColumn));const r=t._getViewModel(),a=r.getCursorStates();s.length>0&&t.setSelections(s),id(a,r.getCursorStates())}}u(yK,"InsertCursorAtEndOfLineSelected");class SK extends de{constructor(){super({id:"editor.action.addCursorsToTop",label:m("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getSelections(),i=[];for(let a=n[0].startLineNumber;a>=1;a--)i.push(new re(a,n[0].startColumn,a,n[0].endColumn));const s=t._getViewModel(),r=s.getCursorStates();i.length>0&&t.setSelections(i),id(r,s.getCursorStates())}}u(SK,"InsertCursorAtTopOfLineSelected");class Dm{constructor(e,t,n){this.selections=e,this.revealRange=t,this.revealScrollType=n}}u(Dm,"MultiCursorSessionResult");class Yf{constructor(e,t,n,i,s,r,a){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=n,this.searchText=i,this.wholeWord=s,this.matchCase=r,this.currentMatch=a}static create(e,t){if(!e.hasModel())return null;const n=t.getState();if(!e.hasTextFocus()&&n.isRevealed&&n.searchString.length>0)return new Yf(e,t,!1,n.searchString,n.wholeWord,n.matchCase,null);let i=!1,s,r;const a=e.getSelections();a.length===1&&a[0].isEmpty()?(i=!0,s=!0,r=!0):(s=n.wholeWord,r=n.matchCase);const l=e.getSelection();let c,d=null;if(l.isEmpty()){const h=e.getConfiguredWordAtPosition(l.getStartPosition());if(!h)return null;c=h.word,d=new re(l.startLineNumber,h.startColumn,l.startLineNumber,h.endColumn)}else c=e.getModel().getValueInRange(l).replace(/\r\n/g,`
`);return new Yf(e,t,i,c,s,r,d)}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new Dm(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new Dm(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const i=this.currentMatch;return this.currentMatch=null,i}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(119):null,!1);return n?new re(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new Dm(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new Dm(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const i=this.currentMatch;return this.currentMatch=null,i}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(119):null,!1);return n?new re(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}selectAll(e){if(!this._editor.hasModel())return[];this.findController.highlightFindOptions();const t=this._editor.getModel();return e?t.findMatches(this.searchText,e,!1,this.matchCase,this.wholeWord?this._editor.getOption(119):null,!1,1073741824):t.findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(119):null,!1,1073741824)}}u(Yf,"MultiCursorSession");class Yc extends U{constructor(e){super(),this._sessionDispose=this._register(new J),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}static get(e){return e.getContribution(Yc.ID)}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const t=Yf.create(this._editor,e);if(!t)return;this._session=t;const n={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(n.wholeWordOverride=1,n.matchCaseOverride=1,n.isRegexOverride=2),e.getState().change(n,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(i=>{this._ignoreSelectionChange||this._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(()=>{this._endSession()})),this._sessionDispose.add(e.getState().onFindReplaceStateChange(i=>{(i.matchCase||i.wholeWord)&&this._endSession()}))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;const n=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return n?new re(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):t}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){const t=this._editor.getSelections();if(t.length>1){const i=e.getState().matchCase;if(!AK(this._editor.getModel(),t,i)){const r=this._editor.getModel(),a=[];for(let l=0,c=t.length;l<c;l++)a[l]=this._expandEmptyToWord(r,t[l]);this._editor.setSelections(a);return}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null;const n=e.getState();if(n.isRevealed&&n.searchString.length>0&&n.isRegex){const i=this._editor.getModel();n.searchScope?t=i.findMatches(n.searchString,n.searchScope,n.isRegex,n.matchCase,n.wholeWord?this._editor.getOption(119):null,!1,1073741824):t=i.findMatches(n.searchString,!0,n.isRegex,n.matchCase,n.wholeWord?this._editor.getOption(119):null,!1,1073741824)}else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll(n.searchScope)}if(t.length>0){const i=this._editor.getSelection();for(let s=0,r=t.length;s<r;s++){const a=t[s];if(a.range.intersectRanges(i)){t[s]=t[0],t[0]=a;break}}this._setSelections(t.map(s=>new re(s.range.startLineNumber,s.range.startColumn,s.range.endLineNumber,s.range.endColumn)))}}}u(Yc,"MultiCursorSelectionController");Yc.ID="editor.contrib.multiCursorController";class Eh extends de{run(e,t){const n=Yc.get(t);if(!n)return;const i=us.get(t);if(!i)return;const s=t._getViewModel();if(s){const r=s.getCursorStates();this._run(n,i),id(r,s.getCursorStates())}}}u(Eh,"MultiCursorSelectionControllerAction");class TK extends Eh{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:m("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:2082,weight:100},menuOpts:{menuId:P.MenubarSelectionMenu,group:"3_multi",title:m({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}}u(TK,"AddSelectionToNextFindMatchAction");class LK extends Eh{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:m("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:P.MenubarSelectionMenu,group:"3_multi",title:m({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}}u(LK,"AddSelectionToPreviousFindMatchAction");class xK extends Eh{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:m("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:xn(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}}u(xK,"MoveSelectionToNextFindMatchAction");class EK extends Eh{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:m("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}}u(EK,"MoveSelectionToPreviousFindMatchAction");class kK extends Eh{constructor(){super({id:"editor.action.selectHighlights",label:m("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:3114,weight:100},menuOpts:{menuId:P.MenubarSelectionMenu,group:"3_multi",title:m({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}}u(kK,"SelectHighlightsAction");class MK extends Eh{constructor(){super({id:"editor.action.changeAll",label:m("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:oe.and(A.writable,A.editorTextFocus),kbOpts:{kbExpr:A.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}}u(MK,"CompatChangeAll");class DK{constructor(e,t,n,i,s){this._model=e,this._searchText=t,this._matchCase=n,this._wordSeparators=i,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,s&&this._model===s._model&&this._searchText===s._searchText&&this._matchCase===s._matchCase&&this._wordSeparators===s._wordSeparators&&this._modelVersionId===s._modelVersionId&&(this._cachedFindMatches=s._cachedFindMatches)}findMatches(){return this._cachedFindMatches===null&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map(e=>e.range),this._cachedFindMatches.sort(L.compareRangesUsingStarts)),this._cachedFindMatches}}u(DK,"SelectionHighlighterState");let Yu=u(class O0 extends U{constructor(e,t){super(),this._languageFeaturesService=t,this.editor=e,this._isEnabled=e.getOption(99),this._decorations=e.createDecorationsCollection(),this.updateSoon=this._register(new pt(()=>this._update(),300)),this.state=null,this._register(e.onDidChangeConfiguration(i=>{this._isEnabled=e.getOption(99)})),this._register(e.onDidChangeCursorSelection(i=>{this._isEnabled&&(i.selection.isEmpty()?i.reason===3?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())})),this._register(e.onDidChangeModel(i=>{this._setState(null)})),this._register(e.onDidChangeModelContent(i=>{this._isEnabled&&this.updateSoon.schedule()}));const n=us.get(e);n&&this._register(n.getState().onFindReplaceStateChange(i=>{this._update()}))}_update(){this._setState(O0._createState(this.state,this._isEnabled,this.editor))}static _createState(e,t,n){if(!t||!n.hasModel())return null;const i=n.getSelection();if(i.startLineNumber!==i.endLineNumber)return null;const s=Yc.get(n);if(!s)return null;const r=us.get(n);if(!r)return null;let a=s.getSession(r);if(!a){const d=n.getSelections();if(d.length>1){const g=r.getState().matchCase;if(!AK(n.getModel(),d,g))return null}a=Yf.create(n,r)}if(!a||a.currentMatch||/^[ \t]+$/.test(a.searchText)||a.searchText.length>200)return null;const l=r.getState(),c=l.matchCase;if(l.isRevealed){let d=l.searchString;c||(d=d.toLowerCase());let h=a.searchText;if(c||(h=h.toLowerCase()),d===h&&a.matchCase===l.matchCase&&a.wholeWord===l.wholeWord&&!l.isRegex)return null}return new DK(n.getModel(),a.searchText,a.matchCase,a.wholeWord?n.getOption(119):null,e)}_setState(e){if(this.state=e,!this.state){this._decorations.clear();return}if(!this.editor.hasModel())return;const t=this.editor.getModel();if(t.isTooLargeForTokenization())return;const n=this.state.findMatches(),i=this.editor.getSelections();i.sort(L.compareRangesUsingStarts);const s=[];for(let l=0,c=0,d=n.length,h=i.length;l<d;){const g=n[l];if(c>=h)s.push(g),l++;else{const f=L.compareRangesUsingStarts(g,i[c]);f<0?((i[c].isEmpty()||!L.areIntersecting(g,i[c]))&&s.push(g),l++):(f>0||l++,c++)}}const r=this._languageFeaturesService.documentHighlightProvider.has(t)&&this.editor.getOption(74),a=s.map(l=>({range:l,options:r?O0._SELECTION_HIGHLIGHT:O0._SELECTION_HIGHLIGHT_OVERVIEW}));this._decorations.set(a)}dispose(){this._setState(null),super.dispose()}},"SelectionHighlighter");Yu.ID="editor.contrib.selectionHighlighter";Yu._SELECTION_HIGHLIGHT_OVERVIEW=Ae.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",minimap:{color:Zt(ry),position:Zs.Inline},overviewRuler:{color:Zt(aH),position:io.Center}});Yu._SELECTION_HIGHLIGHT=Ae.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"});Yu=due([uue(1,ue)],Yu);function AK(o,e,t){const n=oO(o,e[0],!t);for(let i=1,s=e.length;i<s;i++){const r=e[i];if(r.isEmpty())return!1;const a=oO(o,r,!t);if(n!==a)return!1}return!0}u(AK,"modelRangesContainSameText");function oO(o,e,t){const n=o.getValueInRange(e);return t?n.toLowerCase():n}u(oO,"getValueInRange");class IK extends de{constructor(){super({id:"editor.action.focusNextCursor",label:m("mutlicursor.focusNextCursor","Focus Next Cursor"),description:{description:m("mutlicursor.focusNextCursor.description","Focuses the next cursor"),args:[]},alias:"Focus Next Cursor",precondition:void 0})}run(e,t,n){if(!t.hasModel())return;const i=t._getViewModel();if(i.cursorConfig.readOnly)return;i.model.pushStackElement();const s=Array.from(i.getCursorStates()),r=s.shift();r&&(s.push(r),i.setCursorStates(n.source,3,s),i.revealPrimaryCursor(n.source,!0),id(s,i.getCursorStates()))}}u(IK,"FocusNextCursor");class NK extends de{constructor(){super({id:"editor.action.focusPreviousCursor",label:m("mutlicursor.focusPreviousCursor","Focus Previous Cursor"),description:{description:m("mutlicursor.focusPreviousCursor.description","Focuses the previous cursor"),args:[]},alias:"Focus Previous Cursor",precondition:void 0})}run(e,t,n){if(!t.hasModel())return;const i=t._getViewModel();if(i.cursorConfig.readOnly)return;i.model.pushStackElement();const s=Array.from(i.getCursorStates()),r=s.pop();r&&(s.unshift(r),i.setCursorStates(n.source,3,s),i.revealPrimaryCursor(n.source,!0),id(s,i.getCursorStates()))}}u(NK,"FocusPreviousCursor");it(Yc.ID,Yc);it(Yu.ID,Yu);ie(vK);ie(CK);ie(wK);ie(TK);ie(LK);ie(xK);ie(EK);ie(kK);ie(MK);ie(yK);ie(SK);ie(IK);ie(NK);var PK=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const Xu={Visible:new ce("parameterHintsVisible",!1),MultipleSignatures:new ce("parameterHintsMultipleSignatures",!1)};function RK(o,e,t,n,i){return PK(this,void 0,void 0,function*(){const s=o.ordered(e);for(const r of s)try{const a=yield r.provideSignatureHelp(e,t,i,n);if(a)return a}catch(a){Hn(a)}})}u(RK,"provideSignatureHelp");Qe.registerCommand("_executeSignatureHelpProvider",(o,...e)=>PK(void 0,void 0,void 0,function*(){const[t,n,i]=e;bt(be.isUri(t)),bt(H.isIPosition(n)),bt(typeof i=="string"||!i);const s=o.get(ue),r=yield o.get(Ji).createModelReference(t);try{const a=yield RK(s.signatureHelpProvider,r.object.textEditorModel,H.lift(n),{triggerKind:Zr.Invoke,isRetrigger:!1,triggerCharacter:i},Ge.None);return a?(setTimeout(()=>a.dispose(),0),a.value):void 0}finally{r.dispose()}}));var hue=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})},Jl;(function(o){o.Default={type:0};class e{constructor(i,s){this.request=i,this.previouslyActiveHints=s,this.type=2}}u(e,"Pending"),o.Pending=e;class t{constructor(i){this.hints=i,this.type=1}}u(t,"Active"),o.Active=t})(Jl||(Jl={}));class Ev extends U{constructor(e,t,n=Ev.DEFAULT_DELAY){super(),this._onChangedHints=this._register(new R),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=Jl.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new gi),this.triggerChars=new Rd,this.retriggerChars=new Rd,this.triggerId=0,this.editor=e,this.providers=t,this.throttledDelayer=new pr(n),this._register(this.editor.onDidBlurEditorWidget(()=>this.cancel())),this._register(this.editor.onDidChangeConfiguration(()=>this.onEditorConfigurationChange())),this._register(this.editor.onDidChangeModel(i=>this.onModelChanged())),this._register(this.editor.onDidChangeModelLanguage(i=>this.onModelChanged())),this._register(this.editor.onDidChangeCursorSelection(i=>this.onCursorChange(i))),this._register(this.editor.onDidChangeModelContent(i=>this.onModelContentChange())),this._register(this.providers.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType(i=>this.onDidType(i))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(e){this._state.type===2&&this._state.request.cancel(),this._state=e}cancel(e=!1){this.state=Jl.Default,this.throttledDelayer.cancel(),e||this._onChangedHints.fire(void 0)}trigger(e,t){const n=this.editor.getModel();if(!n||!this.providers.has(n))return;const i=++this.triggerId;this._pendingTriggers.push(e),this.throttledDelayer.trigger(()=>this.doTrigger(i),t).catch(Ie)}next(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=t%e===e-1,i=this.editor.getOption(78).cycle;if((e<2||n)&&!i){this.cancel();return}this.updateActiveSignature(n&&i?0:t+1)}previous(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=t===0,i=this.editor.getOption(78).cycle;if((e<2||n)&&!i){this.cancel();return}this.updateActiveSignature(n&&i?e-1:t-1)}updateActiveSignature(e){this.state.type===1&&(this.state=new Jl.Active(Object.assign(Object.assign({},this.state.hints),{activeSignature:e})),this._onChangedHints.fire(this.state.hints))}doTrigger(e){return hue(this,void 0,void 0,function*(){const t=this.state.type===1||this.state.type===2,n=this.getLastActiveHints();if(this.cancel(!0),this._pendingTriggers.length===0)return!1;const i=this._pendingTriggers.reduce(gue);this._pendingTriggers=[];const s={triggerKind:i.triggerKind,triggerCharacter:i.triggerCharacter,isRetrigger:t,activeSignatureHelp:n};if(!this.editor.hasModel())return!1;const r=this.editor.getModel(),a=this.editor.getPosition();this.state=new Jl.Pending(On(l=>RK(this.providers,r,a,s,l)),n);try{const l=yield this.state.request;return e!==this.triggerId?(l?.dispose(),!1):!l||!l.value.signatures||l.value.signatures.length===0?(l?.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1):(this.state=new Jl.Active(l.value),this._lastSignatureHelpResult.value=l,this._onChangedHints.fire(this.state.hints),!0)}catch(l){return e===this.triggerId&&(this.state=Jl.Default),Ie(l),!1}})}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return this.state.type===1||this.state.type===2||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars=new Rd,this.retriggerChars=new Rd;const e=this.editor.getModel();if(e)for(const t of this.providers.ordered(e)){for(const n of t.signatureHelpTriggerCharacters||[])this.triggerChars.add(n.charCodeAt(0)),this.retriggerChars.add(n.charCodeAt(0));for(const n of t.signatureHelpRetriggerCharacters||[])this.retriggerChars.add(n.charCodeAt(0))}}onDidType(e){if(!this.triggerOnType)return;const t=e.length-1,n=e.charCodeAt(t);(this.triggerChars.has(n)||this.isTriggered&&this.retriggerChars.has(n))&&this.trigger({triggerKind:Zr.TriggerCharacter,triggerCharacter:e.charAt(t)})}onCursorChange(e){e.source==="mouse"?this.cancel():this.isTriggered&&this.trigger({triggerKind:Zr.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:Zr.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(78).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}}u(Ev,"ParameterHintsModel");Ev.DEFAULT_DELAY=120;function gue(o,e){switch(e.triggerKind){case Zr.Invoke:return e;case Zr.ContentChange:return o;case Zr.TriggerCharacter:default:return e}}u(gue,"mergeTriggerContexts");var fue=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},UC=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const _s=ee,pue=vn("parameter-hints-next",b.chevronDown,m("parameterHintsNextIcon","Icon for show next parameter hint.")),mue=vn("parameter-hints-previous",b.chevronUp,m("parameterHintsPreviousIcon","Icon for show previous parameter hint."));let vw=u(class FK extends U{constructor(e,t,n,i,s){super(),this.editor=e,this.renderDisposeables=this._register(new J),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new xl({editor:e},i,n)),this.model=this._register(new Ev(e,s.signatureHelpProvider)),this.keyVisible=Xu.Visible.bindTo(t),this.keyMultipleSignatures=Xu.MultipleSignatures.bindTo(t),this._register(this.model.onChangedHints(r=>{r?(this.show(),this.render(r)):this.hide()}))}createParameterHintDOMNodes(){const e=_s(".editor-widget.parameter-hints-widget"),t=q(e,_s(".phwrapper"));t.tabIndex=-1;const n=q(t,_s(".controls")),i=q(n,_s(".button"+ct.asCSSSelector(mue))),s=q(n,_s(".overloads")),r=q(n,_s(".button"+ct.asCSSSelector(pue)));this._register(Y(i,"click",g=>{ft.stop(g),this.previous()})),this._register(Y(r,"click",g=>{ft.stop(g),this.next()}));const a=_s(".body"),l=new lp(a,{alwaysConsumeMouseWheel:!0});this._register(l),t.appendChild(l.getDomNode());const c=q(a,_s(".signature")),d=q(a,_s(".docs"));e.style.userSelect="text",this.domNodes={element:e,signature:c,overloads:s,docs:d,scrollbar:l},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection(g=>{this.visible&&this.editor.layoutContentWidget(this)}));const h=u(()=>{if(!this.domNodes)return;const g=this.editor.getOption(46);this.domNodes.element.style.fontSize=`${g.fontSize}px`,this.domNodes.element.style.lineHeight=`${g.lineHeight/g.fontSize}`},"updateFont");h(),this._register(fe.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter(g=>g.hasChanged(46)).on(h,null)),this._register(this.editor.onDidLayoutChange(g=>this.updateMaxHeight())),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout(()=>{var e;(e=this.domNodes)===null||e===void 0||e.element.classList.add("visible")},100),this.editor.layoutContentWidget(this))}hide(){var e;this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,(e=this.domNodes)===null||e===void 0||e.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(e){var t;if(this.renderDisposeables.clear(),!this.domNodes)return;const n=e.signatures.length>1;this.domNodes.element.classList.toggle("multiple",n),this.keyMultipleSignatures.set(n),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";const i=e.signatures[e.activeSignature];if(!i)return;const s=q(this.domNodes.signature,_s(".code")),r=this.editor.getOption(46);s.style.fontSize=`${r.fontSize}px`,s.style.fontFamily=r.fontFamily;const a=i.parameters.length>0,l=(t=i.activeParameter)!==null&&t!==void 0?t:e.activeParameter;if(a)this.renderParameters(s,i,l);else{const h=q(s,_s("span"));h.textContent=i.label}const c=i.parameters[l];if(c?.documentation){const h=_s("span.documentation");if(typeof c.documentation=="string")h.textContent=c.documentation;else{const g=this.renderMarkdownDocs(c.documentation);h.appendChild(g.element)}q(this.domNodes.docs,_s("p",{},h))}if(i.documentation!==void 0)if(typeof i.documentation=="string")q(this.domNodes.docs,_s("p",{},i.documentation));else{const h=this.renderMarkdownDocs(i.documentation);q(this.domNodes.docs,h.element)}const d=this.hasDocs(i,c);if(this.domNodes.signature.classList.toggle("has-docs",d),this.domNodes.docs.classList.toggle("empty",!d),this.domNodes.overloads.textContent=String(e.activeSignature+1).padStart(e.signatures.length.toString().length,"0")+"/"+e.signatures.length,c){let h="";const g=i.parameters[l];Array.isArray(g.label)?h=i.label.substring(g.label[0],g.label[1]):h=g.label,g.documentation&&(h+=typeof g.documentation=="string"?`, ${g.documentation}`:`, ${g.documentation.value}`),i.documentation&&(h+=typeof i.documentation=="string"?`, ${i.documentation}`:`, ${i.documentation.value}`),this.announcedLabel!==h&&(Zn(m("hint","{0}, hint",h)),this.announcedLabel=h)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(e){const t=this.renderDisposeables.add(this.markdownRenderer.render(e,{asyncRenderCallback:()=>{var n;(n=this.domNodes)===null||n===void 0||n.scrollbar.scanDomNode()}}));return t.element.classList.add("markdown-docs"),t}hasDocs(e,t){return!!(t&&typeof t.documentation=="string"&&Bv(t.documentation).length>0||t&&typeof t.documentation=="object"&&Bv(t.documentation).value.length>0||e.documentation&&typeof e.documentation=="string"&&Bv(e.documentation).length>0||e.documentation&&typeof e.documentation=="object"&&Bv(e.documentation.value).length>0)}renderParameters(e,t,n){const[i,s]=this.getParameterLabelOffsets(t,n),r=document.createElement("span");r.textContent=t.label.substring(0,i);const a=document.createElement("span");a.textContent=t.label.substring(i,s),a.className="parameter active";const l=document.createElement("span");l.textContent=t.label.substring(s),q(e,r,a,l)}getParameterLabelOffsets(e,t){const n=e.parameters[t];if(n){if(Array.isArray(n.label))return n.label;if(n.label.length){const i=new RegExp(`(\\W|^)${As(n.label)}(?=\\W|$)`,"g");i.test(e.label);const s=i.lastIndex-n.label.length;return s>=0?[s,i.lastIndex]:[0,0]}else return[0,0]}else return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}cancel(){this.model.cancel()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return FK.ID}trigger(e){this.model.trigger(e,0)}updateMaxHeight(){if(!this.domNodes)return;const t=`${Math.max(this.editor.getLayoutInfo().height/4,250)}px`;this.domNodes.element.style.maxHeight=t;const n=this.domNodes.element.getElementsByClassName("phwrapper");n.length&&(n[0].style.maxHeight=t)}},"ParameterHintsWidget");vw.ID="editor.widget.parameterHintsWidget";vw=fue([UC(1,De),UC(2,uo),UC(3,Gt),UC(4,ue)],vw);const bue=I("editorHoverWidget.highlightForeground",{dark:wo,light:wo,hcDark:wo,hcLight:wo},m("editorHoverWidgetHighlightForeground","Foreground color of the active item in the parameter hint."));At((o,e)=>{const t=o.getColor(MA);if(t){const c=ui(o.type)?2:1;e.addRule(`.monaco-editor .parameter-hints-widget { border: ${c}px solid ${t}; }`),e.addRule(`.monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid ${t.transparent(.5)}; }`)}const n=o.getColor(xu);n&&e.addRule(`.monaco-editor .parameter-hints-widget { background-color: ${n}; }`);const i=o.getColor(ty);i&&e.addRule(`.monaco-editor .parameter-hints-widget a { color: ${i}; }`);const s=o.getColor(ny);s&&e.addRule(`.monaco-editor .parameter-hints-widget a:hover { color: ${s}; }`);const r=o.getColor(kA);r&&e.addRule(`.monaco-editor .parameter-hints-widget { color: ${r}; }`);const a=o.getColor(nH);a&&e.addRule(`.monaco-editor .parameter-hints-widget code { background-color: ${a}; }`);const l=o.getColor(bue);l&&e.addRule(`.monaco-editor .parameter-hints-widget .parameter.active { color: ${l}}`)});var _ue=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},vue=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let Zu=u(class OK extends U{constructor(e,t){super(),this.editor=e,this.widget=this._register(t.createInstance(vw,this.editor))}static get(e){return e.getContribution(OK.ID)}cancel(){this.widget.cancel()}previous(){this.widget.previous()}next(){this.widget.next()}trigger(e){this.widget.trigger(e)}},"ParameterHintsController");Zu.ID="editor.controller.parameterHints";Zu=_ue([vue(1,Ne)],Zu);class VK extends de{constructor(){super({id:"editor.action.triggerParameterHints",label:m("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:A.hasSignatureHelpProvider,kbOpts:{kbExpr:A.editorTextFocus,primary:3082,weight:100}})}run(e,t){const n=Zu.get(t);n&&n.trigger({triggerKind:Zr.Invoke})}}u(VK,"TriggerParameterHintsAction");it(Zu.ID,Zu);ie(VK);const a2=100+75,l2=Ln.bindToContribution(Zu.get);te(new l2({id:"closeParameterHints",precondition:Xu.Visible,handler:o=>o.cancel(),kbOpts:{weight:a2,kbExpr:A.focus,primary:9,secondary:[1033]}}));te(new l2({id:"showPrevParameterHint",precondition:oe.and(Xu.Visible,Xu.MultipleSignatures),handler:o=>o.previous(),kbOpts:{weight:a2,kbExpr:A.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}}));te(new l2({id:"showNextParameterHint",precondition:oe.and(Xu.Visible,Xu.MultipleSignatures),handler:o=>o.next(),kbOpts:{weight:a2,kbExpr:A.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}));var Cue=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},pL=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const IS=new ce("renameInputVisible",!1,m("renameInputVisible","Whether the rename input widget is visible"));let gD=u(class{constructor(e,t,n,i,s){this._editor=e,this._acceptKeybindings=t,this._themeService=n,this._keybindingService=i,this._disposables=new J,this.allowEditorOverflow=!0,this._visibleContextKey=IS.bindTo(s),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration(r=>{r.hasChanged(46)&&this._updateFont()})),this._disposables.add(n.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){if(!this._domNode){this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._input=document.createElement("input"),this._input.className="rename-input",this._input.type="text",this._input.setAttribute("aria-label",m("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._input),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label);const e=u(()=>{var t,n;const[i,s]=this._acceptKeybindings;this._keybindingService.lookupKeybinding(i),this._label.innerText=m({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",(t=this._keybindingService.lookupKeybinding(i))===null||t===void 0?void 0:t.getLabel(),(n=this._keybindingService.lookupKeybinding(s))===null||n===void 0?void 0:n.getLabel())},"updateLabel");e(),this._disposables.add(this._keybindingService.onDidUpdateKeybindings(e)),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())}return this._domNode}_updateStyles(e){var t,n,i,s;if(!this._input||!this._domNode)return;const r=e.getColor(rr);this._domNode.style.backgroundColor=String((t=e.getColor(dn))!==null&&t!==void 0?t:""),this._domNode.style.boxShadow=r?` 0 0 8px 2px ${r}`:"",this._domNode.style.color=String((n=e.getColor(sy))!==null&&n!==void 0?n:""),this._input.style.backgroundColor=String((i=e.getColor(iy))!==null&&i!==void 0?i:"");const a=e.getColor(oy);this._input.style.borderWidth=a?"1px":"0px",this._input.style.borderStyle=a?"solid":"none",this._input.style.borderColor=(s=a?.toString())!==null&&s!==void 0?s:"none"}_updateFont(){if(!this._input||!this._label)return;const e=this._editor.getOption(46);this._input.style.fontFamily=e.fontFamily,this._input.style.fontWeight=e.fontWeight,this._input.style.fontSize=`${e.fontSize}px`,this._label.style.fontSize=`${e.fontSize*.8}px`}getPosition(){return this._visible?{position:this._position,preference:[2,1]}:null}afterRender(e){e||this.cancelInput(!0)}acceptInput(e){var t;(t=this._currentAcceptInput)===null||t===void 0||t.call(this,e)}cancelInput(e){var t;(t=this._currentCancelInput)===null||t===void 0||t.call(this,e)}getInput(e,t,n,i,s,r){this._domNode.classList.toggle("preview",s),this._position=new H(e.startLineNumber,e.startColumn),this._input.value=t,this._input.setAttribute("selectionStart",n.toString()),this._input.setAttribute("selectionEnd",i.toString()),this._input.size=Math.max((e.endColumn-e.startColumn)*1.1,20);const a=new J;return new Promise(l=>{this._currentCancelInput=c=>(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,l(c),!0),this._currentAcceptInput=c=>{if(this._input.value.trim().length===0||this._input.value===t){this.cancelInput(!0);return}this._currentAcceptInput=void 0,this._currentCancelInput=void 0,l({newName:this._input.value,wantsPreview:s&&c})},a.add(r.onCancellationRequested(()=>this.cancelInput(!0))),a.add(this._editor.onDidBlurEditorWidget(()=>this.cancelInput(!1))),this._show()}).finally(()=>{a.dispose(),this._hide()})}_show(){this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout(()=>{this._input.focus(),this._input.setSelectionRange(parseInt(this._input.getAttribute("selectionStart")),parseInt(this._input.getAttribute("selectionEnd")))},100)}_hide(){this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}},"RenameInputField");gD=Cue([pL(2,wt),pL(3,Cn),pL(4,De)],gD);var wue=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},gd=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},gu=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class NS{constructor(e,t,n){this.model=e,this.position=t,this._providerRenameIdx=0,this._providers=n.ordered(e)}hasProvider(){return this._providers.length>0}resolveRenameLocation(e){return gu(this,void 0,void 0,function*(){const t=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){const i=this._providers[this._providerRenameIdx];if(!i.resolveRenameLocation)break;const s=yield i.resolveRenameLocation(this.model,this.position,e);if(s){if(s.rejectReason){t.push(s.rejectReason);continue}return s}}const n=this.model.getWordAtPosition(this.position);return n?{range:new L(this.position.lineNumber,n.startColumn,this.position.lineNumber,n.endColumn),text:n.word,rejectReason:t.length>0?t.join(`
`):void 0}:{range:L.fromPositions(this.position),text:"",rejectReason:t.length>0?t.join(`
`):void 0}})}provideRenameEdits(e,t){return gu(this,void 0,void 0,function*(){return this._provideRenameEdits(e,this._providerRenameIdx,[],t)})}_provideRenameEdits(e,t,n,i){return gu(this,void 0,void 0,function*(){const s=this._providers[t];if(!s)return{edits:[],rejectReason:n.join(`
`)};const r=yield s.provideRenameEdits(this.model,this.position,e,i);if(r){if(r.rejectReason)return this._provideRenameEdits(e,t+1,n.concat(r.rejectReason),i)}else return this._provideRenameEdits(e,t+1,n.concat(m("no result","No result.")),i);return r})}}u(NS,"RenameSkeleton");function yue(o,e,t,n){return gu(this,void 0,void 0,function*(){const i=new NS(e,t,o),s=yield i.resolveRenameLocation(Ge.None);return s?.rejectReason?{edits:[],rejectReason:s.rejectReason}:i.provideRenameEdits(n,Ge.None)})}u(yue,"rename");let Ju=u(class HK{constructor(e,t,n,i,s,r,a,l){this.editor=e,this._instaService=t,this._notificationService=n,this._bulkEditService=i,this._progressService=s,this._logService=r,this._configService=a,this._languageFeaturesService=l,this._disposableStore=new J,this._cts=new ti,this._renameInputField=this._disposableStore.add(new ol(()=>this._disposableStore.add(this._instaService.createInstance(gD,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))))}static get(e){return e.getContribution(HK.ID)}dispose(){this._disposableStore.dispose(),this._cts.dispose(!0)}run(){var e,t;return gu(this,void 0,void 0,function*(){if(this._cts.dispose(!0),!this.editor.hasModel())return;const n=this.editor.getPosition(),i=new NS(this.editor.getModel(),n,this._languageFeaturesService.renameProvider);if(!i.hasProvider())return;this._cts=new Hc(this.editor,5);let s;try{const g=i.resolveRenameLocation(this._cts.token);this._progressService.showWhile(g,250),s=yield g}catch(g){(e=ds.get(this.editor))===null||e===void 0||e.showMessage(g||m("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),n);return}if(!s)return;if(s.rejectReason){(t=ds.get(this.editor))===null||t===void 0||t.showMessage(s.rejectReason,n);return}if(this._cts.token.isCancellationRequested)return;this._cts.dispose(),this._cts=new Hc(this.editor,5,s.range);const r=this.editor.getSelection();let a=0,l=s.text.length;!L.isEmpty(r)&&!L.spansMultipleLines(r)&&L.containsRange(s.range,r)&&(a=Math.max(0,r.startColumn-s.range.startColumn),l=Math.min(s.range.endColumn,r.endColumn)-s.range.startColumn);const c=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),d=yield this._renameInputField.value.getInput(s.range,s.text,a,l,c,this._cts.token);if(typeof d=="boolean"){d&&this.editor.focus();return}this.editor.focus();const h=tA(i.provideRenameEdits(d.newName,this._cts.token),this._cts.token).then(g=>gu(this,void 0,void 0,function*(){if(!(!g||!this.editor.hasModel())){if(g.rejectReason){this._notificationService.info(g.rejectReason);return}this.editor.setSelection(L.fromPositions(this.editor.getSelection().getPosition())),this._bulkEditService.apply(ph.convert(g),{editor:this.editor,showPreview:d.wantsPreview,label:m("label","Renaming '{0}' to '{1}'",s?.text,d.newName),code:"undoredo.rename",quotableLabel:m("quotableLabel","Renaming {0} to {1}",s?.text,d.newName),respectAutoSaveConfig:!0}).then(f=>{f.ariaSummary&&Zn(m("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",s.text,d.newName,f.ariaSummary))}).catch(f=>{this._notificationService.error(m("rename.failedApply","Rename failed to apply edits")),this._logService.error(f)})}}),g=>{this._notificationService.error(m("rename.failed","Rename failed to compute edits")),this._logService.error(g)});return this._progressService.showWhile(h,250),h})}acceptRenameInput(e){this._renameInputField.value.acceptInput(e)}cancelRenameInput(){this._renameInputField.value.cancelInput(!0)}},"RenameController");Ju.ID="editor.contrib.renameController";Ju=wue([gd(1,Ne),gd(2,gn),gd(3,$_),gd(4,Qc),gd(5,Ao),gd(6,rA),gd(7,ue)],Ju);class BK extends de{constructor(){super({id:"editor.action.rename",label:m("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:oe.and(A.writable,A.hasRenameProvider),kbOpts:{kbExpr:A.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(e,t){const n=e.get(dt),[i,s]=Array.isArray(t)&&t||[void 0,void 0];return be.isUri(i)&&H.isIPosition(s)?n.openCodeEditor({resource:i},n.getActiveCodeEditor()).then(r=>{r&&(r.setPosition(s),r.invokeWithinContext(a=>(this.reportTelemetry(a,r),this.run(a,r))))},Ie):super.runCommand(e,t)}run(e,t){const n=Ju.get(t);return n?n.run():Promise.resolve()}}u(BK,"RenameAction");it(Ju.ID,Ju);ie(BK);const c2=Ln.bindToContribution(Ju.get);te(new c2({id:"acceptRenameInput",precondition:IS,handler:o=>o.acceptRenameInput(!1),kbOpts:{weight:100+99,kbExpr:A.focus,primary:3}}));te(new c2({id:"acceptRenameInputWithPreview",precondition:oe.and(IS,oe.has("config.editor.rename.enablePreview")),handler:o=>o.acceptRenameInput(!0),kbOpts:{weight:100+99,kbExpr:A.focus,primary:1024+3}}));te(new c2({id:"cancelRenameInput",precondition:IS,handler:o=>o.cancelRenameInput(),kbOpts:{weight:100+99,kbExpr:A.focus,primary:9,secondary:[1033]}}));ua("_executeDocumentRenameProvider",function(o,e,t,...n){const[i]=n;bt(typeof i=="string");const{renameProvider:s}=o.get(ue);return yue(s,e,t,i)});ua("_executePrepareRename",function(o,e,t){return gu(this,void 0,void 0,function*(){const{renameProvider:n}=o.get(ue),s=yield new NS(e,t,n).resolveRenameLocation(Ge.None);if(s?.rejectReason)throw new Error(s.rejectReason);return s})});zt.as(kl.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:m("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}});var Sue=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Tue=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},rO=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})},mL;let l_=u(class extends U{constructor(e,t){super(),this._sessionStore=new J,this._ranges=[],this._rangesVersionId=0,this._editor=e,this._languageFeaturesService=t,this.stickyScrollWidget=new WK(this._editor),this._register(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(34)&&this.onConfigurationChange()})),this._updateSoon=this._register(new pt(()=>this._update(!0),50)),this.onConfigurationChange()}onConfigurationChange(){if(this._editor.getOption(34).stickyScroll.enabled===!1){this.stickyScrollWidget.emptyRootNode(),this._editor.removeOverlayWidget(this.stickyScrollWidget),this._sessionStore.clear();return}else this._editor.addOverlayWidget(this.stickyScrollWidget),this._sessionStore.add(this._editor.onDidChangeModel(()=>this._update(!0))),this._sessionStore.add(this._editor.onDidScrollChange(()=>this._update(!1))),this._sessionStore.add(this._editor.onDidChangeHiddenAreas(()=>this._update(!0))),this._sessionStore.add(this._editor.onDidChangeModelTokens(t=>this._onTokensChange(t))),this._sessionStore.add(this._editor.onDidChangeModelContent(()=>this._updateSoon.schedule())),this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>this._update(!0))),this._update(!0)}_needsUpdate(e){const t=this.stickyScrollWidget.getCurrentLines();for(const n of t)for(const i of e.ranges)if(n>=i.fromLineNumber&&n<=i.toLineNumber)return!0;return!1}_onTokensChange(e){this._needsUpdate(e)&&this._update(!1)}_update(e=!1){var t,n;return rO(this,void 0,void 0,function*(){e&&((t=this._cts)===null||t===void 0||t.dispose(!0),this._cts=new ti,yield this._updateOutlineModel(this._cts.token));const i=(n=this._editor._getViewModel())===null||n===void 0?void 0:n.getHiddenAreas();if(i)for(const s of i)this._ranges=this._ranges.filter(r=>!(r[0]>=s.startLineNumber&&r[1]<=s.endLineNumber+1));this._renderStickyScroll()})}_findLineRanges(e,t){if(e?.children.size){let n=!1;for(const i of e?.children.values()){const s=i.symbol.kind;(s===4||s===8||s===11||s===10||s===5||s===1)&&(n=!0,this._findLineRanges(i,t+1))}n||this._addOutlineRanges(e,t)}else this._addOutlineRanges(e,t)}_addOutlineRanges(e,t){let n=0,i=0;for(;e;){const s=e.symbol.kind;if((s===4||s===8||s===11||s===10||s===5||s===1)&&(n=e?.symbol.range.startLineNumber,i=e?.symbol.range.endLineNumber,this._ranges.push([n,i,t]),t--),e.parent instanceof t_)e=e.parent;else break}}_updateOutlineModel(e){return rO(this,void 0,void 0,function*(){if(this._editor.hasModel()){const t=this._editor.getModel(),n=t.getVersionId(),i=yield Gr.create(this._languageFeaturesService.documentSymbolProvider,t,e);if(e.isCancellationRequested)return;this._ranges=[],this._rangesVersionId=n;for(const s of i.children.values()){if(s instanceof t_){const a=s.symbol.kind;a===4||a===8||a===11||a===10||a===5||a===1?this._findLineRanges(s,1):this._findLineRanges(s,0)}this._ranges=this._ranges.sort(function(a,l){return a[0]!==l[0]?a[0]-l[0]:a[1]!==l[1]?l[1]-a[1]:a[2]-l[2]});let r=[];for(const[a,l]of this._ranges.entries()){const[c,d,h]=l;r[0]===c&&r[1]===d?this._ranges.splice(a,1):r=l}}}})}_renderStickyScroll(){if(!this._editor.hasModel())return;const e=this._editor.getOption(61),t=this._editor.getModel();if(this._rangesVersionId!==t.getVersionId())return;const n=this._editor.getScrollTop();this.stickyScrollWidget.emptyRootNode();const i=new Set;for(const[s,r]of this._ranges.entries()){const[a,l,c]=r;if(l-a>0&&t.getLineContent(a)!==""){const d=(c-1)*e,h=c*e,g=this._editor.getBottomForLineNumber(a)-n,f=this._editor.getTopForLineNumber(l)-n,p=this._editor.getBottomForLineNumber(l)-n;if(i.has(a))this._ranges.splice(s,1);else if(d>=f-1&&d<p-2){i.add(a),this.stickyScrollWidget.pushCodeLine(new fD(a,c,this._editor,-1,p-h));break}else h>g&&h<p-1&&(i.add(a),this.stickyScrollWidget.pushCodeLine(new fD(a,c,this._editor,0,0)))}}this.stickyScrollWidget.updateRootNode()}dispose(){super.dispose(),this._sessionStore.dispose()}},"StickyScrollController");l_.ID="store.contrib.stickyScrollController";l_=Sue([Tue(1,ue)],l_);const aO=(mL=window.trustedTypes)===null||mL===void 0?void 0:mL.createPolicy("stickyScrollViewLayer",{createHTML:o=>o});class fD{constructor(e,t,n,i,s){this._lineNumber=e,this._depth=t,this._editor=n,this._zIndex=i,this._relativePosition=s,this.effectiveLineHeight=0,this.effectiveLineHeight=this._editor.getOption(61)+this._relativePosition}get lineNumber(){return this._lineNumber}getDomNode(){const e=document.createElement("div"),t=this._editor._getViewModel(),n=t.coordinatesConverter.convertModelPositionToViewPosition(new H(this._lineNumber,1)).lineNumber,i=t.getViewLineRenderingData(n);let s;try{s=ji.filter(i.inlineDecorations,n,i.minColumn,i.maxColumn)}catch{s=[]}const r=new Ml(!0,!0,i.content,i.continuesWithWrappedLine,i.isBasicASCII,i.containsRTL,0,i.tokens,s,i.tabSize,i.startVisibleColumn,1,1,1,100,"none",!0,!0,null),a=Lc(400);L_(r,a);let l;aO?l=aO.createHTML(a.build()):l=a.build();const c=document.createElement("span");c.style.backgroundColor="var(--vscode-editorStickyScroll-background)",c.style.overflow="hidden",c.style.whiteSpace="nowrap",c.style.display="inline-block",c.style.lineHeight=this._editor.getOption(61).toString()+"px",c.innerHTML=l;const d=document.createElement("span");d.style.width=this._editor.getLayoutInfo().contentLeft.toString()+"px",d.style.backgroundColor="var(--vscode-editorStickyScroll-background)",d.style.color="var(--vscode-editorLineNumber-foreground)",d.style.display="inline-block",d.style.lineHeight=this._editor.getOption(61).toString()+"px";const h=document.createElement("span");return h.innerText=this._lineNumber.toString(),h.style.paddingLeft=this._editor.getLayoutInfo().lineNumbersLeft.toString()+"px",h.style.width=this._editor.getLayoutInfo().lineNumbersWidth.toString()+"px",h.style.backgroundColor="var(--vscode-editorStickyScroll-background)",h.style.textAlign="right",h.style.float="left",h.style.lineHeight=this._editor.getOption(61).toString()+"px",d.appendChild(h),e.onclick=g=>{g.stopPropagation(),g.preventDefault(),this._editor.revealPosition({lineNumber:this._lineNumber-this._depth+1,column:1})},e.onmouseover=g=>{h.style.background="var(--vscode-editorStickyScrollHover-background)",c.style.backgroundColor="var(--vscode-editorStickyScrollHover-background)",d.style.backgroundColor="var(--vscode-editorStickyScrollHover-background)",e.style.backgroundColor="var(--vscode-editorStickyScrollHover-background)",h.style.cursor="pointer",c.style.cursor="pointer",e.style.cursor="pointer",d.style.cursor="pointer"},e.onmouseleave=g=>{h.style.background="var(--vscode-editorStickyScroll-background)",c.style.backgroundColor="var(--vscode-editorStickyScroll-background)",d.style.backgroundColor="var(--vscode-editorStickyScroll-background)",e.style.backgroundColor="var(--vscode-editorStickyScroll-background)"},this._editor.applyFontInfo(c),this._editor.applyFontInfo(h),e.appendChild(d),e.appendChild(c),e.style.zIndex=this._zIndex.toString(),e.style.backgroundColor="var(--vscode-editorStickyScroll-background)",e.style.overflow="hidden",e.style.whiteSpace="nowrap",e.style.width="100%",e.style.lineHeight=this._editor.getOption(61).toString()+"px",e.style.height=this._editor.getOption(61).toString()+"px",this._relativePosition&&(e.style.position="relative",e.style.top=this._relativePosition+"px",e.style.width="100%"),e}}u(fD,"StickyScrollCodeLine");class WK{constructor(e){this._editor=e,this.arrayOfCodeLines=[],this.rootDomNode=document.createElement("div"),this.rootDomNode=document.createElement("div"),this.rootDomNode.style.width="100%",this.rootDomNode.style.boxShadow="var(--vscode-scrollbar-shadow) 0 6px 6px -6px"}getCurrentLines(){const e=[];for(const t of this.arrayOfCodeLines)e.push(t.lineNumber);return e}pushCodeLine(e){this.arrayOfCodeLines.push(e)}updateRootNode(){let e=0;for(const t of this.arrayOfCodeLines)e+=t.effectiveLineHeight,this.rootDomNode.appendChild(t.getDomNode());this.rootDomNode.style.height=e.toString()+"px"}emptyRootNode(){this.arrayOfCodeLines.length=0,Tn(this.rootDomNode)}getId(){return"editor.contrib.stickyScrollWidget"}getDomNode(){return this.rootDomNode.style.zIndex="2",this.rootDomNode.style.backgroundColor="var(--vscode-editorStickyScroll-background)",this.rootDomNode}getPosition(){return{preference:null}}}u(WK,"StickyScrollWidget");it(l_.ID,l_);class UK{provideSelectionRanges(e,t){const n=[];for(const i of t){const s=[];n.push(s),this._addInWordRanges(s,e,i),this._addWordRanges(s,e,i),this._addWhitespaceLine(s,e,i),s.push({range:e.getFullModelRange()})}return n}_addInWordRanges(e,t,n){const i=t.getWordAtPosition(n);if(!i)return;const{word:s,startColumn:r}=i,a=n.column-r;let l=a,c=a,d=0;for(;l>=0;l--){const h=s.charCodeAt(l);if(l!==a&&(h===95||h===45))break;if(ic(h)&&Br(d))break;d=h}for(l+=1;c<s.length;c++){const h=s.charCodeAt(c);if(Br(h)&&ic(d))break;if(h===95||h===45)break;d=h}l<c&&e.push({range:new L(n.lineNumber,r+l,n.lineNumber,r+c)})}_addWordRanges(e,t,n){const i=t.getWordAtPosition(n);i&&e.push({range:new L(n.lineNumber,i.startColumn,n.lineNumber,i.endColumn)})}_addWhitespaceLine(e,t,n){t.getLineLength(n.lineNumber)>0&&t.getLineFirstNonWhitespaceColumn(n.lineNumber)===0&&t.getLineLastNonWhitespaceColumn(n.lineNumber)===0&&e.push({range:new L(n.lineNumber,1,n.lineNumber,t.getLineMaxColumn(n.lineNumber))})}}u(UK,"WordSelectionRangeProvider");var Lue=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},xue=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},PS=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class RS{constructor(e,t){this.index=e,this.ranges=t}mov(e){const t=this.index+(e?1:-1);if(t<0||t>=this.ranges.length)return this;const n=new RS(t,this.ranges);return n.ranges[t].equalsRange(this.ranges[this.index])?n.mov(e):n}}u(RS,"SelectionRanges");let Xf=u(class GK{constructor(e,t){this._editor=e,this._languageFeaturesService=t,this._ignoreSelection=!1}static get(e){return e.getContribution(GK.ID)}dispose(){var e;(e=this._selectionListener)===null||e===void 0||e.dispose()}run(e){return PS(this,void 0,void 0,function*(){if(!this._editor.hasModel())return;const t=this._editor.getSelections(),n=this._editor.getModel();if(this._state||(yield jK(this._languageFeaturesService.selectionRangeProvider,n,t.map(s=>s.getPosition()),this._editor.getOption(104),Ge.None).then(s=>{var r;if(!(!ci(s)||s.length!==t.length)&&!(!this._editor.hasModel()||!Ds(this._editor.getSelections(),t,(a,l)=>a.equalsSelection(l)))){for(let a=0;a<s.length;a++)s[a]=s[a].filter(l=>l.containsPosition(t[a].getStartPosition())&&l.containsPosition(t[a].getEndPosition())),s[a].unshift(t[a]);this._state=s.map(a=>new RS(0,a)),(r=this._selectionListener)===null||r===void 0||r.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition(()=>{var a;this._ignoreSelection||((a=this._selectionListener)===null||a===void 0||a.dispose(),this._state=void 0)})}})),!this._state)return;this._state=this._state.map(s=>s.mov(e));const i=this._state.map(s=>re.fromPositions(s.ranges[s.index].getStartPosition(),s.ranges[s.index].getEndPosition()));this._ignoreSelection=!0;try{this._editor.setSelections(i)}finally{this._ignoreSelection=!1}})}},"SmartSelectController");Xf.ID="editor.contrib.smartSelectController";Xf=Lue([xue(1,ue)],Xf);class d2 extends de{constructor(e,t){super(t),this._forward=e}run(e,t){return PS(this,void 0,void 0,function*(){const n=Xf.get(t);n&&(yield n.run(this._forward))})}}u(d2,"AbstractSmartSelect");class zK extends d2{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:m("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:A.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:P.MenubarSelectionMenu,group:"1_basic",title:m({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}}u(zK,"GrowSelectionAction");Qe.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");class KK extends d2{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:m("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:A.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:P.MenubarSelectionMenu,group:"1_basic",title:m({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}}u(KK,"ShrinkSelectionAction");it(Xf.ID,Xf);ie(zK);ie(KK);function jK(o,e,t,n,i){return PS(this,void 0,void 0,function*(){const s=o.all(e).concat(new UK);s.length===1&&s.unshift(new es);const r=[],a=[];for(const l of s)r.push(Promise.resolve(l.provideSelectionRanges(e,t,i)).then(c=>{if(ci(c)&&c.length===t.length)for(let d=0;d<t.length;d++){a[d]||(a[d]=[]);for(const h of c[d])L.isIRange(h.range)&&L.containsPosition(h.range,t[d])&&a[d].push(L.lift(h.range))}},Hn));return yield Promise.all(r),a.map(l=>{if(l.length===0)return[];l.sort((g,f)=>H.isBefore(g.getStartPosition(),f.getStartPosition())?1:H.isBefore(f.getStartPosition(),g.getStartPosition())||H.isBefore(g.getEndPosition(),f.getEndPosition())?-1:H.isBefore(f.getEndPosition(),g.getEndPosition())?1:0);const c=[];let d;for(const g of l)(!d||L.containsRange(g,d)&&!L.equalsRange(g,d))&&(c.push(g),d=g);if(!n.selectLeadingAndTrailingWhitespace)return c;const h=[c[0]];for(let g=1;g<c.length;g++){const f=c[g-1],p=c[g];if(p.startLineNumber!==f.startLineNumber||p.endLineNumber!==f.endLineNumber){const _=new L(f.startLineNumber,e.getLineFirstNonWhitespaceColumn(f.startLineNumber),f.endLineNumber,e.getLineLastNonWhitespaceColumn(f.endLineNumber));_.containsRange(f)&&!_.equalsRange(f)&&p.containsRange(_)&&!p.equalsRange(_)&&h.push(_);const v=new L(f.startLineNumber,1,f.endLineNumber,e.getLineMaxColumn(f.endLineNumber));v.containsRange(f)&&!v.equalsRange(_)&&p.containsRange(v)&&!p.equalsRange(v)&&h.push(v)}h.push(p)}return h})})}u(jK,"provideSelectionRanges");Qe.registerCommand("_executeSelectionRangeProvider",function(o,...e){return PS(this,void 0,void 0,function*(){const[t,n]=e;bt(be.isUri(t));const i=o.get(ue).selectionRangeProvider,s=yield o.get(Ji).createModelReference(t);try{return jK(i,s.object.textEditorModel,n,{selectLeadingAndTrailingWhitespace:!0},Ge.None)}finally{s.dispose()}})});var u2=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},fu=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Eue=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class $K{constructor(e,t,n,i,s,r){this.range=e,this.insertText=t,this.filterText=n,this.additionalTextEdits=i,this.command=s,this.completion=r}}u($K,"SuggestInlineCompletion");let pD=u(class extends b4{constructor(e,t,n,i,s,r){super(s.disposable),this.model=e,this.line=t,this.word=n,this.completionModel=i,this._suggestMemoryService=r}canBeReused(e,t,n){return this.model===e&&this.line===t&&this.word.word.length>0&&this.word.startColumn===n.startColumn&&this.word.endColumn<n.endColumn&&this.completionModel.incomplete.size===0}get items(){var e;const t=[],{items:n}=this.completionModel,i=this._suggestMemoryService.select(this.model,{lineNumber:this.line,column:this.word.endColumn+this.completionModel.lineContext.characterCountDelta},n),s=je.slice(n,i),r=je.slice(n,0,i);let a=5;for(const l of je.concat(s,r)){if(l.score===fr.Default)continue;const c=new L(l.editStart.lineNumber,l.editStart.column,l.editInsertEnd.lineNumber,l.editInsertEnd.column+this.completionModel.lineContext.characterCountDelta),d=l.completion.insertTextRules&&l.completion.insertTextRules&Z0.InsertAsSnippet?{snippet:l.completion.insertText}:l.completion.insertText;t.push(new $K(c,d,(e=l.filterTextLow)!==null&&e!==void 0?e:l.labelLow,l.completion.additionalTextEdits,l.completion.command,l)),a-->=0&&l.resolve(Ge.None)}return t}},"InlineCompletionResults");pD=u2([fu(5,kS)],pD);let mD=u(class{constructor(e,t,n,i){this._getEditorOption=e,this._languageFeatureService=t,this._clipboardService=n,this._suggestMemoryService=i}provideInlineCompletions(e,t,n,i){var s;return Eue(this,void 0,void 0,function*(){if(n.selectedSuggestionInfo)return;const r=this._getEditorOption(81,e);if(jd.isAllOff(r))return;e.tokenization.tokenizeIfCheap(t.lineNumber);const a=e.tokenization.getLineTokens(t.lineNumber),l=a.getStandardTokenType(a.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if(jd.valueFor(r,l)!=="inline")return;let c=e.getWordAtPosition(t),d;if(c?.word||(d=this._getTriggerCharacterInfo(e,t)),!c?.word&&!d||(c||(c=e.getWordUntilPosition(t)),c.endColumn!==t.column))return;let h;const g=e.getValueInRange(new L(t.lineNumber,1,t.lineNumber,t.column));if(!d&&(!((s=this._lastResult)===null||s===void 0)&&s.canBeReused(e,t.lineNumber,c))){const f=new JF(g,t.column-this._lastResult.word.endColumn);this._lastResult.completionModel.lineContext=f,this._lastResult.acquire(),h=this._lastResult}else{const f=yield NN(this._languageFeatureService.completionProvider,e,t,new Uf(void 0,void 0,d?.providers),d&&{triggerKind:1,triggerCharacter:d.ch},i);let p;f.needsClipboard&&(p=yield this._clipboardService.readText());const _=new Ga(f.items,t.column,new JF(g,0),Co.None,this._getEditorOption(108,e),this._getEditorOption(103,e),{boostFullMatch:!1,firstMatchCanBeWeak:!1},p);h=new pD(e,t.lineNumber,c,_,f,this._suggestMemoryService)}return this._lastResult=h,h})}handleItemDidShow(e,t){t.completion.resolve(Ge.None)}freeInlineCompletions(e){e.release()}_getTriggerCharacterInfo(e,t){var n;const i=e.getValueInRange(L.fromPositions({lineNumber:t.lineNumber,column:t.column-1},t)),s=new Set;for(const r of this._languageFeatureService.completionProvider.all(e))!((n=r.triggerCharacters)===null||n===void 0)&&n.includes(i)&&s.add(r);if(s.size!==0)return{providers:s,ch:i}}},"SuggestInlineCompletions");mD=u2([fu(1,ue),fu(2,Nl),fu(3,kS)],mD);let Cw=u(class sg{constructor(e,t,n,i){if(++sg._counter===1){const s=i.createInstance(mD,(r,a)=>{var l;return((l=n.listCodeEditors().find(d=>d.getModel()===a))!==null&&l!==void 0?l:e).getOption(r)});sg._disposable=t.inlineCompletionsProvider.register("*",s)}}dispose(){var e;--sg._counter===0&&((e=sg._disposable)===null||e===void 0||e.dispose(),sg._disposable=void 0)}},"EditorContribution");Cw._counter=0;Cw=u2([fu(1,ue),fu(2,dt),fu(3,Ne)],Cw);it("suggest.inlineCompletionsProvider",Cw);class qK extends de{constructor(){super({id:"editor.action.forceRetokenize",label:m("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getModel();n.tokenization.resetTokenization();const i=new Ai(!0);n.tokenization.forceTokenization(n.getLineCount()),i.stop(),console.log(`tokenization took ${i.elapsed()}`)}}u(qK,"ForceRetokenizeAction");ie(qK);class Qu extends de{constructor(){super({id:Qu.ID,label:m({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),alias:"Toggle Tab Key Moves Focus",precondition:void 0,kbOpts:{kbExpr:null,primary:2091,mac:{primary:1323},weight:100}})}run(e,t){const i=!c1.getTabFocusMode();c1.setTabFocusMode(i),Zn(i?m("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element"):m("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}}u(Qu,"ToggleTabFocusModeAction");Qu.ID="editor.action.toggleTabFocusMode";ie(Qu);var kue=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Mue=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let bD=u(class extends U{constructor(e,t,n={},i){var s;super(),this._link=t,this._enabled=!0,this.el=q(e,ee("a.monaco-link",{tabIndex:(s=t.tabIndex)!==null&&s!==void 0?s:0,href:t.href,title:t.title},t.label)),this.el.setAttribute("role","button");const r=this._register(new _t(this.el,"click")),a=this._register(new _t(this.el,"keypress")),l=fe.chain(a.event).map(h=>new Pt(h)).filter(h=>h.keyCode===3).event,c=this._register(new _t(this.el,Mt.Tap)).event;this._register(gt.addTarget(this.el));const d=fe.any(r.event,l,c);this._register(d(h=>{this.enabled&&(ft.stop(h,!0),n?.opener?n.opener(this._link.href):i.open(this._link.href,{allowCommands:!0}))})),this.enabled=!0}get enabled(){return this._enabled}set enabled(e){e?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=e}},"Link");bD=kue([Mue(3,uo)],bD);At((o,e)=>{const t=o.getColor(ty);t&&e.addRule(`.monaco-link { color: ${t}; }`);const n=o.getColor(ny);n&&e.addRule(`.monaco-link:hover { color: ${n}; }`)});var YK=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},XK=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const Due=26;let _D=u(class extends U{constructor(e,t){super(),this._editor=e,this.instantiationService=t,this.banner=this._register(this.instantiationService.createInstance(vD))}hide(){this._editor.setBanner(null,0),this.banner.clear()}show(e){this.banner.show(Object.assign(Object.assign({},e),{onClose:()=>{var t;this.hide(),(t=e.onClose)===null||t===void 0||t.call(e)}})),this._editor.setBanner(this.banner.element,Due)}},"BannerController");_D=YK([XK(1,Ne)],_D);let vD=u(class extends U{constructor(e){super(),this.instantiationService=e,this.markdownRenderer=this.instantiationService.createInstance(xl,{}),this.element=ee("div.editor-banner"),this.element.tabIndex=0}getAriaLabel(e){if(e.ariaLabel)return e.ariaLabel;if(typeof e.message=="string")return e.message}getBannerMessage(e){if(typeof e=="string"){const t=ee("span");return t.innerText=e,t}return this.markdownRenderer.render(e).element}clear(){Tn(this.element)}show(e){Tn(this.element);const t=this.getAriaLabel(e);t&&this.element.setAttribute("aria-label",t);const n=q(this.element,ee("div.icon-container"));n.setAttribute("aria-hidden","true"),e.icon&&n.appendChild(ee(`div${ct.asCSSSelector(e.icon)}`));const i=q(this.element,ee("div.message-container"));if(i.setAttribute("aria-hidden","true"),i.appendChild(this.getBannerMessage(e.message)),this.messageActionsContainer=q(this.element,ee("div.message-actions-container")),e.actions)for(const r of e.actions)this._register(this.instantiationService.createInstance(bD,this.messageActionsContainer,Object.assign(Object.assign({},r),{tabIndex:-1}),{}));const s=q(this.element,ee("div.action-container"));this.actionBar=this._register(new Cr(s)),this.actionBar.push(this._register(new Yi("banner.close","Close Banner",ct.asClassName(B9),!0,()=>{typeof e.onClose=="function"&&e.onClose()})),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)}},"Banner");vD=YK([XK(0,Ne)],vD);var h2=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},jg=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},oi=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const Aue=vn("extensions-warning-message",b.warning,m("warningIcon","Icon shown with a warning message in the extensions editor."));let Zf=u(class extends U{constructor(e,t,n,i){super(),this._editor=e,this._editorWorkerService=t,this._workspaceTrustService=n,this._highlighter=null,this._bannerClosed=!1,this._updateState=s=>{if(s&&s.hasMore){if(this._bannerClosed)return;const r=Math.max(s.ambiguousCharacterCount,s.nonBasicAsciiCharacterCount,s.invisibleCharacterCount);let a;if(s.nonBasicAsciiCharacterCount>=r)a={message:m("unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters","This document contains many non-basic ASCII unicode characters"),command:new Mh};else if(s.ambiguousCharacterCount>=r)a={message:m("unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters","This document contains many ambiguous unicode characters"),command:new Rl};else if(s.invisibleCharacterCount>=r)a={message:m("unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters","This document contains many invisible unicode characters"),command:new kh};else throw new Error("Unreachable");this._bannerController.show({id:"unicodeHighlightBanner",message:a.message,icon:Aue,actions:[{label:a.command.shortLabel,href:`command:${a.command.id}`}],onClose:()=>{this._bannerClosed=!0}})}else this._bannerController.hide()},this._bannerController=this._register(i.createInstance(_D,e)),this._register(this._editor.onDidChangeModel(()=>{this._bannerClosed=!1,this._updateHighlighter()})),this._options=e.getOption(115),this._register(n.onDidChangeTrust(s=>{this._updateHighlighter()})),this._register(e.onDidChangeConfiguration(s=>{s.hasChanged(115)&&(this._options=e.getOption(115),this._updateHighlighter())})),this._updateHighlighter()}dispose(){this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),super.dispose()}_updateHighlighter(){if(this._updateState(null),this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),!this._editor.hasModel())return;const e=Iue(this._workspaceTrustService.isWorkspaceTrusted(),this._options);if([e.nonBasicASCII,e.ambiguousCharacters,e.invisibleCharacters].every(n=>n===!1))return;const t={nonBasicASCII:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments,includeStrings:e.includeStrings,allowedCodePoints:Object.keys(e.allowedCharacters).map(n=>n.codePointAt(0)),allowedLocales:Object.keys(e.allowedLocales).map(n=>n==="_os"?new Intl.NumberFormat().resolvedOptions().locale:n==="_vscode"?g$:n)};this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)?this._highlighter=new CD(this._editor,t,this._updateState,this._editorWorkerService):this._highlighter=new ZK(this._editor,t,this._updateState)}getDecorationInfo(e){return this._highlighter?this._highlighter.getDecorationInfo(e):null}},"UnicodeHighlighter");Zf.ID="editor.contrib.unicodeHighlighter";Zf=h2([jg(1,co),jg(2,u8),jg(3,Ne)],Zf);function Iue(o,e){return{nonBasicASCII:e.nonBasicASCII===Cs?!o:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments===Cs?!o:e.includeComments,includeStrings:e.includeStrings===Cs?!o:e.includeStrings,allowedCharacters:e.allowedCharacters,allowedLocales:e.allowedLocales}}u(Iue,"resolveOptions");let CD=u(class extends U{constructor(e,t,n,i){super(),this._editor=e,this._options=t,this._updateState=n,this._editorWorkerService=i,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new pt(()=>this._update(),250)),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}const e=this._model.getVersionId();this._editorWorkerService.computedUnicodeHighlights(this._model.uri,this._options).then(t=>{if(this._model.isDisposed()||this._model.getVersionId()!==e)return;this._updateState(t);const n=[];if(!t.hasMore)for(const i of t.ranges)n.push({range:i,options:c_.instance.getDecorationFromOptions(this._options)});this._decorations.set(n)})}getDecorationInfo(e){if(!this._decorations.has(e))return null;const t=this._editor.getModel();if(!sI(t,e))return null;const n=t.getValueInRange(e.range);return{reason:JK(n,this._options),inComment:oI(t,e),inString:rI(t,e)}}},"DocumentUnicodeHighlighter");CD=h2([jg(3,co)],CD);class ZK extends U{constructor(e,t,n){super(),this._editor=e,this._options=t,this._updateState=n,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new pt(()=>this._update(),250)),this._register(this._editor.onDidLayoutChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidScrollChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeHiddenAreas(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}const e=this._editor.getVisibleRanges(),t=[],n={ranges:[],ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0,hasMore:!1};for(const i of e){const s=Gw.computeUnicodeHighlights(this._model,this._options,i);for(const r of s.ranges)n.ranges.push(r);n.ambiguousCharacterCount+=n.ambiguousCharacterCount,n.invisibleCharacterCount+=n.invisibleCharacterCount,n.nonBasicAsciiCharacterCount+=n.nonBasicAsciiCharacterCount,n.hasMore=n.hasMore||s.hasMore}if(!n.hasMore)for(const i of n.ranges)t.push({range:i,options:c_.instance.getDecorationFromOptions(this._options)});this._updateState(n),this._decorations.set(t)}getDecorationInfo(e){if(!this._decorations.has(e))return null;const t=this._editor.getModel(),n=t.getValueInRange(e.range);return sI(t,e)?{reason:JK(n,this._options),inComment:oI(t,e),inString:rI(t,e)}:null}}u(ZK,"ViewportUnicodeHighlighter");let wD=u(class{constructor(e,t,n){this._editor=e,this._languageService=t,this._openerService=n,this.hoverOrdinal=4}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),i=this._editor.getContribution(Zf.ID);if(!i)return[];const s=[];let r=300;for(const a of t){const l=i.getDecorationInfo(a);if(!l)continue;const d=n.getValueInRange(a.range).codePointAt(0),h=lO(d);let g;switch(l.reason.kind){case 0:g=m("unicodeHighlight.characterIsAmbiguous","The character {0} could be confused with the character {1}, which is more common in source code.",h,lO(l.reason.confusableWith.codePointAt(0)));break;case 1:g=m("unicodeHighlight.characterIsInvisible","The character {0} is invisible.",h);break;case 2:g=m("unicodeHighlight.characterIsNonBasicAscii","The character {0} is not a basic ASCII character.",h);break}const f={codePoint:d,reason:l.reason,inComment:l.inComment,inString:l.inString},p=m("unicodeHighlight.adjustSettings","Adjust settings"),_=`command:${Lp.ID}?${encodeURIComponent(JSON.stringify(f))}`,v=new Ei("",!0).appendMarkdown(g).appendText(" ").appendLink(_,p);s.push(new Qo(this,a.range,[v],r++))}return s}renderHoverParts(e,t){return AU(e,t,this._editor,this._languageService,this._openerService)}},"UnicodeHighlighterHoverParticipant");wD=h2([jg(1,Gt),jg(2,uo)],wD);function yD(o){return`U+${o.toString(16).padStart(4,"0")}`}u(yD,"codePointToHex");function lO(o){let e=`\`${yD(o)}\``;return hr.isInvisibleCharacter(o)||(e+=` "${`${Nue(o)}`}"`),e}u(lO,"formatCodePointMarkdown");function Nue(o){return o===96?"`` ` ``":"`"+String.fromCodePoint(o)+"`"}u(Nue,"renderCodePointAsInlineCode");function JK(o,e){return Gw.computeUnicodeHighlightReason(o,e)}u(JK,"computeReason");class c_{constructor(){this.map=new Map}getDecorationFromOptions(e){return this.getDecoration(!e.includeComments,!e.includeStrings)}getDecoration(e,t){const n=`${e}${t}`;let i=this.map.get(n);return i||(i=Ae.createDynamic({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:null,minimap:null,hideInCommentTokens:e,hideInStringTokens:t}),this.map.set(n,i)),i}}u(c_,"Decorations");c_.instance=new c_;class QK extends de{constructor(){super({id:Rl.ID,label:m("action.unicodeHighlight.disableHighlightingInComments","Disable highlighting of characters in comments"),alias:"Disable highlighting of characters in comments",precondition:void 0}),this.shortLabel=m("unicodeHighlight.disableHighlightingInComments.shortLabel","Disable Highlight In Comments")}run(e,t,n){return oi(this,void 0,void 0,function*(){const i=e?.get(rt);i&&this.runAction(i)})}runAction(e){return oi(this,void 0,void 0,function*(){yield e.updateValue(Bi.includeComments,!1,2)})}}u(QK,"DisableHighlightingInCommentsAction");class ej extends de{constructor(){super({id:Rl.ID,label:m("action.unicodeHighlight.disableHighlightingInStrings","Disable highlighting of characters in strings"),alias:"Disable highlighting of characters in strings",precondition:void 0}),this.shortLabel=m("unicodeHighlight.disableHighlightingInStrings.shortLabel","Disable Highlight In Strings")}run(e,t,n){return oi(this,void 0,void 0,function*(){const i=e?.get(rt);i&&this.runAction(i)})}runAction(e){return oi(this,void 0,void 0,function*(){yield e.updateValue(Bi.includeStrings,!1,2)})}}u(ej,"DisableHighlightingInStringsAction");class Rl extends de{constructor(){super({id:Rl.ID,label:m("action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters","Disable highlighting of ambiguous characters"),alias:"Disable highlighting of ambiguous characters",precondition:void 0}),this.shortLabel=m("unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel","Disable Ambiguous Highlight")}run(e,t,n){return oi(this,void 0,void 0,function*(){const i=e?.get(rt);i&&this.runAction(i)})}runAction(e){return oi(this,void 0,void 0,function*(){yield e.updateValue(Bi.ambiguousCharacters,!1,2)})}}u(Rl,"DisableHighlightingOfAmbiguousCharactersAction");Rl.ID="editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters";class kh extends de{constructor(){super({id:kh.ID,label:m("action.unicodeHighlight.disableHighlightingOfInvisibleCharacters","Disable highlighting of invisible characters"),alias:"Disable highlighting of invisible characters",precondition:void 0}),this.shortLabel=m("unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel","Disable Invisible Highlight")}run(e,t,n){return oi(this,void 0,void 0,function*(){const i=e?.get(rt);i&&this.runAction(i)})}runAction(e){return oi(this,void 0,void 0,function*(){yield e.updateValue(Bi.invisibleCharacters,!1,2)})}}u(kh,"DisableHighlightingOfInvisibleCharactersAction");kh.ID="editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters";class Mh extends de{constructor(){super({id:Mh.ID,label:m("action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters","Disable highlighting of non basic ASCII characters"),alias:"Disable highlighting of non basic ASCII characters",precondition:void 0}),this.shortLabel=m("unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel","Disable Non ASCII Highlight")}run(e,t,n){return oi(this,void 0,void 0,function*(){const i=e?.get(rt);i&&this.runAction(i)})}runAction(e){return oi(this,void 0,void 0,function*(){yield e.updateValue(Bi.nonBasicASCII,!1,2)})}}u(Mh,"DisableHighlightingOfNonBasicAsciiCharactersAction");Mh.ID="editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters";class Lp extends de{constructor(){super({id:Lp.ID,label:m("action.unicodeHighlight.showExcludeOptions","Show Exclude Options"),alias:"Show Exclude Options",precondition:void 0})}run(e,t,n){return oi(this,void 0,void 0,function*(){const{codePoint:i,reason:s,inString:r,inComment:a}=n,l=String.fromCodePoint(i),c=e.get(Pl),d=e.get(rt);function h(p){return hr.isInvisibleCharacter(p)?m("unicodeHighlight.excludeInvisibleCharFromBeingHighlighted","Exclude {0} (invisible character) from being highlighted",yD(p)):m("unicodeHighlight.excludeCharFromBeingHighlighted","Exclude {0} from being highlighted",`${yD(p)} "${l}"`)}u(h,"getExcludeCharFromBeingHighlightedLabel");const g=[];if(s.kind===0)for(const p of s.notAmbiguousInLocales)g.push({label:m("unicodeHighlight.allowCommonCharactersInLanguage",'Allow unicode characters that are more common in the language "{0}".',p),run:()=>oi(this,void 0,void 0,function*(){Rue(d,[p])})});if(g.push({label:h(i),run:()=>Pue(d,[i])}),a){const p=new QK;g.push({label:p.label,run:()=>oi(this,void 0,void 0,function*(){return p.runAction(d)})})}else if(r){const p=new ej;g.push({label:p.label,run:()=>oi(this,void 0,void 0,function*(){return p.runAction(d)})})}if(s.kind===0){const p=new Rl;g.push({label:p.label,run:()=>oi(this,void 0,void 0,function*(){return p.runAction(d)})})}else if(s.kind===1){const p=new kh;g.push({label:p.label,run:()=>oi(this,void 0,void 0,function*(){return p.runAction(d)})})}else if(s.kind===2){const p=new Mh;g.push({label:p.label,run:()=>oi(this,void 0,void 0,function*(){return p.runAction(d)})})}else Fue(s);const f=yield c.pick(g,{title:m("unicodeHighlight.configureUnicodeHighlightOptions","Configure Unicode Highlight Options")});f&&(yield f.run())})}}u(Lp,"ShowExcludeOptions");Lp.ID="editor.action.unicodeHighlight.showExcludeOptions";function Pue(o,e){return oi(this,void 0,void 0,function*(){const t=o.getValue(Bi.allowedCharacters);let n;typeof t=="object"&&t?n=t:n={};for(const i of e)n[String.fromCodePoint(i)]=!0;yield o.updateValue(Bi.allowedCharacters,n,2)})}u(Pue,"excludeCharFromBeingHighlighted");function Rue(o,e){var t;return oi(this,void 0,void 0,function*(){const n=(t=o.inspect(Bi.allowedLocales).user)===null||t===void 0?void 0:t.value;let i;typeof n=="object"&&n?i=Object.assign({},n):i={};for(const s of e)i[s]=!0;yield o.updateValue(Bi.allowedLocales,i,2)})}u(Rue,"excludeLocaleFromBeingHighlighted");function Fue(o){throw new Error(`Unexpected value: ${o}`)}u(Fue,"expectNever");ie(Rl);ie(kh);ie(Mh);ie(Lp);it(Zf.ID,Zf);Sh.register(wD);var Oue=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},cO=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Vue=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const tj="ignoreUnusualLineTerminators";function Hue(o,e,t){o.setModelProperty(e.uri,tj,t)}u(Hue,"writeIgnoreState");function Bue(o,e){return o.getModelProperty(e.uri,tj)}u(Bue,"readIgnoreState");let d_=u(class extends U{constructor(e,t,n){super(),this._editor=e,this._dialogService=t,this._codeEditorService=n,this._config=this._editor.getOption(116),this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(116)&&(this._config=this._editor.getOption(116),this._checkForUnusualLineTerminators())})),this._register(this._editor.onDidChangeModel(()=>{this._checkForUnusualLineTerminators()})),this._register(this._editor.onDidChangeModelContent(i=>{i.isUndoing||this._checkForUnusualLineTerminators()}))}_checkForUnusualLineTerminators(){return Vue(this,void 0,void 0,function*(){if(this._config==="off"||!this._editor.hasModel())return;const e=this._editor.getModel();if(!e.mightContainUnusualLineTerminators()||Bue(this._codeEditorService,e)===!0||this._editor.getOption(83))return;if(this._config==="auto"){e.removeUnusualLineTerminators(this._editor.getSelections());return}if(!(yield this._dialogService.confirm({title:m("unusualLineTerminators.title","Unusual Line Terminators"),message:m("unusualLineTerminators.message","Detected unusual line terminators"),detail:m("unusualLineTerminators.detail","The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",ro(e.uri)),primaryButton:m("unusualLineTerminators.fix","Remove Unusual Line Terminators"),secondaryButton:m("unusualLineTerminators.ignore","Ignore")})).confirmed){Hue(this._codeEditorService,e,!0);return}e.removeUnusualLineTerminators(this._editor.getSelections())})}},"UnusualLineTerminatorsDetector");d_.ID="editor.contrib.unusualLineTerminatorsDetector";d_=Oue([cO(1,j_),cO(2,dt)],d_);it(d_.ID,d_);var Wue=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Qp=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let u_=u(class extends U{constructor(e,t,n,i,s,r){super(),this._modelService=t,this._themeService=n,this._configurationService=i,this._editor=e,this._provider=r.documentRangeSemanticTokensProvider,this._debounceInformation=s.for(this._provider,"DocumentRangeSemanticTokens",{min:100,max:500}),this._tokenizeViewport=this._register(new pt(()=>this._tokenizeViewportNow(),100)),this._outstandingRequests=[];const a=u(()=>{this._editor.hasModel()&&this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()))},"scheduleTokenizeViewport");this._register(this._editor.onDidScrollChange(()=>{a()})),this._register(this._editor.onDidChangeModel(()=>{this._cancelAll(),a()})),this._register(this._editor.onDidChangeModelContent(l=>{this._cancelAll(),a()})),this._register(this._provider.onDidChange(()=>{this._cancelAll(),a()})),this._register(this._configurationService.onDidChangeConfiguration(l=>{l.affectsConfiguration(xI)&&(this._cancelAll(),a())})),this._register(this._themeService.onDidColorThemeChange(()=>{this._cancelAll(),a()}))}_cancelAll(){for(const e of this._outstandingRequests)e.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(e){for(let t=0,n=this._outstandingRequests.length;t<n;t++)if(this._outstandingRequests[t]===e){this._outstandingRequests.splice(t,1);return}}_tokenizeViewportNow(){if(!this._editor.hasModel())return;const e=this._editor.getModel();if(e.tokenization.hasCompleteSemanticTokens())return;if(!gk(e,this._themeService,this._configurationService)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}if(!Bne(this._provider,e)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}const t=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(t.map(n=>this._requestRange(e,n)))}_requestRange(e,t){const n=e.getVersionId(),i=On(r=>Promise.resolve(TI(this._provider,e,t,r))),s=new Ai(!1);return i.then(r=>{if(this._debounceInformation.update(e,s.elapsed()),!r||!r.tokens||e.isDisposed()||e.getVersionId()!==n)return;const{provider:a,tokens:l}=r,c=this._modelService.getSemanticTokensProviderStyling(a);e.tokenization.setPartialSemanticTokens(t,v8(l,c,e.getLanguageId()))}).then(()=>this._removeOutstandingRequest(i),()=>this._removeOutstandingRequest(i)),i}},"ViewportSemanticTokensContribution");u_.ID="editor.contrib.viewportSemanticTokens";u_=Wue([Qp(1,Kt),Qp(2,wt),Qp(3,rt),Qp(4,ho),Qp(5,ue)],u_);it(u_.ID,u_);var Uue=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},dO=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const Gue=I("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hcDark:null,hcLight:null},m("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0),zue=I("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hcDark:null,hcLight:null},m("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0),Kue=I("editor.wordHighlightBorder",{light:null,dark:null,hcDark:Vt,hcLight:Vt},m("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable.")),jue=I("editor.wordHighlightStrongBorder",{light:null,dark:null,hcDark:Vt,hcLight:Vt},m("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable.")),$ue=I("editorOverviewRuler.wordHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},m("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),que=I("editorOverviewRuler.wordHighlightStrongForeground",{dark:"#C0A0C0CC",light:"#C0A0C0CC",hcDark:"#C0A0C0CC",hcLight:"#C0A0C0CC"},m("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),FS=new ce("hasWordHighlights",!1);function nj(o,e,t,n){const i=o.ordered(e);return A5(i.map(s=>()=>Promise.resolve(s.provideDocumentHighlights(e,t,n)).then(void 0,Hn)),ci)}u(nj,"getOccurrencesAtPosition");class g2{constructor(e,t,n){this._model=e,this._selection=t,this._wordSeparators=n,this._wordRange=this._getCurrentWordRange(e,t),this._result=null}get result(){return this._result||(this._result=On(e=>this._compute(this._model,this._selection,this._wordSeparators,e))),this._result}_getCurrentWordRange(e,t){const n=e.getWordAtPosition(t.getPosition());return n?new L(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):null}isValid(e,t,n){const i=t.startLineNumber,s=t.startColumn,r=t.endColumn,a=this._getCurrentWordRange(e,t);let l=Boolean(this._wordRange&&this._wordRange.equalsRange(a));for(let c=0,d=n.length;!l&&c<d;c++){const h=n.getRange(c);h&&h.startLineNumber===i&&h.startColumn<=s&&h.endColumn>=r&&(l=!0)}return l}cancel(){this.result.cancel()}}u(g2,"OccurenceAtPositionRequest");class ij extends g2{constructor(e,t,n,i){super(e,t,n),this._providers=i}_compute(e,t,n,i){return nj(this._providers,e,t.getPosition(),i).then(s=>s||[])}}u(ij,"SemanticOccurenceAtPositionRequest");class sj extends g2{constructor(e,t,n){super(e,t,n),this._selectionIsEmpty=t.isEmpty()}_compute(e,t,n,i){return xc(250,i).then(()=>{if(!t.isEmpty())return[];const s=e.getWordAtPosition(t.getPosition());return!s||s.word.length>1e3?[]:e.findMatches(s.word,!0,!1,!0,n,!1).map(a=>({range:a.range,kind:nb.Text}))})}isValid(e,t,n){const i=t.isEmpty();return this._selectionIsEmpty!==i?!1:super.isValid(e,t,n)}}u(sj,"TextualOccurenceAtPositionRequest");function Yue(o,e,t,n){return o.has(e)?new ij(e,t,n,o):new sj(e,t,n)}u(Yue,"computeOccurencesAtPosition");ua("_executeDocumentHighlights",(o,e,t)=>{const n=o.get(ue);return nj(n.documentHighlightProvider,e,t,Ge.None)});class Dh{constructor(e,t,n){this.toUnhook=new J,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=[],this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=e,this.providers=t,this._hasWordHighlights=FS.bindTo(n),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(74),this.model=this.editor.getModel(),this.toUnhook.add(e.onDidChangeCursorPosition(i=>{this._ignorePositionChangeEvent||this.occurrencesHighlight&&this._onPositionChanged(i)})),this.toUnhook.add(e.onDidChangeModelContent(i=>{this._stopAll()})),this.toUnhook.add(e.onDidChangeConfiguration(i=>{const s=this.editor.getOption(74);this.occurrencesHighlight!==s&&(this.occurrencesHighlight=s,this._stopAll())})),this.decorations=this.editor.createDecorationsCollection(),this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1}hasDecorations(){return this.decorations.length>0}restore(){this.occurrencesHighlight&&this._run()}_getSortedHighlights(){return this.decorations.getRanges().sort(L.compareRangesUsingStarts)}moveNext(){const e=this._getSortedHighlights(),n=(e.findIndex(s=>s.containsPosition(this.editor.getPosition()))+1)%e.length,i=e[n];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(i.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(i);const s=this._getWord();if(s){const r=this.editor.getModel().getLineContent(i.startLineNumber);Zn(`${r}, ${n+1} of ${e.length} for '${s.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}moveBack(){const e=this._getSortedHighlights(),n=(e.findIndex(s=>s.containsPosition(this.editor.getPosition()))-1+e.length)%e.length,i=e[n];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(i.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(i);const s=this._getWord();if(s){const r=this.editor.getModel().getLineContent(i.startLineNumber);Zn(`${r}, ${n+1} of ${e.length} for '${s.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}_removeDecorations(){this.decorations.length>0&&(this.decorations.clear(),this._hasWordHighlights.set(!1))}_stopAll(){this._removeDecorations(),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged(e){if(!this.occurrencesHighlight){this._stopAll();return}if(e.reason!==3){this._stopAll();return}this._run()}_getWord(){const e=this.editor.getSelection(),t=e.startLineNumber,n=e.startColumn;return this.model.getWordAtPosition({lineNumber:t,column:n})}_run(){const e=this.editor.getSelection();if(e.startLineNumber!==e.endLineNumber){this._stopAll();return}const t=e.startColumn,n=e.endColumn,i=this._getWord();if(!i||i.startColumn>t||i.endColumn<n){this._stopAll();return}const s=this.workerRequest&&this.workerRequest.isValid(this.model,e,this.decorations);if(this.lastCursorPositionChangeTime=new Date().getTime(),s)this.workerRequestCompleted&&this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{this._stopAll();const r=++this.workerRequestTokenId;this.workerRequestCompleted=!1,this.workerRequest=Yue(this.providers,this.model,this.editor.getSelection(),this.editor.getOption(119)),this.workerRequest.result.then(a=>{r===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=a||[],this._beginRenderDecorations())},Ie)}}_beginRenderDecorations(){const e=new Date().getTime(),t=this.lastCursorPositionChangeTime+250;e>=t?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout(()=>{this.renderDecorations()},t-e)}renderDecorations(){this.renderDecorationsTimer=-1;const e=[];for(const t of this.workerRequestValue)t.range&&e.push({range:t.range,options:Dh._getDecorationOptions(t.kind)});this.decorations.set(e),this._hasWordHighlights.set(this.hasDecorations())}static _getDecorationOptions(e){return e===nb.Write?this._WRITE_OPTIONS:e===nb.Text?this._TEXT_OPTIONS:this._REGULAR_OPTIONS}dispose(){this._stopAll(),this.toUnhook.dispose()}}u(Dh,"WordHighlighter");Dh._WRITE_OPTIONS=Ae.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:Zt(que),position:io.Center},minimap:{color:Zt(ry),position:Zs.Inline}});Dh._TEXT_OPTIONS=Ae.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight",overviewRuler:{color:Zt(aH),position:io.Center},minimap:{color:Zt(ry),position:Zs.Inline}});Dh._REGULAR_OPTIONS=Ae.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:Zt($ue),position:io.Center},minimap:{color:Zt(ry),position:Zs.Inline}});let eh=u(class oj extends U{constructor(e,t,n){super(),this.wordHighlighter=null;const i=u(()=>{e.hasModel()&&(this.wordHighlighter=new Dh(e,n.documentHighlightProvider,t))},"createWordHighlighterIfPossible");this._register(e.onDidChangeModel(s=>{this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),i()})),i()}static get(e){return e.getContribution(oj.ID)}saveViewState(){return!!(this.wordHighlighter&&this.wordHighlighter.hasDecorations())}moveNext(){this.wordHighlighter&&this.wordHighlighter.moveNext()}moveBack(){this.wordHighlighter&&this.wordHighlighter.moveBack()}restoreViewState(e){this.wordHighlighter&&e&&this.wordHighlighter.restore()}dispose(){this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),super.dispose()}},"WordHighlighterContribution");eh.ID="editor.contrib.wordHighlighter";eh=Uue([dO(1,De),dO(2,ue)],eh);class f2 extends de{constructor(e,t){super(t),this._isNext=e}run(e,t){const n=eh.get(t);n&&(this._isNext?n.moveNext():n.moveBack())}}u(f2,"WordHighlightNavigationAction");class rj extends f2{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:m("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:FS,kbOpts:{kbExpr:A.editorTextFocus,primary:65,weight:100}})}}u(rj,"NextWordHighlightAction");class aj extends f2{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:m("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:FS,kbOpts:{kbExpr:A.editorTextFocus,primary:1089,weight:100}})}}u(aj,"PrevWordHighlightAction");class lj extends de{constructor(){super({id:"editor.action.wordHighlight.trigger",label:m("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:FS.toNegated(),kbOpts:{kbExpr:A.editorTextFocus,primary:0,weight:100}})}run(e,t,n){const i=eh.get(t);i&&i.restoreViewState(!0)}}u(lj,"TriggerWordHighlightAction");it(eh.ID,eh);ie(rj);ie(aj);ie(lj);At((o,e)=>{const t=o.getColor(EA);t&&(e.addRule(`.monaco-editor .focused .selectionHighlight { background-color: ${t}; }`),e.addRule(`.monaco-editor .selectionHighlight { background-color: ${t.transparent(.5)}; }`));const n=o.getColor(Gue);n&&e.addRule(`.monaco-editor .wordHighlight { background-color: ${n}; }`);const i=o.getColor(zue);i&&e.addRule(`.monaco-editor .wordHighlightStrong { background-color: ${i}; }`);const s=o.getColor(wZ);s&&e.addRule(`.monaco-editor .selectionHighlight { border: 1px ${ui(o.type)?"dotted":"solid"} ${s}; box-sizing: border-box; }`);const r=o.getColor(Kue);r&&e.addRule(`.monaco-editor .wordHighlight { border: 1px ${ui(o.type)?"dashed":"solid"} ${r}; box-sizing: border-box; }`);const a=o.getColor(jue);a&&e.addRule(`.monaco-editor .wordHighlightStrong { border: 1px ${ui(o.type)?"dashed":"solid"} ${a}; box-sizing: border-box; }`)});class kv extends Ln{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,n){if(!t.hasModel())return;const i=so(t.getOption(119)),s=t.getModel(),a=t.getSelections().map(l=>{const c=new H(l.positionLineNumber,l.positionColumn),d=this._move(i,s,c,this._wordNavigationType);return this._moveTo(l,d,this._inSelectionMode)});if(s.pushStackElement(),t._getViewModel().setCursorStates("moveWordCommand",3,a.map(l=>Ke.fromModelSelection(l))),a.length===1){const l=new H(a[0].positionLineNumber,a[0].positionColumn);t.revealPosition(l,0)}}_moveTo(e,t,n){return n?new re(e.selectionStartLineNumber,e.selectionStartColumn,t.lineNumber,t.column):new re(t.lineNumber,t.column,t.lineNumber,t.column)}}u(kv,"MoveWordCommand");class Fl extends kv{_move(e,t,n,i){return tt.moveWordLeft(e,t,n,i)}}u(Fl,"WordLeftCommand");class Ol extends kv{_move(e,t,n,i){return tt.moveWordRight(e,t,n,i)}}u(Ol,"WordRightCommand");class cj extends Fl{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})}}u(cj,"CursorWordStartLeft");class dj extends Fl{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})}}u(dj,"CursorWordEndLeft");class uj extends Fl{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:oe.and(A.textInputFocus,(e=oe.and(F_,Xy))===null||e===void 0?void 0:e.negate()),primary:2063,mac:{primary:527},weight:100}})}}u(uj,"CursorWordLeft");class hj extends Fl{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})}}u(hj,"CursorWordStartLeftSelect");class gj extends Fl{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})}}u(gj,"CursorWordEndLeftSelect");class fj extends Fl{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:oe.and(A.textInputFocus,(e=oe.and(F_,Xy))===null||e===void 0?void 0:e.negate()),primary:3087,mac:{primary:1551},weight:100}})}}u(fj,"CursorWordLeftSelect");class pj extends Fl{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})}_move(e,t,n,i){return super._move(so(Sr.wordSeparators.defaultValue),t,n,i)}}u(pj,"CursorWordAccessibilityLeft");class mj extends Fl{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}_move(e,t,n,i){return super._move(so(Sr.wordSeparators.defaultValue),t,n,i)}}u(mj,"CursorWordAccessibilityLeftSelect");class bj extends Ol{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})}}u(bj,"CursorWordStartRight");class _j extends Ol{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:oe.and(A.textInputFocus,(e=oe.and(F_,Xy))===null||e===void 0?void 0:e.negate()),primary:2065,mac:{primary:529},weight:100}})}}u(_j,"CursorWordEndRight");class vj extends Ol{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})}}u(vj,"CursorWordRight");class Cj extends Ol{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})}}u(Cj,"CursorWordStartRightSelect");class wj extends Ol{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:oe.and(A.textInputFocus,(e=oe.and(F_,Xy))===null||e===void 0?void 0:e.negate()),primary:3089,mac:{primary:1553},weight:100}})}}u(wj,"CursorWordEndRightSelect");class yj extends Ol{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})}}u(yj,"CursorWordRightSelect");class Sj extends Ol{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})}_move(e,t,n,i){return super._move(so(Sr.wordSeparators.defaultValue),t,n,i)}}u(Sj,"CursorWordAccessibilityRight");class Tj extends Ol{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}_move(e,t,n,i){return super._move(so(Sr.wordSeparators.defaultValue),t,n,i)}}u(Tj,"CursorWordAccessibilityRightSelect");class Mv extends Ln{constructor(e){super(e),this._whitespaceHeuristics=e.whitespaceHeuristics,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,n){const i=e.get(rn);if(!t.hasModel())return;const s=so(t.getOption(119)),r=t.getModel(),a=t.getSelections(),l=t.getOption(5),c=t.getOption(8),d=i.getLanguageConfiguration(r.getLanguageId()).getAutoClosingPairs(),h=t._getViewModel(),g=a.map(f=>{const p=this._delete({wordSeparators:s,model:r,selection:f,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:t.getOption(6),autoClosingBrackets:l,autoClosingQuotes:c,autoClosingPairs:d,autoClosedCharacters:h.getCursorAutoClosedCharacters()},this._wordNavigationType);return new Un(p,"")});t.pushUndoStop(),t.executeCommands(this.id,g),t.pushUndoStop()}}u(Mv,"DeleteWordCommand");class OS extends Mv{_delete(e,t){const n=tt.deleteWordLeft(e,t);return n||new L(1,1,1,1)}}u(OS,"DeleteWordLeftCommand");class VS extends Mv{_delete(e,t){const n=tt.deleteWordRight(e,t);if(n)return n;const i=e.model.getLineCount(),s=e.model.getLineMaxColumn(i);return new L(i,s,i,s)}}u(VS,"DeleteWordRightCommand");class Lj extends OS{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:A.writable})}}u(Lj,"DeleteWordStartLeft");class xj extends OS{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:A.writable})}}u(xj,"DeleteWordEndLeft");class Ej extends OS{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:A.writable,kbOpts:{kbExpr:A.textInputFocus,primary:2049,mac:{primary:513},weight:100}})}}u(Ej,"DeleteWordLeft");class kj extends VS{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:A.writable})}}u(kj,"DeleteWordStartRight");class Mj extends VS{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:A.writable})}}u(Mj,"DeleteWordEndRight");class Dj extends VS{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:A.writable,kbOpts:{kbExpr:A.textInputFocus,primary:2068,mac:{primary:532},weight:100}})}}u(Dj,"DeleteWordRight");class Aj extends de{constructor(){super({id:"deleteInsideWord",precondition:A.writable,label:m("deleteInsideWord","Delete Word"),alias:"Delete Word"})}run(e,t,n){if(!t.hasModel())return;const i=so(t.getOption(119)),s=t.getModel(),a=t.getSelections().map(l=>{const c=tt.deleteInsideWord(i,s,l);return new Un(c,"")});t.pushUndoStop(),t.executeCommands(this.id,a),t.pushUndoStop()}}u(Aj,"DeleteInsideWord");te(new cj);te(new dj);te(new uj);te(new hj);te(new gj);te(new fj);te(new bj);te(new _j);te(new vj);te(new Cj);te(new wj);te(new yj);te(new pj);te(new mj);te(new Sj);te(new Tj);te(new Lj);te(new xj);te(new Ej);te(new kj);te(new Mj);te(new Dj);ie(Aj);class Ij extends Mv{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:A.writable,kbOpts:{kbExpr:A.textInputFocus,primary:0,mac:{primary:769},weight:100}})}_delete(e,t){const n=W_.deleteWordPartLeft(e);return n||new L(1,1,1,1)}}u(Ij,"DeleteWordPartLeft");class Nj extends Mv{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:A.writable,kbOpts:{kbExpr:A.textInputFocus,primary:0,mac:{primary:788},weight:100}})}_delete(e,t){const n=W_.deleteWordPartRight(e);if(n)return n;const i=e.model.getLineCount(),s=e.model.getLineMaxColumn(i);return new L(i,s,i,s)}}u(Nj,"DeleteWordPartRight");class p2 extends kv{_move(e,t,n,i){return W_.moveWordPartLeft(e,t,n)}}u(p2,"WordPartLeftCommand");class Pj extends p2{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:A.textInputFocus,primary:0,mac:{primary:783},weight:100}})}}u(Pj,"CursorWordPartLeft");Qe.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");class Rj extends p2{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:A.textInputFocus,primary:0,mac:{primary:1807},weight:100}})}}u(Rj,"CursorWordPartLeftSelect");Qe.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");class m2 extends kv{_move(e,t,n,i){return W_.moveWordPartRight(e,t,n)}}u(m2,"WordPartRightCommand");class Fj extends m2{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:A.textInputFocus,primary:0,mac:{primary:785},weight:100}})}}u(Fj,"CursorWordPartRight");class Oj extends m2{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:A.textInputFocus,primary:0,mac:{primary:1809},weight:100}})}}u(Oj,"CursorWordPartRightSelect");te(new Ij);te(new Nj);te(new Pj);te(new Rj);te(new Fj);te(new Oj);class ww extends U{constructor(e){super(),this.editor=e,this._register(this.editor.onDidAttemptReadOnlyEdit(()=>this._onDidAttemptReadOnlyEdit()))}_onDidAttemptReadOnlyEdit(){const e=ds.get(this.editor);e&&this.editor.hasModel()&&(this.editor.isSimpleWidget?e.showMessage(m("editor.simple.readonly","Cannot edit in read-only input"),this.editor.getPosition()):e.showMessage(m("editor.readonly","Cannot edit in read-only editor"),this.editor.getPosition()))}}u(ww,"ReadOnlyMessageController");ww.ID="editor.contrib.readOnlyMessageController";it(ww.ID,ww);var Vj=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},V0=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const Hj=new ce("accessibilityHelpWidgetVisible",!1);let th=u(class Bj extends U{constructor(e,t){super(),this._editor=e,this._widget=this._register(t.createInstance(Jf,this._editor))}static get(e){return e.getContribution(Bj.ID)}show(){this._widget.show()}hide(){this._widget.hide()}},"AccessibilityHelpController");th.ID="editor.contrib.accessibilityHelpController";th=Vj([V0(1,Ne)],th);function Xue(o,e){return!o||o.length===0?pn.noSelection:o.length===1?e?$s(pn.singleSelectionRange,o[0].positionLineNumber,o[0].positionColumn,e):$s(pn.singleSelection,o[0].positionLineNumber,o[0].positionColumn):e?$s(pn.multiSelectionRange,o.length,e):o.length>0?$s(pn.multiSelection,o.length):""}u(Xue,"getSelectionLabel");let Jf=u(class H0 extends lo{constructor(e,t,n,i){super(),this._contextKeyService=t,this._keybindingService=n,this._openerService=i,this._editor=e,this._isVisibleKey=Hj.bindTo(this._contextKeyService),this._domNode=et(document.createElement("div")),this._domNode.setClassName("accessibilityHelpWidget"),this._domNode.setDisplay("none"),this._domNode.setAttribute("role","dialog"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode=et(document.createElement("div")),this._contentDomNode.setAttribute("role","document"),this._domNode.appendChild(this._contentDomNode),this._isVisible=!1,this._register(this._editor.onDidLayoutChange(()=>{this._isVisible&&this._layout()})),this._register(Dn(this._contentDomNode.domNode,"keydown",s=>{if(this._isVisible&&(s.equals(2083)&&(Zn(pn.emergencyConfOn),this._editor.updateOptions({accessibilitySupport:"on"}),Tn(this._contentDomNode.domNode),this._buildContent(),this._contentDomNode.domNode.focus(),s.preventDefault(),s.stopPropagation()),s.equals(2086))){Zn(pn.openingDocs);let r=this._editor.getRawOptions().accessibilityHelpUrl;typeof r>"u"&&(r="https://go.microsoft.com/fwlink/?linkid=852450"),this._openerService.open(be.parse(r)),s.preventDefault(),s.stopPropagation()}})),this.onblur(this._contentDomNode.domNode,()=>{this.hide()}),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return H0.ID}getDomNode(){return this._domNode.domNode}getPosition(){return{preference:null}}show(){this._isVisible||(this._isVisible=!0,this._isVisibleKey.set(!0),this._layout(),this._domNode.setDisplay("block"),this._domNode.setAttribute("aria-hidden","false"),this._contentDomNode.domNode.tabIndex=0,this._buildContent(),this._contentDomNode.domNode.focus())}_descriptionForCommand(e,t,n){const i=this._keybindingService.lookupKeybinding(e);return i?$s(t,i.getAriaLabel()):$s(n,e)}_buildContent(){const e=this._editor.getOptions(),t=this._editor.getSelections();let n=0;if(t){const a=this._editor.getModel();a&&t.forEach(l=>{n+=a.getValueLengthInRange(l)})}let i=Xue(t,n);e.get(56)?e.get(83)?i+=pn.readonlyDiffEditor:i+=pn.editableDiffEditor:e.get(83)?i+=pn.readonlyEditor:i+=pn.editableEditor;const s=Xe?pn.changeConfigToOnMac:pn.changeConfigToOnWinLinux;switch(e.get(2)){case 0:i+=`

 - `+s;break;case 2:i+=`

 - `+pn.auto_on;break;case 1:i+=`

 - `+pn.auto_off,i+=" "+s;break}e.get(132)?i+=`

 - `+this._descriptionForCommand(Qu.ID,pn.tabFocusModeOnMsg,pn.tabFocusModeOnMsgNoKb):i+=`

 - `+this._descriptionForCommand(Qu.ID,pn.tabFocusModeOffMsg,pn.tabFocusModeOffMsgNoKb);const r=Xe?pn.openDocMac:pn.openDocWinLinux;i+=`

 - `+r,i+=`

`+pn.outroMsg,this._contentDomNode.domNode.appendChild(N8(i)),this._contentDomNode.domNode.setAttribute("aria-label",i)}hide(){this._isVisible&&(this._isVisible=!1,this._isVisibleKey.reset(),this._domNode.setDisplay("none"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode.domNode.tabIndex=-1,Tn(this._contentDomNode.domNode),this._editor.focus())}_layout(){const e=this._editor.getLayoutInfo(),t=Math.max(5,Math.min(H0.WIDTH,e.width-40)),n=Math.max(5,Math.min(H0.HEIGHT,e.height-40));this._domNode.setWidth(t),this._domNode.setHeight(n);const i=Math.round((e.height-n)/2);this._domNode.setTop(i);const s=Math.round((e.width-t)/2);this._domNode.setLeft(s)}},"AccessibilityHelpWidget");Jf.ID="editor.contrib.accessibilityHelpWidget";Jf.WIDTH=500;Jf.HEIGHT=300;Jf=Vj([V0(1,De),V0(2,Cn),V0(3,uo)],Jf);class Wj extends de{constructor(){super({id:"editor.action.showAccessibilityHelp",label:pn.showAccessibilityHelpAction,alias:"Show Accessibility Help",precondition:void 0,kbOpts:{primary:571,weight:100,linux:{primary:1595,secondary:[571]}}})}run(e,t){const n=th.get(t);n&&n.show()}}u(Wj,"ShowAccessibilityHelpAction");it(th.ID,th);ie(Wj);const Zue=Ln.bindToContribution(th.get);te(new Zue({id:"closeAccessibilityHelp",precondition:Hj,handler:o=>o.hide(),kbOpts:{weight:100+100,kbExpr:A.focus,primary:9,secondary:[1033]}}));At((o,e)=>{const t=o.getColor(dn);t&&e.addRule(`.monaco-editor .accessibilityHelpWidget { background-color: ${t}; }`);const n=o.getColor(ar);n&&e.addRule(`.monaco-editor .accessibilityHelpWidget { color: ${n}; }`);const i=o.getColor(rr);i&&e.addRule(`.monaco-editor .accessibilityHelpWidget { box-shadow: 0 2px 8px ${i}; }`);const s=o.getColor(Be);s&&e.addRule(`.monaco-editor .accessibilityHelpWidget { border: 2px solid ${s}; }`)});class yw extends U{constructor(e){super(),this.editor=e,this.widget=null,na&&(this._register(e.onDidChangeConfiguration(()=>this.update())),this.update())}update(){const e=!this.editor.getOption(83);!this.widget&&e?this.widget=new Dv(this.editor):this.widget&&!e&&(this.widget.dispose(),this.widget=null)}dispose(){super.dispose(),this.widget&&(this.widget.dispose(),this.widget=null)}}u(yw,"IPadShowKeyboard");yw.ID="editor.contrib.iPadShowKeyboard";class Dv extends U{constructor(e){super(),this.editor=e,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._register(Y(this._domNode,"touchstart",t=>{this.editor.focus()})),this._register(Y(this._domNode,"focus",t=>{this.editor.focus()})),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}getId(){return Dv.ID}getDomNode(){return this._domNode}getPosition(){return{preference:1}}}u(Dv,"ShowKeyboardWidget");Dv.ID="editor.contrib.ShowKeyboardWidget";it(yw.ID,yw);var Jue=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},uO=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let Qf=u(class Uj extends U{constructor(e,t,n){super(),this._editor=e,this._languageService=n,this._widget=null,this._register(this._editor.onDidChangeModel(i=>this.stop())),this._register(this._editor.onDidChangeModelLanguage(i=>this.stop())),this._register(Wt.onDidChange(i=>this.stop())),this._register(this._editor.onKeyUp(i=>i.keyCode===9&&this.stop()))}static get(e){return e.getContribution(Uj.ID)}dispose(){this.stop(),super.dispose()}launch(){this._widget||this._editor.hasModel()&&(this._widget=new Av(this._editor,this._languageService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}},"InspectTokensController");Qf.ID="editor.contrib.inspectTokens";Qf=Jue([uO(1,Ps),uO(2,Gt)],Qf);class Gj extends de{constructor(){super({id:"editor.action.inspectTokens",label:ZE.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}run(e,t){const n=Qf.get(t);n&&n.launch()}}u(Gj,"InspectTokens");function Que(o){let e="";for(let t=0,n=o.length;t<n;t++){const i=o.charCodeAt(t);switch(i){case 9:e+="→";break;case 32:e+="·";break;default:e+=String.fromCharCode(i)}}return e}u(Que,"renderTokenText");function ehe(o,e){const t=Wt.get(e);if(t)return t;const n=o.encodeLanguageId(e);return{getInitialState:()=>Qg,tokenize:(i,s,r)=>eA(e,r),tokenizeEncoded:(i,s,r)=>Bw(n,r)}}u(ehe,"getSafeTokenizationSupport");class Av extends U{constructor(e,t){super(),this.allowEditorOverflow=!0,this._editor=e,this._languageService=t,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="tokens-inspect-widget",this._tokenizationSupport=ehe(this._languageService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition(n=>this._compute(this._editor.getPosition()))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return Av._ID}_compute(e){const t=this._getTokensAtLine(e.lineNumber);let n=0;for(let l=t.tokens1.length-1;l>=0;l--){const c=t.tokens1[l];if(e.column-1>=c.offset){n=l;break}}let i=0;for(let l=t.tokens2.length>>>1;l>=0;l--)if(e.column-1>=t.tokens2[l<<1]){i=l;break}const s=this._model.getLineContent(e.lineNumber);let r="";if(n<t.tokens1.length){const l=t.tokens1[n].offset,c=n+1<t.tokens1.length?t.tokens1[n+1].offset:s.length;r=s.substring(l,c)}kc(this._domNode,ee("h2.tm-token",void 0,Que(r),ee("span.tm-token-length",void 0,`${r.length} ${r.length===1?"char":"chars"}`))),q(this._domNode,ee("hr.tokens-inspect-separator",{style:"clear:both"}));const a=(i<<1)+1<t.tokens2.length?this._decodeMetadata(t.tokens2[(i<<1)+1]):null;q(this._domNode,ee("table.tm-metadata-table",void 0,ee("tbody",void 0,ee("tr",void 0,ee("td.tm-metadata-key",void 0,"language"),ee("td.tm-metadata-value",void 0,`${a?a.languageId:"-?-"}`)),ee("tr",void 0,ee("td.tm-metadata-key",void 0,"token type"),ee("td.tm-metadata-value",void 0,`${a?this._tokenTypeToString(a.tokenType):"-?-"}`)),ee("tr",void 0,ee("td.tm-metadata-key",void 0,"font style"),ee("td.tm-metadata-value",void 0,`${a?this._fontStyleToString(a.fontStyle):"-?-"}`)),ee("tr",void 0,ee("td.tm-metadata-key",void 0,"foreground"),ee("td.tm-metadata-value",void 0,`${a?B.Format.CSS.formatHex(a.foreground):"-?-"}`)),ee("tr",void 0,ee("td.tm-metadata-key",void 0,"background"),ee("td.tm-metadata-value",void 0,`${a?B.Format.CSS.formatHex(a.background):"-?-"}`))))),q(this._domNode,ee("hr.tokens-inspect-separator")),n<t.tokens1.length&&q(this._domNode,ee("span.tm-token-type",void 0,t.tokens1[n].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(e){const t=Wt.getColorMap(),n=$n.getLanguageId(e),i=$n.getTokenType(e),s=$n.getFontStyle(e),r=$n.getForeground(e),a=$n.getBackground(e);return{languageId:this._languageService.languageIdCodec.decodeLanguageId(n),tokenType:i,fontStyle:s,foreground:t[r],background:t[a]}}_tokenTypeToString(e){switch(e){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 3:return"RegEx";default:return"??"}}_fontStyleToString(e){let t="";return e&1&&(t+="italic "),e&2&&(t+="bold "),e&4&&(t+="underline "),e&8&&(t+="strikethrough "),t.length===0&&(t="---"),t}_getTokensAtLine(e){const t=this._getStateBeforeLine(e),n=this._tokenizationSupport.tokenize(this._model.getLineContent(e),!0,t),i=this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(e),!0,t);return{startState:t,tokens1:n.tokens,tokens2:i.tokens,endState:n.endState}}_getStateBeforeLine(e){let t=this._tokenizationSupport.getInitialState();for(let n=1;n<e;n++)t=this._tokenizationSupport.tokenize(this._model.getLineContent(n),!0,t).endState;return t}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[2,1]}}}u(Av,"InspectTokensWidget");Av._ID="editor.contrib.inspectTokensWidget";it(Qf.ID,Qf);ie(Gj);At((o,e)=>{const t=o.getColor(MA);if(t){const s=ui(o.type)?2:1;e.addRule(`.monaco-editor .tokens-inspect-widget { border: ${s}px solid ${t}; }`),e.addRule(`.monaco-editor .tokens-inspect-widget .tokens-inspect-separator { background-color: ${t}; }`)}const n=o.getColor(xu);n&&e.addRule(`.monaco-editor .tokens-inspect-widget { background-color: ${n}; }`);const i=o.getColor(kA);i&&e.addRule(`.monaco-editor .tokens-inspect-widget { color: ${i}; }`)});var the=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},hO=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let Sw=u(class B0{constructor(e,t){this.quickInputService=e,this.keybindingService=t,this.registry=zt.as(_h.Quickaccess)}provide(e){const t=new J;return t.add(e.onDidAccept(()=>{const[n]=e.selectedItems;n&&this.quickInputService.quickAccess.show(n.prefix,{preserveValue:!0})})),t.add(e.onDidChangeValue(n=>{const i=this.registry.getQuickAccessProvider(n.substr(B0.PREFIX.length));i&&i.prefix&&i.prefix!==B0.PREFIX&&this.quickInputService.quickAccess.show(i.prefix,{preserveValue:!0})})),e.items=this.getQuickAccessProviders(),t}getQuickAccessProviders(){const e=[];for(const t of this.registry.getQuickAccessProviders().sort((n,i)=>n.prefix.localeCompare(i.prefix)))if(t.prefix!==B0.PREFIX)for(const n of t.helpEntries){const i=n.prefix||t.prefix,s=i||"…";e.push({prefix:i,label:s,keybinding:n.commandId?this.keybindingService.lookupKeybinding(n.commandId):void 0,ariaLabel:m("helpPickAriaLabel","{0}, {1}",s,n.description),description:n.description})}return e}},"HelpQuickAccessProvider");Sw.PREFIX="?";Sw=the([hO(0,Pl),hO(1,Cn)],Sw);zt.as(_h.Quickaccess).registerQuickAccessProvider({ctor:Sw,prefix:"",helpEntries:[{description:JE.helpQuickAccessActionLabel}]});class b2{constructor(e){this.options=e,this.rangeHighlightDecorationId=void 0}provide(e,t){var n;const i=new J;e.canAcceptInBackground=!!(!((n=this.options)===null||n===void 0)&&n.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;const s=i.add(new gi);return s.value=this.doProvide(e,t),i.add(this.onDidActiveTextEditorControlChange(()=>{s.value=void 0,s.value=this.doProvide(e,t)})),i}doProvide(e,t){const n=new J,i=this.activeTextEditorControl;if(i&&this.canProvideWithTextEditor(i)){const s={editor:i},r=S6(i);if(r){let a=Gi(i.saveViewState());n.add(r.onDidChangeCursorPosition(()=>{a=Gi(i.saveViewState())})),s.restoreViewState=()=>{a&&i===this.activeTextEditorControl&&i.restoreViewState(a)},n.add(fl(t.onCancellationRequested)(()=>{var l;return(l=s.restoreViewState)===null||l===void 0?void 0:l.call(s)}))}n.add(He(()=>this.clearDecorations(i))),n.add(this.provideWithTextEditor(s,e,t))}else n.add(this.provideWithoutTextEditor(e,t));return n}canProvideWithTextEditor(e){return!0}gotoLocation({editor:e},t){e.setSelection(t.range),e.revealRangeInCenter(t.range,0),t.preserveFocus||e.focus()}getModel(e){var t;return y6(e)?(t=e.getModel())===null||t===void 0?void 0:t.modified:e.getModel()}addDecorations(e,t){e.changeDecorations(n=>{const i=[];this.rangeHighlightDecorationId&&(i.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),i.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);const s=[{range:t,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:Zt(YJ),position:io.Full}}}],[r,a]=n.deltaDecorations(i,s);this.rangeHighlightDecorationId={rangeHighlightId:r,overviewRulerDecorationId:a}})}clearDecorations(e){const t=this.rangeHighlightDecorationId;t&&(e.changeDecorations(n=>{n.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])}),this.rangeHighlightDecorationId=void 0)}}u(b2,"AbstractEditorNavigationQuickAccessProvider");class Iv extends b2{constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(e){const t=m("cannotRunGotoLine","Open a text editor first to go to a line.");return e.items=[{label:t}],e.ariaLabel=t,U.None}provideWithTextEditor(e,t,n){const i=e.editor,s=new J;s.add(t.onDidAccept(l=>{const[c]=t.selectedItems;if(c){if(!this.isValidLineNumber(i,c.lineNumber))return;this.gotoLocation(e,{range:this.toRange(c.lineNumber,c.column),keyMods:t.keyMods,preserveFocus:l.inBackground}),l.inBackground||t.hide()}}));const r=u(()=>{const l=this.parsePosition(i,t.value.trim().substr(Iv.PREFIX.length)),c=this.getPickLabel(i,l.lineNumber,l.column);if(t.items=[{lineNumber:l.lineNumber,column:l.column,label:c}],t.ariaLabel=c,!this.isValidLineNumber(i,l.lineNumber)){this.clearDecorations(i);return}const d=this.toRange(l.lineNumber,l.column);i.revealRangeInCenter(d,0),this.addDecorations(i,d)},"updatePickerAndEditor");r(),s.add(t.onDidChangeValue(()=>r()));const a=S6(i);return a&&a.getOptions().get(62).renderType===2&&(a.updateOptions({lineNumbers:"on"}),s.add(He(()=>a.updateOptions({lineNumbers:"relative"})))),s}toRange(e=1,t=1){return{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}}parsePosition(e,t){const n=t.split(/,|:|#/).map(s=>parseInt(s,10)).filter(s=>!isNaN(s)),i=this.lineCount(e)+1;return{lineNumber:n[0]>0?n[0]:i+n[0],column:n[1]}}getPickLabel(e,t,n){if(this.isValidLineNumber(e,t))return this.isValidColumn(e,t,n)?m("gotoLineColumnLabel","Go to line {0} and character {1}.",t,n):m("gotoLineLabel","Go to line {0}.",t);const i=e.getPosition()||{lineNumber:1,column:1},s=this.lineCount(e);return s>1?m("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",i.lineNumber,i.column,s):m("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",i.lineNumber,i.column)}isValidLineNumber(e,t){return!t||typeof t!="number"?!1:t>0&&t<=this.lineCount(e)}isValidColumn(e,t,n){if(!n||typeof n!="number")return!1;const i=this.getModel(e);if(!i)return!1;const s={lineNumber:t,column:n};return i.validatePosition(s).equals(s)}lineCount(e){var t,n;return(n=(t=this.getModel(e))===null||t===void 0?void 0:t.getLineCount())!==null&&n!==void 0?n:0}}u(Iv,"AbstractGotoLineQuickAccessProvider");Iv.PREFIX=":";var nhe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ihe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let h_=u(class extends Iv{constructor(e){super(),this.editorService=e,this.onDidActiveTextEditorControlChange=fe.None}get activeTextEditorControl(){return Gi(this.editorService.getFocusedCodeEditor())}},"StandaloneGotoLineQuickAccessProvider");h_=nhe([ihe(0,dt)],h_);let HS=u(class extends de{constructor(){super({id:HS.ID,label:P1.gotoLineActionLabel,alias:"Go to Line/Column...",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:2085,mac:{primary:293},weight:100}})}run(e){e.get(Pl).quickAccess.show(h_.PREFIX)}},"GotoLineAction");HS.ID="editor.action.gotoLine";ie(HS);zt.as(_h.Quickaccess).registerQuickAccessProvider({ctor:h_,prefix:h_.PREFIX,helpEntries:[{description:P1.gotoLineActionLabel,commandId:HS.ID}]});const zj=[void 0,[]];function bL(o,e,t=0,n=0){const i=e;return i.values&&i.values.length>1?she(o,i.values,t,n):Kj(o,e,t,n)}u(bL,"scoreFuzzy2");function she(o,e,t,n){let i=0;const s=[];for(const r of e){const[a,l]=Kj(o,r,t,n);if(typeof a!="number")return zj;i+=a,s.push(...l)}return[i,ohe(s)]}u(she,"doScoreFuzzy2Multiple");function Kj(o,e,t,n){const i=yf(e.original,e.originalLowercase,t,o,o.toLowerCase(),n,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return i?[i[0],Fy(i)]:zj}u(Kj,"doScoreFuzzy2Single");function ohe(o){const e=o.sort((i,s)=>i.start-s.start),t=[];let n;for(const i of e)!n||!rhe(n,i)?(n=i,t.push(i)):(n.start=Math.min(n.start,i.start),n.end=Math.max(n.end,i.end));return t}u(ohe,"normalizeMatches");function rhe(o,e){return!(o.end<e.start||e.end<o.start)}u(rhe,"matchOverlaps");function gO(o){return o.startsWith('"')&&o.endsWith('"')}u(gO,"queryExpectsExactMatch");const jj=" ";function SD(o){typeof o!="string"&&(o="");const e=o.toLowerCase(),{pathNormalized:t,normalized:n,normalizedLowercase:i}=fO(o),s=t.indexOf(Xr)>=0,r=gO(o);let a;const l=o.split(jj);if(l.length>1)for(const c of l){const d=gO(c),{pathNormalized:h,normalized:g,normalizedLowercase:f}=fO(c);g&&(a||(a=[]),a.push({original:c,originalLowercase:c.toLowerCase(),pathNormalized:h,normalized:g,normalizedLowercase:f,expectContiguousMatch:d}))}return{original:o,originalLowercase:e,pathNormalized:t,normalized:n,normalizedLowercase:i,values:a,containsPathSeparator:s,expectContiguousMatch:r}}u(SD,"prepareQuery");function fO(o){let e;ei?e=o.replace(/\//g,Xr):e=o.replace(/\\/g,Xr);const t=pq(e).replace(/\s|"/g,"");return{pathNormalized:e,normalized:t,normalizedLowercase:t.toLowerCase()}}u(fO,"normalizeQuery");function pO(o){return Array.isArray(o)?SD(o.map(e=>e.original).join(jj)):SD(o.original)}u(pO,"pieceToQuery");var ahe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},mO=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},em=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let ko=u(class TD extends b2{constructor(e,t,n=Object.create(null)){super(n),this._languageFeaturesService=e,this._outlineModelService=t,this.options=n,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(e){return this.provideLabelPick(e,m("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),U.None}provideWithTextEditor(e,t,n){const i=e.editor,s=this.getModel(i);return s?this._languageFeaturesService.documentSymbolProvider.has(s)?this.doProvideWithEditorSymbols(e,s,t,n):this.doProvideWithoutEditorSymbols(e,s,t,n):U.None}doProvideWithoutEditorSymbols(e,t,n,i){const s=new J;return this.provideLabelPick(n,m("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),em(this,void 0,void 0,function*(){!(yield this.waitForLanguageSymbolRegistry(t,s))||i.isCancellationRequested||s.add(this.doProvideWithEditorSymbols(e,t,n,i))}),s}provideLabelPick(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}waitForLanguageSymbolRegistry(e,t){return em(this,void 0,void 0,function*(){if(this._languageFeaturesService.documentSymbolProvider.has(e))return!0;const n=new Ww,i=t.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>{this._languageFeaturesService.documentSymbolProvider.has(e)&&(i.dispose(),n.complete(!0))}));return t.add(He(()=>n.complete(!1))),n.p})}doProvideWithEditorSymbols(e,t,n,i){var s;const r=e.editor,a=new J;a.add(n.onDidAccept(g=>{const[f]=n.selectedItems;f&&f.range&&(this.gotoLocation(e,{range:f.range.selection,keyMods:n.keyMods,preserveFocus:g.inBackground}),g.inBackground||n.hide())})),a.add(n.onDidTriggerItemButton(({item:g})=>{g&&g.range&&(this.gotoLocation(e,{range:g.range.selection,keyMods:n.keyMods,forceSideBySide:!0}),n.hide())}));const l=this.getDocumentSymbols(t,i);let c;const d=u(g=>em(this,void 0,void 0,function*(){c?.dispose(!0),n.busy=!1,c=new ti(i),n.busy=!0;try{const f=SD(n.value.substr(TD.PREFIX.length).trim()),p=yield this.doGetSymbolPicks(l,f,void 0,c.token);if(i.isCancellationRequested)return;if(p.length>0){if(n.items=p,g&&f.original.length===0){const _=z0(p,v=>Boolean(v.type!=="separator"&&v.range&&L.containsPosition(v.range.decoration,g)));_&&(n.activeItems=[_])}}else f.original.length>0?this.provideLabelPick(n,m("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(n,m("noSymbolResults","No editor symbols"))}finally{i.isCancellationRequested||(n.busy=!1)}}),"updatePickerItems");a.add(n.onDidChangeValue(()=>d(void 0))),d((s=r.getSelection())===null||s===void 0?void 0:s.getPosition());let h=2;return a.add(n.onDidChangeActive(()=>{const[g]=n.activeItems;if(g&&g.range){if(h-- >0)return;r.revealRangeInCenter(g.range.selection,0),this.addDecorations(r,g.range.decoration)}})),a}doGetSymbolPicks(e,t,n,i){return em(this,void 0,void 0,function*(){const s=yield e;if(i.isCancellationRequested)return[];const r=t.original.indexOf(TD.SCOPE_PREFIX)===0,a=r?1:0;let l,c;t.values&&t.values.length>1?(l=pO(t.values[0]),c=pO(t.values.slice(1))):l=t;const d=[];for(let f=0;f<s.length;f++){const p=s[f],_=gq(p.name),v=`$(${NL.toIcon(p.kind).id}) ${_}`,C=v.length-_.length;let w=p.containerName;n?.extraContainerLabel&&(w?w=`${n.extraContainerLabel} • ${w}`:w=n.extraContainerLabel);let y,S,E,k;if(t.original.length>a){let x=!1;if(l!==t&&([y,S]=bL(v,Object.assign(Object.assign({},t),{values:void 0}),a,C),typeof y=="number"&&(x=!0)),typeof y!="number"&&([y,S]=bL(v,l,a,C),typeof y!="number"))continue;if(!x&&c){if(w&&c.original.length>0&&([E,k]=bL(w,c)),typeof E!="number")continue;typeof y=="number"&&(y+=E)}}const T=p.tags&&p.tags.indexOf(1)>=0;d.push({index:f,kind:p.kind,score:y,label:v,ariaLabel:_,description:w,highlights:T?void 0:{label:S,description:k},range:{selection:L.collapseToStart(p.selectionRange),decoration:p.range},strikethrough:T,buttons:(()=>{var x,M;const F=!((x=this.options)===null||x===void 0)&&x.openSideBySideDirection?(M=this.options)===null||M===void 0?void 0:M.openSideBySideDirection():void 0;if(F)return[{iconClass:F==="right"?b.splitHorizontal.classNames:b.splitVertical.classNames,tooltip:F==="right"?m("openToSide","Open to the Side"):m("openToBottom","Open to the Bottom")}]})()})}const h=d.sort((f,p)=>r?this.compareByKindAndScore(f,p):this.compareByScore(f,p));let g=[];if(r){let v=function(){p&&typeof f=="number"&&_>0&&(p.label=$s(vL[f]||_L,_))};u(v,"updateLastSeparatorLabel");let f,p,_=0;for(const C of h)f!==C.kind?(v(),f=C.kind,_=1,p={type:"separator"},g.push(p)):_++,g.push(C);v()}else h.length>0&&(g=[{label:m("symbols","symbols ({0})",d.length),type:"separator"},...h]);return g})}compareByScore(e,t){if(typeof e.score!="number"&&typeof t.score=="number")return 1;if(typeof e.score=="number"&&typeof t.score!="number")return-1;if(typeof e.score=="number"&&typeof t.score=="number"){if(e.score>t.score)return-1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}compareByKindAndScore(e,t){const n=vL[e.kind]||_L,i=vL[t.kind]||_L,s=n.localeCompare(i);return s===0?this.compareByScore(e,t):s}getDocumentSymbols(e,t){return em(this,void 0,void 0,function*(){const n=yield this._outlineModelService.getOrCreate(e,t);return t.isCancellationRequested?[]:n.asListOfDocumentSymbols()})}},"AbstractGotoSymbolQuickAccessProvider");ko.PREFIX="@";ko.SCOPE_PREFIX=":";ko.PREFIX_BY_CATEGORY=`${ko.PREFIX}${ko.SCOPE_PREFIX}`;ko=ahe([mO(0,ue),mO(1,xS)],ko);const _L=m("property","properties ({0})"),vL={[5]:m("method","methods ({0})"),[11]:m("function","functions ({0})"),[8]:m("_constructor","constructors ({0})"),[12]:m("variable","variables ({0})"),[4]:m("class","classes ({0})"),[22]:m("struct","structs ({0})"),[23]:m("event","events ({0})"),[24]:m("operator","operators ({0})"),[10]:m("interface","interfaces ({0})"),[2]:m("namespace","namespaces ({0})"),[3]:m("package","packages ({0})"),[25]:m("typeParameter","type parameters ({0})"),[1]:m("modules","modules ({0})"),[6]:m("property","properties ({0})"),[9]:m("enum","enumerations ({0})"),[21]:m("enumMember","enumeration members ({0})"),[14]:m("string","strings ({0})"),[0]:m("file","files ({0})"),[17]:m("array","arrays ({0})"),[15]:m("number","numbers ({0})"),[16]:m("boolean","booleans ({0})"),[18]:m("object","objects ({0})"),[19]:m("key","keys ({0})"),[7]:m("field","fields ({0})"),[13]:m("constant","constants ({0})")};var lhe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},CL=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let LD=u(class extends ko{constructor(e,t,n){super(t,n),this.editorService=e,this.onDidActiveTextEditorControlChange=fe.None}get activeTextEditorControl(){return Gi(this.editorService.getFocusedCodeEditor())}},"StandaloneGotoSymbolQuickAccessProvider");LD=lhe([CL(0,dt),CL(1,ue),CL(2,xS)],LD);class xp extends de{constructor(){super({id:xp.ID,label:Hb.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:A.hasDocumentSymbolProvider,kbOpts:{kbExpr:A.focus,primary:3117,weight:100},contextMenuOpts:{group:"navigation",order:3}})}run(e){e.get(Pl).quickAccess.show(ko.PREFIX)}}u(xp,"GotoSymbolAction");xp.ID="editor.action.quickOutline";ie(xp);zt.as(_h.Quickaccess).registerQuickAccessProvider({ctor:LD,prefix:ko.PREFIX,helpEntries:[{description:Hb.quickOutlineActionLabel,prefix:ko.PREFIX,commandId:xp.ID},{description:Hb.quickOutlineByCategoryActionLabel,prefix:ko.PREFIX_BY_CATEGORY}]});function wL(o,e){return e&&(o.stack||o.stacktrace)?m("stackTrace.format","{0}: {1}",_O(o),bO(o.stack)||bO(o.stacktrace)):_O(o)}u(wL,"exceptionToErrorMessage");function bO(o){return Array.isArray(o)?o.join(`
`):o}u(bO,"stackToString");function _O(o){return typeof o.code=="string"&&typeof o.errno=="number"&&typeof o.syscall=="string"?m("nodeExceptionMessage","A system error occurred ({0})",o.message):o.message||m("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}u(_O,"detectSystemErrorMessage");function $j(o=null,e=!1){if(!o)return m("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(o)){const t=p_(o),n=$j(t[0],e);return t.length>1?m("error.moreErrors","{0} ({1} errors in total)",n,t.length):n}if(qi(o))return o;if(o.detail){const t=o.detail;if(t.error)return wL(t.error,e);if(t.exception)return wL(t.exception,e)}return o.stack?wL(o,e):o.message?o.message:m("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}u($j,"toErrorMessage");var GC=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})},Cg;(function(o){o[o.NO_ACTION=0]="NO_ACTION",o[o.CLOSE_PICKER=1]="CLOSE_PICKER",o[o.REFRESH_PICKER=2]="REFRESH_PICKER",o[o.REMOVE_ITEM=3]="REMOVE_ITEM"})(Cg||(Cg={}));function yL(o){const e=o;return Array.isArray(e.items)}u(yL,"isPicksWithActive");function che(o){const e=o;return!!e.picks&&e.additionalPicks instanceof Promise}u(che,"isFastAndSlowPicks");class Nv extends U{constructor(e,t){super(),this.prefix=e,this.options=t}provide(e,t){var n;const i=new J;e.canAcceptInBackground=!!(!((n=this.options)===null||n===void 0)&&n.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;let s;const r=i.add(new gi),a=u(()=>GC(this,void 0,void 0,function*(){const l=r.value=new J;s?.dispose(!0),e.busy=!1,s=new ti(t);const c=s.token,d=e.value.substr(this.prefix.length).trim(),h=this._getPicks(d,l,c),g=u((f,p)=>{var _;let v,C;if(yL(f)?(v=f.items,C=f.active):v=f,v.length===0){if(p)return!1;d.length>0&&(!((_=this.options)===null||_===void 0)&&_.noResultsPick)&&(v=[this.options.noResultsPick])}return e.items=v,C&&(e.activeItems=[C]),!0},"applyPicks");if(h!==null)if(che(h)){let f=!1,p=!1;yield Promise.all([(()=>GC(this,void 0,void 0,function*(){yield xc(Nv.FAST_PICKS_RACE_DELAY),!c.isCancellationRequested&&(p||(f=g(h.picks,!0)))}))(),(()=>GC(this,void 0,void 0,function*(){e.busy=!0;try{const _=yield h.additionalPicks;if(c.isCancellationRequested)return;let v,C;yL(h.picks)?(v=h.picks.items,C=h.picks.active):v=h.picks;let w,y;if(yL(_)?(w=_.items,y=_.active):w=_,w.length>0||!f){let S;if(!C&&!y){const E=e.activeItems[0];E&&v.indexOf(E)!==-1&&(S=E)}g({items:[...v,...w],active:C||y||S})}}finally{c.isCancellationRequested||(e.busy=!1),p=!0}}))()])}else if(!(h instanceof Promise))g(h);else{e.busy=!0;try{const f=yield h;if(c.isCancellationRequested)return;g(f)}finally{c.isCancellationRequested||(e.busy=!1)}}}),"updatePickerItems");return i.add(e.onDidChangeValue(()=>a())),a(),i.add(e.onDidAccept(l=>{const[c]=e.selectedItems;typeof c?.accept=="function"&&(l.inBackground||e.hide(),c.accept(e.keyMods,l))})),i.add(e.onDidTriggerItemButton(({button:l,item:c})=>GC(this,void 0,void 0,function*(){var d,h;if(typeof c.trigger=="function"){const g=(h=(d=c.buttons)===null||d===void 0?void 0:d.indexOf(l))!==null&&h!==void 0?h:-1;if(g>=0){const f=c.trigger(g,e.keyMods),p=typeof f=="number"?f:yield f;if(t.isCancellationRequested)return;switch(p){case Cg.NO_ACTION:break;case Cg.CLOSE_PICKER:e.hide();break;case Cg.REFRESH_PICKER:a();break;case Cg.REMOVE_ITEM:{const _=e.items.indexOf(c);if(_!==-1){const v=e.items.slice(),C=v.splice(_,1),w=e.activeItems.filter(S=>S!==C[0]),y=e.keepScrollPosition;e.keepScrollPosition=!0,e.items=v,w&&(e.activeItems=w),e.keepScrollPosition=y}break}}}}}))),i}}u(Nv,"PickerQuickAccessProvider");Nv.FAST_PICKS_RACE_DELAY=200;var qj=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Id=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},vO=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let g_=u(class W0 extends Nv{constructor(e,t,n,i,s,r){super(W0.PREFIX,e),this.instantiationService=t,this.keybindingService=n,this.commandService=i,this.telemetryService=s,this.dialogService=r,this.commandsHistory=this._register(this.instantiationService.createInstance(nh)),this.options=e}_getPicks(e,t,n){return vO(this,void 0,void 0,function*(){const i=yield this.getCommandPicks(t,n);if(n.isCancellationRequested)return[];const s=[];for(const c of i){const d=Gi(W0.WORD_FILTER(e,c.label)),h=c.commandAlias?Gi(W0.WORD_FILTER(e,c.commandAlias)):void 0;d||h?(c.highlights={label:d,detail:this.options.showAlias?h:void 0},s.push(c)):e===c.commandId&&s.push(c)}const r=new Map;for(const c of s){const d=r.get(c.label);d?(c.description=c.commandId,d.description=d.commandId):r.set(c.label,c)}s.sort((c,d)=>{const h=this.commandsHistory.peek(c.commandId),g=this.commandsHistory.peek(d.commandId);return h&&g?h>g?-1:1:h?-1:g?1:c.label.localeCompare(d.label)});const a=[];let l=!1;for(let c=0;c<s.length;c++){const d=s[c],h=this.keybindingService.lookupKeybinding(d.commandId),g=h?m("commandPickAriaLabelWithKeybinding","{0}, {1}",d.label,h.getAriaLabel()):d.label;c===0&&this.commandsHistory.peek(d.commandId)&&(a.push({type:"separator",label:m("recentlyUsed","recently used")}),l=!0),c!==0&&l&&!this.commandsHistory.peek(d.commandId)&&(a.push({type:"separator",label:m("morecCommands","other commands")}),l=!1),a.push(Object.assign(Object.assign({},d),{ariaLabel:g,detail:this.options.showAlias&&d.commandAlias!==d.label?d.commandAlias:void 0,keybinding:h,accept:()=>vO(this,void 0,void 0,function*(){this.commandsHistory.push(d.commandId),this.telemetryService.publicLog2("workbenchActionExecuted",{id:d.commandId,from:"quick open"});try{yield this.commandService.executeCommand(d.commandId)}catch(f){ca(f)||this.dialogService.show(Bt.Error,m("canNotRun","Command '{0}' resulted in an error ({1})",d.label,$j(f)))}})}))}return a})}},"AbstractCommandsQuickAccessProvider");g_.PREFIX=">";g_.WORD_FILTER=aI(Py,ite,S9);g_=qj([Id(1,Ne),Id(2,Cn),Id(3,hn),Id(4,Tr),Id(5,j_)],g_);let nh=u(class An extends U{constructor(e,t){super(),this.storageService=e,this.configurationService=t,this.configuredCommandsHistoryLength=0,this.updateConfiguration(),this.load(),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(()=>this.updateConfiguration()))}updateConfiguration(){this.configuredCommandsHistoryLength=An.getConfiguredCommandHistoryLength(this.configurationService),An.cache&&An.cache.limit!==this.configuredCommandsHistoryLength&&(An.cache.limit=this.configuredCommandsHistoryLength,An.saveState(this.storageService))}load(){const e=this.storageService.get(An.PREF_KEY_CACHE,0);let t;if(e)try{t=JSON.parse(e)}catch{}const n=An.cache=new Al(this.configuredCommandsHistoryLength,1);if(t){let i;t.usesLRU?i=t.entries:i=t.entries.sort((s,r)=>s.value-r.value),i.forEach(s=>n.set(s.key,s.value))}An.counter=this.storageService.getNumber(An.PREF_KEY_COUNTER,0,An.counter)}push(e){An.cache&&(An.cache.set(e,An.counter++),An.saveState(this.storageService))}peek(e){var t;return(t=An.cache)===null||t===void 0?void 0:t.peek(e)}static saveState(e){if(!An.cache)return;const t={usesLRU:!0,entries:[]};An.cache.forEach((n,i)=>t.entries.push({key:i,value:n})),e.store(An.PREF_KEY_CACHE,JSON.stringify(t),0,0),e.store(An.PREF_KEY_COUNTER,An.counter,0,0)}static getConfiguredCommandHistoryLength(e){var t,n;const s=(n=(t=e.getValue().workbench)===null||t===void 0?void 0:t.commandPalette)===null||n===void 0?void 0:n.history;return typeof s=="number"?s:An.DEFAULT_COMMANDS_HISTORY_LENGTH}},"CommandsHistory");nh.DEFAULT_COMMANDS_HISTORY_LENGTH=50;nh.PREF_KEY_CACHE="commandPalette.mru.cache";nh.PREF_KEY_COUNTER="commandPalette.mru.counter";nh.counter=1;nh=qj([Id(0,No),Id(1,rt)],nh);class Yj extends g_{constructor(e,t,n,i,s,r){super(e,t,n,i,s,r)}getCodeEditorCommandPicks(){const e=this.activeTextEditorControl;if(!e)return[];const t=[];for(const n of e.getSupportedActions())t.push({commandId:n.id,commandAlias:n.alias,label:gI(n.label)||n.id});return t}}u(Yj,"AbstractEditorCommandsQuickAccessProvider");var dhe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},$h=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},uhe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let f_=u(class extends Yj{constructor(e,t,n,i,s,r){super({showAlias:!1},e,n,i,s,r),this.codeEditorService=t}get activeTextEditorControl(){return Gi(this.codeEditorService.getFocusedCodeEditor())}getCommandPicks(){return uhe(this,void 0,void 0,function*(){return this.getCodeEditorCommandPicks()})}},"StandaloneCommandsQuickAccessProvider");f_=dhe([$h(0,Ne),$h(1,dt),$h(2,Cn),$h(3,hn),$h(4,Tr),$h(5,j_)],f_);class Ep extends de{constructor(){super({id:Ep.ID,label:R1.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:59,weight:100},contextMenuOpts:{group:"z_commands",order:1}})}run(e){e.get(Pl).quickAccess.show(f_.PREFIX)}}u(Ep,"GotoLineAction");Ep.ID="editor.action.quickCommand";ie(Ep);zt.as(_h.Quickaccess).registerQuickAccessProvider({ctor:f_,prefix:f_.PREFIX,helpEntries:[{description:R1.quickCommandHelp,commandId:Ep.ID}]});var hhe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},qh=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let xD=u(class extends Uc{constructor(e,t,n,i,s,r,a){super(!0,e,t,n,i,s,r,a)}},"StandaloneReferencesController");xD=hhe([qh(1,De),qh(2,dt),qh(3,gn),qh(4,Ne),qh(5,No),qh(6,rt)],xD);it(Uc.ID,xD);class Xj extends de{constructor(){super({id:"editor.action.toggleHighContrast",label:QE.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0}),this._originalThemeName=null}run(e,t){const n=e.get(Ps),i=n.getColorTheme();ui(i.type)?(n.setTheme(this._originalThemeName||(vb(i.type)?Ug:Ua)),this._originalThemeName=null):(n.setTheme(vb(i.type)?ru:au),this._originalThemeName=i.themeName)}}u(Xj,"ToggleHighContrast");ie(Xj);function ghe(){return new Worker("/assets/editor.worker-a3dc7e67.js")}u(ghe,"WorkerWrapper$1");function fhe(){return new Worker("/assets/ts.worker-d02bfd62.js")}u(fhe,"WorkerWrapper");function phe(){const o=globalThis;if(o.MonacoEnvironment)return;o.MonacoEnvironment={getWorker(t,n){return n==="typescript"||n==="javascript"?new fhe:new ghe}},tg.typescript.typescriptDefaults.setCompilerOptions({strict:!0,target:tg.typescript.ScriptTarget.ESNext,module:tg.typescript.ModuleKind.ESNext,moduleResolution:tg.typescript.ModuleResolutionKind.NodeJs,forceConsistentCasingInFileNames:!0,allowSyntheticDefaultImports:!0,esModuleInterop:!0,jsx:tg.typescript.JsxEmit.Preserve,jsxImportSource:"solid-js",allowNonTsExtensions:!0});for(const t in{"jsx-runtime.d.ts":`export * from "./types/jsx";
`,"package.json":`{
  "name": "solid-js",
  "description": "A declarative JavaScript library for building user interfaces.",
  "version": "1.6.7",
  "author": "Ryan Carniato",
  "license": "MIT",
  "homepage": "https://solidjs.com",
  "repository": {
    "type": "git",
    "url": "https://github.com/solidjs/solid"
  },
  "main": "./dist/server.cjs",
  "module": "./dist/server.js",
  "browser": {
    "./dist/server.cjs": "./dist/solid.cjs",
    "./dist/server.js": "./dist/solid.js"
  },
  "unpkg": "./dist/solid.cjs",
  "types": "types/index.d.ts",
  "sideEffects": false,
  "type": "module",
  "files": [
    "dist",
    "store/dist",
    "store/types",
    "store/package.json",
    "web/dist",
    "web/types",
    "web/package.json",
    "h/dist",
    "h/types",
    "h/package.json",
    "h/jsx-runtime/dist",
    "h/jsx-runtime/types",
    "h/jsx-runtime/package.json",
    "h/jsx-dev-runtime/package.json",
    "html/dist",
    "html/types",
    "html/package.json",
    "universal/dist",
    "universal/types",
    "universal/package.json",
    "types",
    "jsx-runtime.d.ts"
  ],
  "exports": {
    ".": {
      "worker": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "browser": {
        "development": {
          "import": {
            "types": "./types/index.d.ts",
            "default": "./dist/dev.js"
          },
          "require": "./dist/dev.cjs"
        },
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/solid.js"
        },
        "require": "./dist/solid.cjs"
      },
      "deno": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "node": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "development": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/dev.js"
        },
        "require": "./dist/dev.cjs"
      },
      "import": {
        "types": "./types/index.d.ts",
        "default": "./dist/solid.js"
      },
      "require": "./dist/solid.cjs"
    },
    "./dist/*": "./dist/*",
    "./jsx-runtime": {
      "types": "./types/jsx.d.ts",
      "default": "./dist/solid.js"
    },
    "./jsx-dev-runtime": {
      "types": "./types/jsx.d.ts",
      "default": "./dist/solid.js"
    },
    "./store": {
      "worker": {
        "import": {
          "types": "./store/types/index.d.ts",
          "default": "./store/dist/server.js"
        },
        "require": "./store/dist/server.cjs"
      },
      "browser": {
        "development": {
          "import": {
            "types": "./store/types/index.d.ts",
            "default": "./store/dist/dev.js"
          },
          "require": "./store/dist/dev.cjs"
        },
        "import": {
          "types": "./store/types/index.d.ts",
          "default": "./store/dist/store.js"
        },
        "require": "./store/dist/store.cjs"
      },
      "deno": {
        "import": {
          "types": "./store/types/index.d.ts",
          "default": "./store/dist/server.js"
        },
        "require": "./store/dist/server.cjs"
      },
      "node": {
        "import": {
          "types": "./store/types/index.d.ts",
          "default": "./store/dist/server.js"
        },
        "require": "./store/dist/server.cjs"
      },
      "development": {
        "import": {
          "types": "./store/types/index.d.ts",
          "default": "./store/dist/dev.js"
        },
        "require": "./store/dist/dev.cjs"
      },
      "import": {
        "types": "./store/types/index.d.ts",
        "default": "./store/dist/store.js"
      },
      "require": "./store/dist/store.cjs"
    },
    "./store/dist/*": "./store/dist/*",
    "./web": {
      "worker": {
        "import": {
          "types": "./web/types/index.d.ts",
          "default": "./web/dist/server.js"
        },
        "require": "./web/dist/server.cjs"
      },
      "browser": {
        "development": {
          "import": {
            "types": "./web/types/index.d.ts",
            "default": "./web/dist/dev.js"
          },
          "require": "./web/dist/dev.cjs"
        },
        "import": {
          "types": "./web/types/index.d.ts",
          "default": "./web/dist/web.js"
        },
        "require": "./web/dist/web.cjs"
      },
      "deno": {
        "import": {
          "types": "./web/types/index.d.ts",
          "default": "./web/dist/server.js"
        },
        "require": "./web/dist/server.cjs"
      },
      "node": {
        "import": {
          "types": "./web/types/index.d.ts",
          "default": "./web/dist/server.js"
        },
        "require": "./web/dist/server.cjs"
      },
      "development": {
        "import": {
          "types": "./web/types/index.d.ts",
          "default": "./web/dist/dev.js"
        },
        "require": "./web/dist/dev.cjs"
      },
      "import": {
        "types": "./web/types/index.d.ts",
        "default": "./web/dist/web.js"
      },
      "require": "./web/dist/web.cjs"
    },
    "./web/dist/*": "./web/dist/*",
    "./universal": {
      "development": {
        "import": {
          "types": "./universal/types/index.d.ts",
          "default": "./universal/dist/dev.js"
        },
        "require": "./universal/dist/dev.cjs"
      },
      "import": {
        "types": "./universal/types/index.d.ts",
        "default": "./universal/dist/universal.js"
      },
      "require": "./universal/dist/universal.cjs"
    },
    "./universal/dist/*": "./universal/dist/*",
    "./h": {
      "import": {
        "types": "./h/types/index.d.ts",
        "default": "./h/dist/h.js"
      },
      "require": "./h/dist/h.cjs"
    },
    "./h/jsx-runtime": {
      "import": {
        "types": "./h/jsx-runtime/types/index.d.ts",
        "default": "./h/jsx-runtime/dist/jsx.js"
      },
      "require": "./h/jsx-runtime/dist/jsx.cjs"
    },
    "./h/jsx-dev-runtime": {
      "import": {
        "types": "./h/jsx-runtime/types/index.d.ts",
        "default": "./h/jsx-runtime/dist/jsx.js"
      },
      "require": "./h/jsx-runtime/dist/jsx.cjs"
    },
    "./h/dist/*": "./h/dist/*",
    "./html": {
      "import": {
        "types": "./html/types/index.d.ts",
        "default": "./html/dist/html.js"
      },
      "require": "./html/dist/html.cjs"
    },
    "./html/dist/*": "./html/dist/*"
  },
  "keywords": [
    "solid",
    "solidjs",
    "ui",
    "reactive",
    "components",
    "compiler",
    "performance"
  ],
  "dependencies": {
    "csstype": "^3.1.0"
  },
  "scripts": {
    "build": "npm-run-all -nl build:*",
    "build:clean": "rimraf dist/ coverage/ store/dist/ web/dist/ h/dist/ h/jsx-runtime/dist html/dist/",
    "build:js": "rollup -c",
    "types": "npm-run-all -nl types:*",
    "types:clean": "rimraf types/ store/types/ web/types/ h/types/ h/jsx-runtime/types html/types/",
    "types:copy": "ncp ../../node_modules/dom-expressions/src/jsx.d.ts ./src/jsx.d.ts && ncp ../../node_modules/dom-expressions/src/jsx-h.d.ts ./h/jsx-runtime/src/jsx.d.ts",
    "types:src": "tsc --project ./tsconfig.build.json && ncp ../../node_modules/dom-expressions/src/jsx.d.ts ./types/jsx.d.ts",
    "types:web": "tsc --project ./web/tsconfig.build.json",
    "types:copy-web": "ncp ../../node_modules/dom-expressions/src/client.d.ts ./web/types/client.d.ts && ncp ../../node_modules/dom-expressions/src/server.d.ts ./web/types/server.d.ts",
    "types:store": "tsc --project ./store/tsconfig.build.json",
    "types:html": "tsc --project ./html/tsconfig.json && ncp ../../node_modules/lit-dom-expressions/types/index.d.ts ./html/types/lit.d.ts",
    "types:h": "tsc --project ./h/tsconfig.json && ncp ../../node_modules/hyper-dom-expressions/types/index.d.ts ./h/types/hyperscript.d.ts",
    "types:jsx": "rimraf ./h/jsx-runtime/types && tsc --project ./h/jsx-runtime/tsconfig.json && ncp ../../node_modules/dom-expressions/src/jsx-h.d.ts ./h/jsx-runtime/types/jsx.d.ts",
    "types:universal": "tsc --project ./universal/tsconfig.json && ncp ../../node_modules/dom-expressions/src/universal.d.ts ./universal/types/universal.d.ts",
    "bench": "node --allow-natives-syntax bench/bench.cjs",
    "link": "symlink-dir . node_modules/solid-js",
    "test": "jest",
    "coverage": "jest --coverage",
    "test-types": "tsc --project tsconfig.test.json"
  }
}`,"h/package.json":`{
  "name": "solid-js/h",
  "main": "./dist/h.cjs",
  "module": "./dist/h.js",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false
}
`,"html/package.json":`{
  "name": "solid-js/html",
  "main": "./dist/html.cjs",
  "module": "./dist/html.js",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false
}
`,"store/package.json":`{
  "name": "solid-js/store",
  "main": "./dist/server.cjs",
  "module": "./dist/server.js",
  "browser": {
    "./dist/server.cjs": "./dist/store.cjs",
    "./dist/server.js": "./dist/store.js"
  },
  "unpkg": "./dist/store.cjs",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false,
  "exports": {
    ".": {
      "worker": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "browser": {
        "development": {
          "import": {
            "types": "./types/index.d.ts",
            "default": "./dist/dev.js"
          },
          "require": "./dist/dev.cjs"
        },
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/store.js"
        },
        "require": "./dist/store.cjs"
      },
      "deno": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "node": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "development": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/dev.js"
        },
        "require": "./dist/dev.cjs"
      },
      "import": {
        "types": "./types/index.d.ts",
        "default": "./dist/store.js"
      },
      "require": "./dist/store.cjs"
    }
  }
}
`,"types/index.d.ts":`export { $DEVCOMP, $PROXY, $TRACK, batch, children, createComputed, createContext, createDeferred, createEffect, createMemo, createReaction, createRenderEffect, createResource, createRoot, createSelector, createSignal, enableExternalSource, enableScheduling, equalFn, getListener, getOwner, on, onCleanup, onError, onMount, runWithOwner, startTransition, untrack, useContext, useTransition } from "./reactive/signal.js";
export type { Accessor, AccessorArray, ChildrenReturn, Context, EffectFunction, InitializedResource, InitializedResourceOptions, InitializedResourceReturn, MemoOptions, NoInfer, OnEffectFunction, Owner, Resource, ResourceActions, ResourceFetcher, ResourceFetcherInfo, ResourceOptions, ResourceReturn, ResourceSource, ReturnTypes, Setter, Signal, SignalOptions } from "./reactive/signal.js";
export * from "./reactive/observable.js";
export * from "./reactive/scheduler.js";
export * from "./reactive/array.js";
export * from "./render/index.js";
import type { JSX } from "./jsx.js";
declare type JSXElement = JSX.Element;
export type { JSXElement, JSX };
import { hashValue, registerGraph, serializeGraph, writeSignal } from "./reactive/signal.js";
declare let DEV: {
    writeSignal: typeof writeSignal;
    serializeGraph: typeof serializeGraph;
    registerGraph: typeof registerGraph;
    hashValue: typeof hashValue;
};
export { DEV };
declare global {
    var Solid$$: boolean;
}
`,"types/jsx.d.ts":`import * as csstype from 'csstype';

/**
 * Based on JSX types for Surplus and Inferno and adapted for \`dom-expressions\`.
 *
 * https://github.com/adamhaile/surplus/blob/master/index.d.ts
 * https://github.com/infernojs/inferno/blob/master/packages/inferno/src/core/types.ts
 */
type DOMElement = Element;

export namespace JSX {
  type Element =
    | Node
    | ArrayElement
    | FunctionElement
    | (string & {})
    | number
    | boolean
    | null
    | undefined;
  interface ArrayElement extends Array<Element> {}
  interface FunctionElement {
    (): Element;
  }
  interface ElementClass {
    // empty, libs can define requirements downstream
  }
  interface ElementAttributesProperty {
    // empty, libs can define requirements downstream
  }
  interface ElementChildrenAttribute {
    children: {};
  }
  interface EventHandler<T, E extends Event> {
    (
      e: E & {
        currentTarget: T;
        target: DOMElement;
      }
    ): void;
  }
  interface BoundEventHandler<T, E extends Event> {
    0: (
      data: any,
      e: E & {
        currentTarget: T;
        target: DOMElement;
      }
    ) => void;
    1: any;
  }
  type EventHandlerUnion<T, E extends Event> = EventHandler<T, E> | BoundEventHandler<T, E>;
  interface IntrinsicAttributes {
    ref?: unknown | ((e: unknown) => void);
  }
  interface CustomAttributes<T> {
    ref?: T | ((el: T) => void);
    classList?: {
      [k: string]: boolean | undefined;
    };
    $ServerOnly?: boolean;
  }
  type Accessor<T> = () => T
  interface Directives {}
  interface DirectiveFunctions {
    [x: string]: (el: Element, accessor: Accessor<any>) => void;
  }
  interface ExplicitProperties {}
  interface ExplicitAttributes {}
  interface CustomEvents {}
  interface CustomCaptureEvents {}
  type DirectiveAttributes = {
    [Key in keyof Directives as \`use:\${Key}\`]?: Directives[Key];
  };
  type DirectiveFunctionAttributes<T> = {
    [K in keyof DirectiveFunctions as string extends K ? never : \`use:\${K}\`]?: DirectiveFunctions[K] extends (
      el: infer E, // will be unknown if not provided
      ...rest: infer R // use rest so that we can check whether it's provided or not
    ) => void
      ? T extends E // everything extends unknown if E is unknown
        ? R extends [infer A] // check if has accessor provided
          ? A extends Accessor<infer V>
            ? V // it's an accessor
            : never // it isn't, type error
          : true // no accessor provided
        : never // T is the wrong element
      : never; // it isn't a function
  };
  type PropAttributes = {
    [Key in keyof ExplicitProperties as \`prop:\${Key}\`]?: ExplicitProperties[Key];
  };
  type AttrAttributes = {
    [Key in keyof ExplicitAttributes as \`attr:\${Key}\`]?: ExplicitAttributes[Key];
  };
  type OnAttributes<T> = {
    [Key in keyof CustomEvents as \`on:\${Key}\`]?: EventHandler<T, CustomEvents[Key]>;
  }
  type OnCaptureAttributes<T> = {
    [Key in keyof CustomCaptureEvents as \`oncapture:\${Key}\`]?: EventHandler<T, CustomCaptureEvents[Key]>;
  }
  interface DOMAttributes<T> extends CustomAttributes<T>, DirectiveAttributes, DirectiveFunctionAttributes<T>,
                                     PropAttributes, AttrAttributes, OnAttributes<T>, OnCaptureAttributes<T>,
                                     CustomEventHandlersCamelCase<T>, CustomEventHandlersLowerCase<T> {
    children?: Element;
    innerHTML?: string;
    innerText?: string | number;
    textContent?: string | number;
    // camel case events
    onCopy?: EventHandlerUnion<T, ClipboardEvent>;
    onCut?: EventHandlerUnion<T, ClipboardEvent>;
    onPaste?: EventHandlerUnion<T, ClipboardEvent>;
    onCompositionEnd?: EventHandlerUnion<T, CompositionEvent>;
    onCompositionStart?: EventHandlerUnion<T, CompositionEvent>;
    onCompositionUpdate?: EventHandlerUnion<T, CompositionEvent>;
    onFocusOut?: EventHandlerUnion<T, FocusEvent>;
    onFocusIn?: EventHandlerUnion<T, FocusEvent>;
    onEncrypted?: EventHandlerUnion<T, Event>;
    onDragExit?: EventHandlerUnion<T, DragEvent>;
    // lower case events
    oncopy?: EventHandlerUnion<T, ClipboardEvent>;
    oncut?: EventHandlerUnion<T, ClipboardEvent>;
    onpaste?: EventHandlerUnion<T, ClipboardEvent>;
    oncompositionend?: EventHandlerUnion<T, CompositionEvent>;
    oncompositionstart?: EventHandlerUnion<T, CompositionEvent>;
    oncompositionupdate?: EventHandlerUnion<T, CompositionEvent>;
    onfocusout?: EventHandlerUnion<T, FocusEvent>;
    onfocusin?: EventHandlerUnion<T, FocusEvent>;
    onencrypted?: EventHandlerUnion<T, Event>;
    ondragexit?: EventHandlerUnion<T, DragEvent>;
  }
  interface CustomEventHandlersCamelCase<T> {
    onAbort?: EventHandlerUnion<T, Event>;
    onAnimationEnd?: EventHandlerUnion<T, AnimationEvent>;
    onAnimationIteration?: EventHandlerUnion<T, AnimationEvent>;
    onAnimationStart?: EventHandlerUnion<T, AnimationEvent>;
    onAuxClick?: EventHandlerUnion<T, MouseEvent>;
    onBeforeInput?: EventHandlerUnion<T, InputEvent>;
    onBlur?: EventHandlerUnion<T, FocusEvent>;
    onCanPlay?: EventHandlerUnion<T, Event>;
    onCanPlayThrough?: EventHandlerUnion<T, Event>;
    onChange?: EventHandlerUnion<T, Event>;
    onClick?: EventHandlerUnion<T, MouseEvent>;
    onContextMenu?: EventHandlerUnion<T, MouseEvent>;
    onDblClick?: EventHandlerUnion<T, MouseEvent>;
    onDrag?: EventHandlerUnion<T, DragEvent>;
    onDragEnd?: EventHandlerUnion<T, DragEvent>;
    onDragEnter?: EventHandlerUnion<T, DragEvent>;
    onDragLeave?: EventHandlerUnion<T, DragEvent>;
    onDragOver?: EventHandlerUnion<T, DragEvent>;
    onDragStart?: EventHandlerUnion<T, DragEvent>;
    onDrop?: EventHandlerUnion<T, DragEvent>;
    onDurationChange?: EventHandlerUnion<T, Event>;
    onEmptied?: EventHandlerUnion<T, Event>;
    onEnded?: EventHandlerUnion<T, Event>;
    onError?: EventHandlerUnion<T, Event>;
    onFocus?: EventHandlerUnion<T, FocusEvent>;
    onGotPointerCapture?: EventHandlerUnion<T, PointerEvent>;
    onInput?: EventHandlerUnion<T, InputEvent>;
    onInvalid?: EventHandlerUnion<T, Event>;
    onKeyDown?: EventHandlerUnion<T, KeyboardEvent>;
    onKeyPress?: EventHandlerUnion<T, KeyboardEvent>;
    onKeyUp?: EventHandlerUnion<T, KeyboardEvent>;
    onLoad?: EventHandlerUnion<T, Event>;
    onLoadedData?: EventHandlerUnion<T, Event>;
    onLoadedMetadata?: EventHandlerUnion<T, Event>;
    onLoadStart?: EventHandlerUnion<T, Event>;
    onLostPointerCapture?: EventHandlerUnion<T, PointerEvent>;
    onMouseDown?: EventHandlerUnion<T, MouseEvent>;
    onMouseEnter?: EventHandlerUnion<T, MouseEvent>;
    onMouseLeave?: EventHandlerUnion<T, MouseEvent>;
    onMouseMove?: EventHandlerUnion<T, MouseEvent>;
    onMouseOut?: EventHandlerUnion<T, MouseEvent>;
    onMouseOver?: EventHandlerUnion<T, MouseEvent>;
    onMouseUp?: EventHandlerUnion<T, MouseEvent>;
    onPause?: EventHandlerUnion<T, Event>;
    onPlay?: EventHandlerUnion<T, Event>;
    onPlaying?: EventHandlerUnion<T, Event>;
    onPointerCancel?: EventHandlerUnion<T, PointerEvent>;
    onPointerDown?: EventHandlerUnion<T, PointerEvent>;
    onPointerEnter?: EventHandlerUnion<T, PointerEvent>;
    onPointerLeave?: EventHandlerUnion<T, PointerEvent>;
    onPointerMove?: EventHandlerUnion<T, PointerEvent>;
    onPointerOut?: EventHandlerUnion<T, PointerEvent>;
    onPointerOver?: EventHandlerUnion<T, PointerEvent>;
    onPointerUp?: EventHandlerUnion<T, PointerEvent>;
    onProgress?: EventHandlerUnion<T, Event>;
    onRateChange?: EventHandlerUnion<T, Event>;
    onReset?: EventHandlerUnion<T, Event>;
    onScroll?: EventHandlerUnion<T, UIEvent>;
    onSeeked?: EventHandlerUnion<T, Event>;
    onSeeking?: EventHandlerUnion<T, Event>;
    onSelect?: EventHandlerUnion<T, UIEvent>;
    onStalled?: EventHandlerUnion<T, Event>;
    onSubmit?: EventHandlerUnion<
      T,
      Event & {
        submitter: HTMLElement;
      }
    >;
    onSuspend?: EventHandlerUnion<T, Event>;
    onTimeUpdate?: EventHandlerUnion<T, Event>;
    onTouchCancel?: EventHandlerUnion<T, TouchEvent>;
    onTouchEnd?: EventHandlerUnion<T, TouchEvent>;
    onTouchMove?: EventHandlerUnion<T, TouchEvent>;
    onTouchStart?: EventHandlerUnion<T, TouchEvent>;
    onTransitionEnd?: EventHandlerUnion<T, TransitionEvent>;
    onVolumeChange?: EventHandlerUnion<T, Event>;
    onWaiting?: EventHandlerUnion<T, Event>;
    onWheel?: EventHandlerUnion<T, WheelEvent>;
  }
  /**
   * @type {GlobalEventHandlers}
   */
  interface CustomEventHandlersLowerCase<T> {
    onabort?: EventHandlerUnion<T, Event>;
    onanimationend?: EventHandlerUnion<T, AnimationEvent>;
    onanimationiteration?: EventHandlerUnion<T, AnimationEvent>;
    onanimationstart?: EventHandlerUnion<T, AnimationEvent>;
    onauxclick?: EventHandlerUnion<T, MouseEvent>;
    onbeforeinput?: EventHandlerUnion<T, InputEvent>;
    onblur?: EventHandlerUnion<T, FocusEvent>;
    oncanplay?: EventHandlerUnion<T, Event>;
    oncanplaythrough?: EventHandlerUnion<T, Event>;
    onchange?: EventHandlerUnion<T, Event>;
    onclick?: EventHandlerUnion<T, MouseEvent>;
    oncontextmenu?: EventHandlerUnion<T, MouseEvent>;
    ondblclick?: EventHandlerUnion<T, MouseEvent>;
    ondrag?: EventHandlerUnion<T, DragEvent>;
    ondragend?: EventHandlerUnion<T, DragEvent>;
    ondragenter?: EventHandlerUnion<T, DragEvent>;
    ondragleave?: EventHandlerUnion<T, DragEvent>;
    ondragover?: EventHandlerUnion<T, DragEvent>;
    ondragstart?: EventHandlerUnion<T, DragEvent>;
    ondrop?: EventHandlerUnion<T, DragEvent>;
    ondurationchange?: EventHandlerUnion<T, Event>;
    onemptied?: EventHandlerUnion<T, Event>;
    onended?: EventHandlerUnion<T, Event>;
    onerror?: EventHandlerUnion<T, Event>;
    onfocus?: EventHandlerUnion<T, FocusEvent>;
    ongotpointercapture?: EventHandlerUnion<T, PointerEvent>;
    oninput?: EventHandlerUnion<T, InputEvent>;
    oninvalid?: EventHandlerUnion<T, Event>;
    onkeydown?: EventHandlerUnion<T, KeyboardEvent>;
    onkeypress?: EventHandlerUnion<T, KeyboardEvent>;
    onkeyup?: EventHandlerUnion<T, KeyboardEvent>;
    onload?: EventHandlerUnion<T, Event>;
    onloadeddata?: EventHandlerUnion<T, Event>;
    onloadedmetadata?: EventHandlerUnion<T, Event>;
    onloadstart?: EventHandlerUnion<T, Event>;
    onlostpointercapture?: EventHandlerUnion<T, PointerEvent>;
    onmousedown?: EventHandlerUnion<T, MouseEvent>;
    onmouseenter?: EventHandlerUnion<T, MouseEvent>;
    onmouseleave?: EventHandlerUnion<T, MouseEvent>;
    onmousemove?: EventHandlerUnion<T, MouseEvent>;
    onmouseout?: EventHandlerUnion<T, MouseEvent>;
    onmouseover?: EventHandlerUnion<T, MouseEvent>;
    onmouseup?: EventHandlerUnion<T, MouseEvent>;
    onpause?: EventHandlerUnion<T, Event>;
    onplay?: EventHandlerUnion<T, Event>;
    onplaying?: EventHandlerUnion<T, Event>;
    onpointercancel?: EventHandlerUnion<T, PointerEvent>;
    onpointerdown?: EventHandlerUnion<T, PointerEvent>;
    onpointerenter?: EventHandlerUnion<T, PointerEvent>;
    onpointerleave?: EventHandlerUnion<T, PointerEvent>;
    onpointermove?: EventHandlerUnion<T, PointerEvent>;
    onpointerout?: EventHandlerUnion<T, PointerEvent>;
    onpointerover?: EventHandlerUnion<T, PointerEvent>;
    onpointerup?: EventHandlerUnion<T, PointerEvent>;
    onprogress?: EventHandlerUnion<T, Event>;
    onratechange?: EventHandlerUnion<T, Event>;
    onreset?: EventHandlerUnion<T, Event>;
    onscroll?: EventHandlerUnion<T, UIEvent>;
    onseeked?: EventHandlerUnion<T, Event>;
    onseeking?: EventHandlerUnion<T, Event>;
    onselect?: EventHandlerUnion<T, UIEvent>;
    onstalled?: EventHandlerUnion<T, Event>;
    onsubmit?: EventHandlerUnion<
      T,
      Event & {
        submitter: HTMLElement;
      }
    >;
    onsuspend?: EventHandlerUnion<T, Event>;
    ontimeupdate?: EventHandlerUnion<T, Event>;
    ontouchcancel?: EventHandlerUnion<T, TouchEvent>;
    ontouchend?: EventHandlerUnion<T, TouchEvent>;
    ontouchmove?: EventHandlerUnion<T, TouchEvent>;
    ontouchstart?: EventHandlerUnion<T, TouchEvent>;
    ontransitionend?: EventHandlerUnion<T, TransitionEvent>;
    onvolumechange?: EventHandlerUnion<T, Event>;
    onwaiting?: EventHandlerUnion<T, Event>;
    onwheel?: EventHandlerUnion<T, WheelEvent>;
  }

  interface CSSProperties extends csstype.PropertiesHyphen {
    // Override
    [key: \`-\${string}\`]: string | number | undefined
  }

  type HTMLAutocapitalize = "off" | "none" | "on" | "sentences" | "words" | "characters";
  type HTMLDir = "ltr" | "rtl" | "auto";
  type HTMLFormEncType = "application/x-www-form-urlencoded" | "multipart/form-data" | "text/plain";
  type HTMLFormMethod = "post" | "get" | "dialog";
  type HTMLCrossorigin = "anonymous" | "use-credentials" | "";
  type HTMLReferrerPolicy =
    | "no-referrer"
    | "no-referrer-when-downgrade"
    | "origin"
    | "origin-when-cross-origin"
    | "same-origin"
    | "strict-origin"
    | "strict-origin-when-cross-origin"
    | "unsafe-url";
  type HTMLIframeSandbox =
    | "allow-downloads-without-user-activation"
    | "allow-downloads"
    | "allow-forms"
    | "allow-modals"
    | "allow-orientation-lock"
    | "allow-pointer-lock"
    | "allow-popups"
    | "allow-popups-to-escape-sandbox"
    | "allow-presentation"
    | "allow-same-origin"
    | "allow-scripts"
    | "allow-storage-access-by-user-activation"
    | "allow-top-navigation"
    | "allow-top-navigation-by-user-activation";
  type HTMLLinkAs =
    | "audio"
    | "document"
    | "embed"
    | "fetch"
    | "font"
    | "image"
    | "object"
    | "script"
    | "style"
    | "track"
    | "video"
    | "worker";

  // All the WAI-ARIA 1.1 attributes from https://www.w3.org/TR/wai-aria-1.1/
  interface AriaAttributes {
    /** Identifies the currently active element when DOM focus is on a composite widget, textbox, group, or application. */
    "aria-activedescendant"?: string;
    /** Indicates whether assistive technologies will present all, or only parts of, the changed region based on the change notifications defined by the aria-relevant attribute. */
    "aria-atomic"?: boolean | "false" | "true";
    /**
     * Indicates whether inputting text could trigger display of one or more predictions of the user's intended value for an input and specifies how predictions would be
     * presented if they are made.
     */
    "aria-autocomplete"?: "none" | "inline" | "list" | "both";
    /** Indicates an element is being modified and that assistive technologies MAY want to wait until the modifications are complete before exposing them to the user. */
    "aria-busy"?: boolean | "false" | "true";
    /**
     * Indicates the current "checked" state of checkboxes, radio buttons, and other widgets.
     * @see aria-pressed @see aria-selected.
     */
    "aria-checked"?: boolean | "false" | "mixed" | "true";
    /**
     * Defines the total number of columns in a table, grid, or treegrid.
     * @see aria-colindex.
     */
    "aria-colcount"?: number | string;
    /**
     * Defines an element's column index or position with respect to the total number of columns within a table, grid, or treegrid.
     * @see aria-colcount @see aria-colspan.
     */
    "aria-colindex"?: number | string;
    /**
     * Defines the number of columns spanned by a cell or gridcell within a table, grid, or treegrid.
     * @see aria-colindex @see aria-rowspan.
     */
    "aria-colspan"?: number | string;
    /**
     * Identifies the element (or elements) whose contents or presence are controlled by the current element.
     * @see aria-owns.
     */
    "aria-controls"?: string;
    /** Indicates the element that represents the current item within a container or set of related elements. */
    "aria-current"?: boolean | "false" | "true" | "page" | "step" | "location" | "date" | "time";
    /**
     * Identifies the element (or elements) that describes the object.
     * @see aria-labelledby
     */
    "aria-describedby"?: string;
    /**
     * Identifies the element that provides a detailed, extended description for the object.
     * @see aria-describedby.
     */
    "aria-details"?: string;
    /**
     * Indicates that the element is perceivable but disabled, so it is not editable or otherwise operable.
     * @see aria-hidden @see aria-readonly.
     */
    "aria-disabled"?: boolean | "false" | "true";
    /**
     * Indicates what functions can be performed when a dragged object is released on the drop target.
     * @deprecated in ARIA 1.1
     */
    "aria-dropeffect"?: "none" | "copy" | "execute" | "link" | "move" | "popup";
    /**
     * Identifies the element that provides an error message for the object.
     * @see aria-invalid @see aria-describedby.
     */
    "aria-errormessage"?: string;
    /** Indicates whether the element, or another grouping element it controls, is currently expanded or collapsed. */
    "aria-expanded"?: boolean | "false" | "true";
    /**
     * Identifies the next element (or elements) in an alternate reading order of content which, at the user's discretion,
     * allows assistive technology to override the general default of reading in document source order.
     */
    "aria-flowto"?: string;
    /**
     * Indicates an element's "grabbed" state in a drag-and-drop operation.
     * @deprecated in ARIA 1.1
     */
    "aria-grabbed"?: boolean | "false" | "true";
    /** Indicates the availability and type of interactive popup element, such as menu or dialog, that can be triggered by an element. */
    "aria-haspopup"?: boolean | "false" | "true" | "menu" | "listbox" | "tree" | "grid" | "dialog";
    /**
     * Indicates whether the element is exposed to an accessibility API.
     * @see aria-disabled.
     */
    "aria-hidden"?: boolean | "false" | "true";
    /**
     * Indicates the entered value does not conform to the format expected by the application.
     * @see aria-errormessage.
     */
    "aria-invalid"?: boolean | "false" | "true" | "grammar" | "spelling";
    /** Indicates keyboard shortcuts that an author has implemented to activate or give focus to an element. */
    "aria-keyshortcuts"?: string;
    /**
     * Defines a string value that labels the current element.
     * @see aria-labelledby.
     */
    "aria-label"?: string;
    /**
     * Identifies the element (or elements) that labels the current element.
     * @see aria-describedby.
     */
    "aria-labelledby"?: string;
    /** Defines the hierarchical level of an element within a structure. */
    "aria-level"?: number | string;
    /** Indicates that an element will be updated, and describes the types of updates the user agents, assistive technologies, and user can expect from the live region. */
    "aria-live"?: "off" | "assertive" | "polite";
    /** Indicates whether an element is modal when displayed. */
    "aria-modal"?: boolean | "false" | "true";
    /** Indicates whether a text box accepts multiple lines of input or only a single line. */
    "aria-multiline"?: boolean | "false" | "true";
    /** Indicates that the user may select more than one item from the current selectable descendants. */
    "aria-multiselectable"?: boolean | "false" | "true";
    /** Indicates whether the element's orientation is horizontal, vertical, or unknown/ambiguous. */
    "aria-orientation"?: "horizontal" | "vertical";
    /**
     * Identifies an element (or elements) in order to define a visual, functional, or contextual parent/child relationship
     * between DOM elements where the DOM hierarchy cannot be used to represent the relationship.
     * @see aria-controls.
     */
    "aria-owns"?: string;
    /**
     * Defines a short hint (a word or short phrase) intended to aid the user with data entry when the control has no value.
     * A hint could be a sample value or a brief description of the expected format.
     */
    "aria-placeholder"?: string;
    /**
     * Defines an element's number or position in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM.
     * @see aria-setsize.
     */
    "aria-posinset"?: number | string;
    /**
     * Indicates the current "pressed" state of toggle buttons.
     * @see aria-checked @see aria-selected.
     */
    "aria-pressed"?: boolean | "false" | "mixed" | "true";
    /**
     * Indicates that the element is not editable, but is otherwise operable.
     * @see aria-disabled.
     */
    "aria-readonly"?: boolean | "false" | "true";
    /**
     * Indicates what notifications the user agent will trigger when the accessibility tree within a live region is modified.
     * @see aria-atomic.
     */
    "aria-relevant"?:
      | "additions"
      | "additions removals"
      | "additions text"
      | "all"
      | "removals"
      | "removals additions"
      | "removals text"
      | "text"
      | "text additions"
      | "text removals";
    /** Indicates that user input is required on the element before a form may be submitted. */
    "aria-required"?: boolean | "false" | "true";
    /** Defines a human-readable, author-localized description for the role of an element. */
    "aria-roledescription"?: string;
    /**
     * Defines the total number of rows in a table, grid, or treegrid.
     * @see aria-rowindex.
     */
    "aria-rowcount"?: number | string;
    /**
     * Defines an element's row index or position with respect to the total number of rows within a table, grid, or treegrid.
     * @see aria-rowcount @see aria-rowspan.
     */
    "aria-rowindex"?: number | string;
    /**
     * Defines the number of rows spanned by a cell or gridcell within a table, grid, or treegrid.
     * @see aria-rowindex @see aria-colspan.
     */
    "aria-rowspan"?: number | string;
    /**
     * Indicates the current "selected" state of various widgets.
     * @see aria-checked @see aria-pressed.
     */
    "aria-selected"?: boolean | "false" | "true";
    /**
     * Defines the number of items in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM.
     * @see aria-posinset.
     */
    "aria-setsize"?: number | string;
    /** Indicates if items in a table or grid are sorted in ascending or descending order. */
    "aria-sort"?: "none" | "ascending" | "descending" | "other";
    /** Defines the maximum allowed value for a range widget. */
    "aria-valuemax"?: number | string;
    /** Defines the minimum allowed value for a range widget. */
    "aria-valuemin"?: number | string;
    /**
     * Defines the current value for a range widget.
     * @see aria-valuetext.
     */
    "aria-valuenow"?: number | string;
    /** Defines the human readable text alternative of aria-valuenow for a range widget. */
    "aria-valuetext"?: string;
    role?:
      | "alert"
      | "alertdialog"
      | "application"
      | "article"
      | "banner"
      | "button"
      | "cell"
      | "checkbox"
      | "columnheader"
      | "combobox"
      | "complementary"
      | "contentinfo"
      | "definition"
      | "dialog"
      | "directory"
      | "document"
      | "feed"
      | "figure"
      | "form"
      | "grid"
      | "gridcell"
      | "group"
      | "heading"
      | "img"
      | "link"
      | "list"
      | "listbox"
      | "listitem"
      | "log"
      | "main"
      | "marquee"
      | "math"
      | "menu"
      | "menubar"
      | "menuitem"
      | "menuitemcheckbox"
      | "menuitemradio"
      | "meter"
      | "navigation"
      | "none"
      | "note"
      | "option"
      | "presentation"
      | "progressbar"
      | "radio"
      | "radiogroup"
      | "region"
      | "row"
      | "rowgroup"
      | "rowheader"
      | "scrollbar"
      | "search"
      | "searchbox"
      | "separator"
      | "slider"
      | "spinbutton"
      | "status"
      | "switch"
      | "tab"
      | "table"
      | "tablist"
      | "tabpanel"
      | "term"
      | "textbox"
      | "timer"
      | "toolbar"
      | "tooltip"
      | "tree"
      | "treegrid"
      | "treeitem";
  }

  // TODO: Should we allow this?
  // type ClassKeys = \`class:\${string}\`;
  // type CSSKeys = Exclude<keyof csstype.PropertiesHyphen, \`-\${string}\`>;

  // type CSSAttributes = {
  //   [key in CSSKeys as \`style:\${key}\`]: csstype.PropertiesHyphen[key];
  // };

  interface HTMLAttributes<T> extends AriaAttributes, DOMAttributes<T> {
    // [key: ClassKeys]: boolean;
    accessKey?: string;
    class?: string | undefined;
    contenteditable?: boolean | "inherit";
    contextmenu?: string;
    dir?: HTMLDir;
    draggable?: boolean;
    hidden?: boolean;
    id?: string;
    lang?: string;
    spellcheck?: boolean;
    style?: CSSProperties | string;
    tabindex?: number | string;
    title?: string;
    translate?: "yes" | "no";
    about?: string;
    datatype?: string;
    inlist?: any;
    prefix?: string;
    property?: string;
    resource?: string;
    typeof?: string;
    vocab?: string;
    autocapitalize?: HTMLAutocapitalize;
    slot?: string;
    color?: string;
    itemprop?: string;
    itemscope?: boolean;
    itemtype?: string;
    itemid?: string;
    itemref?: string;
    part?: string;
    exportparts?: string;
    inputmode?: "none" | "text" | "tel" | "url" | "email" | "numeric" | "decimal" | "search";
    contentEditable?: boolean | "inherit";
    contextMenu?: string;
    tabIndex?: number | string;
    autoCapitalize?: HTMLAutocapitalize;
    itemProp?: string;
    itemScope?: boolean;
    itemType?: string;
    itemId?: string;
    itemRef?: string;
    exportParts?: string;
    inputMode?: "none" | "text" | "tel" | "url" | "email" | "numeric" | "decimal" | "search";
  }
  interface AnchorHTMLAttributes<T> extends HTMLAttributes<T> {
    download?: any;
    href?: string;
    hreflang?: string;
    media?: string;
    ping?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    rel?: string;
    target?: string;
    type?: string;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface AudioHTMLAttributes<T> extends MediaHTMLAttributes<T> {}
  interface AreaHTMLAttributes<T> extends HTMLAttributes<T> {
    alt?: string;
    coords?: string;
    download?: any;
    href?: string;
    hreflang?: string;
    ping?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    rel?: string;
    shape?: "rect" | "circle" | "poly" | "default";
    target?: string;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface BaseHTMLAttributes<T> extends HTMLAttributes<T> {
    href?: string;
    target?: string;
  }
  interface BlockquoteHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: string;
  }
  interface ButtonHTMLAttributes<T> extends HTMLAttributes<T> {
    autofocus?: boolean;
    disabled?: boolean;
    form?: string;
    formaction?: string;
    formenctype?: HTMLFormEncType;
    formmethod?: HTMLFormMethod;
    formnovalidate?: boolean;
    formtarget?: string;
    name?: string;
    type?: "submit" | "reset" | "button";
    value?: string;
    formAction?: string;
    formEnctype?: HTMLFormEncType;
    formMethod?: HTMLFormMethod;
    formNoValidate?: boolean;
    formTarget?: string;
  }
  interface CanvasHTMLAttributes<T> extends HTMLAttributes<T> {
    width?: number | string;
    height?: number | string;
  }
  interface ColHTMLAttributes<T> extends HTMLAttributes<T> {
    span?: number | string;
    width?: number | string;
  }
  interface ColgroupHTMLAttributes<T> extends HTMLAttributes<T> {
    span?: number | string;
  }
  interface DataHTMLAttributes<T> extends HTMLAttributes<T> {
    value?: string | string[] | number;
  }
  interface DetailsHtmlAttributes<T> extends HTMLAttributes<T> {
    open?: boolean;
    onToggle?: EventHandlerUnion<T, Event>;
    ontoggle?: EventHandlerUnion<T, Event>;
  }
  interface DialogHtmlAttributes<T> extends HTMLAttributes<T> {
    open?: boolean;
    onClose?: EventHandlerUnion<T, Event>;
    onCancel?: EventHandlerUnion<T, Event>;
  }
  interface EmbedHTMLAttributes<T> extends HTMLAttributes<T> {
    height?: number | string;
    src?: string;
    type?: string;
    width?: number | string;
  }
  interface FieldsetHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: boolean;
    form?: string;
    name?: string;
  }
  interface FormHTMLAttributes<T> extends HTMLAttributes<T> {
    acceptcharset?: string;
    action?: string;
    autocomplete?: string;
    encoding?: HTMLFormEncType;
    enctype?: HTMLFormEncType;
    method?: HTMLFormMethod;
    name?: string;
    novalidate?: boolean;
    target?: string;
    acceptCharset?: string;
    noValidate?: boolean;
  }
  interface IframeHTMLAttributes<T> extends HTMLAttributes<T> {
    allow?: string;
    allowfullscreen?: boolean;
    height?: number | string;
    name?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    sandbox?: HTMLIframeSandbox | string;
    src?: string;
    srcdoc?: string;
    width?: number | string;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface ImgHTMLAttributes<T> extends HTMLAttributes<T> {
    alt?: string;
    crossorigin?: HTMLCrossorigin;
    decoding?: "sync" | "async" | "auto";
    height?: number | string;
    ismap?: boolean;
    isMap?: boolean;
    loading?: "eager" | "lazy";
    referrerpolicy?: HTMLReferrerPolicy;
    referrerPolicy?: HTMLReferrerPolicy;
    sizes?: string;
    src?: string;
    srcset?: string;
    srcSet?: string;
    usemap?: string;
    useMap?: string;
    width?: number | string;
    crossOrigin?: HTMLCrossorigin;
  }
  interface InputHTMLAttributes<T> extends HTMLAttributes<T> {
    accept?: string;
    alt?: string;
    autocomplete?: string;
    autofocus?: boolean;
    capture?: boolean | string;
    checked?: boolean;
    crossorigin?: HTMLCrossorigin;
    disabled?: boolean;
    form?: string;
    formaction?: string;
    formenctype?: HTMLFormEncType;
    formmethod?: HTMLFormMethod;
    formnovalidate?: boolean;
    formtarget?: string;
    height?: number | string;
    list?: string;
    max?: number | string;
    maxlength?: number | string;
    min?: number | string;
    minlength?: number | string;
    multiple?: boolean;
    name?: string;
    pattern?: string;
    placeholder?: string;
    readonly?: boolean;
    required?: boolean;
    size?: number | string;
    src?: string;
    step?: number | string;
    type?: string;
    value?: string | string[] | number;
    width?: number | string;
    crossOrigin?: HTMLCrossorigin;
    formAction?: string;
    formEnctype?: HTMLFormEncType;
    formMethod?: HTMLFormMethod;
    formNoValidate?: boolean;
    formTarget?: string;
    maxLength?: number | string;
    minLength?: number | string;
    readOnly?: boolean;
  }
  interface InsHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: string;
    dateTime?: string;
  }
  interface KeygenHTMLAttributes<T> extends HTMLAttributes<T> {
    autofocus?: boolean;
    challenge?: string;
    disabled?: boolean;
    form?: string;
    keytype?: string;
    keyparams?: string;
    name?: string;
  }
  interface LabelHTMLAttributes<T> extends HTMLAttributes<T> {
    for?: string;
    form?: string;
  }
  interface LiHTMLAttributes<T> extends HTMLAttributes<T> {
    value?: number | string;
  }
  interface LinkHTMLAttributes<T> extends HTMLAttributes<T> {
    as?: HTMLLinkAs;
    crossorigin?: HTMLCrossorigin;
    disabled?: boolean;
    href?: string;
    hreflang?: string;
    integrity?: string;
    media?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    rel?: string;
    sizes?: string;
    type?: string;
    crossOrigin?: HTMLCrossorigin;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface MapHTMLAttributes<T> extends HTMLAttributes<T> {
    name?: string;
  }
  interface MediaHTMLAttributes<T> extends HTMLAttributes<T> {
    autoplay?: boolean;
    controls?: boolean;
    crossorigin?: HTMLCrossorigin;
    loop?: boolean;
    mediagroup?: string;
    muted?: boolean;
    preload?: "none" | "metadata" | "auto" | "";
    src?: string;
    crossOrigin?: HTMLCrossorigin;
    mediaGroup?: string;
  }
  interface MenuHTMLAttributes<T> extends HTMLAttributes<T> {
    label?: string;
    type?: "context" | "toolbar";
  }
  interface MetaHTMLAttributes<T> extends HTMLAttributes<T> {
    charset?: string;
    content?: string;
    httpequiv?: string;
    name?: string;
    httpEquiv?: string;
  }
  interface MeterHTMLAttributes<T> extends HTMLAttributes<T> {
    form?: string;
    high?: number | string;
    low?: number | string;
    max?: number | string;
    min?: number | string;
    optimum?: number | string;
    value?: string | string[] | number;
  }
  interface QuoteHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: string;
  }
  interface ObjectHTMLAttributes<T> extends HTMLAttributes<T> {
    data?: string;
    form?: string;
    height?: number | string;
    name?: string;
    type?: string;
    usemap?: string;
    width?: number | string;
    useMap?: string;
  }
  interface OlHTMLAttributes<T> extends HTMLAttributes<T> {
    reversed?: boolean;
    start?: number | string;
    type?: "1" | "a" | "A" | "i" | "I";
  }
  interface OptgroupHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: boolean;
    label?: string;
  }
  interface OptionHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: boolean;
    label?: string;
    selected?: boolean;
    value?: string | string[] | number;
  }
  interface OutputHTMLAttributes<T> extends HTMLAttributes<T> {
    form?: string;
    for?: string;
    name?: string;
  }
  interface ParamHTMLAttributes<T> extends HTMLAttributes<T> {
    name?: string;
    value?: string | string[] | number;
  }
  interface ProgressHTMLAttributes<T> extends HTMLAttributes<T> {
    max?: number | string;
    value?: string | string[] | number;
  }
  interface ScriptHTMLAttributes<T> extends HTMLAttributes<T> {
    async?: boolean;
    charset?: string;
    crossorigin?: HTMLCrossorigin;
    defer?: boolean;
    integrity?: string;
    nomodule?: boolean;
    nonce?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    src?: string;
    type?: string;
    crossOrigin?: HTMLCrossorigin;
    noModule?: boolean;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface SelectHTMLAttributes<T> extends HTMLAttributes<T> {
    autocomplete?: string;
    autofocus?: boolean;
    disabled?: boolean;
    form?: string;
    multiple?: boolean;
    name?: string;
    required?: boolean;
    size?: number | string;
    value?: string | string[] | number;
  }
  interface HTMLSlotElementAttributes<T = HTMLSlotElement> extends HTMLAttributes<T> {
    name?: string;
  }
  interface SourceHTMLAttributes<T> extends HTMLAttributes<T> {
    media?: string;
    sizes?: string;
    src?: string;
    srcset?: string;
    type?: string;
  }
  interface StyleHTMLAttributes<T> extends HTMLAttributes<T> {
    media?: string;
    nonce?: string;
    scoped?: boolean;
    type?: string;
  }
  interface TdHTMLAttributes<T> extends HTMLAttributes<T> {
    colspan?: number | string;
    headers?: string;
    rowspan?: number | string;
    colSpan?: number | string;
    rowSpan?: number | string;
  }
  interface TemplateHTMLAttributes<T extends HTMLTemplateElement> extends HTMLAttributes<T> {
    content?: DocumentFragment;
  }
  interface TextareaHTMLAttributes<T> extends HTMLAttributes<T> {
    autocomplete?: string;
    autofocus?: boolean;
    cols?: number | string;
    dirname?: string;
    disabled?: boolean;
    form?: string;
    maxlength?: number | string;
    minlength?: number | string;
    name?: string;
    placeholder?: string;
    readonly?: boolean;
    required?: boolean;
    rows?: number | string;
    value?: string | string[] | number;
    wrap?: "hard" | "soft" | "off";
    maxLength?: number | string;
    minLength?: number | string;
    readOnly?: boolean;
  }
  interface ThHTMLAttributes<T> extends HTMLAttributes<T> {
    colspan?: number | string;
    headers?: string;
    rowspan?: number | string;
    colSpan?: number | string;
    rowSpan?: number | string;
    scope?: 'col' | 'row' | 'rowgroup' | 'colgroup';
  }
  interface TimeHTMLAttributes<T> extends HTMLAttributes<T> {
    datetime?: string;
    dateTime?: string;
  }
  interface TrackHTMLAttributes<T> extends HTMLAttributes<T> {
    default?: boolean;
    kind?: "subtitles" | "captions" | "descriptions" | "chapters" | "metadata";
    label?: string;
    src?: string;
    srclang?: string;
  }
  interface VideoHTMLAttributes<T> extends MediaHTMLAttributes<T> {
    height?: number | string;
    playsinline?: boolean;
    poster?: string;
    width?: number | string;
  }
  type SVGPreserveAspectRatio =
    | "none"
    | "xMinYMin"
    | "xMidYMin"
    | "xMaxYMin"
    | "xMinYMid"
    | "xMidYMid"
    | "xMaxYMid"
    | "xMinYMax"
    | "xMidYMax"
    | "xMaxYMax"
    | "xMinYMin meet"
    | "xMidYMin meet"
    | "xMaxYMin meet"
    | "xMinYMid meet"
    | "xMidYMid meet"
    | "xMaxYMid meet"
    | "xMinYMax meet"
    | "xMidYMax meet"
    | "xMaxYMax meet"
    | "xMinYMin slice"
    | "xMidYMin slice"
    | "xMaxYMin slice"
    | "xMinYMid slice"
    | "xMidYMid slice"
    | "xMaxYMid slice"
    | "xMinYMax slice"
    | "xMidYMax slice"
    | "xMaxYMax slice";
  type ImagePreserveAspectRatio =
    | SVGPreserveAspectRatio
    | "defer none"
    | "defer xMinYMin"
    | "defer xMidYMin"
    | "defer xMaxYMin"
    | "defer xMinYMid"
    | "defer xMidYMid"
    | "defer xMaxYMid"
    | "defer xMinYMax"
    | "defer xMidYMax"
    | "defer xMaxYMax"
    | "defer xMinYMin meet"
    | "defer xMidYMin meet"
    | "defer xMaxYMin meet"
    | "defer xMinYMid meet"
    | "defer xMidYMid meet"
    | "defer xMaxYMid meet"
    | "defer xMinYMax meet"
    | "defer xMidYMax meet"
    | "defer xMaxYMax meet"
    | "defer xMinYMin slice"
    | "defer xMidYMin slice"
    | "defer xMaxYMin slice"
    | "defer xMinYMid slice"
    | "defer xMidYMid slice"
    | "defer xMaxYMid slice"
    | "defer xMinYMax slice"
    | "defer xMidYMax slice"
    | "defer xMaxYMax slice";
  type SVGUnits = "userSpaceOnUse" | "objectBoundingBox";
  interface CoreSVGAttributes<T> extends AriaAttributes, DOMAttributes<T> {
    id?: string;
    lang?: string;
    tabIndex?: number | string;
    tabindex?: number | string;
  }
  interface StylableSVGAttributes {
    class?: string | undefined;
    style?: CSSProperties | string;
  }
  interface TransformableSVGAttributes {
    transform?: string;
  }
  interface ConditionalProcessingSVGAttributes {
    requiredExtensions?: string;
    requiredFeatures?: string;
    systemLanguage?: string;
  }
  interface ExternalResourceSVGAttributes {
    externalResourcesRequired?: "true" | "false";
  }
  interface AnimationTimingSVGAttributes {
    begin?: string;
    dur?: string;
    end?: string;
    min?: string;
    max?: string;
    restart?: "always" | "whenNotActive" | "never";
    repeatCount?: number | "indefinite";
    repeatDur?: string;
    fill?: "freeze" | "remove";
  }
  interface AnimationValueSVGAttributes {
    calcMode?: "discrete" | "linear" | "paced" | "spline";
    values?: string;
    keyTimes?: string;
    keySplines?: string;
    from?: number | string;
    to?: number | string;
    by?: number | string;
  }
  interface AnimationAdditionSVGAttributes {
    attributeName?: string;
    additive?: "replace" | "sum";
    accumulate?: "none" | "sum";
  }
  interface AnimationAttributeTargetSVGAttributes {
    attributeName?: string;
    attributeType?: "CSS" | "XML" | "auto";
  }
  interface PresentationSVGAttributes {
    "alignment-baseline"?:
      | "auto"
      | "baseline"
      | "before-edge"
      | "text-before-edge"
      | "middle"
      | "central"
      | "after-edge"
      | "text-after-edge"
      | "ideographic"
      | "alphabetic"
      | "hanging"
      | "mathematical"
      | "inherit";
    "baseline-shift"?: number | string;
    clip?: string;
    "clip-path"?: string;
    "clip-rule"?: "nonzero" | "evenodd" | "inherit";
    color?: string;
    "color-interpolation"?: "auto" | "sRGB" | "linearRGB" | "inherit";
    "color-interpolation-filters"?: "auto" | "sRGB" | "linearRGB" | "inherit";
    "color-profile"?: string;
    "color-rendering"?: "auto" | "optimizeSpeed" | "optimizeQuality" | "inherit";
    cursor?: string;
    direction?: "ltr" | "rtl" | "inherit";
    display?: string;
    "dominant-baseline"?:
      | "auto"
      | "text-bottom"
      | "alphabetic"
      | "ideographic"
      | "middle"
      | "central"
      | "mathematical"
      | "hanging"
      | "text-top"
      | "inherit";
    "enable-background"?: string;
    fill?: string;
    "fill-opacity"?: number | string | "inherit";
    "fill-rule"?: "nonzero" | "evenodd" | "inherit";
    filter?: string;
    "flood-color"?: string;
    "flood-opacity"?: number | string | "inherit";
    "font-family"?: string;
    "font-size"?: string;
    "font-size-adjust"?: number | string;
    "font-stretch"?: string;
    "font-style"?: "normal" | "italic" | "oblique" | "inherit";
    "font-variant"?: string;
    "font-weight"?: number | string;
    "glyph-orientation-horizontal"?: string;
    "glyph-orientation-vertical"?: string;
    "image-rendering"?: "auto" | "optimizeQuality" | "optimizeSpeed" | "inherit";
    kerning?: string;
    "letter-spacing"?: number | string;
    "lighting-color"?: string;
    "marker-end"?: string;
    "marker-mid"?: string;
    "marker-start"?: string;
    mask?: string;
    opacity?: number | string | "inherit";
    overflow?: "visible" | "hidden" | "scroll" | "auto" | "inherit";
    "pointer-events"?:
      | "bounding-box"
      | "visiblePainted"
      | "visibleFill"
      | "visibleStroke"
      | "visible"
      | "painted"
      | "color"
      | "fill"
      | "stroke"
      | "all"
      | "none"
      | "inherit";
    "shape-rendering"?: "auto" | "optimizeSpeed" | "crispEdges" | "geometricPrecision" | "inherit";
    "stop-color"?: string;
    "stop-opacity"?: number | string | "inherit";
    stroke?: string;
    "stroke-dasharray"?: string;
    "stroke-dashoffset"?: number | string;
    "stroke-linecap"?: "butt" | "round" | "square" | "inherit";
    "stroke-linejoin"?: "arcs" | "bevel" | "miter" | "miter-clip" | "round" | "inherit";
    "stroke-miterlimit"?: number | string | "inherit";
    "stroke-opacity"?: number | string | "inherit";
    "stroke-width"?: number | string;
    "text-anchor"?: "start" | "middle" | "end" | "inherit";
    "text-decoration"?: "none" | "underline" | "overline" | "line-through" | "blink" | "inherit";
    "text-rendering"?:
      | "auto"
      | "optimizeSpeed"
      | "optimizeLegibility"
      | "geometricPrecision"
      | "inherit";
    "unicode-bidi"?: string;
    visibility?: "visible" | "hidden" | "collapse" | "inherit";
    "word-spacing"?: number | string;
    "writing-mode"?: "lr-tb" | "rl-tb" | "tb-rl" | "lr" | "rl" | "tb" | "inherit";
  }
  interface AnimationElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      ConditionalProcessingSVGAttributes {}
  interface ContainerElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "clip-path"
        | "mask"
        | "cursor"
        | "opacity"
        | "filter"
        | "enable-background"
        | "color-interpolation"
        | "color-rendering"
      > {}
  interface FilterPrimitiveElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<PresentationSVGAttributes, "color-interpolation-filters"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    result?: string;
  }
  interface SingleInputFilterSVGAttributes {
    in?: string;
  }
  interface DoubleInputFilterSVGAttributes {
    in?: string;
    in2?: string;
  }
  interface FitToViewBoxSVGAttributes {
    viewBox?: string;
    preserveAspectRatio?: SVGPreserveAspectRatio;
  }
  interface GradientElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    gradientUnits?: SVGUnits;
    gradientTransform?: string;
    spreadMethod?: "pad" | "reflect" | "repeat";
  }
  interface GraphicsElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "clip-rule"
        | "mask"
        | "pointer-events"
        | "cursor"
        | "opacity"
        | "filter"
        | "display"
        | "visibility"
        | "color-interpolation"
        | "color-rendering"
      > {}
  interface LightSourceElementSVGAttributes<T> extends CoreSVGAttributes<T> {}
  interface NewViewportSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    viewBox?: string;
  }
  interface ShapeElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "color"
        | "fill"
        | "fill-rule"
        | "fill-opacity"
        | "stroke"
        | "stroke-width"
        | "stroke-linecap"
        | "stroke-linejoin"
        | "stroke-miterlimit"
        | "stroke-dasharray"
        | "stroke-dashoffset"
        | "stroke-opacity"
        | "shape-rendering"
      > {}
  interface TextContentElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "font-family"
        | "font-style"
        | "font-variant"
        | "font-weight"
        | "font-stretch"
        | "font-size"
        | "font-size-adjust"
        | "kerning"
        | "letter-spacing"
        | "word-spacing"
        | "text-decoration"
        | "glyph-orientation-horizontal"
        | "glyph-orientation-vertical"
        | "direction"
        | "unicode-bidi"
        | "text-anchor"
        | "dominant-baseline"
        | "color"
        | "fill"
        | "fill-rule"
        | "fill-opacity"
        | "stroke"
        | "stroke-width"
        | "stroke-linecap"
        | "stroke-linejoin"
        | "stroke-miterlimit"
        | "stroke-dasharray"
        | "stroke-dashoffset"
        | "stroke-opacity"
      > {}
  interface ZoomAndPanSVGAttributes {
    zoomAndPan?: "disable" | "magnify";
  }
  interface AnimateSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationAttributeTargetSVGAttributes,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes,
      Pick<PresentationSVGAttributes, "color-interpolation" | "color-rendering"> {}
  interface AnimateMotionSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes {
    path?: string;
    keyPoints?: string;
    rotate?: number | string | "auto" | "auto-reverse";
    origin?: "default";
  }
  interface AnimateTransformSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationAttributeTargetSVGAttributes,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes {
    type?: "translate" | "scale" | "rotate" | "skewX" | "skewY";
  }
  interface CircleSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    cx?: number | string;
    cy?: number | string;
    r?: number | string;
  }
  interface ClipPathSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "clip-path"> {
    clipPathUnits?: SVGUnits;
  }
  interface DefsSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {}
  interface DescSVGAttributes<T> extends CoreSVGAttributes<T>, StylableSVGAttributes {}
  interface EllipseSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    cx?: number | string;
    cy?: number | string;
    rx?: number | string;
    ry?: number | string;
  }
  interface FeBlendSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    mode?: "normal" | "multiply" | "screen" | "darken" | "lighten";
  }
  interface FeColorMatrixSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    type?: "matrix" | "saturate" | "hueRotate" | "luminanceToAlpha";
    values?: string;
  }
  interface FeComponentTransferSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {}
  interface FeCompositeSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    operator?: "over" | "in" | "out" | "atop" | "xor" | "arithmetic";
    k1?: number | string;
    k2?: number | string;
    k3?: number | string;
    k4?: number | string;
  }
  interface FeConvolveMatrixSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    order?: number | string;
    kernelMatrix?: string;
    divisor?: number | string;
    bias?: number | string;
    targetX?: number | string;
    targetY?: number | string;
    edgeMode?: "duplicate" | "wrap" | "none";
    kernelUnitLength?: number | string;
    preserveAlpha?: "true" | "false";
  }
  interface FeDiffuseLightingSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "lighting-color"> {
    surfaceScale?: number | string;
    diffuseConstant?: number | string;
    kernelUnitLength?: number | string;
  }
  interface FeDisplacementMapSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    scale?: number | string;
    xChannelSelector?: "R" | "G" | "B" | "A";
    yChannelSelector?: "R" | "G" | "B" | "A";
  }
  interface FeDistantLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    azimuth?: number | string;
    elevation?: number | string;
  }
  interface FeFloodSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "flood-color" | "flood-opacity"> {}
  interface FeFuncSVGAttributes<T> extends CoreSVGAttributes<T> {
    type?: "identity" | "table" | "discrete" | "linear" | "gamma";
    tableValues?: string;
    slope?: number | string;
    intercept?: number | string;
    amplitude?: number | string;
    exponent?: number | string;
    offset?: number | string;
  }
  interface FeGaussianBlurSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    stdDeviation?: number | string;
  }
  interface FeImageSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    preserveAspectRatio?: SVGPreserveAspectRatio;
    href?: string;
  }
  interface FeMergeSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes {}
  interface FeMergeNodeSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      SingleInputFilterSVGAttributes {}
  interface FeMorphologySVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    operator?: "erode" | "dilate";
    radius?: number | string;
  }
  interface FeOffsetSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    dx?: number | string;
    dy?: number | string;
  }
  interface FePointLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    x?: number | string;
    y?: number | string;
    z?: number | string;
  }
  interface FeSpecularLightingSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "lighting-color"> {
    surfaceScale?: string;
    specularConstant?: string;
    specularExponent?: string;
    kernelUnitLength?: number | string;
  }
  interface FeSpotLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    x?: number | string;
    y?: number | string;
    z?: number | string;
    pointsAtX?: number | string;
    pointsAtY?: number | string;
    pointsAtZ?: number | string;
    specularExponent?: number | string;
    limitingConeAngle?: number | string;
  }
  interface FeTileSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {}
  interface FeTurbulanceSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes {
    baseFrequency?: number | string;
    numOctaves?: number | string;
    seed?: number | string;
    stitchTiles?: "stitch" | "noStitch";
    type?: "fractalNoise" | "turbulence";
  }
  interface FilterSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    filterUnits?: SVGUnits;
    primitiveUnits?: SVGUnits;
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    filterRes?: number | string;
  }
  interface ForeignObjectSVGAttributes<T>
    extends NewViewportSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
  }
  interface GSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {}
  interface ImageSVGAttributes<T>
    extends NewViewportSVGAttributes<T>,
      GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "color-profile" | "image-rendering"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    preserveAspectRatio?: ImagePreserveAspectRatio;
    href?: string;
  }
  interface LineSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    x1?: number | string;
    y1?: number | string;
    x2?: number | string;
    y2?: number | string;
  }
  interface LinearGradientSVGAttributes<T> extends GradientElementSVGAttributes<T> {
    x1?: number | string;
    x2?: number | string;
    y1?: number | string;
    y2?: number | string;
  }
  interface MarkerSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    markerUnits?: "strokeWidth" | "userSpaceOnUse";
    refX?: number | string;
    refY?: number | string;
    markerWidth?: number | string;
    markerHeight?: number | string;
    orient?: string;
  }
  interface MaskSVGAttributes<T>
    extends Omit<ContainerElementSVGAttributes<T>, "opacity" | "filter">,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    maskUnits?: SVGUnits;
    maskContentUnits?: SVGUnits;
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
  }
  interface MetadataSVGAttributes<T> extends CoreSVGAttributes<T> {}
  interface PathSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    d?: string;
    pathLength?: number | string;
  }
  interface PatternSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    patternUnits?: SVGUnits;
    patternContentUnits?: SVGUnits;
    patternTransform?: string;
  }
  interface PolygonSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    points?: string;
  }
  interface PolylineSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    points?: string;
  }
  interface RadialGradientSVGAttributes<T> extends GradientElementSVGAttributes<T> {
    cx?: number | string;
    cy?: number | string;
    r?: number | string;
    fx?: number | string;
    fy?: number | string;
  }
  interface RectSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    rx?: number | string;
    ry?: number | string;
  }
  interface StopSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "stop-color" | "stop-opacity"> {
    offset?: number | string;
  }
  interface SvgSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      NewViewportSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      ZoomAndPanSVGAttributes,
      PresentationSVGAttributes {
    version?: string;
    baseProfile?: string;
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    contentScriptType?: string;
    contentStyleType?: string;
    xmlns?: string;
  }
  interface SwitchSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {}
  interface SymbolSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      NewViewportSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes {}
  interface TextSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "writing-mode" | "text-rendering"> {
    x?: number | string;
    y?: number | string;
    dx?: number | string;
    dy?: number | string;
    rotate?: number | string;
    textLength?: number | string;
    lengthAdjust?: "spacing" | "spacingAndGlyphs";
  }
  interface TextPathSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      Pick<
        PresentationSVGAttributes,
        "alignment-baseline" | "baseline-shift" | "display" | "visibility"
      > {
    startOffset?: number | string;
    method?: "align" | "stretch";
    spacing?: "auto" | "exact";
    href?: string;
  }
  interface TSpanSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      Pick<
        PresentationSVGAttributes,
        "alignment-baseline" | "baseline-shift" | "display" | "visibility"
      > {
    x?: number | string;
    y?: number | string;
    dx?: number | string;
    dy?: number | string;
    rotate?: number | string;
    textLength?: number | string;
    lengthAdjust?: "spacing" | "spacingAndGlyphs";
  }
  interface UseSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    href?: string;
  }
  interface ViewSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      FitToViewBoxSVGAttributes,
      ZoomAndPanSVGAttributes {
    viewTarget?: string;
  }
  /**
   * @type {HTMLElementTagNameMap}
   */
  interface HTMLElementTags {
    a: AnchorHTMLAttributes<HTMLAnchorElement>;
    abbr: HTMLAttributes<HTMLElement>;
    address: HTMLAttributes<HTMLElement>;
    area: AreaHTMLAttributes<HTMLAreaElement>;
    article: HTMLAttributes<HTMLElement>;
    aside: HTMLAttributes<HTMLElement>;
    audio: AudioHTMLAttributes<HTMLAudioElement>;
    b: HTMLAttributes<HTMLElement>;
    base: BaseHTMLAttributes<HTMLBaseElement>;
    bdi: HTMLAttributes<HTMLElement>;
    bdo: HTMLAttributes<HTMLElement>;
    blockquote: BlockquoteHTMLAttributes<HTMLElement>;
    body: HTMLAttributes<HTMLBodyElement>;
    br: HTMLAttributes<HTMLBRElement>;
    button: ButtonHTMLAttributes<HTMLButtonElement>;
    canvas: CanvasHTMLAttributes<HTMLCanvasElement>;
    caption: HTMLAttributes<HTMLElement>;
    cite: HTMLAttributes<HTMLElement>;
    code: HTMLAttributes<HTMLElement>;
    col: ColHTMLAttributes<HTMLTableColElement>;
    colgroup: ColgroupHTMLAttributes<HTMLTableColElement>;
    data: DataHTMLAttributes<HTMLElement>;
    datalist: HTMLAttributes<HTMLDataListElement>;
    dd: HTMLAttributes<HTMLElement>;
    del: HTMLAttributes<HTMLElement>;
    details: DetailsHtmlAttributes<HTMLDetailsElement>;
    dfn: HTMLAttributes<HTMLElement>;
    dialog: DialogHtmlAttributes<HTMLDialogElement>;
    div: HTMLAttributes<HTMLDivElement>;
    dl: HTMLAttributes<HTMLDListElement>;
    dt: HTMLAttributes<HTMLElement>;
    em: HTMLAttributes<HTMLElement>;
    embed: EmbedHTMLAttributes<HTMLEmbedElement>;
    fieldset: FieldsetHTMLAttributes<HTMLFieldSetElement>;
    figcaption: HTMLAttributes<HTMLElement>;
    figure: HTMLAttributes<HTMLElement>;
    footer: HTMLAttributes<HTMLElement>;
    form: FormHTMLAttributes<HTMLFormElement>;
    h1: HTMLAttributes<HTMLHeadingElement>;
    h2: HTMLAttributes<HTMLHeadingElement>;
    h3: HTMLAttributes<HTMLHeadingElement>;
    h4: HTMLAttributes<HTMLHeadingElement>;
    h5: HTMLAttributes<HTMLHeadingElement>;
    h6: HTMLAttributes<HTMLHeadingElement>;
    head: HTMLAttributes<HTMLHeadElement>;
    header: HTMLAttributes<HTMLElement>;
    hgroup: HTMLAttributes<HTMLElement>;
    hr: HTMLAttributes<HTMLHRElement>;
    html: HTMLAttributes<HTMLHtmlElement>;
    i: HTMLAttributes<HTMLElement>;
    iframe: IframeHTMLAttributes<HTMLIFrameElement>;
    img: ImgHTMLAttributes<HTMLImageElement>;
    input: InputHTMLAttributes<HTMLInputElement>;
    ins: InsHTMLAttributes<HTMLModElement>;
    kbd: HTMLAttributes<HTMLElement>;
    label: LabelHTMLAttributes<HTMLLabelElement>;
    legend: HTMLAttributes<HTMLLegendElement>;
    li: LiHTMLAttributes<HTMLLIElement>;
    link: LinkHTMLAttributes<HTMLLinkElement>;
    main: HTMLAttributes<HTMLElement>;
    map: MapHTMLAttributes<HTMLMapElement>;
    mark: HTMLAttributes<HTMLElement>;
    menu: MenuHTMLAttributes<HTMLElement>;
    meta: MetaHTMLAttributes<HTMLMetaElement>;
    meter: MeterHTMLAttributes<HTMLElement>;
    nav: HTMLAttributes<HTMLElement>;
    noscript: HTMLAttributes<HTMLElement>;
    object: ObjectHTMLAttributes<HTMLObjectElement>;
    ol: OlHTMLAttributes<HTMLOListElement>;
    optgroup: OptgroupHTMLAttributes<HTMLOptGroupElement>;
    option: OptionHTMLAttributes<HTMLOptionElement>;
    output: OutputHTMLAttributes<HTMLElement>;
    p: HTMLAttributes<HTMLParagraphElement>;
    picture: HTMLAttributes<HTMLElement>;
    pre: HTMLAttributes<HTMLPreElement>;
    progress: ProgressHTMLAttributes<HTMLProgressElement>;
    q: QuoteHTMLAttributes<HTMLQuoteElement>;
    rp: HTMLAttributes<HTMLElement>;
    rt: HTMLAttributes<HTMLElement>;
    ruby: HTMLAttributes<HTMLElement>;
    s: HTMLAttributes<HTMLElement>;
    samp: HTMLAttributes<HTMLElement>;
    script: ScriptHTMLAttributes<HTMLElement>;
    section: HTMLAttributes<HTMLElement>;
    select: SelectHTMLAttributes<HTMLSelectElement>;
    slot: HTMLSlotElementAttributes;
    small: HTMLAttributes<HTMLElement>;
    source: SourceHTMLAttributes<HTMLSourceElement>;
    span: HTMLAttributes<HTMLSpanElement>;
    strong: HTMLAttributes<HTMLElement>;
    style: StyleHTMLAttributes<HTMLStyleElement>;
    sub: HTMLAttributes<HTMLElement>;
    summary: HTMLAttributes<HTMLElement>;
    sup: HTMLAttributes<HTMLElement>;
    table: HTMLAttributes<HTMLTableElement>;
    tbody: HTMLAttributes<HTMLTableSectionElement>;
    td: TdHTMLAttributes<HTMLTableCellElement>;
    template: TemplateHTMLAttributes<HTMLTemplateElement>;
    textarea: TextareaHTMLAttributes<HTMLTextAreaElement>;
    tfoot: HTMLAttributes<HTMLTableSectionElement>;
    th: ThHTMLAttributes<HTMLTableCellElement>;
    thead: HTMLAttributes<HTMLTableSectionElement>;
    time: TimeHTMLAttributes<HTMLElement>;
    title: HTMLAttributes<HTMLTitleElement>;
    tr: HTMLAttributes<HTMLTableRowElement>;
    track: TrackHTMLAttributes<HTMLTrackElement>;
    u: HTMLAttributes<HTMLElement>;
    ul: HTMLAttributes<HTMLUListElement>;
    var: HTMLAttributes<HTMLElement>;
    video: VideoHTMLAttributes<HTMLVideoElement>;
    wbr: HTMLAttributes<HTMLElement>;
  }
  /**
   * @type {HTMLElementDeprecatedTagNameMap}
   */
  interface HTMLElementDeprecatedTags {
    big: HTMLAttributes<HTMLElement>;
    keygen: KeygenHTMLAttributes<HTMLElement>;
    menuitem: HTMLAttributes<HTMLElement>;
    noindex: HTMLAttributes<HTMLElement>;
    param: ParamHTMLAttributes<HTMLParamElement>;
  }
  /**
   * @type {SVGElementTagNameMap}
   */
  interface SVGElementTags {
    animate: AnimateSVGAttributes<SVGAnimateElement>;
    animateMotion: AnimateMotionSVGAttributes<SVGAnimateMotionElement>;
    animateTransform: AnimateTransformSVGAttributes<SVGAnimateTransformElement>;
    circle: CircleSVGAttributes<SVGCircleElement>;
    clipPath: ClipPathSVGAttributes<SVGClipPathElement>;
    defs: DefsSVGAttributes<SVGDefsElement>;
    desc: DescSVGAttributes<SVGDescElement>;
    ellipse: EllipseSVGAttributes<SVGEllipseElement>;
    feBlend: FeBlendSVGAttributes<SVGFEBlendElement>;
    feColorMatrix: FeColorMatrixSVGAttributes<SVGFEColorMatrixElement>;
    feComponentTransfer: FeComponentTransferSVGAttributes<SVGFEComponentTransferElement>;
    feComposite: FeCompositeSVGAttributes<SVGFECompositeElement>;
    feConvolveMatrix: FeConvolveMatrixSVGAttributes<SVGFEConvolveMatrixElement>;
    feDiffuseLighting: FeDiffuseLightingSVGAttributes<SVGFEDiffuseLightingElement>;
    feDisplacementMap: FeDisplacementMapSVGAttributes<SVGFEDisplacementMapElement>;
    feDistantLight: FeDistantLightSVGAttributes<SVGFEDistantLightElement>;
    feDropShadow: Partial<SVGFEDropShadowElement>;
    feFlood: FeFloodSVGAttributes<SVGFEFloodElement>;
    feFuncA: FeFuncSVGAttributes<SVGFEFuncAElement>;
    feFuncB: FeFuncSVGAttributes<SVGFEFuncBElement>;
    feFuncG: FeFuncSVGAttributes<SVGFEFuncGElement>;
    feFuncR: FeFuncSVGAttributes<SVGFEFuncRElement>;
    feGaussianBlur: FeGaussianBlurSVGAttributes<SVGFEGaussianBlurElement>;
    feImage: FeImageSVGAttributes<SVGFEImageElement>;
    feMerge: FeMergeSVGAttributes<SVGFEMergeElement>;
    feMergeNode: FeMergeNodeSVGAttributes<SVGFEMergeNodeElement>;
    feMorphology: FeMorphologySVGAttributes<SVGFEMorphologyElement>;
    feOffset: FeOffsetSVGAttributes<SVGFEOffsetElement>;
    fePointLight: FePointLightSVGAttributes<SVGFEPointLightElement>;
    feSpecularLighting: FeSpecularLightingSVGAttributes<SVGFESpecularLightingElement>;
    feSpotLight: FeSpotLightSVGAttributes<SVGFESpotLightElement>;
    feTile: FeTileSVGAttributes<SVGFETileElement>;
    feTurbulence: FeTurbulanceSVGAttributes<SVGFETurbulenceElement>;
    filter: FilterSVGAttributes<SVGFilterElement>;
    foreignObject: ForeignObjectSVGAttributes<SVGForeignObjectElement>;
    g: GSVGAttributes<SVGGElement>;
    image: ImageSVGAttributes<SVGImageElement>;
    line: LineSVGAttributes<SVGLineElement>;
    linearGradient: LinearGradientSVGAttributes<SVGLinearGradientElement>;
    marker: MarkerSVGAttributes<SVGMarkerElement>;
    mask: MaskSVGAttributes<SVGMaskElement>;
    metadata: MetadataSVGAttributes<SVGMetadataElement>;
    mpath: Partial<SVGMPathElement>;
    path: PathSVGAttributes<SVGPathElement>;
    pattern: PatternSVGAttributes<SVGPatternElement>;
    polygon: PolygonSVGAttributes<SVGPolygonElement>;
    polyline: PolylineSVGAttributes<SVGPolylineElement>;
    radialGradient: RadialGradientSVGAttributes<SVGRadialGradientElement>;
    rect: RectSVGAttributes<SVGRectElement>;
    set: Partial<SVGSetElement>;
    stop: StopSVGAttributes<SVGStopElement>;
    svg: SvgSVGAttributes<SVGSVGElement>;
    switch: SwitchSVGAttributes<SVGSwitchElement>;
    symbol: SymbolSVGAttributes<SVGSymbolElement>;
    text: TextSVGAttributes<SVGTextElement>;
    textPath: TextPathSVGAttributes<SVGTextPathElement>;
    tspan: TSpanSVGAttributes<SVGTSpanElement>;
    use: UseSVGAttributes<SVGUseElement>;
    view: ViewSVGAttributes<SVGViewElement>;
  }
  interface IntrinsicElements extends HTMLElementTags, HTMLElementDeprecatedTags, SVGElementTags {}
}
`,"universal/package.json":`{
  "name": "solid-js/universal",
  "main": "./dist/universal.cjs",
  "module": "./dist/universal.js",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false,
  "exports": {
    ".": {
      "development": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/dev.js"
        },
        "require": "./dist/dev.cjs"
      },
      "import": {
        "types": "./types/index.d.ts",
        "default": "./dist/universal.js"
      },
      "require": "./dist/universal.cjs"
    }
  }
}
`,"web/package.json":`{
  "name": "solid-js/web",
  "main": "./dist/server.cjs",
  "module": "./dist/server.js",
  "browser": {
    "./dist/server.cjs": "./dist/web.cjs",
    "./dist/server.js": "./dist/web.js"
  },
  "unpkg": "./dist/web.cjs",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false,
  "exports": {
    ".": {
      "worker": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "browser": {
        "development": {
          "import": {
            "types": "./types/index.d.ts",
            "default": "./dist/dev.js"
          },
          "require": "./dist/dev.cjs"
        },
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/web.js"
        },
        "require": "./dist/web.cjs"
      },
      "deno": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "node": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "development": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/dev.js"
        },
        "require": "./dist/dev.cjs"
      },
      "import": {
        "types": "./types/index.d.ts",
        "default": "./dist/web.js"
      },
      "require": "./dist/web.cjs"
    }
  }
}
`,"h/jsx-dev-runtime/package.json":`{
  "name": "solid-js/h/jsx-dev-runtime",
  "main": "../jsx-runtime/dist/jsx.cjs",
  "module": "../jsx-runtime/dist/jsx.js",
  "types": "../jsx-runtime/types/index.d.ts",
  "type": "module",
  "sideEffects": false
}
`,"h/jsx-runtime/package.json":`{
  "name": "solid-js/h/jsx-runtime",
  "main": "./dist/jsx.cjs",
  "module": "./dist/jsx.js",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false
}
`,"h/types/hyperscript.d.ts":`declare type MountableElement = Element | Document | ShadowRoot | DocumentFragment | Node;
interface Runtime {
    insert(parent: MountableElement, accessor: any, marker?: Node | null, init?: any): any;
    spread(node: Element, accessor: any, isSVG?: Boolean, skipChildren?: Boolean): void;
    assign(node: Element, props: any, isSVG?: Boolean, skipChildren?: Boolean): void;
    createComponent(Comp: (props: any) => any, props: any): any;
    dynamicProperty(props: any, key: string): any;
    SVGElements: Set<string>;
}
declare type ExpandableNode = Node & {
    [key: string]: any;
};
export declare type HyperScript = {
    (...args: any[]): () => ExpandableNode | ExpandableNode[];
    Fragment: (props: {
        children: (() => ExpandableNode) | (() => ExpandableNode)[];
    }) => ExpandableNode[];
};
export declare function createHyperScript(r: Runtime): HyperScript;
export {};
`,"h/types/index.d.ts":`declare const _default: import("hyper-dom-expressions").HyperScript;
export default _default;
`,"html/types/index.d.ts":`declare const _default: import("lit-dom-expressions").HTMLTag;
export default _default;
`,"html/types/lit.d.ts":`declare type MountableElement = Element | Document | ShadowRoot | DocumentFragment | Node;
interface Runtime {
    effect<T>(fn: (prev?: T) => T, init?: T): any;
    untrack<T>(fn: () => T): T;
    insert(parent: MountableElement, accessor: any, marker?: Node | null, init?: any): any;
    spread<T>(node: Element, accessor: (() => T) | T, isSVG?: Boolean, skipChildren?: Boolean): void;
    createComponent(Comp: (props: any) => any, props: any): any;
    addEventListener(node: Element, name: string, handler: () => void, delegate: boolean): void;
    delegateEvents(eventNames: string[]): void;
    classList(node: Element, value: {
        [k: string]: boolean;
    }, prev?: {
        [k: string]: boolean;
    }): void;
    style(node: Element, value: {
        [k: string]: string;
    }, prev?: {
        [k: string]: string;
    }): void;
    mergeProps(...sources: unknown[]): unknown;
    dynamicProperty(props: any, key: string): any;
    setAttribute(node: Element, name: string, value: any): void;
    setAttributeNS(node: Element, namespace: string, name: string, value: any): void;
    Aliases: Record<string, string>;
    PropAliases: Record<string, string>;
    Properties: Set<string>;
    ChildProperties: Set<string>;
    DelegatedEvents: Set<string>;
    SVGElements: Set<string>;
    SVGNamespace: Record<string, string>;
}
export declare type HTMLTag = {
    (statics: TemplateStringsArray, ...args: unknown[]): Node | Node[];
};
export declare function createHTML(r: Runtime, { delegateEvents }?: {
    delegateEvents?: boolean | undefined;
}): HTMLTag;
export {};
`,"store/types/index.d.ts":`export { createStore, unwrap, $RAW } from "./store.js";
export type { Store, SetStoreFunction, NotWrappable, SolidStore, StoreNode, StoreSetter, StorePathRange, ArrayFilterFn, Part, DeepReadonly, DeepMutable } from "./store.js";
export * from "./mutable.js";
export * from "./modifiers.js";
import { $NAME, $NODE, isWrappable } from "./store.js";
export declare const DEV: {
    readonly $NAME: typeof $NAME;
    readonly $NODE: typeof $NODE;
    readonly isWrappable: typeof isWrappable;
} | undefined;
`,"store/types/modifiers.d.ts":`export declare type ReconcileOptions = {
    key?: string | null;
    merge?: boolean;
};
export declare function reconcile<T extends U, U>(value: T, options?: ReconcileOptions): (state: U) => T;
export declare function produce<T>(fn: (state: T) => void): (state: T) => T;
`,"store/types/mutable.d.ts":`import { StoreNode } from "./store.js";
export declare function createMutable<T extends StoreNode>(state: T, options?: {
    name?: string;
}): T;
export declare function modifyMutable<T>(state: T, modifier: (state: T) => T): void;
`,"store/types/server.d.ts":`import type { SetStoreFunction, Store } from "./store.js";
export declare const $RAW: unique symbol;
export declare function isWrappable(obj: any): boolean;
export declare function unwrap<T>(item: T): T;
export declare function setProperty(state: any, property: PropertyKey, value: any, force?: boolean): void;
export declare function updatePath(current: any, path: any[], traversed?: PropertyKey[]): void;
export declare function createStore<T>(state: T | Store<T>): [Store<T>, SetStoreFunction<T>];
export declare function createMutable<T>(state: T | Store<T>): T;
declare type ReconcileOptions = {
    key?: string | null;
    merge?: boolean;
};
export declare function reconcile<T extends U, U>(value: T, options?: ReconcileOptions): (state: U) => T;
export declare function produce<T>(fn: (state: T) => void): (state: T) => T;
export declare const DEV: undefined;
export {};
`,"store/types/store.d.ts":`export declare const $RAW: unique symbol, $NODE: unique symbol, $NAME: unique symbol;
declare global {
    var _$onStoreNodeUpdate: OnStoreNodeUpdate | undefined;
}
declare type DataNode = {
    (): any;
    $(value?: any): void;
};
declare type DataNodes = Record<PropertyKey, DataNode>;
export declare type OnStoreNodeUpdate = (state: StoreNode, property: PropertyKey, value: StoreNode | NotWrappable, prev: StoreNode | NotWrappable) => void;
export interface StoreNode {
    [$NAME]?: string;
    [$NODE]?: DataNodes;
    [key: PropertyKey]: any;
}
export declare namespace SolidStore {
    interface Unwrappable {
    }
}
export declare type NotWrappable = string | number | bigint | symbol | boolean | Function | null | undefined | SolidStore.Unwrappable[keyof SolidStore.Unwrappable];
export declare type Store<T> = T;
export declare function isWrappable<T>(obj: T | NotWrappable): obj is T;
/**
 * Returns the underlying data in the store without a proxy.
 * @param item store proxy object
 * @example
 * \`\`\`js
 * const initial = {z...};
 * const [state, setState] = createStore(initial);
 * initial === state; // => false
 * initial === unwrap(state); // => true
 * \`\`\`
 */
export declare function unwrap<T>(item: T, set?: Set<unknown>): T;
export declare function getDataNodes(target: StoreNode): DataNodes;
export declare function getDataNode(nodes: DataNodes, property: PropertyKey, value: any): DataNode;
export declare function proxyDescriptor(target: StoreNode, property: PropertyKey): PropertyDescriptor | undefined;
export declare function trackSelf(target: StoreNode): void;
export declare function ownKeys(target: StoreNode): (string | symbol)[];
export declare function setProperty(state: StoreNode, property: PropertyKey, value: any, deleting?: boolean): void;
export declare function updatePath(current: StoreNode, path: any[], traversed?: PropertyKey[]): void;
/** @deprecated */
export declare type DeepReadonly<T> = 0 extends 1 & T ? T : T extends NotWrappable ? T : {
    readonly [K in keyof T]: DeepReadonly<T[K]>;
};
/** @deprecated */
export declare type DeepMutable<T> = 0 extends 1 & T ? T : T extends NotWrappable ? T : {
    -readonly [K in keyof T]: DeepMutable<T[K]>;
};
export declare type CustomPartial<T> = T extends readonly unknown[] ? "0" extends keyof T ? {
    [K in Extract<keyof T, \`\${number}\`>]?: T[K];
} : {
    [x: number]: T[number];
} : Partial<T>;
export declare type PickMutable<T> = {
    [K in keyof T as (<U>() => U extends {
        [V in K]: T[V];
    } ? 1 : 2) extends <U>() => U extends {
        -readonly [V in K]: T[V];
    } ? 1 : 2 ? K : never]: T[K];
};
export declare type StorePathRange = {
    from?: number;
    to?: number;
    by?: number;
};
export declare type ArrayFilterFn<T> = (item: T, index: number) => boolean;
export declare type StoreSetter<T, U extends PropertyKey[] = []> = T | CustomPartial<T> | ((prevState: T, traversed: U) => T | CustomPartial<T>);
export declare type Part<T, K extends KeyOf<T> = KeyOf<T>> = K | ([K] extends [never] ? never : readonly K[]) | ([T] extends [readonly unknown[]] ? ArrayFilterFn<T[number]> | StorePathRange : never);
declare type W<T> = Exclude<T, NotWrappable>;
declare type KeyOf<T> = number extends keyof T ? 0 extends 1 & T ? keyof T : [T] extends [readonly unknown[]] ? number : [T] extends [never] ? never : keyof T : keyof T;
declare type MutableKeyOf<T> = KeyOf<T> & keyof PickMutable<T>;
declare type Rest<T, U extends PropertyKey[], K extends KeyOf<T> = KeyOf<T>> = K extends keyof PickMutable<T> ? [Part<T, K>, ...RestSetterOrContinue<T[K], [K, ...U]>] : K extends KeyOf<K> ? [Part<T, K>, ...RestContinue<T[K], [K, ...U]>] : never;
declare type RestContinue<T, U extends PropertyKey[]> = 0 extends 1 & T ? [...Part<any>[], StoreSetter<any, PropertyKey[]>] : Rest<T, U>;
declare type RestSetterOrContinue<T, U extends PropertyKey[]> = [StoreSetter<T, U>] | RestContinue<T, U>;
export interface SetStoreFunction<T> {
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends KeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>, K6 extends KeyOf<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>>, K7 extends MutableKeyOf<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, k6: Part<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>, K6>, k7: Part<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>, K7>, setter: StoreSetter<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>[K7], [
        K7,
        K6,
        K5,
        K4,
        K3,
        K2,
        K1
    ]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends KeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>, K6 extends KeyOf<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, k6: Part<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>, K6>, setter: StoreSetter<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6], [K6, K5, K4, K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends MutableKeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, setter: StoreSetter<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5], [K5, K4, K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends MutableKeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, setter: StoreSetter<W<W<W<W<T>[K1]>[K2]>[K3]>[K4], [K4, K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends MutableKeyOf<W<W<W<T>[K1]>[K2]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, setter: StoreSetter<W<W<W<T>[K1]>[K2]>[K3], [K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends MutableKeyOf<W<W<T>[K1]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, setter: StoreSetter<W<W<T>[K1]>[K2], [K2, K1]>): void;
    <K1 extends MutableKeyOf<W<T>>>(k1: Part<W<T>, K1>, setter: StoreSetter<W<T>[K1], [K1]>): void;
    (setter: StoreSetter<T, []>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends KeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>, K6 extends KeyOf<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>>, K7 extends KeyOf<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, k6: Part<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>, K6>, k7: Part<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>, K7>, ...rest: Rest<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>[K7], [K7, K6, K5, K4, K3, K2, K1]>): void;
}
/**
 * creates a reactive store that can be read through a proxy object and written with a setter function
 *
 * @description https://www.solidjs.com/docs/latest/api#createstore
 */
export declare function createStore<T extends object = {}>(...[store, options]: {} extends T ? [store?: T | Store<T>, options?: {
    name?: string;
}] : [store: T | Store<T>, options?: {
    name?: string;
}]): [get: Store<T>, set: SetStoreFunction<T>];
export {};
`,"types/reactive/array.d.ts":`import { Accessor } from "./signal.js";
/**
 * reactively transforms an array with a callback function - underlying helper for the \`<For>\` control flow
 *
 * similar to \`Array.prototype.map\`, but gets the index as accessor, transforms only values that changed and returns an accessor and reactively tracks changes to the list.
 *
 * @description https://www.solidjs.com/docs/latest/api#maparray
 */
export declare function mapArray<T, U>(list: Accessor<readonly T[] | undefined | null | false>, mapFn: (v: T, i: Accessor<number>) => U, options?: {
    fallback?: Accessor<any>;
}): () => U[];
/**
 * reactively maps arrays by index instead of value - underlying helper for the \`<Index>\` control flow
 *
 * similar to \`Array.prototype.map\`, but gets the value as an accessor, transforms only changed items of the original arrays anew and returns an accessor.
 *
 * @description https://www.solidjs.com/docs/latest/api#indexarray
 */
export declare function indexArray<T, U>(list: Accessor<readonly T[] | undefined | null | false>, mapFn: (v: Accessor<T>, i: number) => U, options?: {
    fallback?: Accessor<any>;
}): () => U[];
`,"types/reactive/observable.d.ts":`import { Accessor, Setter } from "./signal.js";
declare global {
    interface SymbolConstructor {
        readonly observable: symbol;
    }
}
export declare type ObservableObserver<T> = ((v: T) => void) | {
    next?: (v: T) => void;
    error?: (v: any) => void;
    complete?: (v: boolean) => void;
};
/**
 * creates a simple observable from a signal's accessor to be used with the \`from\` operator of observable libraries like e.g. rxjs
 * \`\`\`typescript
 * import { from } from "rxjs";
 * const [s, set] = createSignal(0);
 * const obsv$ = from(observable(s));
 * obsv$.subscribe((v) => console.log(v));
 * \`\`\`
 * description https://www.solidjs.com/docs/latest/api#observable
 */
export declare function observable<T>(input: Accessor<T>): {
    subscribe(observer: ObservableObserver<T>): {
        unsubscribe(): void;
    };
    [Symbol.observable](): any;
};
export declare function from<T>(producer: ((setter: Setter<T | undefined>) => () => void) | {
    subscribe: (fn: (v: T) => void) => (() => void) | {
        unsubscribe: () => void;
    };
}): Accessor<T | undefined>;
`,"types/reactive/scheduler.d.ts":`export interface Task {
    id: number;
    fn: ((didTimeout: boolean) => void) | null;
    startTime: number;
    expirationTime: number;
}
export declare function requestCallback(fn: () => void, options?: {
    timeout: number;
}): Task;
export declare function cancelCallback(task: Task): void;
`,"types/reactive/signal.d.ts":`import { requestCallback } from "./scheduler.js";
import type { JSX } from "../jsx.js";
import type { FlowComponent } from "../render/index.js";
export declare const equalFn: <T>(a: T, b: T) => boolean;
export declare const $PROXY: unique symbol;
export declare const $TRACK: unique symbol;
export declare const $DEVCOMP: unique symbol;
export declare var Owner: Owner | null;
export declare let Transition: TransitionState | null;
declare let ExternalSourceFactory: ExternalSourceFactory | null;
declare global {
    var _$afterUpdate: (() => void) | undefined;
    var _$afterCreateRoot: ((root: Owner) => void) | undefined;
}
export declare type ComputationState = 0 | 1 | 2;
export interface SignalState<T> {
    value?: T;
    observers: Computation<any>[] | null;
    observerSlots: number[] | null;
    tValue?: T;
    comparator?: (prev: T, next: T) => boolean;
    name?: string;
}
export interface Owner {
    owned: Computation<any>[] | null;
    cleanups: (() => void)[] | null;
    owner: Owner | null;
    context: any | null;
    sourceMap?: Record<string, {
        value: unknown;
    }>;
    name?: string;
    componentName?: string;
}
export interface Computation<Init, Next extends Init = Init> extends Owner {
    fn: EffectFunction<Init, Next>;
    state: ComputationState;
    tState?: ComputationState;
    sources: SignalState<Next>[] | null;
    sourceSlots: number[] | null;
    value?: Init;
    updatedAt: number | null;
    pure: boolean;
    user?: boolean;
    suspense?: SuspenseContextType;
}
export interface TransitionState {
    sources: Set<SignalState<any>>;
    effects: Computation<any>[];
    promises: Set<Promise<any>>;
    disposed: Set<Computation<any>>;
    queue: Set<Computation<any>>;
    scheduler?: (fn: () => void) => unknown;
    running: boolean;
    done?: Promise<void>;
    resolve?: () => void;
}
declare type ExternalSourceFactory = <Prev, Next extends Prev = Prev>(fn: EffectFunction<Prev, Next>, trigger: () => void) => ExternalSource;
export interface ExternalSource {
    track: EffectFunction<any, any>;
    dispose: () => void;
}
export declare type RootFunction<T> = (dispose: () => void) => T;
/**
 * Creates a new non-tracked reactive context that doesn't auto-dispose
 *
 * @param fn a function in which the reactive state is scoped
 * @param detachedOwner optional reactive context to bind the root to
 * @returns the output of \`fn\`.
 *
 * @description https://www.solidjs.com/docs/latest/api#createroot
 */
export declare function createRoot<T>(fn: RootFunction<T>, detachedOwner?: Owner): T;
export declare type Accessor<T> = () => T;
export declare type Setter<T> = (undefined extends T ? () => undefined : {}) & (<U extends T>(value: (prev: T) => U) => U) & (<U extends T>(value: Exclude<U, Function>) => U) & (<U extends T>(value: Exclude<U, Function> | ((prev: T) => U)) => U);
export declare type Signal<T> = [get: Accessor<T>, set: Setter<T>];
export interface SignalOptions<T> extends MemoOptions<T> {
    internal?: boolean;
}
/**
 * Creates a simple reactive state with a getter and setter
 * \`\`\`typescript
 * const [state: Accessor<T>, setState: Setter<T>] = createSignal<T>(
 *  value: T,
 *  options?: { name?: string, equals?: false | ((prev: T, next: T) => boolean) }
 * )
 * \`\`\`
 * @param value initial value of the state; if empty, the state's type will automatically extended with undefined; otherwise you need to extend the type manually if you want setting to undefined not be an error
 * @param options optional object with a name for debugging purposes and equals, a comparator function for the previous and next value to allow fine-grained control over the reactivity
 *
 * @returns \`\`\`typescript
 * [state: Accessor<T>, setState: Setter<T>]
 * \`\`\`
 * * the Accessor is merely a function that returns the current value and registers each call to the reactive root
 * * the Setter is a function that allows directly setting or mutating the value:
 * \`\`\`typescript
 * const [count, setCount] = createSignal(0);
 * setCount(count => count + 1);
 * \`\`\`
 *
 * @description https://www.solidjs.com/docs/latest/api#createsignal
 */
export declare function createSignal<T>(): Signal<T | undefined>;
export declare function createSignal<T>(value: T, options?: SignalOptions<T>): Signal<T>;
export interface BaseOptions {
    name?: string;
}
export declare type NoInfer<T extends any> = [T][T extends any ? 0 : never];
export interface EffectOptions extends BaseOptions {
}
export declare type EffectFunction<Prev, Next extends Prev = Prev> = (v: Prev) => Next;
/**
 * Creates a reactive computation that runs immediately before render, mainly used to write to other reactive primitives
 * \`\`\`typescript
 * export function createComputed<Next, Init = Next>(
 *   fn: (v: Init | Next) => Next,
 *   value?: Init,
 *   options?: { name?: string }
 * ): void;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createcomputed
 */
export declare function createComputed<Next>(fn: EffectFunction<undefined | NoInfer<Next>, Next>): void;
export declare function createComputed<Next, Init = Next>(fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions): void;
/**
 * Creates a reactive computation that runs during the render phase as DOM elements are created and updated but not necessarily connected
 * \`\`\`typescript
 * export function createRenderEffect<T>(
 *   fn: (v: T) => T,
 *   value?: T,
 *   options?: { name?: string }
 * ): void;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createrendereffect
 */
export declare function createRenderEffect<Next>(fn: EffectFunction<undefined | NoInfer<Next>, Next>): void;
export declare function createRenderEffect<Next, Init = Next>(fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions): void;
/**
 * Creates a reactive computation that runs after the render phase
 * \`\`\`typescript
 * export function createEffect<T>(
 *   fn: (v: T) => T,
 *   value?: T,
 *   options?: { name?: string }
 * ): void;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createeffect
 */
export declare function createEffect<Next>(fn: EffectFunction<undefined | NoInfer<Next>, Next>): void;
export declare function createEffect<Next, Init = Next>(fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions): void;
/**
 * Creates a reactive computation that runs after the render phase with flexible tracking
 * \`\`\`typescript
 * export function createReaction(
 *   onInvalidate: () => void,
 *   options?: { name?: string }
 * ): (fn: () => void) => void;
 * \`\`\`
 * @param invalidated a function that is called when tracked function is invalidated.
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createreaction
 */
export declare function createReaction(onInvalidate: () => void, options?: EffectOptions): (tracking: () => void) => void;
export interface Memo<Prev, Next = Prev> extends SignalState<Next>, Computation<Next> {
    tOwned?: Computation<Prev | Next, Next>[];
}
export interface MemoOptions<T> extends EffectOptions {
    equals?: false | ((prev: T, next: T) => boolean);
}
/**
 * Creates a readonly derived reactive memoized signal
 * \`\`\`typescript
 * export function createMemo<T>(
 *   fn: (v: T) => T,
 *   value?: T,
 *   options?: { name?: string, equals?: false | ((prev: T, next: T) => boolean) }
 * ): () => T;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes and use a custom comparison function in equals
 *
 * @description https://www.solidjs.com/docs/latest/api#creatememo
 */
export declare function createMemo<Next extends Prev, Prev = Next>(fn: EffectFunction<undefined | NoInfer<Prev>, Next>): Accessor<Next>;
export declare function createMemo<Next extends Prev, Init = Next, Prev = Next>(fn: EffectFunction<Init | Prev, Next>, value: Init, options?: MemoOptions<Next>): Accessor<Next>;
interface Unresolved {
    state: "unresolved";
    loading: false;
    error: undefined;
    latest: undefined;
    (): undefined;
}
interface Pending {
    state: "pending";
    loading: true;
    error: undefined;
    latest: undefined;
    (): undefined;
}
interface Ready<T> {
    state: "ready";
    loading: false;
    error: undefined;
    latest: T;
    (): T;
}
interface Refreshing<T> {
    state: "refreshing";
    loading: true;
    error: undefined;
    latest: T;
    (): T;
}
interface Errored {
    state: "errored";
    loading: false;
    error: any;
    latest: never;
    (): never;
}
export declare type Resource<T> = Unresolved | Pending | Ready<T> | Refreshing<T> | Errored;
export declare type InitializedResource<T> = Ready<T> | Refreshing<T> | Errored;
export declare type ResourceActions<T, R = unknown> = {
    mutate: Setter<T>;
    refetch: (info?: R) => T | Promise<T> | undefined | null;
};
export declare type ResourceSource<S> = S | false | null | undefined | (() => S | false | null | undefined);
export declare type ResourceFetcher<S, T, R = unknown> = (k: S, info: ResourceFetcherInfo<T, R>) => T | Promise<T>;
export declare type ResourceFetcherInfo<T, R = unknown> = {
    value: T | undefined;
    refetching: R | boolean;
};
export declare type ResourceOptions<T, S = unknown> = {
    initialValue?: T;
    name?: string;
    deferStream?: boolean;
    ssrLoadFrom?: "initial" | "server";
    storage?: (init: T | undefined) => [Accessor<T | undefined>, Setter<T | undefined>];
    onHydrated?: (k: S | undefined, info: {
        value: T | undefined;
    }) => void;
};
export declare type InitializedResourceOptions<T, S = unknown> = ResourceOptions<T, S> & {
    initialValue: T;
};
export declare type ResourceReturn<T, R = unknown> = [Resource<T>, ResourceActions<T | undefined, R>];
export declare type InitializedResourceReturn<T, R = unknown> = [
    InitializedResource<T>,
    ResourceActions<T, R>
];
/**
 * Creates a resource that wraps a repeated promise in a reactive pattern:
 * \`\`\`typescript
 * // Without source
 * const [resource, { mutate, refetch }] = createResource(fetcher, options);
 * // With source
 * const [resource, { mutate, refetch }] = createResource(source, fetcher, options);
 * \`\`\`
 * @param source - reactive data function which has its non-nullish and non-false values passed to the fetcher, optional
 * @param fetcher - function that receives the source (true if source not provided), the last or initial value, and whether the resource is being refetched, and returns a value or a Promise:
 * \`\`\`typescript
 * const fetcher: ResourceFetcher<S, T, R> = (
 *   sourceOutput: S,
 *   info: { value: T | undefined, refetching: R | boolean }
 * ) => T | Promise<T>;
 * \`\`\`
 * @param options - an optional object with the initialValue and the name (for debugging purposes); see {@link ResourceOptions}
 *
 * @returns \`\`\`typescript
 * [Resource<T>, { mutate: Setter<T>, refetch: () => void }]
 * \`\`\`
 *
 * * Setting an \`initialValue\` in the options will mean that both the prev() accessor and the resource should never return undefined (if that is wanted, you need to extend the type with undefined)
 * * \`mutate\` allows to manually overwrite the resource without calling the fetcher
 * * \`refetch\` will re-run the fetcher without changing the source, and if called with a value, that value will be passed to the fetcher via the \`refetching\` property on the fetcher's second parameter
 *
 * @description https://www.solidjs.com/docs/latest/api#createresource
 */
export declare function createResource<T, R = unknown>(fetcher: ResourceFetcher<true, T, R>, options: InitializedResourceOptions<NoInfer<T>, true>): InitializedResourceReturn<T, R>;
export declare function createResource<T, R = unknown>(fetcher: ResourceFetcher<true, T, R>, options?: ResourceOptions<NoInfer<T>, true>): ResourceReturn<T, R>;
export declare function createResource<T, S, R = unknown>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T, R>, options: InitializedResourceOptions<NoInfer<T>, S>): InitializedResourceReturn<T, R>;
export declare function createResource<T, S, R = unknown>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T, R>, options?: ResourceOptions<NoInfer<T>, S>): ResourceReturn<T, R>;
export interface DeferredOptions<T> {
    equals?: false | ((prev: T, next: T) => boolean);
    name?: string;
    timeoutMs?: number;
}
/**
 * Creates a reactive computation that only runs and notifies the reactive context when the browser is idle
 * \`\`\`typescript
 * export function createDeferred<T>(
 *   fn: (v: T) => T,
 *   options?: { timeoutMs?: number, name?: string, equals?: false | ((prev: T, next: T) => boolean) }
 * ): () => T);
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param options allows to set the timeout in milliseconds, use a custom comparison function and set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createdeferred
 */
export declare function createDeferred<T>(source: Accessor<T>, options?: DeferredOptions<T>): Accessor<T>;
export declare type EqualityCheckerFunction<T, U> = (a: U, b: T) => boolean;
/**
 * Creates a conditional signal that only notifies subscribers when entering or exiting their key matching the value
 * \`\`\`typescript
 * export function createSelector<T, U>(
 *   source: () => T
 *   fn: (a: U, b: T) => boolean,
 *   options?: { name?: string }
 * ): (k: U) => boolean;
 * \`\`\`
 * @param source
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param options allows to set a name in dev mode for debugging purposes, optional
 *
 * \`\`\`typescript
 * const isSelected = createSelector(selectedId);
 * <For each={list()}>
 *   {(item) => <li classList={{ active: isSelected(item.id) }}>{item.name}</li>}
 * </For>
 * \`\`\`
 *
 * This makes the operation O(2) instead of O(n).
 *
 * @description https://www.solidjs.com/docs/latest/api#createselector
 */
export declare function createSelector<T, U>(source: Accessor<T>, fn?: EqualityCheckerFunction<T, U>, options?: BaseOptions): (key: U) => boolean;
/**
 * Holds changes inside the block before the reactive context is updated
 * @param fn wraps the reactive updates that should be batched
 * @returns the return value from \`fn\`
 *
 * @description https://www.solidjs.com/docs/latest/api#batch
 */
export declare function batch<T>(fn: Accessor<T>): T;
/**
 * Ignores tracking context inside its scope
 * @param fn the scope that is out of the tracking context
 * @returns the return value of \`fn\`
 *
 * @description https://www.solidjs.com/docs/latest/api#untrack
 */
export declare function untrack<T>(fn: Accessor<T>): T;
/** @deprecated */
export declare type ReturnTypes<T> = T extends readonly Accessor<unknown>[] ? {
    [K in keyof T]: T[K] extends Accessor<infer I> ? I : never;
} : T extends Accessor<infer I> ? I : never;
export declare type AccessorArray<T> = [...Extract<{
    [K in keyof T]: Accessor<T[K]>;
}, readonly unknown[]>];
export declare type OnEffectFunction<S, Prev, Next extends Prev = Prev> = (input: S, prevInput: S | undefined, prev: Prev) => Next;
export interface OnOptions {
    defer?: boolean;
}
/**
 * on - make dependencies of a computation explicit
 * \`\`\`typescript
 * export function on<S, U>(
 *   deps: Accessor<S> | AccessorArray<S>,
 *   fn: (input: S, prevInput: S | undefined, prevValue: U | undefined) => U,
 *   options?: { defer?: boolean } = {}
 * ): (prevValue: U | undefined) => U;
 * \`\`\`
 * @param deps list of reactive dependencies or a single reactive dependency
 * @param fn computation on input; the current previous content(s) of input and the previous value are given as arguments and it returns a new value
 * @param options optional, allows deferred computation until at the end of the next change
 * @returns an effect function that is passed into createEffect. For example:
 *
 * \`\`\`typescript
 * createEffect(on(a, (v) => console.log(v, b())));
 *
 * // is equivalent to:
 * createEffect(() => {
 *   const v = a();
 *   untrack(() => console.log(v, b()));
 * });
 * \`\`\`
 *
 * @description https://www.solidjs.com/docs/latest/api#on
 */
export declare function on<S, Next extends Prev, Prev = Next>(deps: AccessorArray<S> | Accessor<S>, fn: OnEffectFunction<S, undefined | NoInfer<Prev>, Next>, options?: OnOptions & {
    defer?: false;
}): EffectFunction<undefined | NoInfer<Next>, NoInfer<Next>>;
export declare function on<S, Next extends Prev, Prev = Next>(deps: AccessorArray<S> | Accessor<S>, fn: OnEffectFunction<S, undefined | NoInfer<Prev>, Next>, options: OnOptions & {
    defer: true;
}): EffectFunction<undefined | NoInfer<Next>>;
/**
 * onMount - run an effect only after initial render on mount
 * @param fn an effect that should run only once on mount
 *
 * @description https://www.solidjs.com/docs/latest/api#onmount
 */
export declare function onMount(fn: () => void): void;
/**
 * onCleanup - run an effect once before the reactive scope is disposed
 * @param fn an effect that should run only once on cleanup
 *
 * @description https://www.solidjs.com/docs/latest/api#oncleanup
 */
export declare function onCleanup(fn: () => void): () => void;
/**
 * onError - run an effect whenever an error is thrown within the context of the child scopes
 * @param fn an error handler that receives the error
 *
 * * If the error is thrown again inside the error handler, it will trigger the next available parent handler
 *
 * @description https://www.solidjs.com/docs/latest/api#onerror
 */
export declare function onError(fn: (err: any) => void): void;
export declare function getListener(): Computation<any, any> | null;
export declare function getOwner(): Owner | null;
export declare function runWithOwner<T>(o: Owner, fn: () => T): T | undefined;
export declare function enableScheduling(scheduler?: typeof requestCallback): void;
/**
 * \`\`\`typescript
 * export function startTransition(fn: () => void) => Promise<void>
 *
 * @description https://www.solidjs.com/docs/latest/api#usetransition
 */
export declare function startTransition(fn: () => unknown): Promise<void>;
export declare type Transition = [Accessor<boolean>, (fn: () => void) => Promise<void>];
/**
 * \`\`\`typescript
 * export function useTransition(): [
 *   () => boolean,
 *   (fn: () => void, cb?: () => void) => void
 * ];
 * @returns a tuple; first value is an accessor if the transition is pending and a callback to start the transition
 *
 * @description https://www.solidjs.com/docs/latest/api#usetransition
 */
export declare function useTransition(): Transition;
export declare function resumeEffects(e: Computation<any>[]): void;
export interface DevComponent<T> extends Memo<JSX.Element> {
    props: T;
    componentName: string;
}
export declare function devComponent<T>(Comp: (props: T) => JSX.Element, props: T): JSX.Element;
export declare function hashValue(v: any): string;
export declare function registerGraph(name: string, value: {
    value: unknown;
}): string;
interface GraphRecord {
    [k: string]: GraphRecord | unknown;
}
export declare function serializeGraph(owner?: Owner | null): GraphRecord;
export declare type ContextProviderComponent<T> = FlowComponent<{
    value: T;
}>;
export interface Context<T> {
    id: symbol;
    Provider: ContextProviderComponent<T>;
    defaultValue: T;
}
/**
 * Creates a Context to handle a state scoped for the children of a component
 * \`\`\`typescript
 * interface Context<T> {
 *   id: symbol;
 *   Provider: FlowComponent<{ value: T }>;
 *   defaultValue: T;
 * }
 * export function createContext<T>(
 *   defaultValue?: T,
 *   options?: { name?: string }
 * ): Context<T | undefined>;
 * \`\`\`
 * @param defaultValue optional default to inject into context
 * @param options allows to set a name in dev mode for debugging purposes
 * @returns The context that contains the Provider Component and that can be used with \`useContext\`
 *
 * @description https://www.solidjs.com/docs/latest/api#createcontext
 */
export declare function createContext<T>(defaultValue?: undefined, options?: EffectOptions): Context<T | undefined>;
export declare function createContext<T>(defaultValue: T, options?: EffectOptions): Context<T>;
/**
 * use a context to receive a scoped state from a parent's Context.Provider
 *
 * @param context Context object made by \`createContext\`
 * @returns the current or \`defaultValue\`, if present
 *
 * @description https://www.solidjs.com/docs/latest/api#usecontext
 */
export declare function useContext<T>(context: Context<T>): T;
export declare type ResolvedJSXElement = Exclude<JSX.Element, JSX.ArrayElement | JSX.FunctionElement>;
export declare type ResolvedChildren = ResolvedJSXElement | ResolvedJSXElement[];
export declare type ChildrenReturn = Accessor<ResolvedChildren> & {
    toArray: () => ResolvedJSXElement[];
};
/**
 * Resolves child elements to help interact with children
 *
 * @param fn an accessor for the children
 * @returns a accessor of the same children, but resolved
 *
 * @description https://www.solidjs.com/docs/latest/api#children
 */
export declare function children(fn: Accessor<JSX.Element>): ChildrenReturn;
export declare type SuspenseContextType = {
    increment?: () => void;
    decrement?: () => void;
    inFallback?: () => boolean;
    effects?: Computation<any>[];
    resolved?: boolean;
};
declare type SuspenseContext = Context<SuspenseContextType> & {
    active?(): boolean;
    increment?(): void;
    decrement?(): void;
};
declare let SuspenseContext: SuspenseContext;
export declare function getSuspenseContext(): SuspenseContext;
export declare function enableExternalSource(factory: ExternalSourceFactory): void;
export declare function readSignal(this: SignalState<any> | Memo<any>): any;
export declare function writeSignal(node: SignalState<any> | Memo<any>, value: any, isComp?: boolean): any;
export {};
`,"types/render/Suspense.d.ts":`import type { JSX } from "../jsx.js";
/**
 * **[experimental]** controls the order in which suspended content is rendered
 *
 * @description https://www.solidjs.com/docs/latest/api#%3Csuspenselist%3E-(experimental)
 */
export declare function SuspenseList(props: {
    children: JSX.Element;
    revealOrder: "forwards" | "backwards" | "together";
    tail?: "collapsed" | "hidden";
}): JSX.Element;
/**
 * tracks all resources inside a component and renders a fallback until they are all resolved
 * \`\`\`typescript
 * const AsyncComponent = lazy(() => import('./component'));
 *
 * <Suspense fallback={<LoadingIndicator />}>
 *   <AsyncComponent />
 * </Suspense>
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#%3Csuspense%3E
 */
export declare function Suspense(props: {
    fallback?: JSX.Element;
    children: JSX.Element;
}): JSX.Element;
`,"types/render/component.d.ts":`import type { JSX } from "../jsx.js";
export declare function enableHydration(): void;
/**
 * A general \`Component\` has no implicit \`children\` prop.  If desired, you can
 * specify one as in \`Component<{name: String, children: JSX.Element}>\`.
 */
export declare type Component<P = {}> = (props: P) => JSX.Element;
/**
 * Extend props to forbid the \`children\` prop.
 * Use this to prevent accidentally passing \`children\` to components that
 * would silently throw them away.
 */
export declare type VoidProps<P = {}> = P & {
    children?: never;
};
/**
 * \`VoidComponent\` forbids the \`children\` prop.
 * Use this to prevent accidentally passing \`children\` to components that
 * would silently throw them away.
 */
export declare type VoidComponent<P = {}> = Component<VoidProps<P>>;
/**
 * Extend props to allow an optional \`children\` prop with the usual
 * type in JSX, \`JSX.Element\` (which allows elements, arrays, functions, etc.).
 * Use this for components that you want to accept children.
 */
export declare type ParentProps<P = {}> = P & {
    children?: JSX.Element;
};
/**
 * \`ParentComponent\` allows an optional \`children\` prop with the usual
 * type in JSX, \`JSX.Element\` (which allows elements, arrays, functions, etc.).
 * Use this for components that you want to accept children.
 */
export declare type ParentComponent<P = {}> = Component<ParentProps<P>>;
/**
 * Extend props to require a \`children\` prop with the specified type.
 * Use this for components where you need a specific child type,
 * typically a function that receives specific argument types.
 * Note that all JSX <Elements> are of the type \`JSX.Element\`.
 */
export declare type FlowProps<P = {}, C = JSX.Element> = P & {
    children: C;
};
/**
 * \`FlowComponent\` requires a \`children\` prop with the specified type.
 * Use this for components where you need a specific child type,
 * typically a function that receives specific argument types.
 * Note that all JSX <Elements> are of the type \`JSX.Element\`.
 */
export declare type FlowComponent<P = {}, C = JSX.Element> = Component<FlowProps<P, C>>;
/** @deprecated: use \`ParentProps\` instead */
export declare type PropsWithChildren<P = {}> = ParentProps<P>;
export declare type ValidComponent = keyof JSX.IntrinsicElements | Component<any> | (string & {});
/**
 * Takes the props of the passed component and returns its type
 *
 * @example
 * ComponentProps<typeof Portal> // { mount?: Node; useShadow?: boolean; children: JSX.Element }
 * ComponentProps<'div'> // JSX.HTMLAttributes<HTMLDivElement>
 */
export declare type ComponentProps<T extends ValidComponent> = T extends Component<infer P> ? P : T extends keyof JSX.IntrinsicElements ? JSX.IntrinsicElements[T] : Record<string, unknown>;
/**
 * Type of \`props.ref\`, for use in \`Component\` or \`props\` typing.
 *
 * @example Component<{ref: Ref<Element>}>
 */
export declare type Ref<T> = T | ((val: T) => void);
export declare function createComponent<T>(Comp: Component<T>, props: T): JSX.Element;
declare type DistributeOverride<T, F> = T extends undefined ? F : T;
declare type Override<T, U> = T extends any ? U extends any ? {
    [K in keyof T]: K extends keyof U ? DistributeOverride<U[K], T[K]> : T[K];
} & {
    [K in keyof U]: K extends keyof T ? DistributeOverride<U[K], T[K]> : U[K];
} : T & U : T & U;
declare type OverrideSpread<T, U> = T extends any ? {
    [K in keyof ({
        [K in keyof T]: any;
    } & {
        [K in keyof U]?: any;
    } & {
        [K in U extends any ? keyof U : keyof U]?: any;
    })]: K extends keyof T ? Exclude<U extends any ? U[K & keyof U] : never, undefined> | T[K] : U extends any ? U[K & keyof U] : never;
} : T & U;
declare type Simplify<T> = T extends any ? {
    [K in keyof T]: T[K];
} : T;
declare type _MergeProps<T extends unknown[], Curr = {}> = T extends [
    infer Next | (() => infer Next),
    ...infer Rest
] ? _MergeProps<Rest, Override<Curr, Next>> : T extends [...infer Rest, infer Next | (() => infer Next)] ? Override<_MergeProps<Rest, Curr>, Next> : T extends [] ? Curr : T extends (infer I | (() => infer I))[] ? OverrideSpread<Curr, I> : Curr;
export declare type MergeProps<T extends unknown[]> = Simplify<_MergeProps<T>>;
export declare function mergeProps<T extends unknown[]>(...sources: T): MergeProps<T>;
export declare type SplitProps<T, K extends (readonly (keyof T)[])[]> = [
    ...{
        [P in keyof K]: P extends \`\${number}\` ? Pick<T, Extract<K[P], readonly (keyof T)[]>[number]> : never;
    },
    Omit<T, K[number][number]>
];
export declare function splitProps<T extends Record<any, any>, K extends [readonly (keyof T)[], ...(readonly (keyof T)[])[]]>(props: T, ...keys: K): SplitProps<T, K>;
export declare function lazy<T extends Component<any>>(fn: () => Promise<{
    default: T;
}>): T & {
    preload: () => Promise<{
        default: T;
    }>;
};
export declare function createUniqueId(): string;
export {};
`,"types/render/flow.d.ts":`import { Accessor } from "../reactive/signal.js";
import type { JSX } from "../jsx.js";
/**
 * creates a list elements from a list
 *
 * it receives a map function as its child that receives a list element and an accessor with the index and returns a JSX-Element; if the list is empty, an optional fallback is returned:
 * \`\`\`typescript
 * <For each={items} fallback={<div>No items</div>}>
 *   {(item, index) => <div data-index={index()}>{item}</div>}
 * </For>
 * \`\`\`
 * If you have a list with fixed indices and changing values, consider using \`<Index>\` instead.
 *
 * @description https://www.solidjs.com/docs/latest/api#%3Cfor%3E
 */
export declare function For<T extends readonly any[], U extends JSX.Element>(props: {
    each: T | undefined | null | false;
    fallback?: JSX.Element;
    children: (item: T[number], index: Accessor<number>) => U;
}): Accessor<U[]>;
/**
 * Non-keyed iteration over a list creating elements from its items
 *
 * To be used if you have a list with fixed indices, but changing values.
 * \`\`\`typescript
 * <Index each={items} fallback={<div>No items</div>}>
 *   {(item, index) => <div data-index={index}>{item()}</div>}
 * </Index>
 * \`\`\`
 * If you have a list with changing indices, better use \`<For>\`.
 *
 * @description https://www.solidjs.com/docs/latest/api#%3Cindex%3E
 */
export declare function Index<T extends readonly any[], U extends JSX.Element>(props: {
    each: T | undefined | null | false;
    fallback?: JSX.Element;
    children: (item: Accessor<T[number]>, index: number) => U;
}): Accessor<U[]>;
/**
 * Conditionally render its children or an optional fallback component
 * @description https://www.solidjs.com/docs/latest/api#%3Cshow%3E
 */
export declare function Show<T>(props: {
    when: T | undefined | null | false;
    keyed: true;
    fallback?: JSX.Element;
    children: JSX.Element | ((item: NonNullable<T>) => JSX.Element);
}): () => JSX.Element;
export declare function Show<T>(props: {
    when: T | undefined | null | false;
    keyed?: false;
    fallback?: JSX.Element;
    children: JSX.Element;
}): () => JSX.Element;
/**
 * switches between content based on mutually exclusive conditions
 * \`\`\`typescript
 * <Switch fallback={<FourOhFour />}>
 *   <Match when={state.route === 'home'}>
 *     <Home />
 *   </Match>
 *   <Match when={state.route === 'settings'}>
 *     <Settings />
 *   </Match>
 * </Switch>
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#%3Cswitch%3E%2F%3Cmatch%3E
 */
export declare function Switch(props: {
    fallback?: JSX.Element;
    children: JSX.Element;
}): Accessor<JSX.Element>;
export declare type MatchProps<T> = {
    when: T | undefined | null | false;
    keyed?: boolean;
    children: JSX.Element | ((item: NonNullable<T>) => JSX.Element);
};
/**
 * selects a content based on condition when inside a \`<Switch>\` control flow
 * \`\`\`typescript
 * <Match when={condition()}>
 *   <Content/>
 * </Match>
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#%3Cswitch%3E%2F%3Cmatch%3E
 */
export declare function Match<T>(props: {
    when: T | undefined | null | false;
    keyed: true;
    children: JSX.Element | ((item: NonNullable<T>) => JSX.Element);
}): JSX.Element;
export declare function Match<T>(props: {
    when: T | undefined | null | false;
    keyed?: false;
    children: JSX.Element;
}): JSX.Element;
export declare function resetErrorBoundaries(): void;
/**
 * catches uncaught errors inside components and renders a fallback content
 *
 * Also supports a callback form that passes the error and a reset function:
 * \`\`\`typescript
 * <ErrorBoundary fallback={
 *   (err, reset) => <div onClick={reset}>Error: {err.toString()}</div>
 * }>
 *   <MyComp />
 * </ErrorBoundary>
 * \`\`\`
 * Errors thrown from the fallback can be caught by a parent ErrorBoundary
 *
 * @description https://www.solidjs.com/docs/latest/api#%3Cerrorboundary%3E
 */
export declare function ErrorBoundary(props: {
    fallback: JSX.Element | ((err: any, reset: () => void) => JSX.Element);
    children: JSX.Element;
}): Accessor<JSX.Element>;
`,"types/render/hydration.d.ts":`export declare type HydrationContext = {
    id: string;
    count: number;
};
declare type SharedConfig = {
    context?: HydrationContext;
    resources?: {
        [key: string]: any;
    };
    load?: (id: string) => Promise<any> | any | undefined;
    gather?: (key: string) => void;
    registry?: Map<string, Element>;
    done?: boolean;
};
export declare const sharedConfig: SharedConfig;
export declare function setHydrateContext(context?: HydrationContext): void;
export declare function nextHydrateContext(): HydrationContext | undefined;
export {};
`,"types/render/index.d.ts":`export * from "./component.js";
export * from "./flow.js";
export * from "./Suspense.js";
export { sharedConfig } from "./hydration.js";
`,"types/server/index.d.ts":`export { createRoot, createSignal, createComputed, createRenderEffect, createEffect, createReaction, createDeferred, createSelector, createMemo, getListener, onMount, onCleanup, onError, untrack, batch, on, children, createContext, useContext, getOwner, runWithOwner, equalFn, requestCallback, mapArray, observable, from, $PROXY, $DEVCOMP, $TRACK, DEV, enableExternalSource } from "./reactive.js";
export { mergeProps, splitProps, createComponent, For, Index, Show, Switch, Match, ErrorBoundary, Suspense, SuspenseList, createResource, resetErrorBoundaries, enableScheduling, enableHydration, startTransition, useTransition, createUniqueId, lazy, sharedConfig } from "./rendering.js";
export type { Component, Resource } from "./rendering.js";
`,"types/server/reactive.d.ts":`export declare const equalFn: <T>(a: T, b: T) => boolean;
export declare const $PROXY: unique symbol;
export declare const $TRACK: unique symbol;
export declare const $DEVCOMP: unique symbol;
export declare const DEV: {};
export declare type Accessor<T> = () => T;
export declare type Setter<T> = undefined extends T ? <U extends T>(value?: (U extends Function ? never : U) | ((prev?: T) => U)) => U : <U extends T>(value: (U extends Function ? never : U) | ((prev: T) => U)) => U;
export declare type Signal<T> = [get: Accessor<T>, set: Setter<T>];
export declare const BRANCH: unique symbol;
export declare function castError(err: any): string | Error;
export declare let Owner: Owner | null;
interface Owner {
    owner: Owner | null;
    context: any | null;
}
export declare function createRoot<T>(fn: (dispose: () => void) => T, detachedOwner?: Owner): T;
export declare function createSignal<T>(value: T, options?: {
    equals?: false | ((prev: T, next: T) => boolean);
    name?: string;
}): [get: () => T, set: (v: (T extends Function ? never : T) | ((prev: T) => T)) => T];
export declare function createComputed<T>(fn: (v?: T) => T, value?: T): void;
export declare const createRenderEffect: typeof createComputed;
export declare function createEffect<T>(fn: (v?: T) => T, value?: T): void;
export declare function createReaction(fn: () => void): (fn: () => void) => void;
export declare function createMemo<T>(fn: (v?: T) => T, value?: T): () => T;
export declare function createDeferred<T>(source: () => T): () => T;
export declare function createSelector<T>(source: () => T, fn?: (k: T, value: T) => boolean): (k: T) => boolean;
export declare function batch<T>(fn: () => T): T;
export declare const untrack: typeof batch;
export declare function on<T, U>(deps: Array<() => T> | (() => T), fn: (value: Array<T> | T, prev?: Array<T> | T, prevResults?: U) => U, options?: {
    defer?: boolean;
}): (prev?: U) => U | undefined;
export declare function onMount(fn: () => void): void;
export declare function onCleanup(fn: () => void): () => void;
export declare function cleanNode(node: {
    cleanups?: Function[] | null;
}): void;
export declare function onError(fn: (err: any) => void): void;
export declare function getListener(): null;
export interface Context<T> {
    id: symbol;
    Provider: (props: {
        value: T;
        children: any;
    }) => any;
    defaultValue?: T;
}
export declare function createContext<T>(defaultValue?: T): Context<T>;
export declare function useContext<T>(context: Context<T>): T;
export declare function getOwner(): Owner | null;
declare type ChildrenReturn = Accessor<any> & {
    toArray: () => any[];
};
export declare function children(fn: () => any): ChildrenReturn;
export declare function runWithOwner<T>(o: Owner, fn: () => T): T | undefined;
export declare function lookup(owner: Owner | null, key: symbol | string): any;
export interface Task {
    id: number;
    fn: ((didTimeout: boolean) => void) | null;
    startTime: number;
    expirationTime: number;
}
export declare function requestCallback(fn: () => void, options?: {
    timeout: number;
}): Task;
export declare function cancelCallback(task: Task): void;
export declare function mapArray<T, U>(list: () => T[], mapFn: (v: T, i: () => number) => U, options?: {
    fallback?: () => any;
}): () => U[];
export declare type ObservableObserver<T> = ((v: T) => void) | {
    next: (v: T) => void;
    error?: (v: any) => void;
    complete?: (v: boolean) => void;
};
export declare function observable<T>(input: Accessor<T>): {
    subscribe(observer: ObservableObserver<T>): {
        unsubscribe(): void;
    };
    [Symbol.observable](): any;
};
export declare function from<T>(producer: ((setter: Setter<T>) => () => void) | {
    subscribe: (fn: (v: T) => void) => (() => void) | {
        unsubscribe: () => void;
    };
}): Accessor<T>;
export declare function enableExternalSource(factory: any): void;
export {};
`,"types/server/rendering.d.ts":`import { Setter, Signal } from "./reactive.js";
import type { JSX } from "../jsx.js";
export declare type Component<P = {}> = (props: P) => JSX.Element;
export declare type VoidProps<P = {}> = P & {
    children?: never;
};
export declare type VoidComponent<P = {}> = Component<VoidProps<P>>;
export declare type ParentProps<P = {}> = P & {
    children?: JSX.Element;
};
export declare type ParentComponent<P = {}> = Component<ParentProps<P>>;
export declare type FlowProps<P = {}, C = JSX.Element> = P & {
    children: C;
};
export declare type FlowComponent<P = {}, C = JSX.Element> = Component<FlowProps<P, C>>;
export declare type Ref<T> = T | ((val: T) => void);
export declare type ValidComponent = keyof JSX.IntrinsicElements | Component<any> | (string & {});
export declare type ComponentProps<T extends ValidComponent> = T extends Component<infer P> ? P : T extends keyof JSX.IntrinsicElements ? JSX.IntrinsicElements[T] : Record<string, unknown>;
declare type SharedConfig = {
    context?: HydrationContext;
};
export declare const sharedConfig: SharedConfig;
export declare function createUniqueId(): string;
export declare function createComponent<T>(Comp: (props: T) => JSX.Element, props: T): JSX.Element;
export declare function mergeProps<T, U>(source: T, source1: U): T & U;
export declare function mergeProps<T, U, V>(source: T, source1: U, source2: V): T & U & V;
export declare function mergeProps<T, U, V, W>(source: T, source1: U, source2: V, source3: W): T & U & V & W;
export declare function splitProps<T extends object, K1 extends keyof T>(props: T, ...keys: [K1[]]): [Pick<T, K1>, Omit<T, K1>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T>(props: T, ...keys: [K1[], K2[]]): [Pick<T, K1>, Pick<T, K2>, Omit<T, K1 | K2>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T, K3 extends keyof T>(props: T, ...keys: [K1[], K2[], K3[]]): [Pick<T, K1>, Pick<T, K2>, Pick<T, K3>, Omit<T, K1 | K2 | K3>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T, K3 extends keyof T, K4 extends keyof T>(props: T, ...keys: [K1[], K2[], K3[], K4[]]): [Pick<T, K1>, Pick<T, K2>, Pick<T, K3>, Pick<T, K4>, Omit<T, K1 | K2 | K3 | K4>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T, K3 extends keyof T, K4 extends keyof T, K5 extends keyof T>(props: T, ...keys: [K1[], K2[], K3[], K4[], K5[]]): [
    Pick<T, K1>,
    Pick<T, K2>,
    Pick<T, K3>,
    Pick<T, K4>,
    Pick<T, K5>,
    Omit<T, K1 | K2 | K3 | K4 | K5>
];
export declare function For<T>(props: {
    each: T[];
    fallback?: string;
    children: (item: T, index: () => number) => string;
}): string | any[] | undefined;
export declare function Index<T>(props: {
    each: T[];
    fallback?: string;
    children: (item: () => T, index: number) => string;
}): string | any[] | undefined;
export declare function Show<T>(props: {
    when: T | undefined | null | false;
    keyed?: boolean;
    fallback?: string;
    children: string | ((item: NonNullable<T>) => string);
}): string;
export declare function Switch(props: {
    fallback?: string;
    children: MatchProps<unknown> | MatchProps<unknown>[];
}): string;
declare type MatchProps<T> = {
    when: T | false;
    keyed?: boolean;
    children: string | ((item: T) => string);
};
export declare function Match<T>(props: MatchProps<T>): MatchProps<T>;
export declare function resetErrorBoundaries(): void;
export declare function ErrorBoundary(props: {
    fallback: string | ((err: any, reset: () => void) => string);
    children: string;
}): string | ((err: any, reset: () => void) => string) | {
    t: string;
};
export interface Resource<T> {
    (): T | undefined;
    state: "unresolved" | "pending" | "ready" | "refreshing" | "errored";
    loading: boolean;
    error: any;
    latest: T | undefined;
}
declare type SuspenseContextType = {
    resources: Map<string, {
        loading: boolean;
        error: any;
    }>;
    completed: () => void;
};
export declare type ResourceActions<T> = {
    mutate: Setter<T>;
    refetch: (info?: unknown) => void;
};
export declare type ResourceReturn<T> = [Resource<T>, ResourceActions<T>];
export declare type ResourceSource<S> = S | false | null | undefined | (() => S | false | null | undefined);
export declare type ResourceFetcher<S, T> = (k: S, info: ResourceFetcherInfo<T>) => T | Promise<T>;
export declare type ResourceFetcherInfo<T> = {
    value: T | undefined;
    refetching?: unknown;
};
export declare type ResourceOptions<T> = undefined extends T ? {
    initialValue?: T;
    name?: string;
    deferStream?: boolean;
    ssrLoadFrom?: "initial" | "server";
    storage?: () => Signal<T | undefined>;
    onHydrated?: <S, T>(k: S, info: ResourceFetcherInfo<T>) => void;
} : {
    initialValue: T;
    name?: string;
    deferStream?: boolean;
    ssrLoadFrom?: "initial" | "server";
    storage?: (v?: T) => Signal<T | undefined>;
    onHydrated?: <S, T>(k: S, info: ResourceFetcherInfo<T>) => void;
};
export declare function createResource<T, S = true>(fetcher: ResourceFetcher<S, T>, options?: ResourceOptions<undefined>): ResourceReturn<T | undefined>;
export declare function createResource<T, S = true>(fetcher: ResourceFetcher<S, T>, options: ResourceOptions<T>): ResourceReturn<T>;
export declare function createResource<T, S>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T>, options?: ResourceOptions<undefined>): ResourceReturn<T | undefined>;
export declare function createResource<T, S>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T>, options: ResourceOptions<T>): ResourceReturn<T>;
export declare function lazy<T extends Component<any>>(fn: () => Promise<{
    default: T;
}>): T & {
    preload: () => Promise<{
        default: T;
    }>;
};
export declare function enableScheduling(): void;
export declare function enableHydration(): void;
export declare function startTransition(fn: () => any): void;
export declare function useTransition(): [() => boolean, (fn: () => any) => void];
declare type HydrationContext = {
    id: string;
    count: number;
    writeResource: (id: string, v: Promise<any> | any, error?: boolean, deferStream?: boolean) => void;
    replace: (id: string, replacement: () => any) => void;
    block: (p: Promise<any>) => void;
    resources: Record<string, any>;
    suspense: Record<string, SuspenseContextType>;
    registerFragment: (v: string) => (v?: string, err?: any) => boolean;
    async?: boolean;
    noHydrate: boolean;
};
export declare function SuspenseList(props: {
    children: string;
    revealOrder: "forwards" | "backwards" | "together";
    tail?: "collapsed" | "hidden";
}): string;
export declare function Suspense(props: {
    fallback?: string;
    children: string;
}): string | number | boolean | Node | JSX.ArrayElement | JSX.FunctionElement | {
    t: string;
} | null | undefined;
export {};
`,"universal/types/index.d.ts":`import type { RendererOptions, Renderer } from "./universal.js";
export declare function createRenderer<NodeType>(options: RendererOptions<NodeType>): Renderer<NodeType>;
`,"universal/types/universal.d.ts":`export interface RendererOptions<NodeType> {
  createElement(tag: string): NodeType;
  createTextNode(value: string): NodeType;
  replaceText(textNode: NodeType, value: string): void;
  isTextNode(node: NodeType): boolean;
  setProperty<T>(node: NodeType, name: string, value: T, prev?: T): void;
  insertNode(parent: NodeType, node: NodeType, anchor?: NodeType): void;
  removeNode(parent: NodeType, node: NodeType): void;
  getParentNode(node: NodeType): NodeType | undefined;
  getFirstChild(node: NodeType): NodeType | undefined;
  getNextSibling(node: NodeType): NodeType | undefined;
}

export interface Renderer<NodeType> {
  render(code: () => NodeType, node: NodeType): () => void;
  effect<T>(fn: (prev?: T) => T, init?: T): void;
  memo<T>(fn: () => T, equal: boolean): () => T;
  createComponent<T>(Comp: (props: T) => NodeType, props: T): NodeType;
  createElement(tag: string): NodeType;
  createTextNode(value: string): NodeType;
  insertNode(parent: NodeType, node: NodeType, anchor?: NodeType): void;
  insert<T>(parent: any, accessor: (() => T) | T, marker?: any | null): NodeType;
  spread<T>(node: any, accessor: (() => T) | T, skipChildren?: Boolean): void;
  setProp<T>(node: NodeType, name: string, value: T, prev?: T): T;
  mergeProps(...sources: unknown[]): unknown;
}

export function createRenderer<NodeType>(options: RendererOptions<NodeType>): Renderer<NodeType>;

`,"web/types/client.d.ts":`import { JSX } from "./jsx.js";
export const Aliases: Record<string, string>;
export const PropAliases: Record<string, string>;
export const Properties: Set<string>;
export const ChildProperties: Set<string>;
export const DelegatedEvents: Set<string>;
export const DOMElements: Set<string>;
export const SVGElements: Set<string>;
export const SVGNamespace: Record<string, string>;

type MountableElement = Element | Document | ShadowRoot | DocumentFragment | Node;
export function render(code: () => JSX.Element, element: MountableElement): () => void;
export function template(html: string, count: number, isSVG?: boolean): Element;
export function effect<T>(fn: (prev?: T) => T, init?: T): void;
export function memo<T>(fn: () => T, equal: boolean): () => T;
export function untrack<T>(fn: () => T): T;
export function insert<T>(
  parent: MountableElement,
  accessor: (() => T) | T,
  marker?: Node | null,
  init?: JSX.Element
): JSX.Element;
export function createComponent<T>(Comp: (props: T) => JSX.Element, props: T): JSX.Element;
export function delegateEvents(eventNames: string[], d?: Document): void;
export function clearDelegatedEvents(d?: Document): void;
export function spread<T>(
  node: Element,
  accessor: (() => T) | T,
  isSVG?: Boolean,
  skipChildren?: Boolean
): void;
export function assign(node: Element, props: any, isSVG?: Boolean, skipChildren?: Boolean): void;
export function setAttribute(node: Element, name: string, value: string): void;
export function setAttributeNS(node: Element, namespace: string, name: string, value: string): void;
export function className(node: Element, value: string): void;
export function innerHTML(node: Element, content: string): void;
export function addEventListener(
  node: Element,
  name: string,
  handler: () => void,
  delegate: boolean
): void;
export function classList(
  node: Element,
  value: { [k: string]: boolean },
  prev?: { [k: string]: boolean }
): void;
export function style(
  node: Element,
  value: { [k: string]: string },
  prev?: { [k: string]: string }
): void;
export function getOwner(): unknown;
export function mergeProps(...sources: unknown[]): unknown;
export function dynamicProperty(props: unknown, key: string): unknown;

export function hydrate(
  fn: () => JSX.Element,
  node: MountableElement,
  options?: { renderId?: string, owner?: unknown }
): () => void;
export function getHydrationKey(): string;
export function getNextElement(template?: HTMLTemplateElement): Element;
export function getNextMatch(start: Node, elementName: string): Element;
export function getNextMarker(start: Node): [Node, Array<Node>];
export function useAssets(fn: () => JSX.Element): void;
export function getAssets(): string;
export function HydrationScript(): JSX.Element;
export function generateHydrationScript(): string;
export function Assets(props: { children?: JSX.Element }): JSX.Element;
export function Hydration(props: { children?: JSX.Element }): JSX.Element;
export function NoHydration(props: { children?: JSX.Element }): JSX.Element;`,"web/types/core.d.ts":`export { getOwner, createComponent, createRoot as root, createRenderEffect as effect, createMemo as memo, sharedConfig, untrack, mergeProps } from "solid-js";
`,"web/types/index.d.ts":`import { hydrate as hydrateCore } from "./client.js";
import { JSX, Accessor, ComponentProps, ValidComponent } from "solid-js";
export * from "./client.js";
export { For, Show, Suspense, SuspenseList, Switch, Match, Index, ErrorBoundary, mergeProps } from "solid-js";
export * from "./server-mock.js";
export declare const isServer = false;
export declare const hydrate: typeof hydrateCore;
/**
 * renders components somewhere else in the DOM
 *
 * Useful for inserting modals and tooltips outside of an cropping layout. If no mount point is given, the portal is inserted in document.body; it is wrapped in a \`<div>\` unless the target is document.head or \`isSVG\` is true. setting \`useShadow\` to true places the element in a shadow root to isolate styles.
 *
 * @description https://www.solidjs.com/docs/latest/api#%3Cportal%3E
 */
export declare function Portal<T extends boolean = false, S extends boolean = false>(props: {
    mount?: Node;
    useShadow?: T;
    isSVG?: S;
    ref?: (S extends true ? SVGGElement : HTMLDivElement) | ((el: (T extends true ? {
        readonly shadowRoot: ShadowRoot;
    } : {}) & (S extends true ? SVGGElement : HTMLDivElement)) => void);
    children: JSX.Element;
}): Text;
declare type DynamicProps<T extends ValidComponent, P = ComponentProps<T>> = {
    [K in keyof P]: P[K];
} & {
    component: T | undefined;
};
/**
 * renders an arbitrary custom or native component and passes the other props
 * \`\`\`typescript
 * <Dynamic component={multiline() ? 'textarea' : 'input'} value={value()} />
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#%3Cdynamic%3E
 */
export declare function Dynamic<T extends ValidComponent>(props: DynamicProps<T>): Accessor<JSX.Element>;
`,"web/types/jsx.d.ts":`export type { JSX } from "../../types/jsx.js";
`,"web/types/server-mock.d.ts":`export declare function renderToString<T>(fn: () => T, options?: {
    nonce?: string;
    renderId?: string;
}): string;
export declare function renderToStringAsync<T>(fn: () => T, options?: {
    timeoutMs?: number;
    nonce?: string;
    renderId?: string;
}): Promise<string>;
export declare function renderToStream<T>(fn: () => T, options?: {
    nonce?: string;
    renderId?: string;
    onCompleteShell?: (info: {
        write: (v: string) => void;
    }) => void;
    onCompleteAll?: (info: {
        write: (v: string) => void;
    }) => void;
}): {
    pipe: (writable: {
        write: (v: string) => void;
    }) => void;
    pipeTo: (writable: WritableStream) => void;
};
export declare function ssr(template: string[] | string, ...nodes: any[]): {
    t: string;
};
export declare function ssrElement(name: string, props: any, children: any, needsId: boolean): {
    t: string;
};
export declare function ssrClassList(value: {
    [k: string]: boolean;
}): string;
export declare function ssrStyle(value: {
    [k: string]: string;
}): string;
export declare function ssrAttribute(key: string, value: boolean): string;
export declare function ssrHydrationKey(): string;
export declare function resolveSSRNode(node: any): string;
export declare function escape(html: string): string;
/**
 * @deprecated Replaced by ssrElement
 */
export declare function ssrSpread(props: any, isSVG: boolean, skipChildren: boolean): void;
export declare type LegacyResults = {
    startWriting: () => void;
};
/**
 * @deprecated Replaced by renderToStream
 */
export declare function pipeToWritable<T>(fn: () => T, writable: WritableStream, options?: {
    nonce?: string;
    onReady?: (res: LegacyResults) => void;
    onCompleteAll?: () => void;
}): void;
/**
 * @deprecated Replaced by renderToStream
 */
export declare function pipeToNodeWritable<T>(fn: () => T, writable: {
    write: (v: string) => void;
}, options?: {
    nonce?: string;
    onReady?: (res: LegacyResults) => void;
    onCompleteAll?: () => void;
}): void;
`,"web/types/server.d.ts":`export function renderToString<T>(
  fn: () => T,
  options?: {
    nonce?: string;
    renderId?: string;
  }
): string;
export function renderToStringAsync<T>(
  fn: () => T,
  options?: {
    timeoutMs?: number;
    nonce?: string;
    renderId?: string;
  }
): Promise<string>;
export function renderToStream<T>(
  fn: () => T,
  options?: {
    nonce?: string;
    renderId?: string;
    onCompleteShell?: (info: { write: (v: string) => void }) => void;
    onCompleteAll?: (info: { write: (v: string) => void }) => void;
  }
): {
  pipe: (writable: { write: (v: string) => void }) => void;
  pipeTo: (writable: WritableStream) => void;
};

export function HydrationScript(props: { nonce?: string; eventNames?: string[] }): JSX.Element;
export function ssr(template: string[] | string, ...nodes: any[]): { t: string };
export function ssrElement(
  name: string,
  props: any,
  children: any,
  needsId: boolean
): { t: string };
export function ssrClassList(value: { [k: string]: boolean }): string;
export function ssrStyle(value: { [k: string]: string }): string;
export function ssrAttribute(key: string, value: any, isBoolean: boolean): string;
export function ssrHydrationKey(): string;
export function resolveSSRNode(node: any): string;
export function escape(html: string): string;
export function useAssets(fn: () => JSX.Element): void;
export function getAssets(): string;
export function getHydrationKey(): string;
export function effect<T>(fn: (prev?: T) => T, init?: T): void;
export function memo<T>(fn: () => T, equal: boolean): () => T;
export function createComponent<T>(Comp: (props: T) => JSX.Element, props: T): JSX.Element;
export function mergeProps(...sources: unknown[]): unknown;
export function getOwner(): unknown;
export function generateHydrationScript(options: { nonce?: string; eventNames?: string[] }): string;
export function stringify(root: unknown): string;

export function Hydration(props: { children?: JSX.Element }): JSX.Element;
export function NoHydration(props: { children?: JSX.Element }): JSX.Element;
export function Assets(props: { children?: JSX.Element }): JSX.Element;

// deprecated
export type LegacyResults = {
  write: (text: string) => void;
  startWriting: () => void;
};
export function pipeToWritable<T>(
  fn: () => T,
  writable: WritableStream,
  options?: {
    nonce?: string;
    onReady?: (res: LegacyResults) => void;
    onCompleteAll?: () => void;
  }
): void;
export function pipeToNodeWritable<T>(
  fn: () => T,
  writable: { write: (v: string) => void },
  options?: {
    nonce?: string;
    onReady?: (res: LegacyResults) => void;
    onCompleteAll?: () => void;
  }
): void;
`,"h/jsx-runtime/types/index.d.ts":`import h from "solid-js/h";
export type { JSX } from "./jsx";
import type { JSX } from "./jsx";
declare function Fragment(props: {
    children: JSX.Element;
}): JSX.Element;
export { h as jsx, h as jsxs, h as jsxDEV, Fragment };
`,"h/jsx-runtime/types/jsx.d.ts":`import * as csstype from 'csstype';

/**
 * Based on JSX types for Surplus and Inferno and adapted for \`dom-expressions\`.
 *
 * https://github.com/adamhaile/surplus/blob/master/index.d.ts
 * https://github.com/infernojs/inferno/blob/master/packages/inferno/src/core/types.ts
 */
type DOMElement = Element;

export namespace JSX {
  type FunctionMaybe<T = unknown> = ({ (): T }) | T;
  type Element =
    | Node
    | ArrayElement
    | FunctionElement
    | (string & {})
    | number
    | boolean
    | null
    | undefined;
  interface ArrayElement extends Array<Element> {}
  interface FunctionElement {
    (): Element;
  }
  interface ElementClass {
    // empty, libs can define requirements downstream
  }
  interface ElementAttributesProperty {
    // empty, libs can define requirements downstream
  }
  interface ElementChildrenAttribute {
    children: {};
  }
  interface EventHandler<T, E extends Event> {
    (
      e: E & {
        currentTarget: T;
        target: DOMElement;
      }
    ): void;
  }
  interface BoundEventHandler<T, E extends Event> {
    0: (
      data: any,
      e: E & {
        currentTarget: T;
        target: DOMElement;
      }
    ) => void;
    1: any;
  }
  type EventHandlerUnion<T, E extends Event> = EventHandler<T, E> | BoundEventHandler<T, E>;
  interface IntrinsicAttributes {
    ref?: unknown | ((e: unknown) => void);
  }
  interface CustomAttributes<T> {
    ref?: T | ((el: T) => void);
    classList?: {
      [k: string]: boolean | undefined;
    };
    $ServerOnly?: boolean;
  }
  type Accessor<T> = () => T
  interface Directives {}
  interface DirectiveFunctions {
    [x: string]: (el: Element, accessor: Accessor<any>) => void;
  }
  interface ExplicitProperties {}
  interface ExplicitAttributes {}
  interface CustomEvents {}
  interface CustomCaptureEvents {}
  type DirectiveAttributes = {
    [Key in keyof Directives as \`use:\${Key}\`]?: Directives[Key];
  };
  type DirectiveFunctionAttributes<T> = {
    [K in keyof DirectiveFunctions as string extends K ? never : \`use:\${K}\`]?: DirectiveFunctions[K] extends (
      el: infer E, // will be unknown if not provided
      ...rest: infer R // use rest so that we can check whether it's provided or not
    ) => void
      ? T extends E // everything extends unknown if E is unknown
        ? R extends [infer A] // check if has accessor provided
          ? A extends Accessor<infer V>
            ? V // it's an accessor
            : never // it isn't, type error
          : true // no accessor provided
        : never // T is the wrong element
      : never; // it isn't a function
  };
  type PropAttributes = {
    [Key in keyof ExplicitProperties as \`prop:\${Key}\`]?: ExplicitProperties[Key];
  };
  type AttrAttributes = {
    [Key in keyof ExplicitAttributes as \`attr:\${Key}\`]?: ExplicitAttributes[Key];
  };
  type OnAttributes<T> = {
    [Key in keyof CustomEvents as \`on:\${Key}\`]?: EventHandler<T, CustomEvents[Key]>;
  }
  type OnCaptureAttributes<T> = {
    [Key in keyof CustomCaptureEvents as \`oncapture:\${Key}\`]?: EventHandler<T, CustomCaptureEvents[Key]>;
  }
  interface DOMAttributes<T> extends CustomAttributes<T>, DirectiveAttributes, DirectiveFunctionAttributes<T>,
                                     PropAttributes, AttrAttributes, OnAttributes<T>, OnCaptureAttributes<T>,
                                     CustomEventHandlersCamelCase<T>, CustomEventHandlersLowerCase<T> {
    children?: Element;
    innerHTML?: string;
    innerText?: string | number;
    textContent?: string | number;
    // camel case events
    onCopy?: EventHandlerUnion<T, ClipboardEvent>;
    onCut?: EventHandlerUnion<T, ClipboardEvent>;
    onPaste?: EventHandlerUnion<T, ClipboardEvent>;
    onCompositionEnd?: EventHandlerUnion<T, CompositionEvent>;
    onCompositionStart?: EventHandlerUnion<T, CompositionEvent>;
    onCompositionUpdate?: EventHandlerUnion<T, CompositionEvent>;
    onFocusOut?: EventHandlerUnion<T, FocusEvent>;
    onFocusIn?: EventHandlerUnion<T, FocusEvent>;
    onEncrypted?: EventHandlerUnion<T, Event>;
    onDragExit?: EventHandlerUnion<T, DragEvent>;
    // lower case events
    oncopy?: EventHandlerUnion<T, ClipboardEvent>;
    oncut?: EventHandlerUnion<T, ClipboardEvent>;
    onpaste?: EventHandlerUnion<T, ClipboardEvent>;
    oncompositionend?: EventHandlerUnion<T, CompositionEvent>;
    oncompositionstart?: EventHandlerUnion<T, CompositionEvent>;
    oncompositionupdate?: EventHandlerUnion<T, CompositionEvent>;
    onfocusout?: EventHandlerUnion<T, FocusEvent>;
    onfocusin?: EventHandlerUnion<T, FocusEvent>;
    onencrypted?: EventHandlerUnion<T, Event>;
    ondragexit?: EventHandlerUnion<T, DragEvent>;
  }
  interface CustomEventHandlersCamelCase<T> {
    onAbort?: EventHandlerUnion<T, Event>;
    onAnimationEnd?: EventHandlerUnion<T, AnimationEvent>;
    onAnimationIteration?: EventHandlerUnion<T, AnimationEvent>;
    onAnimationStart?: EventHandlerUnion<T, AnimationEvent>;
    onAuxClick?: EventHandlerUnion<T, MouseEvent>;
    onBeforeInput?: EventHandlerUnion<T, InputEvent>;
    onBlur?: EventHandlerUnion<T, FocusEvent>;
    onCanPlay?: EventHandlerUnion<T, Event>;
    onCanPlayThrough?: EventHandlerUnion<T, Event>;
    onChange?: EventHandlerUnion<T, Event>;
    onClick?: EventHandlerUnion<T, MouseEvent>;
    onContextMenu?: EventHandlerUnion<T, MouseEvent>;
    onDblClick?: EventHandlerUnion<T, MouseEvent>;
    onDrag?: EventHandlerUnion<T, DragEvent>;
    onDragEnd?: EventHandlerUnion<T, DragEvent>;
    onDragEnter?: EventHandlerUnion<T, DragEvent>;
    onDragLeave?: EventHandlerUnion<T, DragEvent>;
    onDragOver?: EventHandlerUnion<T, DragEvent>;
    onDragStart?: EventHandlerUnion<T, DragEvent>;
    onDrop?: EventHandlerUnion<T, DragEvent>;
    onDurationChange?: EventHandlerUnion<T, Event>;
    onEmptied?: EventHandlerUnion<T, Event>;
    onEnded?: EventHandlerUnion<T, Event>;
    onError?: EventHandlerUnion<T, Event>;
    onFocus?: EventHandlerUnion<T, FocusEvent>;
    onGotPointerCapture?: EventHandlerUnion<T, PointerEvent>;
    onInput?: EventHandlerUnion<T, InputEvent>;
    onInvalid?: EventHandlerUnion<T, Event>;
    onKeyDown?: EventHandlerUnion<T, KeyboardEvent>;
    onKeyPress?: EventHandlerUnion<T, KeyboardEvent>;
    onKeyUp?: EventHandlerUnion<T, KeyboardEvent>;
    onLoad?: EventHandlerUnion<T, Event>;
    onLoadedData?: EventHandlerUnion<T, Event>;
    onLoadedMetadata?: EventHandlerUnion<T, Event>;
    onLoadStart?: EventHandlerUnion<T, Event>;
    onLostPointerCapture?: EventHandlerUnion<T, PointerEvent>;
    onMouseDown?: EventHandlerUnion<T, MouseEvent>;
    onMouseEnter?: EventHandlerUnion<T, MouseEvent>;
    onMouseLeave?: EventHandlerUnion<T, MouseEvent>;
    onMouseMove?: EventHandlerUnion<T, MouseEvent>;
    onMouseOut?: EventHandlerUnion<T, MouseEvent>;
    onMouseOver?: EventHandlerUnion<T, MouseEvent>;
    onMouseUp?: EventHandlerUnion<T, MouseEvent>;
    onPause?: EventHandlerUnion<T, Event>;
    onPlay?: EventHandlerUnion<T, Event>;
    onPlaying?: EventHandlerUnion<T, Event>;
    onPointerCancel?: EventHandlerUnion<T, PointerEvent>;
    onPointerDown?: EventHandlerUnion<T, PointerEvent>;
    onPointerEnter?: EventHandlerUnion<T, PointerEvent>;
    onPointerLeave?: EventHandlerUnion<T, PointerEvent>;
    onPointerMove?: EventHandlerUnion<T, PointerEvent>;
    onPointerOut?: EventHandlerUnion<T, PointerEvent>;
    onPointerOver?: EventHandlerUnion<T, PointerEvent>;
    onPointerUp?: EventHandlerUnion<T, PointerEvent>;
    onProgress?: EventHandlerUnion<T, Event>;
    onRateChange?: EventHandlerUnion<T, Event>;
    onReset?: EventHandlerUnion<T, Event>;
    onScroll?: EventHandlerUnion<T, UIEvent>;
    onSeeked?: EventHandlerUnion<T, Event>;
    onSeeking?: EventHandlerUnion<T, Event>;
    onSelect?: EventHandlerUnion<T, UIEvent>;
    onStalled?: EventHandlerUnion<T, Event>;
    onSubmit?: EventHandlerUnion<
      T,
      Event & {
        submitter: HTMLElement;
      }
    >;
    onSuspend?: EventHandlerUnion<T, Event>;
    onTimeUpdate?: EventHandlerUnion<T, Event>;
    onTouchCancel?: EventHandlerUnion<T, TouchEvent>;
    onTouchEnd?: EventHandlerUnion<T, TouchEvent>;
    onTouchMove?: EventHandlerUnion<T, TouchEvent>;
    onTouchStart?: EventHandlerUnion<T, TouchEvent>;
    onTransitionEnd?: EventHandlerUnion<T, TransitionEvent>;
    onVolumeChange?: EventHandlerUnion<T, Event>;
    onWaiting?: EventHandlerUnion<T, Event>;
    onWheel?: EventHandlerUnion<T, WheelEvent>;
  }
  /**
   * @type {GlobalEventHandlers}
   */
  interface CustomEventHandlersLowerCase<T> {
    onabort?: EventHandlerUnion<T, Event>;
    onanimationend?: EventHandlerUnion<T, AnimationEvent>;
    onanimationiteration?: EventHandlerUnion<T, AnimationEvent>;
    onanimationstart?: EventHandlerUnion<T, AnimationEvent>;
    onauxclick?: EventHandlerUnion<T, MouseEvent>;
    onbeforeinput?: EventHandlerUnion<T, InputEvent>;
    onblur?: EventHandlerUnion<T, FocusEvent>;
    oncanplay?: EventHandlerUnion<T, Event>;
    oncanplaythrough?: EventHandlerUnion<T, Event>;
    onchange?: EventHandlerUnion<T, Event>;
    onclick?: EventHandlerUnion<T, MouseEvent>;
    oncontextmenu?: EventHandlerUnion<T, MouseEvent>;
    ondblclick?: EventHandlerUnion<T, MouseEvent>;
    ondrag?: EventHandlerUnion<T, DragEvent>;
    ondragend?: EventHandlerUnion<T, DragEvent>;
    ondragenter?: EventHandlerUnion<T, DragEvent>;
    ondragleave?: EventHandlerUnion<T, DragEvent>;
    ondragover?: EventHandlerUnion<T, DragEvent>;
    ondragstart?: EventHandlerUnion<T, DragEvent>;
    ondrop?: EventHandlerUnion<T, DragEvent>;
    ondurationchange?: EventHandlerUnion<T, Event>;
    onemptied?: EventHandlerUnion<T, Event>;
    onended?: EventHandlerUnion<T, Event>;
    onerror?: EventHandlerUnion<T, Event>;
    onfocus?: EventHandlerUnion<T, FocusEvent>;
    ongotpointercapture?: EventHandlerUnion<T, PointerEvent>;
    oninput?: EventHandlerUnion<T, InputEvent>;
    oninvalid?: EventHandlerUnion<T, Event>;
    onkeydown?: EventHandlerUnion<T, KeyboardEvent>;
    onkeypress?: EventHandlerUnion<T, KeyboardEvent>;
    onkeyup?: EventHandlerUnion<T, KeyboardEvent>;
    onload?: EventHandlerUnion<T, Event>;
    onloadeddata?: EventHandlerUnion<T, Event>;
    onloadedmetadata?: EventHandlerUnion<T, Event>;
    onloadstart?: EventHandlerUnion<T, Event>;
    onlostpointercapture?: EventHandlerUnion<T, PointerEvent>;
    onmousedown?: EventHandlerUnion<T, MouseEvent>;
    onmouseenter?: EventHandlerUnion<T, MouseEvent>;
    onmouseleave?: EventHandlerUnion<T, MouseEvent>;
    onmousemove?: EventHandlerUnion<T, MouseEvent>;
    onmouseout?: EventHandlerUnion<T, MouseEvent>;
    onmouseover?: EventHandlerUnion<T, MouseEvent>;
    onmouseup?: EventHandlerUnion<T, MouseEvent>;
    onpause?: EventHandlerUnion<T, Event>;
    onplay?: EventHandlerUnion<T, Event>;
    onplaying?: EventHandlerUnion<T, Event>;
    onpointercancel?: EventHandlerUnion<T, PointerEvent>;
    onpointerdown?: EventHandlerUnion<T, PointerEvent>;
    onpointerenter?: EventHandlerUnion<T, PointerEvent>;
    onpointerleave?: EventHandlerUnion<T, PointerEvent>;
    onpointermove?: EventHandlerUnion<T, PointerEvent>;
    onpointerout?: EventHandlerUnion<T, PointerEvent>;
    onpointerover?: EventHandlerUnion<T, PointerEvent>;
    onpointerup?: EventHandlerUnion<T, PointerEvent>;
    onprogress?: EventHandlerUnion<T, Event>;
    onratechange?: EventHandlerUnion<T, Event>;
    onreset?: EventHandlerUnion<T, Event>;
    onscroll?: EventHandlerUnion<T, UIEvent>;
    onseeked?: EventHandlerUnion<T, Event>;
    onseeking?: EventHandlerUnion<T, Event>;
    onselect?: EventHandlerUnion<T, UIEvent>;
    onstalled?: EventHandlerUnion<T, Event>;
    onsubmit?: EventHandlerUnion<
      T,
      Event & {
        submitter: HTMLElement;
      }
    >;
    onsuspend?: EventHandlerUnion<T, Event>;
    ontimeupdate?: EventHandlerUnion<T, Event>;
    ontouchcancel?: EventHandlerUnion<T, TouchEvent>;
    ontouchend?: EventHandlerUnion<T, TouchEvent>;
    ontouchmove?: EventHandlerUnion<T, TouchEvent>;
    ontouchstart?: EventHandlerUnion<T, TouchEvent>;
    ontransitionend?: EventHandlerUnion<T, TransitionEvent>;
    onvolumechange?: EventHandlerUnion<T, Event>;
    onwaiting?: EventHandlerUnion<T, Event>;
    onwheel?: EventHandlerUnion<T, WheelEvent>;
  }

  interface CSSProperties extends csstype.PropertiesHyphen {
    // Override
    [key: \`-\${string}\`]: string | number | undefined
  }

  type HTMLAutocapitalize = "off" | "none" | "on" | "sentences" | "words" | "characters";
  type HTMLDir = "ltr" | "rtl" | "auto";
  type HTMLFormEncType = "application/x-www-form-urlencoded" | "multipart/form-data" | "text/plain";
  type HTMLFormMethod = "post" | "get" | "dialog";
  type HTMLCrossorigin = "anonymous" | "use-credentials" | "";
  type HTMLReferrerPolicy =
    | "no-referrer"
    | "no-referrer-when-downgrade"
    | "origin"
    | "origin-when-cross-origin"
    | "same-origin"
    | "strict-origin"
    | "strict-origin-when-cross-origin"
    | "unsafe-url";
  type HTMLIframeSandbox =
    | "allow-downloads-without-user-activation"
    | "allow-downloads"
    | "allow-forms"
    | "allow-modals"
    | "allow-orientation-lock"
    | "allow-pointer-lock"
    | "allow-popups"
    | "allow-popups-to-escape-sandbox"
    | "allow-presentation"
    | "allow-same-origin"
    | "allow-scripts"
    | "allow-storage-access-by-user-activation"
    | "allow-top-navigation"
    | "allow-top-navigation-by-user-activation";
  type HTMLLinkAs =
    | "audio"
    | "document"
    | "embed"
    | "fetch"
    | "font"
    | "image"
    | "object"
    | "script"
    | "style"
    | "track"
    | "video"
    | "worker";

  // All the WAI-ARIA 1.1 attributes from https://www.w3.org/TR/wai-aria-1.1/
  interface AriaAttributes {
    /** Identifies the currently active element when DOM focus is on a composite widget, textbox, group, or application. */
    "aria-activedescendant"?: string;
    /** Indicates whether assistive technologies will present all, or only parts of, the changed region based on the change notifications defined by the aria-relevant attribute. */
    "aria-atomic"?: boolean | "false" | "true";
    /**
     * Indicates whether inputting text could trigger display of one or more predictions of the user's intended value for an input and specifies how predictions would be
     * presented if they are made.
     */
    "aria-autocomplete"?: "none" | "inline" | "list" | "both";
    /** Indicates an element is being modified and that assistive technologies MAY want to wait until the modifications are complete before exposing them to the user. */
    "aria-busy"?: boolean | "false" | "true";
    /**
     * Indicates the current "checked" state of checkboxes, radio buttons, and other widgets.
     * @see aria-pressed @see aria-selected.
     */
    "aria-checked"?: boolean | "false" | "mixed" | "true";
    /**
     * Defines the total number of columns in a table, grid, or treegrid.
     * @see aria-colindex.
     */
    "aria-colcount"?: number | string;
    /**
     * Defines an element's column index or position with respect to the total number of columns within a table, grid, or treegrid.
     * @see aria-colcount @see aria-colspan.
     */
    "aria-colindex"?: number | string;
    /**
     * Defines the number of columns spanned by a cell or gridcell within a table, grid, or treegrid.
     * @see aria-colindex @see aria-rowspan.
     */
    "aria-colspan"?: number | string;
    /**
     * Identifies the element (or elements) whose contents or presence are controlled by the current element.
     * @see aria-owns.
     */
    "aria-controls"?: string;
    /** Indicates the element that represents the current item within a container or set of related elements. */
    "aria-current"?: boolean | "false" | "true" | "page" | "step" | "location" | "date" | "time";
    /**
     * Identifies the element (or elements) that describes the object.
     * @see aria-labelledby
     */
    "aria-describedby"?: string;
    /**
     * Identifies the element that provides a detailed, extended description for the object.
     * @see aria-describedby.
     */
    "aria-details"?: string;
    /**
     * Indicates that the element is perceivable but disabled, so it is not editable or otherwise operable.
     * @see aria-hidden @see aria-readonly.
     */
    "aria-disabled"?: boolean | "false" | "true";
    /**
     * Indicates what functions can be performed when a dragged object is released on the drop target.
     * @deprecated in ARIA 1.1
     */
    "aria-dropeffect"?: "none" | "copy" | "execute" | "link" | "move" | "popup";
    /**
     * Identifies the element that provides an error message for the object.
     * @see aria-invalid @see aria-describedby.
     */
    "aria-errormessage"?: string;
    /** Indicates whether the element, or another grouping element it controls, is currently expanded or collapsed. */
    "aria-expanded"?: boolean | "false" | "true";
    /**
     * Identifies the next element (or elements) in an alternate reading order of content which, at the user's discretion,
     * allows assistive technology to override the general default of reading in document source order.
     */
    "aria-flowto"?: string;
    /**
     * Indicates an element's "grabbed" state in a drag-and-drop operation.
     * @deprecated in ARIA 1.1
     */
    "aria-grabbed"?: boolean | "false" | "true";
    /** Indicates the availability and type of interactive popup element, such as menu or dialog, that can be triggered by an element. */
    "aria-haspopup"?: boolean | "false" | "true" | "menu" | "listbox" | "tree" | "grid" | "dialog";
    /**
     * Indicates whether the element is exposed to an accessibility API.
     * @see aria-disabled.
     */
    "aria-hidden"?: boolean | "false" | "true";
    /**
     * Indicates the entered value does not conform to the format expected by the application.
     * @see aria-errormessage.
     */
    "aria-invalid"?: boolean | "false" | "true" | "grammar" | "spelling";
    /** Indicates keyboard shortcuts that an author has implemented to activate or give focus to an element. */
    "aria-keyshortcuts"?: string;
    /**
     * Defines a string value that labels the current element.
     * @see aria-labelledby.
     */
    "aria-label"?: string;
    /**
     * Identifies the element (or elements) that labels the current element.
     * @see aria-describedby.
     */
    "aria-labelledby"?: string;
    /** Defines the hierarchical level of an element within a structure. */
    "aria-level"?: number | string;
    /** Indicates that an element will be updated, and describes the types of updates the user agents, assistive technologies, and user can expect from the live region. */
    "aria-live"?: "off" | "assertive" | "polite";
    /** Indicates whether an element is modal when displayed. */
    "aria-modal"?: boolean | "false" | "true";
    /** Indicates whether a text box accepts multiple lines of input or only a single line. */
    "aria-multiline"?: boolean | "false" | "true";
    /** Indicates that the user may select more than one item from the current selectable descendants. */
    "aria-multiselectable"?: boolean | "false" | "true";
    /** Indicates whether the element's orientation is horizontal, vertical, or unknown/ambiguous. */
    "aria-orientation"?: "horizontal" | "vertical";
    /**
     * Identifies an element (or elements) in order to define a visual, functional, or contextual parent/child relationship
     * between DOM elements where the DOM hierarchy cannot be used to represent the relationship.
     * @see aria-controls.
     */
    "aria-owns"?: string;
    /**
     * Defines a short hint (a word or short phrase) intended to aid the user with data entry when the control has no value.
     * A hint could be a sample value or a brief description of the expected format.
     */
    "aria-placeholder"?: string;
    /**
     * Defines an element's number or position in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM.
     * @see aria-setsize.
     */
    "aria-posinset"?: number | string;
    /**
     * Indicates the current "pressed" state of toggle buttons.
     * @see aria-checked @see aria-selected.
     */
    "aria-pressed"?: boolean | "false" | "mixed" | "true";
    /**
     * Indicates that the element is not editable, but is otherwise operable.
     * @see aria-disabled.
     */
    "aria-readonly"?: boolean | "false" | "true";
    /**
     * Indicates what notifications the user agent will trigger when the accessibility tree within a live region is modified.
     * @see aria-atomic.
     */
    "aria-relevant"?:
      | "additions"
      | "additions removals"
      | "additions text"
      | "all"
      | "removals"
      | "removals additions"
      | "removals text"
      | "text"
      | "text additions"
      | "text removals";
    /** Indicates that user input is required on the element before a form may be submitted. */
    "aria-required"?: boolean | "false" | "true";
    /** Defines a human-readable, author-localized description for the role of an element. */
    "aria-roledescription"?: string;
    /**
     * Defines the total number of rows in a table, grid, or treegrid.
     * @see aria-rowindex.
     */
    "aria-rowcount"?: number | string;
    /**
     * Defines an element's row index or position with respect to the total number of rows within a table, grid, or treegrid.
     * @see aria-rowcount @see aria-rowspan.
     */
    "aria-rowindex"?: number | string;
    /**
     * Defines the number of rows spanned by a cell or gridcell within a table, grid, or treegrid.
     * @see aria-rowindex @see aria-colspan.
     */
    "aria-rowspan"?: number | string;
    /**
     * Indicates the current "selected" state of various widgets.
     * @see aria-checked @see aria-pressed.
     */
    "aria-selected"?: boolean | "false" | "true";
    /**
     * Defines the number of items in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM.
     * @see aria-posinset.
     */
    "aria-setsize"?: number | string;
    /** Indicates if items in a table or grid are sorted in ascending or descending order. */
    "aria-sort"?: "none" | "ascending" | "descending" | "other";
    /** Defines the maximum allowed value for a range widget. */
    "aria-valuemax"?: number | string;
    /** Defines the minimum allowed value for a range widget. */
    "aria-valuemin"?: number | string;
    /**
     * Defines the current value for a range widget.
     * @see aria-valuetext.
     */
    "aria-valuenow"?: number | string;
    /** Defines the human readable text alternative of aria-valuenow for a range widget. */
    "aria-valuetext"?: string;
    role?: FunctionMaybe<
    | "alert"
    | "alertdialog"
    | "application"
    | "article"
    | "banner"
    | "button"
    | "cell"
    | "checkbox"
    | "columnheader"
    | "combobox"
    | "complementary"
    | "contentinfo"
    | "definition"
    | "dialog"
    | "directory"
    | "document"
    | "feed"
    | "figure"
    | "form"
    | "grid"
    | "gridcell"
    | "group"
    | "heading"
    | "img"
    | "link"
    | "list"
    | "listbox"
    | "listitem"
    | "log"
    | "main"
    | "marquee"
    | "math"
    | "menu"
    | "menubar"
    | "menuitem"
    | "menuitemcheckbox"
    | "menuitemradio"
    | "meter"
    | "navigation"
    | "none"
    | "note"
    | "option"
    | "presentation"
    | "progressbar"
    | "radio"
    | "radiogroup"
    | "region"
    | "row"
    | "rowgroup"
    | "rowheader"
    | "scrollbar"
    | "search"
    | "searchbox"
    | "separator"
    | "slider"
    | "spinbutton"
    | "status"
    | "switch"
    | "tab"
    | "table"
    | "tablist"
    | "tabpanel"
    | "term"
    | "textbox"
    | "timer"
    | "toolbar"
    | "tooltip"
    | "tree"
    | "treegrid"
    | "treeitem">;
  }

  interface HTMLAttributes<T> extends AriaAttributes, DOMAttributes<T> {
    accessKey?: FunctionMaybe<string>;
    class?: FunctionMaybe<string> | undefined;
    contenteditable?: FunctionMaybe<boolean | "inherit">;
    contextmenu?: FunctionMaybe<string>;
    dir?: FunctionMaybe<HTMLDir>;
    draggable?: FunctionMaybe<boolean>;
    hidden?: FunctionMaybe<boolean>;
    id?: FunctionMaybe<string>;
    lang?: FunctionMaybe<string>;
    spellcheck?: FunctionMaybe<boolean>;
    style?: FunctionMaybe<CSSProperties | string>;
    tabindex?: FunctionMaybe<number | string>;
    title?: FunctionMaybe<string>;
    translate?: FunctionMaybe<"yes" | "no">;
    about?: FunctionMaybe<string>;
    datatype?: FunctionMaybe<string>;
    inlist?: FunctionMaybe<any>;
    prefix?: FunctionMaybe<string>;
    property?: FunctionMaybe<string>;
    resource?: FunctionMaybe<string>;
    typeof?: FunctionMaybe<string>;
    vocab?: FunctionMaybe<string>;
    autocapitalize?: FunctionMaybe<HTMLAutocapitalize>;
    slot?: FunctionMaybe<string>;
    color?: FunctionMaybe<string>;
    itemprop?: FunctionMaybe<string>;
    itemscope?: FunctionMaybe<boolean>;
    itemtype?: FunctionMaybe<string>;
    itemid?: FunctionMaybe<string>;
    itemref?: FunctionMaybe<string>;
    part?: FunctionMaybe<string>;
    exportparts?: FunctionMaybe<string>;
    inputmode?: FunctionMaybe<"none" | "text" | "tel" | "url" | "email" | "numeric" | "decimal" | "search">;
    contentEditable?: FunctionMaybe<boolean | "inherit">;
    contextMenu?: FunctionMaybe<string>;
    tabIndex?: FunctionMaybe<number | string>;
    autoCapitalize?: FunctionMaybe<HTMLAutocapitalize>;
    itemProp?: FunctionMaybe<string>;
    itemScope?: FunctionMaybe<boolean>;
    itemType?: FunctionMaybe<string>;
    itemId?: FunctionMaybe<string>;
    itemRef?: FunctionMaybe<string>;
    exportParts?: FunctionMaybe<string>;
    inputMode?: FunctionMaybe<"none" | "text" | "tel" | "url" | "email" | "numeric" | "decimal" | "search">;
  }
  interface AnchorHTMLAttributes<T> extends HTMLAttributes<T> {
    download?: FunctionMaybe<any>;
    href?: FunctionMaybe<string>;
    hreflang?: FunctionMaybe<string>;
    media?: FunctionMaybe<string>;
    ping?: FunctionMaybe<string>;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    rel?: FunctionMaybe<string>;
    target?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
  }
  interface AudioHTMLAttributes<T> extends MediaHTMLAttributes<T> {}
  interface AreaHTMLAttributes<T> extends HTMLAttributes<T> {
    alt?: FunctionMaybe<string>;
    coords?: FunctionMaybe<string>;
    download?: FunctionMaybe<any>;
    href?: FunctionMaybe<string>;
    hreflang?: FunctionMaybe<string>;
    ping?: FunctionMaybe<string>;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    rel?: FunctionMaybe<string>;
    shape?: FunctionMaybe<"rect" | "circle" | "poly" | "default">;
    target?: FunctionMaybe<string>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
  }
  interface BaseHTMLAttributes<T> extends HTMLAttributes<T> {
    href?: FunctionMaybe<string>;
    target?: FunctionMaybe<string>;
  }
  interface BlockquoteHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: FunctionMaybe<string>;
  }
  interface ButtonHTMLAttributes<T> extends HTMLAttributes<T> {
    autofocus?: FunctionMaybe<boolean>;
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    formaction?: FunctionMaybe<string>;
    formenctype?: FunctionMaybe<HTMLFormEncType>;
    formmethod?: FunctionMaybe<HTMLFormMethod>;
    formnovalidate?: FunctionMaybe<boolean>;
    formtarget?: FunctionMaybe<string>;
    name?: FunctionMaybe<string>;
    type?: FunctionMaybe<"submit" | "reset" | "button">;
    value?: FunctionMaybe<string>;
    formAction?: FunctionMaybe<string>;
    formEnctype?: FunctionMaybe<HTMLFormEncType>;
    formMethod?: FunctionMaybe<HTMLFormMethod>;
    formNoValidate?: FunctionMaybe<boolean>;
    formTarget?: FunctionMaybe<string>;
  }
  interface CanvasHTMLAttributes<T> extends HTMLAttributes<T> {
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
  }
  interface ColHTMLAttributes<T> extends HTMLAttributes<T> {
    span?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
  }
  interface ColgroupHTMLAttributes<T> extends HTMLAttributes<T> {
    span?: FunctionMaybe<number | string>;
  }
  interface DataHTMLAttributes<T> extends HTMLAttributes<T> {
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface DetailsHtmlAttributes<T> extends HTMLAttributes<T> {
    open?: FunctionMaybe<boolean>;
    onToggle?: EventHandlerUnion<T, Event>;
    ontoggle?: EventHandlerUnion<T, Event>;
  }
  interface DialogHtmlAttributes<T> extends HTMLAttributes<T> {
    open?: FunctionMaybe<boolean>;
  }
  interface EmbedHTMLAttributes<T> extends HTMLAttributes<T> {
    height?: FunctionMaybe<number | string>;
    src?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
    width?: FunctionMaybe<number | string>;
  }
  interface FieldsetHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    name?: FunctionMaybe<string>;
  }
  interface FormHTMLAttributes<T> extends HTMLAttributes<T> {
    acceptcharset?: FunctionMaybe<string>;
    action?: FunctionMaybe<string>;
    autocomplete?: FunctionMaybe<string>;
    encoding?: FunctionMaybe<HTMLFormEncType>;
    enctype?: FunctionMaybe<HTMLFormEncType>;
    method?: FunctionMaybe<HTMLFormMethod>;
    name?: FunctionMaybe<string>;
    novalidate?: FunctionMaybe<boolean>;
    target?: FunctionMaybe<string>;
    acceptCharset?: FunctionMaybe<string>;
    noValidate?: FunctionMaybe<boolean>;
  }
  interface IframeHTMLAttributes<T> extends HTMLAttributes<T> {
    allow?: FunctionMaybe<string>;
    allowfullscreen?: FunctionMaybe<boolean>;
    height?: FunctionMaybe<number | string>;
    name?: FunctionMaybe<string>;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    sandbox?: HTMLIframeSandbox | string;
    src?: FunctionMaybe<string>;
    srcdoc?: FunctionMaybe<string>;
    width?: FunctionMaybe<number | string>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
  }
  interface ImgHTMLAttributes<T> extends HTMLAttributes<T> {
    alt?: FunctionMaybe<string>;
    crossorigin?: FunctionMaybe<HTMLCrossorigin>;
    decoding?: FunctionMaybe<"sync" | "async" | "auto">;
    height?: FunctionMaybe<number | string>;
    ismap?: FunctionMaybe<boolean>;
    isMap?: FunctionMaybe<boolean>;
    loading?: FunctionMaybe<"eager" | "lazy">;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    sizes?: FunctionMaybe<string>;
    src?: FunctionMaybe<string>;
    srcset?: FunctionMaybe<string>;
    srcSet?: FunctionMaybe<string>;
    usemap?: FunctionMaybe<string>;
    useMap?: FunctionMaybe<string>;
    width?: FunctionMaybe<number | string>;
    crossOrigin?: FunctionMaybe<HTMLCrossorigin>;
  }
  interface InputHTMLAttributes<T> extends HTMLAttributes<T> {
    accept?: FunctionMaybe<string>;
    alt?: FunctionMaybe<string>;
    autocomplete?: FunctionMaybe<string>;
    autofocus?: FunctionMaybe<boolean>;
    capture?: FunctionMaybe<boolean | string>;
    checked?: FunctionMaybe<boolean>;
    crossorigin?: FunctionMaybe<HTMLCrossorigin>;
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    formaction?: FunctionMaybe<string>;
    formenctype?: FunctionMaybe<HTMLFormEncType>;
    formmethod?: FunctionMaybe<HTMLFormMethod>;
    formnovalidate?: FunctionMaybe<boolean>;
    formtarget?: FunctionMaybe<string>;
    height?: FunctionMaybe<number | string>;
    list?: FunctionMaybe<string>;
    max?: FunctionMaybe<number | string>;
    maxlength?: FunctionMaybe<number | string>;
    min?: FunctionMaybe<number | string>;
    minlength?: FunctionMaybe<number | string>;
    multiple?: FunctionMaybe<boolean>;
    name?: FunctionMaybe<string>;
    pattern?: FunctionMaybe<string>;
    placeholder?: FunctionMaybe<string>;
    readonly?: FunctionMaybe<boolean>;
    required?: FunctionMaybe<boolean>;
    size?: FunctionMaybe<number | string>;
    src?: FunctionMaybe<string>;
    step?: FunctionMaybe<number | string>;
    type?: FunctionMaybe<string>;
    value?: FunctionMaybe<string | string[] | number>;
    width?: FunctionMaybe<number | string>;
    crossOrigin?: FunctionMaybe<HTMLCrossorigin>;
    formAction?: FunctionMaybe<string>;
    formEnctype?: FunctionMaybe<HTMLFormEncType>;
    formMethod?: FunctionMaybe<HTMLFormMethod>;
    formNoValidate?: FunctionMaybe<boolean>;
    formTarget?: FunctionMaybe<string>;
    maxLength?: FunctionMaybe<number | string>;
    minLength?: FunctionMaybe<number | string>;
    readOnly?: FunctionMaybe<boolean>;
  }
  interface InsHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: FunctionMaybe<string>;
    dateTime?: FunctionMaybe<string>;
  }
  interface KeygenHTMLAttributes<T> extends HTMLAttributes<T> {
    autofocus?: FunctionMaybe<boolean>;
    challenge?: FunctionMaybe<string>;
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    keytype?: FunctionMaybe<string>;
    keyparams?: FunctionMaybe<string>;
    name?: FunctionMaybe<string>;
  }
  interface LabelHTMLAttributes<T> extends HTMLAttributes<T> {
    for?: FunctionMaybe<string>;
    form?: FunctionMaybe<string>;
  }
  interface LiHTMLAttributes<T> extends HTMLAttributes<T> {
    value?: FunctionMaybe<number | string>;
  }
  interface LinkHTMLAttributes<T> extends HTMLAttributes<T> {
    as?: FunctionMaybe<HTMLLinkAs>;
    crossorigin?: FunctionMaybe<HTMLCrossorigin>;
    disabled?: FunctionMaybe<boolean>;
    href?: FunctionMaybe<string>;
    hreflang?: FunctionMaybe<string>;
    integrity?: FunctionMaybe<string>;
    media?: FunctionMaybe<string>;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    rel?: FunctionMaybe<string>;
    sizes?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
    crossOrigin?: FunctionMaybe<HTMLCrossorigin>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
  }
  interface MapHTMLAttributes<T> extends HTMLAttributes<T> {
    name?: FunctionMaybe<string>;
  }
  interface MediaHTMLAttributes<T> extends HTMLAttributes<T> {
    autoplay?: FunctionMaybe<boolean>;
    controls?: FunctionMaybe<boolean>;
    crossorigin?: FunctionMaybe<HTMLCrossorigin>;
    loop?: FunctionMaybe<boolean>;
    mediagroup?: FunctionMaybe<string>;
    muted?: FunctionMaybe<boolean>;
    preload?: FunctionMaybe<"none" | "metadata" | "auto" | "">;
    src?: FunctionMaybe<string>;
    crossOrigin?: FunctionMaybe<HTMLCrossorigin>;
    mediaGroup?: FunctionMaybe<string>;
  }
  interface MenuHTMLAttributes<T> extends HTMLAttributes<T> {
    label?: FunctionMaybe<string>;
    type?: FunctionMaybe<"context" | "toolbar">;
  }
  interface MetaHTMLAttributes<T> extends HTMLAttributes<T> {
    charset?: FunctionMaybe<string>;
    content?: FunctionMaybe<string>;
    httpequiv?: FunctionMaybe<string>;
    name?: FunctionMaybe<string>;
    httpEquiv?: FunctionMaybe<string>;
  }
  interface MeterHTMLAttributes<T> extends HTMLAttributes<T> {
    form?: FunctionMaybe<string>;
    high?: FunctionMaybe<number | string>;
    low?: FunctionMaybe<number | string>;
    max?: FunctionMaybe<number | string>;
    min?: FunctionMaybe<number | string>;
    optimum?: FunctionMaybe<number | string>;
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface QuoteHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: FunctionMaybe<string>;
  }
  interface ObjectHTMLAttributes<T> extends HTMLAttributes<T> {
    data?: FunctionMaybe<string>;
    form?: FunctionMaybe<string>;
    height?: FunctionMaybe<number | string>;
    name?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
    usemap?: FunctionMaybe<string>;
    width?: FunctionMaybe<number | string>;
    useMap?: FunctionMaybe<string>;
  }
  interface OlHTMLAttributes<T> extends HTMLAttributes<T> {
    reversed?: FunctionMaybe<boolean>;
    start?: FunctionMaybe<number | string>;
    type?: FunctionMaybe<"1" | "a" | "A" | "i" | "I">;
  }
  interface OptgroupHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: FunctionMaybe<boolean>;
    label?: FunctionMaybe<string>;
  }
  interface OptionHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: FunctionMaybe<boolean>;
    label?: FunctionMaybe<string>;
    selected?: FunctionMaybe<boolean>;
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface OutputHTMLAttributes<T> extends HTMLAttributes<T> {
    form?: FunctionMaybe<string>;
    for?: FunctionMaybe<string>;
    name?: FunctionMaybe<string>;
  }
  interface ParamHTMLAttributes<T> extends HTMLAttributes<T> {
    name?: FunctionMaybe<string>;
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface ProgressHTMLAttributes<T> extends HTMLAttributes<T> {
    max?: FunctionMaybe<number | string>;
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface ScriptHTMLAttributes<T> extends HTMLAttributes<T> {
    async?: FunctionMaybe<boolean>;
    charset?: FunctionMaybe<string>;
    crossorigin?: FunctionMaybe<HTMLCrossorigin>;
    defer?: FunctionMaybe<boolean>;
    integrity?: FunctionMaybe<string>;
    nomodule?: FunctionMaybe<boolean>;
    nonce?: FunctionMaybe<string>;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    src?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
    crossOrigin?: FunctionMaybe<HTMLCrossorigin>;
    noModule?: FunctionMaybe<boolean>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
  }
  interface SelectHTMLAttributes<T> extends HTMLAttributes<T> {
    autocomplete?: FunctionMaybe<string>;
    autofocus?: FunctionMaybe<boolean>;
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    multiple?: FunctionMaybe<boolean>;
    name?: FunctionMaybe<string>;
    required?: FunctionMaybe<boolean>;
    size?: FunctionMaybe<number | string>;
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface HTMLSlotElementAttributes<T = HTMLSlotElement> extends HTMLAttributes<T> {
    name?: FunctionMaybe<string>;
  }
  interface SourceHTMLAttributes<T> extends HTMLAttributes<T> {
    media?: FunctionMaybe<string>;
    sizes?: FunctionMaybe<string>;
    src?: FunctionMaybe<string>;
    srcset?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
  }
  interface StyleHTMLAttributes<T> extends HTMLAttributes<T> {
    media?: FunctionMaybe<string>;
    nonce?: FunctionMaybe<string>;
    scoped?: FunctionMaybe<boolean>;
    type?: FunctionMaybe<string>;
  }
  interface TdHTMLAttributes<T> extends HTMLAttributes<T> {
    colspan?: FunctionMaybe<number | string>;
    headers?: FunctionMaybe<string>;
    rowspan?: FunctionMaybe<number | string>;
    colSpan?: FunctionMaybe<number | string>;
    rowSpan?: FunctionMaybe<number | string>;
  }
  interface TemplateHTMLAttributes<T extends HTMLTemplateElement> extends HTMLAttributes<T> {
    content?: FunctionMaybe<DocumentFragment>;
  }
  interface TextareaHTMLAttributes<T> extends HTMLAttributes<T> {
    autocomplete?: FunctionMaybe<string>;
    autofocus?: FunctionMaybe<boolean>;
    cols?: FunctionMaybe<number | string>;
    dirname?: FunctionMaybe<string>;
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    maxlength?: FunctionMaybe<number | string>;
    minlength?: FunctionMaybe<number | string>;
    name?: FunctionMaybe<string>;
    placeholder?: FunctionMaybe<string>;
    readonly?: FunctionMaybe<boolean>;
    required?: FunctionMaybe<boolean>;
    rows?: FunctionMaybe<number | string>;
    value?: FunctionMaybe<string | string[] | number>;
    wrap?: FunctionMaybe<"hard" | "soft" | "off">;
    maxLength?: FunctionMaybe<number | string>;
    minLength?: FunctionMaybe<number | string>;
    readOnly?: FunctionMaybe<boolean>;
  }
  interface ThHTMLAttributes<T> extends HTMLAttributes<T> {
    colspan?: FunctionMaybe<number | string>;
    headers?: FunctionMaybe<string>;
    rowspan?: FunctionMaybe<number | string>;
    colSpan?: FunctionMaybe<number | string>;
    rowSpan?: FunctionMaybe<number | string>;
    scope?: FunctionMaybe<'col' | 'row' | 'rowgroup' | 'colgroup'>;
  }
  interface TimeHTMLAttributes<T> extends HTMLAttributes<T> {
    datetime?: FunctionMaybe<string>;
    dateTime?: FunctionMaybe<string>;
  }
  interface TrackHTMLAttributes<T> extends HTMLAttributes<T> {
    default?: FunctionMaybe<boolean>;
    kind?: FunctionMaybe<"subtitles" | "captions" | "descriptions" | "chapters" | "metadata">;
    label?: FunctionMaybe<string>;
    src?: FunctionMaybe<string>;
    srclang?: FunctionMaybe<string>;
  }
  interface VideoHTMLAttributes<T> extends MediaHTMLAttributes<T> {
    height?: FunctionMaybe<number | string>;
    playsinline?: FunctionMaybe<boolean>;
    poster?: FunctionMaybe<string>;
    width?: FunctionMaybe<number | string>;
  }
  type SVGPreserveAspectRatio =
    | "none"
    | "xMinYMin"
    | "xMidYMin"
    | "xMaxYMin"
    | "xMinYMid"
    | "xMidYMid"
    | "xMaxYMid"
    | "xMinYMax"
    | "xMidYMax"
    | "xMaxYMax"
    | "xMinYMin meet"
    | "xMidYMin meet"
    | "xMaxYMin meet"
    | "xMinYMid meet"
    | "xMidYMid meet"
    | "xMaxYMid meet"
    | "xMinYMax meet"
    | "xMidYMax meet"
    | "xMaxYMax meet"
    | "xMinYMin slice"
    | "xMidYMin slice"
    | "xMaxYMin slice"
    | "xMinYMid slice"
    | "xMidYMid slice"
    | "xMaxYMid slice"
    | "xMinYMax slice"
    | "xMidYMax slice"
    | "xMaxYMax slice";
  type ImagePreserveAspectRatio =
    | SVGPreserveAspectRatio
    | "defer none"
    | "defer xMinYMin"
    | "defer xMidYMin"
    | "defer xMaxYMin"
    | "defer xMinYMid"
    | "defer xMidYMid"
    | "defer xMaxYMid"
    | "defer xMinYMax"
    | "defer xMidYMax"
    | "defer xMaxYMax"
    | "defer xMinYMin meet"
    | "defer xMidYMin meet"
    | "defer xMaxYMin meet"
    | "defer xMinYMid meet"
    | "defer xMidYMid meet"
    | "defer xMaxYMid meet"
    | "defer xMinYMax meet"
    | "defer xMidYMax meet"
    | "defer xMaxYMax meet"
    | "defer xMinYMin slice"
    | "defer xMidYMin slice"
    | "defer xMaxYMin slice"
    | "defer xMinYMid slice"
    | "defer xMidYMid slice"
    | "defer xMaxYMid slice"
    | "defer xMinYMax slice"
    | "defer xMidYMax slice"
    | "defer xMaxYMax slice";
  type SVGUnits = "userSpaceOnUse" | "objectBoundingBox";
  interface CoreSVGAttributes<T> extends AriaAttributes, DOMAttributes<T> {
    id?: FunctionMaybe<string>;
    lang?: FunctionMaybe<string>;
    tabIndex?: FunctionMaybe<number | string>;
    tabindex?: FunctionMaybe<number | string>;
  }
  interface StylableSVGAttributes {
    class?: FunctionMaybe<string> | undefined;
    style?: FunctionMaybe<CSSProperties | string>;
  }
  interface TransformableSVGAttributes {
    transform?: FunctionMaybe<string>;
  }
  interface ConditionalProcessingSVGAttributes {
    requiredExtensions?: FunctionMaybe<string>;
    requiredFeatures?: FunctionMaybe<string>;
    systemLanguage?: FunctionMaybe<string>;
  }
  interface ExternalResourceSVGAttributes {
    externalResourcesRequired?: FunctionMaybe<"true" | "false">;
  }
  interface AnimationTimingSVGAttributes {
    begin?: FunctionMaybe<string>;
    dur?: FunctionMaybe<string>;
    end?: FunctionMaybe<string>;
    min?: FunctionMaybe<string>;
    max?: FunctionMaybe<string>;
    restart?: FunctionMaybe<"always" | "whenNotActive" | "never">;
    repeatCount?: FunctionMaybe<number | "indefinite">;
    repeatDur?: FunctionMaybe<string>;
    fill?: FunctionMaybe<"freeze" | "remove">;
  }
  interface AnimationValueSVGAttributes {
    calcMode?: FunctionMaybe<"discrete" | "linear" | "paced" | "spline">;
    values?: FunctionMaybe<string>;
    keyTimes?: FunctionMaybe<string>;
    keySplines?: FunctionMaybe<string>;
    from?: FunctionMaybe<number | string>;
    to?: FunctionMaybe<number | string>;
    by?: FunctionMaybe<number | string>;
  }
  interface AnimationAdditionSVGAttributes {
    attributeName?: FunctionMaybe<string>;
    additive?: FunctionMaybe<"replace" | "sum">;
    accumulate?: FunctionMaybe<"none" | "sum">;
  }
  interface AnimationAttributeTargetSVGAttributes {
    attributeName?: FunctionMaybe<string>;
    attributeType?: FunctionMaybe<"CSS" | "XML" | "auto">;
  }
  interface PresentationSVGAttributes {
    "alignment-baseline"?:
      | "auto"
      | "baseline"
      | "before-edge"
      | "text-before-edge"
      | "middle"
      | "central"
      | "after-edge"
      | "text-after-edge"
      | "ideographic"
      | "alphabetic"
      | "hanging"
      | "mathematical"
      | "inherit";
    "baseline-shift"?: FunctionMaybe<number | string>;
    clip?: FunctionMaybe<string>;
    "clip-path"?: FunctionMaybe<string>;
    "clip-rule"?: "nonzero" | "evenodd" | "inherit";
    color?: FunctionMaybe<string>;
    "color-interpolation"?: "auto" | "sRGB" | "linearRGB" | "inherit";
    "color-interpolation-filters"?: "auto" | "sRGB" | "linearRGB" | "inherit";
    "color-profile"?: FunctionMaybe<string>;
    "color-rendering"?: "auto" | "optimizeSpeed" | "optimizeQuality" | "inherit";
    cursor?: FunctionMaybe<string>;
    direction?: "ltr" | "rtl" | "inherit";
    display?: FunctionMaybe<string>;
    "dominant-baseline"?:
      | "auto"
      | "text-bottom"
      | "alphabetic"
      | "ideographic"
      | "middle"
      | "central"
      | "mathematical"
      | "hanging"
      | "text-top"
      | "inherit";
    "enable-background"?: FunctionMaybe<string>;
    fill?: FunctionMaybe<string>;
    "fill-opacity"?: FunctionMaybe<number | string | "inherit">;
    "fill-rule"?: FunctionMaybe<"nonzero" | "evenodd" | "inherit">;
    filter?: FunctionMaybe<string>;
    "flood-color"?: FunctionMaybe<string>;
    "flood-opacity"?: FunctionMaybe<number | string | "inherit">;
    "font-family"?: FunctionMaybe<string>;
    "font-size"?: FunctionMaybe<string>;
    "font-size-adjust"?: FunctionMaybe<number | string>;
    "font-stretch"?: FunctionMaybe<string>;
    "font-style"?: FunctionMaybe<"normal" | "italic" | "oblique" | "inherit">;
    "font-variant"?: FunctionMaybe<string>;
    "font-weight"?: FunctionMaybe<number | string>;
    "glyph-orientation-horizontal"?: FunctionMaybe<string>;
    "glyph-orientation-vertical"?: FunctionMaybe<string>;
    "image-rendering"?: FunctionMaybe<"auto" | "optimizeQuality" | "optimizeSpeed" | "inherit">;
    kerning?: FunctionMaybe<string>;
    "letter-spacing"?: FunctionMaybe<number | string>;
    "lighting-color"?: FunctionMaybe<string>;
    "marker-end"?: FunctionMaybe<string>;
    "marker-mid"?: FunctionMaybe<string>;
    "marker-start"?: FunctionMaybe<string>;
    mask?: FunctionMaybe<string>;
    opacity?: FunctionMaybe<number | string | "inherit">;
    overflow?: FunctionMaybe<"visible" | "hidden" | "scroll" | "auto" | "inherit">;
    "pointer-events"?: FunctionMaybe<
      | "bounding-box"
      | "visiblePainted"
      | "visibleFill"
      | "visibleStroke"
      | "visible"
      | "painted"
      | "color"
      | "fill"
      | "stroke"
      | "all"
      | "none"
      | "inherit">;
    "shape-rendering"?: FunctionMaybe<"auto" | "optimizeSpeed" | "crispEdges" | "geometricPrecision" | "inherit">;
    "stop-color"?: FunctionMaybe<string>;
    "stop-opacity"?: FunctionMaybe<number | string | "inherit">;
    stroke?: FunctionMaybe<string>;
    "stroke-dasharray"?: FunctionMaybe<string>;
    "stroke-dashoffset"?: FunctionMaybe<number | string>;
    "stroke-linecap"?: FunctionMaybe<"butt" | "round" | "square" | "inherit">;
    "stroke-linejoin"?: FunctionMaybe<"arcs" | "bevel" | "miter" | "miter-clip" | "round" | "inherit">;
    "stroke-miterlimit"?: FunctionMaybe<number | string | "inherit">;
    "stroke-opacity"?: FunctionMaybe<number | string | "inherit">;
    "stroke-width"?: FunctionMaybe<number | string>;
    "text-anchor"?: FunctionMaybe<"start" | "middle" | "end" | "inherit">;
    "text-decoration"?: FunctionMaybe<"none" | "underline" | "overline" | "line-through" | "blink" | "inherit">;
    "text-rendering"?: FunctionMaybe<
      | "auto"
      | "optimizeSpeed"
      | "optimizeLegibility"
      | "geometricPrecision"
      | "inherit">;
    "unicode-bidi"?: FunctionMaybe<string>;
    visibility?: FunctionMaybe<"visible" | "hidden" | "collapse" | "inherit">;
    "word-spacing"?: FunctionMaybe<number | string>;
    "writing-mode"?: FunctionMaybe<"lr-tb" | "rl-tb" | "tb-rl" | "lr" | "rl" | "tb" | "inherit">;
  }
  interface AnimationElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      ConditionalProcessingSVGAttributes {}
  interface ContainerElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "clip-path"
        | "mask"
        | "cursor"
        | "opacity"
        | "filter"
        | "enable-background"
        | "color-interpolation"
        | "color-rendering"
      > {}
  interface FilterPrimitiveElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<PresentationSVGAttributes, "color-interpolation-filters"> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    result?: FunctionMaybe<string>;
  }
  interface SingleInputFilterSVGAttributes {
    in?: FunctionMaybe<string>;
  }
  interface DoubleInputFilterSVGAttributes {
    in?: FunctionMaybe<string>;
    in2?: FunctionMaybe<string>;
  }
  interface FitToViewBoxSVGAttributes {
    viewBox?: FunctionMaybe<string>;
    preserveAspectRatio?: FunctionMaybe<SVGPreserveAspectRatio>;
  }
  interface GradientElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    gradientUnits?: FunctionMaybe<SVGUnits>;
    gradientTransform?: FunctionMaybe<string>;
    spreadMethod?: FunctionMaybe<"pad" | "reflect" | "repeat">;
  }
  interface GraphicsElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "clip-rule"
        | "mask"
        | "pointer-events"
        | "cursor"
        | "opacity"
        | "filter"
        | "display"
        | "visibility"
        | "color-interpolation"
        | "color-rendering"
      > {}
  interface LightSourceElementSVGAttributes<T> extends CoreSVGAttributes<T> {}
  interface NewViewportSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    viewBox?: FunctionMaybe<string>;
  }
  interface ShapeElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "color"
        | "fill"
        | "fill-rule"
        | "fill-opacity"
        | "stroke"
        | "stroke-width"
        | "stroke-linecap"
        | "stroke-linejoin"
        | "stroke-miterlimit"
        | "stroke-dasharray"
        | "stroke-dashoffset"
        | "stroke-opacity"
        | "shape-rendering"
      > {}
  interface TextContentElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "font-family"
        | "font-style"
        | "font-variant"
        | "font-weight"
        | "font-stretch"
        | "font-size"
        | "font-size-adjust"
        | "kerning"
        | "letter-spacing"
        | "word-spacing"
        | "text-decoration"
        | "glyph-orientation-horizontal"
        | "glyph-orientation-vertical"
        | "direction"
        | "unicode-bidi"
        | "text-anchor"
        | "dominant-baseline"
        | "color"
        | "fill"
        | "fill-rule"
        | "fill-opacity"
        | "stroke"
        | "stroke-width"
        | "stroke-linecap"
        | "stroke-linejoin"
        | "stroke-miterlimit"
        | "stroke-dasharray"
        | "stroke-dashoffset"
        | "stroke-opacity"
      > {}
  interface ZoomAndPanSVGAttributes {
    zoomAndPan?: FunctionMaybe<"disable" | "magnify">;
  }
  interface AnimateSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationAttributeTargetSVGAttributes,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes,
      Pick<PresentationSVGAttributes, "color-interpolation" | "color-rendering"> {}
  interface AnimateMotionSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes {
    path?: FunctionMaybe<string>;
    keyPoints?: FunctionMaybe<string>;
    rotate?: FunctionMaybe<number | string | "auto" | "auto-reverse">;
    origin?: FunctionMaybe<"default">;
  }
  interface AnimateTransformSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationAttributeTargetSVGAttributes,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes {
    type?: FunctionMaybe<"translate" | "scale" | "rotate" | "skewX" | "skewY">;
  }
  interface CircleSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    cx?: FunctionMaybe<number | string>;
    cy?: FunctionMaybe<number | string>;
    r?: FunctionMaybe<number | string>;
  }
  interface ClipPathSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "clip-path"> {
    clipPathUnits?: FunctionMaybe<SVGUnits>;
  }
  interface DefsSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {}
  interface DescSVGAttributes<T> extends CoreSVGAttributes<T>, StylableSVGAttributes {}
  interface EllipseSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    cx?: FunctionMaybe<number | string>;
    cy?: FunctionMaybe<number | string>;
    rx?: FunctionMaybe<number | string>;
    ry?: FunctionMaybe<number | string>;
  }
  interface FeBlendSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    mode?: FunctionMaybe<"normal" | "multiply" | "screen" | "darken" | "lighten">;
  }
  interface FeColorMatrixSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    type?: FunctionMaybe<"matrix" | "saturate" | "hueRotate" | "luminanceToAlpha">;
    values?: FunctionMaybe<string>;
  }
  interface FeComponentTransferSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {}
  interface FeCompositeSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    operator?: FunctionMaybe<"over" | "in" | "out" | "atop" | "xor" | "arithmetic">;
    k1?: FunctionMaybe<number | string>;
    k2?: FunctionMaybe<number | string>;
    k3?: FunctionMaybe<number | string>;
    k4?: FunctionMaybe<number | string>;
  }
  interface FeConvolveMatrixSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    order?: FunctionMaybe<number | string>;
    kernelMatrix?: FunctionMaybe<string>;
    divisor?: FunctionMaybe<number | string>;
    bias?: FunctionMaybe<number | string>;
    targetX?: FunctionMaybe<number | string>;
    targetY?: FunctionMaybe<number | string>;
    edgeMode?: FunctionMaybe<"duplicate" | "wrap" | "none">;
    kernelUnitLength?: FunctionMaybe<number | string>;
    preserveAlpha?: FunctionMaybe<"true" | "false">;
  }
  interface FeDiffuseLightingSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "lighting-color"> {
    surfaceScale?: FunctionMaybe<number | string>;
    diffuseConstant?: FunctionMaybe<number | string>;
    kernelUnitLength?: FunctionMaybe<number | string>;
  }
  interface FeDisplacementMapSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    scale?: FunctionMaybe<number | string>;
    xChannelSelector?: FunctionMaybe<"R" | "G" | "B" | "A">;
    yChannelSelector?: FunctionMaybe<"R" | "G" | "B" | "A">;
  }
  interface FeDistantLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    azimuth?: FunctionMaybe<number | string>;
    elevation?: FunctionMaybe<number | string>;
  }
  interface FeFloodSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "flood-color" | "flood-opacity"> {}
  interface FeFuncSVGAttributes<T> extends CoreSVGAttributes<T> {
    type?: "identity" | "table" | "discrete" | "linear" | "gamma";
    tableValues?: FunctionMaybe<string>;
    slope?: FunctionMaybe<number | string>;
    intercept?: FunctionMaybe<number | string>;
    amplitude?: FunctionMaybe<number | string>;
    exponent?: FunctionMaybe<number | string>;
    offset?: FunctionMaybe<number | string>;
  }
  interface FeGaussianBlurSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    stdDeviation?: FunctionMaybe<number | string>;
  }
  interface FeImageSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    preserveAspectRatio?: FunctionMaybe<SVGPreserveAspectRatio>;
    href?: FunctionMaybe<string>;
  }
  interface FeMergeSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes {}
  interface FeMergeNodeSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      SingleInputFilterSVGAttributes {}
  interface FeMorphologySVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    operator?: FunctionMaybe<"erode" | "dilate">;
    radius?: FunctionMaybe<number | string>;
  }
  interface FeOffsetSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    dx?: FunctionMaybe<number | string>;
    dy?: FunctionMaybe<number | string>;
  }
  interface FePointLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    z?: FunctionMaybe<number | string>;
  }
  interface FeSpecularLightingSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "lighting-color"> {
    surfaceScale?: FunctionMaybe<string>;
    specularConstant?: FunctionMaybe<string>;
    specularExponent?: FunctionMaybe<string>;
    kernelUnitLength?: FunctionMaybe<number | string>;
  }
  interface FeSpotLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    z?: FunctionMaybe<number | string>;
    pointsAtX?: FunctionMaybe<number | string>;
    pointsAtY?: FunctionMaybe<number | string>;
    pointsAtZ?: FunctionMaybe<number | string>;
    specularExponent?: FunctionMaybe<number | string>;
    limitingConeAngle?: FunctionMaybe<number | string>;
  }
  interface FeTileSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {}
  interface FeTurbulanceSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes {
    baseFrequency?: FunctionMaybe<number | string>;
    numOctaves?: FunctionMaybe<number | string>;
    seed?: FunctionMaybe<number | string>;
    stitchTiles?: FunctionMaybe<"stitch" | "noStitch">;
    type?: FunctionMaybe<"fractalNoise" | "turbulence">;
  }
  interface FilterSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    filterUnits?: FunctionMaybe<SVGUnits>;
    primitiveUnits?: FunctionMaybe<SVGUnits>;
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    filterRes?: FunctionMaybe<number | string>;
  }
  interface ForeignObjectSVGAttributes<T>
    extends NewViewportSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
  }
  interface GSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {}
  interface ImageSVGAttributes<T>
    extends NewViewportSVGAttributes<T>,
      GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "color-profile" | "image-rendering"> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    preserveAspectRatio?: FunctionMaybe<ImagePreserveAspectRatio>;
    href?: FunctionMaybe<string>;
  }
  interface LineSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    x1?: FunctionMaybe<number | string>;
    y1?: FunctionMaybe<number | string>;
    x2?: FunctionMaybe<number | string>;
    y2?: FunctionMaybe<number | string>;
  }
  interface LinearGradientSVGAttributes<T> extends GradientElementSVGAttributes<T> {
    x1?: FunctionMaybe<number | string>;
    x2?: FunctionMaybe<number | string>;
    y1?: FunctionMaybe<number | string>;
    y2?: FunctionMaybe<number | string>;
  }
  interface MarkerSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    markerUnits?: FunctionMaybe<"strokeWidth" | "userSpaceOnUse">;
    refX?: FunctionMaybe<number | string>;
    refY?: FunctionMaybe<number | string>;
    markerWidth?: FunctionMaybe<number | string>;
    markerHeight?: FunctionMaybe<number | string>;
    orient?: FunctionMaybe<string>;
  }
  interface MaskSVGAttributes<T>
    extends Omit<ContainerElementSVGAttributes<T>, "opacity" | "filter">,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    maskUnits?: FunctionMaybe<SVGUnits>;
    maskContentUnits?: FunctionMaybe<SVGUnits>;
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
  }
  interface MetadataSVGAttributes<T> extends CoreSVGAttributes<T> {}
  interface PathSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    d?: FunctionMaybe<string>;
    pathLength?: FunctionMaybe<number | string>;
  }
  interface PatternSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    patternUnits?: FunctionMaybe<SVGUnits>;
    patternContentUnits?: FunctionMaybe<SVGUnits>;
    patternTransform?: FunctionMaybe<string>;
  }
  interface PolygonSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    points?: FunctionMaybe<string>;
  }
  interface PolylineSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    points?: FunctionMaybe<string>;
  }
  interface RadialGradientSVGAttributes<T> extends GradientElementSVGAttributes<T> {
    cx?: FunctionMaybe<number | string>;
    cy?: FunctionMaybe<number | string>;
    r?: FunctionMaybe<number | string>;
    fx?: FunctionMaybe<number | string>;
    fy?: FunctionMaybe<number | string>;
  }
  interface RectSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    rx?: FunctionMaybe<number | string>;
    ry?: FunctionMaybe<number | string>;
  }
  interface StopSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "stop-color" | "stop-opacity"> {
    offset?: FunctionMaybe<number | string>;
  }
  interface SvgSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      NewViewportSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      ZoomAndPanSVGAttributes,
      PresentationSVGAttributes {
    version?: FunctionMaybe<string>;
    baseProfile?: FunctionMaybe<string>;
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    contentScriptType?: FunctionMaybe<string>;
    contentStyleType?: FunctionMaybe<string>;
    xmlns?: FunctionMaybe<string>;
  }
  interface SwitchSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {}
  interface SymbolSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      NewViewportSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes {}
  interface TextSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "writing-mode" | "text-rendering"> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    dx?: FunctionMaybe<number | string>;
    dy?: FunctionMaybe<number | string>;
    rotate?: FunctionMaybe<number | string>;
    textLength?: FunctionMaybe<number | string>;
    lengthAdjust?: FunctionMaybe<"spacing" | "spacingAndGlyphs">;
  }
  interface TextPathSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      Pick<
        PresentationSVGAttributes,
        "alignment-baseline" | "baseline-shift" | "display" | "visibility"
      > {
    startOffset?: FunctionMaybe<number | string>;
    method?: FunctionMaybe<"align" | "stretch">;
    spacing?: FunctionMaybe<"auto" | "exact">;
    href?: FunctionMaybe<string>;
  }
  interface TSpanSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      Pick<
        PresentationSVGAttributes,
        "alignment-baseline" | "baseline-shift" | "display" | "visibility"
      > {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    dx?: FunctionMaybe<number | string>;
    dy?: FunctionMaybe<number | string>;
    rotate?: FunctionMaybe<number | string>;
    textLength?: FunctionMaybe<number | string>;
    lengthAdjust?: FunctionMaybe<"spacing" | "spacingAndGlyphs">;
  }
  interface UseSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    href?: FunctionMaybe<string>;
  }
  interface ViewSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      FitToViewBoxSVGAttributes,
      ZoomAndPanSVGAttributes {
    viewTarget?: FunctionMaybe<string>;
  }
  /**
   * @type {HTMLElementTagNameMap}
   */
  interface HTMLElementTags {
    a: AnchorHTMLAttributes<HTMLAnchorElement>;
    abbr: HTMLAttributes<HTMLElement>;
    address: HTMLAttributes<HTMLElement>;
    area: AreaHTMLAttributes<HTMLAreaElement>;
    article: HTMLAttributes<HTMLElement>;
    aside: HTMLAttributes<HTMLElement>;
    audio: AudioHTMLAttributes<HTMLAudioElement>;
    b: HTMLAttributes<HTMLElement>;
    base: BaseHTMLAttributes<HTMLBaseElement>;
    bdi: HTMLAttributes<HTMLElement>;
    bdo: HTMLAttributes<HTMLElement>;
    blockquote: BlockquoteHTMLAttributes<HTMLElement>;
    body: HTMLAttributes<HTMLBodyElement>;
    br: HTMLAttributes<HTMLBRElement>;
    button: ButtonHTMLAttributes<HTMLButtonElement>;
    canvas: CanvasHTMLAttributes<HTMLCanvasElement>;
    caption: HTMLAttributes<HTMLElement>;
    cite: HTMLAttributes<HTMLElement>;
    code: HTMLAttributes<HTMLElement>;
    col: ColHTMLAttributes<HTMLTableColElement>;
    colgroup: ColgroupHTMLAttributes<HTMLTableColElement>;
    data: DataHTMLAttributes<HTMLElement>;
    datalist: HTMLAttributes<HTMLDataListElement>;
    dd: HTMLAttributes<HTMLElement>;
    del: HTMLAttributes<HTMLElement>;
    details: DetailsHtmlAttributes<HTMLDetailsElement>;
    dfn: HTMLAttributes<HTMLElement>;
    dialog: DialogHtmlAttributes<HTMLDialogElement>;
    div: HTMLAttributes<HTMLDivElement>;
    dl: HTMLAttributes<HTMLDListElement>;
    dt: HTMLAttributes<HTMLElement>;
    em: HTMLAttributes<HTMLElement>;
    embed: EmbedHTMLAttributes<HTMLEmbedElement>;
    fieldset: FieldsetHTMLAttributes<HTMLFieldSetElement>;
    figcaption: HTMLAttributes<HTMLElement>;
    figure: HTMLAttributes<HTMLElement>;
    footer: HTMLAttributes<HTMLElement>;
    form: FormHTMLAttributes<HTMLFormElement>;
    h1: HTMLAttributes<HTMLHeadingElement>;
    h2: HTMLAttributes<HTMLHeadingElement>;
    h3: HTMLAttributes<HTMLHeadingElement>;
    h4: HTMLAttributes<HTMLHeadingElement>;
    h5: HTMLAttributes<HTMLHeadingElement>;
    h6: HTMLAttributes<HTMLHeadingElement>;
    head: HTMLAttributes<HTMLHeadElement>;
    header: HTMLAttributes<HTMLElement>;
    hgroup: HTMLAttributes<HTMLElement>;
    hr: HTMLAttributes<HTMLHRElement>;
    html: HTMLAttributes<HTMLHtmlElement>;
    i: HTMLAttributes<HTMLElement>;
    iframe: IframeHTMLAttributes<HTMLIFrameElement>;
    img: ImgHTMLAttributes<HTMLImageElement>;
    input: InputHTMLAttributes<HTMLInputElement>;
    ins: InsHTMLAttributes<HTMLModElement>;
    kbd: HTMLAttributes<HTMLElement>;
    label: LabelHTMLAttributes<HTMLLabelElement>;
    legend: HTMLAttributes<HTMLLegendElement>;
    li: LiHTMLAttributes<HTMLLIElement>;
    link: LinkHTMLAttributes<HTMLLinkElement>;
    main: HTMLAttributes<HTMLElement>;
    map: MapHTMLAttributes<HTMLMapElement>;
    mark: HTMLAttributes<HTMLElement>;
    menu: MenuHTMLAttributes<HTMLElement>;
    meta: MetaHTMLAttributes<HTMLMetaElement>;
    meter: MeterHTMLAttributes<HTMLElement>;
    nav: HTMLAttributes<HTMLElement>;
    noscript: HTMLAttributes<HTMLElement>;
    object: ObjectHTMLAttributes<HTMLObjectElement>;
    ol: OlHTMLAttributes<HTMLOListElement>;
    optgroup: OptgroupHTMLAttributes<HTMLOptGroupElement>;
    option: OptionHTMLAttributes<HTMLOptionElement>;
    output: OutputHTMLAttributes<HTMLElement>;
    p: HTMLAttributes<HTMLParagraphElement>;
    picture: HTMLAttributes<HTMLElement>;
    pre: HTMLAttributes<HTMLPreElement>;
    progress: ProgressHTMLAttributes<HTMLProgressElement>;
    q: QuoteHTMLAttributes<HTMLQuoteElement>;
    rp: HTMLAttributes<HTMLElement>;
    rt: HTMLAttributes<HTMLElement>;
    ruby: HTMLAttributes<HTMLElement>;
    s: HTMLAttributes<HTMLElement>;
    samp: HTMLAttributes<HTMLElement>;
    script: ScriptHTMLAttributes<HTMLElement>;
    section: HTMLAttributes<HTMLElement>;
    select: SelectHTMLAttributes<HTMLSelectElement>;
    slot: HTMLSlotElementAttributes;
    small: HTMLAttributes<HTMLElement>;
    source: SourceHTMLAttributes<HTMLSourceElement>;
    span: HTMLAttributes<HTMLSpanElement>;
    strong: HTMLAttributes<HTMLElement>;
    style: StyleHTMLAttributes<HTMLStyleElement>;
    sub: HTMLAttributes<HTMLElement>;
    summary: HTMLAttributes<HTMLElement>;
    sup: HTMLAttributes<HTMLElement>;
    table: HTMLAttributes<HTMLTableElement>;
    tbody: HTMLAttributes<HTMLTableSectionElement>;
    td: TdHTMLAttributes<HTMLTableCellElement>;
    template: TemplateHTMLAttributes<HTMLTemplateElement>;
    textarea: TextareaHTMLAttributes<HTMLTextAreaElement>;
    tfoot: HTMLAttributes<HTMLTableSectionElement>;
    th: ThHTMLAttributes<HTMLTableCellElement>;
    thead: HTMLAttributes<HTMLTableSectionElement>;
    time: TimeHTMLAttributes<HTMLElement>;
    title: HTMLAttributes<HTMLTitleElement>;
    tr: HTMLAttributes<HTMLTableRowElement>;
    track: TrackHTMLAttributes<HTMLTrackElement>;
    u: HTMLAttributes<HTMLElement>;
    ul: HTMLAttributes<HTMLUListElement>;
    var: HTMLAttributes<HTMLElement>;
    video: VideoHTMLAttributes<HTMLVideoElement>;
    wbr: HTMLAttributes<HTMLElement>;
  }
  /**
   * @type {HTMLElementDeprecatedTagNameMap}
   */
  interface HTMLElementDeprecatedTags {
    big: HTMLAttributes<HTMLElement>;
    keygen: KeygenHTMLAttributes<HTMLElement>;
    menuitem: HTMLAttributes<HTMLElement>;
    noindex: HTMLAttributes<HTMLElement>;
    param: ParamHTMLAttributes<HTMLParamElement>;
  }
  /**
   * @type {SVGElementTagNameMap}
   */
  interface SVGElementTags {
    animate: AnimateSVGAttributes<SVGAnimateElement>;
    animateMotion: AnimateMotionSVGAttributes<SVGAnimateMotionElement>;
    animateTransform: AnimateTransformSVGAttributes<SVGAnimateTransformElement>;
    circle: CircleSVGAttributes<SVGCircleElement>;
    clipPath: ClipPathSVGAttributes<SVGClipPathElement>;
    defs: DefsSVGAttributes<SVGDefsElement>;
    desc: DescSVGAttributes<SVGDescElement>;
    ellipse: EllipseSVGAttributes<SVGEllipseElement>;
    feBlend: FeBlendSVGAttributes<SVGFEBlendElement>;
    feColorMatrix: FeColorMatrixSVGAttributes<SVGFEColorMatrixElement>;
    feComponentTransfer: FeComponentTransferSVGAttributes<SVGFEComponentTransferElement>;
    feComposite: FeCompositeSVGAttributes<SVGFECompositeElement>;
    feConvolveMatrix: FeConvolveMatrixSVGAttributes<SVGFEConvolveMatrixElement>;
    feDiffuseLighting: FeDiffuseLightingSVGAttributes<SVGFEDiffuseLightingElement>;
    feDisplacementMap: FeDisplacementMapSVGAttributes<SVGFEDisplacementMapElement>;
    feDistantLight: FeDistantLightSVGAttributes<SVGFEDistantLightElement>;
    feDropShadow: Partial<SVGFEDropShadowElement>;
    feFlood: FeFloodSVGAttributes<SVGFEFloodElement>;
    feFuncA: FeFuncSVGAttributes<SVGFEFuncAElement>;
    feFuncB: FeFuncSVGAttributes<SVGFEFuncBElement>;
    feFuncG: FeFuncSVGAttributes<SVGFEFuncGElement>;
    feFuncR: FeFuncSVGAttributes<SVGFEFuncRElement>;
    feGaussianBlur: FeGaussianBlurSVGAttributes<SVGFEGaussianBlurElement>;
    feImage: FeImageSVGAttributes<SVGFEImageElement>;
    feMerge: FeMergeSVGAttributes<SVGFEMergeElement>;
    feMergeNode: FeMergeNodeSVGAttributes<SVGFEMergeNodeElement>;
    feMorphology: FeMorphologySVGAttributes<SVGFEMorphologyElement>;
    feOffset: FeOffsetSVGAttributes<SVGFEOffsetElement>;
    fePointLight: FePointLightSVGAttributes<SVGFEPointLightElement>;
    feSpecularLighting: FeSpecularLightingSVGAttributes<SVGFESpecularLightingElement>;
    feSpotLight: FeSpotLightSVGAttributes<SVGFESpotLightElement>;
    feTile: FeTileSVGAttributes<SVGFETileElement>;
    feTurbulence: FeTurbulanceSVGAttributes<SVGFETurbulenceElement>;
    filter: FilterSVGAttributes<SVGFilterElement>;
    foreignObject: ForeignObjectSVGAttributes<SVGForeignObjectElement>;
    g: GSVGAttributes<SVGGElement>;
    image: ImageSVGAttributes<SVGImageElement>;
    line: LineSVGAttributes<SVGLineElement>;
    linearGradient: LinearGradientSVGAttributes<SVGLinearGradientElement>;
    marker: MarkerSVGAttributes<SVGMarkerElement>;
    mask: MaskSVGAttributes<SVGMaskElement>;
    metadata: MetadataSVGAttributes<SVGMetadataElement>;
    mpath: Partial<SVGMPathElement>;
    path: PathSVGAttributes<SVGPathElement>;
    pattern: PatternSVGAttributes<SVGPatternElement>;
    polygon: PolygonSVGAttributes<SVGPolygonElement>;
    polyline: PolylineSVGAttributes<SVGPolylineElement>;
    radialGradient: RadialGradientSVGAttributes<SVGRadialGradientElement>;
    rect: RectSVGAttributes<SVGRectElement>;
    set: Partial<SVGSetElement>;
    stop: StopSVGAttributes<SVGStopElement>;
    svg: SvgSVGAttributes<SVGSVGElement>;
    switch: SwitchSVGAttributes<SVGSwitchElement>;
    symbol: SymbolSVGAttributes<SVGSymbolElement>;
    text: TextSVGAttributes<SVGTextElement>;
    textPath: TextPathSVGAttributes<SVGTextPathElement>;
    tspan: TSpanSVGAttributes<SVGTSpanElement>;
    use: UseSVGAttributes<SVGUseElement>;
    view: ViewSVGAttributes<SVGViewElement>;
  }
  interface IntrinsicElements extends HTMLElementTags, HTMLElementDeprecatedTags, SVGElementTags {}
}
`})zg.createModel({"jsx-runtime.d.ts":`export * from "./types/jsx";
`,"package.json":`{
  "name": "solid-js",
  "description": "A declarative JavaScript library for building user interfaces.",
  "version": "1.6.7",
  "author": "Ryan Carniato",
  "license": "MIT",
  "homepage": "https://solidjs.com",
  "repository": {
    "type": "git",
    "url": "https://github.com/solidjs/solid"
  },
  "main": "./dist/server.cjs",
  "module": "./dist/server.js",
  "browser": {
    "./dist/server.cjs": "./dist/solid.cjs",
    "./dist/server.js": "./dist/solid.js"
  },
  "unpkg": "./dist/solid.cjs",
  "types": "types/index.d.ts",
  "sideEffects": false,
  "type": "module",
  "files": [
    "dist",
    "store/dist",
    "store/types",
    "store/package.json",
    "web/dist",
    "web/types",
    "web/package.json",
    "h/dist",
    "h/types",
    "h/package.json",
    "h/jsx-runtime/dist",
    "h/jsx-runtime/types",
    "h/jsx-runtime/package.json",
    "h/jsx-dev-runtime/package.json",
    "html/dist",
    "html/types",
    "html/package.json",
    "universal/dist",
    "universal/types",
    "universal/package.json",
    "types",
    "jsx-runtime.d.ts"
  ],
  "exports": {
    ".": {
      "worker": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "browser": {
        "development": {
          "import": {
            "types": "./types/index.d.ts",
            "default": "./dist/dev.js"
          },
          "require": "./dist/dev.cjs"
        },
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/solid.js"
        },
        "require": "./dist/solid.cjs"
      },
      "deno": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "node": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "development": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/dev.js"
        },
        "require": "./dist/dev.cjs"
      },
      "import": {
        "types": "./types/index.d.ts",
        "default": "./dist/solid.js"
      },
      "require": "./dist/solid.cjs"
    },
    "./dist/*": "./dist/*",
    "./jsx-runtime": {
      "types": "./types/jsx.d.ts",
      "default": "./dist/solid.js"
    },
    "./jsx-dev-runtime": {
      "types": "./types/jsx.d.ts",
      "default": "./dist/solid.js"
    },
    "./store": {
      "worker": {
        "import": {
          "types": "./store/types/index.d.ts",
          "default": "./store/dist/server.js"
        },
        "require": "./store/dist/server.cjs"
      },
      "browser": {
        "development": {
          "import": {
            "types": "./store/types/index.d.ts",
            "default": "./store/dist/dev.js"
          },
          "require": "./store/dist/dev.cjs"
        },
        "import": {
          "types": "./store/types/index.d.ts",
          "default": "./store/dist/store.js"
        },
        "require": "./store/dist/store.cjs"
      },
      "deno": {
        "import": {
          "types": "./store/types/index.d.ts",
          "default": "./store/dist/server.js"
        },
        "require": "./store/dist/server.cjs"
      },
      "node": {
        "import": {
          "types": "./store/types/index.d.ts",
          "default": "./store/dist/server.js"
        },
        "require": "./store/dist/server.cjs"
      },
      "development": {
        "import": {
          "types": "./store/types/index.d.ts",
          "default": "./store/dist/dev.js"
        },
        "require": "./store/dist/dev.cjs"
      },
      "import": {
        "types": "./store/types/index.d.ts",
        "default": "./store/dist/store.js"
      },
      "require": "./store/dist/store.cjs"
    },
    "./store/dist/*": "./store/dist/*",
    "./web": {
      "worker": {
        "import": {
          "types": "./web/types/index.d.ts",
          "default": "./web/dist/server.js"
        },
        "require": "./web/dist/server.cjs"
      },
      "browser": {
        "development": {
          "import": {
            "types": "./web/types/index.d.ts",
            "default": "./web/dist/dev.js"
          },
          "require": "./web/dist/dev.cjs"
        },
        "import": {
          "types": "./web/types/index.d.ts",
          "default": "./web/dist/web.js"
        },
        "require": "./web/dist/web.cjs"
      },
      "deno": {
        "import": {
          "types": "./web/types/index.d.ts",
          "default": "./web/dist/server.js"
        },
        "require": "./web/dist/server.cjs"
      },
      "node": {
        "import": {
          "types": "./web/types/index.d.ts",
          "default": "./web/dist/server.js"
        },
        "require": "./web/dist/server.cjs"
      },
      "development": {
        "import": {
          "types": "./web/types/index.d.ts",
          "default": "./web/dist/dev.js"
        },
        "require": "./web/dist/dev.cjs"
      },
      "import": {
        "types": "./web/types/index.d.ts",
        "default": "./web/dist/web.js"
      },
      "require": "./web/dist/web.cjs"
    },
    "./web/dist/*": "./web/dist/*",
    "./universal": {
      "development": {
        "import": {
          "types": "./universal/types/index.d.ts",
          "default": "./universal/dist/dev.js"
        },
        "require": "./universal/dist/dev.cjs"
      },
      "import": {
        "types": "./universal/types/index.d.ts",
        "default": "./universal/dist/universal.js"
      },
      "require": "./universal/dist/universal.cjs"
    },
    "./universal/dist/*": "./universal/dist/*",
    "./h": {
      "import": {
        "types": "./h/types/index.d.ts",
        "default": "./h/dist/h.js"
      },
      "require": "./h/dist/h.cjs"
    },
    "./h/jsx-runtime": {
      "import": {
        "types": "./h/jsx-runtime/types/index.d.ts",
        "default": "./h/jsx-runtime/dist/jsx.js"
      },
      "require": "./h/jsx-runtime/dist/jsx.cjs"
    },
    "./h/jsx-dev-runtime": {
      "import": {
        "types": "./h/jsx-runtime/types/index.d.ts",
        "default": "./h/jsx-runtime/dist/jsx.js"
      },
      "require": "./h/jsx-runtime/dist/jsx.cjs"
    },
    "./h/dist/*": "./h/dist/*",
    "./html": {
      "import": {
        "types": "./html/types/index.d.ts",
        "default": "./html/dist/html.js"
      },
      "require": "./html/dist/html.cjs"
    },
    "./html/dist/*": "./html/dist/*"
  },
  "keywords": [
    "solid",
    "solidjs",
    "ui",
    "reactive",
    "components",
    "compiler",
    "performance"
  ],
  "dependencies": {
    "csstype": "^3.1.0"
  },
  "scripts": {
    "build": "npm-run-all -nl build:*",
    "build:clean": "rimraf dist/ coverage/ store/dist/ web/dist/ h/dist/ h/jsx-runtime/dist html/dist/",
    "build:js": "rollup -c",
    "types": "npm-run-all -nl types:*",
    "types:clean": "rimraf types/ store/types/ web/types/ h/types/ h/jsx-runtime/types html/types/",
    "types:copy": "ncp ../../node_modules/dom-expressions/src/jsx.d.ts ./src/jsx.d.ts && ncp ../../node_modules/dom-expressions/src/jsx-h.d.ts ./h/jsx-runtime/src/jsx.d.ts",
    "types:src": "tsc --project ./tsconfig.build.json && ncp ../../node_modules/dom-expressions/src/jsx.d.ts ./types/jsx.d.ts",
    "types:web": "tsc --project ./web/tsconfig.build.json",
    "types:copy-web": "ncp ../../node_modules/dom-expressions/src/client.d.ts ./web/types/client.d.ts && ncp ../../node_modules/dom-expressions/src/server.d.ts ./web/types/server.d.ts",
    "types:store": "tsc --project ./store/tsconfig.build.json",
    "types:html": "tsc --project ./html/tsconfig.json && ncp ../../node_modules/lit-dom-expressions/types/index.d.ts ./html/types/lit.d.ts",
    "types:h": "tsc --project ./h/tsconfig.json && ncp ../../node_modules/hyper-dom-expressions/types/index.d.ts ./h/types/hyperscript.d.ts",
    "types:jsx": "rimraf ./h/jsx-runtime/types && tsc --project ./h/jsx-runtime/tsconfig.json && ncp ../../node_modules/dom-expressions/src/jsx-h.d.ts ./h/jsx-runtime/types/jsx.d.ts",
    "types:universal": "tsc --project ./universal/tsconfig.json && ncp ../../node_modules/dom-expressions/src/universal.d.ts ./universal/types/universal.d.ts",
    "bench": "node --allow-natives-syntax bench/bench.cjs",
    "link": "symlink-dir . node_modules/solid-js",
    "test": "jest",
    "coverage": "jest --coverage",
    "test-types": "tsc --project tsconfig.test.json"
  }
}`,"h/package.json":`{
  "name": "solid-js/h",
  "main": "./dist/h.cjs",
  "module": "./dist/h.js",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false
}
`,"html/package.json":`{
  "name": "solid-js/html",
  "main": "./dist/html.cjs",
  "module": "./dist/html.js",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false
}
`,"store/package.json":`{
  "name": "solid-js/store",
  "main": "./dist/server.cjs",
  "module": "./dist/server.js",
  "browser": {
    "./dist/server.cjs": "./dist/store.cjs",
    "./dist/server.js": "./dist/store.js"
  },
  "unpkg": "./dist/store.cjs",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false,
  "exports": {
    ".": {
      "worker": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "browser": {
        "development": {
          "import": {
            "types": "./types/index.d.ts",
            "default": "./dist/dev.js"
          },
          "require": "./dist/dev.cjs"
        },
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/store.js"
        },
        "require": "./dist/store.cjs"
      },
      "deno": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "node": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "development": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/dev.js"
        },
        "require": "./dist/dev.cjs"
      },
      "import": {
        "types": "./types/index.d.ts",
        "default": "./dist/store.js"
      },
      "require": "./dist/store.cjs"
    }
  }
}
`,"types/index.d.ts":`export { $DEVCOMP, $PROXY, $TRACK, batch, children, createComputed, createContext, createDeferred, createEffect, createMemo, createReaction, createRenderEffect, createResource, createRoot, createSelector, createSignal, enableExternalSource, enableScheduling, equalFn, getListener, getOwner, on, onCleanup, onError, onMount, runWithOwner, startTransition, untrack, useContext, useTransition } from "./reactive/signal.js";
export type { Accessor, AccessorArray, ChildrenReturn, Context, EffectFunction, InitializedResource, InitializedResourceOptions, InitializedResourceReturn, MemoOptions, NoInfer, OnEffectFunction, Owner, Resource, ResourceActions, ResourceFetcher, ResourceFetcherInfo, ResourceOptions, ResourceReturn, ResourceSource, ReturnTypes, Setter, Signal, SignalOptions } from "./reactive/signal.js";
export * from "./reactive/observable.js";
export * from "./reactive/scheduler.js";
export * from "./reactive/array.js";
export * from "./render/index.js";
import type { JSX } from "./jsx.js";
declare type JSXElement = JSX.Element;
export type { JSXElement, JSX };
import { hashValue, registerGraph, serializeGraph, writeSignal } from "./reactive/signal.js";
declare let DEV: {
    writeSignal: typeof writeSignal;
    serializeGraph: typeof serializeGraph;
    registerGraph: typeof registerGraph;
    hashValue: typeof hashValue;
};
export { DEV };
declare global {
    var Solid$$: boolean;
}
`,"types/jsx.d.ts":`import * as csstype from 'csstype';

/**
 * Based on JSX types for Surplus and Inferno and adapted for \`dom-expressions\`.
 *
 * https://github.com/adamhaile/surplus/blob/master/index.d.ts
 * https://github.com/infernojs/inferno/blob/master/packages/inferno/src/core/types.ts
 */
type DOMElement = Element;

export namespace JSX {
  type Element =
    | Node
    | ArrayElement
    | FunctionElement
    | (string & {})
    | number
    | boolean
    | null
    | undefined;
  interface ArrayElement extends Array<Element> {}
  interface FunctionElement {
    (): Element;
  }
  interface ElementClass {
    // empty, libs can define requirements downstream
  }
  interface ElementAttributesProperty {
    // empty, libs can define requirements downstream
  }
  interface ElementChildrenAttribute {
    children: {};
  }
  interface EventHandler<T, E extends Event> {
    (
      e: E & {
        currentTarget: T;
        target: DOMElement;
      }
    ): void;
  }
  interface BoundEventHandler<T, E extends Event> {
    0: (
      data: any,
      e: E & {
        currentTarget: T;
        target: DOMElement;
      }
    ) => void;
    1: any;
  }
  type EventHandlerUnion<T, E extends Event> = EventHandler<T, E> | BoundEventHandler<T, E>;
  interface IntrinsicAttributes {
    ref?: unknown | ((e: unknown) => void);
  }
  interface CustomAttributes<T> {
    ref?: T | ((el: T) => void);
    classList?: {
      [k: string]: boolean | undefined;
    };
    $ServerOnly?: boolean;
  }
  type Accessor<T> = () => T
  interface Directives {}
  interface DirectiveFunctions {
    [x: string]: (el: Element, accessor: Accessor<any>) => void;
  }
  interface ExplicitProperties {}
  interface ExplicitAttributes {}
  interface CustomEvents {}
  interface CustomCaptureEvents {}
  type DirectiveAttributes = {
    [Key in keyof Directives as \`use:\${Key}\`]?: Directives[Key];
  };
  type DirectiveFunctionAttributes<T> = {
    [K in keyof DirectiveFunctions as string extends K ? never : \`use:\${K}\`]?: DirectiveFunctions[K] extends (
      el: infer E, // will be unknown if not provided
      ...rest: infer R // use rest so that we can check whether it's provided or not
    ) => void
      ? T extends E // everything extends unknown if E is unknown
        ? R extends [infer A] // check if has accessor provided
          ? A extends Accessor<infer V>
            ? V // it's an accessor
            : never // it isn't, type error
          : true // no accessor provided
        : never // T is the wrong element
      : never; // it isn't a function
  };
  type PropAttributes = {
    [Key in keyof ExplicitProperties as \`prop:\${Key}\`]?: ExplicitProperties[Key];
  };
  type AttrAttributes = {
    [Key in keyof ExplicitAttributes as \`attr:\${Key}\`]?: ExplicitAttributes[Key];
  };
  type OnAttributes<T> = {
    [Key in keyof CustomEvents as \`on:\${Key}\`]?: EventHandler<T, CustomEvents[Key]>;
  }
  type OnCaptureAttributes<T> = {
    [Key in keyof CustomCaptureEvents as \`oncapture:\${Key}\`]?: EventHandler<T, CustomCaptureEvents[Key]>;
  }
  interface DOMAttributes<T> extends CustomAttributes<T>, DirectiveAttributes, DirectiveFunctionAttributes<T>,
                                     PropAttributes, AttrAttributes, OnAttributes<T>, OnCaptureAttributes<T>,
                                     CustomEventHandlersCamelCase<T>, CustomEventHandlersLowerCase<T> {
    children?: Element;
    innerHTML?: string;
    innerText?: string | number;
    textContent?: string | number;
    // camel case events
    onCopy?: EventHandlerUnion<T, ClipboardEvent>;
    onCut?: EventHandlerUnion<T, ClipboardEvent>;
    onPaste?: EventHandlerUnion<T, ClipboardEvent>;
    onCompositionEnd?: EventHandlerUnion<T, CompositionEvent>;
    onCompositionStart?: EventHandlerUnion<T, CompositionEvent>;
    onCompositionUpdate?: EventHandlerUnion<T, CompositionEvent>;
    onFocusOut?: EventHandlerUnion<T, FocusEvent>;
    onFocusIn?: EventHandlerUnion<T, FocusEvent>;
    onEncrypted?: EventHandlerUnion<T, Event>;
    onDragExit?: EventHandlerUnion<T, DragEvent>;
    // lower case events
    oncopy?: EventHandlerUnion<T, ClipboardEvent>;
    oncut?: EventHandlerUnion<T, ClipboardEvent>;
    onpaste?: EventHandlerUnion<T, ClipboardEvent>;
    oncompositionend?: EventHandlerUnion<T, CompositionEvent>;
    oncompositionstart?: EventHandlerUnion<T, CompositionEvent>;
    oncompositionupdate?: EventHandlerUnion<T, CompositionEvent>;
    onfocusout?: EventHandlerUnion<T, FocusEvent>;
    onfocusin?: EventHandlerUnion<T, FocusEvent>;
    onencrypted?: EventHandlerUnion<T, Event>;
    ondragexit?: EventHandlerUnion<T, DragEvent>;
  }
  interface CustomEventHandlersCamelCase<T> {
    onAbort?: EventHandlerUnion<T, Event>;
    onAnimationEnd?: EventHandlerUnion<T, AnimationEvent>;
    onAnimationIteration?: EventHandlerUnion<T, AnimationEvent>;
    onAnimationStart?: EventHandlerUnion<T, AnimationEvent>;
    onAuxClick?: EventHandlerUnion<T, MouseEvent>;
    onBeforeInput?: EventHandlerUnion<T, InputEvent>;
    onBlur?: EventHandlerUnion<T, FocusEvent>;
    onCanPlay?: EventHandlerUnion<T, Event>;
    onCanPlayThrough?: EventHandlerUnion<T, Event>;
    onChange?: EventHandlerUnion<T, Event>;
    onClick?: EventHandlerUnion<T, MouseEvent>;
    onContextMenu?: EventHandlerUnion<T, MouseEvent>;
    onDblClick?: EventHandlerUnion<T, MouseEvent>;
    onDrag?: EventHandlerUnion<T, DragEvent>;
    onDragEnd?: EventHandlerUnion<T, DragEvent>;
    onDragEnter?: EventHandlerUnion<T, DragEvent>;
    onDragLeave?: EventHandlerUnion<T, DragEvent>;
    onDragOver?: EventHandlerUnion<T, DragEvent>;
    onDragStart?: EventHandlerUnion<T, DragEvent>;
    onDrop?: EventHandlerUnion<T, DragEvent>;
    onDurationChange?: EventHandlerUnion<T, Event>;
    onEmptied?: EventHandlerUnion<T, Event>;
    onEnded?: EventHandlerUnion<T, Event>;
    onError?: EventHandlerUnion<T, Event>;
    onFocus?: EventHandlerUnion<T, FocusEvent>;
    onGotPointerCapture?: EventHandlerUnion<T, PointerEvent>;
    onInput?: EventHandlerUnion<T, InputEvent>;
    onInvalid?: EventHandlerUnion<T, Event>;
    onKeyDown?: EventHandlerUnion<T, KeyboardEvent>;
    onKeyPress?: EventHandlerUnion<T, KeyboardEvent>;
    onKeyUp?: EventHandlerUnion<T, KeyboardEvent>;
    onLoad?: EventHandlerUnion<T, Event>;
    onLoadedData?: EventHandlerUnion<T, Event>;
    onLoadedMetadata?: EventHandlerUnion<T, Event>;
    onLoadStart?: EventHandlerUnion<T, Event>;
    onLostPointerCapture?: EventHandlerUnion<T, PointerEvent>;
    onMouseDown?: EventHandlerUnion<T, MouseEvent>;
    onMouseEnter?: EventHandlerUnion<T, MouseEvent>;
    onMouseLeave?: EventHandlerUnion<T, MouseEvent>;
    onMouseMove?: EventHandlerUnion<T, MouseEvent>;
    onMouseOut?: EventHandlerUnion<T, MouseEvent>;
    onMouseOver?: EventHandlerUnion<T, MouseEvent>;
    onMouseUp?: EventHandlerUnion<T, MouseEvent>;
    onPause?: EventHandlerUnion<T, Event>;
    onPlay?: EventHandlerUnion<T, Event>;
    onPlaying?: EventHandlerUnion<T, Event>;
    onPointerCancel?: EventHandlerUnion<T, PointerEvent>;
    onPointerDown?: EventHandlerUnion<T, PointerEvent>;
    onPointerEnter?: EventHandlerUnion<T, PointerEvent>;
    onPointerLeave?: EventHandlerUnion<T, PointerEvent>;
    onPointerMove?: EventHandlerUnion<T, PointerEvent>;
    onPointerOut?: EventHandlerUnion<T, PointerEvent>;
    onPointerOver?: EventHandlerUnion<T, PointerEvent>;
    onPointerUp?: EventHandlerUnion<T, PointerEvent>;
    onProgress?: EventHandlerUnion<T, Event>;
    onRateChange?: EventHandlerUnion<T, Event>;
    onReset?: EventHandlerUnion<T, Event>;
    onScroll?: EventHandlerUnion<T, UIEvent>;
    onSeeked?: EventHandlerUnion<T, Event>;
    onSeeking?: EventHandlerUnion<T, Event>;
    onSelect?: EventHandlerUnion<T, UIEvent>;
    onStalled?: EventHandlerUnion<T, Event>;
    onSubmit?: EventHandlerUnion<
      T,
      Event & {
        submitter: HTMLElement;
      }
    >;
    onSuspend?: EventHandlerUnion<T, Event>;
    onTimeUpdate?: EventHandlerUnion<T, Event>;
    onTouchCancel?: EventHandlerUnion<T, TouchEvent>;
    onTouchEnd?: EventHandlerUnion<T, TouchEvent>;
    onTouchMove?: EventHandlerUnion<T, TouchEvent>;
    onTouchStart?: EventHandlerUnion<T, TouchEvent>;
    onTransitionEnd?: EventHandlerUnion<T, TransitionEvent>;
    onVolumeChange?: EventHandlerUnion<T, Event>;
    onWaiting?: EventHandlerUnion<T, Event>;
    onWheel?: EventHandlerUnion<T, WheelEvent>;
  }
  /**
   * @type {GlobalEventHandlers}
   */
  interface CustomEventHandlersLowerCase<T> {
    onabort?: EventHandlerUnion<T, Event>;
    onanimationend?: EventHandlerUnion<T, AnimationEvent>;
    onanimationiteration?: EventHandlerUnion<T, AnimationEvent>;
    onanimationstart?: EventHandlerUnion<T, AnimationEvent>;
    onauxclick?: EventHandlerUnion<T, MouseEvent>;
    onbeforeinput?: EventHandlerUnion<T, InputEvent>;
    onblur?: EventHandlerUnion<T, FocusEvent>;
    oncanplay?: EventHandlerUnion<T, Event>;
    oncanplaythrough?: EventHandlerUnion<T, Event>;
    onchange?: EventHandlerUnion<T, Event>;
    onclick?: EventHandlerUnion<T, MouseEvent>;
    oncontextmenu?: EventHandlerUnion<T, MouseEvent>;
    ondblclick?: EventHandlerUnion<T, MouseEvent>;
    ondrag?: EventHandlerUnion<T, DragEvent>;
    ondragend?: EventHandlerUnion<T, DragEvent>;
    ondragenter?: EventHandlerUnion<T, DragEvent>;
    ondragleave?: EventHandlerUnion<T, DragEvent>;
    ondragover?: EventHandlerUnion<T, DragEvent>;
    ondragstart?: EventHandlerUnion<T, DragEvent>;
    ondrop?: EventHandlerUnion<T, DragEvent>;
    ondurationchange?: EventHandlerUnion<T, Event>;
    onemptied?: EventHandlerUnion<T, Event>;
    onended?: EventHandlerUnion<T, Event>;
    onerror?: EventHandlerUnion<T, Event>;
    onfocus?: EventHandlerUnion<T, FocusEvent>;
    ongotpointercapture?: EventHandlerUnion<T, PointerEvent>;
    oninput?: EventHandlerUnion<T, InputEvent>;
    oninvalid?: EventHandlerUnion<T, Event>;
    onkeydown?: EventHandlerUnion<T, KeyboardEvent>;
    onkeypress?: EventHandlerUnion<T, KeyboardEvent>;
    onkeyup?: EventHandlerUnion<T, KeyboardEvent>;
    onload?: EventHandlerUnion<T, Event>;
    onloadeddata?: EventHandlerUnion<T, Event>;
    onloadedmetadata?: EventHandlerUnion<T, Event>;
    onloadstart?: EventHandlerUnion<T, Event>;
    onlostpointercapture?: EventHandlerUnion<T, PointerEvent>;
    onmousedown?: EventHandlerUnion<T, MouseEvent>;
    onmouseenter?: EventHandlerUnion<T, MouseEvent>;
    onmouseleave?: EventHandlerUnion<T, MouseEvent>;
    onmousemove?: EventHandlerUnion<T, MouseEvent>;
    onmouseout?: EventHandlerUnion<T, MouseEvent>;
    onmouseover?: EventHandlerUnion<T, MouseEvent>;
    onmouseup?: EventHandlerUnion<T, MouseEvent>;
    onpause?: EventHandlerUnion<T, Event>;
    onplay?: EventHandlerUnion<T, Event>;
    onplaying?: EventHandlerUnion<T, Event>;
    onpointercancel?: EventHandlerUnion<T, PointerEvent>;
    onpointerdown?: EventHandlerUnion<T, PointerEvent>;
    onpointerenter?: EventHandlerUnion<T, PointerEvent>;
    onpointerleave?: EventHandlerUnion<T, PointerEvent>;
    onpointermove?: EventHandlerUnion<T, PointerEvent>;
    onpointerout?: EventHandlerUnion<T, PointerEvent>;
    onpointerover?: EventHandlerUnion<T, PointerEvent>;
    onpointerup?: EventHandlerUnion<T, PointerEvent>;
    onprogress?: EventHandlerUnion<T, Event>;
    onratechange?: EventHandlerUnion<T, Event>;
    onreset?: EventHandlerUnion<T, Event>;
    onscroll?: EventHandlerUnion<T, UIEvent>;
    onseeked?: EventHandlerUnion<T, Event>;
    onseeking?: EventHandlerUnion<T, Event>;
    onselect?: EventHandlerUnion<T, UIEvent>;
    onstalled?: EventHandlerUnion<T, Event>;
    onsubmit?: EventHandlerUnion<
      T,
      Event & {
        submitter: HTMLElement;
      }
    >;
    onsuspend?: EventHandlerUnion<T, Event>;
    ontimeupdate?: EventHandlerUnion<T, Event>;
    ontouchcancel?: EventHandlerUnion<T, TouchEvent>;
    ontouchend?: EventHandlerUnion<T, TouchEvent>;
    ontouchmove?: EventHandlerUnion<T, TouchEvent>;
    ontouchstart?: EventHandlerUnion<T, TouchEvent>;
    ontransitionend?: EventHandlerUnion<T, TransitionEvent>;
    onvolumechange?: EventHandlerUnion<T, Event>;
    onwaiting?: EventHandlerUnion<T, Event>;
    onwheel?: EventHandlerUnion<T, WheelEvent>;
  }

  interface CSSProperties extends csstype.PropertiesHyphen {
    // Override
    [key: \`-\${string}\`]: string | number | undefined
  }

  type HTMLAutocapitalize = "off" | "none" | "on" | "sentences" | "words" | "characters";
  type HTMLDir = "ltr" | "rtl" | "auto";
  type HTMLFormEncType = "application/x-www-form-urlencoded" | "multipart/form-data" | "text/plain";
  type HTMLFormMethod = "post" | "get" | "dialog";
  type HTMLCrossorigin = "anonymous" | "use-credentials" | "";
  type HTMLReferrerPolicy =
    | "no-referrer"
    | "no-referrer-when-downgrade"
    | "origin"
    | "origin-when-cross-origin"
    | "same-origin"
    | "strict-origin"
    | "strict-origin-when-cross-origin"
    | "unsafe-url";
  type HTMLIframeSandbox =
    | "allow-downloads-without-user-activation"
    | "allow-downloads"
    | "allow-forms"
    | "allow-modals"
    | "allow-orientation-lock"
    | "allow-pointer-lock"
    | "allow-popups"
    | "allow-popups-to-escape-sandbox"
    | "allow-presentation"
    | "allow-same-origin"
    | "allow-scripts"
    | "allow-storage-access-by-user-activation"
    | "allow-top-navigation"
    | "allow-top-navigation-by-user-activation";
  type HTMLLinkAs =
    | "audio"
    | "document"
    | "embed"
    | "fetch"
    | "font"
    | "image"
    | "object"
    | "script"
    | "style"
    | "track"
    | "video"
    | "worker";

  // All the WAI-ARIA 1.1 attributes from https://www.w3.org/TR/wai-aria-1.1/
  interface AriaAttributes {
    /** Identifies the currently active element when DOM focus is on a composite widget, textbox, group, or application. */
    "aria-activedescendant"?: string;
    /** Indicates whether assistive technologies will present all, or only parts of, the changed region based on the change notifications defined by the aria-relevant attribute. */
    "aria-atomic"?: boolean | "false" | "true";
    /**
     * Indicates whether inputting text could trigger display of one or more predictions of the user's intended value for an input and specifies how predictions would be
     * presented if they are made.
     */
    "aria-autocomplete"?: "none" | "inline" | "list" | "both";
    /** Indicates an element is being modified and that assistive technologies MAY want to wait until the modifications are complete before exposing them to the user. */
    "aria-busy"?: boolean | "false" | "true";
    /**
     * Indicates the current "checked" state of checkboxes, radio buttons, and other widgets.
     * @see aria-pressed @see aria-selected.
     */
    "aria-checked"?: boolean | "false" | "mixed" | "true";
    /**
     * Defines the total number of columns in a table, grid, or treegrid.
     * @see aria-colindex.
     */
    "aria-colcount"?: number | string;
    /**
     * Defines an element's column index or position with respect to the total number of columns within a table, grid, or treegrid.
     * @see aria-colcount @see aria-colspan.
     */
    "aria-colindex"?: number | string;
    /**
     * Defines the number of columns spanned by a cell or gridcell within a table, grid, or treegrid.
     * @see aria-colindex @see aria-rowspan.
     */
    "aria-colspan"?: number | string;
    /**
     * Identifies the element (or elements) whose contents or presence are controlled by the current element.
     * @see aria-owns.
     */
    "aria-controls"?: string;
    /** Indicates the element that represents the current item within a container or set of related elements. */
    "aria-current"?: boolean | "false" | "true" | "page" | "step" | "location" | "date" | "time";
    /**
     * Identifies the element (or elements) that describes the object.
     * @see aria-labelledby
     */
    "aria-describedby"?: string;
    /**
     * Identifies the element that provides a detailed, extended description for the object.
     * @see aria-describedby.
     */
    "aria-details"?: string;
    /**
     * Indicates that the element is perceivable but disabled, so it is not editable or otherwise operable.
     * @see aria-hidden @see aria-readonly.
     */
    "aria-disabled"?: boolean | "false" | "true";
    /**
     * Indicates what functions can be performed when a dragged object is released on the drop target.
     * @deprecated in ARIA 1.1
     */
    "aria-dropeffect"?: "none" | "copy" | "execute" | "link" | "move" | "popup";
    /**
     * Identifies the element that provides an error message for the object.
     * @see aria-invalid @see aria-describedby.
     */
    "aria-errormessage"?: string;
    /** Indicates whether the element, or another grouping element it controls, is currently expanded or collapsed. */
    "aria-expanded"?: boolean | "false" | "true";
    /**
     * Identifies the next element (or elements) in an alternate reading order of content which, at the user's discretion,
     * allows assistive technology to override the general default of reading in document source order.
     */
    "aria-flowto"?: string;
    /**
     * Indicates an element's "grabbed" state in a drag-and-drop operation.
     * @deprecated in ARIA 1.1
     */
    "aria-grabbed"?: boolean | "false" | "true";
    /** Indicates the availability and type of interactive popup element, such as menu or dialog, that can be triggered by an element. */
    "aria-haspopup"?: boolean | "false" | "true" | "menu" | "listbox" | "tree" | "grid" | "dialog";
    /**
     * Indicates whether the element is exposed to an accessibility API.
     * @see aria-disabled.
     */
    "aria-hidden"?: boolean | "false" | "true";
    /**
     * Indicates the entered value does not conform to the format expected by the application.
     * @see aria-errormessage.
     */
    "aria-invalid"?: boolean | "false" | "true" | "grammar" | "spelling";
    /** Indicates keyboard shortcuts that an author has implemented to activate or give focus to an element. */
    "aria-keyshortcuts"?: string;
    /**
     * Defines a string value that labels the current element.
     * @see aria-labelledby.
     */
    "aria-label"?: string;
    /**
     * Identifies the element (or elements) that labels the current element.
     * @see aria-describedby.
     */
    "aria-labelledby"?: string;
    /** Defines the hierarchical level of an element within a structure. */
    "aria-level"?: number | string;
    /** Indicates that an element will be updated, and describes the types of updates the user agents, assistive technologies, and user can expect from the live region. */
    "aria-live"?: "off" | "assertive" | "polite";
    /** Indicates whether an element is modal when displayed. */
    "aria-modal"?: boolean | "false" | "true";
    /** Indicates whether a text box accepts multiple lines of input or only a single line. */
    "aria-multiline"?: boolean | "false" | "true";
    /** Indicates that the user may select more than one item from the current selectable descendants. */
    "aria-multiselectable"?: boolean | "false" | "true";
    /** Indicates whether the element's orientation is horizontal, vertical, or unknown/ambiguous. */
    "aria-orientation"?: "horizontal" | "vertical";
    /**
     * Identifies an element (or elements) in order to define a visual, functional, or contextual parent/child relationship
     * between DOM elements where the DOM hierarchy cannot be used to represent the relationship.
     * @see aria-controls.
     */
    "aria-owns"?: string;
    /**
     * Defines a short hint (a word or short phrase) intended to aid the user with data entry when the control has no value.
     * A hint could be a sample value or a brief description of the expected format.
     */
    "aria-placeholder"?: string;
    /**
     * Defines an element's number or position in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM.
     * @see aria-setsize.
     */
    "aria-posinset"?: number | string;
    /**
     * Indicates the current "pressed" state of toggle buttons.
     * @see aria-checked @see aria-selected.
     */
    "aria-pressed"?: boolean | "false" | "mixed" | "true";
    /**
     * Indicates that the element is not editable, but is otherwise operable.
     * @see aria-disabled.
     */
    "aria-readonly"?: boolean | "false" | "true";
    /**
     * Indicates what notifications the user agent will trigger when the accessibility tree within a live region is modified.
     * @see aria-atomic.
     */
    "aria-relevant"?:
      | "additions"
      | "additions removals"
      | "additions text"
      | "all"
      | "removals"
      | "removals additions"
      | "removals text"
      | "text"
      | "text additions"
      | "text removals";
    /** Indicates that user input is required on the element before a form may be submitted. */
    "aria-required"?: boolean | "false" | "true";
    /** Defines a human-readable, author-localized description for the role of an element. */
    "aria-roledescription"?: string;
    /**
     * Defines the total number of rows in a table, grid, or treegrid.
     * @see aria-rowindex.
     */
    "aria-rowcount"?: number | string;
    /**
     * Defines an element's row index or position with respect to the total number of rows within a table, grid, or treegrid.
     * @see aria-rowcount @see aria-rowspan.
     */
    "aria-rowindex"?: number | string;
    /**
     * Defines the number of rows spanned by a cell or gridcell within a table, grid, or treegrid.
     * @see aria-rowindex @see aria-colspan.
     */
    "aria-rowspan"?: number | string;
    /**
     * Indicates the current "selected" state of various widgets.
     * @see aria-checked @see aria-pressed.
     */
    "aria-selected"?: boolean | "false" | "true";
    /**
     * Defines the number of items in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM.
     * @see aria-posinset.
     */
    "aria-setsize"?: number | string;
    /** Indicates if items in a table or grid are sorted in ascending or descending order. */
    "aria-sort"?: "none" | "ascending" | "descending" | "other";
    /** Defines the maximum allowed value for a range widget. */
    "aria-valuemax"?: number | string;
    /** Defines the minimum allowed value for a range widget. */
    "aria-valuemin"?: number | string;
    /**
     * Defines the current value for a range widget.
     * @see aria-valuetext.
     */
    "aria-valuenow"?: number | string;
    /** Defines the human readable text alternative of aria-valuenow for a range widget. */
    "aria-valuetext"?: string;
    role?:
      | "alert"
      | "alertdialog"
      | "application"
      | "article"
      | "banner"
      | "button"
      | "cell"
      | "checkbox"
      | "columnheader"
      | "combobox"
      | "complementary"
      | "contentinfo"
      | "definition"
      | "dialog"
      | "directory"
      | "document"
      | "feed"
      | "figure"
      | "form"
      | "grid"
      | "gridcell"
      | "group"
      | "heading"
      | "img"
      | "link"
      | "list"
      | "listbox"
      | "listitem"
      | "log"
      | "main"
      | "marquee"
      | "math"
      | "menu"
      | "menubar"
      | "menuitem"
      | "menuitemcheckbox"
      | "menuitemradio"
      | "meter"
      | "navigation"
      | "none"
      | "note"
      | "option"
      | "presentation"
      | "progressbar"
      | "radio"
      | "radiogroup"
      | "region"
      | "row"
      | "rowgroup"
      | "rowheader"
      | "scrollbar"
      | "search"
      | "searchbox"
      | "separator"
      | "slider"
      | "spinbutton"
      | "status"
      | "switch"
      | "tab"
      | "table"
      | "tablist"
      | "tabpanel"
      | "term"
      | "textbox"
      | "timer"
      | "toolbar"
      | "tooltip"
      | "tree"
      | "treegrid"
      | "treeitem";
  }

  // TODO: Should we allow this?
  // type ClassKeys = \`class:\${string}\`;
  // type CSSKeys = Exclude<keyof csstype.PropertiesHyphen, \`-\${string}\`>;

  // type CSSAttributes = {
  //   [key in CSSKeys as \`style:\${key}\`]: csstype.PropertiesHyphen[key];
  // };

  interface HTMLAttributes<T> extends AriaAttributes, DOMAttributes<T> {
    // [key: ClassKeys]: boolean;
    accessKey?: string;
    class?: string | undefined;
    contenteditable?: boolean | "inherit";
    contextmenu?: string;
    dir?: HTMLDir;
    draggable?: boolean;
    hidden?: boolean;
    id?: string;
    lang?: string;
    spellcheck?: boolean;
    style?: CSSProperties | string;
    tabindex?: number | string;
    title?: string;
    translate?: "yes" | "no";
    about?: string;
    datatype?: string;
    inlist?: any;
    prefix?: string;
    property?: string;
    resource?: string;
    typeof?: string;
    vocab?: string;
    autocapitalize?: HTMLAutocapitalize;
    slot?: string;
    color?: string;
    itemprop?: string;
    itemscope?: boolean;
    itemtype?: string;
    itemid?: string;
    itemref?: string;
    part?: string;
    exportparts?: string;
    inputmode?: "none" | "text" | "tel" | "url" | "email" | "numeric" | "decimal" | "search";
    contentEditable?: boolean | "inherit";
    contextMenu?: string;
    tabIndex?: number | string;
    autoCapitalize?: HTMLAutocapitalize;
    itemProp?: string;
    itemScope?: boolean;
    itemType?: string;
    itemId?: string;
    itemRef?: string;
    exportParts?: string;
    inputMode?: "none" | "text" | "tel" | "url" | "email" | "numeric" | "decimal" | "search";
  }
  interface AnchorHTMLAttributes<T> extends HTMLAttributes<T> {
    download?: any;
    href?: string;
    hreflang?: string;
    media?: string;
    ping?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    rel?: string;
    target?: string;
    type?: string;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface AudioHTMLAttributes<T> extends MediaHTMLAttributes<T> {}
  interface AreaHTMLAttributes<T> extends HTMLAttributes<T> {
    alt?: string;
    coords?: string;
    download?: any;
    href?: string;
    hreflang?: string;
    ping?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    rel?: string;
    shape?: "rect" | "circle" | "poly" | "default";
    target?: string;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface BaseHTMLAttributes<T> extends HTMLAttributes<T> {
    href?: string;
    target?: string;
  }
  interface BlockquoteHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: string;
  }
  interface ButtonHTMLAttributes<T> extends HTMLAttributes<T> {
    autofocus?: boolean;
    disabled?: boolean;
    form?: string;
    formaction?: string;
    formenctype?: HTMLFormEncType;
    formmethod?: HTMLFormMethod;
    formnovalidate?: boolean;
    formtarget?: string;
    name?: string;
    type?: "submit" | "reset" | "button";
    value?: string;
    formAction?: string;
    formEnctype?: HTMLFormEncType;
    formMethod?: HTMLFormMethod;
    formNoValidate?: boolean;
    formTarget?: string;
  }
  interface CanvasHTMLAttributes<T> extends HTMLAttributes<T> {
    width?: number | string;
    height?: number | string;
  }
  interface ColHTMLAttributes<T> extends HTMLAttributes<T> {
    span?: number | string;
    width?: number | string;
  }
  interface ColgroupHTMLAttributes<T> extends HTMLAttributes<T> {
    span?: number | string;
  }
  interface DataHTMLAttributes<T> extends HTMLAttributes<T> {
    value?: string | string[] | number;
  }
  interface DetailsHtmlAttributes<T> extends HTMLAttributes<T> {
    open?: boolean;
    onToggle?: EventHandlerUnion<T, Event>;
    ontoggle?: EventHandlerUnion<T, Event>;
  }
  interface DialogHtmlAttributes<T> extends HTMLAttributes<T> {
    open?: boolean;
    onClose?: EventHandlerUnion<T, Event>;
    onCancel?: EventHandlerUnion<T, Event>;
  }
  interface EmbedHTMLAttributes<T> extends HTMLAttributes<T> {
    height?: number | string;
    src?: string;
    type?: string;
    width?: number | string;
  }
  interface FieldsetHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: boolean;
    form?: string;
    name?: string;
  }
  interface FormHTMLAttributes<T> extends HTMLAttributes<T> {
    acceptcharset?: string;
    action?: string;
    autocomplete?: string;
    encoding?: HTMLFormEncType;
    enctype?: HTMLFormEncType;
    method?: HTMLFormMethod;
    name?: string;
    novalidate?: boolean;
    target?: string;
    acceptCharset?: string;
    noValidate?: boolean;
  }
  interface IframeHTMLAttributes<T> extends HTMLAttributes<T> {
    allow?: string;
    allowfullscreen?: boolean;
    height?: number | string;
    name?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    sandbox?: HTMLIframeSandbox | string;
    src?: string;
    srcdoc?: string;
    width?: number | string;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface ImgHTMLAttributes<T> extends HTMLAttributes<T> {
    alt?: string;
    crossorigin?: HTMLCrossorigin;
    decoding?: "sync" | "async" | "auto";
    height?: number | string;
    ismap?: boolean;
    isMap?: boolean;
    loading?: "eager" | "lazy";
    referrerpolicy?: HTMLReferrerPolicy;
    referrerPolicy?: HTMLReferrerPolicy;
    sizes?: string;
    src?: string;
    srcset?: string;
    srcSet?: string;
    usemap?: string;
    useMap?: string;
    width?: number | string;
    crossOrigin?: HTMLCrossorigin;
  }
  interface InputHTMLAttributes<T> extends HTMLAttributes<T> {
    accept?: string;
    alt?: string;
    autocomplete?: string;
    autofocus?: boolean;
    capture?: boolean | string;
    checked?: boolean;
    crossorigin?: HTMLCrossorigin;
    disabled?: boolean;
    form?: string;
    formaction?: string;
    formenctype?: HTMLFormEncType;
    formmethod?: HTMLFormMethod;
    formnovalidate?: boolean;
    formtarget?: string;
    height?: number | string;
    list?: string;
    max?: number | string;
    maxlength?: number | string;
    min?: number | string;
    minlength?: number | string;
    multiple?: boolean;
    name?: string;
    pattern?: string;
    placeholder?: string;
    readonly?: boolean;
    required?: boolean;
    size?: number | string;
    src?: string;
    step?: number | string;
    type?: string;
    value?: string | string[] | number;
    width?: number | string;
    crossOrigin?: HTMLCrossorigin;
    formAction?: string;
    formEnctype?: HTMLFormEncType;
    formMethod?: HTMLFormMethod;
    formNoValidate?: boolean;
    formTarget?: string;
    maxLength?: number | string;
    minLength?: number | string;
    readOnly?: boolean;
  }
  interface InsHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: string;
    dateTime?: string;
  }
  interface KeygenHTMLAttributes<T> extends HTMLAttributes<T> {
    autofocus?: boolean;
    challenge?: string;
    disabled?: boolean;
    form?: string;
    keytype?: string;
    keyparams?: string;
    name?: string;
  }
  interface LabelHTMLAttributes<T> extends HTMLAttributes<T> {
    for?: string;
    form?: string;
  }
  interface LiHTMLAttributes<T> extends HTMLAttributes<T> {
    value?: number | string;
  }
  interface LinkHTMLAttributes<T> extends HTMLAttributes<T> {
    as?: HTMLLinkAs;
    crossorigin?: HTMLCrossorigin;
    disabled?: boolean;
    href?: string;
    hreflang?: string;
    integrity?: string;
    media?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    rel?: string;
    sizes?: string;
    type?: string;
    crossOrigin?: HTMLCrossorigin;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface MapHTMLAttributes<T> extends HTMLAttributes<T> {
    name?: string;
  }
  interface MediaHTMLAttributes<T> extends HTMLAttributes<T> {
    autoplay?: boolean;
    controls?: boolean;
    crossorigin?: HTMLCrossorigin;
    loop?: boolean;
    mediagroup?: string;
    muted?: boolean;
    preload?: "none" | "metadata" | "auto" | "";
    src?: string;
    crossOrigin?: HTMLCrossorigin;
    mediaGroup?: string;
  }
  interface MenuHTMLAttributes<T> extends HTMLAttributes<T> {
    label?: string;
    type?: "context" | "toolbar";
  }
  interface MetaHTMLAttributes<T> extends HTMLAttributes<T> {
    charset?: string;
    content?: string;
    httpequiv?: string;
    name?: string;
    httpEquiv?: string;
  }
  interface MeterHTMLAttributes<T> extends HTMLAttributes<T> {
    form?: string;
    high?: number | string;
    low?: number | string;
    max?: number | string;
    min?: number | string;
    optimum?: number | string;
    value?: string | string[] | number;
  }
  interface QuoteHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: string;
  }
  interface ObjectHTMLAttributes<T> extends HTMLAttributes<T> {
    data?: string;
    form?: string;
    height?: number | string;
    name?: string;
    type?: string;
    usemap?: string;
    width?: number | string;
    useMap?: string;
  }
  interface OlHTMLAttributes<T> extends HTMLAttributes<T> {
    reversed?: boolean;
    start?: number | string;
    type?: "1" | "a" | "A" | "i" | "I";
  }
  interface OptgroupHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: boolean;
    label?: string;
  }
  interface OptionHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: boolean;
    label?: string;
    selected?: boolean;
    value?: string | string[] | number;
  }
  interface OutputHTMLAttributes<T> extends HTMLAttributes<T> {
    form?: string;
    for?: string;
    name?: string;
  }
  interface ParamHTMLAttributes<T> extends HTMLAttributes<T> {
    name?: string;
    value?: string | string[] | number;
  }
  interface ProgressHTMLAttributes<T> extends HTMLAttributes<T> {
    max?: number | string;
    value?: string | string[] | number;
  }
  interface ScriptHTMLAttributes<T> extends HTMLAttributes<T> {
    async?: boolean;
    charset?: string;
    crossorigin?: HTMLCrossorigin;
    defer?: boolean;
    integrity?: string;
    nomodule?: boolean;
    nonce?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    src?: string;
    type?: string;
    crossOrigin?: HTMLCrossorigin;
    noModule?: boolean;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface SelectHTMLAttributes<T> extends HTMLAttributes<T> {
    autocomplete?: string;
    autofocus?: boolean;
    disabled?: boolean;
    form?: string;
    multiple?: boolean;
    name?: string;
    required?: boolean;
    size?: number | string;
    value?: string | string[] | number;
  }
  interface HTMLSlotElementAttributes<T = HTMLSlotElement> extends HTMLAttributes<T> {
    name?: string;
  }
  interface SourceHTMLAttributes<T> extends HTMLAttributes<T> {
    media?: string;
    sizes?: string;
    src?: string;
    srcset?: string;
    type?: string;
  }
  interface StyleHTMLAttributes<T> extends HTMLAttributes<T> {
    media?: string;
    nonce?: string;
    scoped?: boolean;
    type?: string;
  }
  interface TdHTMLAttributes<T> extends HTMLAttributes<T> {
    colspan?: number | string;
    headers?: string;
    rowspan?: number | string;
    colSpan?: number | string;
    rowSpan?: number | string;
  }
  interface TemplateHTMLAttributes<T extends HTMLTemplateElement> extends HTMLAttributes<T> {
    content?: DocumentFragment;
  }
  interface TextareaHTMLAttributes<T> extends HTMLAttributes<T> {
    autocomplete?: string;
    autofocus?: boolean;
    cols?: number | string;
    dirname?: string;
    disabled?: boolean;
    form?: string;
    maxlength?: number | string;
    minlength?: number | string;
    name?: string;
    placeholder?: string;
    readonly?: boolean;
    required?: boolean;
    rows?: number | string;
    value?: string | string[] | number;
    wrap?: "hard" | "soft" | "off";
    maxLength?: number | string;
    minLength?: number | string;
    readOnly?: boolean;
  }
  interface ThHTMLAttributes<T> extends HTMLAttributes<T> {
    colspan?: number | string;
    headers?: string;
    rowspan?: number | string;
    colSpan?: number | string;
    rowSpan?: number | string;
    scope?: 'col' | 'row' | 'rowgroup' | 'colgroup';
  }
  interface TimeHTMLAttributes<T> extends HTMLAttributes<T> {
    datetime?: string;
    dateTime?: string;
  }
  interface TrackHTMLAttributes<T> extends HTMLAttributes<T> {
    default?: boolean;
    kind?: "subtitles" | "captions" | "descriptions" | "chapters" | "metadata";
    label?: string;
    src?: string;
    srclang?: string;
  }
  interface VideoHTMLAttributes<T> extends MediaHTMLAttributes<T> {
    height?: number | string;
    playsinline?: boolean;
    poster?: string;
    width?: number | string;
  }
  type SVGPreserveAspectRatio =
    | "none"
    | "xMinYMin"
    | "xMidYMin"
    | "xMaxYMin"
    | "xMinYMid"
    | "xMidYMid"
    | "xMaxYMid"
    | "xMinYMax"
    | "xMidYMax"
    | "xMaxYMax"
    | "xMinYMin meet"
    | "xMidYMin meet"
    | "xMaxYMin meet"
    | "xMinYMid meet"
    | "xMidYMid meet"
    | "xMaxYMid meet"
    | "xMinYMax meet"
    | "xMidYMax meet"
    | "xMaxYMax meet"
    | "xMinYMin slice"
    | "xMidYMin slice"
    | "xMaxYMin slice"
    | "xMinYMid slice"
    | "xMidYMid slice"
    | "xMaxYMid slice"
    | "xMinYMax slice"
    | "xMidYMax slice"
    | "xMaxYMax slice";
  type ImagePreserveAspectRatio =
    | SVGPreserveAspectRatio
    | "defer none"
    | "defer xMinYMin"
    | "defer xMidYMin"
    | "defer xMaxYMin"
    | "defer xMinYMid"
    | "defer xMidYMid"
    | "defer xMaxYMid"
    | "defer xMinYMax"
    | "defer xMidYMax"
    | "defer xMaxYMax"
    | "defer xMinYMin meet"
    | "defer xMidYMin meet"
    | "defer xMaxYMin meet"
    | "defer xMinYMid meet"
    | "defer xMidYMid meet"
    | "defer xMaxYMid meet"
    | "defer xMinYMax meet"
    | "defer xMidYMax meet"
    | "defer xMaxYMax meet"
    | "defer xMinYMin slice"
    | "defer xMidYMin slice"
    | "defer xMaxYMin slice"
    | "defer xMinYMid slice"
    | "defer xMidYMid slice"
    | "defer xMaxYMid slice"
    | "defer xMinYMax slice"
    | "defer xMidYMax slice"
    | "defer xMaxYMax slice";
  type SVGUnits = "userSpaceOnUse" | "objectBoundingBox";
  interface CoreSVGAttributes<T> extends AriaAttributes, DOMAttributes<T> {
    id?: string;
    lang?: string;
    tabIndex?: number | string;
    tabindex?: number | string;
  }
  interface StylableSVGAttributes {
    class?: string | undefined;
    style?: CSSProperties | string;
  }
  interface TransformableSVGAttributes {
    transform?: string;
  }
  interface ConditionalProcessingSVGAttributes {
    requiredExtensions?: string;
    requiredFeatures?: string;
    systemLanguage?: string;
  }
  interface ExternalResourceSVGAttributes {
    externalResourcesRequired?: "true" | "false";
  }
  interface AnimationTimingSVGAttributes {
    begin?: string;
    dur?: string;
    end?: string;
    min?: string;
    max?: string;
    restart?: "always" | "whenNotActive" | "never";
    repeatCount?: number | "indefinite";
    repeatDur?: string;
    fill?: "freeze" | "remove";
  }
  interface AnimationValueSVGAttributes {
    calcMode?: "discrete" | "linear" | "paced" | "spline";
    values?: string;
    keyTimes?: string;
    keySplines?: string;
    from?: number | string;
    to?: number | string;
    by?: number | string;
  }
  interface AnimationAdditionSVGAttributes {
    attributeName?: string;
    additive?: "replace" | "sum";
    accumulate?: "none" | "sum";
  }
  interface AnimationAttributeTargetSVGAttributes {
    attributeName?: string;
    attributeType?: "CSS" | "XML" | "auto";
  }
  interface PresentationSVGAttributes {
    "alignment-baseline"?:
      | "auto"
      | "baseline"
      | "before-edge"
      | "text-before-edge"
      | "middle"
      | "central"
      | "after-edge"
      | "text-after-edge"
      | "ideographic"
      | "alphabetic"
      | "hanging"
      | "mathematical"
      | "inherit";
    "baseline-shift"?: number | string;
    clip?: string;
    "clip-path"?: string;
    "clip-rule"?: "nonzero" | "evenodd" | "inherit";
    color?: string;
    "color-interpolation"?: "auto" | "sRGB" | "linearRGB" | "inherit";
    "color-interpolation-filters"?: "auto" | "sRGB" | "linearRGB" | "inherit";
    "color-profile"?: string;
    "color-rendering"?: "auto" | "optimizeSpeed" | "optimizeQuality" | "inherit";
    cursor?: string;
    direction?: "ltr" | "rtl" | "inherit";
    display?: string;
    "dominant-baseline"?:
      | "auto"
      | "text-bottom"
      | "alphabetic"
      | "ideographic"
      | "middle"
      | "central"
      | "mathematical"
      | "hanging"
      | "text-top"
      | "inherit";
    "enable-background"?: string;
    fill?: string;
    "fill-opacity"?: number | string | "inherit";
    "fill-rule"?: "nonzero" | "evenodd" | "inherit";
    filter?: string;
    "flood-color"?: string;
    "flood-opacity"?: number | string | "inherit";
    "font-family"?: string;
    "font-size"?: string;
    "font-size-adjust"?: number | string;
    "font-stretch"?: string;
    "font-style"?: "normal" | "italic" | "oblique" | "inherit";
    "font-variant"?: string;
    "font-weight"?: number | string;
    "glyph-orientation-horizontal"?: string;
    "glyph-orientation-vertical"?: string;
    "image-rendering"?: "auto" | "optimizeQuality" | "optimizeSpeed" | "inherit";
    kerning?: string;
    "letter-spacing"?: number | string;
    "lighting-color"?: string;
    "marker-end"?: string;
    "marker-mid"?: string;
    "marker-start"?: string;
    mask?: string;
    opacity?: number | string | "inherit";
    overflow?: "visible" | "hidden" | "scroll" | "auto" | "inherit";
    "pointer-events"?:
      | "bounding-box"
      | "visiblePainted"
      | "visibleFill"
      | "visibleStroke"
      | "visible"
      | "painted"
      | "color"
      | "fill"
      | "stroke"
      | "all"
      | "none"
      | "inherit";
    "shape-rendering"?: "auto" | "optimizeSpeed" | "crispEdges" | "geometricPrecision" | "inherit";
    "stop-color"?: string;
    "stop-opacity"?: number | string | "inherit";
    stroke?: string;
    "stroke-dasharray"?: string;
    "stroke-dashoffset"?: number | string;
    "stroke-linecap"?: "butt" | "round" | "square" | "inherit";
    "stroke-linejoin"?: "arcs" | "bevel" | "miter" | "miter-clip" | "round" | "inherit";
    "stroke-miterlimit"?: number | string | "inherit";
    "stroke-opacity"?: number | string | "inherit";
    "stroke-width"?: number | string;
    "text-anchor"?: "start" | "middle" | "end" | "inherit";
    "text-decoration"?: "none" | "underline" | "overline" | "line-through" | "blink" | "inherit";
    "text-rendering"?:
      | "auto"
      | "optimizeSpeed"
      | "optimizeLegibility"
      | "geometricPrecision"
      | "inherit";
    "unicode-bidi"?: string;
    visibility?: "visible" | "hidden" | "collapse" | "inherit";
    "word-spacing"?: number | string;
    "writing-mode"?: "lr-tb" | "rl-tb" | "tb-rl" | "lr" | "rl" | "tb" | "inherit";
  }
  interface AnimationElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      ConditionalProcessingSVGAttributes {}
  interface ContainerElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "clip-path"
        | "mask"
        | "cursor"
        | "opacity"
        | "filter"
        | "enable-background"
        | "color-interpolation"
        | "color-rendering"
      > {}
  interface FilterPrimitiveElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<PresentationSVGAttributes, "color-interpolation-filters"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    result?: string;
  }
  interface SingleInputFilterSVGAttributes {
    in?: string;
  }
  interface DoubleInputFilterSVGAttributes {
    in?: string;
    in2?: string;
  }
  interface FitToViewBoxSVGAttributes {
    viewBox?: string;
    preserveAspectRatio?: SVGPreserveAspectRatio;
  }
  interface GradientElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    gradientUnits?: SVGUnits;
    gradientTransform?: string;
    spreadMethod?: "pad" | "reflect" | "repeat";
  }
  interface GraphicsElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "clip-rule"
        | "mask"
        | "pointer-events"
        | "cursor"
        | "opacity"
        | "filter"
        | "display"
        | "visibility"
        | "color-interpolation"
        | "color-rendering"
      > {}
  interface LightSourceElementSVGAttributes<T> extends CoreSVGAttributes<T> {}
  interface NewViewportSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    viewBox?: string;
  }
  interface ShapeElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "color"
        | "fill"
        | "fill-rule"
        | "fill-opacity"
        | "stroke"
        | "stroke-width"
        | "stroke-linecap"
        | "stroke-linejoin"
        | "stroke-miterlimit"
        | "stroke-dasharray"
        | "stroke-dashoffset"
        | "stroke-opacity"
        | "shape-rendering"
      > {}
  interface TextContentElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "font-family"
        | "font-style"
        | "font-variant"
        | "font-weight"
        | "font-stretch"
        | "font-size"
        | "font-size-adjust"
        | "kerning"
        | "letter-spacing"
        | "word-spacing"
        | "text-decoration"
        | "glyph-orientation-horizontal"
        | "glyph-orientation-vertical"
        | "direction"
        | "unicode-bidi"
        | "text-anchor"
        | "dominant-baseline"
        | "color"
        | "fill"
        | "fill-rule"
        | "fill-opacity"
        | "stroke"
        | "stroke-width"
        | "stroke-linecap"
        | "stroke-linejoin"
        | "stroke-miterlimit"
        | "stroke-dasharray"
        | "stroke-dashoffset"
        | "stroke-opacity"
      > {}
  interface ZoomAndPanSVGAttributes {
    zoomAndPan?: "disable" | "magnify";
  }
  interface AnimateSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationAttributeTargetSVGAttributes,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes,
      Pick<PresentationSVGAttributes, "color-interpolation" | "color-rendering"> {}
  interface AnimateMotionSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes {
    path?: string;
    keyPoints?: string;
    rotate?: number | string | "auto" | "auto-reverse";
    origin?: "default";
  }
  interface AnimateTransformSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationAttributeTargetSVGAttributes,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes {
    type?: "translate" | "scale" | "rotate" | "skewX" | "skewY";
  }
  interface CircleSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    cx?: number | string;
    cy?: number | string;
    r?: number | string;
  }
  interface ClipPathSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "clip-path"> {
    clipPathUnits?: SVGUnits;
  }
  interface DefsSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {}
  interface DescSVGAttributes<T> extends CoreSVGAttributes<T>, StylableSVGAttributes {}
  interface EllipseSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    cx?: number | string;
    cy?: number | string;
    rx?: number | string;
    ry?: number | string;
  }
  interface FeBlendSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    mode?: "normal" | "multiply" | "screen" | "darken" | "lighten";
  }
  interface FeColorMatrixSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    type?: "matrix" | "saturate" | "hueRotate" | "luminanceToAlpha";
    values?: string;
  }
  interface FeComponentTransferSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {}
  interface FeCompositeSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    operator?: "over" | "in" | "out" | "atop" | "xor" | "arithmetic";
    k1?: number | string;
    k2?: number | string;
    k3?: number | string;
    k4?: number | string;
  }
  interface FeConvolveMatrixSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    order?: number | string;
    kernelMatrix?: string;
    divisor?: number | string;
    bias?: number | string;
    targetX?: number | string;
    targetY?: number | string;
    edgeMode?: "duplicate" | "wrap" | "none";
    kernelUnitLength?: number | string;
    preserveAlpha?: "true" | "false";
  }
  interface FeDiffuseLightingSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "lighting-color"> {
    surfaceScale?: number | string;
    diffuseConstant?: number | string;
    kernelUnitLength?: number | string;
  }
  interface FeDisplacementMapSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    scale?: number | string;
    xChannelSelector?: "R" | "G" | "B" | "A";
    yChannelSelector?: "R" | "G" | "B" | "A";
  }
  interface FeDistantLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    azimuth?: number | string;
    elevation?: number | string;
  }
  interface FeFloodSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "flood-color" | "flood-opacity"> {}
  interface FeFuncSVGAttributes<T> extends CoreSVGAttributes<T> {
    type?: "identity" | "table" | "discrete" | "linear" | "gamma";
    tableValues?: string;
    slope?: number | string;
    intercept?: number | string;
    amplitude?: number | string;
    exponent?: number | string;
    offset?: number | string;
  }
  interface FeGaussianBlurSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    stdDeviation?: number | string;
  }
  interface FeImageSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    preserveAspectRatio?: SVGPreserveAspectRatio;
    href?: string;
  }
  interface FeMergeSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes {}
  interface FeMergeNodeSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      SingleInputFilterSVGAttributes {}
  interface FeMorphologySVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    operator?: "erode" | "dilate";
    radius?: number | string;
  }
  interface FeOffsetSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    dx?: number | string;
    dy?: number | string;
  }
  interface FePointLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    x?: number | string;
    y?: number | string;
    z?: number | string;
  }
  interface FeSpecularLightingSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "lighting-color"> {
    surfaceScale?: string;
    specularConstant?: string;
    specularExponent?: string;
    kernelUnitLength?: number | string;
  }
  interface FeSpotLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    x?: number | string;
    y?: number | string;
    z?: number | string;
    pointsAtX?: number | string;
    pointsAtY?: number | string;
    pointsAtZ?: number | string;
    specularExponent?: number | string;
    limitingConeAngle?: number | string;
  }
  interface FeTileSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {}
  interface FeTurbulanceSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes {
    baseFrequency?: number | string;
    numOctaves?: number | string;
    seed?: number | string;
    stitchTiles?: "stitch" | "noStitch";
    type?: "fractalNoise" | "turbulence";
  }
  interface FilterSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    filterUnits?: SVGUnits;
    primitiveUnits?: SVGUnits;
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    filterRes?: number | string;
  }
  interface ForeignObjectSVGAttributes<T>
    extends NewViewportSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
  }
  interface GSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {}
  interface ImageSVGAttributes<T>
    extends NewViewportSVGAttributes<T>,
      GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "color-profile" | "image-rendering"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    preserveAspectRatio?: ImagePreserveAspectRatio;
    href?: string;
  }
  interface LineSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    x1?: number | string;
    y1?: number | string;
    x2?: number | string;
    y2?: number | string;
  }
  interface LinearGradientSVGAttributes<T> extends GradientElementSVGAttributes<T> {
    x1?: number | string;
    x2?: number | string;
    y1?: number | string;
    y2?: number | string;
  }
  interface MarkerSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    markerUnits?: "strokeWidth" | "userSpaceOnUse";
    refX?: number | string;
    refY?: number | string;
    markerWidth?: number | string;
    markerHeight?: number | string;
    orient?: string;
  }
  interface MaskSVGAttributes<T>
    extends Omit<ContainerElementSVGAttributes<T>, "opacity" | "filter">,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    maskUnits?: SVGUnits;
    maskContentUnits?: SVGUnits;
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
  }
  interface MetadataSVGAttributes<T> extends CoreSVGAttributes<T> {}
  interface PathSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    d?: string;
    pathLength?: number | string;
  }
  interface PatternSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    patternUnits?: SVGUnits;
    patternContentUnits?: SVGUnits;
    patternTransform?: string;
  }
  interface PolygonSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    points?: string;
  }
  interface PolylineSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    points?: string;
  }
  interface RadialGradientSVGAttributes<T> extends GradientElementSVGAttributes<T> {
    cx?: number | string;
    cy?: number | string;
    r?: number | string;
    fx?: number | string;
    fy?: number | string;
  }
  interface RectSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    rx?: number | string;
    ry?: number | string;
  }
  interface StopSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "stop-color" | "stop-opacity"> {
    offset?: number | string;
  }
  interface SvgSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      NewViewportSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      ZoomAndPanSVGAttributes,
      PresentationSVGAttributes {
    version?: string;
    baseProfile?: string;
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    contentScriptType?: string;
    contentStyleType?: string;
    xmlns?: string;
  }
  interface SwitchSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {}
  interface SymbolSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      NewViewportSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes {}
  interface TextSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "writing-mode" | "text-rendering"> {
    x?: number | string;
    y?: number | string;
    dx?: number | string;
    dy?: number | string;
    rotate?: number | string;
    textLength?: number | string;
    lengthAdjust?: "spacing" | "spacingAndGlyphs";
  }
  interface TextPathSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      Pick<
        PresentationSVGAttributes,
        "alignment-baseline" | "baseline-shift" | "display" | "visibility"
      > {
    startOffset?: number | string;
    method?: "align" | "stretch";
    spacing?: "auto" | "exact";
    href?: string;
  }
  interface TSpanSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      Pick<
        PresentationSVGAttributes,
        "alignment-baseline" | "baseline-shift" | "display" | "visibility"
      > {
    x?: number | string;
    y?: number | string;
    dx?: number | string;
    dy?: number | string;
    rotate?: number | string;
    textLength?: number | string;
    lengthAdjust?: "spacing" | "spacingAndGlyphs";
  }
  interface UseSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    href?: string;
  }
  interface ViewSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      FitToViewBoxSVGAttributes,
      ZoomAndPanSVGAttributes {
    viewTarget?: string;
  }
  /**
   * @type {HTMLElementTagNameMap}
   */
  interface HTMLElementTags {
    a: AnchorHTMLAttributes<HTMLAnchorElement>;
    abbr: HTMLAttributes<HTMLElement>;
    address: HTMLAttributes<HTMLElement>;
    area: AreaHTMLAttributes<HTMLAreaElement>;
    article: HTMLAttributes<HTMLElement>;
    aside: HTMLAttributes<HTMLElement>;
    audio: AudioHTMLAttributes<HTMLAudioElement>;
    b: HTMLAttributes<HTMLElement>;
    base: BaseHTMLAttributes<HTMLBaseElement>;
    bdi: HTMLAttributes<HTMLElement>;
    bdo: HTMLAttributes<HTMLElement>;
    blockquote: BlockquoteHTMLAttributes<HTMLElement>;
    body: HTMLAttributes<HTMLBodyElement>;
    br: HTMLAttributes<HTMLBRElement>;
    button: ButtonHTMLAttributes<HTMLButtonElement>;
    canvas: CanvasHTMLAttributes<HTMLCanvasElement>;
    caption: HTMLAttributes<HTMLElement>;
    cite: HTMLAttributes<HTMLElement>;
    code: HTMLAttributes<HTMLElement>;
    col: ColHTMLAttributes<HTMLTableColElement>;
    colgroup: ColgroupHTMLAttributes<HTMLTableColElement>;
    data: DataHTMLAttributes<HTMLElement>;
    datalist: HTMLAttributes<HTMLDataListElement>;
    dd: HTMLAttributes<HTMLElement>;
    del: HTMLAttributes<HTMLElement>;
    details: DetailsHtmlAttributes<HTMLDetailsElement>;
    dfn: HTMLAttributes<HTMLElement>;
    dialog: DialogHtmlAttributes<HTMLDialogElement>;
    div: HTMLAttributes<HTMLDivElement>;
    dl: HTMLAttributes<HTMLDListElement>;
    dt: HTMLAttributes<HTMLElement>;
    em: HTMLAttributes<HTMLElement>;
    embed: EmbedHTMLAttributes<HTMLEmbedElement>;
    fieldset: FieldsetHTMLAttributes<HTMLFieldSetElement>;
    figcaption: HTMLAttributes<HTMLElement>;
    figure: HTMLAttributes<HTMLElement>;
    footer: HTMLAttributes<HTMLElement>;
    form: FormHTMLAttributes<HTMLFormElement>;
    h1: HTMLAttributes<HTMLHeadingElement>;
    h2: HTMLAttributes<HTMLHeadingElement>;
    h3: HTMLAttributes<HTMLHeadingElement>;
    h4: HTMLAttributes<HTMLHeadingElement>;
    h5: HTMLAttributes<HTMLHeadingElement>;
    h6: HTMLAttributes<HTMLHeadingElement>;
    head: HTMLAttributes<HTMLHeadElement>;
    header: HTMLAttributes<HTMLElement>;
    hgroup: HTMLAttributes<HTMLElement>;
    hr: HTMLAttributes<HTMLHRElement>;
    html: HTMLAttributes<HTMLHtmlElement>;
    i: HTMLAttributes<HTMLElement>;
    iframe: IframeHTMLAttributes<HTMLIFrameElement>;
    img: ImgHTMLAttributes<HTMLImageElement>;
    input: InputHTMLAttributes<HTMLInputElement>;
    ins: InsHTMLAttributes<HTMLModElement>;
    kbd: HTMLAttributes<HTMLElement>;
    label: LabelHTMLAttributes<HTMLLabelElement>;
    legend: HTMLAttributes<HTMLLegendElement>;
    li: LiHTMLAttributes<HTMLLIElement>;
    link: LinkHTMLAttributes<HTMLLinkElement>;
    main: HTMLAttributes<HTMLElement>;
    map: MapHTMLAttributes<HTMLMapElement>;
    mark: HTMLAttributes<HTMLElement>;
    menu: MenuHTMLAttributes<HTMLElement>;
    meta: MetaHTMLAttributes<HTMLMetaElement>;
    meter: MeterHTMLAttributes<HTMLElement>;
    nav: HTMLAttributes<HTMLElement>;
    noscript: HTMLAttributes<HTMLElement>;
    object: ObjectHTMLAttributes<HTMLObjectElement>;
    ol: OlHTMLAttributes<HTMLOListElement>;
    optgroup: OptgroupHTMLAttributes<HTMLOptGroupElement>;
    option: OptionHTMLAttributes<HTMLOptionElement>;
    output: OutputHTMLAttributes<HTMLElement>;
    p: HTMLAttributes<HTMLParagraphElement>;
    picture: HTMLAttributes<HTMLElement>;
    pre: HTMLAttributes<HTMLPreElement>;
    progress: ProgressHTMLAttributes<HTMLProgressElement>;
    q: QuoteHTMLAttributes<HTMLQuoteElement>;
    rp: HTMLAttributes<HTMLElement>;
    rt: HTMLAttributes<HTMLElement>;
    ruby: HTMLAttributes<HTMLElement>;
    s: HTMLAttributes<HTMLElement>;
    samp: HTMLAttributes<HTMLElement>;
    script: ScriptHTMLAttributes<HTMLElement>;
    section: HTMLAttributes<HTMLElement>;
    select: SelectHTMLAttributes<HTMLSelectElement>;
    slot: HTMLSlotElementAttributes;
    small: HTMLAttributes<HTMLElement>;
    source: SourceHTMLAttributes<HTMLSourceElement>;
    span: HTMLAttributes<HTMLSpanElement>;
    strong: HTMLAttributes<HTMLElement>;
    style: StyleHTMLAttributes<HTMLStyleElement>;
    sub: HTMLAttributes<HTMLElement>;
    summary: HTMLAttributes<HTMLElement>;
    sup: HTMLAttributes<HTMLElement>;
    table: HTMLAttributes<HTMLTableElement>;
    tbody: HTMLAttributes<HTMLTableSectionElement>;
    td: TdHTMLAttributes<HTMLTableCellElement>;
    template: TemplateHTMLAttributes<HTMLTemplateElement>;
    textarea: TextareaHTMLAttributes<HTMLTextAreaElement>;
    tfoot: HTMLAttributes<HTMLTableSectionElement>;
    th: ThHTMLAttributes<HTMLTableCellElement>;
    thead: HTMLAttributes<HTMLTableSectionElement>;
    time: TimeHTMLAttributes<HTMLElement>;
    title: HTMLAttributes<HTMLTitleElement>;
    tr: HTMLAttributes<HTMLTableRowElement>;
    track: TrackHTMLAttributes<HTMLTrackElement>;
    u: HTMLAttributes<HTMLElement>;
    ul: HTMLAttributes<HTMLUListElement>;
    var: HTMLAttributes<HTMLElement>;
    video: VideoHTMLAttributes<HTMLVideoElement>;
    wbr: HTMLAttributes<HTMLElement>;
  }
  /**
   * @type {HTMLElementDeprecatedTagNameMap}
   */
  interface HTMLElementDeprecatedTags {
    big: HTMLAttributes<HTMLElement>;
    keygen: KeygenHTMLAttributes<HTMLElement>;
    menuitem: HTMLAttributes<HTMLElement>;
    noindex: HTMLAttributes<HTMLElement>;
    param: ParamHTMLAttributes<HTMLParamElement>;
  }
  /**
   * @type {SVGElementTagNameMap}
   */
  interface SVGElementTags {
    animate: AnimateSVGAttributes<SVGAnimateElement>;
    animateMotion: AnimateMotionSVGAttributes<SVGAnimateMotionElement>;
    animateTransform: AnimateTransformSVGAttributes<SVGAnimateTransformElement>;
    circle: CircleSVGAttributes<SVGCircleElement>;
    clipPath: ClipPathSVGAttributes<SVGClipPathElement>;
    defs: DefsSVGAttributes<SVGDefsElement>;
    desc: DescSVGAttributes<SVGDescElement>;
    ellipse: EllipseSVGAttributes<SVGEllipseElement>;
    feBlend: FeBlendSVGAttributes<SVGFEBlendElement>;
    feColorMatrix: FeColorMatrixSVGAttributes<SVGFEColorMatrixElement>;
    feComponentTransfer: FeComponentTransferSVGAttributes<SVGFEComponentTransferElement>;
    feComposite: FeCompositeSVGAttributes<SVGFECompositeElement>;
    feConvolveMatrix: FeConvolveMatrixSVGAttributes<SVGFEConvolveMatrixElement>;
    feDiffuseLighting: FeDiffuseLightingSVGAttributes<SVGFEDiffuseLightingElement>;
    feDisplacementMap: FeDisplacementMapSVGAttributes<SVGFEDisplacementMapElement>;
    feDistantLight: FeDistantLightSVGAttributes<SVGFEDistantLightElement>;
    feDropShadow: Partial<SVGFEDropShadowElement>;
    feFlood: FeFloodSVGAttributes<SVGFEFloodElement>;
    feFuncA: FeFuncSVGAttributes<SVGFEFuncAElement>;
    feFuncB: FeFuncSVGAttributes<SVGFEFuncBElement>;
    feFuncG: FeFuncSVGAttributes<SVGFEFuncGElement>;
    feFuncR: FeFuncSVGAttributes<SVGFEFuncRElement>;
    feGaussianBlur: FeGaussianBlurSVGAttributes<SVGFEGaussianBlurElement>;
    feImage: FeImageSVGAttributes<SVGFEImageElement>;
    feMerge: FeMergeSVGAttributes<SVGFEMergeElement>;
    feMergeNode: FeMergeNodeSVGAttributes<SVGFEMergeNodeElement>;
    feMorphology: FeMorphologySVGAttributes<SVGFEMorphologyElement>;
    feOffset: FeOffsetSVGAttributes<SVGFEOffsetElement>;
    fePointLight: FePointLightSVGAttributes<SVGFEPointLightElement>;
    feSpecularLighting: FeSpecularLightingSVGAttributes<SVGFESpecularLightingElement>;
    feSpotLight: FeSpotLightSVGAttributes<SVGFESpotLightElement>;
    feTile: FeTileSVGAttributes<SVGFETileElement>;
    feTurbulence: FeTurbulanceSVGAttributes<SVGFETurbulenceElement>;
    filter: FilterSVGAttributes<SVGFilterElement>;
    foreignObject: ForeignObjectSVGAttributes<SVGForeignObjectElement>;
    g: GSVGAttributes<SVGGElement>;
    image: ImageSVGAttributes<SVGImageElement>;
    line: LineSVGAttributes<SVGLineElement>;
    linearGradient: LinearGradientSVGAttributes<SVGLinearGradientElement>;
    marker: MarkerSVGAttributes<SVGMarkerElement>;
    mask: MaskSVGAttributes<SVGMaskElement>;
    metadata: MetadataSVGAttributes<SVGMetadataElement>;
    mpath: Partial<SVGMPathElement>;
    path: PathSVGAttributes<SVGPathElement>;
    pattern: PatternSVGAttributes<SVGPatternElement>;
    polygon: PolygonSVGAttributes<SVGPolygonElement>;
    polyline: PolylineSVGAttributes<SVGPolylineElement>;
    radialGradient: RadialGradientSVGAttributes<SVGRadialGradientElement>;
    rect: RectSVGAttributes<SVGRectElement>;
    set: Partial<SVGSetElement>;
    stop: StopSVGAttributes<SVGStopElement>;
    svg: SvgSVGAttributes<SVGSVGElement>;
    switch: SwitchSVGAttributes<SVGSwitchElement>;
    symbol: SymbolSVGAttributes<SVGSymbolElement>;
    text: TextSVGAttributes<SVGTextElement>;
    textPath: TextPathSVGAttributes<SVGTextPathElement>;
    tspan: TSpanSVGAttributes<SVGTSpanElement>;
    use: UseSVGAttributes<SVGUseElement>;
    view: ViewSVGAttributes<SVGViewElement>;
  }
  interface IntrinsicElements extends HTMLElementTags, HTMLElementDeprecatedTags, SVGElementTags {}
}
`,"universal/package.json":`{
  "name": "solid-js/universal",
  "main": "./dist/universal.cjs",
  "module": "./dist/universal.js",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false,
  "exports": {
    ".": {
      "development": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/dev.js"
        },
        "require": "./dist/dev.cjs"
      },
      "import": {
        "types": "./types/index.d.ts",
        "default": "./dist/universal.js"
      },
      "require": "./dist/universal.cjs"
    }
  }
}
`,"web/package.json":`{
  "name": "solid-js/web",
  "main": "./dist/server.cjs",
  "module": "./dist/server.js",
  "browser": {
    "./dist/server.cjs": "./dist/web.cjs",
    "./dist/server.js": "./dist/web.js"
  },
  "unpkg": "./dist/web.cjs",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false,
  "exports": {
    ".": {
      "worker": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "browser": {
        "development": {
          "import": {
            "types": "./types/index.d.ts",
            "default": "./dist/dev.js"
          },
          "require": "./dist/dev.cjs"
        },
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/web.js"
        },
        "require": "./dist/web.cjs"
      },
      "deno": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "node": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "development": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/dev.js"
        },
        "require": "./dist/dev.cjs"
      },
      "import": {
        "types": "./types/index.d.ts",
        "default": "./dist/web.js"
      },
      "require": "./dist/web.cjs"
    }
  }
}
`,"h/jsx-dev-runtime/package.json":`{
  "name": "solid-js/h/jsx-dev-runtime",
  "main": "../jsx-runtime/dist/jsx.cjs",
  "module": "../jsx-runtime/dist/jsx.js",
  "types": "../jsx-runtime/types/index.d.ts",
  "type": "module",
  "sideEffects": false
}
`,"h/jsx-runtime/package.json":`{
  "name": "solid-js/h/jsx-runtime",
  "main": "./dist/jsx.cjs",
  "module": "./dist/jsx.js",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false
}
`,"h/types/hyperscript.d.ts":`declare type MountableElement = Element | Document | ShadowRoot | DocumentFragment | Node;
interface Runtime {
    insert(parent: MountableElement, accessor: any, marker?: Node | null, init?: any): any;
    spread(node: Element, accessor: any, isSVG?: Boolean, skipChildren?: Boolean): void;
    assign(node: Element, props: any, isSVG?: Boolean, skipChildren?: Boolean): void;
    createComponent(Comp: (props: any) => any, props: any): any;
    dynamicProperty(props: any, key: string): any;
    SVGElements: Set<string>;
}
declare type ExpandableNode = Node & {
    [key: string]: any;
};
export declare type HyperScript = {
    (...args: any[]): () => ExpandableNode | ExpandableNode[];
    Fragment: (props: {
        children: (() => ExpandableNode) | (() => ExpandableNode)[];
    }) => ExpandableNode[];
};
export declare function createHyperScript(r: Runtime): HyperScript;
export {};
`,"h/types/index.d.ts":`declare const _default: import("hyper-dom-expressions").HyperScript;
export default _default;
`,"html/types/index.d.ts":`declare const _default: import("lit-dom-expressions").HTMLTag;
export default _default;
`,"html/types/lit.d.ts":`declare type MountableElement = Element | Document | ShadowRoot | DocumentFragment | Node;
interface Runtime {
    effect<T>(fn: (prev?: T) => T, init?: T): any;
    untrack<T>(fn: () => T): T;
    insert(parent: MountableElement, accessor: any, marker?: Node | null, init?: any): any;
    spread<T>(node: Element, accessor: (() => T) | T, isSVG?: Boolean, skipChildren?: Boolean): void;
    createComponent(Comp: (props: any) => any, props: any): any;
    addEventListener(node: Element, name: string, handler: () => void, delegate: boolean): void;
    delegateEvents(eventNames: string[]): void;
    classList(node: Element, value: {
        [k: string]: boolean;
    }, prev?: {
        [k: string]: boolean;
    }): void;
    style(node: Element, value: {
        [k: string]: string;
    }, prev?: {
        [k: string]: string;
    }): void;
    mergeProps(...sources: unknown[]): unknown;
    dynamicProperty(props: any, key: string): any;
    setAttribute(node: Element, name: string, value: any): void;
    setAttributeNS(node: Element, namespace: string, name: string, value: any): void;
    Aliases: Record<string, string>;
    PropAliases: Record<string, string>;
    Properties: Set<string>;
    ChildProperties: Set<string>;
    DelegatedEvents: Set<string>;
    SVGElements: Set<string>;
    SVGNamespace: Record<string, string>;
}
export declare type HTMLTag = {
    (statics: TemplateStringsArray, ...args: unknown[]): Node | Node[];
};
export declare function createHTML(r: Runtime, { delegateEvents }?: {
    delegateEvents?: boolean | undefined;
}): HTMLTag;
export {};
`,"store/types/index.d.ts":`export { createStore, unwrap, $RAW } from "./store.js";
export type { Store, SetStoreFunction, NotWrappable, SolidStore, StoreNode, StoreSetter, StorePathRange, ArrayFilterFn, Part, DeepReadonly, DeepMutable } from "./store.js";
export * from "./mutable.js";
export * from "./modifiers.js";
import { $NAME, $NODE, isWrappable } from "./store.js";
export declare const DEV: {
    readonly $NAME: typeof $NAME;
    readonly $NODE: typeof $NODE;
    readonly isWrappable: typeof isWrappable;
} | undefined;
`,"store/types/modifiers.d.ts":`export declare type ReconcileOptions = {
    key?: string | null;
    merge?: boolean;
};
export declare function reconcile<T extends U, U>(value: T, options?: ReconcileOptions): (state: U) => T;
export declare function produce<T>(fn: (state: T) => void): (state: T) => T;
`,"store/types/mutable.d.ts":`import { StoreNode } from "./store.js";
export declare function createMutable<T extends StoreNode>(state: T, options?: {
    name?: string;
}): T;
export declare function modifyMutable<T>(state: T, modifier: (state: T) => T): void;
`,"store/types/server.d.ts":`import type { SetStoreFunction, Store } from "./store.js";
export declare const $RAW: unique symbol;
export declare function isWrappable(obj: any): boolean;
export declare function unwrap<T>(item: T): T;
export declare function setProperty(state: any, property: PropertyKey, value: any, force?: boolean): void;
export declare function updatePath(current: any, path: any[], traversed?: PropertyKey[]): void;
export declare function createStore<T>(state: T | Store<T>): [Store<T>, SetStoreFunction<T>];
export declare function createMutable<T>(state: T | Store<T>): T;
declare type ReconcileOptions = {
    key?: string | null;
    merge?: boolean;
};
export declare function reconcile<T extends U, U>(value: T, options?: ReconcileOptions): (state: U) => T;
export declare function produce<T>(fn: (state: T) => void): (state: T) => T;
export declare const DEV: undefined;
export {};
`,"store/types/store.d.ts":`export declare const $RAW: unique symbol, $NODE: unique symbol, $NAME: unique symbol;
declare global {
    var _$onStoreNodeUpdate: OnStoreNodeUpdate | undefined;
}
declare type DataNode = {
    (): any;
    $(value?: any): void;
};
declare type DataNodes = Record<PropertyKey, DataNode>;
export declare type OnStoreNodeUpdate = (state: StoreNode, property: PropertyKey, value: StoreNode | NotWrappable, prev: StoreNode | NotWrappable) => void;
export interface StoreNode {
    [$NAME]?: string;
    [$NODE]?: DataNodes;
    [key: PropertyKey]: any;
}
export declare namespace SolidStore {
    interface Unwrappable {
    }
}
export declare type NotWrappable = string | number | bigint | symbol | boolean | Function | null | undefined | SolidStore.Unwrappable[keyof SolidStore.Unwrappable];
export declare type Store<T> = T;
export declare function isWrappable<T>(obj: T | NotWrappable): obj is T;
/**
 * Returns the underlying data in the store without a proxy.
 * @param item store proxy object
 * @example
 * \`\`\`js
 * const initial = {z...};
 * const [state, setState] = createStore(initial);
 * initial === state; // => false
 * initial === unwrap(state); // => true
 * \`\`\`
 */
export declare function unwrap<T>(item: T, set?: Set<unknown>): T;
export declare function getDataNodes(target: StoreNode): DataNodes;
export declare function getDataNode(nodes: DataNodes, property: PropertyKey, value: any): DataNode;
export declare function proxyDescriptor(target: StoreNode, property: PropertyKey): PropertyDescriptor | undefined;
export declare function trackSelf(target: StoreNode): void;
export declare function ownKeys(target: StoreNode): (string | symbol)[];
export declare function setProperty(state: StoreNode, property: PropertyKey, value: any, deleting?: boolean): void;
export declare function updatePath(current: StoreNode, path: any[], traversed?: PropertyKey[]): void;
/** @deprecated */
export declare type DeepReadonly<T> = 0 extends 1 & T ? T : T extends NotWrappable ? T : {
    readonly [K in keyof T]: DeepReadonly<T[K]>;
};
/** @deprecated */
export declare type DeepMutable<T> = 0 extends 1 & T ? T : T extends NotWrappable ? T : {
    -readonly [K in keyof T]: DeepMutable<T[K]>;
};
export declare type CustomPartial<T> = T extends readonly unknown[] ? "0" extends keyof T ? {
    [K in Extract<keyof T, \`\${number}\`>]?: T[K];
} : {
    [x: number]: T[number];
} : Partial<T>;
export declare type PickMutable<T> = {
    [K in keyof T as (<U>() => U extends {
        [V in K]: T[V];
    } ? 1 : 2) extends <U>() => U extends {
        -readonly [V in K]: T[V];
    } ? 1 : 2 ? K : never]: T[K];
};
export declare type StorePathRange = {
    from?: number;
    to?: number;
    by?: number;
};
export declare type ArrayFilterFn<T> = (item: T, index: number) => boolean;
export declare type StoreSetter<T, U extends PropertyKey[] = []> = T | CustomPartial<T> | ((prevState: T, traversed: U) => T | CustomPartial<T>);
export declare type Part<T, K extends KeyOf<T> = KeyOf<T>> = K | ([K] extends [never] ? never : readonly K[]) | ([T] extends [readonly unknown[]] ? ArrayFilterFn<T[number]> | StorePathRange : never);
declare type W<T> = Exclude<T, NotWrappable>;
declare type KeyOf<T> = number extends keyof T ? 0 extends 1 & T ? keyof T : [T] extends [readonly unknown[]] ? number : [T] extends [never] ? never : keyof T : keyof T;
declare type MutableKeyOf<T> = KeyOf<T> & keyof PickMutable<T>;
declare type Rest<T, U extends PropertyKey[], K extends KeyOf<T> = KeyOf<T>> = K extends keyof PickMutable<T> ? [Part<T, K>, ...RestSetterOrContinue<T[K], [K, ...U]>] : K extends KeyOf<K> ? [Part<T, K>, ...RestContinue<T[K], [K, ...U]>] : never;
declare type RestContinue<T, U extends PropertyKey[]> = 0 extends 1 & T ? [...Part<any>[], StoreSetter<any, PropertyKey[]>] : Rest<T, U>;
declare type RestSetterOrContinue<T, U extends PropertyKey[]> = [StoreSetter<T, U>] | RestContinue<T, U>;
export interface SetStoreFunction<T> {
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends KeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>, K6 extends KeyOf<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>>, K7 extends MutableKeyOf<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, k6: Part<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>, K6>, k7: Part<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>, K7>, setter: StoreSetter<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>[K7], [
        K7,
        K6,
        K5,
        K4,
        K3,
        K2,
        K1
    ]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends KeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>, K6 extends KeyOf<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, k6: Part<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>, K6>, setter: StoreSetter<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6], [K6, K5, K4, K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends MutableKeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, setter: StoreSetter<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5], [K5, K4, K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends MutableKeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, setter: StoreSetter<W<W<W<W<T>[K1]>[K2]>[K3]>[K4], [K4, K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends MutableKeyOf<W<W<W<T>[K1]>[K2]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, setter: StoreSetter<W<W<W<T>[K1]>[K2]>[K3], [K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends MutableKeyOf<W<W<T>[K1]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, setter: StoreSetter<W<W<T>[K1]>[K2], [K2, K1]>): void;
    <K1 extends MutableKeyOf<W<T>>>(k1: Part<W<T>, K1>, setter: StoreSetter<W<T>[K1], [K1]>): void;
    (setter: StoreSetter<T, []>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends KeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>, K6 extends KeyOf<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>>, K7 extends KeyOf<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, k6: Part<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>, K6>, k7: Part<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>, K7>, ...rest: Rest<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>[K7], [K7, K6, K5, K4, K3, K2, K1]>): void;
}
/**
 * creates a reactive store that can be read through a proxy object and written with a setter function
 *
 * @description https://www.solidjs.com/docs/latest/api#createstore
 */
export declare function createStore<T extends object = {}>(...[store, options]: {} extends T ? [store?: T | Store<T>, options?: {
    name?: string;
}] : [store: T | Store<T>, options?: {
    name?: string;
}]): [get: Store<T>, set: SetStoreFunction<T>];
export {};
`,"types/reactive/array.d.ts":`import { Accessor } from "./signal.js";
/**
 * reactively transforms an array with a callback function - underlying helper for the \`<For>\` control flow
 *
 * similar to \`Array.prototype.map\`, but gets the index as accessor, transforms only values that changed and returns an accessor and reactively tracks changes to the list.
 *
 * @description https://www.solidjs.com/docs/latest/api#maparray
 */
export declare function mapArray<T, U>(list: Accessor<readonly T[] | undefined | null | false>, mapFn: (v: T, i: Accessor<number>) => U, options?: {
    fallback?: Accessor<any>;
}): () => U[];
/**
 * reactively maps arrays by index instead of value - underlying helper for the \`<Index>\` control flow
 *
 * similar to \`Array.prototype.map\`, but gets the value as an accessor, transforms only changed items of the original arrays anew and returns an accessor.
 *
 * @description https://www.solidjs.com/docs/latest/api#indexarray
 */
export declare function indexArray<T, U>(list: Accessor<readonly T[] | undefined | null | false>, mapFn: (v: Accessor<T>, i: number) => U, options?: {
    fallback?: Accessor<any>;
}): () => U[];
`,"types/reactive/observable.d.ts":`import { Accessor, Setter } from "./signal.js";
declare global {
    interface SymbolConstructor {
        readonly observable: symbol;
    }
}
export declare type ObservableObserver<T> = ((v: T) => void) | {
    next?: (v: T) => void;
    error?: (v: any) => void;
    complete?: (v: boolean) => void;
};
/**
 * creates a simple observable from a signal's accessor to be used with the \`from\` operator of observable libraries like e.g. rxjs
 * \`\`\`typescript
 * import { from } from "rxjs";
 * const [s, set] = createSignal(0);
 * const obsv$ = from(observable(s));
 * obsv$.subscribe((v) => console.log(v));
 * \`\`\`
 * description https://www.solidjs.com/docs/latest/api#observable
 */
export declare function observable<T>(input: Accessor<T>): {
    subscribe(observer: ObservableObserver<T>): {
        unsubscribe(): void;
    };
    [Symbol.observable](): any;
};
export declare function from<T>(producer: ((setter: Setter<T | undefined>) => () => void) | {
    subscribe: (fn: (v: T) => void) => (() => void) | {
        unsubscribe: () => void;
    };
}): Accessor<T | undefined>;
`,"types/reactive/scheduler.d.ts":`export interface Task {
    id: number;
    fn: ((didTimeout: boolean) => void) | null;
    startTime: number;
    expirationTime: number;
}
export declare function requestCallback(fn: () => void, options?: {
    timeout: number;
}): Task;
export declare function cancelCallback(task: Task): void;
`,"types/reactive/signal.d.ts":`import { requestCallback } from "./scheduler.js";
import type { JSX } from "../jsx.js";
import type { FlowComponent } from "../render/index.js";
export declare const equalFn: <T>(a: T, b: T) => boolean;
export declare const $PROXY: unique symbol;
export declare const $TRACK: unique symbol;
export declare const $DEVCOMP: unique symbol;
export declare var Owner: Owner | null;
export declare let Transition: TransitionState | null;
declare let ExternalSourceFactory: ExternalSourceFactory | null;
declare global {
    var _$afterUpdate: (() => void) | undefined;
    var _$afterCreateRoot: ((root: Owner) => void) | undefined;
}
export declare type ComputationState = 0 | 1 | 2;
export interface SignalState<T> {
    value?: T;
    observers: Computation<any>[] | null;
    observerSlots: number[] | null;
    tValue?: T;
    comparator?: (prev: T, next: T) => boolean;
    name?: string;
}
export interface Owner {
    owned: Computation<any>[] | null;
    cleanups: (() => void)[] | null;
    owner: Owner | null;
    context: any | null;
    sourceMap?: Record<string, {
        value: unknown;
    }>;
    name?: string;
    componentName?: string;
}
export interface Computation<Init, Next extends Init = Init> extends Owner {
    fn: EffectFunction<Init, Next>;
    state: ComputationState;
    tState?: ComputationState;
    sources: SignalState<Next>[] | null;
    sourceSlots: number[] | null;
    value?: Init;
    updatedAt: number | null;
    pure: boolean;
    user?: boolean;
    suspense?: SuspenseContextType;
}
export interface TransitionState {
    sources: Set<SignalState<any>>;
    effects: Computation<any>[];
    promises: Set<Promise<any>>;
    disposed: Set<Computation<any>>;
    queue: Set<Computation<any>>;
    scheduler?: (fn: () => void) => unknown;
    running: boolean;
    done?: Promise<void>;
    resolve?: () => void;
}
declare type ExternalSourceFactory = <Prev, Next extends Prev = Prev>(fn: EffectFunction<Prev, Next>, trigger: () => void) => ExternalSource;
export interface ExternalSource {
    track: EffectFunction<any, any>;
    dispose: () => void;
}
export declare type RootFunction<T> = (dispose: () => void) => T;
/**
 * Creates a new non-tracked reactive context that doesn't auto-dispose
 *
 * @param fn a function in which the reactive state is scoped
 * @param detachedOwner optional reactive context to bind the root to
 * @returns the output of \`fn\`.
 *
 * @description https://www.solidjs.com/docs/latest/api#createroot
 */
export declare function createRoot<T>(fn: RootFunction<T>, detachedOwner?: Owner): T;
export declare type Accessor<T> = () => T;
export declare type Setter<T> = (undefined extends T ? () => undefined : {}) & (<U extends T>(value: (prev: T) => U) => U) & (<U extends T>(value: Exclude<U, Function>) => U) & (<U extends T>(value: Exclude<U, Function> | ((prev: T) => U)) => U);
export declare type Signal<T> = [get: Accessor<T>, set: Setter<T>];
export interface SignalOptions<T> extends MemoOptions<T> {
    internal?: boolean;
}
/**
 * Creates a simple reactive state with a getter and setter
 * \`\`\`typescript
 * const [state: Accessor<T>, setState: Setter<T>] = createSignal<T>(
 *  value: T,
 *  options?: { name?: string, equals?: false | ((prev: T, next: T) => boolean) }
 * )
 * \`\`\`
 * @param value initial value of the state; if empty, the state's type will automatically extended with undefined; otherwise you need to extend the type manually if you want setting to undefined not be an error
 * @param options optional object with a name for debugging purposes and equals, a comparator function for the previous and next value to allow fine-grained control over the reactivity
 *
 * @returns \`\`\`typescript
 * [state: Accessor<T>, setState: Setter<T>]
 * \`\`\`
 * * the Accessor is merely a function that returns the current value and registers each call to the reactive root
 * * the Setter is a function that allows directly setting or mutating the value:
 * \`\`\`typescript
 * const [count, setCount] = createSignal(0);
 * setCount(count => count + 1);
 * \`\`\`
 *
 * @description https://www.solidjs.com/docs/latest/api#createsignal
 */
export declare function createSignal<T>(): Signal<T | undefined>;
export declare function createSignal<T>(value: T, options?: SignalOptions<T>): Signal<T>;
export interface BaseOptions {
    name?: string;
}
export declare type NoInfer<T extends any> = [T][T extends any ? 0 : never];
export interface EffectOptions extends BaseOptions {
}
export declare type EffectFunction<Prev, Next extends Prev = Prev> = (v: Prev) => Next;
/**
 * Creates a reactive computation that runs immediately before render, mainly used to write to other reactive primitives
 * \`\`\`typescript
 * export function createComputed<Next, Init = Next>(
 *   fn: (v: Init | Next) => Next,
 *   value?: Init,
 *   options?: { name?: string }
 * ): void;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createcomputed
 */
export declare function createComputed<Next>(fn: EffectFunction<undefined | NoInfer<Next>, Next>): void;
export declare function createComputed<Next, Init = Next>(fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions): void;
/**
 * Creates a reactive computation that runs during the render phase as DOM elements are created and updated but not necessarily connected
 * \`\`\`typescript
 * export function createRenderEffect<T>(
 *   fn: (v: T) => T,
 *   value?: T,
 *   options?: { name?: string }
 * ): void;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createrendereffect
 */
export declare function createRenderEffect<Next>(fn: EffectFunction<undefined | NoInfer<Next>, Next>): void;
export declare function createRenderEffect<Next, Init = Next>(fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions): void;
/**
 * Creates a reactive computation that runs after the render phase
 * \`\`\`typescript
 * export function createEffect<T>(
 *   fn: (v: T) => T,
 *   value?: T,
 *   options?: { name?: string }
 * ): void;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createeffect
 */
export declare function createEffect<Next>(fn: EffectFunction<undefined | NoInfer<Next>, Next>): void;
export declare function createEffect<Next, Init = Next>(fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions): void;
/**
 * Creates a reactive computation that runs after the render phase with flexible tracking
 * \`\`\`typescript
 * export function createReaction(
 *   onInvalidate: () => void,
 *   options?: { name?: string }
 * ): (fn: () => void) => void;
 * \`\`\`
 * @param invalidated a function that is called when tracked function is invalidated.
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createreaction
 */
export declare function createReaction(onInvalidate: () => void, options?: EffectOptions): (tracking: () => void) => void;
export interface Memo<Prev, Next = Prev> extends SignalState<Next>, Computation<Next> {
    tOwned?: Computation<Prev | Next, Next>[];
}
export interface MemoOptions<T> extends EffectOptions {
    equals?: false | ((prev: T, next: T) => boolean);
}
/**
 * Creates a readonly derived reactive memoized signal
 * \`\`\`typescript
 * export function createMemo<T>(
 *   fn: (v: T) => T,
 *   value?: T,
 *   options?: { name?: string, equals?: false | ((prev: T, next: T) => boolean) }
 * ): () => T;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes and use a custom comparison function in equals
 *
 * @description https://www.solidjs.com/docs/latest/api#creatememo
 */
export declare function createMemo<Next extends Prev, Prev = Next>(fn: EffectFunction<undefined | NoInfer<Prev>, Next>): Accessor<Next>;
export declare function createMemo<Next extends Prev, Init = Next, Prev = Next>(fn: EffectFunction<Init | Prev, Next>, value: Init, options?: MemoOptions<Next>): Accessor<Next>;
interface Unresolved {
    state: "unresolved";
    loading: false;
    error: undefined;
    latest: undefined;
    (): undefined;
}
interface Pending {
    state: "pending";
    loading: true;
    error: undefined;
    latest: undefined;
    (): undefined;
}
interface Ready<T> {
    state: "ready";
    loading: false;
    error: undefined;
    latest: T;
    (): T;
}
interface Refreshing<T> {
    state: "refreshing";
    loading: true;
    error: undefined;
    latest: T;
    (): T;
}
interface Errored {
    state: "errored";
    loading: false;
    error: any;
    latest: never;
    (): never;
}
export declare type Resource<T> = Unresolved | Pending | Ready<T> | Refreshing<T> | Errored;
export declare type InitializedResource<T> = Ready<T> | Refreshing<T> | Errored;
export declare type ResourceActions<T, R = unknown> = {
    mutate: Setter<T>;
    refetch: (info?: R) => T | Promise<T> | undefined | null;
};
export declare type ResourceSource<S> = S | false | null | undefined | (() => S | false | null | undefined);
export declare type ResourceFetcher<S, T, R = unknown> = (k: S, info: ResourceFetcherInfo<T, R>) => T | Promise<T>;
export declare type ResourceFetcherInfo<T, R = unknown> = {
    value: T | undefined;
    refetching: R | boolean;
};
export declare type ResourceOptions<T, S = unknown> = {
    initialValue?: T;
    name?: string;
    deferStream?: boolean;
    ssrLoadFrom?: "initial" | "server";
    storage?: (init: T | undefined) => [Accessor<T | undefined>, Setter<T | undefined>];
    onHydrated?: (k: S | undefined, info: {
        value: T | undefined;
    }) => void;
};
export declare type InitializedResourceOptions<T, S = unknown> = ResourceOptions<T, S> & {
    initialValue: T;
};
export declare type ResourceReturn<T, R = unknown> = [Resource<T>, ResourceActions<T | undefined, R>];
export declare type InitializedResourceReturn<T, R = unknown> = [
    InitializedResource<T>,
    ResourceActions<T, R>
];
/**
 * Creates a resource that wraps a repeated promise in a reactive pattern:
 * \`\`\`typescript
 * // Without source
 * const [resource, { mutate, refetch }] = createResource(fetcher, options);
 * // With source
 * const [resource, { mutate, refetch }] = createResource(source, fetcher, options);
 * \`\`\`
 * @param source - reactive data function which has its non-nullish and non-false values passed to the fetcher, optional
 * @param fetcher - function that receives the source (true if source not provided), the last or initial value, and whether the resource is being refetched, and returns a value or a Promise:
 * \`\`\`typescript
 * const fetcher: ResourceFetcher<S, T, R> = (
 *   sourceOutput: S,
 *   info: { value: T | undefined, refetching: R | boolean }
 * ) => T | Promise<T>;
 * \`\`\`
 * @param options - an optional object with the initialValue and the name (for debugging purposes); see {@link ResourceOptions}
 *
 * @returns \`\`\`typescript
 * [Resource<T>, { mutate: Setter<T>, refetch: () => void }]
 * \`\`\`
 *
 * * Setting an \`initialValue\` in the options will mean that both the prev() accessor and the resource should never return undefined (if that is wanted, you need to extend the type with undefined)
 * * \`mutate\` allows to manually overwrite the resource without calling the fetcher
 * * \`refetch\` will re-run the fetcher without changing the source, and if called with a value, that value will be passed to the fetcher via the \`refetching\` property on the fetcher's second parameter
 *
 * @description https://www.solidjs.com/docs/latest/api#createresource
 */
export declare function createResource<T, R = unknown>(fetcher: ResourceFetcher<true, T, R>, options: InitializedResourceOptions<NoInfer<T>, true>): InitializedResourceReturn<T, R>;
export declare function createResource<T, R = unknown>(fetcher: ResourceFetcher<true, T, R>, options?: ResourceOptions<NoInfer<T>, true>): ResourceReturn<T, R>;
export declare function createResource<T, S, R = unknown>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T, R>, options: InitializedResourceOptions<NoInfer<T>, S>): InitializedResourceReturn<T, R>;
export declare function createResource<T, S, R = unknown>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T, R>, options?: ResourceOptions<NoInfer<T>, S>): ResourceReturn<T, R>;
export interface DeferredOptions<T> {
    equals?: false | ((prev: T, next: T) => boolean);
    name?: string;
    timeoutMs?: number;
}
/**
 * Creates a reactive computation that only runs and notifies the reactive context when the browser is idle
 * \`\`\`typescript
 * export function createDeferred<T>(
 *   fn: (v: T) => T,
 *   options?: { timeoutMs?: number, name?: string, equals?: false | ((prev: T, next: T) => boolean) }
 * ): () => T);
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param options allows to set the timeout in milliseconds, use a custom comparison function and set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createdeferred
 */
export declare function createDeferred<T>(source: Accessor<T>, options?: DeferredOptions<T>): Accessor<T>;
export declare type EqualityCheckerFunction<T, U> = (a: U, b: T) => boolean;
/**
 * Creates a conditional signal that only notifies subscribers when entering or exiting their key matching the value
 * \`\`\`typescript
 * export function createSelector<T, U>(
 *   source: () => T
 *   fn: (a: U, b: T) => boolean,
 *   options?: { name?: string }
 * ): (k: U) => boolean;
 * \`\`\`
 * @param source
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param options allows to set a name in dev mode for debugging purposes, optional
 *
 * \`\`\`typescript
 * const isSelected = createSelector(selectedId);
 * <For each={list()}>
 *   {(item) => <li classList={{ active: isSelected(item.id) }}>{item.name}</li>}
 * </For>
 * \`\`\`
 *
 * This makes the operation O(2) instead of O(n).
 *
 * @description https://www.solidjs.com/docs/latest/api#createselector
 */
export declare function createSelector<T, U>(source: Accessor<T>, fn?: EqualityCheckerFunction<T, U>, options?: BaseOptions): (key: U) => boolean;
/**
 * Holds changes inside the block before the reactive context is updated
 * @param fn wraps the reactive updates that should be batched
 * @returns the return value from \`fn\`
 *
 * @description https://www.solidjs.com/docs/latest/api#batch
 */
export declare function batch<T>(fn: Accessor<T>): T;
/**
 * Ignores tracking context inside its scope
 * @param fn the scope that is out of the tracking context
 * @returns the return value of \`fn\`
 *
 * @description https://www.solidjs.com/docs/latest/api#untrack
 */
export declare function untrack<T>(fn: Accessor<T>): T;
/** @deprecated */
export declare type ReturnTypes<T> = T extends readonly Accessor<unknown>[] ? {
    [K in keyof T]: T[K] extends Accessor<infer I> ? I : never;
} : T extends Accessor<infer I> ? I : never;
export declare type AccessorArray<T> = [...Extract<{
    [K in keyof T]: Accessor<T[K]>;
}, readonly unknown[]>];
export declare type OnEffectFunction<S, Prev, Next extends Prev = Prev> = (input: S, prevInput: S | undefined, prev: Prev) => Next;
export interface OnOptions {
    defer?: boolean;
}
/**
 * on - make dependencies of a computation explicit
 * \`\`\`typescript
 * export function on<S, U>(
 *   deps: Accessor<S> | AccessorArray<S>,
 *   fn: (input: S, prevInput: S | undefined, prevValue: U | undefined) => U,
 *   options?: { defer?: boolean } = {}
 * ): (prevValue: U | undefined) => U;
 * \`\`\`
 * @param deps list of reactive dependencies or a single reactive dependency
 * @param fn computation on input; the current previous content(s) of input and the previous value are given as arguments and it returns a new value
 * @param options optional, allows deferred computation until at the end of the next change
 * @returns an effect function that is passed into createEffect. For example:
 *
 * \`\`\`typescript
 * createEffect(on(a, (v) => console.log(v, b())));
 *
 * // is equivalent to:
 * createEffect(() => {
 *   const v = a();
 *   untrack(() => console.log(v, b()));
 * });
 * \`\`\`
 *
 * @description https://www.solidjs.com/docs/latest/api#on
 */
export declare function on<S, Next extends Prev, Prev = Next>(deps: AccessorArray<S> | Accessor<S>, fn: OnEffectFunction<S, undefined | NoInfer<Prev>, Next>, options?: OnOptions & {
    defer?: false;
}): EffectFunction<undefined | NoInfer<Next>, NoInfer<Next>>;
export declare function on<S, Next extends Prev, Prev = Next>(deps: AccessorArray<S> | Accessor<S>, fn: OnEffectFunction<S, undefined | NoInfer<Prev>, Next>, options: OnOptions & {
    defer: true;
}): EffectFunction<undefined | NoInfer<Next>>;
/**
 * onMount - run an effect only after initial render on mount
 * @param fn an effect that should run only once on mount
 *
 * @description https://www.solidjs.com/docs/latest/api#onmount
 */
export declare function onMount(fn: () => void): void;
/**
 * onCleanup - run an effect once before the reactive scope is disposed
 * @param fn an effect that should run only once on cleanup
 *
 * @description https://www.solidjs.com/docs/latest/api#oncleanup
 */
export declare function onCleanup(fn: () => void): () => void;
/**
 * onError - run an effect whenever an error is thrown within the context of the child scopes
 * @param fn an error handler that receives the error
 *
 * * If the error is thrown again inside the error handler, it will trigger the next available parent handler
 *
 * @description https://www.solidjs.com/docs/latest/api#onerror
 */
export declare function onError(fn: (err: any) => void): void;
export declare function getListener(): Computation<any, any> | null;
export declare function getOwner(): Owner | null;
export declare function runWithOwner<T>(o: Owner, fn: () => T): T | undefined;
export declare function enableScheduling(scheduler?: typeof requestCallback): void;
/**
 * \`\`\`typescript
 * export function startTransition(fn: () => void) => Promise<void>
 *
 * @description https://www.solidjs.com/docs/latest/api#usetransition
 */
export declare function startTransition(fn: () => unknown): Promise<void>;
export declare type Transition = [Accessor<boolean>, (fn: () => void) => Promise<void>];
/**
 * \`\`\`typescript
 * export function useTransition(): [
 *   () => boolean,
 *   (fn: () => void, cb?: () => void) => void
 * ];
 * @returns a tuple; first value is an accessor if the transition is pending and a callback to start the transition
 *
 * @description https://www.solidjs.com/docs/latest/api#usetransition
 */
export declare function useTransition(): Transition;
export declare function resumeEffects(e: Computation<any>[]): void;
export interface DevComponent<T> extends Memo<JSX.Element> {
    props: T;
    componentName: string;
}
export declare function devComponent<T>(Comp: (props: T) => JSX.Element, props: T): JSX.Element;
export declare function hashValue(v: any): string;
export declare function registerGraph(name: string, value: {
    value: unknown;
}): string;
interface GraphRecord {
    [k: string]: GraphRecord | unknown;
}
export declare function serializeGraph(owner?: Owner | null): GraphRecord;
export declare type ContextProviderComponent<T> = FlowComponent<{
    value: T;
}>;
export interface Context<T> {
    id: symbol;
    Provider: ContextProviderComponent<T>;
    defaultValue: T;
}
/**
 * Creates a Context to handle a state scoped for the children of a component
 * \`\`\`typescript
 * interface Context<T> {
 *   id: symbol;
 *   Provider: FlowComponent<{ value: T }>;
 *   defaultValue: T;
 * }
 * export function createContext<T>(
 *   defaultValue?: T,
 *   options?: { name?: string }
 * ): Context<T | undefined>;
 * \`\`\`
 * @param defaultValue optional default to inject into context
 * @param options allows to set a name in dev mode for debugging purposes
 * @returns The context that contains the Provider Component and that can be used with \`useContext\`
 *
 * @description https://www.solidjs.com/docs/latest/api#createcontext
 */
export declare function createContext<T>(defaultValue?: undefined, options?: EffectOptions): Context<T | undefined>;
export declare function createContext<T>(defaultValue: T, options?: EffectOptions): Context<T>;
/**
 * use a context to receive a scoped state from a parent's Context.Provider
 *
 * @param context Context object made by \`createContext\`
 * @returns the current or \`defaultValue\`, if present
 *
 * @description https://www.solidjs.com/docs/latest/api#usecontext
 */
export declare function useContext<T>(context: Context<T>): T;
export declare type ResolvedJSXElement = Exclude<JSX.Element, JSX.ArrayElement | JSX.FunctionElement>;
export declare type ResolvedChildren = ResolvedJSXElement | ResolvedJSXElement[];
export declare type ChildrenReturn = Accessor<ResolvedChildren> & {
    toArray: () => ResolvedJSXElement[];
};
/**
 * Resolves child elements to help interact with children
 *
 * @param fn an accessor for the children
 * @returns a accessor of the same children, but resolved
 *
 * @description https://www.solidjs.com/docs/latest/api#children
 */
export declare function children(fn: Accessor<JSX.Element>): ChildrenReturn;
export declare type SuspenseContextType = {
    increment?: () => void;
    decrement?: () => void;
    inFallback?: () => boolean;
    effects?: Computation<any>[];
    resolved?: boolean;
};
declare type SuspenseContext = Context<SuspenseContextType> & {
    active?(): boolean;
    increment?(): void;
    decrement?(): void;
};
declare let SuspenseContext: SuspenseContext;
export declare function getSuspenseContext(): SuspenseContext;
export declare function enableExternalSource(factory: ExternalSourceFactory): void;
export declare function readSignal(this: SignalState<any> | Memo<any>): any;
export declare function writeSignal(node: SignalState<any> | Memo<any>, value: any, isComp?: boolean): any;
export {};
`,"types/render/Suspense.d.ts":`import type { JSX } from "../jsx.js";
/**
 * **[experimental]** controls the order in which suspended content is rendered
 *
 * @description https://www.solidjs.com/docs/latest/api#%3Csuspenselist%3E-(experimental)
 */
export declare function SuspenseList(props: {
    children: JSX.Element;
    revealOrder: "forwards" | "backwards" | "together";
    tail?: "collapsed" | "hidden";
}): JSX.Element;
/**
 * tracks all resources inside a component and renders a fallback until they are all resolved
 * \`\`\`typescript
 * const AsyncComponent = lazy(() => import('./component'));
 *
 * <Suspense fallback={<LoadingIndicator />}>
 *   <AsyncComponent />
 * </Suspense>
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#%3Csuspense%3E
 */
export declare function Suspense(props: {
    fallback?: JSX.Element;
    children: JSX.Element;
}): JSX.Element;
`,"types/render/component.d.ts":`import type { JSX } from "../jsx.js";
export declare function enableHydration(): void;
/**
 * A general \`Component\` has no implicit \`children\` prop.  If desired, you can
 * specify one as in \`Component<{name: String, children: JSX.Element}>\`.
 */
export declare type Component<P = {}> = (props: P) => JSX.Element;
/**
 * Extend props to forbid the \`children\` prop.
 * Use this to prevent accidentally passing \`children\` to components that
 * would silently throw them away.
 */
export declare type VoidProps<P = {}> = P & {
    children?: never;
};
/**
 * \`VoidComponent\` forbids the \`children\` prop.
 * Use this to prevent accidentally passing \`children\` to components that
 * would silently throw them away.
 */
export declare type VoidComponent<P = {}> = Component<VoidProps<P>>;
/**
 * Extend props to allow an optional \`children\` prop with the usual
 * type in JSX, \`JSX.Element\` (which allows elements, arrays, functions, etc.).
 * Use this for components that you want to accept children.
 */
export declare type ParentProps<P = {}> = P & {
    children?: JSX.Element;
};
/**
 * \`ParentComponent\` allows an optional \`children\` prop with the usual
 * type in JSX, \`JSX.Element\` (which allows elements, arrays, functions, etc.).
 * Use this for components that you want to accept children.
 */
export declare type ParentComponent<P = {}> = Component<ParentProps<P>>;
/**
 * Extend props to require a \`children\` prop with the specified type.
 * Use this for components where you need a specific child type,
 * typically a function that receives specific argument types.
 * Note that all JSX <Elements> are of the type \`JSX.Element\`.
 */
export declare type FlowProps<P = {}, C = JSX.Element> = P & {
    children: C;
};
/**
 * \`FlowComponent\` requires a \`children\` prop with the specified type.
 * Use this for components where you need a specific child type,
 * typically a function that receives specific argument types.
 * Note that all JSX <Elements> are of the type \`JSX.Element\`.
 */
export declare type FlowComponent<P = {}, C = JSX.Element> = Component<FlowProps<P, C>>;
/** @deprecated: use \`ParentProps\` instead */
export declare type PropsWithChildren<P = {}> = ParentProps<P>;
export declare type ValidComponent = keyof JSX.IntrinsicElements | Component<any> | (string & {});
/**
 * Takes the props of the passed component and returns its type
 *
 * @example
 * ComponentProps<typeof Portal> // { mount?: Node; useShadow?: boolean; children: JSX.Element }
 * ComponentProps<'div'> // JSX.HTMLAttributes<HTMLDivElement>
 */
export declare type ComponentProps<T extends ValidComponent> = T extends Component<infer P> ? P : T extends keyof JSX.IntrinsicElements ? JSX.IntrinsicElements[T] : Record<string, unknown>;
/**
 * Type of \`props.ref\`, for use in \`Component\` or \`props\` typing.
 *
 * @example Component<{ref: Ref<Element>}>
 */
export declare type Ref<T> = T | ((val: T) => void);
export declare function createComponent<T>(Comp: Component<T>, props: T): JSX.Element;
declare type DistributeOverride<T, F> = T extends undefined ? F : T;
declare type Override<T, U> = T extends any ? U extends any ? {
    [K in keyof T]: K extends keyof U ? DistributeOverride<U[K], T[K]> : T[K];
} & {
    [K in keyof U]: K extends keyof T ? DistributeOverride<U[K], T[K]> : U[K];
} : T & U : T & U;
declare type OverrideSpread<T, U> = T extends any ? {
    [K in keyof ({
        [K in keyof T]: any;
    } & {
        [K in keyof U]?: any;
    } & {
        [K in U extends any ? keyof U : keyof U]?: any;
    })]: K extends keyof T ? Exclude<U extends any ? U[K & keyof U] : never, undefined> | T[K] : U extends any ? U[K & keyof U] : never;
} : T & U;
declare type Simplify<T> = T extends any ? {
    [K in keyof T]: T[K];
} : T;
declare type _MergeProps<T extends unknown[], Curr = {}> = T extends [
    infer Next | (() => infer Next),
    ...infer Rest
] ? _MergeProps<Rest, Override<Curr, Next>> : T extends [...infer Rest, infer Next | (() => infer Next)] ? Override<_MergeProps<Rest, Curr>, Next> : T extends [] ? Curr : T extends (infer I | (() => infer I))[] ? OverrideSpread<Curr, I> : Curr;
export declare type MergeProps<T extends unknown[]> = Simplify<_MergeProps<T>>;
export declare function mergeProps<T extends unknown[]>(...sources: T): MergeProps<T>;
export declare type SplitProps<T, K extends (readonly (keyof T)[])[]> = [
    ...{
        [P in keyof K]: P extends \`\${number}\` ? Pick<T, Extract<K[P], readonly (keyof T)[]>[number]> : never;
    },
    Omit<T, K[number][number]>
];
export declare function splitProps<T extends Record<any, any>, K extends [readonly (keyof T)[], ...(readonly (keyof T)[])[]]>(props: T, ...keys: K): SplitProps<T, K>;
export declare function lazy<T extends Component<any>>(fn: () => Promise<{
    default: T;
}>): T & {
    preload: () => Promise<{
        default: T;
    }>;
};
export declare function createUniqueId(): string;
export {};
`,"types/render/flow.d.ts":`import { Accessor } from "../reactive/signal.js";
import type { JSX } from "../jsx.js";
/**
 * creates a list elements from a list
 *
 * it receives a map function as its child that receives a list element and an accessor with the index and returns a JSX-Element; if the list is empty, an optional fallback is returned:
 * \`\`\`typescript
 * <For each={items} fallback={<div>No items</div>}>
 *   {(item, index) => <div data-index={index()}>{item}</div>}
 * </For>
 * \`\`\`
 * If you have a list with fixed indices and changing values, consider using \`<Index>\` instead.
 *
 * @description https://www.solidjs.com/docs/latest/api#%3Cfor%3E
 */
export declare function For<T extends readonly any[], U extends JSX.Element>(props: {
    each: T | undefined | null | false;
    fallback?: JSX.Element;
    children: (item: T[number], index: Accessor<number>) => U;
}): Accessor<U[]>;
/**
 * Non-keyed iteration over a list creating elements from its items
 *
 * To be used if you have a list with fixed indices, but changing values.
 * \`\`\`typescript
 * <Index each={items} fallback={<div>No items</div>}>
 *   {(item, index) => <div data-index={index}>{item()}</div>}
 * </Index>
 * \`\`\`
 * If you have a list with changing indices, better use \`<For>\`.
 *
 * @description https://www.solidjs.com/docs/latest/api#%3Cindex%3E
 */
export declare function Index<T extends readonly any[], U extends JSX.Element>(props: {
    each: T | undefined | null | false;
    fallback?: JSX.Element;
    children: (item: Accessor<T[number]>, index: number) => U;
}): Accessor<U[]>;
/**
 * Conditionally render its children or an optional fallback component
 * @description https://www.solidjs.com/docs/latest/api#%3Cshow%3E
 */
export declare function Show<T>(props: {
    when: T | undefined | null | false;
    keyed: true;
    fallback?: JSX.Element;
    children: JSX.Element | ((item: NonNullable<T>) => JSX.Element);
}): () => JSX.Element;
export declare function Show<T>(props: {
    when: T | undefined | null | false;
    keyed?: false;
    fallback?: JSX.Element;
    children: JSX.Element;
}): () => JSX.Element;
/**
 * switches between content based on mutually exclusive conditions
 * \`\`\`typescript
 * <Switch fallback={<FourOhFour />}>
 *   <Match when={state.route === 'home'}>
 *     <Home />
 *   </Match>
 *   <Match when={state.route === 'settings'}>
 *     <Settings />
 *   </Match>
 * </Switch>
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#%3Cswitch%3E%2F%3Cmatch%3E
 */
export declare function Switch(props: {
    fallback?: JSX.Element;
    children: JSX.Element;
}): Accessor<JSX.Element>;
export declare type MatchProps<T> = {
    when: T | undefined | null | false;
    keyed?: boolean;
    children: JSX.Element | ((item: NonNullable<T>) => JSX.Element);
};
/**
 * selects a content based on condition when inside a \`<Switch>\` control flow
 * \`\`\`typescript
 * <Match when={condition()}>
 *   <Content/>
 * </Match>
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#%3Cswitch%3E%2F%3Cmatch%3E
 */
export declare function Match<T>(props: {
    when: T | undefined | null | false;
    keyed: true;
    children: JSX.Element | ((item: NonNullable<T>) => JSX.Element);
}): JSX.Element;
export declare function Match<T>(props: {
    when: T | undefined | null | false;
    keyed?: false;
    children: JSX.Element;
}): JSX.Element;
export declare function resetErrorBoundaries(): void;
/**
 * catches uncaught errors inside components and renders a fallback content
 *
 * Also supports a callback form that passes the error and a reset function:
 * \`\`\`typescript
 * <ErrorBoundary fallback={
 *   (err, reset) => <div onClick={reset}>Error: {err.toString()}</div>
 * }>
 *   <MyComp />
 * </ErrorBoundary>
 * \`\`\`
 * Errors thrown from the fallback can be caught by a parent ErrorBoundary
 *
 * @description https://www.solidjs.com/docs/latest/api#%3Cerrorboundary%3E
 */
export declare function ErrorBoundary(props: {
    fallback: JSX.Element | ((err: any, reset: () => void) => JSX.Element);
    children: JSX.Element;
}): Accessor<JSX.Element>;
`,"types/render/hydration.d.ts":`export declare type HydrationContext = {
    id: string;
    count: number;
};
declare type SharedConfig = {
    context?: HydrationContext;
    resources?: {
        [key: string]: any;
    };
    load?: (id: string) => Promise<any> | any | undefined;
    gather?: (key: string) => void;
    registry?: Map<string, Element>;
    done?: boolean;
};
export declare const sharedConfig: SharedConfig;
export declare function setHydrateContext(context?: HydrationContext): void;
export declare function nextHydrateContext(): HydrationContext | undefined;
export {};
`,"types/render/index.d.ts":`export * from "./component.js";
export * from "./flow.js";
export * from "./Suspense.js";
export { sharedConfig } from "./hydration.js";
`,"types/server/index.d.ts":`export { createRoot, createSignal, createComputed, createRenderEffect, createEffect, createReaction, createDeferred, createSelector, createMemo, getListener, onMount, onCleanup, onError, untrack, batch, on, children, createContext, useContext, getOwner, runWithOwner, equalFn, requestCallback, mapArray, observable, from, $PROXY, $DEVCOMP, $TRACK, DEV, enableExternalSource } from "./reactive.js";
export { mergeProps, splitProps, createComponent, For, Index, Show, Switch, Match, ErrorBoundary, Suspense, SuspenseList, createResource, resetErrorBoundaries, enableScheduling, enableHydration, startTransition, useTransition, createUniqueId, lazy, sharedConfig } from "./rendering.js";
export type { Component, Resource } from "./rendering.js";
`,"types/server/reactive.d.ts":`export declare const equalFn: <T>(a: T, b: T) => boolean;
export declare const $PROXY: unique symbol;
export declare const $TRACK: unique symbol;
export declare const $DEVCOMP: unique symbol;
export declare const DEV: {};
export declare type Accessor<T> = () => T;
export declare type Setter<T> = undefined extends T ? <U extends T>(value?: (U extends Function ? never : U) | ((prev?: T) => U)) => U : <U extends T>(value: (U extends Function ? never : U) | ((prev: T) => U)) => U;
export declare type Signal<T> = [get: Accessor<T>, set: Setter<T>];
export declare const BRANCH: unique symbol;
export declare function castError(err: any): string | Error;
export declare let Owner: Owner | null;
interface Owner {
    owner: Owner | null;
    context: any | null;
}
export declare function createRoot<T>(fn: (dispose: () => void) => T, detachedOwner?: Owner): T;
export declare function createSignal<T>(value: T, options?: {
    equals?: false | ((prev: T, next: T) => boolean);
    name?: string;
}): [get: () => T, set: (v: (T extends Function ? never : T) | ((prev: T) => T)) => T];
export declare function createComputed<T>(fn: (v?: T) => T, value?: T): void;
export declare const createRenderEffect: typeof createComputed;
export declare function createEffect<T>(fn: (v?: T) => T, value?: T): void;
export declare function createReaction(fn: () => void): (fn: () => void) => void;
export declare function createMemo<T>(fn: (v?: T) => T, value?: T): () => T;
export declare function createDeferred<T>(source: () => T): () => T;
export declare function createSelector<T>(source: () => T, fn?: (k: T, value: T) => boolean): (k: T) => boolean;
export declare function batch<T>(fn: () => T): T;
export declare const untrack: typeof batch;
export declare function on<T, U>(deps: Array<() => T> | (() => T), fn: (value: Array<T> | T, prev?: Array<T> | T, prevResults?: U) => U, options?: {
    defer?: boolean;
}): (prev?: U) => U | undefined;
export declare function onMount(fn: () => void): void;
export declare function onCleanup(fn: () => void): () => void;
export declare function cleanNode(node: {
    cleanups?: Function[] | null;
}): void;
export declare function onError(fn: (err: any) => void): void;
export declare function getListener(): null;
export interface Context<T> {
    id: symbol;
    Provider: (props: {
        value: T;
        children: any;
    }) => any;
    defaultValue?: T;
}
export declare function createContext<T>(defaultValue?: T): Context<T>;
export declare function useContext<T>(context: Context<T>): T;
export declare function getOwner(): Owner | null;
declare type ChildrenReturn = Accessor<any> & {
    toArray: () => any[];
};
export declare function children(fn: () => any): ChildrenReturn;
export declare function runWithOwner<T>(o: Owner, fn: () => T): T | undefined;
export declare function lookup(owner: Owner | null, key: symbol | string): any;
export interface Task {
    id: number;
    fn: ((didTimeout: boolean) => void) | null;
    startTime: number;
    expirationTime: number;
}
export declare function requestCallback(fn: () => void, options?: {
    timeout: number;
}): Task;
export declare function cancelCallback(task: Task): void;
export declare function mapArray<T, U>(list: () => T[], mapFn: (v: T, i: () => number) => U, options?: {
    fallback?: () => any;
}): () => U[];
export declare type ObservableObserver<T> = ((v: T) => void) | {
    next: (v: T) => void;
    error?: (v: any) => void;
    complete?: (v: boolean) => void;
};
export declare function observable<T>(input: Accessor<T>): {
    subscribe(observer: ObservableObserver<T>): {
        unsubscribe(): void;
    };
    [Symbol.observable](): any;
};
export declare function from<T>(producer: ((setter: Setter<T>) => () => void) | {
    subscribe: (fn: (v: T) => void) => (() => void) | {
        unsubscribe: () => void;
    };
}): Accessor<T>;
export declare function enableExternalSource(factory: any): void;
export {};
`,"types/server/rendering.d.ts":`import { Setter, Signal } from "./reactive.js";
import type { JSX } from "../jsx.js";
export declare type Component<P = {}> = (props: P) => JSX.Element;
export declare type VoidProps<P = {}> = P & {
    children?: never;
};
export declare type VoidComponent<P = {}> = Component<VoidProps<P>>;
export declare type ParentProps<P = {}> = P & {
    children?: JSX.Element;
};
export declare type ParentComponent<P = {}> = Component<ParentProps<P>>;
export declare type FlowProps<P = {}, C = JSX.Element> = P & {
    children: C;
};
export declare type FlowComponent<P = {}, C = JSX.Element> = Component<FlowProps<P, C>>;
export declare type Ref<T> = T | ((val: T) => void);
export declare type ValidComponent = keyof JSX.IntrinsicElements | Component<any> | (string & {});
export declare type ComponentProps<T extends ValidComponent> = T extends Component<infer P> ? P : T extends keyof JSX.IntrinsicElements ? JSX.IntrinsicElements[T] : Record<string, unknown>;
declare type SharedConfig = {
    context?: HydrationContext;
};
export declare const sharedConfig: SharedConfig;
export declare function createUniqueId(): string;
export declare function createComponent<T>(Comp: (props: T) => JSX.Element, props: T): JSX.Element;
export declare function mergeProps<T, U>(source: T, source1: U): T & U;
export declare function mergeProps<T, U, V>(source: T, source1: U, source2: V): T & U & V;
export declare function mergeProps<T, U, V, W>(source: T, source1: U, source2: V, source3: W): T & U & V & W;
export declare function splitProps<T extends object, K1 extends keyof T>(props: T, ...keys: [K1[]]): [Pick<T, K1>, Omit<T, K1>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T>(props: T, ...keys: [K1[], K2[]]): [Pick<T, K1>, Pick<T, K2>, Omit<T, K1 | K2>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T, K3 extends keyof T>(props: T, ...keys: [K1[], K2[], K3[]]): [Pick<T, K1>, Pick<T, K2>, Pick<T, K3>, Omit<T, K1 | K2 | K3>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T, K3 extends keyof T, K4 extends keyof T>(props: T, ...keys: [K1[], K2[], K3[], K4[]]): [Pick<T, K1>, Pick<T, K2>, Pick<T, K3>, Pick<T, K4>, Omit<T, K1 | K2 | K3 | K4>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T, K3 extends keyof T, K4 extends keyof T, K5 extends keyof T>(props: T, ...keys: [K1[], K2[], K3[], K4[], K5[]]): [
    Pick<T, K1>,
    Pick<T, K2>,
    Pick<T, K3>,
    Pick<T, K4>,
    Pick<T, K5>,
    Omit<T, K1 | K2 | K3 | K4 | K5>
];
export declare function For<T>(props: {
    each: T[];
    fallback?: string;
    children: (item: T, index: () => number) => string;
}): string | any[] | undefined;
export declare function Index<T>(props: {
    each: T[];
    fallback?: string;
    children: (item: () => T, index: number) => string;
}): string | any[] | undefined;
export declare function Show<T>(props: {
    when: T | undefined | null | false;
    keyed?: boolean;
    fallback?: string;
    children: string | ((item: NonNullable<T>) => string);
}): string;
export declare function Switch(props: {
    fallback?: string;
    children: MatchProps<unknown> | MatchProps<unknown>[];
}): string;
declare type MatchProps<T> = {
    when: T | false;
    keyed?: boolean;
    children: string | ((item: T) => string);
};
export declare function Match<T>(props: MatchProps<T>): MatchProps<T>;
export declare function resetErrorBoundaries(): void;
export declare function ErrorBoundary(props: {
    fallback: string | ((err: any, reset: () => void) => string);
    children: string;
}): string | ((err: any, reset: () => void) => string) | {
    t: string;
};
export interface Resource<T> {
    (): T | undefined;
    state: "unresolved" | "pending" | "ready" | "refreshing" | "errored";
    loading: boolean;
    error: any;
    latest: T | undefined;
}
declare type SuspenseContextType = {
    resources: Map<string, {
        loading: boolean;
        error: any;
    }>;
    completed: () => void;
};
export declare type ResourceActions<T> = {
    mutate: Setter<T>;
    refetch: (info?: unknown) => void;
};
export declare type ResourceReturn<T> = [Resource<T>, ResourceActions<T>];
export declare type ResourceSource<S> = S | false | null | undefined | (() => S | false | null | undefined);
export declare type ResourceFetcher<S, T> = (k: S, info: ResourceFetcherInfo<T>) => T | Promise<T>;
export declare type ResourceFetcherInfo<T> = {
    value: T | undefined;
    refetching?: unknown;
};
export declare type ResourceOptions<T> = undefined extends T ? {
    initialValue?: T;
    name?: string;
    deferStream?: boolean;
    ssrLoadFrom?: "initial" | "server";
    storage?: () => Signal<T | undefined>;
    onHydrated?: <S, T>(k: S, info: ResourceFetcherInfo<T>) => void;
} : {
    initialValue: T;
    name?: string;
    deferStream?: boolean;
    ssrLoadFrom?: "initial" | "server";
    storage?: (v?: T) => Signal<T | undefined>;
    onHydrated?: <S, T>(k: S, info: ResourceFetcherInfo<T>) => void;
};
export declare function createResource<T, S = true>(fetcher: ResourceFetcher<S, T>, options?: ResourceOptions<undefined>): ResourceReturn<T | undefined>;
export declare function createResource<T, S = true>(fetcher: ResourceFetcher<S, T>, options: ResourceOptions<T>): ResourceReturn<T>;
export declare function createResource<T, S>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T>, options?: ResourceOptions<undefined>): ResourceReturn<T | undefined>;
export declare function createResource<T, S>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T>, options: ResourceOptions<T>): ResourceReturn<T>;
export declare function lazy<T extends Component<any>>(fn: () => Promise<{
    default: T;
}>): T & {
    preload: () => Promise<{
        default: T;
    }>;
};
export declare function enableScheduling(): void;
export declare function enableHydration(): void;
export declare function startTransition(fn: () => any): void;
export declare function useTransition(): [() => boolean, (fn: () => any) => void];
declare type HydrationContext = {
    id: string;
    count: number;
    writeResource: (id: string, v: Promise<any> | any, error?: boolean, deferStream?: boolean) => void;
    replace: (id: string, replacement: () => any) => void;
    block: (p: Promise<any>) => void;
    resources: Record<string, any>;
    suspense: Record<string, SuspenseContextType>;
    registerFragment: (v: string) => (v?: string, err?: any) => boolean;
    async?: boolean;
    noHydrate: boolean;
};
export declare function SuspenseList(props: {
    children: string;
    revealOrder: "forwards" | "backwards" | "together";
    tail?: "collapsed" | "hidden";
}): string;
export declare function Suspense(props: {
    fallback?: string;
    children: string;
}): string | number | boolean | Node | JSX.ArrayElement | JSX.FunctionElement | {
    t: string;
} | null | undefined;
export {};
`,"universal/types/index.d.ts":`import type { RendererOptions, Renderer } from "./universal.js";
export declare function createRenderer<NodeType>(options: RendererOptions<NodeType>): Renderer<NodeType>;
`,"universal/types/universal.d.ts":`export interface RendererOptions<NodeType> {
  createElement(tag: string): NodeType;
  createTextNode(value: string): NodeType;
  replaceText(textNode: NodeType, value: string): void;
  isTextNode(node: NodeType): boolean;
  setProperty<T>(node: NodeType, name: string, value: T, prev?: T): void;
  insertNode(parent: NodeType, node: NodeType, anchor?: NodeType): void;
  removeNode(parent: NodeType, node: NodeType): void;
  getParentNode(node: NodeType): NodeType | undefined;
  getFirstChild(node: NodeType): NodeType | undefined;
  getNextSibling(node: NodeType): NodeType | undefined;
}

export interface Renderer<NodeType> {
  render(code: () => NodeType, node: NodeType): () => void;
  effect<T>(fn: (prev?: T) => T, init?: T): void;
  memo<T>(fn: () => T, equal: boolean): () => T;
  createComponent<T>(Comp: (props: T) => NodeType, props: T): NodeType;
  createElement(tag: string): NodeType;
  createTextNode(value: string): NodeType;
  insertNode(parent: NodeType, node: NodeType, anchor?: NodeType): void;
  insert<T>(parent: any, accessor: (() => T) | T, marker?: any | null): NodeType;
  spread<T>(node: any, accessor: (() => T) | T, skipChildren?: Boolean): void;
  setProp<T>(node: NodeType, name: string, value: T, prev?: T): T;
  mergeProps(...sources: unknown[]): unknown;
}

export function createRenderer<NodeType>(options: RendererOptions<NodeType>): Renderer<NodeType>;

`,"web/types/client.d.ts":`import { JSX } from "./jsx.js";
export const Aliases: Record<string, string>;
export const PropAliases: Record<string, string>;
export const Properties: Set<string>;
export const ChildProperties: Set<string>;
export const DelegatedEvents: Set<string>;
export const DOMElements: Set<string>;
export const SVGElements: Set<string>;
export const SVGNamespace: Record<string, string>;

type MountableElement = Element | Document | ShadowRoot | DocumentFragment | Node;
export function render(code: () => JSX.Element, element: MountableElement): () => void;
export function template(html: string, count: number, isSVG?: boolean): Element;
export function effect<T>(fn: (prev?: T) => T, init?: T): void;
export function memo<T>(fn: () => T, equal: boolean): () => T;
export function untrack<T>(fn: () => T): T;
export function insert<T>(
  parent: MountableElement,
  accessor: (() => T) | T,
  marker?: Node | null,
  init?: JSX.Element
): JSX.Element;
export function createComponent<T>(Comp: (props: T) => JSX.Element, props: T): JSX.Element;
export function delegateEvents(eventNames: string[], d?: Document): void;
export function clearDelegatedEvents(d?: Document): void;
export function spread<T>(
  node: Element,
  accessor: (() => T) | T,
  isSVG?: Boolean,
  skipChildren?: Boolean
): void;
export function assign(node: Element, props: any, isSVG?: Boolean, skipChildren?: Boolean): void;
export function setAttribute(node: Element, name: string, value: string): void;
export function setAttributeNS(node: Element, namespace: string, name: string, value: string): void;
export function className(node: Element, value: string): void;
export function innerHTML(node: Element, content: string): void;
export function addEventListener(
  node: Element,
  name: string,
  handler: () => void,
  delegate: boolean
): void;
export function classList(
  node: Element,
  value: { [k: string]: boolean },
  prev?: { [k: string]: boolean }
): void;
export function style(
  node: Element,
  value: { [k: string]: string },
  prev?: { [k: string]: string }
): void;
export function getOwner(): unknown;
export function mergeProps(...sources: unknown[]): unknown;
export function dynamicProperty(props: unknown, key: string): unknown;

export function hydrate(
  fn: () => JSX.Element,
  node: MountableElement,
  options?: { renderId?: string, owner?: unknown }
): () => void;
export function getHydrationKey(): string;
export function getNextElement(template?: HTMLTemplateElement): Element;
export function getNextMatch(start: Node, elementName: string): Element;
export function getNextMarker(start: Node): [Node, Array<Node>];
export function useAssets(fn: () => JSX.Element): void;
export function getAssets(): string;
export function HydrationScript(): JSX.Element;
export function generateHydrationScript(): string;
export function Assets(props: { children?: JSX.Element }): JSX.Element;
export function Hydration(props: { children?: JSX.Element }): JSX.Element;
export function NoHydration(props: { children?: JSX.Element }): JSX.Element;`,"web/types/core.d.ts":`export { getOwner, createComponent, createRoot as root, createRenderEffect as effect, createMemo as memo, sharedConfig, untrack, mergeProps } from "solid-js";
`,"web/types/index.d.ts":`import { hydrate as hydrateCore } from "./client.js";
import { JSX, Accessor, ComponentProps, ValidComponent } from "solid-js";
export * from "./client.js";
export { For, Show, Suspense, SuspenseList, Switch, Match, Index, ErrorBoundary, mergeProps } from "solid-js";
export * from "./server-mock.js";
export declare const isServer = false;
export declare const hydrate: typeof hydrateCore;
/**
 * renders components somewhere else in the DOM
 *
 * Useful for inserting modals and tooltips outside of an cropping layout. If no mount point is given, the portal is inserted in document.body; it is wrapped in a \`<div>\` unless the target is document.head or \`isSVG\` is true. setting \`useShadow\` to true places the element in a shadow root to isolate styles.
 *
 * @description https://www.solidjs.com/docs/latest/api#%3Cportal%3E
 */
export declare function Portal<T extends boolean = false, S extends boolean = false>(props: {
    mount?: Node;
    useShadow?: T;
    isSVG?: S;
    ref?: (S extends true ? SVGGElement : HTMLDivElement) | ((el: (T extends true ? {
        readonly shadowRoot: ShadowRoot;
    } : {}) & (S extends true ? SVGGElement : HTMLDivElement)) => void);
    children: JSX.Element;
}): Text;
declare type DynamicProps<T extends ValidComponent, P = ComponentProps<T>> = {
    [K in keyof P]: P[K];
} & {
    component: T | undefined;
};
/**
 * renders an arbitrary custom or native component and passes the other props
 * \`\`\`typescript
 * <Dynamic component={multiline() ? 'textarea' : 'input'} value={value()} />
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#%3Cdynamic%3E
 */
export declare function Dynamic<T extends ValidComponent>(props: DynamicProps<T>): Accessor<JSX.Element>;
`,"web/types/jsx.d.ts":`export type { JSX } from "../../types/jsx.js";
`,"web/types/server-mock.d.ts":`export declare function renderToString<T>(fn: () => T, options?: {
    nonce?: string;
    renderId?: string;
}): string;
export declare function renderToStringAsync<T>(fn: () => T, options?: {
    timeoutMs?: number;
    nonce?: string;
    renderId?: string;
}): Promise<string>;
export declare function renderToStream<T>(fn: () => T, options?: {
    nonce?: string;
    renderId?: string;
    onCompleteShell?: (info: {
        write: (v: string) => void;
    }) => void;
    onCompleteAll?: (info: {
        write: (v: string) => void;
    }) => void;
}): {
    pipe: (writable: {
        write: (v: string) => void;
    }) => void;
    pipeTo: (writable: WritableStream) => void;
};
export declare function ssr(template: string[] | string, ...nodes: any[]): {
    t: string;
};
export declare function ssrElement(name: string, props: any, children: any, needsId: boolean): {
    t: string;
};
export declare function ssrClassList(value: {
    [k: string]: boolean;
}): string;
export declare function ssrStyle(value: {
    [k: string]: string;
}): string;
export declare function ssrAttribute(key: string, value: boolean): string;
export declare function ssrHydrationKey(): string;
export declare function resolveSSRNode(node: any): string;
export declare function escape(html: string): string;
/**
 * @deprecated Replaced by ssrElement
 */
export declare function ssrSpread(props: any, isSVG: boolean, skipChildren: boolean): void;
export declare type LegacyResults = {
    startWriting: () => void;
};
/**
 * @deprecated Replaced by renderToStream
 */
export declare function pipeToWritable<T>(fn: () => T, writable: WritableStream, options?: {
    nonce?: string;
    onReady?: (res: LegacyResults) => void;
    onCompleteAll?: () => void;
}): void;
/**
 * @deprecated Replaced by renderToStream
 */
export declare function pipeToNodeWritable<T>(fn: () => T, writable: {
    write: (v: string) => void;
}, options?: {
    nonce?: string;
    onReady?: (res: LegacyResults) => void;
    onCompleteAll?: () => void;
}): void;
`,"web/types/server.d.ts":`export function renderToString<T>(
  fn: () => T,
  options?: {
    nonce?: string;
    renderId?: string;
  }
): string;
export function renderToStringAsync<T>(
  fn: () => T,
  options?: {
    timeoutMs?: number;
    nonce?: string;
    renderId?: string;
  }
): Promise<string>;
export function renderToStream<T>(
  fn: () => T,
  options?: {
    nonce?: string;
    renderId?: string;
    onCompleteShell?: (info: { write: (v: string) => void }) => void;
    onCompleteAll?: (info: { write: (v: string) => void }) => void;
  }
): {
  pipe: (writable: { write: (v: string) => void }) => void;
  pipeTo: (writable: WritableStream) => void;
};

export function HydrationScript(props: { nonce?: string; eventNames?: string[] }): JSX.Element;
export function ssr(template: string[] | string, ...nodes: any[]): { t: string };
export function ssrElement(
  name: string,
  props: any,
  children: any,
  needsId: boolean
): { t: string };
export function ssrClassList(value: { [k: string]: boolean }): string;
export function ssrStyle(value: { [k: string]: string }): string;
export function ssrAttribute(key: string, value: any, isBoolean: boolean): string;
export function ssrHydrationKey(): string;
export function resolveSSRNode(node: any): string;
export function escape(html: string): string;
export function useAssets(fn: () => JSX.Element): void;
export function getAssets(): string;
export function getHydrationKey(): string;
export function effect<T>(fn: (prev?: T) => T, init?: T): void;
export function memo<T>(fn: () => T, equal: boolean): () => T;
export function createComponent<T>(Comp: (props: T) => JSX.Element, props: T): JSX.Element;
export function mergeProps(...sources: unknown[]): unknown;
export function getOwner(): unknown;
export function generateHydrationScript(options: { nonce?: string; eventNames?: string[] }): string;
export function stringify(root: unknown): string;

export function Hydration(props: { children?: JSX.Element }): JSX.Element;
export function NoHydration(props: { children?: JSX.Element }): JSX.Element;
export function Assets(props: { children?: JSX.Element }): JSX.Element;

// deprecated
export type LegacyResults = {
  write: (text: string) => void;
  startWriting: () => void;
};
export function pipeToWritable<T>(
  fn: () => T,
  writable: WritableStream,
  options?: {
    nonce?: string;
    onReady?: (res: LegacyResults) => void;
    onCompleteAll?: () => void;
  }
): void;
export function pipeToNodeWritable<T>(
  fn: () => T,
  writable: { write: (v: string) => void },
  options?: {
    nonce?: string;
    onReady?: (res: LegacyResults) => void;
    onCompleteAll?: () => void;
  }
): void;
`,"h/jsx-runtime/types/index.d.ts":`import h from "solid-js/h";
export type { JSX } from "./jsx";
import type { JSX } from "./jsx";
declare function Fragment(props: {
    children: JSX.Element;
}): JSX.Element;
export { h as jsx, h as jsxs, h as jsxDEV, Fragment };
`,"h/jsx-runtime/types/jsx.d.ts":`import * as csstype from 'csstype';

/**
 * Based on JSX types for Surplus and Inferno and adapted for \`dom-expressions\`.
 *
 * https://github.com/adamhaile/surplus/blob/master/index.d.ts
 * https://github.com/infernojs/inferno/blob/master/packages/inferno/src/core/types.ts
 */
type DOMElement = Element;

export namespace JSX {
  type FunctionMaybe<T = unknown> = ({ (): T }) | T;
  type Element =
    | Node
    | ArrayElement
    | FunctionElement
    | (string & {})
    | number
    | boolean
    | null
    | undefined;
  interface ArrayElement extends Array<Element> {}
  interface FunctionElement {
    (): Element;
  }
  interface ElementClass {
    // empty, libs can define requirements downstream
  }
  interface ElementAttributesProperty {
    // empty, libs can define requirements downstream
  }
  interface ElementChildrenAttribute {
    children: {};
  }
  interface EventHandler<T, E extends Event> {
    (
      e: E & {
        currentTarget: T;
        target: DOMElement;
      }
    ): void;
  }
  interface BoundEventHandler<T, E extends Event> {
    0: (
      data: any,
      e: E & {
        currentTarget: T;
        target: DOMElement;
      }
    ) => void;
    1: any;
  }
  type EventHandlerUnion<T, E extends Event> = EventHandler<T, E> | BoundEventHandler<T, E>;
  interface IntrinsicAttributes {
    ref?: unknown | ((e: unknown) => void);
  }
  interface CustomAttributes<T> {
    ref?: T | ((el: T) => void);
    classList?: {
      [k: string]: boolean | undefined;
    };
    $ServerOnly?: boolean;
  }
  type Accessor<T> = () => T
  interface Directives {}
  interface DirectiveFunctions {
    [x: string]: (el: Element, accessor: Accessor<any>) => void;
  }
  interface ExplicitProperties {}
  interface ExplicitAttributes {}
  interface CustomEvents {}
  interface CustomCaptureEvents {}
  type DirectiveAttributes = {
    [Key in keyof Directives as \`use:\${Key}\`]?: Directives[Key];
  };
  type DirectiveFunctionAttributes<T> = {
    [K in keyof DirectiveFunctions as string extends K ? never : \`use:\${K}\`]?: DirectiveFunctions[K] extends (
      el: infer E, // will be unknown if not provided
      ...rest: infer R // use rest so that we can check whether it's provided or not
    ) => void
      ? T extends E // everything extends unknown if E is unknown
        ? R extends [infer A] // check if has accessor provided
          ? A extends Accessor<infer V>
            ? V // it's an accessor
            : never // it isn't, type error
          : true // no accessor provided
        : never // T is the wrong element
      : never; // it isn't a function
  };
  type PropAttributes = {
    [Key in keyof ExplicitProperties as \`prop:\${Key}\`]?: ExplicitProperties[Key];
  };
  type AttrAttributes = {
    [Key in keyof ExplicitAttributes as \`attr:\${Key}\`]?: ExplicitAttributes[Key];
  };
  type OnAttributes<T> = {
    [Key in keyof CustomEvents as \`on:\${Key}\`]?: EventHandler<T, CustomEvents[Key]>;
  }
  type OnCaptureAttributes<T> = {
    [Key in keyof CustomCaptureEvents as \`oncapture:\${Key}\`]?: EventHandler<T, CustomCaptureEvents[Key]>;
  }
  interface DOMAttributes<T> extends CustomAttributes<T>, DirectiveAttributes, DirectiveFunctionAttributes<T>,
                                     PropAttributes, AttrAttributes, OnAttributes<T>, OnCaptureAttributes<T>,
                                     CustomEventHandlersCamelCase<T>, CustomEventHandlersLowerCase<T> {
    children?: Element;
    innerHTML?: string;
    innerText?: string | number;
    textContent?: string | number;
    // camel case events
    onCopy?: EventHandlerUnion<T, ClipboardEvent>;
    onCut?: EventHandlerUnion<T, ClipboardEvent>;
    onPaste?: EventHandlerUnion<T, ClipboardEvent>;
    onCompositionEnd?: EventHandlerUnion<T, CompositionEvent>;
    onCompositionStart?: EventHandlerUnion<T, CompositionEvent>;
    onCompositionUpdate?: EventHandlerUnion<T, CompositionEvent>;
    onFocusOut?: EventHandlerUnion<T, FocusEvent>;
    onFocusIn?: EventHandlerUnion<T, FocusEvent>;
    onEncrypted?: EventHandlerUnion<T, Event>;
    onDragExit?: EventHandlerUnion<T, DragEvent>;
    // lower case events
    oncopy?: EventHandlerUnion<T, ClipboardEvent>;
    oncut?: EventHandlerUnion<T, ClipboardEvent>;
    onpaste?: EventHandlerUnion<T, ClipboardEvent>;
    oncompositionend?: EventHandlerUnion<T, CompositionEvent>;
    oncompositionstart?: EventHandlerUnion<T, CompositionEvent>;
    oncompositionupdate?: EventHandlerUnion<T, CompositionEvent>;
    onfocusout?: EventHandlerUnion<T, FocusEvent>;
    onfocusin?: EventHandlerUnion<T, FocusEvent>;
    onencrypted?: EventHandlerUnion<T, Event>;
    ondragexit?: EventHandlerUnion<T, DragEvent>;
  }
  interface CustomEventHandlersCamelCase<T> {
    onAbort?: EventHandlerUnion<T, Event>;
    onAnimationEnd?: EventHandlerUnion<T, AnimationEvent>;
    onAnimationIteration?: EventHandlerUnion<T, AnimationEvent>;
    onAnimationStart?: EventHandlerUnion<T, AnimationEvent>;
    onAuxClick?: EventHandlerUnion<T, MouseEvent>;
    onBeforeInput?: EventHandlerUnion<T, InputEvent>;
    onBlur?: EventHandlerUnion<T, FocusEvent>;
    onCanPlay?: EventHandlerUnion<T, Event>;
    onCanPlayThrough?: EventHandlerUnion<T, Event>;
    onChange?: EventHandlerUnion<T, Event>;
    onClick?: EventHandlerUnion<T, MouseEvent>;
    onContextMenu?: EventHandlerUnion<T, MouseEvent>;
    onDblClick?: EventHandlerUnion<T, MouseEvent>;
    onDrag?: EventHandlerUnion<T, DragEvent>;
    onDragEnd?: EventHandlerUnion<T, DragEvent>;
    onDragEnter?: EventHandlerUnion<T, DragEvent>;
    onDragLeave?: EventHandlerUnion<T, DragEvent>;
    onDragOver?: EventHandlerUnion<T, DragEvent>;
    onDragStart?: EventHandlerUnion<T, DragEvent>;
    onDrop?: EventHandlerUnion<T, DragEvent>;
    onDurationChange?: EventHandlerUnion<T, Event>;
    onEmptied?: EventHandlerUnion<T, Event>;
    onEnded?: EventHandlerUnion<T, Event>;
    onError?: EventHandlerUnion<T, Event>;
    onFocus?: EventHandlerUnion<T, FocusEvent>;
    onGotPointerCapture?: EventHandlerUnion<T, PointerEvent>;
    onInput?: EventHandlerUnion<T, InputEvent>;
    onInvalid?: EventHandlerUnion<T, Event>;
    onKeyDown?: EventHandlerUnion<T, KeyboardEvent>;
    onKeyPress?: EventHandlerUnion<T, KeyboardEvent>;
    onKeyUp?: EventHandlerUnion<T, KeyboardEvent>;
    onLoad?: EventHandlerUnion<T, Event>;
    onLoadedData?: EventHandlerUnion<T, Event>;
    onLoadedMetadata?: EventHandlerUnion<T, Event>;
    onLoadStart?: EventHandlerUnion<T, Event>;
    onLostPointerCapture?: EventHandlerUnion<T, PointerEvent>;
    onMouseDown?: EventHandlerUnion<T, MouseEvent>;
    onMouseEnter?: EventHandlerUnion<T, MouseEvent>;
    onMouseLeave?: EventHandlerUnion<T, MouseEvent>;
    onMouseMove?: EventHandlerUnion<T, MouseEvent>;
    onMouseOut?: EventHandlerUnion<T, MouseEvent>;
    onMouseOver?: EventHandlerUnion<T, MouseEvent>;
    onMouseUp?: EventHandlerUnion<T, MouseEvent>;
    onPause?: EventHandlerUnion<T, Event>;
    onPlay?: EventHandlerUnion<T, Event>;
    onPlaying?: EventHandlerUnion<T, Event>;
    onPointerCancel?: EventHandlerUnion<T, PointerEvent>;
    onPointerDown?: EventHandlerUnion<T, PointerEvent>;
    onPointerEnter?: EventHandlerUnion<T, PointerEvent>;
    onPointerLeave?: EventHandlerUnion<T, PointerEvent>;
    onPointerMove?: EventHandlerUnion<T, PointerEvent>;
    onPointerOut?: EventHandlerUnion<T, PointerEvent>;
    onPointerOver?: EventHandlerUnion<T, PointerEvent>;
    onPointerUp?: EventHandlerUnion<T, PointerEvent>;
    onProgress?: EventHandlerUnion<T, Event>;
    onRateChange?: EventHandlerUnion<T, Event>;
    onReset?: EventHandlerUnion<T, Event>;
    onScroll?: EventHandlerUnion<T, UIEvent>;
    onSeeked?: EventHandlerUnion<T, Event>;
    onSeeking?: EventHandlerUnion<T, Event>;
    onSelect?: EventHandlerUnion<T, UIEvent>;
    onStalled?: EventHandlerUnion<T, Event>;
    onSubmit?: EventHandlerUnion<
      T,
      Event & {
        submitter: HTMLElement;
      }
    >;
    onSuspend?: EventHandlerUnion<T, Event>;
    onTimeUpdate?: EventHandlerUnion<T, Event>;
    onTouchCancel?: EventHandlerUnion<T, TouchEvent>;
    onTouchEnd?: EventHandlerUnion<T, TouchEvent>;
    onTouchMove?: EventHandlerUnion<T, TouchEvent>;
    onTouchStart?: EventHandlerUnion<T, TouchEvent>;
    onTransitionEnd?: EventHandlerUnion<T, TransitionEvent>;
    onVolumeChange?: EventHandlerUnion<T, Event>;
    onWaiting?: EventHandlerUnion<T, Event>;
    onWheel?: EventHandlerUnion<T, WheelEvent>;
  }
  /**
   * @type {GlobalEventHandlers}
   */
  interface CustomEventHandlersLowerCase<T> {
    onabort?: EventHandlerUnion<T, Event>;
    onanimationend?: EventHandlerUnion<T, AnimationEvent>;
    onanimationiteration?: EventHandlerUnion<T, AnimationEvent>;
    onanimationstart?: EventHandlerUnion<T, AnimationEvent>;
    onauxclick?: EventHandlerUnion<T, MouseEvent>;
    onbeforeinput?: EventHandlerUnion<T, InputEvent>;
    onblur?: EventHandlerUnion<T, FocusEvent>;
    oncanplay?: EventHandlerUnion<T, Event>;
    oncanplaythrough?: EventHandlerUnion<T, Event>;
    onchange?: EventHandlerUnion<T, Event>;
    onclick?: EventHandlerUnion<T, MouseEvent>;
    oncontextmenu?: EventHandlerUnion<T, MouseEvent>;
    ondblclick?: EventHandlerUnion<T, MouseEvent>;
    ondrag?: EventHandlerUnion<T, DragEvent>;
    ondragend?: EventHandlerUnion<T, DragEvent>;
    ondragenter?: EventHandlerUnion<T, DragEvent>;
    ondragleave?: EventHandlerUnion<T, DragEvent>;
    ondragover?: EventHandlerUnion<T, DragEvent>;
    ondragstart?: EventHandlerUnion<T, DragEvent>;
    ondrop?: EventHandlerUnion<T, DragEvent>;
    ondurationchange?: EventHandlerUnion<T, Event>;
    onemptied?: EventHandlerUnion<T, Event>;
    onended?: EventHandlerUnion<T, Event>;
    onerror?: EventHandlerUnion<T, Event>;
    onfocus?: EventHandlerUnion<T, FocusEvent>;
    ongotpointercapture?: EventHandlerUnion<T, PointerEvent>;
    oninput?: EventHandlerUnion<T, InputEvent>;
    oninvalid?: EventHandlerUnion<T, Event>;
    onkeydown?: EventHandlerUnion<T, KeyboardEvent>;
    onkeypress?: EventHandlerUnion<T, KeyboardEvent>;
    onkeyup?: EventHandlerUnion<T, KeyboardEvent>;
    onload?: EventHandlerUnion<T, Event>;
    onloadeddata?: EventHandlerUnion<T, Event>;
    onloadedmetadata?: EventHandlerUnion<T, Event>;
    onloadstart?: EventHandlerUnion<T, Event>;
    onlostpointercapture?: EventHandlerUnion<T, PointerEvent>;
    onmousedown?: EventHandlerUnion<T, MouseEvent>;
    onmouseenter?: EventHandlerUnion<T, MouseEvent>;
    onmouseleave?: EventHandlerUnion<T, MouseEvent>;
    onmousemove?: EventHandlerUnion<T, MouseEvent>;
    onmouseout?: EventHandlerUnion<T, MouseEvent>;
    onmouseover?: EventHandlerUnion<T, MouseEvent>;
    onmouseup?: EventHandlerUnion<T, MouseEvent>;
    onpause?: EventHandlerUnion<T, Event>;
    onplay?: EventHandlerUnion<T, Event>;
    onplaying?: EventHandlerUnion<T, Event>;
    onpointercancel?: EventHandlerUnion<T, PointerEvent>;
    onpointerdown?: EventHandlerUnion<T, PointerEvent>;
    onpointerenter?: EventHandlerUnion<T, PointerEvent>;
    onpointerleave?: EventHandlerUnion<T, PointerEvent>;
    onpointermove?: EventHandlerUnion<T, PointerEvent>;
    onpointerout?: EventHandlerUnion<T, PointerEvent>;
    onpointerover?: EventHandlerUnion<T, PointerEvent>;
    onpointerup?: EventHandlerUnion<T, PointerEvent>;
    onprogress?: EventHandlerUnion<T, Event>;
    onratechange?: EventHandlerUnion<T, Event>;
    onreset?: EventHandlerUnion<T, Event>;
    onscroll?: EventHandlerUnion<T, UIEvent>;
    onseeked?: EventHandlerUnion<T, Event>;
    onseeking?: EventHandlerUnion<T, Event>;
    onselect?: EventHandlerUnion<T, UIEvent>;
    onstalled?: EventHandlerUnion<T, Event>;
    onsubmit?: EventHandlerUnion<
      T,
      Event & {
        submitter: HTMLElement;
      }
    >;
    onsuspend?: EventHandlerUnion<T, Event>;
    ontimeupdate?: EventHandlerUnion<T, Event>;
    ontouchcancel?: EventHandlerUnion<T, TouchEvent>;
    ontouchend?: EventHandlerUnion<T, TouchEvent>;
    ontouchmove?: EventHandlerUnion<T, TouchEvent>;
    ontouchstart?: EventHandlerUnion<T, TouchEvent>;
    ontransitionend?: EventHandlerUnion<T, TransitionEvent>;
    onvolumechange?: EventHandlerUnion<T, Event>;
    onwaiting?: EventHandlerUnion<T, Event>;
    onwheel?: EventHandlerUnion<T, WheelEvent>;
  }

  interface CSSProperties extends csstype.PropertiesHyphen {
    // Override
    [key: \`-\${string}\`]: string | number | undefined
  }

  type HTMLAutocapitalize = "off" | "none" | "on" | "sentences" | "words" | "characters";
  type HTMLDir = "ltr" | "rtl" | "auto";
  type HTMLFormEncType = "application/x-www-form-urlencoded" | "multipart/form-data" | "text/plain";
  type HTMLFormMethod = "post" | "get" | "dialog";
  type HTMLCrossorigin = "anonymous" | "use-credentials" | "";
  type HTMLReferrerPolicy =
    | "no-referrer"
    | "no-referrer-when-downgrade"
    | "origin"
    | "origin-when-cross-origin"
    | "same-origin"
    | "strict-origin"
    | "strict-origin-when-cross-origin"
    | "unsafe-url";
  type HTMLIframeSandbox =
    | "allow-downloads-without-user-activation"
    | "allow-downloads"
    | "allow-forms"
    | "allow-modals"
    | "allow-orientation-lock"
    | "allow-pointer-lock"
    | "allow-popups"
    | "allow-popups-to-escape-sandbox"
    | "allow-presentation"
    | "allow-same-origin"
    | "allow-scripts"
    | "allow-storage-access-by-user-activation"
    | "allow-top-navigation"
    | "allow-top-navigation-by-user-activation";
  type HTMLLinkAs =
    | "audio"
    | "document"
    | "embed"
    | "fetch"
    | "font"
    | "image"
    | "object"
    | "script"
    | "style"
    | "track"
    | "video"
    | "worker";

  // All the WAI-ARIA 1.1 attributes from https://www.w3.org/TR/wai-aria-1.1/
  interface AriaAttributes {
    /** Identifies the currently active element when DOM focus is on a composite widget, textbox, group, or application. */
    "aria-activedescendant"?: string;
    /** Indicates whether assistive technologies will present all, or only parts of, the changed region based on the change notifications defined by the aria-relevant attribute. */
    "aria-atomic"?: boolean | "false" | "true";
    /**
     * Indicates whether inputting text could trigger display of one or more predictions of the user's intended value for an input and specifies how predictions would be
     * presented if they are made.
     */
    "aria-autocomplete"?: "none" | "inline" | "list" | "both";
    /** Indicates an element is being modified and that assistive technologies MAY want to wait until the modifications are complete before exposing them to the user. */
    "aria-busy"?: boolean | "false" | "true";
    /**
     * Indicates the current "checked" state of checkboxes, radio buttons, and other widgets.
     * @see aria-pressed @see aria-selected.
     */
    "aria-checked"?: boolean | "false" | "mixed" | "true";
    /**
     * Defines the total number of columns in a table, grid, or treegrid.
     * @see aria-colindex.
     */
    "aria-colcount"?: number | string;
    /**
     * Defines an element's column index or position with respect to the total number of columns within a table, grid, or treegrid.
     * @see aria-colcount @see aria-colspan.
     */
    "aria-colindex"?: number | string;
    /**
     * Defines the number of columns spanned by a cell or gridcell within a table, grid, or treegrid.
     * @see aria-colindex @see aria-rowspan.
     */
    "aria-colspan"?: number | string;
    /**
     * Identifies the element (or elements) whose contents or presence are controlled by the current element.
     * @see aria-owns.
     */
    "aria-controls"?: string;
    /** Indicates the element that represents the current item within a container or set of related elements. */
    "aria-current"?: boolean | "false" | "true" | "page" | "step" | "location" | "date" | "time";
    /**
     * Identifies the element (or elements) that describes the object.
     * @see aria-labelledby
     */
    "aria-describedby"?: string;
    /**
     * Identifies the element that provides a detailed, extended description for the object.
     * @see aria-describedby.
     */
    "aria-details"?: string;
    /**
     * Indicates that the element is perceivable but disabled, so it is not editable or otherwise operable.
     * @see aria-hidden @see aria-readonly.
     */
    "aria-disabled"?: boolean | "false" | "true";
    /**
     * Indicates what functions can be performed when a dragged object is released on the drop target.
     * @deprecated in ARIA 1.1
     */
    "aria-dropeffect"?: "none" | "copy" | "execute" | "link" | "move" | "popup";
    /**
     * Identifies the element that provides an error message for the object.
     * @see aria-invalid @see aria-describedby.
     */
    "aria-errormessage"?: string;
    /** Indicates whether the element, or another grouping element it controls, is currently expanded or collapsed. */
    "aria-expanded"?: boolean | "false" | "true";
    /**
     * Identifies the next element (or elements) in an alternate reading order of content which, at the user's discretion,
     * allows assistive technology to override the general default of reading in document source order.
     */
    "aria-flowto"?: string;
    /**
     * Indicates an element's "grabbed" state in a drag-and-drop operation.
     * @deprecated in ARIA 1.1
     */
    "aria-grabbed"?: boolean | "false" | "true";
    /** Indicates the availability and type of interactive popup element, such as menu or dialog, that can be triggered by an element. */
    "aria-haspopup"?: boolean | "false" | "true" | "menu" | "listbox" | "tree" | "grid" | "dialog";
    /**
     * Indicates whether the element is exposed to an accessibility API.
     * @see aria-disabled.
     */
    "aria-hidden"?: boolean | "false" | "true";
    /**
     * Indicates the entered value does not conform to the format expected by the application.
     * @see aria-errormessage.
     */
    "aria-invalid"?: boolean | "false" | "true" | "grammar" | "spelling";
    /** Indicates keyboard shortcuts that an author has implemented to activate or give focus to an element. */
    "aria-keyshortcuts"?: string;
    /**
     * Defines a string value that labels the current element.
     * @see aria-labelledby.
     */
    "aria-label"?: string;
    /**
     * Identifies the element (or elements) that labels the current element.
     * @see aria-describedby.
     */
    "aria-labelledby"?: string;
    /** Defines the hierarchical level of an element within a structure. */
    "aria-level"?: number | string;
    /** Indicates that an element will be updated, and describes the types of updates the user agents, assistive technologies, and user can expect from the live region. */
    "aria-live"?: "off" | "assertive" | "polite";
    /** Indicates whether an element is modal when displayed. */
    "aria-modal"?: boolean | "false" | "true";
    /** Indicates whether a text box accepts multiple lines of input or only a single line. */
    "aria-multiline"?: boolean | "false" | "true";
    /** Indicates that the user may select more than one item from the current selectable descendants. */
    "aria-multiselectable"?: boolean | "false" | "true";
    /** Indicates whether the element's orientation is horizontal, vertical, or unknown/ambiguous. */
    "aria-orientation"?: "horizontal" | "vertical";
    /**
     * Identifies an element (or elements) in order to define a visual, functional, or contextual parent/child relationship
     * between DOM elements where the DOM hierarchy cannot be used to represent the relationship.
     * @see aria-controls.
     */
    "aria-owns"?: string;
    /**
     * Defines a short hint (a word or short phrase) intended to aid the user with data entry when the control has no value.
     * A hint could be a sample value or a brief description of the expected format.
     */
    "aria-placeholder"?: string;
    /**
     * Defines an element's number or position in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM.
     * @see aria-setsize.
     */
    "aria-posinset"?: number | string;
    /**
     * Indicates the current "pressed" state of toggle buttons.
     * @see aria-checked @see aria-selected.
     */
    "aria-pressed"?: boolean | "false" | "mixed" | "true";
    /**
     * Indicates that the element is not editable, but is otherwise operable.
     * @see aria-disabled.
     */
    "aria-readonly"?: boolean | "false" | "true";
    /**
     * Indicates what notifications the user agent will trigger when the accessibility tree within a live region is modified.
     * @see aria-atomic.
     */
    "aria-relevant"?:
      | "additions"
      | "additions removals"
      | "additions text"
      | "all"
      | "removals"
      | "removals additions"
      | "removals text"
      | "text"
      | "text additions"
      | "text removals";
    /** Indicates that user input is required on the element before a form may be submitted. */
    "aria-required"?: boolean | "false" | "true";
    /** Defines a human-readable, author-localized description for the role of an element. */
    "aria-roledescription"?: string;
    /**
     * Defines the total number of rows in a table, grid, or treegrid.
     * @see aria-rowindex.
     */
    "aria-rowcount"?: number | string;
    /**
     * Defines an element's row index or position with respect to the total number of rows within a table, grid, or treegrid.
     * @see aria-rowcount @see aria-rowspan.
     */
    "aria-rowindex"?: number | string;
    /**
     * Defines the number of rows spanned by a cell or gridcell within a table, grid, or treegrid.
     * @see aria-rowindex @see aria-colspan.
     */
    "aria-rowspan"?: number | string;
    /**
     * Indicates the current "selected" state of various widgets.
     * @see aria-checked @see aria-pressed.
     */
    "aria-selected"?: boolean | "false" | "true";
    /**
     * Defines the number of items in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM.
     * @see aria-posinset.
     */
    "aria-setsize"?: number | string;
    /** Indicates if items in a table or grid are sorted in ascending or descending order. */
    "aria-sort"?: "none" | "ascending" | "descending" | "other";
    /** Defines the maximum allowed value for a range widget. */
    "aria-valuemax"?: number | string;
    /** Defines the minimum allowed value for a range widget. */
    "aria-valuemin"?: number | string;
    /**
     * Defines the current value for a range widget.
     * @see aria-valuetext.
     */
    "aria-valuenow"?: number | string;
    /** Defines the human readable text alternative of aria-valuenow for a range widget. */
    "aria-valuetext"?: string;
    role?: FunctionMaybe<
    | "alert"
    | "alertdialog"
    | "application"
    | "article"
    | "banner"
    | "button"
    | "cell"
    | "checkbox"
    | "columnheader"
    | "combobox"
    | "complementary"
    | "contentinfo"
    | "definition"
    | "dialog"
    | "directory"
    | "document"
    | "feed"
    | "figure"
    | "form"
    | "grid"
    | "gridcell"
    | "group"
    | "heading"
    | "img"
    | "link"
    | "list"
    | "listbox"
    | "listitem"
    | "log"
    | "main"
    | "marquee"
    | "math"
    | "menu"
    | "menubar"
    | "menuitem"
    | "menuitemcheckbox"
    | "menuitemradio"
    | "meter"
    | "navigation"
    | "none"
    | "note"
    | "option"
    | "presentation"
    | "progressbar"
    | "radio"
    | "radiogroup"
    | "region"
    | "row"
    | "rowgroup"
    | "rowheader"
    | "scrollbar"
    | "search"
    | "searchbox"
    | "separator"
    | "slider"
    | "spinbutton"
    | "status"
    | "switch"
    | "tab"
    | "table"
    | "tablist"
    | "tabpanel"
    | "term"
    | "textbox"
    | "timer"
    | "toolbar"
    | "tooltip"
    | "tree"
    | "treegrid"
    | "treeitem">;
  }

  interface HTMLAttributes<T> extends AriaAttributes, DOMAttributes<T> {
    accessKey?: FunctionMaybe<string>;
    class?: FunctionMaybe<string> | undefined;
    contenteditable?: FunctionMaybe<boolean | "inherit">;
    contextmenu?: FunctionMaybe<string>;
    dir?: FunctionMaybe<HTMLDir>;
    draggable?: FunctionMaybe<boolean>;
    hidden?: FunctionMaybe<boolean>;
    id?: FunctionMaybe<string>;
    lang?: FunctionMaybe<string>;
    spellcheck?: FunctionMaybe<boolean>;
    style?: FunctionMaybe<CSSProperties | string>;
    tabindex?: FunctionMaybe<number | string>;
    title?: FunctionMaybe<string>;
    translate?: FunctionMaybe<"yes" | "no">;
    about?: FunctionMaybe<string>;
    datatype?: FunctionMaybe<string>;
    inlist?: FunctionMaybe<any>;
    prefix?: FunctionMaybe<string>;
    property?: FunctionMaybe<string>;
    resource?: FunctionMaybe<string>;
    typeof?: FunctionMaybe<string>;
    vocab?: FunctionMaybe<string>;
    autocapitalize?: FunctionMaybe<HTMLAutocapitalize>;
    slot?: FunctionMaybe<string>;
    color?: FunctionMaybe<string>;
    itemprop?: FunctionMaybe<string>;
    itemscope?: FunctionMaybe<boolean>;
    itemtype?: FunctionMaybe<string>;
    itemid?: FunctionMaybe<string>;
    itemref?: FunctionMaybe<string>;
    part?: FunctionMaybe<string>;
    exportparts?: FunctionMaybe<string>;
    inputmode?: FunctionMaybe<"none" | "text" | "tel" | "url" | "email" | "numeric" | "decimal" | "search">;
    contentEditable?: FunctionMaybe<boolean | "inherit">;
    contextMenu?: FunctionMaybe<string>;
    tabIndex?: FunctionMaybe<number | string>;
    autoCapitalize?: FunctionMaybe<HTMLAutocapitalize>;
    itemProp?: FunctionMaybe<string>;
    itemScope?: FunctionMaybe<boolean>;
    itemType?: FunctionMaybe<string>;
    itemId?: FunctionMaybe<string>;
    itemRef?: FunctionMaybe<string>;
    exportParts?: FunctionMaybe<string>;
    inputMode?: FunctionMaybe<"none" | "text" | "tel" | "url" | "email" | "numeric" | "decimal" | "search">;
  }
  interface AnchorHTMLAttributes<T> extends HTMLAttributes<T> {
    download?: FunctionMaybe<any>;
    href?: FunctionMaybe<string>;
    hreflang?: FunctionMaybe<string>;
    media?: FunctionMaybe<string>;
    ping?: FunctionMaybe<string>;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    rel?: FunctionMaybe<string>;
    target?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
  }
  interface AudioHTMLAttributes<T> extends MediaHTMLAttributes<T> {}
  interface AreaHTMLAttributes<T> extends HTMLAttributes<T> {
    alt?: FunctionMaybe<string>;
    coords?: FunctionMaybe<string>;
    download?: FunctionMaybe<any>;
    href?: FunctionMaybe<string>;
    hreflang?: FunctionMaybe<string>;
    ping?: FunctionMaybe<string>;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    rel?: FunctionMaybe<string>;
    shape?: FunctionMaybe<"rect" | "circle" | "poly" | "default">;
    target?: FunctionMaybe<string>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
  }
  interface BaseHTMLAttributes<T> extends HTMLAttributes<T> {
    href?: FunctionMaybe<string>;
    target?: FunctionMaybe<string>;
  }
  interface BlockquoteHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: FunctionMaybe<string>;
  }
  interface ButtonHTMLAttributes<T> extends HTMLAttributes<T> {
    autofocus?: FunctionMaybe<boolean>;
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    formaction?: FunctionMaybe<string>;
    formenctype?: FunctionMaybe<HTMLFormEncType>;
    formmethod?: FunctionMaybe<HTMLFormMethod>;
    formnovalidate?: FunctionMaybe<boolean>;
    formtarget?: FunctionMaybe<string>;
    name?: FunctionMaybe<string>;
    type?: FunctionMaybe<"submit" | "reset" | "button">;
    value?: FunctionMaybe<string>;
    formAction?: FunctionMaybe<string>;
    formEnctype?: FunctionMaybe<HTMLFormEncType>;
    formMethod?: FunctionMaybe<HTMLFormMethod>;
    formNoValidate?: FunctionMaybe<boolean>;
    formTarget?: FunctionMaybe<string>;
  }
  interface CanvasHTMLAttributes<T> extends HTMLAttributes<T> {
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
  }
  interface ColHTMLAttributes<T> extends HTMLAttributes<T> {
    span?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
  }
  interface ColgroupHTMLAttributes<T> extends HTMLAttributes<T> {
    span?: FunctionMaybe<number | string>;
  }
  interface DataHTMLAttributes<T> extends HTMLAttributes<T> {
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface DetailsHtmlAttributes<T> extends HTMLAttributes<T> {
    open?: FunctionMaybe<boolean>;
    onToggle?: EventHandlerUnion<T, Event>;
    ontoggle?: EventHandlerUnion<T, Event>;
  }
  interface DialogHtmlAttributes<T> extends HTMLAttributes<T> {
    open?: FunctionMaybe<boolean>;
  }
  interface EmbedHTMLAttributes<T> extends HTMLAttributes<T> {
    height?: FunctionMaybe<number | string>;
    src?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
    width?: FunctionMaybe<number | string>;
  }
  interface FieldsetHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    name?: FunctionMaybe<string>;
  }
  interface FormHTMLAttributes<T> extends HTMLAttributes<T> {
    acceptcharset?: FunctionMaybe<string>;
    action?: FunctionMaybe<string>;
    autocomplete?: FunctionMaybe<string>;
    encoding?: FunctionMaybe<HTMLFormEncType>;
    enctype?: FunctionMaybe<HTMLFormEncType>;
    method?: FunctionMaybe<HTMLFormMethod>;
    name?: FunctionMaybe<string>;
    novalidate?: FunctionMaybe<boolean>;
    target?: FunctionMaybe<string>;
    acceptCharset?: FunctionMaybe<string>;
    noValidate?: FunctionMaybe<boolean>;
  }
  interface IframeHTMLAttributes<T> extends HTMLAttributes<T> {
    allow?: FunctionMaybe<string>;
    allowfullscreen?: FunctionMaybe<boolean>;
    height?: FunctionMaybe<number | string>;
    name?: FunctionMaybe<string>;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    sandbox?: HTMLIframeSandbox | string;
    src?: FunctionMaybe<string>;
    srcdoc?: FunctionMaybe<string>;
    width?: FunctionMaybe<number | string>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
  }
  interface ImgHTMLAttributes<T> extends HTMLAttributes<T> {
    alt?: FunctionMaybe<string>;
    crossorigin?: FunctionMaybe<HTMLCrossorigin>;
    decoding?: FunctionMaybe<"sync" | "async" | "auto">;
    height?: FunctionMaybe<number | string>;
    ismap?: FunctionMaybe<boolean>;
    isMap?: FunctionMaybe<boolean>;
    loading?: FunctionMaybe<"eager" | "lazy">;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    sizes?: FunctionMaybe<string>;
    src?: FunctionMaybe<string>;
    srcset?: FunctionMaybe<string>;
    srcSet?: FunctionMaybe<string>;
    usemap?: FunctionMaybe<string>;
    useMap?: FunctionMaybe<string>;
    width?: FunctionMaybe<number | string>;
    crossOrigin?: FunctionMaybe<HTMLCrossorigin>;
  }
  interface InputHTMLAttributes<T> extends HTMLAttributes<T> {
    accept?: FunctionMaybe<string>;
    alt?: FunctionMaybe<string>;
    autocomplete?: FunctionMaybe<string>;
    autofocus?: FunctionMaybe<boolean>;
    capture?: FunctionMaybe<boolean | string>;
    checked?: FunctionMaybe<boolean>;
    crossorigin?: FunctionMaybe<HTMLCrossorigin>;
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    formaction?: FunctionMaybe<string>;
    formenctype?: FunctionMaybe<HTMLFormEncType>;
    formmethod?: FunctionMaybe<HTMLFormMethod>;
    formnovalidate?: FunctionMaybe<boolean>;
    formtarget?: FunctionMaybe<string>;
    height?: FunctionMaybe<number | string>;
    list?: FunctionMaybe<string>;
    max?: FunctionMaybe<number | string>;
    maxlength?: FunctionMaybe<number | string>;
    min?: FunctionMaybe<number | string>;
    minlength?: FunctionMaybe<number | string>;
    multiple?: FunctionMaybe<boolean>;
    name?: FunctionMaybe<string>;
    pattern?: FunctionMaybe<string>;
    placeholder?: FunctionMaybe<string>;
    readonly?: FunctionMaybe<boolean>;
    required?: FunctionMaybe<boolean>;
    size?: FunctionMaybe<number | string>;
    src?: FunctionMaybe<string>;
    step?: FunctionMaybe<number | string>;
    type?: FunctionMaybe<string>;
    value?: FunctionMaybe<string | string[] | number>;
    width?: FunctionMaybe<number | string>;
    crossOrigin?: FunctionMaybe<HTMLCrossorigin>;
    formAction?: FunctionMaybe<string>;
    formEnctype?: FunctionMaybe<HTMLFormEncType>;
    formMethod?: FunctionMaybe<HTMLFormMethod>;
    formNoValidate?: FunctionMaybe<boolean>;
    formTarget?: FunctionMaybe<string>;
    maxLength?: FunctionMaybe<number | string>;
    minLength?: FunctionMaybe<number | string>;
    readOnly?: FunctionMaybe<boolean>;
  }
  interface InsHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: FunctionMaybe<string>;
    dateTime?: FunctionMaybe<string>;
  }
  interface KeygenHTMLAttributes<T> extends HTMLAttributes<T> {
    autofocus?: FunctionMaybe<boolean>;
    challenge?: FunctionMaybe<string>;
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    keytype?: FunctionMaybe<string>;
    keyparams?: FunctionMaybe<string>;
    name?: FunctionMaybe<string>;
  }
  interface LabelHTMLAttributes<T> extends HTMLAttributes<T> {
    for?: FunctionMaybe<string>;
    form?: FunctionMaybe<string>;
  }
  interface LiHTMLAttributes<T> extends HTMLAttributes<T> {
    value?: FunctionMaybe<number | string>;
  }
  interface LinkHTMLAttributes<T> extends HTMLAttributes<T> {
    as?: FunctionMaybe<HTMLLinkAs>;
    crossorigin?: FunctionMaybe<HTMLCrossorigin>;
    disabled?: FunctionMaybe<boolean>;
    href?: FunctionMaybe<string>;
    hreflang?: FunctionMaybe<string>;
    integrity?: FunctionMaybe<string>;
    media?: FunctionMaybe<string>;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    rel?: FunctionMaybe<string>;
    sizes?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
    crossOrigin?: FunctionMaybe<HTMLCrossorigin>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
  }
  interface MapHTMLAttributes<T> extends HTMLAttributes<T> {
    name?: FunctionMaybe<string>;
  }
  interface MediaHTMLAttributes<T> extends HTMLAttributes<T> {
    autoplay?: FunctionMaybe<boolean>;
    controls?: FunctionMaybe<boolean>;
    crossorigin?: FunctionMaybe<HTMLCrossorigin>;
    loop?: FunctionMaybe<boolean>;
    mediagroup?: FunctionMaybe<string>;
    muted?: FunctionMaybe<boolean>;
    preload?: FunctionMaybe<"none" | "metadata" | "auto" | "">;
    src?: FunctionMaybe<string>;
    crossOrigin?: FunctionMaybe<HTMLCrossorigin>;
    mediaGroup?: FunctionMaybe<string>;
  }
  interface MenuHTMLAttributes<T> extends HTMLAttributes<T> {
    label?: FunctionMaybe<string>;
    type?: FunctionMaybe<"context" | "toolbar">;
  }
  interface MetaHTMLAttributes<T> extends HTMLAttributes<T> {
    charset?: FunctionMaybe<string>;
    content?: FunctionMaybe<string>;
    httpequiv?: FunctionMaybe<string>;
    name?: FunctionMaybe<string>;
    httpEquiv?: FunctionMaybe<string>;
  }
  interface MeterHTMLAttributes<T> extends HTMLAttributes<T> {
    form?: FunctionMaybe<string>;
    high?: FunctionMaybe<number | string>;
    low?: FunctionMaybe<number | string>;
    max?: FunctionMaybe<number | string>;
    min?: FunctionMaybe<number | string>;
    optimum?: FunctionMaybe<number | string>;
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface QuoteHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: FunctionMaybe<string>;
  }
  interface ObjectHTMLAttributes<T> extends HTMLAttributes<T> {
    data?: FunctionMaybe<string>;
    form?: FunctionMaybe<string>;
    height?: FunctionMaybe<number | string>;
    name?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
    usemap?: FunctionMaybe<string>;
    width?: FunctionMaybe<number | string>;
    useMap?: FunctionMaybe<string>;
  }
  interface OlHTMLAttributes<T> extends HTMLAttributes<T> {
    reversed?: FunctionMaybe<boolean>;
    start?: FunctionMaybe<number | string>;
    type?: FunctionMaybe<"1" | "a" | "A" | "i" | "I">;
  }
  interface OptgroupHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: FunctionMaybe<boolean>;
    label?: FunctionMaybe<string>;
  }
  interface OptionHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: FunctionMaybe<boolean>;
    label?: FunctionMaybe<string>;
    selected?: FunctionMaybe<boolean>;
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface OutputHTMLAttributes<T> extends HTMLAttributes<T> {
    form?: FunctionMaybe<string>;
    for?: FunctionMaybe<string>;
    name?: FunctionMaybe<string>;
  }
  interface ParamHTMLAttributes<T> extends HTMLAttributes<T> {
    name?: FunctionMaybe<string>;
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface ProgressHTMLAttributes<T> extends HTMLAttributes<T> {
    max?: FunctionMaybe<number | string>;
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface ScriptHTMLAttributes<T> extends HTMLAttributes<T> {
    async?: FunctionMaybe<boolean>;
    charset?: FunctionMaybe<string>;
    crossorigin?: FunctionMaybe<HTMLCrossorigin>;
    defer?: FunctionMaybe<boolean>;
    integrity?: FunctionMaybe<string>;
    nomodule?: FunctionMaybe<boolean>;
    nonce?: FunctionMaybe<string>;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    src?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
    crossOrigin?: FunctionMaybe<HTMLCrossorigin>;
    noModule?: FunctionMaybe<boolean>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
  }
  interface SelectHTMLAttributes<T> extends HTMLAttributes<T> {
    autocomplete?: FunctionMaybe<string>;
    autofocus?: FunctionMaybe<boolean>;
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    multiple?: FunctionMaybe<boolean>;
    name?: FunctionMaybe<string>;
    required?: FunctionMaybe<boolean>;
    size?: FunctionMaybe<number | string>;
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface HTMLSlotElementAttributes<T = HTMLSlotElement> extends HTMLAttributes<T> {
    name?: FunctionMaybe<string>;
  }
  interface SourceHTMLAttributes<T> extends HTMLAttributes<T> {
    media?: FunctionMaybe<string>;
    sizes?: FunctionMaybe<string>;
    src?: FunctionMaybe<string>;
    srcset?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
  }
  interface StyleHTMLAttributes<T> extends HTMLAttributes<T> {
    media?: FunctionMaybe<string>;
    nonce?: FunctionMaybe<string>;
    scoped?: FunctionMaybe<boolean>;
    type?: FunctionMaybe<string>;
  }
  interface TdHTMLAttributes<T> extends HTMLAttributes<T> {
    colspan?: FunctionMaybe<number | string>;
    headers?: FunctionMaybe<string>;
    rowspan?: FunctionMaybe<number | string>;
    colSpan?: FunctionMaybe<number | string>;
    rowSpan?: FunctionMaybe<number | string>;
  }
  interface TemplateHTMLAttributes<T extends HTMLTemplateElement> extends HTMLAttributes<T> {
    content?: FunctionMaybe<DocumentFragment>;
  }
  interface TextareaHTMLAttributes<T> extends HTMLAttributes<T> {
    autocomplete?: FunctionMaybe<string>;
    autofocus?: FunctionMaybe<boolean>;
    cols?: FunctionMaybe<number | string>;
    dirname?: FunctionMaybe<string>;
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    maxlength?: FunctionMaybe<number | string>;
    minlength?: FunctionMaybe<number | string>;
    name?: FunctionMaybe<string>;
    placeholder?: FunctionMaybe<string>;
    readonly?: FunctionMaybe<boolean>;
    required?: FunctionMaybe<boolean>;
    rows?: FunctionMaybe<number | string>;
    value?: FunctionMaybe<string | string[] | number>;
    wrap?: FunctionMaybe<"hard" | "soft" | "off">;
    maxLength?: FunctionMaybe<number | string>;
    minLength?: FunctionMaybe<number | string>;
    readOnly?: FunctionMaybe<boolean>;
  }
  interface ThHTMLAttributes<T> extends HTMLAttributes<T> {
    colspan?: FunctionMaybe<number | string>;
    headers?: FunctionMaybe<string>;
    rowspan?: FunctionMaybe<number | string>;
    colSpan?: FunctionMaybe<number | string>;
    rowSpan?: FunctionMaybe<number | string>;
    scope?: FunctionMaybe<'col' | 'row' | 'rowgroup' | 'colgroup'>;
  }
  interface TimeHTMLAttributes<T> extends HTMLAttributes<T> {
    datetime?: FunctionMaybe<string>;
    dateTime?: FunctionMaybe<string>;
  }
  interface TrackHTMLAttributes<T> extends HTMLAttributes<T> {
    default?: FunctionMaybe<boolean>;
    kind?: FunctionMaybe<"subtitles" | "captions" | "descriptions" | "chapters" | "metadata">;
    label?: FunctionMaybe<string>;
    src?: FunctionMaybe<string>;
    srclang?: FunctionMaybe<string>;
  }
  interface VideoHTMLAttributes<T> extends MediaHTMLAttributes<T> {
    height?: FunctionMaybe<number | string>;
    playsinline?: FunctionMaybe<boolean>;
    poster?: FunctionMaybe<string>;
    width?: FunctionMaybe<number | string>;
  }
  type SVGPreserveAspectRatio =
    | "none"
    | "xMinYMin"
    | "xMidYMin"
    | "xMaxYMin"
    | "xMinYMid"
    | "xMidYMid"
    | "xMaxYMid"
    | "xMinYMax"
    | "xMidYMax"
    | "xMaxYMax"
    | "xMinYMin meet"
    | "xMidYMin meet"
    | "xMaxYMin meet"
    | "xMinYMid meet"
    | "xMidYMid meet"
    | "xMaxYMid meet"
    | "xMinYMax meet"
    | "xMidYMax meet"
    | "xMaxYMax meet"
    | "xMinYMin slice"
    | "xMidYMin slice"
    | "xMaxYMin slice"
    | "xMinYMid slice"
    | "xMidYMid slice"
    | "xMaxYMid slice"
    | "xMinYMax slice"
    | "xMidYMax slice"
    | "xMaxYMax slice";
  type ImagePreserveAspectRatio =
    | SVGPreserveAspectRatio
    | "defer none"
    | "defer xMinYMin"
    | "defer xMidYMin"
    | "defer xMaxYMin"
    | "defer xMinYMid"
    | "defer xMidYMid"
    | "defer xMaxYMid"
    | "defer xMinYMax"
    | "defer xMidYMax"
    | "defer xMaxYMax"
    | "defer xMinYMin meet"
    | "defer xMidYMin meet"
    | "defer xMaxYMin meet"
    | "defer xMinYMid meet"
    | "defer xMidYMid meet"
    | "defer xMaxYMid meet"
    | "defer xMinYMax meet"
    | "defer xMidYMax meet"
    | "defer xMaxYMax meet"
    | "defer xMinYMin slice"
    | "defer xMidYMin slice"
    | "defer xMaxYMin slice"
    | "defer xMinYMid slice"
    | "defer xMidYMid slice"
    | "defer xMaxYMid slice"
    | "defer xMinYMax slice"
    | "defer xMidYMax slice"
    | "defer xMaxYMax slice";
  type SVGUnits = "userSpaceOnUse" | "objectBoundingBox";
  interface CoreSVGAttributes<T> extends AriaAttributes, DOMAttributes<T> {
    id?: FunctionMaybe<string>;
    lang?: FunctionMaybe<string>;
    tabIndex?: FunctionMaybe<number | string>;
    tabindex?: FunctionMaybe<number | string>;
  }
  interface StylableSVGAttributes {
    class?: FunctionMaybe<string> | undefined;
    style?: FunctionMaybe<CSSProperties | string>;
  }
  interface TransformableSVGAttributes {
    transform?: FunctionMaybe<string>;
  }
  interface ConditionalProcessingSVGAttributes {
    requiredExtensions?: FunctionMaybe<string>;
    requiredFeatures?: FunctionMaybe<string>;
    systemLanguage?: FunctionMaybe<string>;
  }
  interface ExternalResourceSVGAttributes {
    externalResourcesRequired?: FunctionMaybe<"true" | "false">;
  }
  interface AnimationTimingSVGAttributes {
    begin?: FunctionMaybe<string>;
    dur?: FunctionMaybe<string>;
    end?: FunctionMaybe<string>;
    min?: FunctionMaybe<string>;
    max?: FunctionMaybe<string>;
    restart?: FunctionMaybe<"always" | "whenNotActive" | "never">;
    repeatCount?: FunctionMaybe<number | "indefinite">;
    repeatDur?: FunctionMaybe<string>;
    fill?: FunctionMaybe<"freeze" | "remove">;
  }
  interface AnimationValueSVGAttributes {
    calcMode?: FunctionMaybe<"discrete" | "linear" | "paced" | "spline">;
    values?: FunctionMaybe<string>;
    keyTimes?: FunctionMaybe<string>;
    keySplines?: FunctionMaybe<string>;
    from?: FunctionMaybe<number | string>;
    to?: FunctionMaybe<number | string>;
    by?: FunctionMaybe<number | string>;
  }
  interface AnimationAdditionSVGAttributes {
    attributeName?: FunctionMaybe<string>;
    additive?: FunctionMaybe<"replace" | "sum">;
    accumulate?: FunctionMaybe<"none" | "sum">;
  }
  interface AnimationAttributeTargetSVGAttributes {
    attributeName?: FunctionMaybe<string>;
    attributeType?: FunctionMaybe<"CSS" | "XML" | "auto">;
  }
  interface PresentationSVGAttributes {
    "alignment-baseline"?:
      | "auto"
      | "baseline"
      | "before-edge"
      | "text-before-edge"
      | "middle"
      | "central"
      | "after-edge"
      | "text-after-edge"
      | "ideographic"
      | "alphabetic"
      | "hanging"
      | "mathematical"
      | "inherit";
    "baseline-shift"?: FunctionMaybe<number | string>;
    clip?: FunctionMaybe<string>;
    "clip-path"?: FunctionMaybe<string>;
    "clip-rule"?: "nonzero" | "evenodd" | "inherit";
    color?: FunctionMaybe<string>;
    "color-interpolation"?: "auto" | "sRGB" | "linearRGB" | "inherit";
    "color-interpolation-filters"?: "auto" | "sRGB" | "linearRGB" | "inherit";
    "color-profile"?: FunctionMaybe<string>;
    "color-rendering"?: "auto" | "optimizeSpeed" | "optimizeQuality" | "inherit";
    cursor?: FunctionMaybe<string>;
    direction?: "ltr" | "rtl" | "inherit";
    display?: FunctionMaybe<string>;
    "dominant-baseline"?:
      | "auto"
      | "text-bottom"
      | "alphabetic"
      | "ideographic"
      | "middle"
      | "central"
      | "mathematical"
      | "hanging"
      | "text-top"
      | "inherit";
    "enable-background"?: FunctionMaybe<string>;
    fill?: FunctionMaybe<string>;
    "fill-opacity"?: FunctionMaybe<number | string | "inherit">;
    "fill-rule"?: FunctionMaybe<"nonzero" | "evenodd" | "inherit">;
    filter?: FunctionMaybe<string>;
    "flood-color"?: FunctionMaybe<string>;
    "flood-opacity"?: FunctionMaybe<number | string | "inherit">;
    "font-family"?: FunctionMaybe<string>;
    "font-size"?: FunctionMaybe<string>;
    "font-size-adjust"?: FunctionMaybe<number | string>;
    "font-stretch"?: FunctionMaybe<string>;
    "font-style"?: FunctionMaybe<"normal" | "italic" | "oblique" | "inherit">;
    "font-variant"?: FunctionMaybe<string>;
    "font-weight"?: FunctionMaybe<number | string>;
    "glyph-orientation-horizontal"?: FunctionMaybe<string>;
    "glyph-orientation-vertical"?: FunctionMaybe<string>;
    "image-rendering"?: FunctionMaybe<"auto" | "optimizeQuality" | "optimizeSpeed" | "inherit">;
    kerning?: FunctionMaybe<string>;
    "letter-spacing"?: FunctionMaybe<number | string>;
    "lighting-color"?: FunctionMaybe<string>;
    "marker-end"?: FunctionMaybe<string>;
    "marker-mid"?: FunctionMaybe<string>;
    "marker-start"?: FunctionMaybe<string>;
    mask?: FunctionMaybe<string>;
    opacity?: FunctionMaybe<number | string | "inherit">;
    overflow?: FunctionMaybe<"visible" | "hidden" | "scroll" | "auto" | "inherit">;
    "pointer-events"?: FunctionMaybe<
      | "bounding-box"
      | "visiblePainted"
      | "visibleFill"
      | "visibleStroke"
      | "visible"
      | "painted"
      | "color"
      | "fill"
      | "stroke"
      | "all"
      | "none"
      | "inherit">;
    "shape-rendering"?: FunctionMaybe<"auto" | "optimizeSpeed" | "crispEdges" | "geometricPrecision" | "inherit">;
    "stop-color"?: FunctionMaybe<string>;
    "stop-opacity"?: FunctionMaybe<number | string | "inherit">;
    stroke?: FunctionMaybe<string>;
    "stroke-dasharray"?: FunctionMaybe<string>;
    "stroke-dashoffset"?: FunctionMaybe<number | string>;
    "stroke-linecap"?: FunctionMaybe<"butt" | "round" | "square" | "inherit">;
    "stroke-linejoin"?: FunctionMaybe<"arcs" | "bevel" | "miter" | "miter-clip" | "round" | "inherit">;
    "stroke-miterlimit"?: FunctionMaybe<number | string | "inherit">;
    "stroke-opacity"?: FunctionMaybe<number | string | "inherit">;
    "stroke-width"?: FunctionMaybe<number | string>;
    "text-anchor"?: FunctionMaybe<"start" | "middle" | "end" | "inherit">;
    "text-decoration"?: FunctionMaybe<"none" | "underline" | "overline" | "line-through" | "blink" | "inherit">;
    "text-rendering"?: FunctionMaybe<
      | "auto"
      | "optimizeSpeed"
      | "optimizeLegibility"
      | "geometricPrecision"
      | "inherit">;
    "unicode-bidi"?: FunctionMaybe<string>;
    visibility?: FunctionMaybe<"visible" | "hidden" | "collapse" | "inherit">;
    "word-spacing"?: FunctionMaybe<number | string>;
    "writing-mode"?: FunctionMaybe<"lr-tb" | "rl-tb" | "tb-rl" | "lr" | "rl" | "tb" | "inherit">;
  }
  interface AnimationElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      ConditionalProcessingSVGAttributes {}
  interface ContainerElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "clip-path"
        | "mask"
        | "cursor"
        | "opacity"
        | "filter"
        | "enable-background"
        | "color-interpolation"
        | "color-rendering"
      > {}
  interface FilterPrimitiveElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<PresentationSVGAttributes, "color-interpolation-filters"> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    result?: FunctionMaybe<string>;
  }
  interface SingleInputFilterSVGAttributes {
    in?: FunctionMaybe<string>;
  }
  interface DoubleInputFilterSVGAttributes {
    in?: FunctionMaybe<string>;
    in2?: FunctionMaybe<string>;
  }
  interface FitToViewBoxSVGAttributes {
    viewBox?: FunctionMaybe<string>;
    preserveAspectRatio?: FunctionMaybe<SVGPreserveAspectRatio>;
  }
  interface GradientElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    gradientUnits?: FunctionMaybe<SVGUnits>;
    gradientTransform?: FunctionMaybe<string>;
    spreadMethod?: FunctionMaybe<"pad" | "reflect" | "repeat">;
  }
  interface GraphicsElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "clip-rule"
        | "mask"
        | "pointer-events"
        | "cursor"
        | "opacity"
        | "filter"
        | "display"
        | "visibility"
        | "color-interpolation"
        | "color-rendering"
      > {}
  interface LightSourceElementSVGAttributes<T> extends CoreSVGAttributes<T> {}
  interface NewViewportSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    viewBox?: FunctionMaybe<string>;
  }
  interface ShapeElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "color"
        | "fill"
        | "fill-rule"
        | "fill-opacity"
        | "stroke"
        | "stroke-width"
        | "stroke-linecap"
        | "stroke-linejoin"
        | "stroke-miterlimit"
        | "stroke-dasharray"
        | "stroke-dashoffset"
        | "stroke-opacity"
        | "shape-rendering"
      > {}
  interface TextContentElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "font-family"
        | "font-style"
        | "font-variant"
        | "font-weight"
        | "font-stretch"
        | "font-size"
        | "font-size-adjust"
        | "kerning"
        | "letter-spacing"
        | "word-spacing"
        | "text-decoration"
        | "glyph-orientation-horizontal"
        | "glyph-orientation-vertical"
        | "direction"
        | "unicode-bidi"
        | "text-anchor"
        | "dominant-baseline"
        | "color"
        | "fill"
        | "fill-rule"
        | "fill-opacity"
        | "stroke"
        | "stroke-width"
        | "stroke-linecap"
        | "stroke-linejoin"
        | "stroke-miterlimit"
        | "stroke-dasharray"
        | "stroke-dashoffset"
        | "stroke-opacity"
      > {}
  interface ZoomAndPanSVGAttributes {
    zoomAndPan?: FunctionMaybe<"disable" | "magnify">;
  }
  interface AnimateSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationAttributeTargetSVGAttributes,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes,
      Pick<PresentationSVGAttributes, "color-interpolation" | "color-rendering"> {}
  interface AnimateMotionSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes {
    path?: FunctionMaybe<string>;
    keyPoints?: FunctionMaybe<string>;
    rotate?: FunctionMaybe<number | string | "auto" | "auto-reverse">;
    origin?: FunctionMaybe<"default">;
  }
  interface AnimateTransformSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationAttributeTargetSVGAttributes,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes {
    type?: FunctionMaybe<"translate" | "scale" | "rotate" | "skewX" | "skewY">;
  }
  interface CircleSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    cx?: FunctionMaybe<number | string>;
    cy?: FunctionMaybe<number | string>;
    r?: FunctionMaybe<number | string>;
  }
  interface ClipPathSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "clip-path"> {
    clipPathUnits?: FunctionMaybe<SVGUnits>;
  }
  interface DefsSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {}
  interface DescSVGAttributes<T> extends CoreSVGAttributes<T>, StylableSVGAttributes {}
  interface EllipseSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    cx?: FunctionMaybe<number | string>;
    cy?: FunctionMaybe<number | string>;
    rx?: FunctionMaybe<number | string>;
    ry?: FunctionMaybe<number | string>;
  }
  interface FeBlendSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    mode?: FunctionMaybe<"normal" | "multiply" | "screen" | "darken" | "lighten">;
  }
  interface FeColorMatrixSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    type?: FunctionMaybe<"matrix" | "saturate" | "hueRotate" | "luminanceToAlpha">;
    values?: FunctionMaybe<string>;
  }
  interface FeComponentTransferSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {}
  interface FeCompositeSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    operator?: FunctionMaybe<"over" | "in" | "out" | "atop" | "xor" | "arithmetic">;
    k1?: FunctionMaybe<number | string>;
    k2?: FunctionMaybe<number | string>;
    k3?: FunctionMaybe<number | string>;
    k4?: FunctionMaybe<number | string>;
  }
  interface FeConvolveMatrixSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    order?: FunctionMaybe<number | string>;
    kernelMatrix?: FunctionMaybe<string>;
    divisor?: FunctionMaybe<number | string>;
    bias?: FunctionMaybe<number | string>;
    targetX?: FunctionMaybe<number | string>;
    targetY?: FunctionMaybe<number | string>;
    edgeMode?: FunctionMaybe<"duplicate" | "wrap" | "none">;
    kernelUnitLength?: FunctionMaybe<number | string>;
    preserveAlpha?: FunctionMaybe<"true" | "false">;
  }
  interface FeDiffuseLightingSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "lighting-color"> {
    surfaceScale?: FunctionMaybe<number | string>;
    diffuseConstant?: FunctionMaybe<number | string>;
    kernelUnitLength?: FunctionMaybe<number | string>;
  }
  interface FeDisplacementMapSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    scale?: FunctionMaybe<number | string>;
    xChannelSelector?: FunctionMaybe<"R" | "G" | "B" | "A">;
    yChannelSelector?: FunctionMaybe<"R" | "G" | "B" | "A">;
  }
  interface FeDistantLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    azimuth?: FunctionMaybe<number | string>;
    elevation?: FunctionMaybe<number | string>;
  }
  interface FeFloodSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "flood-color" | "flood-opacity"> {}
  interface FeFuncSVGAttributes<T> extends CoreSVGAttributes<T> {
    type?: "identity" | "table" | "discrete" | "linear" | "gamma";
    tableValues?: FunctionMaybe<string>;
    slope?: FunctionMaybe<number | string>;
    intercept?: FunctionMaybe<number | string>;
    amplitude?: FunctionMaybe<number | string>;
    exponent?: FunctionMaybe<number | string>;
    offset?: FunctionMaybe<number | string>;
  }
  interface FeGaussianBlurSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    stdDeviation?: FunctionMaybe<number | string>;
  }
  interface FeImageSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    preserveAspectRatio?: FunctionMaybe<SVGPreserveAspectRatio>;
    href?: FunctionMaybe<string>;
  }
  interface FeMergeSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes {}
  interface FeMergeNodeSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      SingleInputFilterSVGAttributes {}
  interface FeMorphologySVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    operator?: FunctionMaybe<"erode" | "dilate">;
    radius?: FunctionMaybe<number | string>;
  }
  interface FeOffsetSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    dx?: FunctionMaybe<number | string>;
    dy?: FunctionMaybe<number | string>;
  }
  interface FePointLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    z?: FunctionMaybe<number | string>;
  }
  interface FeSpecularLightingSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "lighting-color"> {
    surfaceScale?: FunctionMaybe<string>;
    specularConstant?: FunctionMaybe<string>;
    specularExponent?: FunctionMaybe<string>;
    kernelUnitLength?: FunctionMaybe<number | string>;
  }
  interface FeSpotLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    z?: FunctionMaybe<number | string>;
    pointsAtX?: FunctionMaybe<number | string>;
    pointsAtY?: FunctionMaybe<number | string>;
    pointsAtZ?: FunctionMaybe<number | string>;
    specularExponent?: FunctionMaybe<number | string>;
    limitingConeAngle?: FunctionMaybe<number | string>;
  }
  interface FeTileSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {}
  interface FeTurbulanceSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes {
    baseFrequency?: FunctionMaybe<number | string>;
    numOctaves?: FunctionMaybe<number | string>;
    seed?: FunctionMaybe<number | string>;
    stitchTiles?: FunctionMaybe<"stitch" | "noStitch">;
    type?: FunctionMaybe<"fractalNoise" | "turbulence">;
  }
  interface FilterSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    filterUnits?: FunctionMaybe<SVGUnits>;
    primitiveUnits?: FunctionMaybe<SVGUnits>;
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    filterRes?: FunctionMaybe<number | string>;
  }
  interface ForeignObjectSVGAttributes<T>
    extends NewViewportSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
  }
  interface GSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {}
  interface ImageSVGAttributes<T>
    extends NewViewportSVGAttributes<T>,
      GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "color-profile" | "image-rendering"> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    preserveAspectRatio?: FunctionMaybe<ImagePreserveAspectRatio>;
    href?: FunctionMaybe<string>;
  }
  interface LineSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    x1?: FunctionMaybe<number | string>;
    y1?: FunctionMaybe<number | string>;
    x2?: FunctionMaybe<number | string>;
    y2?: FunctionMaybe<number | string>;
  }
  interface LinearGradientSVGAttributes<T> extends GradientElementSVGAttributes<T> {
    x1?: FunctionMaybe<number | string>;
    x2?: FunctionMaybe<number | string>;
    y1?: FunctionMaybe<number | string>;
    y2?: FunctionMaybe<number | string>;
  }
  interface MarkerSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    markerUnits?: FunctionMaybe<"strokeWidth" | "userSpaceOnUse">;
    refX?: FunctionMaybe<number | string>;
    refY?: FunctionMaybe<number | string>;
    markerWidth?: FunctionMaybe<number | string>;
    markerHeight?: FunctionMaybe<number | string>;
    orient?: FunctionMaybe<string>;
  }
  interface MaskSVGAttributes<T>
    extends Omit<ContainerElementSVGAttributes<T>, "opacity" | "filter">,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    maskUnits?: FunctionMaybe<SVGUnits>;
    maskContentUnits?: FunctionMaybe<SVGUnits>;
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
  }
  interface MetadataSVGAttributes<T> extends CoreSVGAttributes<T> {}
  interface PathSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    d?: FunctionMaybe<string>;
    pathLength?: FunctionMaybe<number | string>;
  }
  interface PatternSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    patternUnits?: FunctionMaybe<SVGUnits>;
    patternContentUnits?: FunctionMaybe<SVGUnits>;
    patternTransform?: FunctionMaybe<string>;
  }
  interface PolygonSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    points?: FunctionMaybe<string>;
  }
  interface PolylineSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    points?: FunctionMaybe<string>;
  }
  interface RadialGradientSVGAttributes<T> extends GradientElementSVGAttributes<T> {
    cx?: FunctionMaybe<number | string>;
    cy?: FunctionMaybe<number | string>;
    r?: FunctionMaybe<number | string>;
    fx?: FunctionMaybe<number | string>;
    fy?: FunctionMaybe<number | string>;
  }
  interface RectSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    rx?: FunctionMaybe<number | string>;
    ry?: FunctionMaybe<number | string>;
  }
  interface StopSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "stop-color" | "stop-opacity"> {
    offset?: FunctionMaybe<number | string>;
  }
  interface SvgSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      NewViewportSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      ZoomAndPanSVGAttributes,
      PresentationSVGAttributes {
    version?: FunctionMaybe<string>;
    baseProfile?: FunctionMaybe<string>;
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    contentScriptType?: FunctionMaybe<string>;
    contentStyleType?: FunctionMaybe<string>;
    xmlns?: FunctionMaybe<string>;
  }
  interface SwitchSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {}
  interface SymbolSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      NewViewportSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes {}
  interface TextSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "writing-mode" | "text-rendering"> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    dx?: FunctionMaybe<number | string>;
    dy?: FunctionMaybe<number | string>;
    rotate?: FunctionMaybe<number | string>;
    textLength?: FunctionMaybe<number | string>;
    lengthAdjust?: FunctionMaybe<"spacing" | "spacingAndGlyphs">;
  }
  interface TextPathSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      Pick<
        PresentationSVGAttributes,
        "alignment-baseline" | "baseline-shift" | "display" | "visibility"
      > {
    startOffset?: FunctionMaybe<number | string>;
    method?: FunctionMaybe<"align" | "stretch">;
    spacing?: FunctionMaybe<"auto" | "exact">;
    href?: FunctionMaybe<string>;
  }
  interface TSpanSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      Pick<
        PresentationSVGAttributes,
        "alignment-baseline" | "baseline-shift" | "display" | "visibility"
      > {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    dx?: FunctionMaybe<number | string>;
    dy?: FunctionMaybe<number | string>;
    rotate?: FunctionMaybe<number | string>;
    textLength?: FunctionMaybe<number | string>;
    lengthAdjust?: FunctionMaybe<"spacing" | "spacingAndGlyphs">;
  }
  interface UseSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    href?: FunctionMaybe<string>;
  }
  interface ViewSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      FitToViewBoxSVGAttributes,
      ZoomAndPanSVGAttributes {
    viewTarget?: FunctionMaybe<string>;
  }
  /**
   * @type {HTMLElementTagNameMap}
   */
  interface HTMLElementTags {
    a: AnchorHTMLAttributes<HTMLAnchorElement>;
    abbr: HTMLAttributes<HTMLElement>;
    address: HTMLAttributes<HTMLElement>;
    area: AreaHTMLAttributes<HTMLAreaElement>;
    article: HTMLAttributes<HTMLElement>;
    aside: HTMLAttributes<HTMLElement>;
    audio: AudioHTMLAttributes<HTMLAudioElement>;
    b: HTMLAttributes<HTMLElement>;
    base: BaseHTMLAttributes<HTMLBaseElement>;
    bdi: HTMLAttributes<HTMLElement>;
    bdo: HTMLAttributes<HTMLElement>;
    blockquote: BlockquoteHTMLAttributes<HTMLElement>;
    body: HTMLAttributes<HTMLBodyElement>;
    br: HTMLAttributes<HTMLBRElement>;
    button: ButtonHTMLAttributes<HTMLButtonElement>;
    canvas: CanvasHTMLAttributes<HTMLCanvasElement>;
    caption: HTMLAttributes<HTMLElement>;
    cite: HTMLAttributes<HTMLElement>;
    code: HTMLAttributes<HTMLElement>;
    col: ColHTMLAttributes<HTMLTableColElement>;
    colgroup: ColgroupHTMLAttributes<HTMLTableColElement>;
    data: DataHTMLAttributes<HTMLElement>;
    datalist: HTMLAttributes<HTMLDataListElement>;
    dd: HTMLAttributes<HTMLElement>;
    del: HTMLAttributes<HTMLElement>;
    details: DetailsHtmlAttributes<HTMLDetailsElement>;
    dfn: HTMLAttributes<HTMLElement>;
    dialog: DialogHtmlAttributes<HTMLDialogElement>;
    div: HTMLAttributes<HTMLDivElement>;
    dl: HTMLAttributes<HTMLDListElement>;
    dt: HTMLAttributes<HTMLElement>;
    em: HTMLAttributes<HTMLElement>;
    embed: EmbedHTMLAttributes<HTMLEmbedElement>;
    fieldset: FieldsetHTMLAttributes<HTMLFieldSetElement>;
    figcaption: HTMLAttributes<HTMLElement>;
    figure: HTMLAttributes<HTMLElement>;
    footer: HTMLAttributes<HTMLElement>;
    form: FormHTMLAttributes<HTMLFormElement>;
    h1: HTMLAttributes<HTMLHeadingElement>;
    h2: HTMLAttributes<HTMLHeadingElement>;
    h3: HTMLAttributes<HTMLHeadingElement>;
    h4: HTMLAttributes<HTMLHeadingElement>;
    h5: HTMLAttributes<HTMLHeadingElement>;
    h6: HTMLAttributes<HTMLHeadingElement>;
    head: HTMLAttributes<HTMLHeadElement>;
    header: HTMLAttributes<HTMLElement>;
    hgroup: HTMLAttributes<HTMLElement>;
    hr: HTMLAttributes<HTMLHRElement>;
    html: HTMLAttributes<HTMLHtmlElement>;
    i: HTMLAttributes<HTMLElement>;
    iframe: IframeHTMLAttributes<HTMLIFrameElement>;
    img: ImgHTMLAttributes<HTMLImageElement>;
    input: InputHTMLAttributes<HTMLInputElement>;
    ins: InsHTMLAttributes<HTMLModElement>;
    kbd: HTMLAttributes<HTMLElement>;
    label: LabelHTMLAttributes<HTMLLabelElement>;
    legend: HTMLAttributes<HTMLLegendElement>;
    li: LiHTMLAttributes<HTMLLIElement>;
    link: LinkHTMLAttributes<HTMLLinkElement>;
    main: HTMLAttributes<HTMLElement>;
    map: MapHTMLAttributes<HTMLMapElement>;
    mark: HTMLAttributes<HTMLElement>;
    menu: MenuHTMLAttributes<HTMLElement>;
    meta: MetaHTMLAttributes<HTMLMetaElement>;
    meter: MeterHTMLAttributes<HTMLElement>;
    nav: HTMLAttributes<HTMLElement>;
    noscript: HTMLAttributes<HTMLElement>;
    object: ObjectHTMLAttributes<HTMLObjectElement>;
    ol: OlHTMLAttributes<HTMLOListElement>;
    optgroup: OptgroupHTMLAttributes<HTMLOptGroupElement>;
    option: OptionHTMLAttributes<HTMLOptionElement>;
    output: OutputHTMLAttributes<HTMLElement>;
    p: HTMLAttributes<HTMLParagraphElement>;
    picture: HTMLAttributes<HTMLElement>;
    pre: HTMLAttributes<HTMLPreElement>;
    progress: ProgressHTMLAttributes<HTMLProgressElement>;
    q: QuoteHTMLAttributes<HTMLQuoteElement>;
    rp: HTMLAttributes<HTMLElement>;
    rt: HTMLAttributes<HTMLElement>;
    ruby: HTMLAttributes<HTMLElement>;
    s: HTMLAttributes<HTMLElement>;
    samp: HTMLAttributes<HTMLElement>;
    script: ScriptHTMLAttributes<HTMLElement>;
    section: HTMLAttributes<HTMLElement>;
    select: SelectHTMLAttributes<HTMLSelectElement>;
    slot: HTMLSlotElementAttributes;
    small: HTMLAttributes<HTMLElement>;
    source: SourceHTMLAttributes<HTMLSourceElement>;
    span: HTMLAttributes<HTMLSpanElement>;
    strong: HTMLAttributes<HTMLElement>;
    style: StyleHTMLAttributes<HTMLStyleElement>;
    sub: HTMLAttributes<HTMLElement>;
    summary: HTMLAttributes<HTMLElement>;
    sup: HTMLAttributes<HTMLElement>;
    table: HTMLAttributes<HTMLTableElement>;
    tbody: HTMLAttributes<HTMLTableSectionElement>;
    td: TdHTMLAttributes<HTMLTableCellElement>;
    template: TemplateHTMLAttributes<HTMLTemplateElement>;
    textarea: TextareaHTMLAttributes<HTMLTextAreaElement>;
    tfoot: HTMLAttributes<HTMLTableSectionElement>;
    th: ThHTMLAttributes<HTMLTableCellElement>;
    thead: HTMLAttributes<HTMLTableSectionElement>;
    time: TimeHTMLAttributes<HTMLElement>;
    title: HTMLAttributes<HTMLTitleElement>;
    tr: HTMLAttributes<HTMLTableRowElement>;
    track: TrackHTMLAttributes<HTMLTrackElement>;
    u: HTMLAttributes<HTMLElement>;
    ul: HTMLAttributes<HTMLUListElement>;
    var: HTMLAttributes<HTMLElement>;
    video: VideoHTMLAttributes<HTMLVideoElement>;
    wbr: HTMLAttributes<HTMLElement>;
  }
  /**
   * @type {HTMLElementDeprecatedTagNameMap}
   */
  interface HTMLElementDeprecatedTags {
    big: HTMLAttributes<HTMLElement>;
    keygen: KeygenHTMLAttributes<HTMLElement>;
    menuitem: HTMLAttributes<HTMLElement>;
    noindex: HTMLAttributes<HTMLElement>;
    param: ParamHTMLAttributes<HTMLParamElement>;
  }
  /**
   * @type {SVGElementTagNameMap}
   */
  interface SVGElementTags {
    animate: AnimateSVGAttributes<SVGAnimateElement>;
    animateMotion: AnimateMotionSVGAttributes<SVGAnimateMotionElement>;
    animateTransform: AnimateTransformSVGAttributes<SVGAnimateTransformElement>;
    circle: CircleSVGAttributes<SVGCircleElement>;
    clipPath: ClipPathSVGAttributes<SVGClipPathElement>;
    defs: DefsSVGAttributes<SVGDefsElement>;
    desc: DescSVGAttributes<SVGDescElement>;
    ellipse: EllipseSVGAttributes<SVGEllipseElement>;
    feBlend: FeBlendSVGAttributes<SVGFEBlendElement>;
    feColorMatrix: FeColorMatrixSVGAttributes<SVGFEColorMatrixElement>;
    feComponentTransfer: FeComponentTransferSVGAttributes<SVGFEComponentTransferElement>;
    feComposite: FeCompositeSVGAttributes<SVGFECompositeElement>;
    feConvolveMatrix: FeConvolveMatrixSVGAttributes<SVGFEConvolveMatrixElement>;
    feDiffuseLighting: FeDiffuseLightingSVGAttributes<SVGFEDiffuseLightingElement>;
    feDisplacementMap: FeDisplacementMapSVGAttributes<SVGFEDisplacementMapElement>;
    feDistantLight: FeDistantLightSVGAttributes<SVGFEDistantLightElement>;
    feDropShadow: Partial<SVGFEDropShadowElement>;
    feFlood: FeFloodSVGAttributes<SVGFEFloodElement>;
    feFuncA: FeFuncSVGAttributes<SVGFEFuncAElement>;
    feFuncB: FeFuncSVGAttributes<SVGFEFuncBElement>;
    feFuncG: FeFuncSVGAttributes<SVGFEFuncGElement>;
    feFuncR: FeFuncSVGAttributes<SVGFEFuncRElement>;
    feGaussianBlur: FeGaussianBlurSVGAttributes<SVGFEGaussianBlurElement>;
    feImage: FeImageSVGAttributes<SVGFEImageElement>;
    feMerge: FeMergeSVGAttributes<SVGFEMergeElement>;
    feMergeNode: FeMergeNodeSVGAttributes<SVGFEMergeNodeElement>;
    feMorphology: FeMorphologySVGAttributes<SVGFEMorphologyElement>;
    feOffset: FeOffsetSVGAttributes<SVGFEOffsetElement>;
    fePointLight: FePointLightSVGAttributes<SVGFEPointLightElement>;
    feSpecularLighting: FeSpecularLightingSVGAttributes<SVGFESpecularLightingElement>;
    feSpotLight: FeSpotLightSVGAttributes<SVGFESpotLightElement>;
    feTile: FeTileSVGAttributes<SVGFETileElement>;
    feTurbulence: FeTurbulanceSVGAttributes<SVGFETurbulenceElement>;
    filter: FilterSVGAttributes<SVGFilterElement>;
    foreignObject: ForeignObjectSVGAttributes<SVGForeignObjectElement>;
    g: GSVGAttributes<SVGGElement>;
    image: ImageSVGAttributes<SVGImageElement>;
    line: LineSVGAttributes<SVGLineElement>;
    linearGradient: LinearGradientSVGAttributes<SVGLinearGradientElement>;
    marker: MarkerSVGAttributes<SVGMarkerElement>;
    mask: MaskSVGAttributes<SVGMaskElement>;
    metadata: MetadataSVGAttributes<SVGMetadataElement>;
    mpath: Partial<SVGMPathElement>;
    path: PathSVGAttributes<SVGPathElement>;
    pattern: PatternSVGAttributes<SVGPatternElement>;
    polygon: PolygonSVGAttributes<SVGPolygonElement>;
    polyline: PolylineSVGAttributes<SVGPolylineElement>;
    radialGradient: RadialGradientSVGAttributes<SVGRadialGradientElement>;
    rect: RectSVGAttributes<SVGRectElement>;
    set: Partial<SVGSetElement>;
    stop: StopSVGAttributes<SVGStopElement>;
    svg: SvgSVGAttributes<SVGSVGElement>;
    switch: SwitchSVGAttributes<SVGSwitchElement>;
    symbol: SymbolSVGAttributes<SVGSymbolElement>;
    text: TextSVGAttributes<SVGTextElement>;
    textPath: TextPathSVGAttributes<SVGTextPathElement>;
    tspan: TSpanSVGAttributes<SVGTSpanElement>;
    use: UseSVGAttributes<SVGUseElement>;
    view: ViewSVGAttributes<SVGViewElement>;
  }
  interface IntrinsicElements extends HTMLElementTags, HTMLElementDeprecatedTags, SVGElementTags {}
}
`}[t],"typescript",ew.parse(`file://root/node_modules/solid-js/${t}`));const e=u((t,n)=>zg.createModel(`declare module '${t}';`,"typescript",ew.parse(`file://root/${n}`)),"createEmptyModuleModel");e("@suid/*","suid-globals.d.ts"),e("@mui/*","mui-globals.d.ts"),e("react","react-globals.d.ts")}u(phe,"setupEditor");function mhe(o){phe();const e=o.value!==void 0;let t=!1;const[n,i]=n$({controlled:()=>o.value,default:()=>String(o.defaultValue),name:"CodeEditor"}),s=t$(),r=r$();let a;return i$(()=>{a?.dispose()}),s$(()=>{const l=ew.parse(`file://root/${o.fileName}`);zg.getModel(l)?.dispose();const c=zg.createModel(o.value??"",o.language??"typescript",l);a=zg.create(s.ref,{model:c,theme:r.darkMode?"vs-dark":"vs-light",minimap:{enabled:!1},automaticLayout:!0}),a.onDidChangeModelContent(()=>{const d=c.getLinesContent().join(`
`);i(d),t||o.onChange?.(d)}),o.onReady?.()}),v2(()=>{a?.updateOptions({theme:r.darkMode?"vs-dark":"vs-light"})}),v2(l=>{if(e||l){const c=n();typeof c=="string"&&(t=l,a?.getModel()?.setValue(c),t=!1)}return!1},!0),o$(e$,{get sx(){return{width:"100%",height:"400px",...o.sx||{}}},ref:s})}u(mhe,"CodeEditor");const spe=Object.freeze(Object.defineProperty({__proto__:null,default:mhe},Symbol.toStringTag,{value:"Module"}));export{spe as C,ov as m,U6 as t};
