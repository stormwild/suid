var C=Object.defineProperty;var o=(e,t)=>C(e,"name",{value:t,configurable:!0});import{a as F,i as N,b as q,t as x,v as L}from"./vite.config.ts-faa4c0cf.js";const k=`{
  "name": "suid-project",
  "version": "0.0.0",
  "private": true,
  "scripts": {
    "build": "vite build",
    "dev": "vite",
    "preview": "vite preview"
  },
  "dependencies": {
    "solid-js": "*"
  },
  "devDependencies": {
    "@suid/vite-plugin": "*",
    "typescript": "*",
    "vite": "*",
    "vite-plugin-solid": "*"
  }
}
`;function K(e={}){const t=JSON.parse(k);if(t.dependencies)for(const i in t.dependencies)t.dependencies[i]={"@suid/base":"0.7.0","@suid/codemod":"0.9.3","ts-morph":"^17.0.1","create-suid":"0.1.5","@suid/css":"0.2.2","@suid/icons-material":"0.5.10","@suid/material":"0.11.0","@suid/site":"0.10.0","solid-js":"^1.6.7",vite:"^4.0.4","vite-plugin-solid":"2.5.0","@suid/styled-engine":"0.4.2","@suid/system":"0.9.0","@suid/types":"0.4.0","@suid/utils":"0.6.1","@suid/vite-plugin":"0.1.2",typescript:"^4.9.4"}[i]||"*";if(t.devDependencies)for(const i in t.devDependencies)t.devDependencies[i]={"@suid/base":"0.7.0","@suid/codemod":"0.9.3","ts-morph":"^17.0.1","create-suid":"0.1.5","@suid/css":"0.2.2","@suid/icons-material":"0.5.10","@suid/material":"0.11.0","@suid/site":"0.10.0","solid-js":"^1.6.7",vite:"^4.0.4","vite-plugin-solid":"2.5.0","@suid/styled-engine":"0.4.2","@suid/system":"0.9.0","@suid/types":"0.4.0","@suid/utils":"0.6.1","@suid/vite-plugin":"0.1.2",typescript:"^4.9.4"}[i]||"*";if(t.peerDependencies)for(const i in t.peerDependencies)t.peerDependencies[i]={"@suid/base":"0.7.0","@suid/codemod":"0.9.3","ts-morph":"^17.0.1","create-suid":"0.1.5","@suid/css":"0.2.2","@suid/icons-material":"0.5.10","@suid/material":"0.11.0","@suid/site":"0.10.0","solid-js":"^1.6.7",vite:"^4.0.4","vite-plugin-solid":"2.5.0","@suid/styled-engine":"0.4.2","@suid/system":"0.9.0","@suid/types":"0.4.0","@suid/utils":"0.6.1","@suid/vite-plugin":"0.1.2",typescript:"^4.9.4"}[i]||"*";return t.dependencies={...t.dependencies||{},...["@suid/base","@suid/codemod","@suid/create-suid","@suid/css","@suid/icons-material","@suid/material","@suid/site","@suid/styled-engine","@suid/system","@suid/types","@suid/utils","@suid/vite-plugin"].reduce((i,n)=>(e.appCode?.includes(n)&&(i[n]={"@suid/base":"0.7.0","@suid/codemod":"0.9.3","ts-morph":"^17.0.1","create-suid":"0.1.5","@suid/css":"0.2.2","@suid/icons-material":"0.5.10","@suid/material":"0.11.0","@suid/site":"0.10.0","solid-js":"^1.6.7",vite:"^4.0.4","vite-plugin-solid":"2.5.0","@suid/styled-engine":"0.4.2","@suid/system":"0.9.0","@suid/types":"0.4.0","@suid/utils":"0.6.1","@suid/vite-plugin":"0.1.2",typescript:"^4.9.4"}[n]||"*"),i),{})},t}o(K,"buildPkg");function G(e){const t=e.appCode??F,i=K({appCode:t});return{template:"node",title:"Project",description:"Example",...e||{},files:{"src/App.tsx":t,"src/index.tsx":N,"index.html":q,"package.json":JSON.stringify(i,null,2),"tsconfig.json":x,"vite.config.ts":L,...e.files||{}}}}o(G,"buildProjectOptions");var j=["angular-cli","create-react-app","html","javascript","node","polymer","typescript","vue"],E={clickToLoad:function(e){return f("ctl",e)},devToolsHeight:function(e){return S("devtoolsheight",e)},forceEmbedLayout:function(e){return f("embed",e)},hideDevTools:function(e){return f("hidedevtools",e)},hideExplorer:function(e){return f("hideExplorer",e)},hideNavigation:function(e){return f("hideNavigation",e)},showSidebar:function(e){return function(t,i){return typeof i=="boolean"?"showSidebar="+(i?"1":"0"):""}(0,e)},openFile:function(e){return function(t,i){return(Array.isArray(i)?i:[i]).filter(function(n){return typeof n=="string"&&n.trim()!==""}).map(function(n){return"file="+encodeURIComponent(n.trim())})}(0,e).join("&")},terminalHeight:function(e){return S("terminalHeight",e)},theme:function(e){return P("theme",["light","dark"],e)},view:function(e){return P("view",["preview","editor"],e)}};function I(e){e===void 0&&(e={});var t=Object.entries(e).map(function(i){var n=i[0],r=i[1];return r!=null&&E.hasOwnProperty(n)?E[n](r):""}).filter(Boolean);return t.length?"?"+t.join("&"):""}o(I,"n");function f(e,t){return t===!0?e+"=1":""}o(f,"r");function S(e,t){return typeof t=="number"&&t>=0&&t<=100?e+"="+Math.round(t):""}o(S,"i");function P(e,t,i){return typeof i=="string"&&t.includes(i)?e+"="+i:""}o(P,"o");function O(){return Math.random().toString(36).slice(2,6)+Math.random().toString(36).slice(2,6)}o(O,"a");function g(e,t){return""+T(t)+e+I(t)}o(g,"d");function y(e,t){var i={forceEmbedLayout:!0};return t&&typeof t=="object"&&Object.assign(i,t),""+T(i)+e+I(i)}o(y,"c");function T(e){return e===void 0&&(e={}),typeof e.origin=="string"?e.origin:"https://stackblitz.com"}o(T,"u");function w(e,t,i){if(!t||!e||!e.parentNode)throw new Error("Invalid Element");e.id&&(t.id=e.id),e.className&&(t.className=e.className),function(n,r){r&&typeof r=="object"&&(Object.hasOwnProperty.call(r,"height")&&(n.height=""+r.height),Object.hasOwnProperty.call(r,"width")&&(n.width=""+r.width)),n.height||(n.height="300"),n.width||n.setAttribute("style","width:100%;")}(t,i),e.parentNode.replaceChild(t,e)}o(w,"s");function _(e){if(typeof e=="string"){var t=document.getElementById(e);if(!t)throw new Error("Could not find element with id '"+e+"'");return t}if(e instanceof HTMLElement)return e;throw new Error("Invalid element: "+e)}o(_,"l");function b(e){return e&&e.newWindow===!1?"_self":"_blank"}o(b,"p");function v(){return v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},v.apply(this,arguments)}o(v,"f");var A=function(){function e(i){this.port=void 0,this.pending={},this.port=i,this.port.onmessage=this.messageListener.bind(this)}o(e,"e");var t=e.prototype;return t.request=function(i){var n=this,r=i.type,s=i.payload,d=O();return new Promise(function(c,l){n.pending[d]={resolve:c,reject:l},n.port.postMessage({type:r,payload:v({},s,{__reqid:d})})})},t.messageListener=function(i){var n;if(typeof((n=i.data.payload)==null?void 0:n.__reqid)=="string"){var r=i.data,s=r.type,d=r.payload,c=d.__reqid,l=d.__error;this.pending[c]&&(d.__success?this.pending[c].resolve(function(u){var a=v({},u);return delete a.__reqid,delete a.__success,delete a.__error,Object.keys(a).length?a:null}(d)):this.pending[c].reject(l?s+": "+l:s),delete this.pending[c])}},e}(),U=function(){function e(i,n){var r=this;this._rdc=void 0,this.editor={openFile:function(s){return r._rdc.request({type:"SDK_OPEN_FILE",payload:{path:s}})},setCurrentFile:function(s){return r._rdc.request({type:"SDK_SET_CURRENT_FILE",payload:{path:s}})},setTheme:function(s){return r._rdc.request({type:"SDK_SET_UI_THEME",payload:{theme:s}})},setView:function(s){return r._rdc.request({type:"SDK_SET_UI_VIEW",payload:{view:s}})},showSidebar:function(s){return s===void 0&&(s=!0),r._rdc.request({type:"SDK_TOGGLE_SIDEBAR",payload:{visible:s}})}},this.preview={origin:"",getUrl:function(){return r._rdc.request({type:"SDK_GET_PREVIEW_URL",payload:{}}).then(function(s){var d;return(d=s?.url)!=null?d:null})},setUrl:function(s){if(s===void 0&&(s="/"),typeof s!="string"||!s.startsWith("/"))throw new Error("Invalid argument: expected a path starting with '/', got '"+s+"'");return r._rdc.request({type:"SDK_SET_PREVIEW_URL",payload:{path:s}})}},this._rdc=new A(i),Object.defineProperty(this.preview,"origin",{value:typeof n.previewOrigin=="string"?n.previewOrigin:null,writable:!1})}o(e,"e");var t=e.prototype;return t.applyFsDiff=function(i){var n=o(function(r){return r!==null&&typeof r=="object"},"t");if(!n(i)||!n(i.create))throw new Error("Invalid diff object: expected diff.create to be an object.");if(!Array.isArray(i.destroy))throw new Error("Invalid diff object: expected diff.create to be an array.");return this._rdc.request({type:"SDK_APPLY_FS_DIFF",payload:i})},t.getDependencies=function(){return this._rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})},t.getFsSnapshot=function(){return this._rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})},e}(),h=[],H=o(function(e){var t=this;this.element=void 0,this.id=void 0,this.pending=void 0,this.vm=void 0,this.id=O(),this.element=e,this.pending=new Promise(function(i,n){var r=o(function(u){var a=u.data;a?.action==="SDK_INIT_SUCCESS"&&a.id===t.id&&(t.vm=new U(u.ports[0],a.payload),i(t.vm),d())},"r"),s=o(function(){var u;(u=t.element.contentWindow)==null||u.postMessage({action:"SDK_INIT",id:t.id},"*")},"i");function d(){window.clearInterval(l),window.removeEventListener("message",r)}o(d,"o"),window.addEventListener("message",r),s();var c=0,l=window.setInterval(function(){if(t.vm)d();else{if(c>=20)return d(),n("Timeout: Unable to establish a connection with the StackBlitz VM"),void h.forEach(function(u,a){u.id===t.id&&h.splice(a,1)});c++,s()}},500)}),h.push(this)},"y");function p(e,t){var i=document.createElement("input");return i.type="hidden",i.name=e,i.value=t,i}o(p,"g");function D(e){if(!j.includes(e.template)){var t=j.map(function(r){return"'"+r+"'"}).join(", ");console.warn("Unsupported project.template: must be one of "+t)}var i=e.template==="node",n=document.createElement("form");return n.method="POST",n.setAttribute("style","display:none!important;"),n.appendChild(p("project[title]",e.title)),n.appendChild(p("project[description]",e.description)),n.appendChild(p("project[template]",e.template)),e.dependencies&&(i?console.warn("Invalid project.dependencies: dependencies must be provided as a 'package.json' file when using the 'node' template."):n.appendChild(p("project[dependencies]",JSON.stringify(e.dependencies)))),e.settings&&n.appendChild(p("project[settings]",JSON.stringify(e.settings))),Object.keys(e.files).forEach(function(r){typeof e.files[r]=="string"&&n.appendChild(p("project[files]["+r+"]",e.files[r]))}),n}o(D,"w");function m(e){var t,i,n,r;return e!=null&&e.contentWindow?(r=(i=e)instanceof Element?"element":"id",(t=(n=h.find(function(s){return s[r]===i}))!=null?n:null)!=null?t:new H(e)).pending:Promise.reject("Provided element is not an iframe.")}o(m,"_");var W={connect:m,embedGithubProject:function(e,t,i){var n=_(e),r=document.createElement("iframe");return r.src=y("/github/"+t,i),w(n,r,i),m(r)},embedProject:function(e,t,i){var n,r=_(e),s=function(c,l){var u=D(c);return u.action=y("/run",l),u.id="sb","<html><head><title></title></head><body>"+u.outerHTML+"<script>document.getElementById('"+u.id+"').submit();<\/script></body></html>"}(t,i),d=document.createElement("iframe");return w(r,d,i),(n=d.contentDocument)==null||n.write(s),m(d)},embedProjectId:function(e,t,i){var n=_(e),r=document.createElement("iframe");return r.src=y("/edit/"+t,i),w(n,r,i),m(r)},openGithubProject:function(e,t){var i=g("/github/"+e,t),n=b(t);window.open(i,n)},openProject:function(e,t){(function(i,n){var r=D(i);r.action=g("/run",n),r.target=b(n),document.body.appendChild(r),r.submit(),document.body.removeChild(r)})(e,t)},openProjectId:function(e,t){var i=g("/edit/"+e,t),n=b(t);window.open(i,n)}};export{G as a,W as b};
